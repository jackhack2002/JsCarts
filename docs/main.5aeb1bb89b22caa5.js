"use strict";(self.webpackChunkAngular_e_commerce_site=self.webpackChunkAngular_e_commerce_site||[]).push([[179],{1249:(yt,be,B)=>{B.d(be,{N:()=>K});var C=B(5619),m=B(5879);let K=(()=>{class oe{constructor(){this.cartItems=[],this.cartItemsSubject=new C.X(this.cartItems)}getCartItems(){return this.cartItemsSubject.asObservable()}addToCart(se){const Ee=this.cartItems.find(He=>He.id===se.id);Ee?(Ee.quantity++,Ee.totalPrice=Ee.price*Ee.quantity):(se.quantity=1,se.totalPrice=se.price,this.cartItems.push(se))}removeFromCart(se){const Ee=this.cartItems.findIndex(He=>He.id===se.id);-1!==Ee&&(this.cartItems.splice(Ee,1),this.cartItemsSubject.next(this.cartItems))}clearCart(){this.cartItems=[],this.cartItemsSubject.next(this.cartItems)}static#e=this.\u0275fac=function(Ee){return new(Ee||oe)};static#t=this.\u0275prov=m.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"})}return oe})()},751:(yt,be,B)=>{B.d(be,{M:()=>oe});var C=B(5619),m=B(2096),K=B(5879);let oe=(()=>{class ae{constructor(){this.productdetail=[],this.productSubject=new C.X(this.productdetail),this.shirts=[{id:"s1",name:"Shirt 1",price:500,image:"../../assets/shirt/shirt1.jpeg",quantity:1,totalPrice:0},{id:"s2",name:"Shirt 2",price:750,image:"../../assets/shirt/shirt2.jpeg",quantity:1,totalPrice:0},{id:"s3",name:"Shirt 3",price:500,image:"../../assets/shirt/shirt3.jpeg",quantity:1,totalPrice:0},{id:"s4",name:"Shirt 4",price:750,image:"../../assets/shirt/shirt4.jpeg",quantity:1,totalPrice:0},{id:"s5",name:"Shirt 5",price:500,image:"../../assets/shirt/shirt5.jpeg",quantity:1,totalPrice:0},{id:"s6",name:"Product 6",price:750,image:"../../assets/shirt/shirt6.jpeg",quantity:1,totalPrice:0},{id:"s7",name:"Product 7",price:500,image:"../../assets/shirt/shirt7.jpeg",quantity:1,totalPrice:0},{id:"s8",name:"Product 8",price:750,image:"../../assets/shirt/shirt8.jpeg",quantity:1,totalPrice:0},{id:"s9",name:"Product 9",price:500,image:"../../assets/shirt/shirt9.jpeg",quantity:1,totalPrice:0},{id:"s10",name:"Product 10",price:750,image:"../../assets/shirt/shirt10.jpeg",quantity:1,totalPrice:0}],this.mobiles=[{id:"m1",name:"Mobile 1",price:500,image:"../../assets/mobile/mobile1.webp",quantity:1,totalPrice:0},{id:"m2",name:"Mobile 2",price:750,image:"../../assets/mobile/mobile2.jpg",quantity:1,totalPrice:0},{id:"m3",name:"Mobile 3",price:500,image:"../../assets/mobile/mobile3.png",quantity:1,totalPrice:0},{id:"m4",name:"Mobile 4",price:750,image:"../../assets/mobile/mobile4.webp",quantity:1,totalPrice:0},{id:"m5",name:"Mobile 5",price:500,image:"../../assets/mobile/mobile5.jpeg",quantity:1,totalPrice:0},{id:"m6",name:"Product 6",price:750,image:"../../assets/mobile/mobile1.webp",quantity:1,totalPrice:0},{id:"m7",name:"Product 7",price:500,image:"../../assets/mobile/mobile2.jpg",quantity:1,totalPrice:0},{id:"m8",name:"Product 8",price:750,image:"../../assets/mobile/mobile3.png",quantity:1,totalPrice:0},{id:"m9",name:"Product 9",price:500,image:"../../assets/mobile/mobile4.webp",quantity:1,totalPrice:0},{id:"m10",name:"Product 10",price:750,image:"../../assets/mobile/mobile5.jpeg",quantity:1,totalPrice:0}],this.laptop=[{id:"l1",name:"HP Laptop 39.6 cm 15s-eq2212AU",price:34199,image:"../../assets/laptop/laptop1.png",quantity:1,totalPrice:0},{id:"l2",name:'HP Stream 14-ax040wm 14"',price:21343.88,image:"../../assets/laptop/laptop2.png",quantity:1,totalPrice:0},{id:"l3",name:'HP 14 Series 14" 14-dq0050nr',price:72900,image:"../../assets/laptop/laptop3.png",quantity:1,totalPrice:0},{id:"l4",name:"HP Pavilion 15-eg2009TU - Silver",price:68999,image:"../../assets/laptop/laptop4.png",quantity:1,totalPrice:0},{id:"l5",name:"Lenovo Legion 5i Pro",price:144990,image:"../../assets/laptop/laptop5.png",quantity:1,totalPrice:0}]}productDetail(Ee){const He=this.productdetail.find(De=>De.id===Ee.id);console.log(He)}getDetail(){return this.productSubject.asObservable()}getShirts(){return(0,m.of)(this.shirts)}getMobiles(){return(0,m.of)(this.mobiles)}getLaptop(){return(0,m.of)(this.laptop)}static#e=this.\u0275fac=function(He){return new(He||ae)};static#t=this.\u0275prov=K.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"})}return ae})()},5699:(yt,be,B)=>{var C=B(6593),m=B(5879),K=B(6814),oe=B(2459),ae=B(5592),se=B(7453),Ee=B(4829),He=B(9940),De=B(8251),X=B(7400),ne=B(2714),Oe=B(7398);let je=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(m.Qsj),m.Y36(m.SBq))};static#t=this.\u0275dir=m.lG2({type:n})}return n})(),Je=(()=>{class n extends je{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=m.n5z(n)))(s||n)}}();static#t=this.\u0275dir=m.lG2({type:n,features:[m.qOj]})}return n})();const Ue=new m.OlP("NgValueAccessor"),Jt={provide:Ue,useExisting:(0,m.Gpc)(()=>Le),multi:!0},Ie=new m.OlP("CompositionEventMode");let Le=(()=>{class n extends je{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function un(){const n=(0,K.q)()?(0,K.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Ie,8))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&m.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[m._Bn([Jt]),m.qOj]})}return n})();const Ze=new m.OlP("NgValidators"),Xe=new m.OlP("NgAsyncValidators");function Re(n){return null!=n}function Te(n){return(0,m.QGY)(n)?(0,oe.D)(n):n}function Me(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ve(n,e){return e.map(t=>t(n))}function et(n){return n.map(e=>function _t(n){return!n.validate}(e)?e:t=>e.validate(t))}function Dt(n){return null!=n?function Yn(n){if(!n)return null;const e=n.filter(Re);return 0==e.length?null:function(t){return Me(Ve(t,e))}}(et(n)):null}function Vt(n){return null!=n?function cn(n){if(!n)return null;const e=n.filter(Re);return 0==e.length?null:function(t){return function ue(...n){const e=(0,He.jO)(n),{args:t,keys:r}=(0,se.D)(n),s=new ae.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let _=c,D=c;for(let P=0;P<c;P++){let k=!1;(0,Ee.Xf)(t[P]).subscribe((0,De.x)(u,G=>{k||(k=!0,D--),g[P]=G},()=>_--,void 0,()=>{(!_||!k)&&(D||u.next(r?(0,ne.n)(r,g):g),u.complete())}))}});return e?s.pipe((0,X.Z)(e)):s}(Ve(t,e).map(Te)).pipe((0,Oe.U)(Me))}}(et(n)):null}function kn(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Dn(n){return n?Array.isArray(n)?n:[n]:[]}function It(n,e){return Array.isArray(n)?n.includes(e):n===e}function vr(n,e){const t=Dn(e);return Dn(n).forEach(s=>{It(t,s)||t.push(s)}),t}function ts(n,e){return Dn(e).filter(t=>!It(n,t))}class Er{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Vt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ln extends Er{get formDirective(){return null}get path(){return null}}class ur extends Er{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $n{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bt=(()=>{class n extends $n{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(ur,2))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&m.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[m.qOj]})}return n})(),Fn=(()=>{class n extends $n{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Ln,10))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&m.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[m.qOj]})}return n})();const Gr="VALID",zr="INVALID",ii="PENDING",te="DISABLED";function $(n){return(ie(n)?n.validators:n)||null}function H(n,e){return(ie(e)?e.asyncValidators:n)||null}function ie(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class vt{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gr}get invalid(){return this.status===zr}get pending(){return this.status==ii}get disabled(){return this.status===te}get enabled(){return this.status!==te}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ts(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ts(e,this._rawAsyncValidators))}hasValidator(e){return It(this._rawValidators,e)}hasAsyncValidator(e){return It(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ii,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=te,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gr,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gr||this.status===ii)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?te:Gr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ii,this._hasOwnPendingAsyncValidator=!0;const t=Te(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?te:this.errors?zr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ii)?ii:this._anyControlsHaveStatus(zr)?zr:Gr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ie(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function z(n){return Array.isArray(n)?Dt(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function W(n){return Array.isArray(n)?Vt(n):n||null}(this._rawAsyncValidators)}}class xt extends vt{constructor(e,t,r){super($(t),H(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function tt(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new m.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Be(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[t])throw new m.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e?e[s]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ki=new m.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>is}),is="always";function he(n,e,t=is){ct(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function gr(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ti(n,e)})}(n,e),function si(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function jn(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ti(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function At(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pt(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ct(n,e){const t=function Qn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(kn(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function xn(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(kn(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();pt(e._rawValidators,s),pt(e._rawAsyncValidators,s)}function Ti(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const oi={provide:Ln,useExisting:(0,m.Gpc)(()=>Or)},zi=(()=>Promise.resolve())();let Or=(()=>{class n extends Ln{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new xt({},Dt(t),Vt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){zi.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),he(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){zi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){zi.then(()=>{const r=this._findContainer(t.path),s=new xt({});(function Gi(n,e){ct(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){zi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){zi.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Vu(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Ze,10),m.Y36(Xe,10),m.Y36(ki,8))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&m.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([oi]),m.qOj]})}return n})();function Ro(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ss(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const co=class extends vt{constructor(e=null,t,r){super($(t),H(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ie(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ss(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ro(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ro(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ss(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},oa={provide:ur,useExisting:(0,m.Gpc)(()=>ho)},ju=(()=>Promise.resolve())();let ho=(()=>{class n extends ur{constructor(t,r,s,u,c,g){super(),this._changeDetectorRef=c,this.callSetDisabledState=g,this.control=new co,this._registered=!1,this.name="",this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function So(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Le?t=u:function bo(n){return Object.getPrototypeOf(n.constructor)===Je}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qs(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){he(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ju.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,m.VuI)(r);ju.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Ae(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Ln,9),m.Y36(Ze,10),m.Y36(Xe,10),m.Y36(Ue,10),m.Y36(m.sBO,8),m.Y36(ki,8))};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([oa]),m.qOj,m.TTD]})}return n})(),Hu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),Ps=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({})}return n})(),No=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({imports:[Ps]})}return n})(),Ih=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ki,useValue:t.callSetDisabledState??is}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({imports:[No]})}return n})();var Zi=B(9692),Gu=B(1249),zu=B(751);function ed(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",12)(1,"div",13),m._UZ(2,"img",14),m.TgZ(3,"div",15),m._uU(4),m._UZ(5,"br"),m._uU(6),m.ALo(7,"currency"),m._UZ(8,"br"),m.TgZ(9,"button",16),m.NdJ("click",function(){m.CHM(t);const s=m.oxw().$implicit,u=m.oxw();return m.KtG(u.addToCart(s))}),m._uU(10," Add to Cart "),m.qZA()()()()}if(2&n){const t=m.oxw().$implicit;m.xp6(2),m.s9C("alt",t.name),m.Q6J("src",t.image,m.LSH),m.xp6(2),m.hij(" ",t.name,""),m.xp6(2),m.hij(" ",m.xi3(7,4,t.price,"INR"),"")}}function Th(n,e){if(1&n&&(m.TgZ(0,"div"),m.YNc(1,ed,11,7,"div",11),m.qZA()),2&n){const t=e.index;m.xp6(1),m.Q6J("ngIf",t<4)}}function Wu(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",12)(1,"div",13),m._UZ(2,"img",14),m.TgZ(3,"div",15),m._uU(4),m._UZ(5,"br"),m._uU(6),m.ALo(7,"currency"),m._UZ(8,"br"),m.TgZ(9,"button",17),m.NdJ("click",function(){m.CHM(t);const s=m.oxw().$implicit,u=m.oxw();return m.KtG(u.addToCart(s))}),m._uU(10," Add to Cart "),m.qZA()()()()}if(2&n){const t=m.oxw().$implicit;m.xp6(2),m.s9C("alt",t.name),m.Q6J("src",t.image,m.LSH),m.xp6(2),m.hij(" ",t.name,""),m.xp6(2),m.hij(" ",m.xi3(7,4,t.price,"INR"),"")}}function qu(n,e){if(1&n&&(m.TgZ(0,"div"),m.YNc(1,Wu,11,7,"div",11),m.qZA()),2&n){const t=e.index;m.xp6(1),m.Q6J("ngIf",t<4)}}function tu(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",12)(1,"div",13),m._UZ(2,"img",14),m.TgZ(3,"div",15),m._uU(4),m._UZ(5,"br"),m._uU(6),m.ALo(7,"currency"),m._UZ(8,"br"),m.TgZ(9,"button",17),m.NdJ("click",function(){m.CHM(t);const s=m.oxw().$implicit,u=m.oxw();return m.KtG(u.addToCart(s))}),m._uU(10," Add to Cart "),m.qZA()()()()}if(2&n){const t=m.oxw().$implicit;m.xp6(2),m.s9C("alt",t.name),m.Q6J("src",t.image,m.LSH),m.xp6(2),m.hij(" ",t.name,""),m.xp6(2),m.hij(" ",m.xi3(7,4,t.price,"INR"),"")}}function Oo(n,e){if(1&n&&(m.TgZ(0,"div"),m.YNc(1,tu,11,7,"div",11),m.qZA()),2&n){const t=e.index;m.xp6(1),m.Q6J("ngIf",t<4)}}let Kl=(()=>{class n{constructor(t,r,s){this.router=t,this.cartService=r,this.productService=s,this.shirts=[],this.mobiles=[],this.laptop=[],this.productService.getShirts().subscribe(u=>{this.shirts=u}),this.productService.getMobiles().subscribe(u=>{this.mobiles=u}),this.productService.getLaptop().subscribe(u=>{this.laptop=u})}addToCart(t){localStorage.getItem("IsAuthorized")?this.cartService.addToCart(t):(alert("Login to continue ..."),this.router.navigate(["/login"]))}navigateToProductDetails(t){this.productService.productDetail(t),this.router.navigate(["/dashboard/details"])}navigateToShirt(){this.router.navigate(["dashboard/products/shirt"])}navigateToMobile(){this.router.navigate(["dashboard/products/mobile"])}navigateToLaptop(){this.router.navigate(["dashboard/products/laptop"])}ViewDetails(){this.productService.getDetail()}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Zi.F0),m.Y36(Gu.N),m.Y36(zu.M))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-product-list"]],decls:28,vars:3,consts:[[1,"m-1"],[1,"w-screen","h-screen"],[1,"w-full","bg-slate-400","h-fit","mt-1"],[1,"flex","justify-between","w-full","h-10","p-6","mx-3","my-auto"],[1,"font-serif","text-3xl"],[1,"mr-10","text-blue-600",3,"click"],[1,"flex","flex-wrap","items-stretch","justify-start","w-full","gap-5","p-5","mx-10","h-fit"],[4,"ngFor","ngForOf"],[1,"bg-white","h-1","min-w-full"],[1,"w-full","bg-slate-400","h-fit"],[1,"w-full","bg-slate-400","h-fit","mt-5"],["class","product-card",4,"ngIf"],[1,"product-card"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700","mt-2",3,"click"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),m._uU(5,"SHIRTS"),m.qZA(),m.TgZ(6,"button",5),m.NdJ("click",function(){return s.navigateToShirt()}),m._uU(7,"Show more >"),m.qZA()(),m.TgZ(8,"div",6),m.YNc(9,Th,2,1,"div",7),m.qZA(),m._UZ(10,"div",8),m.TgZ(11,"div",9)(12,"div",3)(13,"h2",4),m._uU(14,"MOBILES"),m.qZA(),m.TgZ(15,"button",5),m.NdJ("click",function(){return s.navigateToMobile()}),m._uU(16,"Show more >"),m.qZA()(),m.TgZ(17,"div",6),m.YNc(18,qu,2,1,"div",7),m.qZA(),m._UZ(19,"div",8),m.TgZ(20,"div",10)(21,"div",3)(22,"h2",4),m._uU(23,"LAPTOPS"),m.qZA(),m.TgZ(24,"button",5),m.NdJ("click",function(){return s.navigateToLaptop()}),m._uU(25,"Show more >"),m.qZA()(),m.TgZ(26,"div",6),m.YNc(27,Oo,2,1,"div",7),m.qZA()()()()()()),2&r&&(m.xp6(9),m.Q6J("ngForOf",s.shirts),m.xp6(9),m.Q6J("ngForOf",s.mobiles),m.xp6(9),m.Q6J("ngForOf",s.laptop))},dependencies:[K.sg,K.O5,K.H9]})}return n})();var Js=B(7394);class Fi extends Js.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Ki={setInterval(n,e,...t){const{delegate:r}=Ki;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ki;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var td=B(9039);class wr extends Fi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return Ki.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Ki.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,td.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const fs={now:()=>(fs.delegate||Date).now(),delegate:void 0};class Tr{constructor(e,t=Tr.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Tr.now=fs.now;class nu extends Tr{constructor(e,t=Tr.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const po=new nu(wr),ru=po;var ko=B(671);let Zu=(()=>{class n{constructor(){this.currentImageIndex=0,this.totalImages=5,this.imageChangeSubscription=new Js.w0}ngOnInit(){this.imageChangeSubscription=function fa(n=0,e=po){return n<0&&(n=0),function Lo(n=0,e,t=ru){let r=-1;return null!=e&&((0,ko.K)(e)?t=e:r=e),new ae.y(s=>{let u=function ha(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let c=0;return t.schedule(function(){s.closed||(s.next(c++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,n,e)}(3e3).subscribe(()=>{this.nextImage()})}nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.totalImages}prevImage(){this.currentImageIndex=(this.currentImageIndex-1+this.totalImages)%this.totalImages}ngOnDestroy(){this.imageChangeSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-carousel"]],decls:15,vars:10,consts:[[1,"m-1"],[1,"absolute","flex","w-full","h-fit","sm:h-80"],[1,"flex","justify-between","w-full","mx-3","my-auto"],[1,"text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"],["id","slider",1,"w-full","mx-px","my-px","bg-blue-600","h-fit","sm:h-80"],["src","../../assets/banner/banner1.jpg",1,"w-full","h-72","sm:h-full"],["src","../../assets/banner/banner2.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","../../assets/banner/banner3.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","../../assets/banner/banner4.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","../../assets/banner/banner5.jpg",1,"hidden","w-full","h-72","sm:h-full"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m.NdJ("click",function(){return s.prevImage()}),m.O4$(),m.TgZ(4,"svg",4),m._UZ(5,"path",5),m.qZA()(),m.kcU(),m.TgZ(6,"button",3),m.NdJ("click",function(){return s.nextImage()}),m.O4$(),m.TgZ(7,"svg",4),m._UZ(8,"path",6),m.qZA()()()(),m.kcU(),m.TgZ(9,"div",7),m._UZ(10,"img",8)(11,"img",9)(12,"img",10)(13,"img",11)(14,"img",12),m.qZA()()),2&r&&(m.xp6(10),m.ekj("hidden",0!==s.currentImageIndex),m.xp6(1),m.ekj("hidden",1!==s.currentImageIndex),m.xp6(1),m.ekj("hidden",2!==s.currentImageIndex),m.xp6(1),m.ekj("hidden",3!==s.currentImageIndex),m.xp6(1),m.ekj("hidden",4!==s.currentImageIndex))}})}return n})(),Ku=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"h-fit","mt-3"],[1,"relative","h-32","w-32","..."]],template:function(r,s){1&r&&(m._UZ(0,"app-carousel"),m.TgZ(1,"div",0),m._UZ(2,"app-product-list"),m.qZA(),m._UZ(3,"div",1))},dependencies:[Kl,Zu]})}return n})();var Pe=B(5861),Kr=(B(8290),B(534));(0,Kr.registerVersion)("firebase","10.5.2","app");const Rp=new class Ql extends nu{}(class Yl extends wr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var pa=B(9397),ga=B(3093),su=B(5137);const ma=new m.GfV("ANGULARFIRE2_VERSION");class Qu{constructor(){return((n,e)=>{const t=(0,Kr.getApps)(),r=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r})(au)}}const au="app-check";function Vo(){}class A{zone;delegate;constructor(e,t=Rp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const s=this.zone;return this.delegate.schedule(function(c){s.runGuarded(()=>{e.apply(this,[c])})},t,r)}}class F{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vo,{},Vo,Vo)),t.pipe((0,pa.b)({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let x=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new A(Zone.current)),this.insideAngular=t.run(()=>new A(Zone.current,po)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(m.LFG(m.R0b))};static \u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function L(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Fe(n){return n.pipe((0,ga.Q)(L().outsideAngular))}function Mt(n){return function gn(n){return function(t){return(t=t.lift(new F(n.ngZone))).pipe((0,su.R)(n.outsideAngular),(0,ga.Q)(n.insideAngular))}}(L())(n)}var pn=B(3106);pn.Z.registerVersion("firebase","10.5.2","app-compat");const Vs=["ngOnDestroy"];class Yr{constructor(e){return e}}const Vi=new m.OlP("angularfire2.app.options"),hr=new m.OlP("angularfire2.app.name");function Ci(n,e,t){const s="object"==typeof t&&t||{};s.name=s.name||"string"==typeof t&&t||"[DEFAULT]";const c=pn.Z.apps.filter(g=>g&&g.name===s.name)[0]||e.runOutsideAngular(()=>pn.Z.initializeApp(n,s));try{if(JSON.stringify(n)!==JSON.stringify(c.options)){const g=!!module.hot;xp("error",`${c.name} Firebase App already initialized with different options${g?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Yr(c)}const xp=(n,...e)=>{(0,m.X6Q)()&&typeof console<"u"&&console[n](...e)},Jn={provide:Yr,useFactory:Ci,deps:[Vi,m.R0b,[new m.FiY,hr]]};let uu=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Vi,useValue:t},{provide:hr,useValue:r}]}}constructor(t){pn.Z.registerVersion("angularfire",ma.full,"core"),pn.Z.registerVersion("angularfire",ma.full,"app-compat"),pn.Z.registerVersion("angular",m.q4F.full,t.toString())}static \u0275fac=function(r){return new(r||n)(m.LFG(m.Lbi))};static \u0275mod=m.oAB({type:n});static \u0275inj=m.cJS({providers:[Jn]})}return n})();function ya(n,e,t,r,s){const[,u,c]=globalThis.\u0275AngularfireInstanceCache.find(g=>g[0]===n)||[];if(u)return function mi(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(s,c)||(Ju("error",`${e} was already initialized on the ${t} Firebase App with different settings.${va?" You may need to reload as Firebase is not HMR aware.":""}`),Ju("warn",{is:s,was:c})),u;{const g=r();return globalThis.\u0275AngularfireInstanceCache.push([n,g,s]),g}}const va=typeof module<"u"&&!!module.hot,Ju=(n,...e)=>{(0,m.X6Q)()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ea=B(8645),yn=B(2096),nd=B(3019),Us=B(4664);class rd extends Ea.x{constructor(e=1/0,t=1/0,r=fs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)g=_;g&&r.splice(0,g+1)}}}var Xs=B(3020);function Xu(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,Xs.B)({connector:()=>new rd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var Jl=B(1374),Mp=B(4674);function el(n,e){return(0,Mp.m)(e)?(0,Us.w)(()=>n,e):(0,Us.w)(()=>n)}var tl=B(2181);const Ft=new m.OlP("angularfire2.auth.use-emulator"),sd=new m.OlP("angularfire2.auth.settings"),Ch=new m.OlP("angularfire2.auth.tenant-id"),Ui=new m.OlP("angularfire2.auth.langugage-code"),Dh=new m.OlP("angularfire2.auth.use-device-language"),go=new m.OlP("angularfire.auth.persistence"),od=(n,e,t,r,s,u,c,g)=>ya(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),c)for(const[D,P]of Object.entries(c))_.settings[D]=P;return g&&_.setPersistence(g),_},[t,r,s,u,c,g]);let mo=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,s,u,c,g,_,D,P,k,G,J){const de=new Ea.x,Se=(0,yn.of)(void 0).pipe((0,ga.Q)(c.outsideAngular),(0,Us.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8290)))),(0,Oe.U)(()=>Ci(t,u,r)),(0,Oe.U)(xe=>od(xe,u,g,D,P,k,_,G)),Xu({bufferSize:1,refCount:!1}));if((0,K.PM)(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,yn.of)(null);else{Se.pipe((0,Jl.P)()).subscribe();const xe=Se.pipe((0,Us.w)(Qe=>Qe.getRedirectResult().then(Ct=>Ct,()=>null)),Mt,Xu({bufferSize:1,refCount:!1})),ht=Se.pipe((0,Us.w)(Qe=>new ae.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Qe.onAuthStateChanged(Qt=>Ct.next(Qt),Qt=>Ct.error(Qt),()=>Ct.complete()))})))),mt=Se.pipe((0,Us.w)(Qe=>new ae.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Qe.onIdTokenChanged(Qt=>Ct.next(Qt),Qt=>Ct.error(Qt),()=>Ct.complete()))}))));this.authState=xe.pipe(el(ht),(0,su.R)(c.outsideAngular),(0,ga.Q)(c.insideAngular)),this.user=xe.pipe(el(mt),(0,su.R)(c.outsideAngular),(0,ga.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Us.w)(Qe=>Qe?(0,oe.D)(Qe.getIdToken()):(0,yn.of)(null))),this.idTokenResult=this.user.pipe((0,Us.w)(Qe=>Qe?(0,oe.D)(Qe.getIdTokenResult()):(0,yn.of)(null))),this.credential=(0,nd.T)(xe,de,this.authState.pipe((0,tl.h)(Qe=>!Qe))).pipe((0,Oe.U)(Qe=>Qe?.user?Qe:null),(0,su.R)(c.outsideAngular),(0,ga.Q)(c.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(s,u)=>t.runOutsideAngular(()=>{if(n[u])return r?.spy?.get&&r.spy.get(u,n[u]),n[u];if(Vs.indexOf(u)>-1)return()=>{};const c=e.toPromise().then(g=>{const _=g?.[u];return"function"==typeof _?_.bind(g):_?.then?_.then(D=>t.run(()=>D)):t.run(()=>_)});return new Proxy(()=>{},{get:(g,_)=>c[_],apply:(g,_,D)=>c.then(P=>{const k=P?.(...D);return r?.spy?.apply&&r.spy.apply(u,D,k),k})})})}))(this,Se,u,{spy:{apply:(xe,ht,mt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&mt.then(Qe=>de.next(Qe))}}})}static \u0275fac=function(r){return new(r||n)(m.LFG(Vi),m.LFG(hr,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(x),m.LFG(Ft,8),m.LFG(sd,8),m.LFG(Ch,8),m.LFG(Ui,8),m.LFG(Dh,8),m.LFG(go,8),m.LFG(Qu,8))};static \u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),lu=(()=>{class n{constructor(){pn.Z.registerVersion("angularfire",ma.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=m.oAB({type:n});static \u0275inj=m.cJS({providers:[mo]})}return n})();var Xl=B(7921),Xn=B(9360);function ad(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,De.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var nt,Ia=B(6699),ze=B(3997),Ht=B(4537),Bi=B(7879),q=B(9058),ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bs={},gs=gs||{},Lt=ai||self;function _o(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rl="closure_uid_"+(1e9*Math.random()>>>0),ui=0;function yo(n,e,t){return n.call.apply(n.bind,arguments)}function ec(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function _r(n,e,t){return(_r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yo:ec).apply(null,arguments)}function Yi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Qr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[s].apply(r,c)}}function wa(){this.s=this.s,this.o=this.o}wa.prototype.s=!1,wa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ah(n){Object.prototype.hasOwnProperty.call(n,rl)&&n[rl]||(n[rl]=++ui)}(this)},wa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Np=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function tc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ud(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_o(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let c=0;c<u;c++)n[s+c]=r[c]}else n.push(r)}}function _i(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_i.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",()=>{},e),Lt.removeEventListener("test",()=>{},e)}catch{}return n}();function b(n){return/^[\s\xa0]*$/.test(n)}function I(){var n=Lt.navigator;return n&&(n=n.userAgent)?n:""}function R(n){return-1!=I().indexOf(n)}function N(n){return N[" "](n),n}N[" "]=function(){};var vn,n,Y=R("Opera"),ye=R("Trident")||R("MSIE"),me=R("Edge"),ot=me||ye,Wt=R("Gecko")&&!(-1!=I().toLowerCase().indexOf("webkit")&&!R("Edge"))&&!(R("Trident")||R("MSIE"))&&!R("Edge"),tn=-1!=I().toLowerCase().indexOf("webkit")&&!R("Edge");function sn(){var n=Lt.document;return n?n.documentMode:void 0}e:{var Uo="",vo=(n=I(),Wt?/rv:([^\);]+)(\)|;)/.exec(n):me?/Edge\/([\d\.]+)/.exec(n):ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tn?/WebKit\/(\S+)/.exec(n):Y?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(vo&&(Uo=vo?vo[1]:""),ye){var cu=sn();if(null!=cu&&cu>parseFloat(Uo)){vn=String(cu);break e}}vn=Uo}var bh=Lt.document&&ye&&(sn()||parseInt(vn,10))||void 0;function du(n,e){if(_i.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Wt){e:{try{N(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Bo[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&du.$.h.call(this)}}Qr(du,_i);var Bo={2:"touch",3:"pen",4:"mouse"};du.prototype.h=function(){du.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hu="closure_listenable_"+(1e6*Math.random()|0),nc=0;function Sh(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++nc,this.fa=this.ia=!1}function Ta(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ca(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cd(n){const e={};for(const t in n)e[t]=n[t];return e}const jm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sl(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<jm.length;u++)t=jm[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function pu(n){this.src=n,this.g={},this.h=0}function dd(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Np(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Ta(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Op(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}pu.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Op(n,e,r,s);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new Sh(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var hd="closure_lm_"+(1e6*Math.random()|0),Hm={};function Rh(n,e,t,r,s){if(r&&r.once)return Sv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Rh(n,e[u],t,r,s);return null}return t=Ph(t),n&&n[hu]?n.O(e,t,nl(r)?!!r.capture:!!r,s):$m(n,e,t,!1,r,s)}function $m(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=nl(s)?!!s.capture:!!s,g=fd(n);if(g||(n[hd]=g=new pu(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function Gm(){const e=Aa;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)T||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(zm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Sv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Sv(n,e[u],t,r,s);return null}return t=Ph(t),n&&n[hu]?n.P(e,t,nl(r)?!!r.capture:!!r,s):$m(n,e,t,!0,r,s)}function rc(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)rc(n,e[u],t,r,s);else r=nl(r)?!!r.capture:!!r,t=Ph(t),n&&n[hu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Op(u=n.g[e],t,r,s))&&(Ta(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=fd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Op(e,t,r,s)),(t=-1<n?e[n]:null)&&Da(t))}function Da(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[hu])dd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fd(e))?(dd(t,n),0==t.h&&(t.src=null,e[hd]=null)):Ta(n)}}}function zm(n){return n in Hm?Hm[n]:Hm[n]="on"+n}function Aa(n,e){if(n.fa)n=!0;else{e=new du(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Da(n),n=t.call(r,e)}return n}function fd(n){return(n=n[hd])instanceof pu?n:null}var ic="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ph(n){return"function"==typeof n?n:(n[ic]||(n[ic]=function(e){return n.handleEvent(e)}),n[ic])}function Vr(){wa.call(this),this.i=new pu(this),this.S=this,this.J=null}function Jr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new _i(e,n);else if(e instanceof _i)e.target=e.target||n;else{var s=e;sl(e=new _i(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=xh(c,r,!0,e)&&s}if(s=xh(c=e.g=n,r,!0,e)&&s,s=xh(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=xh(c=e.g=t[u],r,!1,e)&&s}function xh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var g=c.listener,_=c.la||c.src;c.ia&&dd(n.i,c),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}Qr(Vr,wa),Vr.prototype[hu]=!0,Vr.prototype.removeEventListener=function(n,e,t,r){rc(this,n,e,t,r)},Vr.prototype.N=function(){if(Vr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ta(t[r]);delete n.g[e],n.h--}}this.J=null},Vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Vr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ms=Lt.JSON.stringify;function pd(){var n=Mh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lp=new class Wm{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new sc,n=>n.reset());class sc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Fp(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Rv(n){Lt.setTimeout(()=>{throw n},0)}let gu,oc=!1,Mh=new class kp{constructor(){this.h=this.g=null}add(e,t){const r=Lp.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},gd=()=>{const n=Lt.Promise.resolve(void 0);gu=()=>{n.then(Pv)}};var Pv=()=>{for(var n;n=pd();){try{n.h.call(n.g)}catch(t){Rv(t)}var e=Lp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oc=!1};function ba(n,e){Vr.call(this),this.h=n||1,this.g=e||Lt,this.j=_r(this.qb,this),this.l=Date.now()}function to(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function md(n,e,t){if("function"==typeof n)t&&(n=_r(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_r(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function Nh(n){n.g=md(()=>{n.g=null,n.i&&(n.i=!1,Nh(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qr(ba,Vr),(nt=ba.prototype).ga=!1,nt.T=null,nt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jr(this,"tick"),this.ga&&(to(this),this.start()))}},nt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.N=function(){ba.$.N.call(this),to(this),delete this.g};class Oh extends wa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Nh(this)}N(){super.N(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(n){wa.call(this),this.h=n,this.g={}}Qr(Sa,wa);var Vp=[];function Di(n,e,t,r){Array.isArray(t)||(t&&(Vp[0]=t.toString()),t=Vp);for(var s=0;s<t.length;s++){var u=Rh(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Up(n){Ca(n.g,function(e,t){this.g.hasOwnProperty(t)&&Da(e)},n),n.g={}}function _d(){this.g=!0}function ol(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ac(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return ms(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Sa.prototype.N=function(){Sa.$.N.call(this),Up(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_d.prototype.Ea=function(){this.g=!1},_d.prototype.info=function(){};var _s={},al=null;function yd(){return al=al||new Vr}function vd(n){_i.call(this,_s.Ta,n)}function jo(n){const e=yd();Jr(e,new vd(e))}function Lh(n,e){_i.call(this,_s.STAT_EVENT,n),this.stat=e}function Qi(n){const e=yd();Jr(e,new Lh(e,n))}function xv(n,e){_i.call(this,_s.Ua,n),this.size=e}function Fh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}_s.Ta="serverreachability",Qr(vd,_i),_s.STAT_EVENT="statevent",Qr(Lh,_i),_s.Ua="timingevent",Qr(xv,_i);var Hp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Mv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qm(){}function ul(){}qm.prototype.h=null;var Gp,ll={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $p(){_i.call(this,"d")}function Ur(){_i.call(this,"c")}function mu(){}function Ed(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Sa(this),this.P=uc,this.V=new ba(n=ot?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ys}function ys(){this.i=null,this.g="",this.h=!1}Qr($p,_i),Qr(Ur,_i),Qr(mu,qm),mu.prototype.g=function(){return new XMLHttpRequest},mu.prototype.i=function(){return{}},Gp=new mu;var uc=45e3,Vh={},cl={};function dl(n,e,t){n.L=1,n.v=wd(no(e)),n.s=t,n.S=!0,Zm(n,null)}function Zm(n,e){n.G=Date.now(),li(n),n.A=no(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),kv(t.i,"t",r),n.C=0,t=n.l.J,n.h=new ys,n.g=cg(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Oh(_r(n.Pa,n,n.g),n.O)),Di(n.U,n.g,"readystatechange",n.nb),e=n.I?cd(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),jo(),function kh(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var P=D[0];D=D[1];var k=P.split("_");c=2<=k.length&&"type"==k[1]?c+(P+"=")+D+"&":c+(P+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function zp(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Uh(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=cw(n,t),s==cl){4==e&&(n.o=4,Qi(14),r=!1),ol(n.j,n.m,null,"[Incomplete Response]");break}if(s==Vh){n.o=4,Qi(15),ol(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ol(n.j,n.m,s,null),Wp(n,s)}zp(n)&&s!=cl&&s!=Vh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xh(e),e.M=!0,Qi(11))):(ol(n.j,n.m,t,"[Invalid Chunked Response]"),$o(n),jh(n))}function cw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cl:(t=Number(e.substring(t,r)),isNaN(t)?Vh:(r+=1)+t>e.length?cl:(e=e.slice(r,r+t),n.C=r+t,e))}function li(n){n.Y=Date.now()+n.P,Bh(n,n.P)}function Bh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fh(_r(n.lb,n),e)}function Ho(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function jh(n){0==n.l.H||n.J||Sd(n.l,n)}function $o(n){Ho(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,to(n.V),Up(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Wp(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Gh(t.i,n)))if(!n.K&&Gh(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Si(t),ml(t)}_l(t),Qi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Fh(_r(t.ib,t),6e3));if(1>=$h(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else yu(t,11)}else if((n.K||t.g==n)&&Si(t),!b(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const P=D[3];null!=P&&(t.ra=P,t.l.info("VER="+t.ra));const k=D[4];null!=k&&(t.Ga=k,t.l.info("SVER="+t.Ga));const G=D[5];null!=G&&"number"==typeof G&&0<G&&(t.L=r=1.5*G,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const de=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var u=r.i;u.g||-1==de.indexOf("spdy")&&-1==de.indexOf("quic")&&-1==de.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(zh(u,u.h),u.h=null))}if(r.F){const Se=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.Da=Se,Wn(r.I,r.F,Se))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=yl(r,r.J?r.pa:null,r.Y),c.K){Vv(r.i,c);var g=c,_=r.L;_&&g.setTimeout(_),g.B&&(Ho(g),li(g)),r.g=c}else bi(r);0<t.j.length&&Qh(t)}else"stop"!=D[0]&&"close"!=D[0]||yu(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?yu(t,7):lg(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}jo()}catch{}}function Zp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_o(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function qp(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_o(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function dw(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_o(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(nt=Ed.prototype).setTimeout=function(n){this.P=n},nt.nb=function(n){n=n.target;const e=this.M;e&&3==Eo(n)?e.l():this.Pa(n)},nt.Pa=function(n){try{if(n==this.g)e:{const P=Eo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>P)&&(3!=P||ot||this.g&&(this.h.h||this.g.ja()||t_(this.g)))){this.J||4!=P||7==e||jo(),Ho(this);var t=this.g.da();this.ca=t;t:if(zp(this)){var r=t_(this.g);n="";var s=r.length,u=4==Eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$o(this),jh(this);var c="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function Bp(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,P,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Qi(12),$o(this),jh(this);break e}ol(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wp(this,t)}this.S?(Uh(this,P,c),ot&&this.i&&3==P&&(Di(this.U,this.V,"tick",this.mb),this.V.start())):(ol(this.j,this.m,c,null),Wp(this,c)),4==P&&$o(this),this.i&&!this.J&&(4==P?Sd(this.l,this):(this.i=!1,li(this)))}else(function og(n){const e={};n=(n.g&&2<=Eo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(b(n[r]))continue;var t=Fp(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function fu(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Qi(12)):(this.o=0,Qi(13)),$o(this),jh(this)}}}catch{}},nt.mb=function(){if(this.g){var n=Eo(this.g),e=this.g.ja();this.C<e.length&&(Ho(this),Uh(this,n,e),this.i&&4!=n&&li(this))}},nt.cancel=function(){this.J=!0,$o(this)},nt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function jp(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(jo(),Qi(17)),$o(this),this.o=2,jh(this)):Bh(this,this.Y-n)};var Id=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Go(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Go){this.h=n.h,Hh(this,n.j),this.s=n.s,this.g=n.g,hl(this,n.m),this.l=n.l;var e=n.i,t=new Td;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ym(this,t),this.o=n.o}else n&&(e=String(n).match(Id))?(this.h=!1,Hh(this,e[1]||"",!0),this.s=lc(e[2]||""),this.g=lc(e[3]||"",!0),hl(this,e[4]),this.l=lc(e[5]||"",!0),Ym(this,e[6]||"",!0),this.o=lc(e[7]||"")):(this.h=!1,this.i=new Td(null,this.h))}function no(n){return new Go(n)}function Hh(n,e,t){n.j=t?lc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ym(n,e,t){e instanceof Td?(n.i=e,function Lv(n,e){e&&!n.j&&(pl(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Cd(this,r),kv(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=cc(e,dc)),n.i=new Td(e,n.h))}function Wn(n,e,t){n.i.set(e,t)}function wd(n){return Wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function lc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function cc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zo),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zo(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Go.prototype.toString=function(){var n=[],e=this.j;e&&n.push(cc(e,Kp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(cc(e,Kp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(cc(t,"/"==t.charAt(0)?Yp:Ov,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",cc(t,fl)),n.join("")};var Kp=/[#\/\?@]/g,Ov=/[#\?:]/g,Yp=/[#\?]/g,dc=/[#\?@]/g,fl=/#/g;function Td(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pl(n){n.g||(n.g=new Map,n.h=0,n.i&&function Km(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Cd(n,e){pl(n),e=_u(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Qm(n,e){return pl(n),e=_u(n,e),n.g.has(e)}function kv(n,e,t){Cd(n,e),0<t.length&&(n.i=null,n.g.set(_u(n,e),tc(t)),n.h+=t.length)}function _u(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Dd(n){this.l=n||Jm,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ka&&Lt.g.Ka()&&Lt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Td.prototype).add=function(n,e){pl(this),this.i=null,n=_u(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){pl(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},nt.ta=function(){pl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},nt.Z=function(n){pl(this);let e=[];if("string"==typeof n)Qm(this,n)&&(e=e.concat(this.g.get(_u(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return pl(this),this.i=null,Qm(this,n=_u(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var s=u;""!==c[r]&&(s+="="+encodeURIComponent(String(c[r]))),n.push(s)}}return this.i=n.join("&")};var Jm=10;function Xm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $h(n){return n.h?1:n.g?n.g.size:0}function Gh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zh(n,e){n.g?n.g.add(e):n.h=e}function Vv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Wh(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return tc(n.i)}Dd.prototype.cancel=function(){if(this.i=Wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Qp=class{stringify(n){return Lt.JSON.stringify(n,void 0)}parse(n){return Lt.JSON.parse(n,void 0)}};function Jp(){this.g=new Qp}function hw(n,e,t){const r=t||"";try{Zp(n,function(s,u){let c=s;nl(s)&&(c=ms(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function hc(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function qh(n){this.l=n.ec||null,this.j=n.ob||!1}function eg(n,e){Vr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=tg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qr(qh,qm),qh.prototype.g=function(){return new eg(this.l,this.j)},qh.prototype.i=function(n){return function(){return n}}({}),Qr(eg,Vr);var tg=0;function Uv(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Zh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ad(n)}function Ad(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=eg.prototype).open=function(n,e){if(this.readyState!=tg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ad(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Lt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zh(this)),this.readyState=tg},nt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ad(this)),this.g&&(this.readyState=3,Ad(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uv(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},nt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zh(this):Ad(this),3==this.readyState&&Uv(this)}},nt.Za=function(n){this.g&&(this.response=this.responseText=n,Zh(this))},nt.Ya=function(n){this.g&&(this.response=n,Zh(this))},nt.ka=function(){this.g&&Zh(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(eg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Kh=Lt.JSON.parse;function Hn(n){Vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ng,this.L=this.M=!1}Qr(Hn,Vr);var ng="",rg=/^https?$/i,e_=["POST","PUT"];function ig(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,sg(n),Ra(n)}function sg(n){n.F||(n.F=!0,Jr(n,"complete"),Jr(n,"error"))}function pc(n){if(n.h&&typeof gs<"u"&&(!n.C[1]||4!=Eo(n)||2!=n.da()))if(n.v&&4==Eo(n))md(n.La,0,n);else if(Jr(n,"readystatechange"),4==Eo(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var s=String(n.I).match(Id)[1]||null;!s&&Lt.self&&Lt.self.location&&(s=Lt.self.location.protocol.slice(0,-1)),r=!rg.test(s?s.toLowerCase():"")}t=r}if(t)Jr(n,"complete"),Jr(n,"success");else{n.m=6;try{var u=2<Eo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",sg(n)}}finally{Ra(n)}}}function Ra(n,e){if(n.g){gl(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Jr(n,"ready");try{t.onreadystatechange=r}catch{}}}function gl(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Eo(n){return n.g?n.g.readyState:0}function t_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ng:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ag(n){let e="";return Ca(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Ai(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ag(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wn(n,e,t))}function Pa(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ug(n){this.Ga=0,this.j=[],this.l=new _d,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pa("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pa("baseRetryDelayMs",5e3,n),this.hb=Pa("retryDelaySeedMs",1e4,n),this.eb=Pa("forwardChannelMaxRetries",2,n),this.xa=Pa("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Dd(n&&n.concurrentRequestLimit),this.Ja=new Jp,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function lg(n){if(Yh(n),3==n.H){var e=n.W++,t=no(n.I);if(Wn(t,"SID",n.K),Wn(t,"RID",e),Wn(t,"TYPE","terminate"),js(n,t),(e=new Ed(n,n.l,e)).L=2,e.v=wd(no(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon)try{t=Lt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cg(e.l,null),e.g.ha(e.v)),e.G=Date.now(),li(e)}Wo(n)}function ml(n){n.g&&(Xh(n),n.g.cancel(),n.g=null)}function Yh(n){ml(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),Si(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function Qh(n){if(!Xm(n.i)&&!n.m){n.m=!0;var e=n.Na;gu||gd(),oc||(gu(),oc=!0),Mh.add(e,n),n.C=0}}function Jh(n,e){var t;t=e?e.m:n.W++;const r=no(n.I);Wn(r,"SID",n.K),Wn(r,"RID",t),Wn(r,"AID",n.V),js(n,r),n.o&&n.s&&Ai(r,n.o,n.s),t=new Ed(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=bd(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),zh(n.i,t),dl(t,r,e)}function js(n,e){n.na&&Ca(n.na,function(t,r){Wn(e,r,t)}),n.h&&Zp({},function(t,r){Wn(e,r,t)})}function bd(n,e,t){t=Math.min(n.j.length,t);var r=n.h?_r(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=s[_].g;const P=s[_].map;if(D-=u,0>D)u=Math.max(0,s[_].g-100),g=!1;else try{hw(P,c,"req"+D+"_")}catch{r&&r(P)}}if(g){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function bi(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;gu||gd(),oc||(gu(),oc=!0),Mh.add(e,n),n.A=0}}function _l(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Fh(_r(n.Ma,n),tf(n,n.A)),n.A++,0))}function Xh(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function ef(n){n.g=new Ed(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=no(n.wa);Wn(e,"RID","rpc"),Wn(e,"SID",n.K),Wn(e,"AID",n.V),Wn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Wn(e,"TO",n.qa),Wn(e,"TYPE","xmlhttp"),js(n,e),n.o&&n.s&&Ai(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=wd(no(e)),t.s=null,t.S=!0,Zm(t,n)}function Si(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function Sd(n,e){var t=null;if(n.g==e){Si(n),Xh(n),n.g=null;var r=2}else{if(!Gh(n.i,e))return;t=e.F,Vv(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;Jr(r=yd(),new xv(r,t)),Qh(n)}else bi(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function Ji(n,e){return!($h(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Fh(_r(n.Na,n,e),tf(n,n.C)),n.C++,0)))}(n,e)||2==r&&_l(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:yu(n,5);break;case 4:yu(n,10);break;case 3:yu(n,6);break;default:yu(n,2)}}function tf(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function yu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=_r(n.pb,n);t||(t=new Go("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||Hh(t,"https"),wd(t)),function Xp(n,e){const t=new _d;if(Lt.Image){const r=new Image;r.onload=Yi(hc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yi(hc,t,r,"TestLoadImage: error",!1,e),r.onabort=Yi(hc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yi(hc,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qi(2);n.H=0,n.h&&n.h.za(e),Wo(n),Yh(n)}function Wo(n){if(n.H=0,n.ma=[],n.h){const e=Wh(n.i);(0!=e.length||0!=n.j.length)&&(ud(n.ma,e),ud(n.ma,n.j),n.i.i.length=0,tc(n.j),n.j.length=0),n.h.ya()}}function yl(n,e,t){var r=t instanceof Go?no(t):new Go(t);if(""!=r.g)e&&(r.g=e+"."+r.g),hl(r,r.m);else{var s=Lt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Go(null);r&&Hh(u,r),e&&(u.g=e),s&&hl(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Wn(r,t,e),Wn(r,"VER",n.ra),js(n,r),r}function cg(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hn(t&&n.Ha&&!n.va?new qh({ob:!0}):n.va)).Oa(n.J),e}function dg(){}function gc(){if(ye&&!(10<=Number(bh)))throw Error("Environmental error: no available transport.")}function Ri(n,e){Vr.call(this),this.g=new ug(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!b(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!b(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _c(this)}function n_(n){$p.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mc(){Ur.call(this),this.status=1}function _c(n){this.g=n}function v(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function h(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((s=u+((c=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function f(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(nt=Hn.prototype).Oa=function(n){this.M=n},nt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gp.g(),this.C=function Nv(n){return n.h||(n.h=n.i())}(this.u?this.u:Gp),this.g.onreadystatechange=_r(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void ig(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Lt.FormData&&n instanceof Lt.FormData,!(0<=Np(e_,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gl(this),0<this.B&&((this.L=function fc(n){return ye&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_r(this.ua,this)):this.A=md(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){ig(this,u)}},nt.ua=function(){typeof gs<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Jr(this,"complete"),Jr(this,"abort"),Ra(this))},nt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ra(this,!0)),Hn.$.N.call(this)},nt.La=function(){this.s||(this.G||this.v||this.l?pc(this):this.kb())},nt.kb=function(){pc(this)},nt.isActive=function(){return!!this.g},nt.da=function(){try{return 2<Eo(this)?this.g.status:-1}catch{return-1}},nt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Kh(e)}},nt.Ia=function(){return this.m},nt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=ug.prototype).ra=8,nt.H=1,nt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Ed(this,this.l,n);let u=this.s;if(this.U&&(u?(u=cd(u),sl(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bd(this,s,e),Wn(t=no(this.I),"RID",n),Wn(t,"CVER",22),this.F&&Wn(t,"X-HTTP-Session-Id",this.F),js(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(ag(u)))+"&"+e:this.o&&Ai(t,this.o,u)),zh(this.i,s),this.bb&&Wn(t,"TYPE","init"),this.P?(Wn(t,"$req",e),Wn(t,"SID","null"),s.aa=!0,dl(s,t,null)):dl(s,t,e),this.H=2}}else 3==this.H&&(n?Jh(this,n):0==this.j.length||Xm(this.i)||Jh(this))},nt.Ma=function(){if(this.u=null,ef(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Fh(_r(this.jb,this),n)}},nt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qi(10),ml(this),ef(this))},nt.ib=function(){null!=this.v&&(this.v=null,ml(this),_l(this),Qi(19))},nt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Qi(2)):(this.l.info("Failed to ping google.com"),Qi(1))},nt.isActive=function(){return!!this.h&&this.h.isActive(this)},(nt=dg.prototype).Ba=function(){},nt.Aa=function(){},nt.za=function(){},nt.ya=function(){},nt.isActive=function(){return!0},nt.Va=function(){},gc.prototype.g=function(n,e){return new Ri(n,e)},Qr(Ri,Vr),Ri.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Qi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yl(n,null,n.Y),Qh(n)},Ri.prototype.close=function(){lg(this.g)},Ri.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ms(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Qh(e)},Ri.prototype.N=function(){this.g.h=null,delete this.j,lg(this.g),delete this.g,Ri.$.N.call(this)},Qr(n_,$p),Qr(mc,Ur),Qr(_c,dg),_c.prototype.Ba=function(){Jr(this.g,"a")},_c.prototype.Aa=function(n){Jr(this.g,new n_(n))},_c.prototype.za=function(n){Jr(this.g,new mc)},_c.prototype.ya=function(){Jr(this.g,"b")},Qr(v,function Bv(){this.blockSize=-1}),v.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},v.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)h(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){h(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){h(this,r),s=0;break}}this.h=s,this.i+=e},v.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var E={};function M(n){return-128<=n&&128>n?function j(n,e){var t=E;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new f([0|e],0>e?-1:0)}):new f([0|n],0>n?-1:0)}function V(n){if(isNaN(n)||!isFinite(n))return ke;if(0>n)return er(V(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ce;return new f(e,0)}var ce=4294967296,ke=M(0),st=M(1),Et=M(16777216);function ft(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function bn(n){return-1==n.h}function er(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new f(t,~n.h).add(st)}function vu(n,e){return n.add(er(e))}function Eu(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function xa(n,e){this.g=n,this.h=e}function vl(n,e){if(ft(e))throw Error("division by zero");if(ft(n))return new xa(ke,ke);if(bn(n))return e=vl(er(n),e),new xa(er(e.g),er(e.h));if(bn(e))return e=vl(n,er(e)),new xa(er(e.g),e.h);if(30<n.g.length){if(bn(n)||bn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=st,r=e;0>=r.X(n);)t=hg(t),r=hg(r);var s=Iu(t,1),u=Iu(r,1);for(r=Iu(r,2),t=Iu(t,2);!ft(r);){var c=u.add(r);0>=c.X(n)&&(s=s.add(t),u=c),r=Iu(r,1),t=Iu(t,1)}return e=vu(n,s.R(e)),new xa(s,e)}for(s=ke;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=V(t)).R(e);bn(c)||0<c.X(n);)c=(u=V(t-=r)).R(e);ft(u)&&(u=st),s=s.add(u),n=vu(n,c)}return new xa(s,n)}function hg(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new f(t,n.h)}function Iu(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new f(s,n.h)}(nt=f.prototype).ea=function(){if(bn(this))return-er(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ce+r)*e,e*=ce}return n},nt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ft(this))return"0";if(bn(this))return"-"+er(this).toString(n);for(var e=V(Math.pow(n,6)),t=this,r="";;){var s=vl(t,e).g,u=((0<(t=vu(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ft(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},nt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},nt.X=function(n){return bn(n=vu(this,n))?-1:ft(n)?0:1},nt.abs=function(){return bn(this)?er(this):this},nt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),c=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=c>>>16,t[s]=(c&=65535)<<16|(u&=65535)}return new f(t,-2147483648&t[t.length-1]?-1:0)},nt.R=function(n){if(ft(this)||ft(n))return ke;if(bn(this))return bn(n)?er(this).R(er(n)):er(er(this).R(n));if(bn(n))return er(this.R(er(n)));if(0>this.X(Et)&&0>n.X(Et))return V(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,c=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=c*_,Eu(t,2*r+2*s),t[2*r+2*s+1]+=u*_,Eu(t,2*r+2*s+1),t[2*r+2*s+1]+=c*g,Eu(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,Eu(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new f(t,0)},nt.gb=function(n){return vl(this,n).h},nt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new f(t,this.h&n.h)},nt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new f(t,this.h|n.h)},nt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new f(t,this.h^n.h)},gc.prototype.createWebChannel=gc.prototype.g,Ri.prototype.send=Ri.prototype.u,Ri.prototype.open=Ri.prototype.m,Ri.prototype.close=Ri.prototype.close,Hp.NO_ERROR=0,Hp.TIMEOUT=8,Hp.HTTP_ERROR=6,Mv.COMPLETE="complete",ul.EventType=ll,ll.OPEN="a",ll.CLOSE="b",ll.ERROR="c",ll.MESSAGE="d",Vr.prototype.listen=Vr.prototype.O,Hn.prototype.listenOnce=Hn.prototype.P,Hn.prototype.getLastError=Hn.prototype.Sa,Hn.prototype.getLastErrorCode=Hn.prototype.Ia,Hn.prototype.getStatus=Hn.prototype.da,Hn.prototype.getResponseJson=Hn.prototype.Wa,Hn.prototype.getResponseText=Hn.prototype.ja,Hn.prototype.send=Hn.prototype.ha,Hn.prototype.setWithCredentials=Hn.prototype.Oa,v.prototype.digest=v.prototype.l,v.prototype.reset=v.prototype.reset,v.prototype.update=v.prototype.j,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.R,f.prototype.modulo=f.prototype.gb,f.prototype.compare=f.prototype.X,f.prototype.toNumber=f.prototype.ea,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.D,f.fromNumber=V,f.fromString=function ee(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return er(ee(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=V(Math.pow(e,8)),r=ke,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),c=parseInt(n.substring(s,s+u),e);8>u?(u=V(Math.pow(e,u)),r=r.R(u).add(V(c))):r=(r=r.R(t)).add(V(c))}return r};var nf=Bs.createWebChannelTransport=function(){return new gc},fg=Bs.getStatEventTarget=function(){return yd()},Io=Bs.ErrorCode=Hp,pg=Bs.EventType=Mv,r_=Bs.Event=_s,rf=Bs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fw=Bs.FetchXmlHttpFactory=qh,Rd=Bs.WebChannel=ul,PA=Bs.XhrIo=Hn,pw=Bs.Md5=v,Pd=Bs.Integer=f;const jv="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let xd="10.5.2";const Ma=new Bi.Yd("@firebase/firestore");function wu(){return Ma.logLevel}function Ke(n,...e){if(Ma.logLevel<=Bi.in.DEBUG){const t=e.map(gg);Ma.debug(`Firestore (${xd}): ${n}`,...t)}}function Rr(n,...e){if(Ma.logLevel<=Bi.in.ERROR){const t=e.map(gg);Ma.error(`Firestore (${xd}): ${n}`,...t)}}function Hs(n,...e){if(Ma.logLevel<=Bi.in.WARN){const t=e.map(gg);Ma.warn(`Firestore (${xd}): ${n}`,...t)}}function gg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${xd}) INTERNAL ASSERTION FAILED: `+n;throw Rr(e),new Error(e)}function Nt(n,e){n||gt()}function at(n,e){return n}const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class $v{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sf{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let c=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new vi,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=c;e.enqueueRetryable((0,Pe.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new vi)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt("string"==typeof r.accessToken),new Hv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nt(null===e||"string"==typeof e),new yi(e)}}class xA{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MA{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new xA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=u=>{null!=u.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.R;return this.R=u.token,Ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?s(u):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt("string"==typeof t.token),this.R=t.token,new NA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function kA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Md{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=kA(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function yc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Gv(n){return n+"\0"}class Cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cr.fromMillis(Date.now())}static fromDate(e){return Cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Cr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new Cr(0,0))}static max(){return new Ot(new Cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class af{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===af.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof af?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pn extends af{construct(e,t,r){return new Pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Pn(t)}static emptyPath(){return new Pn([])}}const LA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends af{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return LA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new qe(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new qe(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new qe(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(c=!c,s++):"."!==g||c?(r+=g,s++):(u(),s++)}if(u(),c)throw new qe(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Pn.fromString(e))}static fromName(e){return new ut(Pn.fromString(e).popFirst(5))}static empty(){return new ut(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Pn(e.slice()))}}class uf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Tu(n){return n.fields.find(e=>2===e.kind)}function Na(n){return n.fields.filter(e=>2!==e.kind)}uf.UNKNOWN_ID=-1;class lf{constructor(e,t){this.fieldPath=e,this.kind=t}}class mg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mg(0,ro.min())}}function VA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ot.fromTimestamp(1e9===r?new Cr(t+1,0):new Cr(t,r));return new ro(s,ut.empty(),e)}function UA(n){return new ro(n.readTime,n.key,-1)}class ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ro(Ot.min(),ut.empty(),-1)}static max(){return new ro(Ot.max(),ut.empty(),-1)}}function zv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const yw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vc(n){return _g.apply(this,arguments)}function _g(){return _g=(0,Pe.Z)(function*(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==yw)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),_g.apply(this,arguments)}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let s=0,u=0,c=!1;e.forEach(g=>{++s,g.next(()=>{++u,c&&u===s&&t()},_=>r(_))}),c=!0,u===s&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(s=>s?fe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new fe((r,s)=>{const u=e.length,c=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(P=>{c[D]=P,++g,g===u&&r(c)},P=>s(P))}})}static doWhile(e,t){return new fe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Ec{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new vi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new cf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=yg(r.target.error);this.V.reject(new cf(e,s))}}static open(e,t,r,s){try{return new Ec(t,e.transaction(s,r))}catch(u){throw new cf(t,u)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qP(t)}}class qo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===qo.S((0,q.z$)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),df(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,q.hl)())return!1;if(qo.C())return!0;const e=(0,q.z$)(),t=qo.S(e),r=0<t&&t<10,s=qo.v(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,Pe.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new cf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;s("VersionError"===g.name?new qe(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new qe(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new cf(e,g))},u.onupgradeneeded=c=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.p.N(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Pe.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.O(e);const _=Ec.open(u.db,e,c?"readonly":"readwrite",r),D=s(_).next(P=>(_.g(),P)).catch(P=>(_.abort(P),fe.reject(P))).toPromise();return D.catch(()=>{}),yield _.m,D}catch(_){const D=_,P="FirebaseError"!==D.name&&g<3;if(Ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",P),u.close(),!P)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ew{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return df(this.k.delete())}}class cf extends qe{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nd(n){return"IndexedDbTransactionError"===n.name}class qP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),df(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),df(this.store.add(e))}get(e){return df(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),df(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),df(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.G(s,(c,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new fe((u,c)=>{s.onerror=g=>{c(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}H(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(u,c,g)=>g.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new fe((r,s)=>{t.onerror=u=>{const c=yg(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}G(e,t){const r=[];return new fe((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void s();const _=new Ew(g),D=t(g.primaryKey,g.value,_);if(D instanceof fe){const P=D.catch(k=>(_.done(),fe.reject(k)));r.push(P)}_.isDone?s():null===_.$?g.continue():g.continue(_.$)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function df(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=yg(r.target.error);t(s)}})}let s_=!1;function yg(n){const e=qo.S((0,q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return s_||(s_=!0,setTimeout(()=>{throw r},0)),r}}return n}class ZP{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Pe.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(r){Nd(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield vc(r)}yield t.ee(6e4)}))}}class KP{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let s=t,u=!0;return fe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ke("IndexBackiller",`Processing collection: ${c}`),this.re(e,c,s).next(g=>{s-=g,r.add(c)});u=!1})).next(()=>t-s)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ie(s,u)).next(g=>(Ke("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>c.size)}))}ie(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=UA(u);zv(c,r)>0&&(r=c)}),new ro(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let io=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.se(s),this.oe=s=>r.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function vg(n){return null==n}function Eg(n){return 0===n&&1/n==-1/0}function Iw(n){return"number"==typeof n&&Number.isInteger(n)&&!Eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ig(e)),e=ww(n.get(t),e);return Ig(e)}function ww(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Ig(n){return n+"\x01\x01"}function Cu(n){const e=n.length;if(Nt(e>=2),2===e)return Nt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&gt(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:gt()}u=c+2}return new Pn(r)}const o_=["userId","batchId"];function a_(n,e){return[n,vs(e)]}function Od(n,e,t){return[n,vs(e),t]}const BA={},jA=["prefixPath","collectionGroup","readTime","documentId"],Wv=["prefixPath","collectionGroup","documentId"],Tw=["collectionGroup","readTime","prefixPath","documentId"],HA=["canonicalId","targetId"],$A=["targetId","path"],GA=["path","targetId"],zA=["collectionId","parent"],Cw=["indexId","uid"],YP=["uid","sequenceNumber"],QP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wg=["indexId","uid","orderedDocumentKey"],Tg=["userId","collectionPath","documentId"],Dw=["userId","collectionPath","largestBatchId"],Aw=["userId","collectionGroup","largestBatchId"],u_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bw=[...u_,"documentOverlays"],Sw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qv=Sw,Rw=[...qv,"indexConfiguration","indexState","indexEntries"];class hf extends vw{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Xi(n,e){const t=at(n);return qo.M(t.ae,e)}function l_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ic(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class fr{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cg(this.root,e,this.comparator,!0)}}class Cg{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Br.RED,this.left=s??Br.EMPTY,this.right=u??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Br(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Br.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,t,r,s,u){return this}insert(e,t,r){return new Br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ir{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(e){return new d_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ir(this.comparator);return t.data=e,t}}class d_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function El(n){return n.hasNext()?n.getNext():void 0}class so{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new so([])}unionWith(e){let t=new ir(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new so(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class h_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new h_("Invalid base64 string: "+u):u}}(e);return new sr(t)}static fromUint8Array(e){const t=function(s){let u="";for(let c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);return u}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const ff=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Du(n){if(Nt(!!n),"string"==typeof n){let e=0;const t=ff.exec(n);if(Nt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xr(n.seconds),nanos:Xr(n.nanos)}}function Xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Il(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function Dg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wl(n){const e=n.mapValue.fields.__previous_value__;return Dg(e)?wl(e):e}function Ag(n){const e=Du(n.mapValue.fields.__local_write_time__.timestampValue);return new Cr(e.seconds,e.nanos)}class WA{constructor(e,t,r,s,u,c,g,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=D}}class wc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}const Au={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bg={nullValue:"NULL_VALUE"};function Tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dg(n)?4:m_(n)?9007199254740991:10:gt()}function Oa(n,e){if(n===e)return!0;const t=Tc(n);if(t!==Tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ag(n).isEqual(Ag(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const c=Du(s.timestampValue),g=Du(u.timestampValue);return c.seconds===g.seconds&&c.nanos===g.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,Il(n.bytesValue).isEqual(Il(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return Xr(s.geoPointValue.latitude)===Xr(u.geoPointValue.latitude)&&Xr(s.geoPointValue.longitude)===Xr(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return Xr(s.integerValue)===Xr(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const c=Xr(s.doubleValue),g=Xr(u.doubleValue);return c===g?Eg(c)===Eg(g):isNaN(c)&&isNaN(g)}return!1}(n,e);case 9:return yc(n.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:return function(s,u){const c=s.mapValue.fields||{},g=u.mapValue.fields||{};if(l_(c)!==l_(g))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===g[_]||!Oa(c[_],g[_])))return!1;return!0}(n,e);default:return gt()}var u}function kd(n,e){return void 0!==(n.values||[]).find(t=>Oa(t,e))}function Ld(n,e){if(n===e)return 0;const t=Tc(n),r=Tc(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(u,c){const g=Xr(u.integerValue||u.doubleValue),_=Xr(c.integerValue||c.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(n,e);case 3:return qA(n.timestampValue,e.timestampValue);case 4:return qA(Ag(n),Ag(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(u,c){const g=Il(u),_=Il(c);return g.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(u,c){const g=u.split("/"),_=c.split("/");for(let D=0;D<g.length&&D<_.length;D++){const P=zt(g[D],_[D]);if(0!==P)return P}return zt(g.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,c){const g=zt(Xr(u.latitude),Xr(c.latitude));return 0!==g?g:zt(Xr(u.longitude),Xr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,c){const g=u.values||[],_=c.values||[];for(let D=0;D<g.length&&D<_.length;++D){const P=Ld(g[D],_[D]);if(P)return P}return zt(g.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,c){if(u===Au.mapValue&&c===Au.mapValue)return 0;if(u===Au.mapValue)return 1;if(c===Au.mapValue)return-1;const g=u.fields||{},_=Object.keys(g),D=c.fields||{},P=Object.keys(D);_.sort(),P.sort();for(let k=0;k<_.length&&k<P.length;++k){const G=zt(_[k],P[k]);if(0!==G)return G;const J=Ld(g[_[k]],D[P[k]]);if(0!==J)return J}return zt(_.length,P.length)}(n.mapValue,e.mapValue);default:throw gt()}}function qA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=Du(n),r=Du(e),s=zt(t.seconds,r.seconds);return 0!==s?s:zt(t.nanos,r.nanos)}function pf(n){return Zv(n)}function Zv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Du(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Il(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const u of t.values||[])s?s=!1:r+=",",r+=Zv(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",u=!0;for(const c of r)u?u=!1:s+=",",s+=`${c}:${Zv(t.fields[c])}`;return s+"}"}(n.mapValue):gt()}function gf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mf(n){return!!n&&"integerValue"in n}function Sg(n){return!!n&&"arrayValue"in n}function p_(n){return!!n&&"nullValue"in n}function g_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tl(n){return!!n&&"mapValue"in n}function Fd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ic(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function m_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rg(n){return"nullValue"in n?bg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gf(wc.empty(),ut.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function __(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gf(wc.empty(),ut.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Au:gt()}function Vd(n,e){const t=Ld(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function y_(n,e){const t=Ld(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(t)}setAll(e){let t=Dr.emptyPath(),r={},s=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}c?r[g.lastSegment()]=Fd(c):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Tl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Tl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ic(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Pi(Fd(this.value))}}function Pg(n){const e=[];return Ic(n.fields,(t,r)=>{const s=new Dr([t]);if(Tl(r)){const u=Pg(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new so(e)}class Pr{constructor(e,t,r,s,u,c,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=c,this.documentState=g}static newInvalidDocument(e){return new Pr(e,0,Ot.min(),Ot.min(),Ot.min(),Pi.empty(),0)}static newFoundDocument(e,t,r,s){return new Pr(e,1,t,Ot.min(),r,s,0)}static newNoDocument(e,t){return new Pr(e,2,t,Ot.min(),Ot.min(),Pi.empty(),0)}static newUnknownDocument(e,t){return new Pr(e,3,t,Ot.min(),Ot.min(),Pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bu{constructor(e,t){this.position=e,this.inclusive=t}}function _f(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?ut.comparator(ut.fromName(c.referenceValue),t.key):Ld(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Pw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oa(n.position[t],e.position[t]))return!1;return!0}class yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class xw{}class _n extends xw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Jv(e,t,r):"array-contains"===t?new YA(e,r):"in"===t?new eE(e,r):"not-in"===t?new JP(e,r):"array-contains-any"===t?new QA(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new E_(e,r):new KA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ld(t,this.value)):null!==t&&Tc(this.value)===Tc(t)&&this.matchesComparison(Ld(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends xw{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new qn(e,t)}matches(e){return vf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function vf(n){return"and"===n.op}function Yv(n){return"or"===n.op}function Mw(n){return Nw(n)&&vf(n)}function Nw(n){for(const e of n.filters)if(e instanceof qn)return!1;return!0}function Ef(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+pf(n.value);if(Mw(n))return n.filters.map(e=>Ef(e)).join(",");{const e=n.filters.map(t=>Ef(t)).join(",");return`${n.op}(${e})`}}function v_(n,e){return n instanceof _n?(r=n,(s=e)instanceof _n&&r.op===s.op&&r.field.isEqual(s.field)&&Oa(r.value,s.value)):n instanceof qn?function(r,s){return s instanceof qn&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((u,c,g)=>u&&v_(c,s.filters[g]),!0)}(n,e):void gt();var r,s}function Ow(n,e){const t=n.filters.concat(e);return qn.create(t,n.op)}function Qv(n){return n instanceof _n?`${(t=n).field.canonicalString()} ${t.op} ${pf(t.value)}`:n instanceof qn?function(t){return t.op.toString()+" {"+t.getFilters().map(Qv).join(" ,")+"}"}(n):"Filter";var t}class Jv extends _n{constructor(e,t,r){super(e,t,r),this.key=ut.fromName(r.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}}class E_ extends _n{constructor(e,t){super(e,"in",t),this.keys=Xv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class KA extends _n{constructor(e,t){super(e,"not-in",t),this.keys=Xv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ut.fromName(r.referenceValue))}class YA extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sg(t)&&kd(t.arrayValue,this.value)}}class eE extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kd(this.value.arrayValue,t)}}class JP extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kd(this.value.arrayValue,t)}}class QA extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kd(this.value.arrayValue,r))}}class I_{constructor(e,t=null,r=[],s=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=g,this.ce=null}}function tE(n,e=null,t=[],r=[],s=null,u=null,c=null){return new I_(n,e,t,r,s,u,c)}function Zo(n){const e=at(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ef(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(u=r).field.canonicalString()+u.dir;var u}).join(","),vg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pf(r)).join(",")),e.ce=t}return e.ce}function Cl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!v_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function w_(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function xg(n,e){return n.filters.filter(t=>t instanceof _n&&t.field.isEqual(e))}function kw(n,e,t){let r=bg,s=!0;for(const u of xg(n,e)){let c=bg,g=!0;switch(u.op){case"<":case"<=":c=Rg(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=bg}Vd({value:r,inclusive:s},{value:c,inclusive:g})<0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Vd({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Lw(n,e,t){let r=Au,s=!0;for(const u of xg(n,e)){let c=Au,g=!0;switch(u.op){case">=":case">":c=__(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=Au}y_({value:r,inclusive:s},{value:c,inclusive:g})>0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];y_({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Dl{constructor(e,t=null,r=[],s=[],u=null,c="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=_,this.le=null,this.he=null,this.Pe=null}}function nE(n,e,t,r,s,u,c,g){return new Dl(n,e,t,r,s,u,c,g)}function Ud(n){return new Dl(n)}function T_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Fw(n){return null!==n.collectionGroup}function Cc(n){const e=at(n);if(null===e.le){e.le=[];const t=new Set;for(const u of e.explicitOrderBy)e.le.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let g=new ir(Dr.comparator);return c.filters.forEach(_=>{_.getFlattenedFilters().forEach(D=>{D.isInequality()&&(g=g.add(D.field))})}),g})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.le.push(new yf(u,r))}),t.has(Dr.keyField().canonicalString())||e.le.push(new yf(Dr.keyField(),r))}return e.le}function Es(n){const e=at(n);return e.he||(e.he=function Vw(n,e){if("F"===n.limitType)return tE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new yf(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new bu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bu(n.startAt.position,n.startAt.inclusive):null;return tE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Cc(n))),e.he}function rE(n,e){const t=n.filters.concat([e]);return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mg(n,e,t){return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ng(n,e){return Cl(Es(n),Es(e))&&n.limitType===e.limitType}function iE(n){return`${Zo(Es(n))}|lt:${n.limitType}`}function If(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Qv(s)).join(", ")}]`),vg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>pf(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>pf(s)).join(",")),`Target(${r})`}(Es(n))}; limitType=${n.limitType})`}function Og(n,e){return e.isFoundDocument()&&function(r,s){const u=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ut.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,e)&&function(r,s){for(const u of Cc(r))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(r,s){for(const u of r.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(c,g,_){const D=_f(c,g,_);return c.inclusive?D<=0:D<0}(r.startAt,Cc(r),s)||r.endAt&&!function(c,g,_){const D=_f(c,g,_);return c.inclusive?D>=0:D>0}(r.endAt,Cc(r),s)));var r,s}function JA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sE(n){return(e,t)=>{let r=!1;for(const s of Cc(n)){const u=Uw(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Uw(n,e,t){const r=n.field.isKeyField()?ut.comparator(e.key,t.key):function(u,c,g){const _=c.data.field(u),D=g.data.field(u);return null!==_&&null!==D?Ld(_,D):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}class xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ic(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return c_(this.inner)}size(){return this.innerSize}}const Bw=new fr(ut.comparator);function wo(){return Bw}const C_=new fr(ut.comparator);function Ko(...n){let e=C_;for(const t of n)e=e.insert(t.key,t);return e}function D_(n){let e=C_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Su(){return kg()}function XA(){return kg()}function kg(){return new xi(n=>n.toString(),(n,e)=>n.isEqual(e))}const oE=new fr(ut.comparator),Ru=new ir(ut.comparator);function an(...n){let e=Ru;for(const t of n)e=e.add(t);return e}const eb=new ir(zt);function jw(){return eb}function Mi(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eg(e)?"-0":e}}function Hw(n){return{integerValue:""+n}}function A_(n,e){return Iw(e)?Hw(e):Mi(n,e)}class b_{constructor(){this._=void 0}}function tb(n,e,t){return n instanceof Bd?function(s,u){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&Dg(u)&&(u=wl(u)),u&&(c.fields.__previous_value__=u),{mapValue:c}}(t,e):n instanceof jd?lE(n,e):n instanceof Dc?$w(n,e):function(s,u){const c=uE(s,u),g=Gw(c)+Gw(s.Ie);return mf(c)&&mf(s.Ie)?Hw(g):Mi(s.serializer,g)}(n,e)}function aE(n,e,t){return n instanceof jd?lE(n,e):n instanceof Dc?$w(n,e):t}function uE(n,e){return n instanceof wf?mf(r=e)||(u=r)&&"doubleValue"in u?e:{integerValue:0}:null;var r,u}class Bd extends b_{}class jd extends b_{constructor(e){super(),this.elements=e}}function lE(n,e){const t=cE(e);for(const r of n.elements)t.some(s=>Oa(s,r))||t.push(r);return{arrayValue:{values:t}}}class Dc extends b_{constructor(e){super(),this.elements=e}}function $w(n,e){let t=cE(e);for(const r of n.elements)t=t.filter(s=>!Oa(s,r));return{arrayValue:{values:t}}}class wf extends b_{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Gw(n){return Xr(n.integerValue||n.doubleValue)}function cE(n){return Sg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Pu{constructor(e,t){this.field=e,this.transform=t}}class Tf{constructor(e,t){this.version=e,this.transformResults=t}}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function S_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Lg{}function dE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $d(n.key,xr.none()):new Hd(n.key,n.data,xr.none());{const t=n.data,r=Pi.empty();let s=new ir(Dr.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new Sl(n.key,r,new so(s.toArray()),xr.none())}}function hE(n,e,t){n instanceof Hd?function(s,u,c){const g=s.value.clone(),_=Ww(s.fieldTransforms,u,c.transformResults);g.setAll(_),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(n,e,t):n instanceof Sl?function(s,u,c){if(!S_(s.precondition,u))return void u.convertToUnknownDocument(c.version);const g=Ww(s.fieldTransforms,u,c.transformResults),_=u.data;_.setAll(zw(s)),_.setAll(g),u.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bl(n,e,t,r){return n instanceof Hd?function(u,c,g,_){if(!S_(u.precondition,c))return g;const D=u.value.clone(),P=qw(u.fieldTransforms,_,c);return D.setAll(P),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sl?function(u,c,g,_){if(!S_(u.precondition,c))return g;const D=qw(u.fieldTransforms,_,c),P=c.data;return P.setAll(zw(u)),P.setAll(D),c.convertToFoundDocument(c.version,P).setHasLocalMutations(),null===g?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(k=>k.field))}(n,e,t,r):(g=t,S_(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):g);var c,g}function R_(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=uE(r.transform,s||null);null!=u&&(null===t&&(t=Pi.empty()),t.set(r.field,u))}return t||null}function fE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&yc(r,s,(u,c)=>function Al(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof jd&&s instanceof jd||r instanceof Dc&&s instanceof Dc?yc(r.elements,s.elements,Oa):r instanceof wf&&s instanceof wf?Oa(r.Ie,s.Ie):r instanceof Bd&&s instanceof Bd);var r,s}(u,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class Hd extends Lg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Sl extends Lg{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function zw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ww(n,e,t){const r=new Map;Nt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,g=e.data.field(u.field);r.set(u.field,aE(c,g,t[s]))}return r}function qw(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,tb(u,c,e))}return r}class $d extends Lg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zw extends Lg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pE{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&hE(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XA();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let g=this.applyToLocalView(c,u.mutatedFields);g=t.has(s.key)?null:g;const _=dE(c,g);null!==_&&r.set(s.key,_),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&yc(this.mutations,e.mutations,(t,r)=>fE(t,r))&&yc(this.baseMutations,e.baseMutations,(t,r)=>fE(t,r))}}class Kw{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Nt(e.mutations.length===r.length);let s=oE;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new Kw(e,t,r,s)}}class Yw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jw{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ni,En;function gE(n){switch(n){default:return gt();case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0}}function mE(n){if(void 0===n)return Rr("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Ni.OK:return Ce.OK;case Ni.CANCELLED:return Ce.CANCELLED;case Ni.UNKNOWN:return Ce.UNKNOWN;case Ni.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Ni.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Ni.INTERNAL:return Ce.INTERNAL;case Ni.UNAVAILABLE:return Ce.UNAVAILABLE;case Ni.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Ni.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Ni.NOT_FOUND:return Ce.NOT_FOUND;case Ni.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Ni.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Ni.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Ni.ABORTED:return Ce.ABORTED;case Ni.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Ni.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Ni.DATA_LOSS:return Ce.DATA_LOSS;default:return gt()}}(En=Ni||(Ni={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";function _E(){return new TextEncoder}const Xw=new Pd([4294967295,4294967295],0);function nn(n){const e=_E().encode(n),t=new pw;return t.update(e),new Uint8Array(t.digest())}function yE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Pd([t,r],0),new Pd([s,u],0)]}class x_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xu(`Invalid padding: ${t}`);if(r<0)throw new xu(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new xu(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new xu(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Pd.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(Pd.fromNumber(r)));return 1===s.compare(Xw)&&(s=new Pd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=nn(e),[r,s]=yE(t);for(let u=0;u<this.hashCount;u++){const c=this.de(r,s,u);if(!this.Ae(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new x_(u,s,t);return r.forEach(g=>c.insert(g)),c}insert(e){if(0===this.Te)return;const t=nn(e),[r,s]=yE(t);for(let u=0;u<this.hashCount;u++){const c=this.de(r,s,u);this.Re(c)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cf{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Fg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cf(Ot.min(),s,new fr(zt),wo(),an())}}class Fg{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fg(r,t,an(),an(),an())}}class Gd{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class zd{constructor(e,t){this.targetId=e,this.fe=t}}class M_{constructor(e,t,r=sr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Df{constructor(){this.ge=0,this.pe=O_(),this.ye=sr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=an(),t=an(),r=an();return this.pe.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:gt()}}),new Fg(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=O_()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class eT{constructor(e){this.Le=e,this.ke=new Map,this.qe=wo(),this.Qe=N_(),this.Ke=new fr(zt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const u=s.target;if(w_(u))if(0===r){const c=new ut(u.path);this.We(t,c,Pr.newNoDocument(c,Ot.min()))}else Nt(1===r);else{const c=this.Ze(t);if(c!==r){const g=this.Xe(e),_=g?this.et(g,e,c):1;0!==_&&(this.He(t),this.Ke=this.Ke.insert(t,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:u=0}=t;let c,g;try{c=Il(r).toUint8Array()}catch(_){if(_ instanceof h_)return Hs("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new x_(c,s,u)}catch(_){return Hs(_ instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return 0===g.Te?null:g}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(u=>{const c=this.Le.nt(),g=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.We(t,u,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((u,c)=>{const g=this.Ye(c);if(g){if(u.current&&w_(g.target)){const _=new ut(g.target.path);null!==this.qe.get(_)||this.st(c,_)||this.We(c,_,Pr.newNoDocument(_,e))}u.De&&(t.set(c,u.ve()),u.Fe())}});let r=an();this.Qe.forEach((u,c)=>{let g=!0;c.forEachWhile(_=>{const D=this.Ye(_);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.qe.forEach((u,c)=>c.setReadTime(e));const s=new Cf(e,t,this.Ke,this.qe,r);return this.qe=wo(),this.Qe=N_(),this.Ke=new fr(zt),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Df,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new ir(zt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Df),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function N_(){return new fr(ut.comparator)}function O_(){return new fr(ut.comparator)}const vE={asc:"ASCENDING",desc:"DESCENDING"},tT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EE={and:"AND",or:"OR"};class nb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function IE(n,e){return n.useProto3Json||vg(e)?e:{value:e}}function Af(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rb(n,e){return Af(n,e.toTimestamp())}function ci(n){return Nt(!!n),Ot.fromTimestamp(function(t){const r=Du(t);return new Cr(r.seconds,r.nanos)}(n))}function TE(n,e){return(r=n,new Pn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function nT(n){const e=Pn.fromString(n);return Nt(PE(e)),e}function bf(n,e){return TE(n.databaseId,e.path)}function ka(n,e){const t=nT(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut(iT(t))}function CE(n,e){return TE(n.databaseId,e)}function rT(n){const e=nT(n);return 4===e.length?Pn.emptyPath():iT(e)}function es(n){return new Pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iT(n){return Nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sT(n,e,t){return{name:bf(n,e),fields:t.value.mapValue.fields}}function ib(n,e,t){const r=ka(n,e.name),s=ci(e.updateTime),u=e.createTime?ci(e.createTime):Ot.min(),c=new Pi({mapValue:{fields:e.fields}}),g=Pr.newFoundDocument(r,s,u,c);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Vg(n,e){let t;if(e instanceof Hd)t={update:sT(n,e.key,e.value)};else if(e instanceof $d)t={delete:bf(n,e.key)};else if(e instanceof Sl)t={update:sT(n,e.key,e.data),updateMask:lb(e.fieldMask)};else{if(!(e instanceof Zw))return gt();t={verify:bf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const g=c.transform;if(g instanceof Bd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof jd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Dc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof wf)return{fieldPath:c.field.canonicalString(),increment:g.Ie};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:rb(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:gt()),t;var u}function AE(n,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?xr.updateTime(ci(u.updateTime)):void 0!==u.exists?xr.exists(u.exists):xr.none():xr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(c,g){let _=null;"setToServerValue"in g?(Nt("REQUEST_TIME"===g.setToServerValue),_=new Bd):"appendMissingElements"in g?_=new jd(g.appendMissingElements.values||[]):"removeAllFromArray"in g?_=new Dc(g.removeAllFromArray.values||[]):"increment"in g?_=new wf(c,g.increment):gt();const D=Dr.fromServerFormat(g.fieldPath);return new Pu(D,_)}(n,s)):[];var u;if(e.update){const s=ka(n,e.update.name),u=new Pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new so((e.updateMask.fieldPaths||[]).map(P=>Dr.fromServerFormat(P)));return new Sl(s,u,c,t,r)}return new Hd(s,u,t,r)}if(e.delete){const s=ka(n,e.delete);return new $d(s,t)}if(e.verify){const s=ka(n,e.verify);return new Zw(s,t)}return gt()}function bE(n,e){return{documents:[CE(n,e.path)]}}function SE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=CE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=CE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return k_(qn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:Ac((k=D).field),direction:ob(k.dir)};var k})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=IE(n,e.limit);return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),t;var _}function aT(n){let e=rT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Nt(1===r);const P=t.from[0];P.allDescendants?s=P.collectionId:e=e.child(P.collectionId)}let u=[];t.where&&(u=function(k){const G=uT(k);return G instanceof qn&&Mw(G)?G.getFilters():[G]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(G=>{return new yf($s((de=G).field),function(xe){switch(xe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(de.direction));var de}));let g=null;t.limit&&(g=function(k){let G;return G="object"==typeof k?k.value:k,vg(G)?null:G}(t.limit));let _=null;var k;t.startAt&&(_=new bu((k=t.startAt).values||[],!!k.before));let D=null;return t.endAt&&(D=function(k){return new bu(k.values||[],!k.before)}(t.endAt)),nE(e,s,c,u,g,"F",_,D)}function uT(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$s(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$s(t.unaryFilter.field);return _n.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=$s(t.unaryFilter.field);return _n.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$s(t.unaryFilter.field);return _n.create(c,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?_n.create($s((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return qn.create(t.compositeFilter.filters.map(r=>uT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return gt()}}(t.compositeFilter.op))}(n):gt();var t}function ob(n){return vE[n]}function ab(n){return tT[n]}function ub(n){return EE[n]}function Ac(n){return{fieldPath:n.canonicalString()}}function $s(n){return Dr.fromServerFormat(n.fieldPath)}function k_(n){return n instanceof _n?function(t){if("=="===t.op){if(g_(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NAN"}};if(p_(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(g_(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NOT_NAN"}};if(p_(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ac(t.field),op:ab(t.op),value:t.value}}}(n):n instanceof qn?function(t){const r=t.getFilters().map(s=>k_(s));return 1===r.length?r[0]:{compositeFilter:{op:ub(t.op),filters:r}}}(n):gt()}function lb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Rl{constructor(e,t,r,s,u=Ot.min(),c=Ot.min(),g=sr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class xE{constructor(e){this.ut=e}}function Ug(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bf(u=n.ut,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Af(u,c.version.toTimestamp()),createTime:Af(u,c.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Rf(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Rf(e.version)}}var u,c;return r}function Sf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bc(n){const e=new Cr(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function Sc(n,e){const t=(e.baseMutations||[]).map(u=>AE(n.ut,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>AE(n.ut,u)),s=Cr.fromMillis(e.localWriteTimeMs);return new pE(e.batchId,s,t,r)}function Pf(n){const e=bc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bc(n.lastLimboFreeSnapshotVersion):Ot.min();let r;return r=void 0!==n.query.documents?(Nt(1===(u=n.query).documents.length),Es(Ud(rT(u.documents[0])))):function(u){return Es(aT(u))}(n.query),new Rl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,sr.fromBase64String(n.resumeToken));var u}function ME(n,e){const t=Rf(e.snapshotVersion),r=Rf(e.lastLimboFreeSnapshotVersion);let s;s=w_(e.target)?bE(n.ut,e.target):SE(n.ut,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zo(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Bg(n){const e=aT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Mg(e,e.limit,"L"):e}function La(n,e){return new Yw(e.largestBatchId,AE(n.ut,e.overlayMutation))}function cT(n,e){const t=e.path.lastSegment();return[n,vs(e.path.popLast()),t]}function dT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rf(r.readTime),documentKey:vs(r.documentKey.path),largestBatchId:r.largestBatchId}}class NE{getBundleMetadata(e,t){return hT(e).get(t).next(r=>{if(r)return{id:(u=r).bundleId,createTime:bc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return hT(e).put({bundleId:(s=t).id,createTime:Rf(ci(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return OE(e).get(t).next(r=>{if(r)return{name:(u=r).name,query:Bg(u.bundledQuery),readTime:bc(u.readTime)};var u})}saveNamedQuery(e,t){return OE(e).put({name:(s=t).name,readTime:Rf(ci(s.readTime)),bundledQuery:s.bundledQuery});var s}}function hT(n){return Xi(n,"bundles")}function OE(n){return Xi(n,"namedQueries")}class L_{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new L_(e,t.uid||"")}getOverlay(e,t){return Rc(e).get(cT(this.userId,t)).next(r=>r?La(this.serializer,r):null)}getOverlays(e,t){const r=Su();return fe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const g=new Yw(t,c);s.push(this.lt(e,g))}),fe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(vs(c.getCollectionPath())));const u=[];return s.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Rc(e).H("collectionPathOverlayIndex",g))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Su(),u=vs(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Rc(e).W("collectionPathOverlayIndex",c).next(g=>{for(const _ of g){const D=La(this.serializer,_);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Su();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rc(e).Y({index:"collectionGroupOverlayIndex",range:g},(_,D,P)=>{const k=La(this.serializer,D);u.size()<s||k.largestBatchId===c?(u.set(k.getKey(),k),c=k.largestBatchId):P.done()}).next(()=>u)}lt(e,t){return Rc(e).put(function(s,u,c){const[g,_,D]=cT(u,c.mutation.key);return{userId:u,collectionPath:_,documentId:D,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Vg(s.ut,c.mutation)}}(this.serializer,this.userId,t))}}function Rc(n){return Xi(n,"documentOverlays")}class Fa{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Xr(e.integerValue));else if("doubleValue"in e){const r=Xr(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),Eg(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Il(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?m_(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):gt()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const s of Object.keys(r))this.At(s,t),this.Pt(r[s],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const s of r)this.Pt(s,t)}ft(e,t){this.Tt(t,37),ut.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function fT(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function jg(n){const e=64-function(r){let s=0;for(let u=0;u<8;++u){const c=fT(255&r[u]);if(s+=c,8!==c)break}return s}(n);return Math.ceil(e/8)}Fa.St=new Fa;class XP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Dt(r.value),r=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const s=t.codePointAt(0);this.Dt(240|s>>>18),this.Dt(128|63&s>>>12),this.Dt(128|63&s>>>6),this.Dt(128|63&s)}}this.Ct()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Nt(e){const t=this.Bt(e),r=jg(t);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}kt(e){const t=this.Bt(e),r=jg(t);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class cb{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class pT{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class xf{constructor(){this.Wt=new XP,this.Gt=new cb(this.Wt),this.zt=new pT(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Wd{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wd(this.indexId,this.documentKey,this.arrayValue,r)}}function Pc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=kE(n.arrayValue,e.arrayValue),0!==t?t:(t=kE(n.directionalValue,e.directionalValue),0!==t?t:ut.comparator(n.documentKey,e.documentKey)))}function kE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class LE{constructor(e){this.Jt=new ir((t,r)=>Dr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Nt(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Tu(e);if(void 0!==t&&!this.tn(t))return!1;const r=Na(e);let s=new Set,u=0,c=0;for(;u<r.length&&this.tn(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.Jt.size>0){const g=this.Jt.getIterator().getNext();if(!s.has(g.field.canonicalString())){const _=r[u];if(!this.nn(g,_)||!this.rn(this.Yt[c++],_))return!1}++u}for(;u<r.length;++u)if(c>=this.Yt.length||!this.rn(this.Yt[c++],r[u]))return!1;return!0}sn(){if(this.Xt)return null;let e=new ir(Dr.comparator);const t=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new lf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new lf(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new lf(r.field,"asc"===r.dir?0:1)));return new uf(uf.UNKNOWN_ID,this.collectionId,t,mg.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Mf(n){var e,t;if(Nt(n instanceof _n||n instanceof qn),n instanceof _n){if(n instanceof eE){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>_n.create(n.field,"==",u)))||[];return qn.create(s,"or")}return n}const r=n.filters.map(s=>Mf(s));return qn.create(r,n.op)}function db(n){if(0===n.getFilters().length)return[];const e=FE(Mf(n));return Nt(gT(e)),F_(e)||V_(e)?[e]:e.getFilters()}function F_(n){return n instanceof _n}function V_(n){return n instanceof qn&&Mw(n)}function gT(n){return F_(n)||V_(n)||function(t){if(t instanceof qn&&Yv(t)){for(const r of t.getFilters())if(!F_(r)&&!V_(r))return!1;return!0}return!1}(n)}function FE(n){if(Nt(n instanceof _n||n instanceof qn),n instanceof _n)return n;if(1===n.filters.length)return FE(n.filters[0]);const e=n.filters.map(r=>FE(r));let t=qn.create(e,n.op);return t=U_(t),gT(t)?t:(Nt(t instanceof qn),Nt(vf(t)),Nt(t.filters.length>1),t.filters.reduce((r,s)=>qd(r,s)))}function qd(n,e){let t;return Nt(n instanceof _n||n instanceof qn),Nt(e instanceof _n||e instanceof qn),t=n instanceof _n?e instanceof _n?qn.create([n,e],"and"):mT(n,e):e instanceof _n?mT(e,n):function(s,u){if(Nt(s.filters.length>0&&u.filters.length>0),vf(s)&&vf(u))return Ow(s,u.getFilters());const c=Yv(s)?s:u,g=Yv(s)?u:s,_=c.filters.map(D=>qd(D,g));return qn.create(_,"or")}(n,e),U_(t)}function mT(n,e){if(vf(e))return Ow(e,n.getFilters());{const t=e.filters.map(r=>qd(n,r));return qn.create(t,"or")}}function U_(n){if(Nt(n instanceof _n||n instanceof qn),n instanceof _n)return n;const e=n.getFilters();if(1===e.length)return U_(e[0]);if(Nw(n))return n;const t=e.map(s=>U_(s)),r=[];return t.forEach(s=>{s instanceof _n?r.push(s):s instanceof qn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:qn.create(r,n.op)}class hb{constructor(){this.on=new VE}addToCollectionParentIndex(e,t){return this.on.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(ro.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class VE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ir(Pn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ir(Pn.comparator)).toArray()}}const B_=new Uint8Array(0);class fb{constructor(e,t){this.user=e,this.databaseId=t,this._n=new VE,this.an=new xi(r=>Zo(r),(r,s)=>Cl(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const u={collectionId:r,parent:vs(s)};return _T(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Gv(t),""],!1,!0);return _T(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Cu(c.parent))}return r})}addFieldIndex(e,t){const r=Of(e),s={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(_=>[_.fieldPath.canonicalString(),_.kind])};var g;delete s.indexId;const u=r.add(s);if(t.indexState){const c=xc(e);return u.next(g=>{c.put(dT(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Of(e),s=xc(e),u=Nf(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Of(e),r=Nf(e),s=xc(e);return t.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,t){return fe.forEach(this.un(t),r=>this.getIndexType(e,r).next(s=>{if(0===s||1===s){const u=new LE(r).sn();if(null!=u)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=Nf(e);let s=!0;const u=new Map;return fe.forEach(this.un(t),c=>this.cn(e,c).next(g=>{s&&(s=!!g),u.set(c,g)})).next(()=>{if(s){let c=an();const g=[];return fe.forEach(u,(_,D)=>{var Qe;Ke("IndexedDbIndexManager",`Using index ${Qe=_,`id=${Qe.indexId}|cg=${Qe.collectionGroup}|f=${Qe.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${Zo(t)}`);const P=function(Qe,Ct){const Qt=Tu(Ct);if(void 0===Qt)return null;for(const Cn of xg(Qe,Qt.fieldPath))switch(Cn.op){case"array-contains-any":return Cn.value.arrayValue.values||[];case"array-contains":return[Cn.value]}return null}(D,_),k=function(Qe,Ct){const Qt=new Map;for(const Cn of Na(Ct))for(const ri of xg(Qe,Cn.fieldPath))switch(ri.op){case"==":case"in":Qt.set(Cn.fieldPath.canonicalString(),ri.value);break;case"not-in":case"!=":return Qt.set(Cn.fieldPath.canonicalString(),ri.value),Array.from(Qt.values())}return null}(D,_),G=function(Qe,Ct){const Qt=[];let Cn=!0;for(const ri of Na(Ct)){const ao=0===ri.kind?kw(Qe,ri.fieldPath,Qe.startAt):Lw(Qe,ri.fieldPath,Qe.startAt);Qt.push(ao.value),Cn&&(Cn=ao.inclusive)}return new bu(Qt,Cn)}(D,_),J=function(Qe,Ct){const Qt=[];let Cn=!0;for(const ri of Na(Ct)){const ao=0===ri.kind?Lw(Qe,ri.fieldPath,Qe.endAt):kw(Qe,ri.fieldPath,Qe.endAt);Qt.push(ao.value),Cn&&(Cn=ao.inclusive)}return new bu(Qt,Cn)}(D,_),de=this.ln(_,D,G),Se=this.ln(_,D,J),xe=this.hn(_,D,k),ht=this.Pn(_.indexId,P,de,G.inclusive,Se,J.inclusive,xe);return fe.forEach(ht,mt=>r.j(mt,t.limit).next(Qe=>{Qe.forEach(Ct=>{const Qt=ut.fromSegments(Ct.documentKey);c.has(Qt)||(c=c.add(Qt),g.push(Qt))})}))}).next(()=>g)}return fe.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:db(qn.create(e.filters,"and")).map(r=>tE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,r,s,u,c,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),P=[];for(let k=0;k<_;++k){const G=t?this.In(t[k/D]):B_,J=this.Tn(e,G,r[k%D],s),de=this.En(e,G,u[k%D],c),Se=g.map(xe=>this.Tn(e,G,xe,!0));P.push(...this.createRange(J,de,Se))}return P}Tn(e,t,r,s){const u=new Wd(e,ut.empty(),t,r);return s?u:u.Ht()}En(e,t,r,s){const u=new Wd(e,ut.empty(),t,r);return s?u.Ht():u}cn(e,t){const r=new LE(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const g of u)r.en(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;const s=this.un(t);return fe.forEach(s,u=>this.cn(e,u).next(c=>{c?0!==r&&c.fields.length<function(_){let D=new ir(Dr.comparator),P=!1;for(const k of _.filters)for(const G of k.getFlattenedFilters())G.field.isKeyField()||("array-contains"===G.op||"array-contains-any"===G.op?P=!0:D=D.add(G.field));for(const k of _.orderBy)k.field.isKeyField()||(D=D.add(k.field));return D.size+(P?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}dn(e,t){const r=new xf;for(const s of Na(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.jt(s.kind);Fa.St.ht(u,c)}return r.Ut()}In(e){const t=new xf;return Fa.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const r=new xf;return Fa.St.ht(gf(this.databaseId,t),r.jt(function(u){const c=Na(u);return 0===c.length?0:c[c.length-1].kind}(e))),r.Ut()}hn(e,t,r){if(null===r)return[];let s=[];s.push(new xf);let u=0;for(const c of Na(e)){const g=r[u++];for(const _ of s)if(this.Rn(t,c.fieldPath)&&Sg(g))s=this.Vn(s,c,g);else{const D=_.jt(c.kind);Fa.St.ht(g,D)}}return this.mn(s)}ln(e,t,r){return this.hn(e,t,r.position)}mn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ut();return t}Vn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of s){const _=new xf;_.seed(g.Ut()),Fa.St.ht(c,_.jt(t.kind)),u.push(_)}return u}Rn(e,t){return!!e.filters.find(r=>r instanceof _n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Of(e),s=xc(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return fe.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{c.push(function(P,k){const G=k?new mg(k.sequenceNumber,new ro(bc(k.readTime),new ut(Cu(k.documentKey)),k.largestBatchId)):mg.empty(),J=P.fields.map(([de,Se])=>new lf(Dr.fromServerFormat(de),Se));return new uf(P.indexId,P.collectionGroup,J,G)}(g,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:zt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Of(e),u=xc(e);return this.fn(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>fe.forEach(g,_=>u.put(dT(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?fe.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),fe.forEach(g,_=>this.gn(e,s,_).next(D=>{const P=this.pn(u,_);return D.isEqual(P)?fe.resolve():this.yn(e,u,_,D,P)}))))})}wn(e,t,r,s){return Nf(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.An(r,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,r,s){return Nf(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.An(r,t.key),t.key.path.toArray()])}gn(e,t,r){const s=Nf(e);let u=new ir(Pc);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,t)])},(c,g)=>{u=u.add(new Wd(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}pn(e,t){let r=new ir(Pc);const s=this.dn(t,e);if(null==s)return r;const u=Tu(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Sg(c))for(const g of c.arrayValue.values||[])r=r.add(new Wd(t.indexId,e.key,this.In(g),s))}else r=r.add(new Wd(t.indexId,e.key,B_,s));return r}yn(e,t,r,s,u){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(_,D,P,k,G){const J=_.getIterator(),de=D.getIterator();let Se=El(J),xe=El(de);for(;Se||xe;){let ht=!1,mt=!1;if(Se&&xe){const Qe=P(Se,xe);Qe<0?mt=!0:Qe>0&&(ht=!0)}else null!=Se?mt=!0:ht=!0;ht?(k(xe),xe=El(de)):mt?(G(Se),Se=El(J)):(Se=El(J),xe=El(de))}}(s,u,Pc,g=>{c.push(this.wn(e,t,r,g))},g=>{c.push(this.Sn(e,t,r,g))}),fe.waitFor(c)}fn(e){let t=1;return xc(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Pc(c,g)).filter((c,g,_)=>!g||0!==Pc(c,_[g-1]));const s=[];s.push(e);for(const c of r){const g=Pc(c,e),_=Pc(c,t);if(0===g)s[0]=e.Ht();else if(g>0&&_<0)s.push(c),s.push(c.Ht());else if(_>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2){if(this.bn(s[c],s[c+1]))return[];u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,B_,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,B_,[]]))}return u}bn(e,t){return Pc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yT)}getMinOffset(e,t){return fe.mapArray(this.un(t),r=>this.cn(e,r).next(s=>s||gt())).next(yT)}}function _T(n){return Xi(n,"collectionParents")}function Nf(n){return Xi(n,"indexEntries")}function Of(n){return Xi(n,"indexConfiguration")}function xc(n){return Xi(n,"indexState")}function yT(n){Nt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;zv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ro(e.readTime,e.documentKey,t)}const Hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Is(e,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vT(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const _=r.Y({range:c},(P,k,G)=>(g++,G.delete()));u.push(_.next(()=>{Nt(1===g)}));const D=[];for(const P of t.mutations){const k=Od(e,P.key.path,t.batchId);u.push(s.delete(k)),D.push(P.key)}return fe.waitFor(u).next(()=>D)}function j_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}Is.DEFAULT_COLLECTION_PERCENTILE=10,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Is.DEFAULT=new Is(41943040,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Is.DISABLED=new Is(-1,0,0);class H_{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Dn={}}static ct(e,t,r,s){Nt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new H_(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mc(e).Y({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=kf(e),c=Mc(e);return c.add({}).next(g=>{Nt("number"==typeof g);const _=new pE(g,t,r,s),D=function(J,de,Se){const xe=Se.baseMutations.map(mt=>Vg(J.ut,mt)),ht=Se.mutations.map(mt=>Vg(J.ut,mt));return{userId:de,batchId:Se.batchId,localWriteTimeMs:Se.localWriteTime.toMillis(),baseMutations:xe,mutations:ht}}(this.serializer,this.userId,_),P=[];let k=new ir((G,J)=>zt(G.canonicalString(),J.canonicalString()));for(const G of s){const J=Od(this.userId,G.key.path,g);k=k.add(G.key.path.popLast()),P.push(c.put(D)),P.push(u.put(J,BA))}return k.forEach(G=>{P.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.Dn[g]=_.keys()}),fe.waitFor(P).next(()=>_)})}lookupMutationBatch(e,t){return Mc(e).get(t).next(r=>r?(Nt(r.userId===this.userId),Sc(this.serializer,r)):null)}Cn(e,t){return this.Dn[t]?fe.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Dn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Mc(e).Y({index:"userMutationsIndex",range:s},(c,g,_)=>{g.userId===this.userId&&(Nt(g.batchId>=r),u=Sc(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mc(e).W("userMutationsIndex",t).next(r=>r.map(s=>Sc(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=a_(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return kf(e).Y({range:s},(c,g,_)=>{const[D,P,k]=c,G=Cu(P);if(D===this.userId&&t.path.isEqual(G))return Mc(e).get(k).next(J=>{if(!J)throw gt();Nt(J.userId===this.userId),u.push(Sc(this.serializer,J))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(zt);const s=[];return t.forEach(u=>{const c=a_(this.userId,u.path),g=IDBKeyRange.lowerBound(c),_=kf(e).Y({range:g},(D,P,k)=>{const[G,J,de]=D,Se=Cu(J);G===this.userId&&u.path.isEqual(Se)?r=r.add(de):k.done()});s.push(_)}),fe.waitFor(s).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=a_(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new ir(zt);return kf(e).Y({range:c},(_,D,P)=>{const[k,G,J]=_,de=Cu(G);k===this.userId&&r.isPrefixOf(de)?de.length===s&&(g=g.add(J)):P.done()}).next(()=>this.vn(e,g))}vn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Mc(e).get(u).next(c=>{if(null===c)throw gt();Nt(c.userId===this.userId),r.push(Sc(this.serializer,c))}))}),fe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return vT(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),fe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return kf(e).Y({range:r},(u,c,g)=>{if(u[0]===this.userId){const _=Cu(u[1]);s.push(_)}else g.done()}).next(()=>{Nt(0===s.length)})})}containsKey(e,t){return ET(e,this.userId,t)}Mn(e){return UE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ET(n,e,t){const r=a_(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return kf(n).Y({range:u,J:!0},(g,_,D)=>{const[P,k,G]=g;P===e&&k===s&&(c=!0),D.done()}).next(()=>c)}function Mc(n){return Xi(n,"mutations")}function kf(n){return Xi(n,"documentMutations")}function UE(n){return Xi(n,"mutationQueues")}class Nc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Nc(0)}static Nn(){return new Nc(-1)}}class pb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Nc(t.highestTargetId);return t.highestTargetId=r.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ot.fromTimestamp(new Cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Ln(e,s)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(t,r),this.Ln(e,r))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$g(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Nt(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return $g(e).Y((c,g)=>{const _=Pf(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>fe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return $g(e).Y((r,s)=>{const u=Pf(s);t(u)})}Bn(e){return BE(e).get("targetGlobalKey").next(t=>(Nt(null!==t),t))}Ln(e,t){return BE(e).put("targetGlobalKey",t)}kn(e,t){return $g(e).put(ME(this.serializer,t))}qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $g(e).Y({range:s,index:"queryTargetsIndex"},(c,g,_)=>{const D=Pf(g);Cl(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Pl(e);return t.forEach(c=>{const g=vs(c.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,c))}),fe.waitFor(s)}removeMatchingKeys(e,t,r){const s=Pl(e);return fe.forEach(t,u=>{const c=vs(u.path);return fe.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Pl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Pl(e);let u=an();return s.Y({range:r,J:!0},(c,g,_)=>{const D=Cu(c[1]),P=new ut(D);u=u.add(P)}).next(()=>u)}containsKey(e,t){const r=vs(t.path),s=IDBKeyRange.bound([r],[Gv(r)],!1,!0);let u=0;return Pl(e).Y({index:"documentTargetsIndex",J:!0,range:s},([c,g],_,D)=>{0!==c&&(u++,D.done())}).next(()=>u>0)}_t(e,t){return $g(e).get(t).next(r=>r?Pf(r):null)}}function $g(n){return Xi(n,"targets")}function BE(n){return Xi(n,"targetGlobal")}function Pl(n){return Xi(n,"targetDocuments")}function gb([n,e],[t,r]){const s=zt(n,t);return 0===s?zt(e,r):s}class $_{constructor(e){this.Qn=e,this.buffer=new ir(gb),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Pe.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Nd(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield vc(r)}yield t.Gn(3e5)}))}}class mb{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(io._e);const r=new $_(t);return this.zn.forEachTarget(e,s=>r.Un(s.sequenceNumber)).next(()=>this.zn.Hn(e,s=>r.Un(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Hg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hg):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let r,s,u,c,g,_,D;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),s=this.params.maximumSequenceNumbersToCollect):s=k,c=Date.now(),this.nthSequenceNumber(e,s))).next(k=>(r=k,g=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(D=Date.now(),wu()<=Bi.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-P}ms\n\tDetermined least recently used ${s} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${k} documents in `+(D-_)+`ms\nTotal Duration: ${D-P}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:k})))}}class _b{constructor(e,t){this.db=e,this.garbageCollector=function G_(n,e){return new mb(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Yn(e){let t=0;return this.Hn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(r,s)=>t(s))}addReference(e,t,r){return To(e,r)}removeReference(e,t,r){return To(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return To(e,t)}Xn(e,t){return function(s,u){let c=!1;return UE(s).Z(g=>ET(s,g,u).next(_=>(_&&(c=!0),fe.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Zn(e,(c,g)=>{if(g<=t){const _=this.Xn(e,c).next(D=>{if(!D)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ot.min()),Pl(e).delete([0,vs(c.path)])))});s.push(_)}}).next(()=>fe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return To(e,t)}Zn(e,t){const r=Pl(e);let s,u=io._e;return r.Y({index:"documentTargetsIndex"},([c,g],{path:_,sequenceNumber:D})=>{0===c?(u!==io._e&&t(new ut(Cu(s)),u),u=D,s=_):u=io._e}).next(()=>{u!==io._e&&t(new ut(Cu(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function To(n,e){return Pl(n).put((s=n.currentSequenceNumber,{targetId:0,path:vs(e.path),sequenceNumber:s}));var s}class Lf{constructor(){this.changes=new xi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ws{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xl(e).put(r)}removeEntry(e,t,r){return xl(e).delete(function(u,c){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],Sf(c),g[g.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.er(e,r)))}getEntry(e,t){let r=Pr.newInvalidDocument(t);return xl(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Mu(t))},(s,u)=>{r=this.tr(t,u)}).next(()=>r)}nr(e,t){let r={size:0,document:Pr.newInvalidDocument(t)};return xl(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Mu(t))},(s,u)=>{r={document:this.tr(t,u),size:j_(u)}}).next(()=>r)}getEntries(e,t){let r=wo();return this.rr(e,t,(s,u)=>{const c=this.tr(s,u);r=r.insert(s,c)}).next(()=>r)}ir(e,t){let r=wo(),s=new fr(ut.comparator);return this.rr(e,t,(u,c)=>{const g=this.tr(u,c);r=r.insert(u,g),s=s.insert(u,j_(c))}).next(()=>({documents:r,sr:s}))}rr(e,t,r){if(t.isEmpty())return fe.resolve();let s=new ir(Kd);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Mu(s.first()),Mu(s.last())),c=s.getIterator();let g=c.getNext();return xl(e).Y({index:"documentKeyIndex",range:u},(_,D,P)=>{const k=ut.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&Kd(g,k)<0;)r(g,null),g=c.getNext();g&&g.isEqual(k)&&(r(g,D),g=c.hasNext()?c.getNext():null),g?P.U(Mu(g)):P.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,u){const c=t.path,g=[c.popLast().toArray(),c.lastSegment(),Sf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],_=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xl(e).W(IDBKeyRange.bound(g,_,!0)).next(D=>{u?.incrementDocumentReadCount(D.length);let P=wo();for(const k of D){const G=this.tr(ut.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);G.isFoundDocument()&&(Og(t,G)||s.has(G.key))&&(P=P.insert(G.key,G))}return P})}getAllFromCollectionGroup(e,t,r,s){let u=wo();const c=Zd(t,r),g=Zd(t,ro.max());return xl(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(_,D,P)=>{const k=this.tr(ut.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(k.key,k),u.size===s&&P.done()}).next(()=>u)}newChangeBuffer(e){return new z_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Co(e).get("remoteDocumentGlobalKey").next(t=>(Nt(!!t),t))}er(e,t){return Co(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const r=function lT(n,e){let t;if(e.document)t=ib(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ut.fromSegments(e.noDocument.path),s=bc(e.noDocument.readTime);t=Pr.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=ut.fromSegments(e.unknownDocument.path),s=bc(e.unknownDocument.version);t=Pr.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const u=new Cr(s[0],s[1]);return Ot.fromTimestamp(u)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return Pr.newInvalidDocument(e)}}function Oc(n){return new ws(n)}class z_ extends Lf{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new xi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new ir((u,c)=>zt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.ar.get(u);if(t.push(this._r.removeEntry(e,u,g.readTime)),c.isValidDocument()){const _=Ug(this._r.serializer,c);s=s.add(u.path.popLast());const D=j_(_);r+=D-g.size,t.push(this._r.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=Ug(this._r.serializer,c.convertToNoDocument(Ot.min()));t.push(this._r.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,u))}),t.push(this._r.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(r=>(this.ar.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:r,sr:s})=>(s.forEach((u,c)=>{this.ar.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Co(n){return Xi(n,"remoteDocumentGlobal")}function xl(n){return Xi(n,"remoteDocumentsV14")}function Mu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zd(n,e){const t=e.documentKey.path.toArray();return[n,Sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kd(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=zt(t[u],r[u]),s)return s;return s=zt(t.length,r.length),s||(s=zt(t[t.length-2],r[r.length-2]),s||zt(t[t.length-1],r[r.length-1]))}class Ff{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yd{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&bl(r.mutation,s,so.empty(),Cr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,an()).next(()=>r))}getLocalViewOfDocuments(e,t,r=an()){const s=Su();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=Ko();return u.forEach((g,_)=>{c=c.insert(g,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,an()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,g)=>{t.set(c,g)})})}computeViews(e,t,r,s){let u=wo();const c=kg(),g=kg();return t.forEach((_,D)=>{const P=r.get(D.key);s.has(D.key)&&(void 0===P||P.mutation instanceof Sl)?u=u.insert(D.key,D):void 0!==P?(c.set(D.key,P.mutation.getFieldMask()),bl(P.mutation,D,P.mutation.getFieldMask(),Cr.now())):c.set(D.key,so.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,P)=>c.set(D,P)),t.forEach((D,P)=>{var k;return g.set(D,new Ff(P,null!==(k=c.get(D))&&void 0!==k?k:null))}),g))}recalculateAndSaveOverlays(e,t){const r=kg();let s=new fr((c,g)=>c-g),u=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const g of c)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let P=r.get(_)||so.empty();P=g.applyToLocalView(D,P),r.set(_,P);const k=(s.get(g.batchId)||an()).add(_);s=s.insert(g.batchId,k)})}).next(()=>{const c=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,P=_.value,k=XA();P.forEach(G=>{if(!u.has(G)){const J=dE(t.get(G),r.get(G));null!==J&&k.set(G,J),u=u.add(G)}}),c.push(this.documentOverlayCache.saveOverlays(e,D,k))}return fe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return ut.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var c}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):fe.resolve(Su());let g=-1,_=u;return c.next(D=>fe.forEach(D,(P,k)=>(g<k.largestBatchId&&(g=k.largestBatchId),u.get(P)?fe.resolve():this.remoteDocumentCache.getEntry(e,P).next(G=>{_=_.insert(P,G)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,an())).next(P=>({batchId:g,changes:D_(P)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(r=>{let s=Ko();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const u=t.collectionGroup;let c=Ko();return this.indexManager.getCollectionParents(e,u).next(g=>fe.forEach(g,_=>{const D=(k=t,G=_.child(u),new Dl(G,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt));var k,G;return this.getDocumentsMatchingCollectionQuery(e,D,r,s).next(P=>{P.forEach((k,G)=>{c=c.insert(k,G)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,s))).next(c=>{u.forEach((_,D)=>{const P=D.getKey();null===c.get(P)&&(c=c.insert(P,Pr.newInvalidDocument(P)))});let g=Ko();return c.forEach((_,D)=>{const P=u.get(_);void 0!==P&&bl(P.mutation,D,so.empty(),Cr.now()),Og(t,D)&&(g=g.insert(_,D))}),g})}}class Vf{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return fe.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(s=t).id,version:s.version,createTime:ci(s.createTime)}),fe.resolve();var s}getNamedQuery(e,t){return fe.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(s=t).name,query:Bg(s.bundledQuery),readTime:ci(s.readTime)}),fe.resolve();var s}}class Uf{constructor(){this.overlays=new fr(ut.comparator),this.lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Su();return fe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.lt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.lr.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.lr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const s=Su(),u=t.length+1,c=new ut(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new fr((D,P)=>D-P);const c=this.overlays.getIterator();for(;c.hasNext();){const D=c.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let P=u.get(D.largestBatchId);null===P&&(P=Su(),u=u.insert(D.largestBatchId,P)),P.set(D.getKey(),D)}}const g=Su(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,P)=>g.set(D,P)),!(g.size()>=s)););return fe.resolve(g)}lt(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Yw(t,r));let u=this.lr.get(t);void 0===u&&(u=an(),this.lr.set(t,u)),this.lr.set(t,u.add(r.key))}}class kc{constructor(){this.hr=new ir(jr.Pr),this.Ir=new ir(jr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new jr(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new jr(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new ut(new Pn([])),r=new jr(t,e),s=new jr(t,e+1),u=[];return this.Ir.forEachInRange([r,s],c=>{this.dr(c),u.push(c.key)}),u}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ut(new Pn([])),r=new jr(t,e),s=new jr(t,e+1);let u=an();return this.Ir.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new jr(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class jr{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ut.comparator(e.key,t.key)||zt(e.gr,t.gr)}static Tr(e,t){return zt(e.gr,t.gr)||ut.comparator(e.key,t.key)}}class wT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new ir(jr.Pr)}checkEmpty(e){return fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.pr;this.pr++;const c=new pE(u,t,r,s);this.mutationQueue.push(c);for(const g of s)this.yr=this.yr.add(new jr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Sr(t+1),u=s<0?0:s;return fe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jr(t,0),s=new jr(t,Number.POSITIVE_INFINITY),u=[];return this.yr.forEachInRange([r,s],c=>{const g=this.wr(c.gr);u.push(g)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(zt);return t.forEach(s=>{const u=new jr(s,0),c=new jr(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([u,c],g=>{r=r.add(g.gr)})}),fe.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;ut.isDocumentKey(u)||(u=u.child(""));const c=new jr(new ut(u),0);let g=new ir(zt);return this.yr.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(g=g.add(_.gr)),!0)},c),fe.resolve(this.br(g))}br(e){const t=[];return e.forEach(r=>{const s=this.wr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Nt(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return fe.forEach(t.mutations,s=>{const u=new jr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new jr(t,0),s=this.yr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return fe.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TT{constructor(e){this.Cr=e,this.docs=new fr(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():Pr.newInvalidDocument(t))}getEntries(e,t){let r=wo();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Pr.newInvalidDocument(s))}),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=wo();const c=t.path,g=new ut(c.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:P}}=_.getNext();if(!c.isPrefixOf(D.path))break;D.path.length>c.length+1||zv(UA(P),r)<=0||(s.has(P.key)||Og(t,P))&&(u=u.insert(P.key,P.mutableCopy()))}return fe.resolve(u)}getAllFromCollectionGroup(e,t,r,s){gt()}vr(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CT(this)}getSize(e){return fe.resolve(this.size)}}class CT extends Lf{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this._r.addEntry(e,s)):this._r.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class DT{constructor(e){this.persistence=e,this.Fr=new xi(t=>Zo(t),Cl),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Mr=0,this.Or=new kc,this.targetCount=0,this.Nr=Nc.On()}forEachTarget(e,t){return this.Fr.forEach((r,s)=>t(s)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),fe.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Nc(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.kn(t),fe.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Fr.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Fr.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),fe.waitFor(u).next(()=>s)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.Or.containsKey(t))}}class W_{constructor(e,t){this.Br={},this.overlays={},this.Lr=new io(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new DT(this),this.indexManager=new hb,this.remoteDocumentCache=new TT(r=>this.referenceDelegate.Qr(r)),this.serializer=new xE(t),this.Kr=new Vf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new wT(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const s=new AT(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(u=>this.referenceDelegate.Ur(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Wr(e,t){return fe.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class AT extends vw{constructor(e){super(),this.currentSequenceNumber=e}}class Gg{constructor(e){this.persistence=e,this.Gr=new kc,this.zr=null}static jr(e){return new Gg(e)}get Hr(){if(this.zr)return this.zr;throw gt()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Hr.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Hr,r=>{const s=ut.fromPath(r);return this.Jr(e,s).next(u=>{u||t.removeEntry(s,Ot.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return fe.or([()=>fe.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class bT{constructor(e){this.serializer=e}N(e,t,r,s){const u=new Ec("createOrUpgrade",t);var _;r<1&&s>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",o_,{unique:!0}),_.createObjectStore("documentMutations"),q_(e),function(_){_.createObjectStore("remoteDocuments")}(e));let c=fe.resolve();return r<3&&s>=3&&(0!==r&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),q_(e)),c=c.next(()=>function(_){const D=_.store("targetGlobal"),P={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",P)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(_,D){return D.store("mutations").W().next(P=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",o_,{unique:!0});const k=D.store("mutations"),G=P.map(J=>k.put(J));return fe.waitFor(G)})}(e,u))),c=c.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Zr(u))),r<6&&s>=6&&(c=c.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(u)))),r<7&&s>=7&&(c=c.next(()=>this.ei(u))),r<8&&s>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.ni(u))),r<11&&s>=11&&(c=c.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(_){const D=_.createObjectStore("documentOverlays",{keyPath:Tg});D.createIndex("collectionPathOverlayIndex",Dw,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",Aw,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(_){const D=_.createObjectStore("remoteDocumentsV14",{keyPath:jA});D.createIndex("documentKeyIndex",Wv),D.createIndex("collectionGroupIndex",Tw)}(e)).next(()=>this.ri(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.ii(e,u))),r<15&&s>=15&&(c=c.next(()=>function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:Cw}).createIndex("sequenceNumberIndex",YP,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:QP}).createIndex("documentKeyIndex",wg,{unique:!1})}(e))),c}Xr(e){let t=0;return e.store("remoteDocuments").Y((r,s)=>{t+=j_(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>fe.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(g=>fe.forEach(g,_=>{Nt(_.userId===u.userId);const D=Sc(this.serializer,_);return vT(e,u.userId,D).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Y((c,g)=>{const _=new Pn(c),D=[0,vs(_)];u.push(t.get(D).next(P=>P?fe.resolve():t.put({targetId:0,path:vs(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:zA});const r=t.store("collectionParents"),s=new VE,u=c=>{if(s.add(c)){const g=c.lastSegment(),_=c.popLast();return r.put({collectionId:g,parent:vs(_)})}};return t.store("remoteDocuments").Y({J:!0},(c,g)=>{const _=new Pn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([c,g,_],D)=>{const P=Cu(g);return u(P.popLast())}))}ni(e){const t=e.store("targets");return t.Y((r,s)=>{const u=Pf(s),c=ME(this.serializer,u);return t.put(c)})}ri(e,t){const r=t.store("remoteDocuments"),s=[];return r.Y((u,c)=>{const g=t.store("remoteDocumentsV14"),_=(k=c,k.document?new ut(Pn.fromString(k.document.name).popFirst(5)):k.noDocument?ut.fromSegments(k.noDocument.path):k.unknownDocument?ut.fromSegments(k.unknownDocument.path):gt()).path.toArray(),D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};var k;s.push(g.put(D))}).next(()=>fe.waitFor(s))}ii(e,t){const r=t.store("mutations"),s=Oc(this.serializer),u=new W_(Gg.jr,this.serializer.ut);return r.W().next(c=>{const g=new Map;return c.forEach(_=>{var D;let P=null!==(D=g.get(_.userId))&&void 0!==D?D:an();Sc(this.serializer,_).keys().forEach(k=>P=P.add(k)),g.set(_.userId,P)}),fe.forEach(g,(_,D)=>{const P=new yi(D),k=L_.ct(this.serializer,P),G=u.getIndexManager(P),J=H_.ct(P,this.serializer,G,u.referenceDelegate);return new Yd(s,J,k,G).recalculateAndSaveOverlaysForDocumentKeys(new hf(t,io._e),_).next()})})}}function q_(n){n.createObjectStore("targetDocuments",{keyPath:$A}).createIndex("documentTargetsIndex",GA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HA,{unique:!0}),n.createObjectStore("targetGlobal")}const jE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ST{constructor(e,t,r,s,u,c,g,_,D,P,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=u,this.window=c,this.document=g,this.oi=D,this._i=P,this.ai=k,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=G=>Promise.resolve(),!ST.D())throw new qe(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _b(this,s),this.Ii=t+"main",this.serializer=new xE(_),this.Ti=new qo(this.Ii,this.ai,new bT(this.serializer)),this.qr=new pb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Oc(this.serializer),this.Kr=new NE,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===P&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,jE);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new io(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var r=(0,Pe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,Pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Pe.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>K_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(Nd(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Z_(e).get("owner").next(t=>fe.resolve(this.wi(t)))}Si(e){return K_(e).delete(this.clientId)}bi(){var e=this;return(0,Pe.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Xi(r,"clientMetadata");return s.W().next(u=>{const c=e.Ci(u,18e5),g=u.filter(_=>-1===c.indexOf(_));return fe.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.Ei)for(const r of t)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?fe.resolve(!0):Z_(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,jE);return!1}}return!(!this.networkEnabled||!this.inForeground)||K_(e).W().next(r=>void 0===this.Ci(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Pe.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new hf(t,io._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(r=>this.Di(r.updateTimeMs,t)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>K_(e).W().next(t=>this.Ci(t,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return H_.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fb(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return L_.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(_=this.ai)?Rw:14===_?qv:13===_?Sw:12===_?bw:11===_?u_:void gt();var _;let c;return this.Ti.runTransaction(e,s,u,g=>(c=new hf(g,this.Lr?this.Lr.next():io._e),"readwrite-primary"===t?this.fi(c).next(_=>!!_||this.gi(c)).next(_=>{if(!_)throw Rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new qe(Ce.FAILED_PRECONDITION,yw);return r(c)}).next(_=>this.yi(c).next(()=>_)):this.Li(c).next(()=>r(c)))).then(g=>(c.raiseOnCommittedEvent(),g))}Li(e){return Z_(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(Ce.FAILED_PRECONDITION,jE)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Z_(e).put("owner",t)}static D(){return qo.D()}pi(e){const t=Z_(e);return t.get("owner").next(r=>this.wi(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Di(e,t){const r=Date.now();return!(e<r-t||e>r&&(Rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,q.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const r=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Rr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Z_(n){return Xi(n,"owner")}function K_(n){return Xi(n,"clientMetadata")}function HE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class RT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=s}static Qi(e,t){let r=an(),s=an();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new RT(e,t.fromCache,r,s)}}class yb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vb{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,s){const u={result:null};return this.zi(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.ji(e,t,s,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new yb;return this.Hi(e,t,c).next(g=>{if(u.result=g,this.$i)return this.Ji(e,t,c,g.size)})}).next(()=>u.result)}Ji(e,t,r,s){return r.documentReadCount<this.Ui?(wu()<=Bi.in.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",If(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),fe.resolve()):(wu()<=Bi.in.DEBUG&&Ke("QueryEngine","Query:",If(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(wu()<=Bi.in.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",If(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(t))):fe.resolve())}zi(e,t){if(T_(t))return fe.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Mg(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=an(...u);return this.Gi.getDocuments(e,c).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.Yi(t,g);return this.Zi(t,D,c,_.readTime)?this.zi(e,Mg(t,null,"F")):this.Xi(e,D,t,_)}))})))}ji(e,t,r,s){return T_(t)||s.isEqual(Ot.min())?fe.resolve(null):this.Gi.getDocuments(e,r).next(u=>{const c=this.Yi(t,u);return this.Zi(t,c,r,s)?fe.resolve(null):(wu()<=Bi.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),If(t)),this.Xi(e,c,t,VA(s,-1)).next(g=>g))})}Yi(e,t){let r=new ir(sE(e));return t.forEach((s,u)=>{Og(e,u)&&(r=r.add(u))}),r}Zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Hi(e,t,r){return wu()<=Bi.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",If(t)),this.Gi.getDocumentsMatchingQuery(e,t,ro.min(),r)}Xi(e,t,r,s){return this.Gi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class Eb{constructor(e,t,r,s){this.persistence=e,this.es=t,this.serializer=s,this.ts=new fr(zt),this.ns=new xi(u=>Zo(u),Cl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yd(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function PT(n,e,t,r){return new Eb(n,e,t,r)}function xT(n,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,Pe.Z)(function*(n,e){const t=at(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let _=an();for(const D of s){c.push(D.batchId);for(const P of D.mutations)_=_.add(P.key)}for(const D of u){g.push(D.batchId);for(const P of D.mutations)_=_.add(P.key)}return t.localDocuments.getDocuments(r,_).next(D=>({_s:D,removedBatchIds:c,addedBatchIds:g}))})})}),Wg.apply(this,arguments)}function Y_(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function $E(n,e,t){let r=an(),s=an();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=wo();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(Ot.min())?(e.removeEntry(g,_.readTime),c=c.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),c=c.insert(g,_)):Ke("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{us:c,cs:s}})}function Zg(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qd(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.qr.getTargetData(r,e).next(u=>u?(s=u,fe.resolve(s)):t.qr.allocateTargetId(r).next(c=>(s=new Rl(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ts.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}function Bf(n,e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Pe.Z)(function*(n,e,t){const r=at(n),s=r.ts.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Nd(c))throw c;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ts=r.ts.remove(e),r.ns.delete(s.target)}),Jd.apply(this,arguments)}function J_(n,e,t){const r=at(n);let s=Ot.min(),u=an();return r.persistence.runTransaction("Execute query","readwrite",c=>function(_,D,P){const k=at(_),G=k.ns.get(P);return void 0!==G?fe.resolve(k.ts.get(G)):k.qr.getTargetData(D,P)}(r,c,Es(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(c,g.targetId).next(_=>{u=_})}).next(()=>r.es.getDocumentsMatchingQuery(c,e,t?s:Ot.min(),t?u:an())).next(g=>(OT(r,JA(e),g),{documents:g,ls:u})))}function MT(n,e){const t=at(n),r=at(t.qr),s=t.ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r._t(u,e).next(c=>c?c.target:null))}function NT(n,e){const t=at(n),r=t.rs.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ss.getAllFromCollectionGroup(s,e,VA(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(OT(t,e,s),s))}function OT(n,e,t){let r=n.rs.get(e)||Ot.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.rs.set(e,r)}function jf(){return jf=(0,Pe.Z)(function*(n,e,t,r){const s=at(n);let u=an(),c=wo();for(const D of t){const P=e.hs(D.metadata.name);D.document&&(u=u.add(P));const k=e.Ps(D);k.setReadTime(e.Is(D.metadata.readTime)),c=c.insert(P,k)}const g=s.ss.newChangeBuffer({trackRemovals:!0}),_=yield Qd(s,(P=r,Es(Ud(Pn.fromString(`__bundle__/docs/${P}`)))));var P;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>$E(D,g,c).next(P=>(g.apply(D),P)).next(P=>s.qr.removeMatchingKeysForTargetId(D,_.targetId).next(()=>s.qr.addMatchingKeys(D,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,P.us,P.cs)).next(()=>P.us)))}),jf.apply(this,arguments)}function X_(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,Pe.Z)(function*(n,e,t=an()){const r=yield Qd(n,Es(Bg(e.bundledQuery))),s=at(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=ci(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(u,e);const g=r.withResumeToken(sr.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(g.targetId,g),s.qr.updateTargetData(u,g).next(()=>s.qr.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.qr.addMatchingKeys(u,t,r.targetId)).next(()=>s.Kr.saveNamedQuery(u,e))})}),kT.apply(this,arguments)}function LT(n,e){return`firestore_clients_${n}_${e}`}function FT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Kg(n,e){return`firestore_targets_${n}_${e}`}class ey{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ts(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new qe(s.error.code,s.error.message))),c?new ey(e,t,s.state,u):(Rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ts(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new qe(r.error.code,r.error.message))),u?new Hf(e,r.state,s):(Rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ty{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=jw();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=Iw(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new ty(e,u):(Rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zE(t.clientId,t.onlineState):(Rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ny{constructor(){this.activeTargetIds=jw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ry{constructor(e,t,r,s,u){this.window=e,this.si=t,this.persistenceKey=r,this.Rs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new fr(zt),this.started=!1,this.ps=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ys=LT(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new ny),this.Ss=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Pe.Z)(function*(){const t=yield e.syncEngine.Bi();for(const s of t){if(s===e.Rs)continue;const u=e.getItem(LT(e.persistenceKey,s));if(u){const c=ty.Ts(s,u);c&&(e.gs=e.gs.insert(c.clientId,c))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const s=e.Ms(r);s&&e.xs(s)}for(const s of e.ps)e.fs(s);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,r){this.Ns(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Kg(this.persistenceKey,e));if(r){const s=Hf.Ts(e,r);s&&(t=s.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kg(this.persistenceKey,e))}updateQueryState(e,t,r){this.ks(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ss.test(r.key)){if(null==r.newValue){const s=t.Ks(r.key);return t.$s(s,null)}{const s=t.Us(r.key,r.newValue);if(s)return t.$s(s.clientId,s)}}else if(t.bs.test(r.key)){if(null!==r.newValue){const s=t.Ws(r.key,r.newValue);if(s)return t.Gs(s)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const s=t.zs(r.key,r.newValue);if(s)return t.js(s)}}else if(r.key===t.Cs){if(null!==r.newValue){const s=t.Ms(r.newValue);if(s)return t.xs(s)}}else if(r.key===t.ws){const s=function(c){let g=io._e;if(null!=c)try{const _=JSON.parse(c);Nt("number"==typeof _),g=_}catch(_){Rr("SharedClientState","Failed to read sequence number from WebStorage",_)}return g}(r.newValue);s!==io._e&&t.sequenceNumberHandler(s)}else if(r.key===t.vs){const s=t.Hs(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Js(u)))}}else t.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,r){const s=new ey(this.currentUser,e,t,r),u=FT(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Es())}Bs(e){const t=FT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,r){const s=Kg(this.persistenceKey,e),u=new Hf(e,t,r);this.setItem(s,u.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const r=this.Ks(e);return ty.Ts(r,t)}Ws(e,t){const r=this.bs.exec(e),s=Number(r[1]);return ey.Ts(new yi(void 0!==r[2]?r[2]:null),s,t)}zs(e,t){const r=this.Ds.exec(e),s=Number(r[1]);return Hf.Ts(s,t)}Ms(e){return zE.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,Pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const r=t?this.gs.insert(e,t):this.gs.remove(e),s=this.Os(this.gs),u=this.Os(r),c=[],g=[];return u.forEach(_=>{s.has(_)||c.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Xs(c,g).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=jw();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class WE{constructor(){this.eo=new ny,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new ny,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ib{ro(e){}shutdown(){}}class VT{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let iy=null;function sy(){return null===iy?iy=268435456+Math.round(2147483648*Math.random()):iy++,"0x"+iy.toString(16)}const qE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZE{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ts="WebChannelConnection";class oy extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${s}/databases/${u}`,this.po="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${u}`}get yo(){return!1}wo(t,r,s,u,c){const g=sy(),_=this.So(t,r);Ke("RestConnection",`Sending RPC '${t}' ${g}:`,_,s);const D={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(D,u,c),this.Do(t,_,D,s).then(P=>(Ke("RestConnection",`Received RPC '${t}' ${g}: `,P),P),P=>{throw Hs("RestConnection",`RPC '${t}' ${g} failed with error: `,P,"url: ",_,"request:",s),P})}Co(t,r,s,u,c,g){return this.wo(t,r,s,u,c)}bo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+xd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,c)=>t[c]=u),s&&s.headers.forEach((u,c)=>t[c]=u)}So(t,r){return`${this.mo}/v1/${r}:${qE[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,s){const u=sy();return new Promise((c,g)=>{const _=new PA;_.setWithCredentials(!0),_.listenOnce(pg.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Io.NO_ERROR:const P=_.getResponseJson();Ke(Ts,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(P)),c(P);break;case Io.TIMEOUT:Ke(Ts,`RPC '${e}' ${u} timed out`),g(new qe(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Io.HTTP_ERROR:const k=_.getStatus();if(Ke(Ts,`RPC '${e}' ${u} failed with status:`,k,"response text:",_.getResponseText()),k>0){let G=_.getResponseJson();Array.isArray(G)&&(G=G[0]);const J=G?.error;if(J&&J.status&&J.message){const de=function(xe){const ht=xe.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(ht)>=0?ht:Ce.UNKNOWN}(J.status);g(new qe(de,J.message))}else g(new qe(Ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new qe(Ce.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{Ke(Ts,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);Ke(Ts,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",D,r,15)})}vo(e,t,r){const s=sy(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=nf(),g=fg(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(_.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(_.xmlHttpFactory=new fw({})),this.bo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const P=u.join("");Ke(Ts,`Creating RPC '${e}' stream ${s}: ${P}`,_);const k=c.createWebChannel(P,_);let G=!1,J=!1;const de=new ZE({co:xe=>{J?Ke(Ts,`Not sending because RPC '${e}' stream ${s} is closed:`,xe):(G||(Ke(Ts,`Opening RPC '${e}' stream ${s} transport.`),k.open(),G=!0),Ke(Ts,`RPC '${e}' stream ${s} sending:`,xe),k.send(xe))},lo:()=>k.close()}),Se=(xe,ht,mt)=>{xe.listen(ht,Qe=>{try{mt(Qe)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return Se(k,Rd.EventType.OPEN,()=>{J||Ke(Ts,`RPC '${e}' stream ${s} transport opened.`)}),Se(k,Rd.EventType.CLOSE,()=>{J||(J=!0,Ke(Ts,`RPC '${e}' stream ${s} transport closed`),de.Ro())}),Se(k,Rd.EventType.ERROR,xe=>{J||(J=!0,Hs(Ts,`RPC '${e}' stream ${s} transport errored:`,xe),de.Ro(new qe(Ce.UNAVAILABLE,"The operation could not be completed")))}),Se(k,Rd.EventType.MESSAGE,xe=>{var ht;if(!J){const mt=xe.data[0];Nt(!!mt);const Ct=mt.error||(null===(ht=mt[0])||void 0===ht?void 0:ht.error);if(Ct){Ke(Ts,`RPC '${e}' stream ${s} received error:`,Ct);const Qt=Ct.status;let Cn=function(lw){const cO=Ni[lw];if(void 0!==cO)return mE(cO)}(Qt),ri=Ct.message;void 0===Cn&&(Cn=Ce.INTERNAL,ri="Unknown error status: "+Qt+" with message "+Ct.message),J=!0,de.Ro(new qe(Cn,ri)),k.close()}else Ke(Ts,`RPC '${e}' stream ${s} received:`,mt),de.Vo(mt)}}),Se(g,r_.STAT_EVENT,xe=>{xe.stat===rf.PROXY?Ke(Ts,`RPC '${e}' stream ${s} detected buffering proxy`):xe.stat===rf.NOPROXY&&Ke(Ts,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{de.Ao()},0),de}}function Yg(){return typeof window<"u"?window:null}function $f(){return typeof document<"u"?document:null}function Gf(n){return new nb(n,!0)}class KE{constructor(e,t,r=1e3,s=1.5,u=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=s,this.xo=u,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,t-r);s>0&&Ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class UT{constructor(e,t,r,s,u,c,g,_){this.si=e,this.Ko=r,this.$o=s,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new KE(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Pe.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Pe.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,Pe.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===Ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===t&&this.s_(r,s)},r=>{e(()=>{const s=new qe(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Pe.Z)(function*(){e.state=0,e.start()}))}o_(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wb extends UT{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=u}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function oT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:gt(),s=e.targetChange.targetIds||[],u=function(D,P){return D.useProto3Json?(Nt(void 0===P||"string"==typeof P),sr.fromBase64String(P||"")):(Nt(void 0===P||P instanceof Uint8Array),sr.fromUint8Array(P||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(D){const P=void 0===D.code?Ce.UNKNOWN:mE(D.code);return new qe(P,D.message||"")}(c);t=new M_(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=ka(n,r.document.name),u=ci(r.document.updateTime),c=r.document.createTime?ci(r.document.createTime):Ot.min(),g=new Pi({mapValue:{fields:r.document.fields}}),_=Pr.newFoundDocument(s,u,c,g);t=new Gd(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=ka(n,r.document),u=r.readTime?ci(r.readTime):Ot.min(),c=Pr.newNoDocument(s,u);t=new Gd([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=ka(n,r.document);t=new Gd([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return gt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,c=new Jw(s,u);t=new zd(r.targetId,c)}}var D;return t}(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ot.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?ci(c.readTime):Ot.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=es(this.serializer),t.addTarget=function(u,c){let g;const _=c.target;if(g=w_(_)?{documents:bE(u,_)}:{query:SE(u,_)},g.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){g.resumeToken=wE(u,c.resumeToken);const D=IE(u,c.expectedCount);null!==D&&(g.expectedCount=D)}else if(c.snapshotVersion.compareTo(Ot.min())>0){g.readTime=Af(u,c.snapshotVersion.toTimestamp());const D=IE(u,c.expectedCount);null!==D&&(g.expectedCount=D)}return g}(this.serializer,e);const r=function RE(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=es(this.serializer),t.removeTarget=e,this.e_(t)}}class YE extends UT{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=u,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function sb(n,e){return n&&n.length>0?(Nt(void 0!==e),n.map(t=>function(s,u){let c=ci(s.updateTime?s.updateTime:u);return c.isEqual(Ot.min())&&(c=ci(u)),new Tf(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ci(e.commitTime);return this.listener.I_(r,t)}return Nt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=es(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vg(this.serializer,r))};this.e_(t)}}class QE extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.wo(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(Ce.UNKNOWN,s.toString())})}Co(e,t,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new qe(Ce.UNKNOWN,u.toString())})}terminate(){this.d_=!0}}class Tb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Rr(t),this.f_=!1):Ke("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Cb{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=u,this.F_.ro(g=>{r.enqueueAndForget((0,Pe.Z)(function*(){var _;Lc(c)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Pe.Z)(function*(P){const k=at(P);k.C_.add(4),yield Xd(k),k.M_.set("Unknown"),k.C_.delete(4),yield zf(k)}),function D(P){return _.apply(this,arguments)})(c))}))}),this.M_=new Tb(r,s)}}function zf(n){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,Pe.Z)(function*(n){if(Lc(n))for(const e of n.v_)yield e(!0)}),Qg.apply(this,arguments)}function Xd(n){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,Pe.Z)(function*(n){for(const e of n.v_)yield e(!1)}),Jg.apply(this,arguments)}function Xg(n,e){const t=at(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),cy(t)?ly(t):th(t).Ho()&&uy(t,e))}function em(n,e){const t=at(n),r=th(t);t.D_.delete(e),r.Ho()&&JE(t,e),0===t.D_.size&&(r.Ho()?r.Zo():Lc(t)&&t.M_.set("Unknown"))}function uy(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}th(n).u_(e)}function JE(n,e){n.x_.Oe(e),th(n).c_(e)}function ly(n){n.x_=new eT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),th(n).start(),n.M_.g_()}function cy(n){return Lc(n)&&!th(n).jo()&&n.D_.size>0}function Lc(n){return 0===at(n).C_.size}function jT(n){n.x_=void 0}function Db(n){return tm.apply(this,arguments)}function tm(){return tm=(0,Pe.Z)(function*(n){n.D_.forEach((e,t)=>{uy(n,e)})}),tm.apply(this,arguments)}function XE(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,Pe.Z)(function*(n,e){jT(n),cy(n)?(n.M_.w_(e),ly(n)):n.M_.set("Unknown")}),dy.apply(this,arguments)}function HT(n,e,t){return hy.apply(this,arguments)}function hy(){return hy=(0,Pe.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof M_&&2===e.state&&e.cause)try{yield(r=(0,Pe.Z)(function*(u,c){const g=c.cause;for(const _ of c.targetIds)u.D_.has(_)&&(yield u.remoteSyncer.rejectListen(_,g),u.D_.delete(_),u.x_.removeTarget(_))}),function s(u,c){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nm(n,r)}else if(e instanceof Gd?n.x_.$e(e):e instanceof zd?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Ot.min()))try{const r=yield Y_(n.localStore);t.compareTo(r)>=0&&(yield function(u,c){const g=u.x_.it(c);return g.targetChanges.forEach((_,D)=>{if(_.resumeToken.approximateByteSize()>0){const P=u.D_.get(D);P&&u.D_.set(D,P.withResumeToken(_.resumeToken,c))}}),g.targetMismatches.forEach((_,D)=>{const P=u.D_.get(_);if(!P)return;u.D_.set(_,P.withResumeToken(sr.EMPTY_BYTE_STRING,P.snapshotVersion)),JE(u,_);const k=new Rl(P.target,_,D,P.sequenceNumber);uy(u,k)}),u.remoteSyncer.applyRemoteEvent(g)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield nm(n,r)}var r}),hy.apply(this,arguments)}function nm(n,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,Pe.Z)(function*(n,e,t){if(!Nd(e))throw e;n.C_.add(1),yield Xd(n),n.M_.set("Offline"),t||(t=()=>Y_(n.localStore)),n.asyncQueue.enqueueRetryable((0,Pe.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield zf(n)}))}),fy.apply(this,arguments)}function eI(n,e){return e().catch(t=>nm(n,t,e))}function eh(n){return py.apply(this,arguments)}function py(){return py=(0,Pe.Z)(function*(n){const e=at(n),t=Vc(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;gy(e);)try{const s=yield Zg(e.localStore,r);if(null===s){0===e.b_.length&&t.Zo();break}r=s.batchId,Fc(e,s)}catch(s){yield nm(e,s)}$T(e)&&GT(e)}),py.apply(this,arguments)}function gy(n){return Lc(n)&&n.b_.length<10}function Fc(n,e){n.b_.push(e);const t=Vc(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function $T(n){return Lc(n)&&!Vc(n).jo()&&n.b_.length>0}function GT(n){Vc(n).start()}function tI(n){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,Pe.Z)(function*(n){Vc(n).E_()}),Ml.apply(this,arguments)}function nI(n){return rI.apply(this,arguments)}function rI(){return rI=(0,Pe.Z)(function*(n){const e=Vc(n);for(const t of n.b_)e.P_(t.mutations)}),rI.apply(this,arguments)}function iI(n,e,t){return zT.apply(this,arguments)}function zT(){return zT=(0,Pe.Z)(function*(n,e,t){const r=n.b_.shift(),s=Kw.from(r,e,t);yield eI(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield eh(n)}),zT.apply(this,arguments)}function ex(n,e){return sI.apply(this,arguments)}function sI(){return sI=(0,Pe.Z)(function*(n,e){var t;e&&Vc(n).h_&&(yield(t=(0,Pe.Z)(function*(s,u){if(gE(g=u.code)&&g!==Ce.ABORTED){const c=s.b_.shift();Vc(s).Yo(),yield eI(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,u)),yield eh(s)}var g}),function r(s,u){return t.apply(this,arguments)})(n,e)),$T(n)&&GT(n)}),sI.apply(this,arguments)}function WT(n,e){return my.apply(this,arguments)}function my(){return my=(0,Pe.Z)(function*(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=Lc(t);t.C_.add(3),yield Xd(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield zf(t)}),my.apply(this,arguments)}function oI(n,e){return di.apply(this,arguments)}function di(){return di=(0,Pe.Z)(function*(n,e){const t=at(n);e?(t.C_.delete(2),yield zf(t)):e||(t.C_.add(2),yield Xd(t),t.M_.set("Unknown"))}),di.apply(this,arguments)}function th(n){return n.O_||(n.O_=function(t,r,s){const u=at(t);return u.A_(),new wb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{ho:Db.bind(null,n),Io:XE.bind(null,n),a_:HT.bind(null,n)}),n.v_.push(function(){var e=(0,Pe.Z)(function*(t){t?(n.O_.Yo(),cy(n)?ly(n):n.M_.set("Unknown")):(yield n.O_.stop(),jT(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function Vc(n){return n.N_||(n.N_=function(t,r,s){const u=at(t);return u.A_(),new YE(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{ho:tI.bind(null,n),Io:ex.bind(null,n),T_:nI.bind(null,n),I_:iI.bind(null,n)}),n.v_.push(function(){var e=(0,Pe.Z)(function*(t){t?(n.N_.Yo(),yield eh(n)):(yield n.N_.stop(),n.b_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class aI{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,g=new aI(e,t,c,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qe(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nh(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),Nd(n))return new qe(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Wf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ut.comparator(t.key,r.key):(t,r)=>ut.comparator(t.key,r.key),this.keyedMap=Ko(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new Wf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Wf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class uI{constructor(){this.B_=new fr(ut.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):gt():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class rh{constructor(e,t,r,s,u,c,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const c=[];return t.forEach(g=>{c.push({type:0,doc:g})}),new rh(e,t,Wf.emptySet(t),c,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class qf{constructor(){this.k_=void 0,this.listeners=[]}}class Ab{constructor(){this.queries=new xi(e=>iE(e),Ng),this.onlineState="Unknown",this.q_=new Set}}function lI(n,e){return _y.apply(this,arguments)}function _y(){return _y=(0,Pe.Z)(function*(n,e){const t=at(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new qf),s)try{u.k_=yield t.onListen(r)}catch(c){const g=nh(c,`Initialization of query '${If(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Q_(t.onlineState),u.k_&&e.K_(u.k_)&&rm(t)}),_y.apply(this,arguments)}function cI(n,e){return yy.apply(this,arguments)}function yy(){return yy=(0,Pe.Z)(function*(n,e){const t=at(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),yy.apply(this,arguments)}function tx(n,e){const t=at(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const g of c.listeners)g.K_(s)&&(r=!0);c.k_=s}}r&&rm(t)}function qT(n,e,t){const r=at(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function rm(n){n.q_.forEach(e=>{e.next()})}class Yo{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new rh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class bb{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class ZT{constructor(e){this.serializer=e}hs(e){return ka(this.serializer,e)}Ps(e){return e.metadata.exists?ib(this.serializer,e.document,!1):Pr.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ci(e)}}class Nu{constructor(e,t,r){this.X_=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qo(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const r=Pn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,r=new ZT(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.hs(s.metadata.name);for(const c of s.metadata.queries){const g=(t.get(c)||an()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,Pe.Z)(function*(){const t=yield function GE(n,e,t,r){return jf.apply(this,arguments)}(e.localStore,new ZT(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const s of e.queries)yield X_(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function Qo(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Jo{constructor(e){this.key=e}}class dI{constructor(e){this.key=e}}class hI{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=an(),this.mutatedKeys=an(),this._a=sE(e),this.aa=new Wf(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new uI,s=t?t.aa:this.aa;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((P,k)=>{const G=s.get(P),J=Og(this.query,k)?k:null,de=!!G&&this.mutatedKeys.has(G.key),Se=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let xe=!1;G&&J?G.data.isEqual(J.data)?de!==Se&&(r.track({type:3,doc:J}),xe=!0):this.ha(G,J)||(r.track({type:2,doc:J}),xe=!0,(_&&this._a(J,_)>0||D&&this._a(J,D)<0)&&(g=!0)):!G&&J?(r.track({type:0,doc:J}),xe=!0):G&&!J&&(r.track({type:1,doc:G}),xe=!0,(_||D)&&(g=!0)),xe&&(J?(c=c.add(J),u=Se?u.add(P):u.delete(P)):(c=c.delete(P),u=u.delete(P)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const P="F"===this.query.limitType?c.last():c.first();c=c.delete(P.key),u=u.delete(P.key),r.track({type:1,doc:P})}return{aa:c,la:r,Zi:g,mutatedKeys:u}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const u=e.la.L_();u.sort((D,P)=>function(G,J){const de=Se=>{switch(Se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return de(G)-de(J)}(D.type,P.type)||this._a(D.doc,P.doc)),this.Pa(r);const c=t?this.Ia():[],g=0===this.oa.size&&this.current?1:0,_=g!==this.sa;return this.sa=g,0!==u.length||_?{snapshot:new rh(this.query,e.aa,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:c}:{Ta:c}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new uI,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=an(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new dI(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new Jo(r))}),t}da(e){this.ia=e.ls,this.oa=an();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return rh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Sb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Rb{constructor(e){this.key=e,this.Ra=!1}}class Pb{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Va={},this.ma=new xi(g=>iE(g),Ng),this.fa=new Map,this.ga=new Set,this.pa=new fr(ut.comparator),this.ya=new Map,this.wa=new kc,this.Sa={},this.ba=new Map,this.Da=Nc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function xb(n,e){return im.apply(this,arguments)}function im(){return im=(0,Pe.Z)(function*(n,e){const t=Ry(n);let r,s;const u=t.ma.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Aa();else{const c=yield Qd(t.localStore,Es(e)),g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield ih(t,e,r,"current"===g,c.resumeToken),t.isPrimaryClient&&Xg(t.remoteStore,c)}return s}),im.apply(this,arguments)}function ih(n,e,t,r,s){return fI.apply(this,arguments)}function fI(){return fI=(0,Pe.Z)(function*(n,e,t,r,s){n.va=(k,G,J)=>{return(de=(0,Pe.Z)(function*(xe,ht,mt,Qe){let Ct=ht.view.ca(mt);Ct.Zi&&(Ct=yield J_(xe.localStore,ht.query,!1).then(({documents:ri})=>ht.view.ca(ri,Ct)));const Qt=Qe&&Qe.targetChanges.get(ht.targetId),Cn=ht.view.applyChanges(Ct,xe.isPrimaryClient,Qt);return Dy(xe,ht.targetId,Cn.Ta),Cn.snapshot}),function Se(xe,ht,mt,Qe){return de.apply(this,arguments)})(n,k,G,J);var de};const u=yield J_(n.localStore,e,!0),c=new hI(e,u.ls),g=c.ca(u.documents),_=Fg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=c.applyChanges(g,n.isPrimaryClient,_);Dy(n,t,D.Ta);const P=new Sb(e,t,c);return n.ma.set(e,P),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),D.snapshot}),fI.apply(this,arguments)}function KT(n,e){return pI.apply(this,arguments)}function pI(){return pI=(0,Pe.Z)(function*(n,e){const t=at(n),r=t.ma.get(e),s=t.fa.get(r.targetId);if(s.length>1)return t.fa.set(r.targetId,s.filter(u=>!Ng(u,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Bf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),em(t.remoteStore,r.targetId),sh(t,r.targetId)}).catch(vc))):(sh(t,r.targetId),yield Bf(t.localStore,r.targetId,!0))}),pI.apply(this,arguments)}function vy(){return vy=(0,Pe.Z)(function*(n,e,t){const r=Py(n);try{const s=yield function(c,g){const _=at(c),D=Cr.now(),P=g.reduce((J,de)=>J.add(de.key),an());let k,G;return _.persistence.runTransaction("Locally write mutations","readwrite",J=>{let de=wo(),Se=an();return _.ss.getEntries(J,P).next(xe=>{de=xe,de.forEach((ht,mt)=>{mt.isValidDocument()||(Se=Se.add(ht))})}).next(()=>_.localDocuments.getOverlayedDocuments(J,de)).next(xe=>{k=xe;const ht=[];for(const mt of g){const Qe=R_(mt,k.get(mt.key).overlayedDocument);null!=Qe&&ht.push(new Sl(mt.key,Qe,Pg(Qe.value.mapValue),xr.exists(!0)))}return _.mutationQueue.addMutationBatch(J,D,ht,g)}).next(xe=>{G=xe;const ht=xe.applyToLocalDocumentSet(k,Se);return _.documentOverlayCache.saveOverlays(J,xe.batchId,ht)})}).then(()=>({batchId:G.batchId,changes:D_(k)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,g,_){let D=c.Sa[c.currentUser.toKey()];D||(D=new fr(zt)),D=D.insert(g,_),c.Sa[c.currentUser.toKey()]=D}(r,s.batchId,t),yield Nl(r,s.changes),yield eh(r.remoteStore)}catch(s){const u=nh(s,"Failed to persist write");t.reject(u)}}),vy.apply(this,arguments)}function gI(n,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,Pe.Z)(function*(n,e){const t=at(n);try{const r=yield function Q_(n,e){const t=at(n),r=e.snapshotVersion;let s=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ss.newChangeBuffer({trackRemovals:!0});s=t.ts;const g=[];e.targetChanges.forEach((P,k)=>{const G=s.get(k);if(!G)return;g.push(t.qr.removeMatchingKeys(u,P.removedDocuments,k).next(()=>t.qr.addMatchingKeys(u,P.addedDocuments,k)));let J=G.withSequenceNumber(u.currentSequenceNumber);var Se,xe,ht;null!==e.targetMismatches.get(k)?J=J.withResumeToken(sr.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):P.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(P.resumeToken,r)),s=s.insert(k,J),xe=J,ht=P,(0===(Se=G).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-Se.snapshotVersion.toMicroseconds()>=3e8||ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0)&&g.push(t.qr.updateTargetData(u,J))});let _=wo(),D=an();if(e.documentUpdates.forEach(P=>{e.resolvedLimboDocuments.has(P)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,P))}),g.push($E(u,c,e.documentUpdates).next(P=>{_=P.us,D=P.cs})),!r.isEqual(Ot.min())){const P=t.qr.getLastRemoteSnapshotVersion(u).next(k=>t.qr.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(P)}return fe.waitFor(g).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.ts=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.ya.get(u);c&&(Nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ra=!0:s.modifiedDocuments.size>0?Nt(c.Ra):s.removedDocuments.size>0&&(Nt(c.Ra),c.Ra=!1))}),yield Nl(t,r,e)}catch(r){yield vc(r)}}),Zf.apply(this,arguments)}function YT(n,e,t){const r=at(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ma.forEach((u,c)=>{const g=c.view.Q_(e);g.snapshot&&s.push(g.snapshot)}),function(c,g){const _=at(c);_.onlineState=g;let D=!1;_.queries.forEach((P,k)=>{for(const G of k.listeners)G.Q_(g)&&(D=!0)}),D&&rm(_)}(r.eventManager,e),s.length&&r.Va.a_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QT(n,e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,Pe.Z)(function*(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ya.get(e),u=s&&s.key;if(u){let c=new fr(ut.comparator);c=c.insert(u,Pr.newNoDocument(u,Ot.min()));const g=an().add(u),_=new Cf(Ot.min(),new Map,new fr(zt),c,g);yield gI(r,_),r.pa=r.pa.remove(u),r.ya.delete(e),Ay(r)}else yield Bf(r.localStore,e,!1).then(()=>sh(r,e,t)).catch(vc)}),Ey.apply(this,arguments)}function JT(n,e){return mI.apply(this,arguments)}function mI(){return mI=(0,Pe.Z)(function*(n,e){const t=at(n),r=e.batch.batchId;try{const s=yield function qg(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.ss.newChangeBuffer({trackRemovals:!0});return function(g,_,D,P){const k=D.batch,G=k.keys();let J=fe.resolve();return G.forEach(de=>{J=J.next(()=>P.getEntry(_,de)).next(Se=>{const xe=D.docVersions.get(de);Nt(null!==xe),Se.version.compareTo(xe)<0&&(k.applyToRemoteDocument(Se,D),Se.isValidDocument()&&(Se.setReadTime(D.commitVersion),P.addEntry(Se)))})}),J.next(()=>g.mutationQueue.removeMutationBatch(_,k))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let _=an();for(let D=0;D<g.mutationResults.length;++D)g.mutationResults[D].transformResults.length>0&&(_=_.add(g.batch.mutations[D].key));return _}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);Cy(t,r,null),Ty(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nl(t,s)}catch(s){yield vc(s)}}),mI.apply(this,arguments)}function Nb(n,e,t){return sm.apply(this,arguments)}function sm(){return sm=(0,Pe.Z)(function*(n,e,t){const r=at(n);try{const s=yield function(c,g){const _=at(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let P;return _.mutationQueue.lookupMutationBatch(D,g).next(k=>(Nt(null!==k),P=k.keys(),_.mutationQueue.removeMutationBatch(D,k))).next(()=>_.mutationQueue.performConsistencyCheck(D)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(D,P,g)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,P)).next(()=>_.localDocuments.getDocuments(D,P))})}(r.localStore,e);Cy(r,e,t),Ty(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nl(r,s)}catch(s){yield vc(s)}}),sm.apply(this,arguments)}function wy(){return wy=(0,Pe.Z)(function*(n,e){const t=at(n);Lc(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const g=at(c);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>g.mutationQueue.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const s=t.ba.get(r)||[];s.push(e),t.ba.set(r,s)}catch(r){const s=nh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),wy.apply(this,arguments)}function Ty(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function Cy(n,e,t){const r=at(n);let s=r.Sa[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Sa[r.currentUser.toKey()]=s}}function sh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||_I(n,r)})}function _I(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(em(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),Ay(n))}function Dy(n,e,t){for(const r of t)r instanceof Jo?(n.wa.addReference(r.key,e),XT(n,r)):r instanceof dI?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||_I(n,r.key)):gt()}function XT(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.ga.add(r),Ay(n))}function Ay(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new ut(Pn.fromString(e)),r=n.Da.next();n.ya.set(r,new Rb(t)),n.pa=n.pa.insert(t,r),Xg(n.remoteStore,new Rl(Es(Ud(t.path)),r,"TargetPurposeLimboResolution",io._e))}}function Nl(n,e,t){return yI.apply(this,arguments)}function yI(){return yI=(0,Pe.Z)(function*(n,e,t){const r=at(n),s=[],u=[],c=[];var g;r.ma.isEmpty()||(r.ma.forEach((g,_)=>{c.push(r.va(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const P=RT.Qi(_.targetId,D);u.push(P)}}))}),yield Promise.all(c),r.Va.a_(s),yield(g=(0,Pe.Z)(function*(D,P){const k=at(D);try{yield k.persistence.runTransaction("notifyLocalViewChanges","readwrite",G=>fe.forEach(P,J=>fe.forEach(J.ki,de=>k.persistence.referenceDelegate.addReference(G,J.targetId,de)).next(()=>fe.forEach(J.qi,de=>k.persistence.referenceDelegate.removeReference(G,J.targetId,de)))))}catch(G){if(!Nd(G))throw G;Ke("LocalStore","Failed to update sequence numbers: "+G)}for(const G of P){const J=G.targetId;if(!G.fromCache){const de=k.ts.get(J),xe=de.withLastLimboFreeSnapshotVersion(de.snapshotVersion);k.ts=k.ts.insert(J,xe)}}}),function _(D,P){return g.apply(this,arguments)})(r.localStore,u))}),yI.apply(this,arguments)}function Ob(n,e){return vI.apply(this,arguments)}function vI(){return vI=(0,Pe.Z)(function*(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield xT(t.localStore,e);t.currentUser=e,(u=t).ba.forEach(g=>{g.forEach(_=>{_.reject(new qe(Ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nl(t,r._s)}var u}),vI.apply(this,arguments)}function kb(n,e){const t=at(n),r=t.ya.get(e);if(r&&r.Ra)return an().add(r.key);{let s=an();const u=t.fa.get(e);if(!u)return s;for(const c of u){const g=t.ma.get(c);s=s.unionWith(g.view.ua)}return s}}function Lb(n,e){return EI.apply(this,arguments)}function EI(){return EI=(0,Pe.Z)(function*(n,e){const t=at(n),r=yield J_(t.localStore,e.query,!0),s=e.view.da(r);return t.isPrimaryClient&&Dy(t,e.targetId,s.Ta),s}),EI.apply(this,arguments)}function Fb(n,e){return II.apply(this,arguments)}function II(){return II=(0,Pe.Z)(function*(n,e){const t=at(n);return NT(t.localStore,e).then(r=>Nl(t,r))}),II.apply(this,arguments)}function Vb(n,e,t,r){return wI.apply(this,arguments)}function wI(){return wI=(0,Pe.Z)(function*(n,e,t,r){const s=at(n),u=yield function(g,_){const D=at(g),P=at(D.mutationQueue);return D.persistence.runTransaction("Lookup mutation documents","readonly",k=>P.Cn(k,_).next(G=>G?D.localDocuments.getDocuments(k,G):fe.resolve(null)))}(s.localStore,e);var _;null!==u?("pending"===t?yield eh(s.remoteStore):"acknowledged"===t||"rejected"===t?(Cy(s,e,r||null),Ty(s,e),_=e,at(at(s.localStore).mutationQueue).Fn(_)):gt(),yield Nl(s,u)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),wI.apply(this,arguments)}function TI(){return TI=(0,Pe.Z)(function*(n,e){const t=at(n);if(Ry(t),Py(t),!0===e&&!0!==t.Ca){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield eC(t,r.toArray());t.Ca=!0,yield oI(t.remoteStore,!0);for(const u of s)Xg(t.remoteStore,u)}else if(!1===e&&!1!==t.Ca){const r=[];let s=Promise.resolve();t.fa.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(sh(t,c),Bf(t.localStore,c,!0))),em(t.remoteStore,c)}),yield s,yield eC(t,r),function(c){const g=at(c);g.ya.forEach((_,D)=>{em(g.remoteStore,D)}),g.wa.Vr(),g.ya=new Map,g.pa=new fr(ut.comparator)}(t),t.Ca=!1,yield oI(t.remoteStore,!1)}}),TI.apply(this,arguments)}function eC(n,e,t){return CI.apply(this,arguments)}function CI(){return CI=(0,Pe.Z)(function*(n,e,t){const r=at(n),s=[],u=[];for(const c of e){let g;const _=r.fa.get(c);if(_&&0!==_.length){g=yield Qd(r.localStore,Es(_[0]));for(const D of _){const P=r.ma.get(D),k=yield Lb(r,P);k.snapshot&&u.push(k.snapshot)}}else{const D=yield MT(r.localStore,c);g=yield Qd(r.localStore,D),yield ih(r,tC(D),c,!1,g.resumeToken)}s.push(g)}return r.Va.a_(u),s}),CI.apply(this,arguments)}function tC(n){return nE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Bb(n){return t=at(n).localStore,at(at(t).persistence).Bi();var t}function jb(n,e,t,r){return by.apply(this,arguments)}function by(){return by=(0,Pe.Z)(function*(n,e,t,r){const s=at(n);if(s.Ca)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const u=s.fa.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield NT(s.localStore,JA(u[0])),g=Cf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,sr.EMPTY_BYTE_STRING);yield Nl(s,c,g);break}case"rejected":yield Bf(s.localStore,e,!0),sh(s,e,r);break;default:gt()}}),by.apply(this,arguments)}function nC(n,e,t){return Sy.apply(this,arguments)}function Sy(){return Sy=(0,Pe.Z)(function*(n,e,t){const r=Ry(n);if(r.Ca){for(const s of e){if(r.fa.has(s)){Ke("SyncEngine","Adding an already active target "+s);continue}const u=yield MT(r.localStore,s),c=yield Qd(r.localStore,u);yield ih(r,tC(u),c.targetId,!1,c.resumeToken),Xg(r.remoteStore,c)}for(const s of t)r.fa.has(s)&&(yield Bf(r.localStore,s,!1).then(()=>{em(r.remoteStore,s),sh(r,s)}).catch(vc))}}),Sy.apply(this,arguments)}function Ry(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QT.bind(null,e),e.Va.a_=tx.bind(null,e.eventManager),e.Va.Fa=qT.bind(null,e.eventManager),e}function Py(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nb.bind(null,e),e}class Kf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Pe.Z)(function*(){t.serializer=Gf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return PT(this.persistence,new vb,e.initialUser,this.serializer)}createPersistence(e){return new W_(Gg.jr,this.serializer)}createSharedClientState(e){return new WE}terminate(){var e=this;return(0,Pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xy extends Kf{constructor(e,t,r){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Pe.Z)(function*(){yield t().call(r,e),yield r.xa.initialize(r,e),yield Py(r.xa.syncEngine),yield eh(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return PT(this.persistence,new vb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new IT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new KP(t,this.persistence);return new ZP(e.asyncQueue,r)}createPersistence(e){const t=HE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Is.withCacheSize(this.cacheSizeBytes):Is.DEFAULT;return new ST(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Yg(),$f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new WE}}class DI extends xy{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Pe.Z)(function*(){yield t().call(r,e);const s=r.xa.syncEngine;r.sharedClientState instanceof ry&&(r.sharedClientState.syncEngine={Ys:Vb.bind(null,s),Zs:jb.bind(null,s),Xs:nC.bind(null,s),Bi:Bb.bind(null,s),Js:Fb.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var u=(0,Pe.Z)(function*(c){yield function Ub(n,e){return TI.apply(this,arguments)}(r.xa.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Yg();if(!ry.D(t))throw new qe(Ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ry(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oh{initialize(e,t){var r=this;return(0,Pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>YT(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ob.bind(null,r.syncEngine),yield oI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ab}createDatastore(e){const t=Gf(e.databaseInfo.databaseId),r=new oy(e.databaseInfo);return new QE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,u=e.asyncQueue,c=t=>YT(this.syncEngine,t,0),g=VT.D()?new VT:new Ib,new Cb(r,s,u,c,g);var r,s,u,c,g}createSyncEngine(e,t){return function(s,u,c,g,_,D,P){const k=new Pb(s,u,c,g,_,D);return P&&(k.Ca=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Pe.Z)(function*(r){const s=at(r);Ke("RemoteStore","RemoteStore shutting down."),s.C_.add(5),yield Xd(s),s.F_.shutdown(),s.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Uc(n,e=10240){let t=0;return{read:()=>(0,Pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class My{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hb{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new vi,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Pe.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Pe.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Pe.Z)(function*(){const t=yield e.qa();if(null===t)return null;const r=e.La.decode(t),s=Number(r);isNaN(s)&&e.Qa(`length string (${r}) is not valid number`);const u=yield e.Ka(s);return new bb(JSON.parse(u),t.length+s)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Pe.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ka(e){var t=this;return(0,Pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const r=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Pe.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Yf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new qe(Ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Pe.Z)(function*(c,g){const _=at(c),D=es(_.serializer)+"/documents",P={documents:g.map(de=>bf(_.serializer,de))},k=yield _.Co("BatchGetDocuments",D,P,g.length),G=new Map;k.forEach(de=>{const Se=function DE(n,e){return"found"in e?function(r,s){Nt(!!s.found);const u=ka(r,s.found.name),c=ci(s.found.updateTime),g=s.found.createTime?ci(s.found.createTime):Ot.min(),_=new Pi({mapValue:{fields:s.found.fields}});return Pr.newFoundDocument(u,c,g,_)}(n,e):"missing"in e?function(r,s){Nt(!!s.missing),Nt(!!s.readTime);const u=ka(r,s.missing),c=ci(s.readTime);return Pr.newNoDocument(u,c)}(n,e):gt()}(_.serializer,de);G.set(Se.key.toString(),Se)});const J=[];return g.forEach(de=>{const Se=G.get(de.toString());Nt(!!Se),J.push(Se)}),J}),function u(c,g){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $d(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=ut.fromPath(s);e.mutations.push(new Zw(u,e.precondition(u)))}),yield(r=(0,Pe.Z)(function*(u,c){const g=at(u),_=es(g.serializer)+"/documents",D={writes:c.map(P=>Vg(g.serializer,P))};yield g.wo("Commit",_,D)}),function s(u,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new qe(Ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?xr.exists(!1):xr.updateTime(t):xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new qe(Ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xr.updateTime(t)}return xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nx{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Wa=r.maxAttempts,this.zo=new KE(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Pe.Z)(function*(){const t=new Yf(e.datastore),r=e.za(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.ja(u)}))}).catch(s=>{e.ja(s)})}))}za(e){try{const t=this.updateFunction(e);return!vg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gE(t)}return!1}}class AI{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yi.UNAUTHENTICATED,this.clientId=Md.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Pe.Z)(function*(g){Ke("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Pe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=nh(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function bI(n,e){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,Pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Pe.Z)(function*(u){r.isEqual(u)||(yield xT(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Ny.apply(this,arguments)}function Oy(n,e){return sC.apply(this,arguments)}function sC(){return sC=(0,Pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield SI(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>WT(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>WT(e.remoteStore,u)),n._onlineComponents=e}),sC.apply(this,arguments)}function ah(n){return"FirebaseError"===n.name?n.code===Ce.FAILED_PRECONDITION||n.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function SI(n){return RI.apply(this,arguments)}function RI(){return RI=(0,Pe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!ah(t))throw t;Hs("Error using user provided cache. Falling back to memory cache: "+t),yield bI(n,new Kf)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield bI(n,new Kf);return n._offlineComponents}),RI.apply(this,arguments)}function ky(n){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,Pe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield Oy(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield Oy(n,new oh))),n._onlineComponents}),Bc.apply(this,arguments)}function oC(n){return SI(n).then(e=>e.persistence)}function Ol(n){return SI(n).then(e=>e.localStore)}function om(n){return ky(n).then(e=>e.remoteStore)}function Cs(n){return ky(n).then(e=>e.syncEngine)}function uh(n){return Ly.apply(this,arguments)}function Ly(){return Ly=(0,Pe.Z)(function*(n){const e=yield ky(n),t=e.eventManager;return t.onListen=xb.bind(null,e.syncEngine),t.onUnlisten=KT.bind(null,e.syncEngine),t}),Ly.apply(this,arguments)}function PI(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function(u,c,g,_,D){const P=new My({next:G=>{c.enqueueAndForget(()=>cI(u,k));const J=G.docs.has(g);!J&&G.fromCache?D.reject(new qe(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):J&&G.fromCache&&_&&"server"===_.source?D.reject(new qe(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(G)},error:G=>D.reject(G)}),k=new Yo(Ud(g.path),P,{includeMetadataChanges:!0,J_:!0});return lI(u,k)}(yield uh(n),n.asyncQueue,e,t,r)})),r.promise}function cC(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function(u,c,g,_,D){const P=new My({next:G=>{c.enqueueAndForget(()=>cI(u,k)),G.fromCache&&"server"===_.source?D.reject(new qe(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(G)},error:G=>D.reject(G)}),k=new Yo(g,P,{includeMetadataChanges:!0,J_:!0});return lI(u,k)}(yield uh(n),n.asyncQueue,e,t,r)})),r.promise}function um(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const xI=new Map;function Fy(n,e,t){if(!t)throw new qe(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MI(n,e,t,r){if(!0===e&&!0===r)throw new qe(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dC(n){if(!ut.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Qf(n){if(ut.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jc(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":gt()}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jc(n);throw new qe(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hC(n,e){if(e<=0)throw new qe(Ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fC{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new qe(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qe(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=um(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new qe(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fC(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new i_;switch(r.type){case"firstParty":return new MA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=xI.get(t);r&&(Ke("ComponentProvider","Removing Datastore"),xI.delete(t),r.terminate())}(this),Promise.resolve()}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class Va extends ji{constructor(e,t,r){super(e,t,Ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new ut(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function pC(n,e,...t){if(n=(0,q.m9)(n),Fy("collection","path",e),n instanceof Jf){const r=Pn.fromString(e,...t);return Qf(r),new Va(n,null,r)}{if(!(n instanceof Ar||n instanceof Va))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pn.fromString(e,...t));return Qf(r),new Va(n.firestore,null,r)}}function OI(n,e,...t){if(n=(0,q.m9)(n),1===arguments.length&&(e=Md.newId()),Fy("doc","path",e),n instanceof Jf){const r=Pn.fromString(e,...t);return dC(r),new Ar(n,null,new ut(r))}{if(!(n instanceof Ar||n instanceof Va))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pn.fromString(e,...t));return dC(r),new Ar(n.firestore,n instanceof Va?n.converter:null,new ut(r))}}function Qb(n,e){return n=(0,q.m9)(n),e=(0,q.m9)(e),(n instanceof Ar||n instanceof Va)&&(e instanceof Ar||e instanceof Va)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gC(n,e){return n=(0,q.m9)(n),e=(0,q.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&Ng(n._query,e._query)&&n.converter===e.converter}class rx{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new KE(this,"async_queue_retry"),this.iu=()=>{const t=$f();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=$f();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=$f();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new vi;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Pe.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Nd(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Rr("INTERNAL UNHANDLED ERROR: ",function(c){let g=c.message||"";return c.stack&&(g=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),g}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const s=aI.createAndSchedule(this,e,t,r,u=>this.au(u));return this.Xa.push(s),s}su(){this.eu&&gt()}verifyOperationInProgress(){}uu(){var e=this;return(0,Pe.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Vy(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class Uy{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yr extends Jf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new rx,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mC(this),this._firestoreClient.terminate()}}function ei(n){return n._firestoreClient||mC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mC(n){var e,t,r;const s=n._freezeSettings(),u=(_=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new WA(n._databaseId,_,n._persistenceKey,(P=s).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,um(P.experimentalLongPollingOptions),P.useFetchStreams));var _,P;n._firestoreClient=new AI(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function nS(n,e,t){const r=new vi;return n.asyncQueue.enqueue((0,Pe.Z)(function*(){try{yield bI(n,t),yield Oy(n,e),r.resolve()}catch(s){const u=s;if(!ah(u))throw u;Hs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function vC(n){if(n._initialized||n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ua(sr.fromBase64String(e))}catch(t){throw new qe(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ua(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new qe(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lh{constructor(e){this._methodName=e}}class lm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const IC=/^__.*__$/;class uS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hd(e,this.data,t,this.fieldTransforms)}}class wC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class ep{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Pu(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ep(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Au(e),s}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return tp(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(TC(this.Iu)&&IC.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class lS{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gf(e)}pu(e,t,r,s=!1){return new ep({Iu:e,methodName:t,gu:r,path:Dr.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hc(n){const e=n._freezeSettings(),t=Gf(n._databaseId);return new lS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hy(n,e,t,r,s,u={}){const c=n.pu(u.merge||u.mergeFields?2:0,e,t,s);UI("Data must be an object, but it was:",c,r);const g=DC(r,c);let _,D;if(u.merge)_=new so(c.fieldMask),D=c.fieldTransforms;else if(u.mergeFields){const P=[];for(const k of u.mergeFields){const G=dm(e,k,t);if(!c.contains(G))throw new qe(Ce.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);zy(P,G)||P.push(G)}_=new so(P),D=c.fieldTransforms.filter(k=>_.covers(k.field))}else _=null,D=c.fieldTransforms;return new uS(new Pi(g),_,D)}class cm extends lh{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cm}}function CC(n,e,t){return new ep({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kI extends lh{_toFieldTransform(e){return new Pu(e.path,new Bd)}isEqual(e){return e instanceof kI}}class cS extends lh{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=CC(this,e,!0),r=this.yu.map(u=>ch(u,t)),s=new jd(r);return new Pu(e.path,s)}isEqual(e){return this===e}}class dS extends lh{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=CC(this,e,!0),r=this.yu.map(u=>ch(u,t)),s=new Dc(r);return new Pu(e.path,s)}isEqual(e){return this===e}}class hS extends lh{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new wf(e.serializer,A_(e.serializer,this.wu));return new Pu(e.path,t)}isEqual(e){return this===e}}function LI(n,e,t,r){const s=n.pu(1,e,t);UI("Data must be an object, but it was:",s,r);const u=[],c=Pi.empty();Ic(r,(_,D)=>{const P=Gy(e,_,t);D=(0,q.m9)(D);const k=s.Ru(P);if(D instanceof cm)u.push(P);else{const G=ch(D,k);null!=G&&(u.push(P),c.set(P,G))}});const g=new so(u);return new wC(c,g,s.fieldTransforms)}function $y(n,e,t,r,s,u){const c=n.pu(1,e,t),g=[dm(e,r,t)],_=[s];if(u.length%2!=0)throw new qe(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)g.push(dm(e,u[G])),_.push(u[G+1]);const D=[],P=Pi.empty();for(let G=g.length-1;G>=0;--G)if(!zy(D,g[G])){const J=g[G];let de=_[G];de=(0,q.m9)(de);const Se=c.Ru(J);if(de instanceof cm)D.push(J);else{const xe=ch(de,Se);null!=xe&&(D.push(J),P.set(J,xe))}}const k=new so(D);return new wC(P,k,c.fieldTransforms)}function FI(n,e,t,r=!1){return ch(t,n.pu(r?4:3,e))}function ch(n,e){if(VI(n=(0,q.m9)(n)))return UI("Unsupported field value:",e,n),DC(n,e);if(n instanceof lh)return function(r,s){if(!TC(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,s){const u=[];let c=0;for(const g of r){let _=ch(g,s.Vu(c));null==_&&(_={nullValue:"NULL_VALUE"}),u.push(_),c++}return{arrayValue:{values:u}}}(n,e)}return function(r,s){if(null===(r=(0,q.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return A_(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=Cr.fromDate(r);return{timestampValue:Af(s.serializer,u)}}if(r instanceof Cr){const u=new Cr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Af(s.serializer,u)}}if(r instanceof lm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ua)return{bytesValue:wE(s.serializer,r._byteString)};if(r instanceof Ar){const u=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw s.mu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:TE(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${jc(r)}`)}(n,e)}function DC(n,e){const t={};return c_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ic(n,(r,s)=>{const u=ch(s,e.Eu(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function VI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Cr||n instanceof lm||n instanceof Ua||n instanceof Ar||n instanceof lh)}function UI(n,e,t){if(!VI(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=jc(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var s}function dm(n,e,t){if((e=(0,q.m9)(e))instanceof kl)return e._internalPath;if("string"==typeof e)return Gy(n,e);throw tp("Field path arguments must be of type string or ",n,!1,void 0,t)}const fS=new RegExp("[~\\*/\\[\\]]");function Gy(n,e,t){if(e.search(fS)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kl(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tp(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${s}`),_+=")"),new qe(Ce.INVALID_ARGUMENT,g+n+_)}function zy(n,e){return n.some(t=>t.isEqual(e))}class np{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class BI extends np{data(){return super.data()}}function Wy(n,e){return"string"==typeof e?Gy(n,e):e instanceof kl?e._internalPath:e._delegate._internalPath}function AC(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new qe(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hm{}class fm extends hm{}function Ll(n,e,...t){let r=[];e instanceof hm&&r.push(e),r=r.concat(t),function(u){const c=u.filter(_=>_ instanceof rp).length,g=u.filter(_=>_ instanceof Ba).length;if(c>1||c>0&&g>0)throw new qe(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Ba extends fm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ba(e,t,r)}_apply(e){const t=this._parse(e);return LC(e._query,t),new ji(e.firestore,e.converter,rE(e._query,t))}_parse(e){const t=Hc(e.firestore);return function(u,c,g,_,D,P,k){let G;if(D.isKeyField()){if("array-contains"===P||"array-contains-any"===P)throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if("in"===P||"not-in"===P){kC(k,P);const J=[];for(const de of k)J.push(OC(_,u,de));G={arrayValue:{values:J}}}else G=OC(_,u,k)}else"in"!==P&&"not-in"!==P&&"array-contains-any"!==P||kC(k,P),G=FI(g,"where",k,"in"===P||"not-in"===P);return _n.create(D,P,G)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class rp extends hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let c=s;const g=u.getFlattenedFilters();for(const _ of g)LC(c,_),c=rE(c,_)}(e._query,t),new ji(e.firestore,e.converter,rE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pm extends fm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=function(s,u,c){if(null!==s.startAt)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yf(u,c)}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(s,u){const c=s.explicitOrderBy.concat([u]);return new Dl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class gm extends fm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new gm(e,t,r)}_apply(e){return new ji(e.firestore,e.converter,Mg(e._query,this._limit,this._limitType))}}class mm extends fm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mm(e,t,r)}_apply(e){const t=NC(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(u=t,new Dl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class _m extends fm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _m(e,t,r)}_apply(e){const t=NC(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(u=t,new Dl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function NC(n,e,t,r){if(t[0]=(0,q.m9)(t[0]),t[0]instanceof np)return function(u,c,g,_,D){if(!_)throw new qe(Ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const P=[];for(const k of Cc(u))if(k.field.isKeyField())P.push(gf(c,_.key));else{const G=_.data.field(k.field);if(Dg(G))throw new qe(Ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+k.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===G){const J=k.field.canonicalString();throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${J}' (used as the orderBy) does not exist.`)}P.push(G)}return new bu(P,D)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Hc(n.firestore);return function(c,g,_,D,P,k){const G=c.explicitOrderBy;if(P.length>G.length)throw new qe(Ce.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const J=[];for(let de=0;de<P.length;de++){const Se=P[de];if(G[de].field.isKeyField()){if("string"!=typeof Se)throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof Se}`);if(!Fw(c)&&-1!==Se.indexOf("/"))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${Se}' contains a slash.`);const xe=c.path.child(Pn.fromString(Se));if(!ut.isDocumentKey(xe))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const ht=new ut(xe);J.push(gf(g,ht))}else{const xe=FI(_,D,Se);J.push(xe)}}return new bu(J,k)}(n._query,n.firestore._databaseId,s,e,t,r)}}function OC(n,e,t){if("string"==typeof(t=(0,q.m9)(t))){if(""===t)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&-1!==t.indexOf("/"))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pn.fromString(t));if(!ut.isDocumentKey(r))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gf(n,new ut(r))}if(t instanceof Ar)return gf(n,t._key);throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(t)}.`)}function kC(n,e){if(!Array.isArray(n)||0===n.length)throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LC(n,e){const t=function(s,u){for(const c of s)for(const g of c.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new qe(Ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FC{convertValue(e,t="none"){switch(Tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Il(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ic(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new lm(Xr(e.latitude),Xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wl(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ag(e));default:return null}}convertTimestamp(e){const t=Du(e);return new Cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pn.fromString(e);Nt(PE(r));const s=new wc(r.get(1),r.get(3)),u=new ut(r.popFirst(5));return s.isEqual(t)||Rr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ym(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mS extends FC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}class dh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fl extends np{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Wy("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class vm extends Fl{data(e={}){return super.data(e)}}class $c{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new dh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vm(this._firestore,this._userDataWriter,r.key,r,new dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(g=>({type:"added",doc:new vm(s._firestore,s._userDataWriter,g.doc.key,g.doc,new dh(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const _=new vm(s._firestore,s._userDataWriter,g.doc.key,g.doc,new dh(s._snapshot.mutatedKeys.has(g.doc.key),s._snapshot.fromCache),s.query.converter);let D=-1,P=-1;return 0!==g.type&&(D=c.indexOf(g.doc.key),c=c.delete(g.doc.key)),1!==g.type&&(c=c.add(g.doc),P=c.indexOf(g.doc.key)),{type:yS(g.type),doc:_,oldIndex:D,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function VC(n,e){return n instanceof Fl&&e instanceof Fl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $c&&e instanceof $c&&n._firestore===e._firestore&&gC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Gc extends FC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}function $I(n,e,t){n=In(n,Ar);const r=In(n.firestore,yr),s=ym(n.converter,e,t);return ip(r,[Hy(Hc(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,xr.none())])}function GI(n,e,t,...r){n=In(n,Ar);const s=In(n.firestore,yr),u=Hc(s);let c;return c="string"==typeof(e=(0,q.m9)(e))||e instanceof kl?$y(u,"updateDoc",n._key,e,t,r):LI(u,"updateDoc",n._key,e),ip(s,[c.toMutation(n._key,xr.exists(!0))])}function wS(n,...e){var t,r,s;n=(0,q.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Vy(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(Vy(e[c])){const k=e[c];e[c]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[c+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[c+2]=null===(s=k.complete)||void 0===s?void 0:s.bind(k)}let _,D,P;if(n instanceof Ar)D=In(n.firestore,yr),P=Ud(n._key.path),_={next:k=>{e[c]&&e[c](qy(D,n,k))},error:e[c+1],complete:e[c+2]};else{const k=In(n,ji);D=In(k.firestore,yr),P=k._query;const G=new Gc(D);_={next:J=>{e[c]&&e[c](new $c(D,G,k,J))},error:e[c+1],complete:e[c+2]},AC(n._query)}return function(G,J,de,Se){const xe=new My(Se),ht=new Yo(J,xe,de);return G.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return lI(yield uh(G),ht)})),()=>{xe.Na(),G.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return cI(yield uh(G),ht)}))}}(ei(D),P,g,_)}function ip(n,e){return function(r,s){const u=new vi;return r.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function Mb(n,e,t){return vy.apply(this,arguments)}(yield Cs(r),s,u)})),u.promise}(ei(n),e)}function qy(n,e,t){const r=t.docs.get(e._key),s=new Gc(n);return new Fl(n,s,e._key,r,new dh(t.hasPendingWrites,t.fromCache),e.converter)}const Zy={maxAttempts:5};class WI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hc(e)}set(e,t,r){this._verifyNotCommitted();const s=zc(e,this._firestore),u=ym(s.converter,t,r),c=Hy(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,xr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=zc(e,this._firestore);let c;return c="string"==typeof(t=(0,q.m9)(t))||t instanceof kl?$y(this._dataReader,"WriteBatch.update",u._key,t,r,s):LI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zc(e,this._firestore);return this._mutations=this._mutations.concat(new $d(t._key,xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zc(n,e){if((n=(0,q.m9)(n)).firestore!==e)throw new qe(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $C extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Hc(t)}get(t){const r=zc(t,this._firestore),s=new mS(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return gt();const c=u[0];if(c.isFoundDocument())return new np(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new np(this._firestore,s,r._key,null,r.converter);throw gt()})}set(t,r,s){const u=zc(t,this._firestore),c=ym(u.converter,r,s),g=Hy(this._dataReader,"Transaction.set",u._key,c,null!==u.converter,s);return this._transaction.set(u._key,g),this}update(t,r,s,...u){const c=zc(t,this._firestore);let g;return g="string"==typeof(r=(0,q.m9)(r))||r instanceof kl?$y(this._dataReader,"Transaction.update",c._key,r,s,u):LI(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,g),this}delete(t){const r=zc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zc(e,this._firestore),r=new Gc(this._firestore);return super.get(e).then(s=>new Fl(this._firestore,r,t._key,s._document,new dh(!1,!1),t.converter))}}function Qy(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Jy(){if(typeof Uint8Array>"u")throw new qe("unimplemented","Uint8Arrays are not available in this environment.")}function Xy(){if(!function f_(){return typeof atob<"u"}())throw new qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){xd=Kr.SDK_VERSION,(0,Kr._registerComponent)(new Ht.wA("firestore",(r,{instanceIdentifier:s,options:u})=>{const c=r.getProvider("app").getImmediate(),g=new yr(new sf(r.getProvider("auth-internal")),new OA(r.getProvider("app-check-internal")),function(D,P){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new qe(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(D.options.projectId,P)}(c,s),c);return u=Object.assign({useFetchStreams:t},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(jv,"4.3.2",e),(0,Kr.registerVersion)(jv,"4.3.2","esm2017")}();class Tm{constructor(e){this._delegate=e}static fromBase64String(e){return Xy(),new Tm(Ua.fromBase64String(e))}static fromUint8Array(e){return Jy(),new Tm(Ua.fromUint8Array(e))}toBase64(){return Xy(),this._delegate.toBase64()}toUint8Array(){return Jy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JI(n){return function VS(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class US{enableIndexedDbPersistence(e,t){return function eS(n,e){vC(n=In(n,yr));const t=ei(n);if(t._uninitializedComponentsProvider)throw new qe(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new oh;return nS(t,s,new xy(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tS(n){vC(n=In(n,yr));const e=ei(n);if(e._uninitializedComponentsProvider)throw new qe(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new oh;return nS(e,r,new DI(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rS(n){if(n._initialized&&!n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Pe.Z)(function*(){try{yield(t=(0,Pe.Z)(function*(s){if(!qo.D())return Promise.resolve();const u=s+"main";yield qo.delete(u)}),function r(s){return t.apply(this,arguments)})(HE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class XI{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function NI(n,e,t,r={}){var s;const u=(n=In(n,Jf))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=yi.MOCK_USER;else{g=(0,q.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new qe(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new yi(D)}n._authCredentials=new $v(new Hv(g,_))}}(this._delegate,e,t,r)}enableNetwork(){return function iS(n){return function Gb(n){return n.asyncQueue.enqueue((0,Pe.Z)(function*(){const e=yield oC(n),t=yield om(n);return e.setNetworkEnabled(!0),function(s){const u=at(s);return u.C_.delete(0),zf(u)}(t)}))}(ei(n=In(n,yr)))}(this._delegate)}disableNetwork(){return function sS(n){return function aC(n){return n.asyncQueue.enqueue((0,Pe.Z)(function*(){const e=yield oC(n),t=yield om(n);return e.setNetworkEnabled(!1),(r=(0,Pe.Z)(function*(u){const c=at(u);c.C_.add(0),yield Xd(c),c.M_.set("Offline")}),function s(u){return r.apply(this,arguments)})(t);var r}))}(ei(n=In(n,yr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,MI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _C(n){return function(t){const r=new vi;return t.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function Iy(n,e){return wy.apply(this,arguments)}(yield Cs(t),r)})),r.promise}(ei(n=In(n,yr)))}(this._delegate)}onSnapshotsInSync(e){return function ax(n,e){return function zb(n,e){const t=new My(e);return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return s=yield uh(n),u=t,at(s).q_.add(u),void u.next();var s,u})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return s=yield uh(n),u=t,void at(s).q_.delete(u);var s,u}))}}(ei(n=In(n,yr)),Vy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lp(this,pC(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xo(this,OI(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tr(this,function Yb(n,e){if(n=In(n,Jf),Fy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(r=e,new Dl(Pn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ky(n,e,t){n=In(n,yr);const r=Object.assign(Object.assign({},Zy),t);return function(u){if(u.maxAttempts<1)throw new qe(Ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,c,g){const _=new vi;return u.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){const D=yield function $b(n){return ky(n).then(e=>e.datastore)}(u);new nx(u.asyncQueue,D,g,c,_).run()})),_.promise}(ei(n),s=>e(new $C(n,s)),r)}(this._delegate,t=>e(new KC(this,t)))}batch(){return ei(this._delegate),new e0(new WI(this._delegate,e=>ip(this._delegate,e)))}loadBundle(e){return function oS(n,e){const t=ei(n=In(n,yr)),r=new Uy;return function Wb(n,e,t,r){const s=function(c,g){let _;return _="string"==typeof c?_E().encode(c):c,P=function(P,k){if(P instanceof Uint8Array)return Uc(P,k);if(P instanceof ArrayBuffer)return Uc(new Uint8Array(P),k);if(P instanceof ReadableStream)return P.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new Hb(P,g);var P}(t,Gf(e));n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){!function rC(n,e,t){const r=at(n);var s;(s=(0,Pe.Z)(function*(c,g,_){try{const D=yield g.getMetadata();if(yield function(de,Se){const xe=at(de),ht=ci(Se.createTime);return xe.persistence.runTransaction("hasNewerBundle","readonly",mt=>xe.Kr.getBundleMetadata(mt,Se.id)).then(mt=>!!mt&&mt.createTime.compareTo(ht)>=0)}(c.localStore,D))return yield g.close(),_._completeWith({taskState:"Success",documentsLoaded:(de=D).totalDocuments,bytesLoaded:de.totalBytes,totalDocuments:de.totalDocuments,totalBytes:de.totalBytes}),Promise.resolve(new Set);_._updateProgress(Qo(D));const P=new Nu(D,c.localStore,g.serializer);let k=yield g.Ma();for(;k;){const J=yield P.ea(k);J&&_._updateProgress(J),k=yield g.Ma()}const G=yield P.complete();return yield Nl(c,G.ra,void 0),yield function(de,Se){const xe=at(de);return xe.persistence.runTransaction("Save bundle","readwrite",ht=>xe.Kr.saveBundleMetadata(ht,Se))}(c.localStore,D),_._completeWith(G.progress),Promise.resolve(G.na)}catch(D){return Hs("SyncEngine",`Loading bundle failed with ${D}`),_._failWith(D),Promise.resolve(new Set)}var de}),function u(c,g,_){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield Cs(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function yC(n,e){return function am(n,e){return n.asyncQueue.enqueue((0,Pe.Z)(function*(){return function(r,s){const u=at(r);return u.persistence.runTransaction("Get named query","readonly",c=>u.Kr.getNamedQuery(c,s))}(yield Ol(n),e)}))}(ei(n=In(n,yr)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new tr(this,t):null)}}class sp extends FC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tm(new Ua(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xo.forKey(t,this.firestore,null)}}class KC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sp(e)}get(e){const t=cp(e);return this._delegate.get(t).then(r=>new op(this._firestore,new Fl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=cp(e);return r?(Qy("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=cp(e);return this._delegate.delete(t),this}}class e0{constructor(e){this._delegate=e}set(e,t,r){const s=cp(e);return r?(Qy("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new vm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ap(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wc.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Wc(e,new sp(e),t),s.set(t,u)),u}}Wc.INSTANCES=new WeakMap;class Xo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sp(e)}static forPath(e,t,r){if(e.length%2!=0)throw new qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xo(t,new Ar(t._delegate,r,new ut(e)))}static forKey(e,t,r){return new Xo(t,new Ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new lp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lp(this.firestore,pC(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,q.m9)(e))instanceof Ar&&Qb(this._delegate,e)}set(e,t){t=Qy("DocumentReference.set",t);try{return t?$I(this._delegate,e,t):$I(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GI(this._delegate,e):GI(this._delegate,e,t,...r)}catch(s){throw Ds(s,"updateDoc()","DocumentReference.update()")}}delete(){return function HC(n){return ip(In(n.firestore,yr),[new $d(n._key,xr.none())])}(this._delegate)}onSnapshot(...e){const t=t0(e),r=YC(e,s=>new op(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return wS(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function ES(n){n=In(n,Ar);const e=In(n.firestore,yr),t=ei(e),r=new Gc(e);return function uC(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return(r=(0,Pe.Z)(function*(u,c,g){try{const _=yield function(P,k){const G=at(P);return G.persistence.runTransaction("read document","readonly",J=>G.localDocuments.getDocument(J,k))}(u,c);_.isFoundDocument()?g.resolve(_):_.isNoDocument()?g.resolve(null):g.reject(new qe(Ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const D=nh(_,`Failed to get document '${c} from cache`);g.reject(D)}}),function s(u,c,g){return r.apply(this,arguments)})(yield Ol(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Fl(e,r,n._key,s,new dh(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Em(n){n=In(n,Ar);const e=In(n.firestore,yr);return PI(ei(e),n._key,{source:"server"}).then(t=>qy(e,n,t))}(this._delegate):function vS(n){n=In(n,Ar);const e=In(n.firestore,yr);return PI(ei(e),n._key).then(t=>qy(e,n,t))}(this._delegate),t.then(r=>new op(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xo(this.firestore,this._delegate.withConverter(e?Wc.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function t0(n){for(const e of n)if("object"==typeof e&&!JI(e))return e;return{}}function YC(n,e){var t,r;let s;return s=JI(n[0])?n[0]:JI(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class op{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return VC(this._delegate,e._delegate)}}class ap extends op{data(e){const t=this._delegate.data(e);return function mw(n,e){n||gt()}(void 0!==t),t}}class tr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sp(e)}where(e,t,r){try{return new tr(this.firestore,Ll(this._delegate,function bC(n,e,t){const r=e,s=Wy("where",n);return Ba._create(s,r,t)}(e,t,r)))}catch(s){throw Ds(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tr(this.firestore,Ll(this._delegate,function pS(n,e="asc"){const t=e,r=Wy("orderBy",n);return pm._create(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tr(this.firestore,Ll(this._delegate,function RC(n){return hC("limit",n),gm._create("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new tr(this.firestore,Ll(this._delegate,function gS(n){return hC("limitToLast",n),gm._create("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new tr(this.firestore,Ll(this._delegate,function jI(...n){return mm._create("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new tr(this.firestore,Ll(this._delegate,function PC(...n){return mm._create("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new tr(this.firestore,Ll(this._delegate,function xC(...n){return _m._create("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new tr(this.firestore,Ll(this._delegate,function MC(...n){return _m._create("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return gC(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BC(n){n=In(n,ji);const e=In(n.firestore,yr),t=ei(e),r=new Gc(e);return function lC(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return(r=(0,Pe.Z)(function*(u,c,g){try{const _=yield J_(u,c,!0),D=new hI(c,_.ls),P=D.ca(_.documents),k=D.applyChanges(P,!1);g.resolve(k.snapshot)}catch(_){const D=nh(_,`Failed to execute query '${c} against cache`);g.reject(D)}}),function s(u,c,g){return r.apply(this,arguments)})(yield Ol(n),e,t);var r})),t.promise}(t,n._query).then(s=>new $c(e,r,n,s))}(this._delegate):"server"===e?.source?function jC(n){n=In(n,ji);const e=In(n.firestore,yr),t=ei(e),r=new Gc(e);return cC(t,n._query,{source:"server"}).then(s=>new $c(e,r,n,s))}(this._delegate):function UC(n){n=In(n,ji);const e=In(n.firestore,yr),t=ei(e),r=new Gc(e);return AC(n._query),cC(t,n._query).then(s=>new $c(e,r,n,s))}(this._delegate),t.then(r=>new n0(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=t0(e),r=YC(e,s=>new n0(this.firestore,new $c(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return wS(this._delegate,t,r)}withConverter(e){return new tr(this.firestore,this._delegate.withConverter(e?Wc.getInstance(this.firestore,e):null))}}class up{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ap(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class n0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ap(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new up(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ap(this._firestore,r))})}isEqual(e){return VC(this._delegate,e._delegate)}}class lp extends tr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xo(this.firestore,e):null}doc(e){try{return new Xo(this.firestore,void 0===e?OI(this._delegate):OI(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function IS(n,e){const t=In(n.firestore,yr),r=OI(n),s=ym(n.converter,e);return ip(t,[Hy(Hc(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Xo(this.firestore,t))}isEqual(e){return Qb(this._delegate,e._delegate)}withConverter(e){return new lp(this.firestore,this._delegate.withConverter(e?Wc.getInstance(this.firestore,e):null))}}function cp(n){return In(n,Ar)}class QC{constructor(...e){this._delegate=new kl(...e)}static documentId(){return new QC(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,q.m9)(e))instanceof kl&&this._delegate._internalPath.isEqual(e._internalPath)}}class qc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function RS(){return new kI("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qc(e)}static delete(){const e=function SS(){return new cm("deleteField")}();return e._methodName="FieldValue.delete",new qc(e)}static arrayUnion(...e){const t=function GC(...n){return new cS("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new qc(t)}static arrayRemove(...e){const t=function PS(...n){return new dS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new qc(t)}static increment(e){const t=function xS(n){return new hS("increment",n)}(e);return t._methodName="FieldValue.increment",new qc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const r0={Firestore:XI,GeoPoint:lm,Timestamp:Cr,Blob:Tm,Transaction:KC,WriteBatch:e0,DocumentReference:Xo,DocumentSnapshot:op,Query:tr,QueryDocumentSnapshot:ap,QuerySnapshot:n0,CollectionReference:lp,FieldPath:QC,FieldValue:qc,setLogLevel:function ZC(n){!function gw(n){Ma.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function dp(n,e){return function px(n,e=po){return new ae.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Cm(n,e){return dp(n,e).pipe((0,Oe.U)(t=>({payload:t,type:"query"})))}!function fx(n){(function hx(n,e){n.INTERNAL.registerComponent(new Ht.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},r0)))})(n,(e,t)=>new XI(e,t,new US)),n.registerVersion("@firebase/firestore-compat","0.3.21")}(pn.Z);class JC{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=l0(r,t);return new eD(s,u,this.afs)}snapshotChanges(){return function BS(n,e){return dp(n,e).pipe((0,Xl.O)(void 0),ad(),(0,Oe.U)(t=>{const[r,s]=t;return s.exists?r?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mt)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Oe.U)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return(0,oe.D)(this.ref.get(e)).pipe(Mt)}}function Dm(n,e){return Cm(n,e).pipe((0,Xl.O)(void 0),ad(),(0,Oe.U)(t=>{const[r,s]=t,u=s.payload.docChanges(),c=u.map(g=>({type:g.type,payload:g}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((g,_)=>{const D=u.find(k=>k.doc.ref.isEqual(g.ref)),P=r?.payload.docs.find(k=>k.ref.isEqual(g.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(g.metadata)||!D&&P&&JSON.stringify(P.metadata)===JSON.stringify(g.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:g}})}),c}))}function XC(n,e,t){return Dm(n,t).pipe((0,Ia.R)((r,s)=>function jS(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function o0(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return s0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return s0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return s0(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,ze.x)(),(0,Oe.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function s0(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function a0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class eD{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Dm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Oe.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe((0,Xl.O)(void 0),ad(),(0,tl.h)(([r,s])=>s.length>0||!r),(0,Oe.U)(([,r])=>r),Mt)}auditTrail(e){return this.stateChanges(e).pipe((0,Ia.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a0(e);return XC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mt)}valueChanges(e={}){return Cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.U)(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Mt)}get(e){return(0,oe.D)(this.query.get(e)).pipe(Mt)}add(e){return this.ref.add(e)}doc(e){return new JC(this.ref.doc(e),this.afs)}}class ev{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Dm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,tl.h)(t=>t.length>0),Mt):Dm(this.query,this.afs.schedulers.outsideAngular).pipe(Mt)}auditTrail(e){return this.stateChanges(e).pipe((0,Ia.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a0(e);return XC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mt)}valueChanges(e={}){return Cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Oe.U)(r=>r.payload.docs.map(s=>e.idField?{[e.idField]:s.id,...s.data()}:s.data())),Mt)}get(e){return(0,oe.D)(this.query.get(e)).pipe(Mt)}}const u0=new m.OlP("angularfire2.enableFirestorePersistence"),gx=new m.OlP("angularfire2.firestore.persistenceSettings"),tD=new m.OlP("angularfire2.firestore.settings"),HS=new m.OlP("angularfire2.firestore.use-emulator");function l0(n,e=(t=>t)){return{query:e(n),ref:n}}let hp=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,s,u,c,g,_,D,P,k,G,J,de,Se,xe,ht,mt){this.schedulers=_;const Qe=Ci(t,g,r),Ct=P;k&&od(Qe,g,G,de,Se,xe,J,ht),[this.firestore,this.persistenceEnabled$]=ya(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Qt=g.runOutsideAngular(()=>Qe.firestore());if(u&&Qt.settings(u),Ct&&Qt.useEmulator(...Ct),s&&!(0,K.PM)(c)){const Cn=()=>{try{return(0,oe.D)(Qt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(ri){return typeof console<"u"&&console.warn(ri),(0,yn.of)(!1)}};return[Qt,g.runOutsideAngular(Cn)]}return[Qt,(0,yn.of)(!1)]},[u,Ct,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=l0(s,r),g=this.schedulers.ngZone.run(()=>u);return new eD(g,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new ev(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new JC(s,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(m.LFG(Vi),m.LFG(hr,8),m.LFG(u0,8),m.LFG(tD,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(x),m.LFG(gx,8),m.LFG(HS,8),m.LFG(mo,8),m.LFG(Ft,8),m.LFG(sd,8),m.LFG(Ch,8),m.LFG(Ui,8),m.LFG(Dh,8),m.LFG(go,8),m.LFG(Qu,8))};static \u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Am=(()=>{class n{constructor(t,r){this.angularfireauth=t,this.angularfirestore=r,this.isLoggedIn=!1}signin(t,r){var s=this;return(0,Pe.Z)(function*(){yield s.angularfireauth.signInWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(u.user))})})()}signup(t,r){var s=this;return(0,Pe.Z)(function*(){yield s.angularfireauth.createUserWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(u.user))})})()}logout(){this.angularfireauth.signOut(),localStorage.removeItem("user")}forgotPassword(t){this.angularfireauth.sendPasswordResetEmail(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.LFG(mo),m.LFG(hp))};static#t=this.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function c0(n,e){if(1&n){const t=m.EpF();m.O4$(),m.TgZ(0,"svg",20),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.showPassword())}),m._UZ(1,"path",21)(2,"path",22),m.qZA()}}function _x(n,e){if(1&n){const t=m.EpF();m.O4$(),m.TgZ(0,"svg",20),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.showPassword())}),m._UZ(1,"path",23),m.qZA()}}let $S=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.email="",this.password="",this.changetype=!0,this.viewIcon=!0}register(){this.router.navigate(["/register"])}login(t,r){var s=this;return(0,Pe.Z)(function*(){yield s.userinfo.signin(t,r),s.userinfo.isLoggedIn?(localStorage.setItem("IsAuthorized","true"),s.router.navigate(["/dashboard/home"])):alert("Invalid Data")})()}ForgotPassword(t){t?(this.userinfo.forgotPassword(t),window.location.reload()):alert("Fill Email Field !")}showPassword(){this.changetype=!this.changetype,this.viewIcon=!this.viewIcon}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Zi.F0),m.Y36(Am))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-user-login"]],decls:29,vars:5,consts:[[1,"flex","w-full","h-screen"],[1,"mx-auto","mt-20"],[1,"border-4","border-golden","h-96","w-96","rounded-3xl"],["src","../../assets/img/navlogo.png",1,"p-6","rounded-full"],[1,"flex","flex-col","items-center","justify-center","mt-2"],[1,"mx-auto","my-3"],["for","email",1,"text-gray-800"],["type","email","id","email","name","email",1,"ml-2","border-2","border-golden","hover:border-amber-400","rounded-md",3,"ngModel","ngModelChange"],[1,"mx-auto","my-3","flex","flex-row"],["for","password",1,"text-gray-800"],[1,"flex","flex-row","ml-2","border-2","border-golden","rounded-md"],["id","password",1,"border-golden",3,"type","ngModel","ngModelChange"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","w-6 h-6",3,"click",4,"ngIf"],[1,"flex","justify-between","w-full","h-fit","mt-2"],[1,"mx-10","text-blue-600"],["for","passwordreset",1,"cursor-pointer",3,"click"],[1,"mx-10"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-center","text-white","rounded-lg","bg-golden","hover:bg-golden","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],[1,"text-center","w-full","mt-4"],[1,"text-blue-600","bg-golden","w-64","mx-5","rounded-lg","font-bold","py-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),m._UZ(4,"img",3),m.qZA(),m.TgZ(5,"div",4)(6,"div",5)(7,"label",6),m._uU(8,"Email :"),m.qZA(),m.TgZ(9,"input",7),m.NdJ("ngModelChange",function(c){return s.email=c}),m.qZA()(),m.TgZ(10,"div",8)(11,"label",9),m._uU(12,"Password :"),m.qZA(),m.TgZ(13,"div",10)(14,"div")(15,"input",11),m.NdJ("ngModelChange",function(c){return s.password=c}),m.qZA()(),m.TgZ(16,"div"),m.YNc(17,c0,3,0,"svg",12),m.YNc(18,_x,2,0,"svg",12),m.qZA()()(),m.TgZ(19,"div",13)(20,"div",14)(21,"label",15),m.NdJ("click",function(){return s.ForgotPassword(s.email)}),m._uU(22,"Forgot Password?"),m.qZA()(),m.TgZ(23,"div",16)(24,"button",17),m.NdJ("click",function(){return s.login(s.email,s.password)}),m._uU(25,"LOGIN"),m.qZA()()()(),m.TgZ(26,"div",18)(27,"button",19),m.NdJ("click",function(){return s.register()}),m._uU(28,"Create Account"),m.qZA()()()()()),2&r&&(m.xp6(9),m.Q6J("ngModel",s.email),m.xp6(6),m.Q6J("type",s.changetype?"password":"text")("ngModel",s.password),m.xp6(2),m.Q6J("ngIf",1==s.viewIcon),m.xp6(1),m.Q6J("ngIf",0==s.viewIcon))},dependencies:[K.O5,Le,bt,ho]})}return n})(),yx=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.email="",this.password=""}register(t,r){var s=this;return(0,Pe.Z)(function*(){yield s.userinfo.signup(t,r),s.userinfo.isLoggedIn?(localStorage.setItem("IsAuthorized","true"),s.router.navigate(["/dashboard/home"])):alert("Invalid Data")})()}login(){this.router.navigate(["/login"])}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Zi.F0),m.Y36(Am))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-user-registration"]],decls:21,vars:2,consts:[[1,"flex","w-full","h-screen"],[1,"mx-auto","mt-20"],[1,"border-4","border-golden","max-h-fit","w-96","rounded-3xl"],["src","../../assets/img/navlogo.png",1,"p-6","rounded-full"],[1,"flex","flex-col","items-center","justify-center","mt-2"],[1,"mx-auto","my-2"],["for","email",1,"text-gray-800"],["type","email","id","email","name","email",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400",3,"ngModel","ngModelChange"],[1,"mx-auto","my-3"],["for","password",1,"text-gray-800"],["type","password","id","password",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400",3,"ngModel","ngModelChange"],[1,"flex","flex-row","w-full","h-fit","my-5"],[1,"ml-4","w-full","text-blue-600","basis-9/12"],["for","passwordreset",1,"cursor-pointer",3,"click"],[1,"mx-10"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-center","text-white","rounded-lg","bg-golden","focus:ring-amber-300","basis-3/12",3,"click"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),m._UZ(4,"img",3),m.qZA(),m.TgZ(5,"div",4)(6,"div",5)(7,"label",6),m._uU(8,"Email :"),m.qZA(),m.TgZ(9,"input",7),m.NdJ("ngModelChange",function(c){return s.email=c}),m.qZA()(),m.TgZ(10,"div",8)(11,"label",9),m._uU(12,"Password :"),m.qZA(),m.TgZ(13,"input",10),m.NdJ("ngModelChange",function(c){return s.password=c}),m.qZA()(),m.TgZ(14,"div",11)(15,"div",12)(16,"label",13),m.NdJ("click",function(){return s.login()}),m._uU(17,"Already have an account?"),m.qZA()(),m.TgZ(18,"div",14)(19,"button",15),m.NdJ("click",function(){return s.register(s.email,s.password)}),m._uU(20,"register"),m.qZA()()()()()()()),2&r&&(m.xp6(9),m.Q6J("ngModel",s.email),m.xp6(4),m.Q6J("ngModel",s.password))},dependencies:[Le,bt,ho]})}return n})();function GS(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"div",17),m._UZ(2,"img",18),m.TgZ(3,"div",19)(4,"h3"),m._uU(5),m.qZA(),m.TgZ(6,"p"),m._uU(7),m.ALo(8,"currency"),m.qZA(),m.TgZ(9,"div",20)(10,"button",21),m.NdJ("click",function(){const u=m.CHM(t).index,c=m.oxw(2);return m.KtG(c.decreaseQuantity(u))}),m._uU(11,"-"),m.qZA(),m.TgZ(12,"span",22),m._uU(13),m.qZA(),m.TgZ(14,"button",21),m.NdJ("click",function(){const u=m.CHM(t).index,c=m.oxw(2);return m.KtG(c.increaseQuantity(u))}),m._uU(15,"+"),m.qZA()(),m.TgZ(16,"div",23)(17,"button",24),m.NdJ("click",function(){const u=m.CHM(t).$implicit,c=m.oxw(2);return m.KtG(c.removeItemFromCart(u))}),m._uU(18,"Remove"),m.qZA()()()()()}if(2&n){const t=e.$implicit;m.xp6(2),m.s9C("alt",t.name),m.Q6J("src",t.image,m.LSH),m.xp6(3),m.Oqu(t.name),m.xp6(2),m.hij("Price: ",m.xi3(8,5,t.totalPrice,"INR"),""),m.xp6(6),m.Oqu(t.quantity)}}function zS(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div")(1,"div",4)(2,"h2",5),m._uU(3,"Your Cart"),m.qZA()(),m.TgZ(4,"div",6)(5,"div",7),m.YNc(6,GS,19,8,"div",8),m.qZA(),m.TgZ(7,"div",9)(8,"div",10)(9,"h2",11),m._uU(10,"Summary"),m.qZA(),m.TgZ(11,"div",12)(12,"span"),m._uU(13,"Subtotal"),m.qZA(),m.TgZ(14,"span"),m._uU(15),m.ALo(16,"currency"),m.qZA()(),m.TgZ(17,"div",12)(18,"span"),m._uU(19,"Taxes (10%)"),m.qZA(),m.TgZ(20,"span"),m._uU(21),m.ALo(22,"currency"),m.qZA()(),m.TgZ(23,"div",12)(24,"span"),m._uU(25,"Shipping Charges"),m.qZA(),m.TgZ(26,"span"),m._uU(27),m.ALo(28,"currency"),m.qZA()(),m._UZ(29,"hr",13),m.TgZ(30,"div",12)(31,"span",14),m._uU(32,"Total"),m.qZA(),m.TgZ(33,"span",14),m._uU(34),m.ALo(35,"currency"),m.qZA()(),m.TgZ(36,"button",15),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.Checkout())}),m._uU(37,"Checkout"),m.qZA(),m.TgZ(38,"button",16),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.clearCart())}),m._uU(39,"Clear Cart"),m.qZA()()()(),m._UZ(40,"div"),m.qZA()}if(2&n){const t=m.oxw();m.xp6(6),m.Q6J("ngForOf",t.cartItems),m.xp6(9),m.Oqu(m.xi3(16,5,(t.overallTotal-20)/1.1,"INR")),m.xp6(6),m.Oqu(m.xi3(22,8,(t.overallTotal-20)/11,"INR")),m.xp6(6),m.Oqu(m.xi3(28,11,20,"INR")),m.xp6(7),m.Oqu(m.xi3(35,14,t.overallTotal,"INR"))}}function WS(n,e){1&n&&(m.TgZ(0,"div",25)(1,"div",26)(2,"h1",27),m._uU(3,"Your cart is empty."),m.qZA(),m.TgZ(4,"div",28)(5,"a",29),m._uU(6,"Go to home page"),m.qZA()()()())}let nD=(()=>{class n{constructor(t,r){this.cartService=t,this.router=r,this.cartItems=[],this.overallTotal=0}ngOnInit(){this.cartService.getCartItems().subscribe(t=>{this.cartItems=t}),this.calculateOverallTotal()}increaseQuantity(t){this.cartItems[t].quantity++,this.cartItems[t].totalPrice=this.cartItems[t].quantity*this.cartItems[t].price,this.calculateOverallTotal()}decreaseQuantity(t){this.cartItems[t].quantity>1&&(this.cartItems[t].quantity--,this.cartItems[t].totalPrice=this.cartItems[t].quantity*this.cartItems[t].price,this.calculateOverallTotal())}removeItemFromCart(t){this.cartService.removeFromCart(t),this.calculateOverallTotal()}clearCart(){this.cartService.clearCart(),this.cartItems=[]}calculateOverallTotal(){const t=this.cartItems.reduce((u,c)=>u+c.price*c.quantity,0);this.overallTotal=t+.1*t+20}Checkout(){this.router.navigate(["/checkout"])}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Gu.N),m.Y36(Zi.F0))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-cart"]],decls:5,vars:2,consts:[[1,"w-screen","h-screen","bg-gray-400","bg-opacity-50"],[1,"w-full","bg-slate-400","h-fit"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"flex","justify-between","w-full","h-10","p-6","mx-3","my-auto"],[1,"font-serif","text-3xl"],[1,"flex","items-start","justify-start","w-full"],[1,"flex","flex-wrap","items-start","justify-start","w-3/5","gap-5","p-5","mx-auto","h-fit"],[4,"ngFor","ngForOf"],[1,"md:w-1/4","m-5"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"my-2"],[1,"font-semibold"],[1,"bg-blue-500","text-white","py-2","px-4","rounded-lg","mt-4","w-full",3,"click"],[1,"w-full","h-8","mt-2","text-white","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"flex","justify-center","items-center"],[1,"w-8","h-8","bg-blue-600","text-white","rounded-xl",3,"click"],[1,"mx-2"],[1,"mt-2"],[1,"w-full","h-8","text-white","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"],[1,"h-screen","bg-slate-300"],[1,"p-10","text-center","py-48"],[1,"font-bold","text-3xl"],[1,"pt-10"],["href","#",1,"text-blue-700","text-xl"]],template:function(r,s){if(1&r&&(m.TgZ(0,"div",0)(1,"div",1),m.YNc(2,zS,41,17,"div",2),m.qZA()(),m.YNc(3,WS,7,0,"ng-template",null,3,m.W1O)),2&r){const u=m.MAs(4);m.xp6(2),m.Q6J("ngIf",s.cartItems.length>0)("ngIfElse",u)}},dependencies:[K.sg,K.O5,K.H9]})}return n})();function rD(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",9)(1,"button",16),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.Login())}),m._uU(2,"LOGIN"),m.qZA()()}}function qS(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",17)(1,"button",18),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.menu())}),m.O4$(),m.TgZ(2,"svg",19),m._UZ(3,"path",20),m.qZA()(),m.kcU(),m.TgZ(4,"div",21)(5,"div",22)(6,"button",23),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.profile())}),m._uU(7,"PROFILE"),m.qZA(),m.TgZ(8,"button",23),m.NdJ("click",function(){m.CHM(t);const s=m.oxw();return m.KtG(s.Logout())}),m._uU(9,"LOGOUT"),m.qZA()()()()}if(2&n){const t=m.oxw();m.xp6(4),m.Q6J("hidden",t.visible)}}let iD=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.isLogout=new m.vpe,this.isAuthorized="true"===localStorage.getItem("IsAuthorized"),this.visible=!0}Login(){this.router.navigate(["/login"])}profile(){this.router.navigate(["/dashboard/profile"]),this.visible=!this.visible}logout(){localStorage.removeItem("IsAuthorized"),localStorage.removeItem("IsAdmin"),window.location.reload(),this.router.navigate(["/dashboard/home"])}cart(){localStorage.getItem("IsAuthorized")?this.router.navigate(["/cart"]):(alert("Login to continue ..."),this.router.navigate(["/login"]))}menu(){this.visible=!this.visible}Logout(){this.userinfo.logout(),localStorage.removeItem("IsAuthorized"),localStorage.removeItem("IsAdmin"),window.location.reload(),this.router.navigate(["/dashboard/home"])}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Zi.F0),m.Y36(Am))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:20,vars:2,consts:[[1,"flex","flex-row","h-16","gap-2","py-2","mx-2","mt-2","bg-gray-500"],["href","#","routerLinkActive","dashboard"],["src","../assets/img/navlogo.png","alt","logo",1,"h-full","max-w-full","mx-1"],[1,"w-full","h-10"],[1,"h-8"],[1,"absolute","mt-4","ml-3"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","search","id","default-search","placeholder","Search products ...",1,"block","w-full","p-3","pl-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"mt-2"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-8","h-8","mx-3","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"],[1,"mx-1"],["class","mt-2",4,"ngIf"],["class","mt-2 mx-2",4,"ngIf"],["type","button",1,"px-4","py-2","mr-3","text-sm","font-medium","text-center","text-white","bg-blue-700","rounded-lg","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","md:mr-0","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"mt-2","mx-2"],["type","button",1,"px-4","py-2","mr-3","text-sm","font-medium","text-center","md:mr-0",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],[1,"h-fit","w-fit","absolute","top-6","right-28",3,"hidden"],[1,"bg-white","border-2","border-black","w-20","rounded-md","absolute"],[1,"h-10","w-20","border-2","rounded-sm","border-black",3,"click"]],template:function(r,s){1&r&&(m.TgZ(0,"nav")(1,"div",0)(2,"div")(3,"a",1),m._UZ(4,"img",2),m.qZA()(),m.TgZ(5,"div",3)(6,"div",4)(7,"div",5),m.O4$(),m.TgZ(8,"svg",6),m._UZ(9,"path",7),m.qZA()(),m.kcU(),m._UZ(10,"input",8),m.qZA()(),m.TgZ(11,"div",9)(12,"button",10),m.NdJ("click",function(){return s.cart()}),m.O4$(),m.TgZ(13,"svg",11),m._UZ(14,"path",12),m.qZA()()(),m.kcU(),m.TgZ(15,"div",13)(16,"div"),m.YNc(17,rD,3,0,"div",14),m.qZA(),m.TgZ(18,"div"),m.YNc(19,qS,10,1,"div",15),m.qZA()()()()),2&r&&(m.xp6(17),m.Q6J("ngIf",!s.isAuthorized),m.xp6(2),m.Q6J("ngIf",s.isAuthorized))},dependencies:[K.O5,Zi.Od]})}return n})(),sD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-dashboard"]],decls:5,vars:0,consts:[[1,"h-[100vh]"],[1,"h-full","pt-1"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0)(1,"div"),m._UZ(2,"app-header"),m.qZA(),m.TgZ(3,"div",1),m._UZ(4,"router-outlet"),m.qZA()())},dependencies:[Zi.lC,iD]})}return n})(),ZS=(()=>{class n{constructor(t,r){this.cartService=t,this.router=r,this.cartItems=[],this.overallTotal=0}ngOnInit(){this.cartService.getCartItems().subscribe(t=>{this.cartItems=t}),this.calculateOverallTotal()}calculateOverallTotal(){const t=this.cartItems.reduce((u,c)=>u+c.price*c.quantity,0);this.overallTotal=t+.1*t+20}clearCart(){this.cartService.clearCart(),this.cartItems=[]}placeOrder(){this.router.navigate(["dashboard/home"]),this.clearCart()}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Gu.N),m.Y36(Zi.F0))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-checkout"]],decls:91,vars:20,consts:[[1,"bg-slate-600","w-full","min-h-screen","bg-opacity-70"],[1,"text-center","text-3xl","pt-2","font-bold"],[1,"text-5xl"],[1,"flex","h-fit","p-10"],[1,"w-full","flex","flex-wrap","items-start","justify-between"],[1,"w-full","md:w-1/2","h-fit"],[1,"p-3","w-full"],[1,"text-xl","font-semibold"],[1,"m-5"],[1,"bg-white","w-fit","rounded-lg","shadow-md","p-6"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"my-2"],[1,"font-semibold"],[1,"w-full","p-3"],[1,"m-3","flex","w-full"],[1,"w-full"],["for","name",1,"mt-3","ml-2","text-xl","w-full","font-medium"],["type","text","id","name","name","name","required","",1,"ml-10","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","address",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","address","name","address","rows","1","required","",1,"ml-5","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","city",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","city","name","city","required","",1,"ml-14","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","pincode",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","pincode","name","pincode","required","",1,"ml-3","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","email",1,"mt-3","ml-2","text-xl","font-medium"],["type","email","id","email","name","email","required","",1,"ml-10","mt-3","w-fit","border-2","rounded-lg","border-black"],[1,"w-full","h-fit"],[1,"p-4","h-48","w-80","bg-green-700","m-2","rounded-xl","border-2","border-black"],[1,"mt-2","w-full"],["for","cardnumber"],["type","number","id","cardnumber","name","cardnumber","maxlength","16","required","",1,"ml-2","w-40","border-2","border-black","rounded-lg"],[1,"mt-2"],["for","expdate"],["type","number","id","expdate","name","expmonth","maxlength","2","required","",1,"w-8","ml-2","border-2","border-black","rounded-lg"],["type","number","name","expyear","id","expdate","maxlength","4","required","",1,"w-16","ml-2","border-2","border-black","rounded-lg"],["for","cvv"],["type","text","id","cvv","name","cvv","required","",1,"ml-2","w-16","border-2","border-black","rounded-lg"],[1,"flex","ml-5","my-12","w-full"],[1,"font-semibold","ml-3"],[1,"ml-10","bg-blue-500","text-white","px-4","py-3","rounded-lg","w-40","h-12",3,"click"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"h1",2),m._uU(4,"CHECKOUT"),m.qZA()(),m.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h2",7),m._uU(10,"Order Summary"),m.qZA(),m.TgZ(11,"div")(12,"div",8)(13,"div",9)(14,"h2",10),m._uU(15,"Summary"),m.qZA(),m.TgZ(16,"div",11)(17,"span"),m._uU(18,"Subtotal"),m.qZA(),m.TgZ(19,"span"),m._uU(20),m.ALo(21,"currency"),m.qZA()(),m.TgZ(22,"div",11)(23,"span"),m._uU(24,"Taxes (10%)"),m.qZA(),m.TgZ(25,"span"),m._uU(26),m.ALo(27,"currency"),m.qZA()(),m.TgZ(28,"div",11)(29,"span"),m._uU(30,"Shipping Charges"),m.qZA(),m.TgZ(31,"span"),m._uU(32),m.ALo(33,"currency"),m.qZA()(),m._UZ(34,"hr",12),m.TgZ(35,"div",11)(36,"span",13),m._uU(37,"Total"),m.qZA(),m.TgZ(38,"span",13),m._uU(39),m.ALo(40,"currency"),m.qZA()()()()()()(),m.TgZ(41,"div",5)(42,"div",14)(43,"h2",7),m._uU(44,"Shipping Information"),m.qZA(),m.TgZ(45,"form",15)(46,"div",16)(47,"div")(48,"label",17),m._uU(49,"Name :"),m.qZA(),m._UZ(50,"input",18),m.qZA(),m.TgZ(51,"div")(52,"label",19),m._uU(53,"Address :"),m.qZA(),m._UZ(54,"textarea",20),m.qZA(),m.TgZ(55,"div")(56,"label",21),m._uU(57,"City :"),m.qZA(),m._UZ(58,"input",22),m.qZA(),m.TgZ(59,"div")(60,"label",23),m._uU(61,"PIN Code :"),m.qZA(),m._UZ(62,"input",24),m.qZA(),m.TgZ(63,"div")(64,"label",25),m._uU(65,"Email :"),m.qZA(),m._UZ(66,"input",26),m.qZA()()()()(),m.TgZ(67,"div",27)(68,"form",28)(69,"div",29)(70,"label",30),m._uU(71,"Card Number :"),m.qZA(),m._UZ(72,"input",31),m.qZA(),m.TgZ(73,"div",32)(74,"label",33),m._uU(75,"Expiration Date :"),m.qZA(),m._UZ(76,"input",34),m._uU(77," / "),m._UZ(78,"input",35),m.qZA(),m.TgZ(79,"div",32)(80,"label",36),m._uU(81,"CVV :"),m.qZA(),m._UZ(82,"input",37),m.qZA()(),m.TgZ(83,"div",38)(84,"h4",13),m._uU(85,"Total :"),m.qZA(),m.TgZ(86,"h4",39),m._uU(87),m.ALo(88,"currency"),m.qZA(),m.TgZ(89,"button",40),m.NdJ("click",function(){return s.placeOrder()}),m._uU(90,"Place Order"),m.qZA()()()()()()()),2&r&&(m.xp6(20),m.Oqu(m.xi3(21,5,(s.overallTotal-20)/1.1,"INR")),m.xp6(6),m.Oqu(m.xi3(27,8,(s.overallTotal-20)/11,"INR")),m.xp6(6),m.Oqu(m.xi3(33,11,20,"INR")),m.xp6(7),m.Oqu(m.xi3(40,14,s.overallTotal,"INR")),m.xp6(48),m.Oqu(m.xi3(88,17,s.overallTotal,"INR")))},dependencies:[Hu,Fn,Or,K.H9]})}return n})();function KS(n,e){if(1&n&&(m.TgZ(0,"div")(1,"div",2),m._UZ(2,"img",3),m.qZA(),m.TgZ(3,"div",4)(4,"h2"),m._uU(5),m.qZA(),m._uU(6," Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque rem expedita aut quisquam odit dolore officiis quis laborum alias, quidem suscipit sint, ipsum rerum excepturi eius cum quia nihil dolor! "),m.TgZ(7,"p"),m._uU(8),m.qZA(),m.TgZ(9,"button",5),m._uU(10,"Add to Cart"),m.qZA()()()),2&n){const t=e.$implicit;m.xp6(2),m.s9C("alt",t.name),m.Q6J("src",t.image,m.LSH),m.xp6(3),m.Oqu(t.name),m.xp6(3),m.hij("Price: \u20b9",t.price,"")}}const oD=[{path:"dashboard",component:sD,children:[{path:"home",component:Ku},{path:"",redirectTo:"home",pathMatch:"full"},{path:"details",component:(()=>{class n{constructor(t,r){this.route=t,this.productService=r,this.products=[],this.productService.getDetail().subscribe(s=>{this.products=s})}ngOnInit(){this.products=this.route.snapshot.data.product}static#e=this.\u0275fac=function(r){return new(r||n)(m.Y36(Zi.gz),m.Y36(zu.M))};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"flex","w-full","mt-5"],[4,"ngFor","ngForOf"],[1,"p-10"],[3,"src","alt"],[1,"p-2","w-96","mt-12"],[1,"w-56","mt-10","h-8","text-gray-70","0","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700"]],template:function(r,s){1&r&&(m.TgZ(0,"div",0),m.YNc(1,KS,11,4,"div",1),m.qZA()),2&r&&(m.xp6(1),m.Q6J("ngForOf",s.products))},dependencies:[K.sg]})}return n})()},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-profile"]],decls:2,vars:0,template:function(r,s){1&r&&(m.TgZ(0,"p"),m._uU(1,"profile works!"),m.qZA())}})}return n})()},{path:"products",loadChildren:()=>B.e(13).then(B.bind(B,4013)).then(n=>n.ProductsModule)}]},{path:"login",component:$S},{path:"register",component:yx},{path:"cart",component:nD},{path:"checkout",component:ZS},{path:"",redirectTo:"dashboard",pathMatch:"full"}];let aD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n});static#n=this.\u0275inj=m.cJS({imports:[Zi.Bz.forRoot(oD),Zi.Bz]})}return n})(),uD=(()=>{class n{constructor(){this.title="Angular-e-commerce-site"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){1&r&&m._UZ(0,"router-outlet")},dependencies:[Zi.lC]})}return n})();const cD="firebasestorage.googleapis.com",dD="storageBucket";class ti extends q.ZR{constructor(e,t,r=0){super(fD(e),`Firebase Storage: ${t} (${fD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Hr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Hr||{});function fD(n){return"storage/"+n}function pD(){return new ti(Hr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tv(){return new ti(Hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function d0(){return new ti(Hr.CANCELED,"User canceled the upload/download.")}function XS(){return new ti(Hr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fp(n){return new ti(Hr.INVALID_ARGUMENT,n)}function _D(){return new ti(Hr.APP_DELETED,"The Firebase app was deleted.")}function yD(n){return new ti(Hr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rv(n,e){return new ti(Hr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function bm(n){throw new ti(Hr.INTERNAL_ERROR,"Internal error: "+n)}class Ei{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ei.makeFromUrl(e,t)}catch{return new Ei(e,"")}if(""===r.path)return r;throw function nv(n){return new ti(Hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function D(Ct){Ct.path_=decodeURIComponent(Ct.path)}const k=t.replace(/[.]/g,"\\."),Qe=[{regex:g,indices:{bucket:1,path:3},postModify:function u(Ct){"/"===Ct.path.charAt(Ct.path.length-1)&&(Ct.path_=Ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${k}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===cD?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let Ct=0;Ct<Qe.length;Ct++){const Qt=Qe[Ct],Cn=Qt.regex.exec(e);if(Cn){let ao=Cn[Qt.indices.path];ao||(ao=""),r=new Ei(Cn[Qt.indices.bucket],ao),Qt.postModify(r);break}}if(null==r)throw function QS(n){return new ti(Hr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class iv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sv(n){return"string"==typeof n||n instanceof String}function ov(n){return h0()&&n instanceof Blob}function h0(){return typeof Blob<"u"&&!(0,q.UG)()}function f0(n,e,t,r){if(r<e)throw fp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fp(`Invalid value for '${n}'. Expected ${t} or less.`)}function Vl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vD(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var pp=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(pp||{});function ED(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class oR{constructor(e,t,r,s,u,c,g,_,D,P,k,G=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=g,this.errorCallback_=_,this.timeout_=D,this.progressCallback_=P,this.connectionFactory_=k,this.retry=G,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((J,de)=>{this.resolve_=J,this.reject_=de,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function rR(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==g){const _=pD();_.serverResponse=g.getErrorText(),c(this.errorCallback_?this.errorCallback_(g,_):_)}else c(s.canceled?this.appDelete_?_D():d0():tv())};this.canceled_?t(0,new av(!1,null,!0)):this.backoffId_=function tR(n,e,t){let r=1,s=null,u=null,c=!1,g=0;function _(){return 2===g}let D=!1;function P(...xe){D||(D=!0,e.apply(null,xe))}function k(xe){s=setTimeout(()=>{s=null,n(J,_())},xe)}function G(){u&&clearTimeout(u)}function J(xe,...ht){if(D)return void G();if(xe)return G(),void P.call(null,xe,...ht);if(_()||c)return G(),void P.call(null,xe,...ht);let Qe;r<64&&(r*=2),1===g?(g=2,Qe=0):Qe=1e3*(r+Math.random()),k(Qe)}let de=!1;function Se(xe){de||(de=!0,G(),!D&&(null!==s?(xe||(g=2),clearTimeout(s),k(0)):xe||(g=1)))}return k(0),u=setTimeout(()=>{c=!0,Se(!0)},t),Se}((r,s)=>{if(s)return void r(!1,new av(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const g=u.getErrorCode()===pp.NO_ERROR,_=u.getStatus();if(!g||ED(_,this.additionalRetryCodes_)&&this.retry){const P=u.getErrorCode()===pp.ABORT;return void r(!1,new av(!1,null,P))}const D=-1!==this.successCodes_.indexOf(_);r(!0,new av(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function nR(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class av{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dR(...n){const e=function cR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(h0())return new Blob(n);throw new ti(Hr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ea={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class As{constructor(e,t){this.data=e,this.contentType=t||null}}function uv(n,e){switch(n){case ea.RAW:return new As(g0(e));case ea.BASE64:case ea.BASE64URL:return new As(m0(n,e));case ea.DATA_URL:return new As(function _0(n){const e=new CD(n);return e.base64?m0(ea.BASE64,e.rest):function hR(n){let e;try{e=decodeURIComponent(n)}catch{throw rv(ea.DATA_URL,"Malformed data URL.")}return g0(e)}(e.rest)}(e),function Zc(n){return new CD(n).contentType}(e))}throw pD()}function g0(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function m0(n,e){switch(n){case ea.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw rv(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ea.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw rv(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function TD(n){if(typeof atob>"u")throw function mD(n){return new ti(Hr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:rv(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class CD{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rv(ea.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function DD(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ta{constructor(e,t){let r=0,s="";ov(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(ov(this.data_)){const s=function wD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new ta(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ta(r,!0)}}static getBlob(...e){if(h0()){const t=e.map(r=>r instanceof ta?r.data_:r);return new ta(dR.apply(null,t))}{const t=e.map(c=>sv(c)?uv(ea.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let g=0;g<c.length;g++)s[u++]=c[g]}),new ta(s,!0)}}uploadData(){return this.data_}}function Sm(n){let e;try{e=JSON.parse(n)}catch{return null}return function sR(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function y0(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pR(n,e){return e}class Gs{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||pR}}let lv=null;function gp(){if(lv)return lv;const n=[];n.push(new Gs("bucket")),n.push(new Gs("generation")),n.push(new Gs("metageneration")),n.push(new Gs("name","fullPath",!0));const t=new Gs("name");t.xform=function e(u,c){return function gR(n){return!sv(n)||n.length<2?n:y0(n)}(c)},n.push(t);const s=new Gs("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new Gs("timeCreated")),n.push(new Gs("updated")),n.push(new Gs("md5Hash",null,!0)),n.push(new Gs("cacheControl",null,!0)),n.push(new Gs("contentDisposition",null,!0)),n.push(new Gs("contentEncoding",null,!0)),n.push(new Gs("contentLanguage",null,!0)),n.push(new Gs("contentType",null,!0)),n.push(new Gs("metadata","customMetadata",!0)),lv=n,lv}function bD(n,e,t){const r=Sm(e);return null===r?null:function AD(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function Sx(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Ei(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function RD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const cv="prefixes",v0="items";class ja{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ha(n){if(!n)throw pD()}function Ul(n,e){return function t(r,s){const u=bD(n,s,e);return Ha(null!==u),u}}function hh(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Dx(){return new ti(Hr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Cx(){return new ti(Hr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Tx(n){return new ti(Hr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function gD(n){return new ti(Hr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function Rm(n){const e=hh(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function wx(n){return new ti(Hr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function MD(n,e,t){const s=Vl(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new ja(s,"GET",Ul(n,t),c);return g.errorHandler=Rm(e),g}function Rx(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const g=Vl(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,P=new ja(g,"GET",function dv(n,e){return function t(r,s){const u=function mR(n,e,t){const r=Sm(t);return null===r?null:function PD(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[cv])for(const s of t[cv]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new Ei(e,u));r.prefixes.push(c)}if(t[v0])for(const s of t[v0]){const u=n._makeStorageReference(new Ei(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Ha(null!==u),u}}(n,e.bucket),D);return P.urlParams=u,P.errorHandler=hh(e),P}function vR(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function xx(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class hv{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function w0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ha(!1)}return Ha(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Ox={STATE_CHANGED:"state_changed"},oo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function T0(n){switch(n){case"running":case"pausing":case"canceling":return oo.RUNNING;case"paused":return oo.PAUSED;case"success":return oo.SUCCESS;case"canceled":return oo.CANCELED;default:return oo.ERROR}}class fv{constructor(e,t,r){if(function iR(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function mp(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let ND=null;class OD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw bm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class fh extends OD{initXhr(){this.xhr_.responseType="text"}}function na(){return ND?ND():new fh}class pv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=gp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Hr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(ED(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=tv()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Hr.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function ER(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=vR(e,r,s),g={name:c.fullPath},_=Vl(u,n.host,n._protocol),P={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},k=RD(c,t),de=new ja(_,"POST",function J(Se){let xe;w0(Se);try{xe=Se.getResponseHeader("X-Goog-Upload-URL")}catch{Ha(!1)}return Ha(sv(xe)),xe},n.maxUploadRetryTime);return de.urlParams=g,de.headers=P,de.body=k,de.errorHandler=hh(e),de}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,na,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function Mx(n,e,t,r){const _=new ja(t,"POST",function u(D){const P=w0(D,["active","final"]);let k=null;try{k=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ha(!1)}k||Ha(!1);const G=Number(k);return Ha(!isNaN(G)),new hv(G,r.size(),"final"===P)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=hh(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,na,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new hv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function Nx(n,e,t,r,s,u,c,g){const _=new hv(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function Ax(){return new ti(Hr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const D=_.total-_.current;let P=D;s>0&&(P=Math.min(P,s));const k=_.current;let J="";J=0===P?"finalize":D===P?"upload, finalize":"upload";const de={"X-Goog-Upload-Command":J,"X-Goog-Upload-Offset":`${_.current}`},Se=r.slice(k,k+P);if(null===Se)throw XS();const Qe=new ja(t,"POST",function xe(Ct,Qt){const Cn=w0(Ct,["active","final"]),ri=_.current+P,ao=r.size();let lw;return lw="final"===Cn?Ul(e,u)(Ct,Qt):null,new hv(ri,ao,"final"===Cn,lw)},e.maxUploadRetryTime);return Qe.headers=de,Qe.body=Se.uploadData(),Qe.progressCallback=g||null,Qe.errorHandler=hh(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(c,na,s,u,!1);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=MD(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,na,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function I0(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let Qe="";for(let Ct=0;Ct<2;Ct++)Qe+=Math.random().toString().slice(2);return Qe}();c["Content-Type"]="multipart/related; boundary="+_;const D=vR(e,r,s),P=RD(D,t),J=ta.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+P+"\r\n--"+_+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===J)throw XS();const de={name:D.fullPath},Se=Vl(u,n.host,n._protocol),ht=n.maxUploadRetryTime,mt=new ja(Se,"POST",Ul(n,t),ht);return mt.urlParams=de,mt.headers=c,mt.body=J.uploadData(),mt.errorHandler=hh(e),mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,na,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=d0(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=T0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new fv(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(T0(this._state)){case oo.SUCCESS:mp(this._resolve.bind(null,this.snapshot))();break;case oo.CANCELED:case oo.ERROR:mp(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(T0(this._state)){case oo.RUNNING:case oo.PAUSED:e.next&&mp(e.next.bind(e,this.snapshot))();break;case oo.SUCCESS:e.complete&&mp(e.complete.bind(e))();break;default:e.error&&mp(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ou{constructor(e,t){this._service=e,this._location=t instanceof Ei?t:Ei.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ou(e,t)}get root(){const e=new Ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y0(this._location.path)}get storage(){return this._service}get parent(){const e=function fR(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ei(this._location.bucket,e);return new Ou(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw yD(e)}}function LD(n,e,t){return b0.apply(this,arguments)}function b0(){return b0=(0,Pe.Z)(function*(n,e,t){const s=yield S0(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield LD(n,e,s.nextPageToken))}),b0.apply(this,arguments)}function S0(n,e){null!=e&&"number"==typeof e.maxResults&&f0("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Rx(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,na)}function AR(n){n._throwIfRoot("getDownloadURL");const e=function _R(n,e,t){const s=Vl(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new ja(s,"GET",function xD(n,e){return function t(r,s){const u=bD(n,s,e);return Ha(null!==u),function SD(n,e,t,r){const s=Sm(e);if(null===s||!sv(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(D=>{const k=n.fullPath;return Vl("/b/"+c(n.bucket)+"/o/"+c(k),t,r)+vD({alt:"media",token:D})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return g.errorHandler=Rm(e),g}(n.storage,n._location,gp());return n.storage.makeRequestWithTokens(e,na).then(t=>{if(null===t)throw function eR(){return new ti(Hr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function R0(n,e){const t=function bx(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ei(n._location.bucket,t);return new Ou(n.storage,r)}function x0(n,e){if(n instanceof BD){const t=n;if(null==t._bucket)throw function JS(){return new ti(Hr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dD+"' property when initializing the app?")}();const r=new Ou(t,t._bucket);return null!=e?x0(r,e):r}return void 0!==e?R0(n,e):n}function M0(n,e){if(e&&function P0(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BD)return function Fx(n,e){return new Ou(n,e)}(n,e);throw fp("To use ref(service, url), the first argument must be a Storage instance.")}return x0(n,e)}function UD(n,e){const t=e?.[dD];return null==t?null:Ei.makeFromBucketSpec(t,n)}class BD{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=cD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?Ei.makeFromBucketSpec(s,this._host):UD(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ei.makeFromBucketSpec(this._url,e):UD(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){f0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){f0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ou(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new iv(_D());{const c=function p0(n,e,t,r,s,u,c=!0){const g=vD(n.urlParams),_=n.url+g,D=Object.assign({},n.headers);return function lR(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function aR(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function uR(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function ID(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new oR(_,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Pe.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const RR="@firebase/storage";function O0(n,e){return M0(n=(0,q.m9)(n),e)}function qD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new BD(t,r,s,e,Kr.SDK_VERSION)}!function ZD(){(0,Kr._registerComponent)(new Ht.wA("storage",qD,"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(RR,"0.11.2",""),(0,Kr.registerVersion)(RR,"0.11.2","esm2017")}();class k0{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class KD{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new k0(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new k0(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new k0(c,this,this._ref)):{next:t.next?c=>t.next(new k0(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class NR{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Bl(e,this._service))}get items(){return this._delegate.items.map(e=>new Bl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function WD(n,e){return R0(n,e)}(this._delegate,e);return new Bl(t,this.storage)}get root(){return new Bl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Bl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new KD(function $D(n,e,t){return function kD(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new pv(n,new ta(e),t)}(n=(0,q.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ea.RAW,r){this._throwIfRoot("putString");const s=uv(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new KD(new pv(this._delegate,new ta(s.data,!0),u),this)}listAll(){return function Bx(n){return function DR(n){const e={prefixes:[],items:[]};return LD(n,e).then(()=>e)}(n=(0,q.m9)(n))}(this._delegate).then(e=>new NR(e,this.storage))}list(e){return function zD(n,e){return S0(n=(0,q.m9)(n),e)}(this._delegate,e||void 0).then(t=>new NR(t,this.storage))}getMetadata(){return function xR(n){return function FD(n){n._throwIfRoot("getMetadata");const e=MD(n.storage,n._location,gp());return n.storage.makeRequestWithTokens(e,na)}(n=(0,q.m9)(n))}(this._delegate)}updateMetadata(e){return function GD(n,e){return function VD(n,e){n._throwIfRoot("updateMetadata");const t=function yR(n,e,t,r){const u=Vl(e.fullServerUrl(),n.host,n._protocol),g=RD(t,r),D=n.maxOperationRetryTime,P=new ja(u,"PATCH",Ul(n,r),D);return P.headers={"Content-Type":"application/json; charset=utf-8"},P.body=g,P.errorHandler=Rm(e),P}(n.storage,n._location,e,gp());return n.storage.makeRequestWithTokens(t,na)}(n=(0,q.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function MR(n){return AR(n=(0,q.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function N0(n){return function bR(n){n._throwIfRoot("deleteObject");const e=function Px(n,e){const r=Vl(e.fullServerUrl(),n.host,n._protocol),g=new ja(r,"DELETE",function c(_,D){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=Rm(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,na)}(n=(0,q.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw yD(e)}}class OR{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(kR(e))throw fp("ref() expected a child path but got a URL, use refFromURL instead.");return new Bl(O0(this._delegate,e),this)}refFromURL(e){if(!kR(e))throw fp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ei.makeFromUrl(e,this._delegate.host)}catch{throw fp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bl(O0(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Pm(n,e,t,r={}){!function SR(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,q.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function kR(n){return/^[A-Za-z]+:\/\//.test(n)}function zx(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new OR(t,r)}function VR(n){const e=function qx(n){return new ae.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function lD(n,e=po){return(0,Xn.e)((t,r)=>{let s=null,u=null,c=null;const g=()=>{if(s){s.unsubscribe(),s=null;const D=u;u=null,r.next(D)}};function _(){const D=c+n,P=e.now();if(P<D)return s=this.schedule(void 0,D-P),void r.add(s);g()}t.subscribe((0,De.x)(r,D=>{u=D,c=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{g(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Oe.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gv(n){return{getDownloadURL:()=>(0,yn.of)(void 0).pipe(Fe,(0,Us.w)(()=>n.getDownloadURL()),Mt),getMetadata:()=>(0,yn.of)(void 0).pipe(Fe,(0,Us.w)(()=>n.getMetadata()),Mt),delete:()=>(0,oe.D)(n.delete()),child:e=>gv(n.child(e)),updateMetadata:e=>(0,oe.D)(n.updateMetadata(e)),put:(e,t)=>VR(n.put(e,t)),putString:(e,t,r)=>VR(n.putString(e,t,r)),list:e=>(0,oe.D)(n.list(e)),listAll:()=>(0,oe.D)(n.listAll())}}!function Wx(n){const e={TaskState:oo,TaskEvent:Ox,StringFormat:ea,Storage:OR,Reference:Bl};n.INTERNAL.registerComponent(new Ht.wA("storage-compat",zx,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(pn.Z);const Zx=new m.OlP("angularfire2.storageBucket"),Kx=new m.OlP("angularfire2.storage.maxUploadRetryTime"),Yx=new m.OlP("angularfire2.storage.maxOperationRetryTime"),Qx=new m.OlP("angularfire2.storage.use-emulator");let Jx=(()=>{class n{storage;constructor(t,r,s,u,c,g,_,D,P,k){const G=Ci(t,c,r);this.storage=ya(`${G.name}.storage.${s}`,"AngularFireStorage",G.name,()=>{const J=c.runOutsideAngular(()=>G.storage(s||void 0)),de=P;return de&&J.useEmulator(...de),_&&J.setMaxUploadRetryTime(_),D&&J.setMaxOperationRetryTime(D),J},[_,D])}ref(t){return gv(this.storage.ref(t))}refFromURL(t){return gv(this.storage.refFromURL(t))}upload(t,r,s){return gv(this.storage.ref(t)).put(r,s)}static \u0275fac=function(r){return new(r||n)(m.LFG(Vi),m.LFG(hr,8),m.LFG(Zx,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(x),m.LFG(Kx,8),m.LFG(Yx,8),m.LFG(Qx,8),m.LFG(Qu,8))};static \u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),eM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=m.oAB({type:n});static \u0275inj=m.cJS({})}return n})(),i=(()=>{class n{constructor(){pn.Z.registerVersion("angularfire",ma.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=m.oAB({type:n});static \u0275inj=m.cJS({providers:[Jx],imports:[eM]})}return n})();var o=B(2737),a=B(2420);const p="@firebase/database",y="1.0.1";let w="";function S(n){w=n}class O{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,q.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class U{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Z=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new O(e)}}catch{}return new U},re=Z("localStorage"),le=Z("sessionStorage"),Ne=new Bi.Yd("@firebase/database"),Ye=function(){let n=1;return function(){return n++}}(),dt=function(n){const e=(0,q.dS)(n),t=new q.gQ;t.update(e);const r=t.digest();return q.US.encodeByteArray(r)},St=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=St.apply(null,r):e+="object"==typeof r?(0,q.Wl)(r):r,e+=" "}return e};let $e=null,qt=!0;const dn=function(n,e){(0,q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ne.logLevel=Bi.in.VERBOSE,$e=Ne.log.bind(Ne),e&&le.set("logging_enabled",!0)):"function"==typeof n?$e=n:($e=null,le.remove("logging_enabled"))},Yt=function(...n){if(!0===qt&&(qt=!1,null===$e&&!0===le.get("logging_enabled")&&dn(!0)),$e){const e=St.apply(null,n);$e(e)}},Hi=function(n){return function(...e){Yt(n,...e)}},$a=function(...n){const e="FIREBASE INTERNAL ERROR: "+St(...n);Ne.error(e)},zs=function(...n){const e=`FIREBASE FATAL ERROR: ${St(...n)}`;throw Ne.error(e),new Error(e)},$i=function(...n){const e="FIREBASE WARNING: "+St(...n);Ne.warn(e)},mv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_p="[MIN_NAME]",ph="[MAX_NAME]",xm=function(n,e){if(n===e)return 0;if(n===_p||e===ph)return-1;if(e===_p||n===ph)return 1;{const t=rM(n),r=rM(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},mO=function(n,e){return n===e?0:n<e?-1:1},L0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,q.Wl)(e))},BR=function(n){if("object"!=typeof n||null===n)return(0,q.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,q.Wl)(e[r]),t+=":",t+=BR(n[e[r]]);return t+="}",t},tM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)r.push(n.substring(s,s+e>t?t:s+e));return r};function bs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const nM=function(n){(0,q.hu)(!mv(n),"Invalid JSON number");const r=1023;let s,u,c,g,_;0===n?(u=0,c=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=g+r,c=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const D=[];for(_=52;_;_-=1)D.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)D.push(u%2?1:0),u=Math.floor(u/2);D.push(s?1:0),D.reverse();const P=D.join("");let k="";for(_=0;_<64;_+=8){let G=parseInt(P.substr(_,8),2).toString(16);1===G.length&&(G="0"+G),k+=G}return k.toLowerCase()},EO=new RegExp("^-?(0*)\\d{1,10}$"),rM=function(n){if(EO.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},_v=function(n){try{n()}catch(e){setTimeout(()=>{throw $i("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class CO{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$i(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class DO{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$i(e)}}let V0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const uM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dM="websocket",hM="long_polling";class HR{constructor(e,t,r,s,u=!1,c="",g=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=g,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=re.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&re.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function fM(n,e,t){let r;if((0,q.hu)("string"==typeof e,"typeof type must == string"),(0,q.hu)("object"==typeof t,"typeof params must == object"),e===dM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==hM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function AO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return bs(t,(u,c)=>{s.push(u+"="+c)}),r+s.join("&")}class bO{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,q.p$)(this.counters_)}}const $R={},GR={};function zR(n){const e=n.toString();return $R[e]||($R[e]=new bO),$R[e]}class RO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&_v(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yp{constructor(e,t,r,s,u,c,g){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.transportSessionId=c,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hi(e),this.stats_=zR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),fM(t,hM,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new RO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new WR((...u)=>{const[c,g,_,D,P]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=g,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,g]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,g)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&uM.test(location.hostname)&&(r.r="f");const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yp.forceAllow_=!0}static forceDisallow(){yp.forceDisallow_=!0}static isAvailable(){return!((0,q.Yr)()||!yp.forceAllow_&&(yp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,q.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,q.h$)(t),s=tM(r,1840);for(let u=0;u<s.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,q.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class WR{constructor(e,t,r,s){if(this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ye(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=WR.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(g){Yt("frame writing exception"),g.stack&&Yt(g.stack),Yt(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Yt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+s+"="+c.seg+"&ts"+s+"="+c.ts+"&d"+s+"="+c.d,s++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),r()})}addTag(e,t){(0,q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||"loaded"===s||"complete"===s)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Yt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let QD=null;typeof MozWebSocket<"u"?QD=MozWebSocket:typeof WebSocket<"u"&&(QD=WebSocket);let yv=(()=>{class n{constructor(t,r,s,u,c,g,_){this.connId=t,this.applicationId=s,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hi(this.connId),this.stats_=zR(r),this.connURL=n.connectionURL_(r,g,_,u,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,s,u,c){const g={v:"5"};return!(0,q.Yr)()&&typeof location<"u"&&location.hostname&&uM.test(location.hostname)&&(g.r="f"),r&&(g.s=r),s&&(g.ls=s),u&&(g.ac=u),c&&(g.p=c),fM(t,dM,g)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,re.set("previous_websocket_failure",!0);try{let s;if((0,q.Yr)()){s={headers:{"User-Agent":`Firebase/5/${w}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,g=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;g&&(s.proxy={origin:g})}this.mySock=new QD(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const u=s.message||s.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==QD&&!n.forceDisallow_}static previouslyFailed(){return re.isInMemoryStorage||!0===re.get("previous_websocket_failure")}markConnectionHealthy(){re.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=(0,q.cI)(r);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const r=(0,q.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=tM(r,16384);s.length>1&&this.sendString_(String(s.length));for(let u=0;u<s.length;u++)this.sendString_(s[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),EM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yp,yv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=yv&&yv.isAvailable();let s=r&&!yv.previouslyFailed();if(t.webSocketOnly&&(r||$i("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[yv];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class bM{constructor(e,t,r,s,u,c,g,_,D,P){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=u,this.onMessage_=c,this.onReady_=g,this.onDisconnect_=_,this.onKill_=D,this.lastSessionId=P,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hi("c:"+this.id+":"),this.transportManager_=new EM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=F0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=L0("t",e);if("d"in e){const r=e.d;if("h"===t){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?$a("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$a("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&$i("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),F0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(re.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class SM{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class RM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let u=0;u<s.length;u++)if(s[u].callback===t&&(!r||r===s[u].context))return void s.splice(u,1)}validateEventType_(e){(0,q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class JD extends RM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new JD}getInitialEvent(e){return(0,q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class or{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zn(){return new or("")}function wn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function vp(n){return n.pieces_.length-n.pieceNum_}function br(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new or(n.pieces_,e)}function ZR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function U0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function MM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new or(e,0)}function ni(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof or)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new or(t,0)}function Tn(n){return n.pieceNum_>=n.pieces_.length}function Do(n,e){const t=wn(n),r=wn(e);if(null===t)return e;if(t===r)return Do(br(n),br(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function QO(n,e){const t=U0(n,0),r=U0(e,0);for(let s=0;s<t.length&&s<r.length;s++){const u=xm(t[s],r[s]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function KR(n,e){if(vp(n)!==vp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ku(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(vp(n)>vp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class JO{constructor(e,t){this.errorPrefix_=t,this.parts_=U0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,q.ug)(this.parts_[r]);NM(this)}}function NM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mm(n))}function Mm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class YR extends RM{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new YR}getInitialEvent(e){return(0,q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const B0=1e3;let eA,Nm=(()=>{class n extends SM{constructor(t,r,s,u,c,g,_,D){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=g,this.appCheckTokenProvider_=_,this.authOverride_=D,this.id=n.nextPersistentConnectionId_++,this.log_=Hi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=B0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,D&&!(0,q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");YR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&JD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,s){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,q.Wl)(c)),(0,q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[u]=s)}get(t){this.initConnection_();const r=new q.BH,u={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:g=>{const _=g.d;"ok"===g.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(u),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,s,u){this.initConnection_();const c=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+c),this.listens.has(g)||this.listens.set(g,new Map),(0,q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,q.hu)(!this.listens.get(g).has(c),"listen() called twice for same path/queryId.");const _={onComplete:u,hashFn:r,query:t,tag:s};this.listens.get(g).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(t){const r=t.query,s=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+s+" for "+u);const c={p:s};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const D=_.d,P=_.s;n.warnOnListenWarnings_(D,r),(this.listens.get(s)&&this.listens.get(s).get(u))===t&&(this.log_("listen response",_),"ok"!==P&&this.removeListen_(s,u),t.onComplete&&t.onComplete(P,D))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,q.r3)(t,"w")){const s=(0,q.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();$i(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,q.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(r,s,u=>{const c=u.s,g=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,s=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(t,r){const s=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+u),(0,q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,u)&&this.connected_&&this.sendUnlisten_(s,u,t._queryObject,r)}sendUnlisten_(t,r,s,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=s,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:s})}onDisconnectMerge(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:s})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,s,u){const c={p:r,d:s};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,g=>{u&&setTimeout(()=>{u(g.s,g.d)},Math.floor(0))})}put(t,r,s,u){this.putInternal("p",t,r,s,u)}merge(t,r,s,u){this.putInternal("m",t,r,s,u)}putInternal(t,r,s,u,c){this.initConnection_();const g={p:r,d:s};void 0!==c&&(g.h=c),this.outstandingPuts_.push({action:t,request:g,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,s,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,q.Wl)(t));const r=t.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):$a("Unrecognized action received from server: "+(0,q.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=B0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=B0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=B0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Pe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let _=!1,D=null;const P=function(){D?D.close():(_=!0,u())};t.realtime_={close:P,sendRequest:function(J){(0,q.hu)(D,"sendRequest call when we're not connected not allowed."),D.sendRequest(J)}};const G=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[J,de]=yield Promise.all([t.authTokenProvider_.getToken(G),t.appCheckTokenProvider_.getToken(G)]);_?Yt("getToken() completed but was canceled"):(Yt("getToken() completed. Creating connection."),t.authToken_=J&&J.accessToken,t.appCheckToken_=de&&de.token,D=new bM(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,s,u,Se=>{$i(Se+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(J){t.log_("Failed to get token: "+J),_||(t.repoInfo_.nodeAdmin&&$i(J),P())}}})()}interrupt(t){Yt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Yt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=B0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let s;s=r?r.map(c=>BR(c)).join("$"):"default";const u=this.removeListen_(t,s);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const s=new or(t).toString();let u;if(this.listens.has(s)){const c=this.listens.get(s);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(s)}else u=void 0;return u}onAuthRevoked_(t,r){Yt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Yt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+w.replace(/\./g,"-")]=1,(0,q.uI)()?t["framework.cordova"]=1:(0,q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=JD.getInstance().currentlyOnline();return(0,q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Sn(e,t)}}class XD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Sn(_p,e),s=new Sn(_p,t);return 0!==this.compare(r,s)}minPost(){return Sn.MIN}}class LM extends XD{static get __EMPTY_NODE(){return eA}static set __EMPTY_NODE(e){eA=e}compare(e,t){return xm(e.name,t.name)}isDefinedOn(e){throw(0,q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Sn.MIN}maxPost(){return new Sn(ph,eA)}makePost(e,t){return(0,q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Sn(e,eA)}toString(){return".key"}}const Kc=new LM;class tA{constructor(e,t,r,s,u=null){this.isReverse_=s,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,s&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let JR,jl=(()=>{class n{constructor(t,r,s,u,c){this.key=t,this.value=r,this.color=s??n.RED,this.left=u??ra.EMPTY_NODE,this.right=c??ra.EMPTY_NODE}copy(t,r,s,u,c){return new n(t??this.key,r??this.value,s??this.color,u??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let u=this;const c=s(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,s),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,s)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return ra.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let s,u;if(s=this,r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===r(t,s.key)){if(s.right.isEmpty())return ra.EMPTY_NODE;u=s.right.min_(),s=s.copy(u.key,u.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ra{constructor(e,t=ra.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ra(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,jl.BLACK,null,null))}remove(e){return new ra(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(s=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tA(this.root_,null,this.comparator_,!0,e)}}function o1(n,e){return xm(n.name,e.name)}function QR(n,e){return xm(n,e)}ra.EMPTY_NODE=new class s1{copy(e,t,r,s,u){return this}insert(e,t,r){return new jl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const FM=function(n){return"number"==typeof n?"number:"+nM(n):"string:"+n},VM=function(n){if(n.isLeafNode()){const e=n.val();(0,q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,q.hu)(n===JR||n.isEmpty(),"priority of unexpected type.");(0,q.hu)(n===JR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let UM,BM,jM,vv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),VM(this.priorityNode_)}static set __childrenNodeConstructor(t){UM=t}static get __childrenNodeConstructor(){return UM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Tn(t)?this:".priority"===wn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const s=wn(t);return null===s?r:r.isEmpty()&&".priority"!==s?this:((0,q.hu)(".priority"!==s||1===vp(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(br(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+FM(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?nM(this.value_):this.value_,this.lazyHash_=dt(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,s=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(s);return(0,q.hu)(u>=0,"Unknown leaf type: "+r),(0,q.hu)(c>=0,"Unknown leaf type: "+s),u===c?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Mr=new class c1 extends XD{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),u=r.compareTo(s);return 0===u?xm(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Sn.MIN}maxPost(){return new Sn(ph,new vv("[PRIORITY-POST]",jM))}makePost(e,t){const r=BM(e);return new Sn(t,new vv("[PRIORITY-POST]",r))}toString(){return".priority"}},d1=Math.log(2);class h1{constructor(e){this.count=parseInt(Math.log(e+1)/d1,10),this.current_=this.count-1;const s=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nA=function(n,e,t,r){n.sort(e);const s=function(_,D){const P=D-_;let k,G;if(0===P)return null;if(1===P)return k=n[_],G=t?t(k):k,new jl(G,k.node,jl.BLACK,null,null);{const J=parseInt(P/2,10)+_,de=s(_,J),Se=s(J+1,D);return k=n[J],G=t?t(k):k,new jl(G,k.node,jl.BLACK,de,Se)}},g=function(_){let D=null,P=null,k=n.length;const G=function(de,Se){const xe=k-de,ht=k;k-=de;const mt=s(xe+1,ht),Qe=n[xe],Ct=t?t(Qe):Qe;J(new jl(Ct,Qe.node,Se,null,mt))},J=function(de){D?(D.left=de,D=de):(P=de,D=de)};for(let de=0;de<_.count;++de){const Se=_.nextBitIsOne(),xe=Math.pow(2,_.count-(de+1));Se?G(xe,jl.BLACK):(G(xe,jl.BLACK),G(xe,jl.RED))}return P}(new h1(n.length));return new ra(r||e,g)};let XR;const Ev={};class gh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,q.hu)(Ev&&Mr,"ChildrenNode.ts has not been loaded"),XR=XR||new gh({".priority":Ev},{".priority":Mr}),XR}get(e){const t=(0,q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ra?t:null}hasIndex(e){return(0,q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,q.hu)(e!==Kc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const u=t.getIterator(Sn.Wrap);let g,c=u.getNext();for(;c;)s=s||e.isDefinedOn(c.node),r.push(c),c=u.getNext();g=s?nA(r,e.getCompare()):Ev;const _=e.toString(),D=Object.assign({},this.indexSet_);D[_]=e;const P=Object.assign({},this.indexes_);return P[_]=g,new gh(P,D)}addToIndexes(e,t){const r=(0,q.UI)(this.indexes_,(s,u)=>{const c=(0,q.DV)(this.indexSet_,u);if((0,q.hu)(c,"Missing index implementation for "+u),s===Ev){if(c.isDefinedOn(e.node)){const g=[],_=t.getIterator(Sn.Wrap);let D=_.getNext();for(;D;)D.name!==e.name&&g.push(D),D=_.getNext();return g.push(e),nA(g,c.getCompare())}return Ev}{const g=t.get(e.name);let _=s;return g&&(_=_.remove(new Sn(e.name,g))),_.insert(e,e.node)}});return new gh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,q.UI)(this.indexes_,s=>{if(s===Ev)return s;{const u=t.get(e.name);return u?s.remove(new Sn(e.name,u)):s}});return new gh(r,this.indexSet_)}}let j0,hn=(()=>{class n{constructor(t,r,s){this.children_=t,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&VM(this.priorityNode_),this.children_.isEmpty()&&(0,q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return j0||(j0=new n(new ra(QR),null,gh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||j0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?j0:r}}getChild(t){const r=wn(t);return null===r?this:this.getImmediateChild(r).getChild(br(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,q.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const s=new Sn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(s,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(s,this.children_));const g=u.isEmpty()?j0:this.priorityNode_;return new n(u,g,c)}}updateChild(t,r){const s=wn(t);if(null===s)return r;{(0,q.hu)(".priority"!==wn(t)||1===vp(t),".priority must be the last token in a path");const u=this.getImmediateChild(s).updateChild(br(t),r);return this.updateImmediateChild(s,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let s=0,u=0,c=!0;if(this.forEachChild(Mr,(g,_)=>{r[g]=_.val(t),s++,c&&n.INTEGER_REGEXP_.test(g)?u=Math.max(u,Number(g)):c=!1}),!t&&c&&u<2*s){const g=[];for(const _ in r)g[_]=r[_];return g}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+FM(this.getPriority().val())+":"),this.forEachChild(Mr,(r,s)=>{const u=s.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":dt(t)}return this.lazyHash_}getPredecessorChildName(t,r,s){const u=this.resolveIndex_(s);if(u){const c=u.getPredecessorKey(new Sn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Sn(r,this.children_.get(r)):null}forEachChild(t,r){const s=this.resolveIndex_(t);return s?s.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Sn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Sn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===H0?-1:0}withIndex(t){if(t===Kc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Kc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const s=this.getIterator(Mr),u=r.getIterator(Mr);let c=s.getNext(),g=u.getNext();for(;c&&g;){if(c.name!==g.name||!c.node.equals(g.node))return!1;c=s.getNext(),g=u.getNext()}return null===c&&null===g}return!1}return!1}}resolveIndex_(t){return t===Kc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const H0=new class f1 extends hn{constructor(){super(new ra(QR),hn.EMPTY_NODE,gh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return hn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Sn,{MIN:{value:new Sn(_p,hn.EMPTY_NODE)},MAX:{value:new Sn(ph,H0)}}),LM.__EMPTY_NODE=hn.EMPTY_NODE,vv.__childrenNodeConstructor=hn,function a1(n){JR=n}(H0),function l1(n){jM=n}(H0);const p1=!0;function hi(n,e=null){if(null===n)return hn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new vv(n,hi(e));if(n instanceof Array||!p1){let t=hn.EMPTY_NODE;return bs(n,(r,s)=>{if((0,q.r3)(n,r)&&"."!==r.substring(0,1)){const u=hi(s);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(hi(e))}{const t=[];let r=!1;if(bs(n,(c,g)=>{if("."!==c.substring(0,1)){const _=hi(g);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Sn(c,_)))}}),0===t.length)return hn.EMPTY_NODE;const u=nA(t,o1,c=>c.name,QR);if(r){const c=nA(t,Mr.getCompare());return new hn(u,hi(e),new gh({".priority":c},{".priority":Mr}))}return new hn(u,hi(e),gh.Default)}}!function u1(n){BM=n}(hi);class eP extends XD{constructor(e){super(),this.indexPath_=e,(0,q.hu)(!Tn(e)&&".priority"!==wn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),u=r.compareTo(s);return 0===u?xm(e.name,t.name):u}makePost(e,t){const r=hi(e),s=hn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Sn(t,s)}maxPost(){const e=hn.EMPTY_NODE.updateChild(this.indexPath_,H0);return new Sn(ph,e)}toString(){return U0(this.indexPath_,0).join("/")}}const tP=new class g1 extends XD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?xm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Sn.MIN}maxPost(){return Sn.MAX}makePost(e,t){const r=hi(e);return new Sn(t,r)}toString(){return".value"}};function HM(n){return{type:"value",snapshotNode:n}}function Iv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function G0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class nP{constructor(e){this.index_=e}updateChild(e,t,r,s,u,c){(0,q.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(t);return g.getChild(s).equals(r.getChild(s))&&g.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange($0(t,g)):(0,q.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?c.trackChildChange(Iv(t,r)):c.trackChildChange(G0(t,r,g))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Mr,(s,u)=>{t.hasChild(s)||r.trackChildChange($0(s,u))}),t.isLeafNode()||t.forEachChild(Mr,(s,u)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(u)||r.trackChildChange(G0(s,u,c))}else r.trackChildChange(Iv(s,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?hn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class z0{constructor(e){this.indexedFilter_=new nP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=z0.getStartPost_(e),this.endPost_=z0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,s,u,c){return this.matches(new Sn(t,r))||(r=hn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=hn.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(hn.EMPTY_NODE);const u=this;return t.forEachChild(Mr,(c,g)=>{u.matches(new Sn(c,g))||(s=s.updateImmediateChild(c,hn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _1{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new z0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,s,u,c){return this.rangedFilter_.matches(new Sn(t,r))||(r=hn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=hn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;s=hn.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const g=u.getNext();if(this.withinDirectionalStart(g)){if(!this.withinDirectionalEnd(g))break;s=s.updateImmediateChild(g.name,g.node),c++}}}else{let u;s=t.withIndex(this.index_),s=s.updatePriority(hn.EMPTY_NODE),u=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let c=0;for(;u.hasNext();){const g=u.getNext();c<this.limit_&&this.withinDirectionalStart(g)&&this.withinDirectionalEnd(g)?c++:s=s.updateImmediateChild(g.name,hn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,u){let c;if(this.reverse_){const k=this.index_.getCompare();c=(G,J)=>k(J,G)}else c=this.index_.getCompare();const g=e;(0,q.hu)(g.numChildren()===this.limit_,"");const _=new Sn(t,r),D=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),P=this.rangedFilter_.matches(_);if(g.hasChild(t)){const k=g.getImmediateChild(t);let G=s.getChildAfterChild(this.index_,D,this.reverse_);for(;null!=G&&(G.name===t||g.hasChild(G.name));)G=s.getChildAfterChild(this.index_,G,this.reverse_);const J=null==G?1:c(G,_);if(P&&!r.isEmpty()&&J>=0)return u?.trackChildChange(G0(t,r,k)),g.updateImmediateChild(t,r);{u?.trackChildChange($0(t,k));const Se=g.updateImmediateChild(t,hn.EMPTY_NODE);return null!=G&&this.rangedFilter_.matches(G)?(u?.trackChildChange(Iv(G.name,G.node)),Se.updateImmediateChild(G.name,G.node)):Se}}return r.isEmpty()?e:P&&c(D,_)>=0?(null!=u&&(u.trackChildChange($0(D.name,D.node)),u.trackChildChange(Iv(t,r))),g.updateImmediateChild(t,r).updateImmediateChild(D.name,hn.EMPTY_NODE)):e}}class rA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_p}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ph}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mr}copy(){const e=new rA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function iP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function iA(n,e){const t=n.copy();return t.index_=e,t}function $M(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Mr?t="$priority":n.index_===tP?t="$value":n.index_===Kc?t="$key":((0,q.hu)(n.index_ instanceof eP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,q.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,q.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,q.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,q.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,q.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function GM(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Mr&&(e.i=n.index_.toString()),e}class sA extends SM{constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Hi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,s){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=sA.getListenId_(e,r),g={};this.listens_[c]=g;const _=$M(e._queryParams);this.restRequest_(u+".json",_,(D,P)=>{let k=P;if(404===D&&(k=null,D=null),null===D&&this.onDataUpdate_(u,k,!1,r),(0,q.DV)(this.listens_,c)===g){let G;G=D?401===D?"permission_denied":"rest_error:"+D:"ok",s(G,null)}})}unlisten(e,t){const r=sA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=$M(e._queryParams),r=e._path.toString(),s=new q.BH;return this.restRequest_(r+".json",t,(u,c)=>{let g=c;404===u&&(g=null,u=null),null===u?(this.onDataUpdate_(r,g,!1,null),s.resolve(g)):s.reject(new Error(g))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,u])=>{s&&s.accessToken&&(t.auth=s.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,q.xO)(t);this.log_("Sending REST request for "+c);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&4===g.readyState){this.log_("REST Response for "+c+" received. status:",g.status,"response:",g.responseText);let _=null;if(g.status>=200&&g.status<300){try{_=(0,q.cI)(g.responseText)}catch{$i("Failed to parse JSON response for "+c+": "+g.responseText)}r(null,_)}else 401!==g.status&&404!==g.status&&$i("Got unsuccessful REST response for "+c+" Status: "+g.status),r(g.status);r=null}},g.open("GET",c,!0),g.send()})}}class T1{constructor(){this.rootNode_=hn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function oA(){return{value:null,children:new Map}}function wv(n,e,t){if(Tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=wn(e);n.children.has(r)||n.children.set(r,oA()),wv(n.children.get(r),e=br(e),t)}}function sP(n,e){if(Tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Mr,(r,s)=>{wv(n,new or(r),s)}),sP(n,e)}}if(n.children.size>0){const t=wn(e);return e=br(e),n.children.has(t)&&sP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function oP(n,e,t){null!==n.value?t(e,n.value):function C1(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,s)=>{oP(s,new or(e.toString()+"/"+r),t)})}class D1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&bs(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}class S1{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new D1(e);const r=1e4+2e4*Math.random();F0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;bs(e,(s,u)=>{u>0&&(0,q.r3)(this.statsToReport_,s)&&(t[s]=u,r=!0)}),r&&this.server_.reportStats(t),F0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Yc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Yc||{});function lP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Yc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Tn(this.path)){if(null!=this.affectedTree.value)return(0,q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new or(e));return new aA(Zn(),t,this.revert)}}return(0,q.hu)(wn(this.path)===e,"operationForChild called for unrelated child."),new aA(br(this.path),this.affectedTree,this.revert)}}class W0{constructor(e,t){this.source=e,this.path=t,this.type=Yc.LISTEN_COMPLETE}operationForChild(e){return Tn(this.path)?new W0(this.source,Zn()):new W0(this.source,br(this.path))}}class Om{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Yc.OVERWRITE}operationForChild(e){return Tn(this.path)?new Om(this.source,Zn(),this.snap.getImmediateChild(e)):new Om(this.source,br(this.path),this.snap)}}class Tv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Yc.MERGE}operationForChild(e){if(Tn(this.path)){const t=this.children.subtree(new or(e));return t.isEmpty()?null:t.value?new Om(this.source,Zn(),t.value):new Tv(this.source,Zn(),t)}return(0,q.hu)(wn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tv(this.source,br(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ep{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=wn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class R1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function q0(n,e,t,r,s,u){const c=r.filter(g=>g.type===t);c.sort((g,_)=>function M1(n,e,t){if(null==e.childName||null==t.childName)throw(0,q.g5)("Should only compare child_ events.");const r=new Sn(e.childName,e.snapshotNode),s=new Sn(t.childName,t.snapshotNode);return n.index_.compare(r,s)}(n,g,_)),c.forEach(g=>{const _=function x1(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,u);s.forEach(D=>{D.respondsTo(g.type)&&e.push(D.createEvent(_,n.query_))})})}function uA(n,e){return{eventCache:n,serverCache:e}}function Z0(n,e,t,r){return uA(new Ep(e,t,r),n.serverCache)}function WM(n,e,t,r){return uA(n.eventCache,new Ep(e,t,r))}function lA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function km(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let cP;class Nr{constructor(e,t=(()=>(cP||(cP=new ra(mO)),cP))()){this.value=e,this.children=t}static fromObject(e){let t=new Nr(null);return bs(e,(r,s)=>{t=t.set(new or(r),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zn(),value:this.value};if(Tn(e))return null;{const r=wn(e),s=this.children.get(r);if(null!==s){const u=s.findRootMostMatchingPathAndValue(br(e),t);return null!=u?{path:ni(new or(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tn(e))return this;{const t=wn(e),r=this.children.get(t);return null!==r?r.subtree(br(e)):new Nr(null)}}set(e,t){if(Tn(e))return new Nr(t,this.children);{const r=wn(e),u=(this.children.get(r)||new Nr(null)).set(br(e),t),c=this.children.insert(r,u);return new Nr(this.value,c)}}remove(e){if(Tn(e))return this.children.isEmpty()?new Nr(null):new Nr(null,this.children);{const t=wn(e),r=this.children.get(t);if(r){const s=r.remove(br(e));let u;return u=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&u.isEmpty()?new Nr(null):new Nr(this.value,u)}return this}}get(e){if(Tn(e))return this.value;{const t=wn(e),r=this.children.get(t);return r?r.get(br(e)):null}}setTree(e,t){if(Tn(e))return t;{const r=wn(e),u=(this.children.get(r)||new Nr(null)).setTree(br(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Nr(this.value,c)}}fold(e){return this.fold_(Zn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,u)=>{r[s]=u.fold_(ni(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Zn(),t)}findOnPath_(e,t,r){const s=!!this.value&&r(t,this.value);if(s)return s;if(Tn(e))return null;{const u=wn(e),c=this.children.get(u);return c?c.findOnPath_(br(e),ni(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zn(),t)}foreachOnPath_(e,t,r){if(Tn(e))return this;{this.value&&r(t,this.value);const s=wn(e),u=this.children.get(s);return u?u.foreachOnPath_(br(e),ni(t,s),r):new Nr(null)}}foreach(e){this.foreach_(Zn(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(ni(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Hl{constructor(e){this.writeTree_=e}static empty(){return new Hl(new Nr(null))}}function K0(n,e,t){if(Tn(e))return new Hl(new Nr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const s=r.path;let u=r.value;const c=Do(s,e);return u=u.updateChild(c,t),new Hl(n.writeTree_.set(s,u))}{const s=new Nr(t),u=n.writeTree_.setTree(e,s);return new Hl(u)}}}function dP(n,e,t){let r=n;return bs(t,(s,u)=>{r=K0(r,ni(e,s),u)}),r}function qM(n,e){if(Tn(e))return Hl.empty();{const t=n.writeTree_.setTree(e,new Nr(null));return new Hl(t)}}function hP(n,e){return null!=Lm(n,e)}function Lm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Do(t.path,e)):null}function ZM(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Mr,(r,s)=>{e.push(new Sn(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{null!=s.value&&e.push(new Sn(r,s.value))}),e}function Ip(n,e){if(Tn(e))return n;{const t=Lm(n,e);return new Hl(null!=t?new Nr(t):n.writeTree_.subtree(e))}}function fP(n){return n.writeTree_.isEmpty()}function Cv(n,e){return KM(Zn(),n.writeTree_,e)}function KM(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,u)=>{".priority"===s?((0,q.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=KM(ni(n,s),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ni(n,".priority"),r)),t}}function cA(n,e){return eN(e,n)}function V1(n,e){if(n.snap)return ku(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ku(ni(n.path,t),e))return!0;return!1}function B1(n){return n.visible}function YM(n,e,t){let r=Hl.empty();for(let s=0;s<n.length;++s){const u=n[s];if(e(u)){const c=u.path;let g;if(u.snap)ku(t,c)?(g=Do(t,c),r=K0(r,g,u.snap)):ku(c,t)&&(g=Do(c,t),r=K0(r,Zn(),u.snap.getChild(g)));else{if(!u.children)throw(0,q.g5)("WriteRecord should have .snap or .children");if(ku(t,c))g=Do(t,c),r=dP(r,g,u.children);else if(ku(c,t))if(g=Do(c,t),Tn(g))r=dP(r,Zn(),u.children);else{const _=(0,q.DV)(u.children,wn(g));if(_){const D=_.getChild(br(g));r=K0(r,Zn(),D)}}}}}return r}function QM(n,e,t,r,s){if(r||s){const u=Ip(n.visibleWrites,e);return!s&&fP(u)?t:s||null!=t||hP(u,Zn())?Cv(YM(n.allWrites,function(D){return(D.visible||s)&&(!r||!~r.indexOf(D.writeId))&&(ku(D.path,e)||ku(e,D.path))},e),t||hn.EMPTY_NODE):null}{const u=Lm(n.visibleWrites,e);if(null!=u)return u;{const c=Ip(n.visibleWrites,e);return fP(c)?t:null!=t||hP(c,Zn())?Cv(c,t||hn.EMPTY_NODE):null}}}function dA(n,e,t,r){return QM(n.writeTree,n.treePath,e,t,r)}function pP(n,e){return function j1(n,e,t){let r=hn.EMPTY_NODE;const s=Lm(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Mr,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Ip(n.visibleWrites,e);return t.forEachChild(Mr,(c,g)=>{const _=Cv(Ip(u,new or(c)),g);r=r.updateImmediateChild(c,_)}),ZM(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return ZM(Ip(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function JM(n,e,t,r){return function H1(n,e,t,r,s){(0,q.hu)(r||s,"Either existingEventSnap or existingServerSnap must exist");const u=ni(e,t);if(hP(n.visibleWrites,u))return null;{const c=Ip(n.visibleWrites,u);return fP(c)?s.getChild(t):Cv(c,s.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function hA(n,e){return function G1(n,e){return Lm(n.visibleWrites,e)}(n.writeTree,ni(n.treePath,e))}function gP(n,e,t){return function $1(n,e,t,r){const s=ni(e,t),u=Lm(n.visibleWrites,s);return null!=u?u:r.isCompleteForChild(t)?Cv(Ip(n.visibleWrites,s),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function XM(n,e){return eN(ni(n.treePath,e),n.writeTree)}function eN(n,e){return{treePath:n,writeTree:e}}class Z1{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const u=s.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,G0(r,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,$0(r,s.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,Iv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,q.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(r,G0(r,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const tN=new class K1{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class mP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ep(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:km(this.viewCache_),u=function q1(n,e,t,r,s,u){return function z1(n,e,t,r,s,u,c){let g;const _=Ip(n.visibleWrites,e),D=Lm(_,Zn());if(null!=D)g=D;else{if(null==t)return[];g=Cv(_,t)}if(g=g.withIndex(c),g.isEmpty()||g.isLeafNode())return[];{const P=[],k=c.getCompare(),G=u?g.getReverseIteratorFrom(r,c):g.getIteratorFrom(r,c);let J=G.getNext();for(;J&&P.length<s;)0!==k(J,r)&&P.push(J),J=G.getNext();return P}}(n.writeTree,n.treePath,e,t,r,s,u)}(this.writes_,s,t,1,r,e);return 0===u.length?null:u[0]}}function nN(n,e,t,r,s,u){const c=e.eventCache;if(null!=hA(r,t))return e;{let g,_;if(Tn(t))if((0,q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const D=km(e),k=pP(r,D instanceof hn?D:hn.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),k,u)}else{const D=dA(r,km(e));g=n.filter.updateFullNode(e.eventCache.getNode(),D,u)}else{const D=wn(t);if(".priority"===D){(0,q.hu)(1===vp(t),"Can't have a priority with additional path components");const P=c.getNode();_=e.serverCache.getNode();const k=JM(r,t,P,_);g=null!=k?n.filter.updatePriority(P,k):c.getNode()}else{const P=br(t);let k;if(c.isCompleteForChild(D)){_=e.serverCache.getNode();const G=JM(r,t,c.getNode(),_);k=null!=G?c.getNode().getImmediateChild(D).updateChild(P,G):c.getNode().getImmediateChild(D)}else k=gP(r,D,e.serverCache);g=null!=k?n.filter.updateChild(c.getNode(),D,k,P,s,u):c.getNode()}}return Z0(e,g,c.isFullyInitialized()||Tn(t),n.filter.filtersNodes())}}function fA(n,e,t,r,s,u,c,g){const _=e.serverCache;let D;const P=c?n.filter:n.filter.getIndexedFilter();if(Tn(t))D=P.updateFullNode(_.getNode(),r,null);else if(P.filtersNodes()&&!_.isFiltered()){const J=_.getNode().updateChild(t,r);D=P.updateFullNode(_.getNode(),J,null)}else{const J=wn(t);if(!_.isCompleteForPath(t)&&vp(t)>1)return e;const de=br(t),xe=_.getNode().getImmediateChild(J).updateChild(de,r);D=".priority"===J?P.updatePriority(_.getNode(),xe):P.updateChild(_.getNode(),J,xe,de,tN,null)}const k=WM(e,D,_.isFullyInitialized()||Tn(t),P.filtersNodes());return nN(n,k,t,s,new mP(s,k,u),g)}function _P(n,e,t,r,s,u,c){const g=e.eventCache;let _,D;const P=new mP(s,e,u);if(Tn(t))D=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Z0(e,D,!0,n.filter.filtersNodes());else{const k=wn(t);if(".priority"===k)D=n.filter.updatePriority(e.eventCache.getNode(),r),_=Z0(e,D,g.isFullyInitialized(),g.isFiltered());else{const G=br(t),J=g.getNode().getImmediateChild(k);let de;if(Tn(G))de=r;else{const Se=P.getCompleteChild(k);de=null!=Se?".priority"===ZR(G)&&Se.getChild(MM(G)).isEmpty()?Se:Se.updateChild(G,r):hn.EMPTY_NODE}_=J.equals(de)?e:Z0(e,n.filter.updateChild(g.getNode(),k,de,G,P,c),g.isFullyInitialized(),n.filter.filtersNodes())}}return _}function rN(n,e){return n.eventCache.isCompleteForChild(e)}function iN(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function yP(n,e,t,r,s,u,c,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let D,_=e;D=Tn(t)?r:new Nr(null).setTree(t,r);const P=e.serverCache.getNode();return D.children.inorderTraversal((k,G)=>{if(P.hasChild(k)){const de=iN(0,e.serverCache.getNode().getImmediateChild(k),G);_=fA(n,_,new or(k),de,s,u,c,g)}}),D.children.inorderTraversal((k,G)=>{const J=!e.serverCache.isCompleteForChild(k)&&null===G.value;if(!P.hasChild(k)&&!J){const Se=iN(0,e.serverCache.getNode().getImmediateChild(k),G);_=fA(n,_,new or(k),Se,s,u,c,g)}}),_}class ik{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new nP(r.getIndex()),u=function y1(n){return n.loadsAllData()?new nP(n.getIndex()):n.hasLimit()?new _1(n):new z0(n)}(r);this.processor_=function Y1(n){return{filter:n}}(u);const c=t.serverCache,g=t.eventCache,_=s.updateFullNode(hn.EMPTY_NODE,c.getNode(),null),D=u.updateFullNode(hn.EMPTY_NODE,g.getNode(),null),P=new Ep(_,c.isFullyInitialized(),s.filtersNodes()),k=new Ep(D,g.isFullyInitialized(),u.filtersNodes());this.viewCache_=uA(k,P),this.eventGenerator_=new R1(this.query_)}get query(){return this.query_}}function ak(n,e){const t=km(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Tn(e)&&!t.getImmediateChild(wn(e)).isEmpty())?t.getChild(e):null}function sN(n){return 0===n.eventRegistrations_.length}function oN(n,e,t){const r=[];if(t){(0,q.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,s);c&&r.push(c)})}if(e){let s=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(u+1));break}}else s.push(c)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function aN(n,e,t,r){e.type===Yc.MERGE&&null!==e.source.queryId&&((0,q.hu)(km(n.viewCache_),"We should always have a full cache before handling merges"),(0,q.hu)(lA(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,u=function J1(n,e,t,r,s){const u=new Z1;let c,g;if(t.type===Yc.OVERWRITE){const D=t;D.source.fromUser?c=_P(n,e,D.path,D.snap,r,s,u):((0,q.hu)(D.source.fromServer,"Unknown source."),g=D.source.tagged||e.serverCache.isFiltered()&&!Tn(D.path),c=fA(n,e,D.path,D.snap,r,s,g,u))}else if(t.type===Yc.MERGE){const D=t;D.source.fromUser?c=function ek(n,e,t,r,s,u,c){let g=e;return r.foreach((_,D)=>{const P=ni(t,_);rN(e,wn(P))&&(g=_P(n,g,P,D,s,u,c))}),r.foreach((_,D)=>{const P=ni(t,_);rN(e,wn(P))||(g=_P(n,g,P,D,s,u,c))}),g}(n,e,D.path,D.children,r,s,u):((0,q.hu)(D.source.fromServer,"Unknown source."),g=D.source.tagged||e.serverCache.isFiltered(),c=yP(n,e,D.path,D.children,r,s,g,u))}else if(t.type===Yc.ACK_USER_WRITE){const D=t;c=D.revert?function rk(n,e,t,r,s,u){let c;if(null!=hA(r,t))return e;{const g=new mP(r,e,s),_=e.eventCache.getNode();let D;if(Tn(t)||".priority"===wn(t)){let P;if(e.serverCache.isFullyInitialized())P=dA(r,km(e));else{const k=e.serverCache.getNode();(0,q.hu)(k instanceof hn,"serverChildren would be complete if leaf node"),P=pP(r,k)}D=n.filter.updateFullNode(_,P,u)}else{const P=wn(t);let k=gP(r,P,e.serverCache);null==k&&e.serverCache.isCompleteForChild(P)&&(k=_.getImmediateChild(P)),D=null!=k?n.filter.updateChild(_,P,k,br(t),g,u):e.eventCache.getNode().hasChild(P)?n.filter.updateChild(_,P,hn.EMPTY_NODE,br(t),g,u):_,D.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=dA(r,km(e)),c.isLeafNode()&&(D=n.filter.updateFullNode(D,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=hA(r,Zn()),Z0(e,D,c,n.filter.filtersNodes())}}(n,e,D.path,r,s,u):function tk(n,e,t,r,s,u,c){if(null!=hA(s,t))return e;const g=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Tn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return fA(n,e,t,_.getNode().getChild(t),s,u,g,c);if(Tn(t)){let D=new Nr(null);return _.getNode().forEachChild(Kc,(P,k)=>{D=D.set(new or(P),k)}),yP(n,e,t,D,s,u,g,c)}return e}{let D=new Nr(null);return r.foreach((P,k)=>{const G=ni(t,P);_.isCompleteForPath(G)&&(D=D.set(P,_.getNode().getChild(G)))}),yP(n,e,t,D,s,u,g,c)}}(n,e,D.path,D.affectedTree,r,s,u)}else{if(t.type!==Yc.LISTEN_COMPLETE)throw(0,q.g5)("Unknown operation type: "+t.type);c=function nk(n,e,t,r,s){const u=e.serverCache;return nN(n,WM(e,u.getNode(),u.isFullyInitialized()||Tn(t),u.isFiltered()),t,r,tN,s)}(n,e,t.path,r,u)}const _=u.getChanges();return function X1(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=lA(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(HM(lA(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,s,e,t,r);return function Q1(n,e){(0,q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,q.hu)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,uN(n,u.changes,u.viewCache.eventCache.getNode(),null)}function uN(n,e,t,r){return function P1(n,e,t,r){const s=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function m1(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),q0(n,s,"child_removed",e,r,t),q0(n,s,"child_added",e,r,t),q0(n,s,"child_moved",u,r,t),q0(n,s,"child_changed",e,r,t),q0(n,s,"value",e,r,t),s}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let pA,mA;class lN{constructor(){this.views=new Map}}function vP(n,e,t,r){const s=e.source.queryId;if(null!==s){const u=n.views.get(s);return(0,q.hu)(null!=u,"SyncTree gave us an op for an invalid query."),aN(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(aN(c,e,t,r));return u}}function cN(n,e,t,r,s){const c=n.views.get(e._queryIdentifier);if(!c){let g=dA(t,s?r:null),_=!1;g?_=!0:r instanceof hn?(g=pP(t,r),_=!1):(g=hn.EMPTY_NODE,_=!1);const D=uA(new Ep(g,_,!1),new Ep(r,s,!1));return new ik(e,D)}return c}function dN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wp(n,e){let t=null;for(const r of n.views.values())t=t||ak(r,e);return t}function hN(n,e){return e._queryParams.loadsAllData()?gA(n):n.views.get(e._queryIdentifier)}function fN(n,e){return null!=hN(n,e)}function Tp(n){return null!=gA(n)}function gA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _k=1;class pN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nr(null),this.pendingWriteTree_=function W1(){return{visibleWrites:Hl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function EP(n,e,t,r,s){return function O1(n,e,t,r,s){(0,q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=K0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,s),s?Dv(n,new Om({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cp(n,e,t=!1){const r=function L1(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function F1(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);(0,q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,u=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const g=n.allWrites[c];g.visible&&(c>=t&&V1(g,r.path)?s=!1:ku(r.path,g.path)&&(u=!0)),c--}return!!s&&(u?(function U1(n){n.visibleWrites=YM(n.allWrites,B1,Zn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=qM(n.visibleWrites,r.path):bs(r.children,_=>{n.visibleWrites=qM(n.visibleWrites,ni(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let u=new Nr(null);return null!=r.snap?u=u.set(Zn(),!0):bs(r.children,c=>{u=u.set(new or(c),!0)}),Dv(n,new aA(r.path,u,t))}return[]}function Y0(n,e,t){return Dv(n,new Om({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function _A(n,e,t,r,s=!1){const u=e._path,c=n.syncPointTree_.get(u);let g=[];if(c&&("default"===e._queryIdentifier||fN(c,e))){const _=function pk(n,e,t,r){const s=e._queryIdentifier,u=[];let c=[];const g=Tp(n);if("default"===s)for(const[_,D]of n.views.entries())c=c.concat(oN(D,t,r)),sN(D)&&(n.views.delete(_),D.query._queryParams.loadsAllData()||u.push(D.query));else{const _=n.views.get(s);_&&(c=c.concat(oN(_,t,r)),sN(_)&&(n.views.delete(s),_.query._queryParams.loadsAllData()||u.push(_.query)))}return g&&!Tp(n)&&u.push(new(function dk(){return(0,q.hu)(pA,"Reference.ts has not been loaded"),pA}())(e._repo,e._path)),{removed:u,events:c}}(c,e,t,r);(function hk(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(u));const D=_.removed;if(g=_.events,!s){const P=-1!==D.findIndex(G=>G._queryParams.loadsAllData()),k=n.syncPointTree_.findOnPath(u,(G,J)=>Tp(J));if(P&&!k){const G=n.syncPointTree_.subtree(u);if(!G.isEmpty()){const J=function Ck(n){return n.fold((e,t,r)=>{if(t&&Tp(t))return[gA(t)];{let s=[];return t&&(s=dN(t)),bs(r,(u,c)=>{s=s.concat(c)}),s}})}(G);for(let de=0;de<J.length;++de){const Se=J[de],xe=Se.query,ht=yN(n,Se);n.listenProvider_.startListening(J0(xe),Q0(n,xe),ht.hashFn,ht.onComplete)}}}!k&&D.length>0&&!r&&(P?n.listenProvider_.stopListening(J0(e),null):D.forEach(G=>{const J=n.queryToTagMap.get(vA(G));n.listenProvider_.stopListening(J0(G),J)}))}!function Dk(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=vA(r),u=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(u)}}}(n,D)}return g}function gN(n,e,t,r){const s=wP(n,r);if(null!=s){const u=TP(s),c=u.path,g=u.queryId,_=Do(c,e);return CP(n,c,new Om(lP(g),_,t))}return[]}function IP(n,e,t,r=!1){const s=e._path;let u=null,c=!1;n.syncPointTree_.foreachOnPath(s,(G,J)=>{const de=Do(G,s);u=u||wp(J,de),c=c||Tp(J)});let _,g=n.syncPointTree_.get(s);g?(c=c||Tp(g),u=u||wp(g,Zn())):(g=new lN,n.syncPointTree_=n.syncPointTree_.set(s,g)),null!=u?_=!0:(_=!1,u=hn.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((J,de)=>{const Se=wp(de,Zn());Se&&(u=u.updateImmediateChild(J,Se))}));const D=fN(g,e);if(!D&&!e._queryParams.loadsAllData()){const G=vA(e);(0,q.hu)(!n.queryToTagMap.has(G),"View does not exist, but we have a tag");const J=function Ak(){return _k++}();n.queryToTagMap.set(G,J),n.tagToQueryMap.set(J,G)}let k=function fk(n,e,t,r,s,u){const c=cN(n,e,r,s,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function uk(n,e){n.eventRegistrations_.push(e)}(c,t),function lk(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Mr,(u,c)=>{r.push(Iv(u,c))}),t.isFullyInitialized()&&r.push(HM(t.getNode())),uN(n,r,t.getNode(),e)}(c,t)}(g,e,t,cA(n.pendingWriteTree_,s),u,_);if(!D&&!c&&!r){const G=hN(g,e);k=k.concat(function bk(n,e,t){const r=e._path,s=Q0(n,e),u=yN(n,t),c=n.listenProvider_.startListening(J0(e),s,u.hashFn,u.onComplete),g=n.syncPointTree_.subtree(r);if(s)(0,q.hu)(!Tp(g.value),"If we're adding a query, it shouldn't be shadowed");else{const _=g.fold((D,P,k)=>{if(!Tn(D)&&P&&Tp(P))return[gA(P).query];{let G=[];return P&&(G=G.concat(dN(P).map(J=>J.query))),bs(k,(J,de)=>{G=G.concat(de)}),G}});for(let D=0;D<_.length;++D){const P=_[D];n.listenProvider_.stopListening(J0(P),Q0(n,P))}}return c}(n,e,G))}return k}function yA(n,e,t){const s=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,g)=>{const D=wp(g,Do(c,e));if(D)return D});return QM(s,e,u,t,!0)}function Dv(n,e){return mN(e,n.syncPointTree_,null,cA(n.pendingWriteTree_,Zn()))}function mN(n,e,t,r){if(Tn(n.path))return _N(n,e,t,r);{const s=e.get(Zn());null==t&&null!=s&&(t=wp(s,Zn()));let u=[];const c=wn(n.path),g=n.operationForChild(c),_=e.children.get(c);if(_&&g){const D=t?t.getImmediateChild(c):null,P=XM(r,c);u=u.concat(mN(g,_,D,P))}return s&&(u=u.concat(vP(s,n,r,t))),u}}function _N(n,e,t,r){const s=e.get(Zn());null==t&&null!=s&&(t=wp(s,Zn()));let u=[];return e.children.inorderTraversal((c,g)=>{const _=t?t.getImmediateChild(c):null,D=XM(r,c),P=n.operationForChild(c);P&&(u=u.concat(_N(P,g,_,D)))}),s&&(u=u.concat(vP(s,n,r,t))),u}function yN(n,e){const t=e.query,r=Q0(n,t);return{hashFn:()=>(function sk(n){return n.viewCache_.serverCache.getNode()}(e)||hn.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return r?function Ik(n,e,t){const r=wP(n,t);if(r){const s=TP(r),u=s.path,c=s.queryId,g=Do(u,e);return CP(n,u,new W0(lP(c),g))}return[]}(n,t._path,r):function Ek(n,e){return Dv(n,new W0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function vO(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(s,t);return _A(n,t,null,u)}}}}function Q0(n,e){const t=vA(e);return n.queryToTagMap.get(t)}function vA(n){return n._path.toString()+"$"+n._queryIdentifier}function wP(n,e){return n.tagToQueryMap.get(e)}function TP(n){const e=n.indexOf("$");return(0,q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new or(n.substr(0,e))}}function CP(n,e,t){const r=n.syncPointTree_.get(e);return(0,q.hu)(r,"Missing sync point for query tag that we're tracking"),vP(r,t,cA(n.pendingWriteTree_,e),null)}function J0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function mk(){return(0,q.hu)(mA,"Reference.ts has not been loaded"),mA}())(n._repo,n._path):n}class DP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new DP(t)}node(){return this.node_}}class AP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ni(this.path_,e);return new AP(this.syncTree_,t)}node(){return yA(this.syncTree_,this.path_)}}const Sk=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},vN=function(n,e,t){return n&&"object"==typeof n?((0,q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Rk(n[".sv"],e,t):"object"==typeof n[".sv"]?Pk(n[".sv"],e):void(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Rk=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,q.hu)(!1,"Unexpected server value: "+n)},Pk=function(n,e,t){n.hasOwnProperty("increment")||(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,q.hu)(!1,"Unexpected increment value: "+r);const s=e.node();if((0,q.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const c=s.getValue();return"number"!=typeof c?r:c+r},EN=function(n,e,t,r){return SP(e,new AP(t,n),r)},bP=function(n,e,t){return SP(n,new DP(e),t)};function SP(n,e,t){const r=n.getPriority().val(),s=vN(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,g=vN(c.getValue(),e,t);return g!==c.getValue()||s!==c.getPriority().val()?new vv(g,hi(s)):n}{const c=n;return u=c,s!==c.getPriority().val()&&(u=u.updatePriority(new vv(s))),c.forEachChild(Mr,(g,_)=>{const D=SP(_,e.getImmediateChild(g),t);D!==_&&(u=u.updateImmediateChild(g,D))}),u}}class RP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function EA(n,e){let t=e instanceof or?e:new or(e),r=n,s=wn(t);for(;null!==s;){const u=(0,q.DV)(r.node.children,s)||{children:{},childCount:0};r=new RP(s,r,u),t=br(t),s=wn(t)}return r}function Fm(n){return n.node.value}function PP(n,e){n.node.value=e,xP(n)}function IN(n){return n.node.childCount>0}function IA(n,e){bs(n.node.children,(t,r)=>{e(new RP(t,n,r))})}function wN(n,e,t,r){t&&!r&&e(n),IA(n,s=>{wN(s,e,!0,r)}),t&&r&&e(n)}function X0(n){return new or(null===n.parent?n.name:X0(n.parent)+"/"+n.name)}function xP(n){null!==n.parent&&function Nk(n,e,t){const r=function xk(n){return void 0===Fm(n)&&!IN(n)}(t),s=(0,q.r3)(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,xP(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,xP(n))}(n.parent,n.name,n)}const Ok=/[\[\].#$\/\u0000-\u001F\u007F]/,kk=/[\[\].#$\u0000-\u001F\u007F]/,MP=10485760,wA=function(n){return"string"==typeof n&&0!==n.length&&!Ok.test(n)},TN=function(n){return"string"==typeof n&&0!==n.length&&!kk.test(n)},ew=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!mv(n)||n&&"object"==typeof n&&(0,q.r3)(n,".sv")},Qc=function(n,e,t,r){r&&void 0===e||tw((0,q.gK)(n,"value"),e,t)},tw=function(n,e,t){const r=t instanceof or?new JO(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Mm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Mm(r)+" with contents = "+e.toString());if(mv(e))throw new Error(n+"contains "+e.toString()+" "+Mm(r));if("string"==typeof e&&e.length>MP/3&&(0,q.ug)(e)>MP)throw new Error(n+"contains a string greater than "+MP+" utf8 bytes "+Mm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,u=!1;if(bs(e,(c,g)=>{if(".value"===c)s=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!wA(c)))throw new Error(n+" contains an invalid key ("+c+") "+Mm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function XO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,q.ug)(e),NM(n)})(r,c),tw(n,g,r),function e1(n){const e=n.parts_.pop();n.byteLength_-=(0,q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),s&&u)throw new Error(n+' contains ".value" child '+Mm(r)+" in addition to actual children.")}},CN=function(n,e,t,r){if(r&&void 0===e)return;const s=(0,q.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const u=[];bs(e,(c,g)=>{const _=new or(c);if(tw(s,g,ni(t,_)),".priority"===ZR(_)&&!ew(g))throw new Error(s+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=U0(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!wA(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(QO);let s=null;for(t=0;t<e.length;t++){if(r=e[t],null!==s&&ku(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,u)},NP=function(n,e,t){if(!t||void 0!==e){if(mv(e))throw new Error((0,q.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ew(e))throw new Error((0,q.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},nw=function(n,e,t,r){if(!(r&&void 0===t||wA(t)))throw new Error((0,q.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},rw=function(n,e,t,r){if(!(r&&void 0===t||TN(t)))throw new Error((0,q.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vk=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rw(n,e,t,r)},Lu=function(n,e){if(".info"===wn(e))throw new Error(n+" failed = Can't modify data under /.info/")},DN=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!wA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TN(n)}(t))throw new Error((0,q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Uk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function TA(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],u=s.getPath();null!==t&&!KR(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(s)}t&&n.eventLists_.push(t)}function AN(n,e,t){TA(n,t),bN(n,r=>KR(r,e))}function Ga(n,e,t){TA(n,t),bN(n,r=>ku(r,e)||ku(e,r))}function bN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];s&&(e(s.path)?(Bk(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Bk(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$e&&Yt("event: "+t.toString()),_v(r)}}}const SN="repo_interrupt",jk=25;class Hk{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oA(),this.transactionQueueTree_=new RP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RN(n){const t=n.infoData_.getNode(new or(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function iw(n){return Sk({timestamp:RN(n)})}function PN(n,e,t,r,s){n.dataUpdateCount++;const u=new or(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(r){const _=(0,q.UI)(t,D=>hi(D));c=function wk(n,e,t,r){const s=wP(n,r);if(s){const u=TP(s),c=u.path,g=u.queryId,_=Do(c,e),D=Nr.fromObject(t);return CP(n,c,new Tv(lP(g),_,D))}return[]}(n.serverSyncTree_,u,_,s)}else{const _=hi(t);c=gN(n.serverSyncTree_,u,_,s)}else if(r){const _=(0,q.UI)(t,D=>hi(D));c=function vk(n,e,t){const r=Nr.fromObject(t);return Dv(n,new Tv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,_)}else{const _=hi(t);c=Y0(n.serverSyncTree_,u,_)}let g=u;c.length>0&&(g=bv(n,u)),Ga(n.eventQueue_,g,c)}function xN(n,e){OP(n,"connected",e),!1===e&&function qk(n){Av(n,"onDisconnectEvents");const e=iw(n),t=oA();oP(n.onDisconnect_,Zn(),(s,u)=>{const c=EN(s,u,n.serverSyncTree_,e);wv(t,s,c)});let r=[];oP(t,Zn(),(s,u)=>{r=r.concat(Y0(n.serverSyncTree_,s,u));const c=VP(n,s);bv(n,c)}),n.onDisconnect_=oA(),Ga(n.eventQueue_,Zn(),r)}(n)}function OP(n,e,t){const r=new or("/.info/"+e),s=hi(t);n.infoData_.updateSnapshot(r,s);const u=Y0(n.infoSyncTree_,r,s);Ga(n.eventQueue_,r,u)}function CA(n){return n.nextWriteId_++}function kP(n,e,t,r,s){Av(n,"set",{path:e.toString(),value:t,priority:r});const u=iw(n),c=hi(t,r),g=yA(n.serverSyncTree_,e),_=bP(c,g,u),D=CA(n),P=EP(n.serverSyncTree_,e,_,D,!0);TA(n.eventQueue_,P),n.server_.put(e.toString(),c.val(!0),(G,J)=>{const de="ok"===G;de||$i("set at "+e+" failed: "+G);const Se=Cp(n.serverSyncTree_,D,!de);Ga(n.eventQueue_,e,Se),Dp(0,s,G,J)});const k=VP(n,e);bv(n,k),Ga(n.eventQueue_,k,[])}function Zk(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{"ok"===r&&sP(n.onDisconnect_,e),Dp(0,t,r,s)})}function MN(n,e,t,r){const s=hi(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,c)=>{"ok"===u&&wv(n.onDisconnect_,e,s),Dp(0,r,u,c)})}function LP(n,e,t){let r;r=".info"===wn(e._path)?_A(n.infoSyncTree_,e,t):_A(n.serverSyncTree_,e,t),AN(n.eventQueue_,e._path,r)}function NN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(SN)}function Av(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Yt(t,...e)}function Dp(n,e,t,r){e&&_v(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let u=s;r&&(u+=": "+r);const c=new Error(u);c.code=s,e(c)}})}function FP(n,e,t){return yA(n.serverSyncTree_,e,t)||hn.EMPTY_NODE}function DA(n,e=n.transactionQueueTree_){if(e||AA(n,e),Fm(e)){const t=kN(n,e);(0,q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function eL(n,e,t){const r=t.map(D=>D.currentWriteId),s=FP(n,e,r);let u=s;const c=s.hash();for(let D=0;D<t.length;D++){const P=t[D];(0,q.hu)(0===P.status,"tryToSendTransactionQueue_: items in queue should all be run."),P.status=1,P.retryCount++;const k=Do(e,P.path);u=u.updateChild(k,P.currentOutputSnapshotRaw)}const g=u.val(!0),_=e;n.server_.put(_.toString(),g,D=>{Av(n,"transaction put response",{path:_.toString(),status:D});let P=[];if("ok"===D){const k=[];for(let G=0;G<t.length;G++)t[G].status=2,P=P.concat(Cp(n.serverSyncTree_,t[G].currentWriteId)),t[G].onComplete&&k.push(()=>t[G].onComplete(null,!0,t[G].currentOutputSnapshotResolved)),t[G].unwatcher();AA(n,EA(n.transactionQueueTree_,e)),DA(n,n.transactionQueueTree_),Ga(n.eventQueue_,e,P);for(let G=0;G<k.length;G++)_v(k[G])}else{if("datastale"===D)for(let k=0;k<t.length;k++)t[k].status=3===t[k].status?4:0;else{$i("transaction at "+_.toString()+" failed: "+D);for(let k=0;k<t.length;k++)t[k].status=4,t[k].abortReason=D}bv(n,e)}},c)}(n,X0(e),t)}else IN(e)&&IA(e,t=>{DA(n,t)})}function bv(n,e){const t=ON(n,e),r=X0(t);return function tL(n,e,t){if(0===e.length)return;const r=[];let s=[];const c=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const _=e[g],D=Do(t,_.path);let k,P=!1;if((0,q.hu)(null!==D,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)P=!0,k=_.abortReason,s=s.concat(Cp(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=jk)P=!0,k="maxretry",s=s.concat(Cp(n.serverSyncTree_,_.currentWriteId,!0));else{const G=FP(n,_.path,c);_.currentInputSnapshot=G;const J=e[g].update(G.val());if(void 0!==J){tw("transaction failed: Data returned ",J,_.path);let de=hi(J);"object"==typeof J&&null!=J&&(0,q.r3)(J,".priority")||(de=de.updatePriority(G.getPriority()));const xe=_.currentWriteId,ht=iw(n),mt=bP(de,G,ht);_.currentOutputSnapshotRaw=de,_.currentOutputSnapshotResolved=mt,_.currentWriteId=CA(n),c.splice(c.indexOf(xe),1),s=s.concat(EP(n.serverSyncTree_,_.path,mt,_.currentWriteId,_.applyLocally)),s=s.concat(Cp(n.serverSyncTree_,xe,!0))}else P=!0,k="nodata",s=s.concat(Cp(n.serverSyncTree_,_.currentWriteId,!0))}Ga(n.eventQueue_,t,s),s=[],P&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&r.push("nodata"===k?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(k),!1,null)))}AA(n,n.transactionQueueTree_);for(let g=0;g<r.length;g++)_v(r[g]);DA(n,n.transactionQueueTree_)}(n,kN(n,t),r),r}function ON(n,e){let t,r=n.transactionQueueTree_;for(t=wn(e);null!==t&&void 0===Fm(r);)r=EA(r,t),t=wn(e=br(e));return r}function kN(n,e){const t=[];return LN(n,e,t),t.sort((r,s)=>r.order-s.order),t}function LN(n,e,t){const r=Fm(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);IA(e,s=>{LN(n,s,t)})}function AA(n,e){const t=Fm(e);if(t){let r=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[r]=t[s],r++);t.length=r,PP(e,t.length>0?t:void 0)}IA(e,r=>{AA(n,r)})}function VP(n,e){const t=X0(ON(n,e)),r=EA(n.transactionQueueTree_,e);return function Mk(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,s=>{UP(n,s)}),UP(n,r),wN(r,s=>{UP(n,s)}),t}function UP(n,e){const t=Fm(e);if(t){const r=[];let s=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,q.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,q.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(Cp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?PP(e,void 0):t.length=u+1,Ga(n.eventQueue_,X0(e),s);for(let c=0;c<r.length;c++)_v(r[c])}}const BP=function(n,e){const t=iL(n),r=t.namespace;return"firebase.com"===t.domain&&zs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$i("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new HR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new or(t.pathString)}},iL=function(n){let e="",t="",r="",s="",u="",c=!0,g="https",_=443;if("string"==typeof n){let D=n.indexOf("//");D>=0&&(g=n.substring(0,D-1),n=n.substring(D+2));let P=n.indexOf("/");-1===P&&(P=n.length);let k=n.indexOf("?");-1===k&&(k=n.length),e=n.substring(0,Math.min(P,k)),P<k&&(s=function nL(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(P,k)));const G=function rL(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$i(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,k)));D=e.indexOf(":"),D>=0?(c="https"===g||"wss"===g,_=parseInt(e.substring(D+1),10)):D=e.length;const J=e.slice(0,D);if("localhost"===J.toLowerCase())t="localhost";else if(J.split(".").length<=2)t=J;else{const de=e.indexOf(".");r=e.substring(0,de).toLowerCase(),t=e.substring(de+1),u=r}"ns"in G&&(u=G.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:g,pathString:s,namespace:u}},FN="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",sL=function(){let n=0;const e=[];return function(t){const r=t===n;let s;n=t;const u=new Array(8);for(s=7;s>=0;s--)u[s]=FN.charAt(t%64),t=Math.floor(t/64);(0,q.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)c+=FN.charAt(e[s]);return(0,q.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class VN{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,q.Wl)(this.snapshot.exportVal())}}class UN{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class jP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class BN{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new q.BH;return Zk(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Lu("OnDisconnect.remove",this._path);const e=new q.BH;return MN(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Lu("OnDisconnect.set",this._path),Qc("OnDisconnect.set",e,this._path,!1);const t=new q.BH;return MN(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Lu("OnDisconnect.setWithPriority",this._path),Qc("OnDisconnect.setWithPriority",e,this._path,!1),NP("OnDisconnect.setWithPriority",t,!1);const r=new q.BH;return function Kk(n,e,t,r,s){const u=hi(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,g)=>{"ok"===c&&wv(n.onDisconnect_,e,u),Dp(0,s,c,g)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Lu("OnDisconnect.update",this._path),CN("OnDisconnect.update",e,this._path,!1);const t=new q.BH;return function Yk(n,e,t,r){if((0,q.xb)(t))return Yt("onDisconnect().update() called with empty data.  Don't do anything."),void Dp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,u)=>{"ok"===s&&bs(t,(c,g)=>{const _=hi(g);wv(n.onDisconnect_,ni(e,c),_)}),Dp(0,r,s,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ia{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Tn(this._path)?null:ZR(this._path)}get ref(){return new Fu(this._repo,this._path)}get _queryIdentifier(){const e=GM(this._queryParams),t=BR(e);return"{}"===t?"default":t}get _queryObject(){return GM(this._queryParams)}isEqual(e){if(!((e=(0,q.m9)(e))instanceof ia))return!1;const t=this._repo===e._repo,r=KR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function YO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function bA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ap(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Kc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_p)throw new Error(r);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==ph)throw new Error(r);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===Mr){if(null!=e&&!ew(e)||null!=t&&!ew(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,q.hu)(n.getIndex()instanceof eP||n.getIndex()===tP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fu extends ia{constructor(e,t){super(e,t,new rA,!1)}get parent(){const e=MM(this._path);return null===e?null:new Fu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Vm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new or(e),r=Um(this.ref,e);return new Vm(this._node.getChild(t),r,Mr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,s)=>e(new Vm(s,Um(this.ref,r),Mr)))}hasChild(e){const t=new or(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jN(n,e){return(n=(0,q.m9)(n))._checkNotDeleted("ref"),void 0!==e?Um(n._root,e):n._root}function HN(n,e){(n=(0,q.m9)(n))._checkNotDeleted("refFromURL");const t=BP(e,n._repo.repoInfo_.nodeAdmin);DN("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&zs("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),jN(n,t.path.toString())}function Um(n,e){return null===wn((n=(0,q.m9)(n))._path)?Vk("child","path",e,!1):rw("child","path",e,!1),new Fu(n._repo,ni(n._path,e))}function HP(n,e){n=(0,q.m9)(n),Lu("set",n._path),Qc("set",e,n._path,!1);const t=new q.BH;return kP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function cL(n,e){CN("update",e,n._path,!1);const t=new q.BH;return function Wk(n,e,t,r){Av(n,"update",{path:e.toString(),value:t});let s=!0;const u=iw(n),c={};if(bs(t,(g,_)=>{s=!1,c[g]=EN(ni(e,g),hi(_),n.serverSyncTree_,u)}),s)Yt("update() called with empty data.  Don't do anything."),Dp(0,r,"ok",void 0);else{const g=CA(n),_=function yk(n,e,t,r){!function k1(n,e,t,r){(0,q.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=dP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const s=Nr.fromObject(t);return Dv(n,new Tv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,c,g);TA(n.eventQueue_,_),n.server_.merge(e.toString(),t,(D,P)=>{const k="ok"===D;k||$i("update at "+e+" failed: "+D);const G=Cp(n.serverSyncTree_,g,!k),J=G.length>0?bv(n,e):e;Ga(n.eventQueue_,J,G),Dp(0,r,D,P)}),bs(t,D=>{const P=VP(n,ni(e,D));bv(n,P)}),Ga(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function dL(n){n=(0,q.m9)(n);const e=new jP(()=>{}),t=new sw(e);return function zk(n,e,t){const r=function Tk(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(D,P)=>{const k=Do(D,t);r=r||wp(P,k)});let s=n.syncPointTree_.get(t);s?r=r||wp(s,Zn()):(s=new lN,n.syncPointTree_=n.syncPointTree_.set(t,s));const u=null!=r,c=u?new Ep(r,!0,!1):null;return function ok(n){return lA(n.viewCache_)}(cN(s,e,cA(n.pendingWriteTree_,e._path),u?c.getNode():hn.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(s=>{const u=hi(s).withIndex(e._queryParams.getIndex());let c;if(IP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Y0(n.serverSyncTree_,e._path,u);else{const g=Q0(n.serverSyncTree_,e);c=gN(n.serverSyncTree_,e._path,u,g)}return Ga(n.eventQueue_,e._path,c),_A(n.serverSyncTree_,e,t,null,!0),u},s=>(Av(n,"get for query "+(0,q.Wl)(e)+" failed: "+s),Promise.reject(new Error(s))))}(n._repo,n,t).then(r=>new Vm(r,new Fu(n._repo,n._path),n._queryParams.getIndex()))}class sw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new VN("value",this,new Vm(e.snapshotNode,new Fu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UN(this,e,t):null}matches(e){return e instanceof sw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UN(this,e,t):null}createEvent(e,t){(0,q.hu)(null!=e.childName,"Child events should have a childName.");const r=Um(new Fu(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new VN(e.type,this,new Vm(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof RA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ow(n,e,t,r,s){let u;if("object"==typeof r&&(u=void 0,s=r),"function"==typeof r&&(u=r),s&&s.onlyOnce){const _=t,D=(P,k)=>{LP(n._repo,n,g),_(P,k)};D.userCallback=t.userCallback,D.context=t.context,t=D}const c=new jP(t,u||void 0),g="value"===e?new sw(c):new RA(e,c);return function Qk(n,e,t){let r;r=".info"===wn(e._path)?IP(n.infoSyncTree_,e,t):IP(n.serverSyncTree_,e,t),AN(n.eventQueue_,e._path,r)}(n._repo,n,g),()=>LP(n._repo,n,g)}function $P(n,e,t,r){return ow(n,"value",e,t,r)}function $N(n,e,t,r){return ow(n,"child_added",e,t,r)}function GN(n,e,t,r){return ow(n,"child_changed",e,t,r)}function zN(n,e,t,r){return ow(n,"child_moved",e,t,r)}function WN(n,e,t,r){return ow(n,"child_removed",e,t,r)}function qN(n,e,t){let r=null;const s=t?new jP(t):null;"value"===e?r=new sw(s):e&&(r=new RA(e,s)),LP(n._repo,n,r)}class $l{}class ZN extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("endAt",this._value,e._path,!0);const t=iP(e._queryParams,this._value,this._key);if(SA(t),Ap(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ia(e._repo,e._path,t,e._orderByCalled)}}class fL extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("endBefore",this._value,e._path,!1);const t=function w1(n,e,t){let r;return r=iP(n,e,n.index_===Kc||t?t:_p),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(SA(t),Ap(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ia(e._repo,e._path,t,e._orderByCalled)}}class KN extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("startAt",this._value,e._path,!0);const t=rP(e._queryParams,this._value,this._key);if(SA(t),Ap(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ia(e._repo,e._path,t,e._orderByCalled)}}class mL extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Qc("startAfter",this._value,e._path,!1);const t=function I1(n,e,t){let r;return r=rP(n,e,n.index_===Kc||t?t:ph),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SA(t),Ap(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ia(e._repo,e._path,t,e._orderByCalled)}}class yL extends $l{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ia(e._repo,e._path,function v1(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class EL extends $l{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ia(e._repo,e._path,function E1(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class wL extends $l{constructor(e){super(),this._path=e}_apply(e){bA(e,"orderByChild");const t=new or(this._path);if(Tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new eP(t),s=iA(e._queryParams,r);return Ap(s),new ia(e._repo,e._path,s,!0)}}class CL extends $l{_apply(e){bA(e,"orderByKey");const t=iA(e._queryParams,Kc);return Ap(t),new ia(e._repo,e._path,t,!0)}}class AL extends $l{_apply(e){bA(e,"orderByPriority");const t=iA(e._queryParams,Mr);return Ap(t),new ia(e._repo,e._path,t,!0)}}class SL extends $l{_apply(e){bA(e,"orderByValue");const t=iA(e._queryParams,tP);return Ap(t),new ia(e._repo,e._path,t,!0)}}class PL extends $l{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Qc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZN(this._value,this._key)._apply(new KN(this._value,this._key)._apply(e))}}function Gl(n,...e){let t=(0,q.m9)(n);for(const r of e)t=r._apply(t);return t}(function ck(n){(0,q.hu)(!pA,"__referenceConstructor has already been defined"),pA=n})(Fu),function gk(n){(0,q.hu)(!mA,"__referenceConstructor has already been defined"),mA=n}(Fu);const GP={};function zP(n,e,t,r,s){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Yt("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,D,c=BP(u,s),g=c.repoInfo;typeof process<"u"&&process.env&&(D=process.env.FIREBASE_DATABASE_EMULATOR_HOST),D?(_=!0,u=`http://${D}?ns=${g.namespace}`,c=BP(u,s),g=c.repoInfo):_=!c.repoInfo.secure;const P=s&&_?new V0(V0.OWNER):new DO(n.name,n.options,e);DN("Invalid Firebase Database URL",c),Tn(c.path)||zs("Database URL must point to the root of a Firebase Database (not including a child path).");const k=function kL(n,e,t,r){let s=GP[e.name];s||(s={},GP[e.name]=s);let u=s[n.toURLString()];return u&&zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new Hk(n,false,t,r),s[n.toURLString()]=u,u}(g,n,P,new CO(n.name,t));return new FL(k,n)}class FL{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $k(n,e,t){if(n.stats_=zR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sA(n.repoInfo_,(r,s,u,c)=>{PN(n,r,s,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>xN(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,q.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Nm(n.repoInfo_,e,(r,s,u,c)=>{PN(n,r,s,u,c)},r=>{xN(n,r)},r=>{!function Gk(n,e){bs(e,(t,r)=>{OP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function SO(n,e){const t=n.toString();return GR[t]||(GR[t]=e()),GR[t]}(n.repoInfo_,()=>new S1(n.stats_,n.server_)),n.infoData_=new T1,n.infoSyncTree_=new pN({startListening:(r,s,u,c)=>{let g=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(g=Y0(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),g},stopListening:()=>{}}),OP(n,"connected",!1),n.serverSyncTree_=new pN({startListening:(r,s,u,c)=>(n.server_.listen(r,u,s,(g,_)=>{const D=c(g,_);Ga(n.eventQueue_,r._path,D)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fu(this._repo,Zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function OL(n,e){const t=GP[e];(!t||t[n.key]!==n)&&zs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),NN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zs("Cannot call "+e+" on a deleted database.")}}function QN(){EM.IS_TRANSPORT_INITIALIZED&&$i("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function VL(){QN(),yp.forceDisallow()}function UL(){QN(),yv.forceDisallow(),yp.forceAllow()}function HL(n,e){dn(n,e)}const GL={".sv":"timestamp"};class qL{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Nm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Nm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function $L(n){S(Kr.SDK_VERSION),(0,Kr._registerComponent)(new Ht.wA("database",(e,{instanceIdentifier:t})=>zP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(p,y,n),(0,Kr.registerVersion)(p,y,"esm2017")}();const QL=new Bi.Yd("@firebase/database-compat"),XN=function(n){QL.warn("FIREBASE WARNING: "+n)};class eF{constructor(e){this._delegate=e}cancel(e){(0,q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,q.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,q.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,q.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,q.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,t);return r&&s.then(()=>r(null),u=>r(u)),s}update(e,t){if((0,q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let u=0;u<e.length;++u)s[""+u]=e[u];e=s,XN("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,q.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),s=>t(s)),r}}class tF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,q.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),rw("DataSnapshot.child","path",e,!1),new bp(this._database,this._delegate.child(e))}hasChild(e){return(0,q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),rw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,q.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new bp(this._database,t)))}hasChildren(){return(0,q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,q.Dv)("DataSnapshot.ref",0,0,arguments.length),new za(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ws{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,s){var u;(0,q.Dv)("Query.on",2,4,arguments.length),(0,q.Wj)("Query.on","callback",t,!1);const c=Ws.getCancelAndContextArgs_("Query.on",r,s),g=(D,P)=>{t.call(c.context,new bp(this.database,D),P)};g.userCallback=t,g.context=c.context;const _=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return $P(this._delegate,g,_),t;case"child_added":return $N(this._delegate,g,_),t;case"child_removed":return WN(this._delegate,g,_),t;case"child_changed":return GN(this._delegate,g,_),t;case"child_moved":return zN(this._delegate,g,_),t;default:throw new Error((0,q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,q.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,q.Wj)("Query.off","callback",t,!0),(0,q.lb)("Query.off","context",r,!0),t){const s=()=>{};s.userCallback=t,s.context=r,qN(this._delegate,e,s)}else qN(this._delegate,e)}get(){return dL(this._delegate).then(e=>new bp(this.database,e))}once(e,t,r,s){(0,q.Dv)("Query.once",1,4,arguments.length),(0,q.Wj)("Query.once","callback",t,!0);const u=Ws.getCancelAndContextArgs_("Query.once",r,s),c=new q.BH,g=(D,P)=>{const k=new bp(this.database,D);t&&t.call(u.context,k,P),c.resolve(k)};g.userCallback=t,g.context=u.context;const _=D=>{u.cancel&&u.cancel.call(u.context,D),c.reject(D)};switch(e){case"value":$P(this._delegate,g,_,{onlyOnce:!0});break;case"child_added":$N(this._delegate,g,_,{onlyOnce:!0});break;case"child_removed":WN(this._delegate,g,_,{onlyOnce:!0});break;case"child_changed":GN(this._delegate,g,_,{onlyOnce:!0});break;case"child_moved":zN(this._delegate,g,_,{onlyOnce:!0});break;default:throw new Error((0,q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,q.Dv)("Query.limitToFirst",1,1,arguments.length),new Ws(this.database,Gl(this._delegate,function vL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yL(n)}(e)))}limitToLast(e){return(0,q.Dv)("Query.limitToLast",1,1,arguments.length),new Ws(this.database,Gl(this._delegate,function IL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new EL(n)}(e)))}orderByChild(e){return(0,q.Dv)("Query.orderByChild",1,1,arguments.length),new Ws(this.database,Gl(this._delegate,function TL(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return rw("orderByChild","path",n,!1),new wL(n)}(e)))}orderByKey(){return(0,q.Dv)("Query.orderByKey",0,0,arguments.length),new Ws(this.database,Gl(this._delegate,function DL(){return new CL}()))}orderByPriority(){return(0,q.Dv)("Query.orderByPriority",0,0,arguments.length),new Ws(this.database,Gl(this._delegate,function bL(){return new AL}()))}orderByValue(){return(0,q.Dv)("Query.orderByValue",0,0,arguments.length),new Ws(this.database,Gl(this._delegate,function RL(){return new SL}()))}startAt(e=null,t){return(0,q.Dv)("Query.startAt",0,2,arguments.length),new Ws(this.database,Gl(this._delegate,function gL(n=null,e){return nw("startAt","key",e,!0),new KN(n,e)}(e,t)))}startAfter(e=null,t){return(0,q.Dv)("Query.startAfter",0,2,arguments.length),new Ws(this.database,Gl(this._delegate,function _L(n,e){return nw("startAfter","key",e,!0),new mL(n,e)}(e,t)))}endAt(e=null,t){return(0,q.Dv)("Query.endAt",0,2,arguments.length),new Ws(this.database,Gl(this._delegate,function hL(n,e){return nw("endAt","key",e,!0),new ZN(n,e)}(e,t)))}endBefore(e=null,t){return(0,q.Dv)("Query.endBefore",0,2,arguments.length),new Ws(this.database,Gl(this._delegate,function pL(n,e){return nw("endBefore","key",e,!0),new fL(n,e)}(e,t)))}equalTo(e,t){return(0,q.Dv)("Query.equalTo",1,2,arguments.length),new Ws(this.database,Gl(this._delegate,function xL(n,e){return nw("equalTo","key",e,!0),new PL(n,e)}(e,t)))}toString(){return(0,q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,q.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ws))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const s={cancel:void 0,context:void 0};if(t&&r)s.cancel=t,(0,q.Wj)(e,"cancel",s.cancel,!0),s.context=r,(0,q.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,q.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new za(this.database,new Fu(this._delegate._repo,this._delegate._path))}}class za extends Ws{constructor(e,t){super(e,new ia(t._repo,t._path,new rA,!1)),this.database=e,this._delegate=t}getKey(){return(0,q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new za(this.database,Um(this._delegate,e))}getParent(){(0,q.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new za(this.database,e):null}getRoot(){return(0,q.Dv)("Reference.root",0,0,arguments.length),new za(this.database,this._delegate.root)}set(e,t){(0,q.Dv)("Reference.set",1,2,arguments.length),(0,q.Wj)("Reference.set","onComplete",t,!0);const r=HP(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,t){if((0,q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let u=0;u<e.length;++u)s[""+u]=e[u];e=s,XN("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Lu("Reference.update",this._delegate._path),(0,q.Wj)("Reference.update","onComplete",t,!0);const r=cL(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,q.Wj)("Reference.setWithPriority","onComplete",r,!0);const s=function lL(n,e,t){if(Lu("setWithPriority",n._path),Qc("setWithPriority",e,n._path,!1),NP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new q.BH;return kP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&s.then(()=>r(null),u=>r(u)),s}remove(e){(0,q.Dv)("Reference.remove",0,1,arguments.length),(0,q.Wj)("Reference.remove","onComplete",e,!0);const t=function aL(n){return Lu("remove",n._path),HP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,q.Dv)("Reference.transaction",1,3,arguments.length),(0,q.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,q.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const s=function ZL(n,e,t){var r;if(n=(0,q.m9)(n),Lu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(r=t?.applyLocally)||void 0===r||r,u=new q.BH,g=$P(n,()=>{});return function Xk(n,e,t,r,s,u){Av(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Ye(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=FP(n,e,void 0);c.currentInputSnapshot=g;const _=c.update(g.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{tw("transaction failed: Data returned ",_,c.path),c.status=0;const D=EA(n.transactionQueueTree_,e),P=Fm(D)||[];let k;P.push(c),PP(D,P),"object"==typeof _&&null!==_&&(0,q.r3)(_,".priority")?(k=(0,q.DV)(_,".priority"),(0,q.hu)(ew(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=(yA(n.serverSyncTree_,e)||hn.EMPTY_NODE).getPriority().val();const G=iw(n),J=hi(_,k),de=bP(J,g,G);c.currentOutputSnapshotRaw=J,c.currentOutputSnapshotResolved=de,c.currentWriteId=CA(n);const Se=EP(n.serverSyncTree_,e,de,c.currentWriteId,c.applyLocally);Ga(n.eventQueue_,e,Se),DA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,D,P)=>{let k=null;_?u.reject(_):(k=new Vm(P,new Fu(n._repo,n._path),Mr),u.resolve(new qL(D,k)))},g,s),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new tF(u.committed,new bp(this.database,u.snapshot)));return t&&s.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),s}setPriority(e,t){(0,q.Dv)("Reference.setPriority",1,2,arguments.length),(0,q.Wj)("Reference.setPriority","onComplete",t,!0);const r=function uL(n,e){n=(0,q.m9)(n),Lu("setPriority",n._path),NP("setPriority",e,!1);const t=new q.BH;return kP(n._repo,ni(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}push(e,t){(0,q.Dv)("Reference.push",0,2,arguments.length),(0,q.Wj)("Reference.push","onComplete",t,!0);const r=function oL(n,e){n=(0,q.m9)(n),Lu("push",n._path),Qc("push",e,n._path,!0);const t=RN(n._repo),r=sL(t),s=Um(n,r),u=Um(n,r);let c;return c=null!=e?HP(u,e).then(()=>u):Promise.resolve(u),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}(this._delegate,e),s=r.then(c=>new za(this.database,c));t&&s.then(()=>t(null),c=>t(c));const u=new za(this.database,r);return u.then=s.then.bind(s),u.catch=s.catch.bind(s,void 0),u}onDisconnect(){return Lu("Reference.onDisconnect",this._delegate._path),new eF(new BN(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class aw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:VL,forceLongPolling:UL}}useEmulator(e,t,r={}){!function JN(n,e,t,r={}){(n=(0,q.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zs("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let u;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&zs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new V0(V0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,q.Sg)(r.mockUserToken,n.app.options.projectId);u=new V0(c)}!function NL(n,e,t,r){n.repoInfo_=new HR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(s,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,q.Dv)("database.ref",0,1,arguments.length),e instanceof za){const t=HN(this._delegate,e.toString());return new za(this,t)}{const t=jN(this._delegate,e);return new za(this,t)}}refFromURL(e){(0,q.Dv)("database.refFromURL",1,1,arguments.length);const r=HN(this._delegate,e);return new za(this,r)}goOffline(){return(0,q.Dv)("database.goOffline",0,0,arguments.length),function BL(n){(n=(0,q.m9)(n))._checkNotDeleted("goOffline"),NN(n._repo)}(this._delegate)}goOnline(){return(0,q.Dv)("database.goOnline",0,0,arguments.length),function jL(n){(n=(0,q.m9)(n))._checkNotDeleted("goOnline"),function Jk(n){n.persistentConnection_&&n.persistentConnection_.resume(SN)}(n._repo)}(this._delegate)}}aw.ServerValue={TIMESTAMP:function zL(){return GL}(),increment:n=>function WL(n){return{".sv":{increment:n}}}(n)};var rF=Object.freeze({__proto__:null,initStandalone:function nF({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:s,namespace:u,nodeAdmin:c=!1}){S(t);const g=new Ht.H0("database-standalone"),_=new Ht.zt("auth-internal",g);let D;return _.setComponent(new Ht.wA("auth-internal",()=>r,"PRIVATE")),s&&(D=new Ht.zt("app-check-internal",g),D.setComponent(new Ht.wA("app-check-internal",()=>s,"PRIVATE"))),{instance:new aw(zP(n,_,D,e,c),n),namespace:u}}});const iF=aw.ServerValue;function uw(n,e,t="on",r=po){return new ae.y(s=>{let u=null;return u=n[t](e,(c,g)=>{r.schedule(()=>{s.next({snapshot:c,prevKey:g})}),"once"===t&&r.schedule(()=>s.complete())},c=>{r.schedule(()=>s.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,Oe.U)(s=>{const{snapshot:u,prevKey:c}=s;let g=null;return u.exists()&&(g=u.key),{type:e,payload:u,prevKey:c,key:g}}),(0,Xs.B)())}function eO(n){return null==n}function tO(n){return"function"==typeof n.set}function nO(n,e){return tO(e)?e:n.ref(e)}function rO(n,e){if(function oF(n){return"string"==typeof n}(n))return e.stringCase();if(tO(n))return e.firebaseCase();if(function aF(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function iO(n){return(eO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function sO(n,e,t){const r=(e=iO(e)).map(s=>uw(n,s,"on",t));return(0,nd.T)(...r)}function oO(n,e){return function(r,s){return rO(r,{stringCase:()=>n.child(r)[e](s),firebaseCase:()=>r[e](s),snapshotCase:()=>r.ref[e](s)})}}function dF(n){return function(t){return t?rO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function aO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function pF(n,e){const{payload:t,prevKey:r,key:s}=e,u=aO(n,s),c=function fF(n,e){if(eO(e))return 0;{const t=aO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let g=null;e.payload.forEach(_=>{const D={payload:_,type:"value",prevKey:g,key:_.key};return g=_.key,n=[...n,D],!1})}return n;case"child_added":if(u>-1)(n[u-1]?.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(g=>g.payload.key!==t.key);case"child_changed":return n.map(g=>g.payload.key===s?e:g);case"child_moved":if(u>-1){const g=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,g),n}return n;default:return n}}function uO(n,e,t){return function hF(n,e,t){return uw(n,"value","once",t).pipe((0,Us.w)(r=>{const s=[(0,yn.of)(r)];return e.forEach(u=>s.push(uw(n,u,"on",t))),(0,nd.T)(...s).pipe((0,Ia.R)(pF,[]))}),(0,ze.x)())}(n,e=iO(e),t)}function lO(n,e){return function(){return uw(n,"value","on",e)}}!function sF(n){n.INTERNAL.registerComponent(new Ht.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new aw(s,r)},"PUBLIC").setServiceProps({Reference:za,Query:Ws,Database:aw,DataSnapshot:bp,enableLogging:HL,INTERNAL:rF,ServerValue:iF}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.1")}(pn.Z);const _F=new m.OlP("angularfire2.realtimeDatabaseURL"),yF=new m.OlP("angularfire2.database.use-emulator");let vF=(()=>{class n{schedulers;database;constructor(t,r,s,u,c,g,_,D,P,k,G,J,de,Se,xe){this.schedulers=g;const ht=_,mt=Ci(t,c,r);D&&od(mt,c,P,G,J,de,k,Se),this.database=ya(`${mt.name}.database.${s}`,"AngularFireDatabase",mt.name,()=>{const Qe=c.runOutsideAngular(()=>mt.database(s||void 0));return ht&&Qe.useEmulator(...ht),Qe},[ht])}list(t,r){const s=this.schedulers.ngZone.runOutsideAngular(()=>nO(this.database,t));let u=s;return r&&(u=r(s)),function gF(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:oO(r,"update"),set:oO(r,"set"),push:s=>r.push(s),remove:dF(r),snapshotChanges:s=>uO(n,s,t).pipe(Mt),stateChanges:s=>sO(n,s,t).pipe(Mt),auditTrail:s=>function uF(n,e,t){return function cF(n,e,t){return function lF(n,e){return uw(n,"value","on",e).pipe((0,Oe.U)(t=>{let r;return t.payload.forEach(s=>(r=s.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function l(...n){const e=(0,He.jO)(n);return(0,Xn.e)((t,r)=>{const s=n.length,u=new Array(s);let c=n.map(()=>!1),g=!1;for(let _=0;_<s;_++)(0,Ee.Xf)(n[_]).subscribe((0,De.x)(r,D=>{u[_]=D,!g&&!c[_]&&(c[_]=!0,(g=c.every(o.y))&&(c=null))},a.Z));t.subscribe((0,De.x)(r,_=>{if(g){const D=[_,...u];r.next(e?e(...D):D)}}))})}(e),(0,Oe.U)(([s,u])=>{const c=s.lastKeyToLoad,g=u.map(_=>_.key);return{actions:u,lastKeyToLoad:c,loadedKeys:g}}),function d(n){return(0,Xn.e)((e,t)=>{let r=!1,s=0;e.subscribe((0,De.x)(t,u=>(r||(r=!n(u,s++)))&&t.next(u)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Oe.U)(s=>s.actions))}(n,sO(n,e).pipe((0,Ia.R)((s,u)=>[...s,u],[])),t)}(n,s,t).pipe(Mt),valueChanges:(s,u)=>uO(n,s,t).pipe((0,Oe.U)(g=>g.map(_=>u&&u.idField?{..._.payload.val(),[u.idField]:_.key}:_.payload.val())),Mt)}}(u,this)}object(t){return function mF(n,e){return{query:n,snapshotChanges:()=>lO(n,e.schedulers.outsideAngular)().pipe(Mt),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>lO(n,e.schedulers.outsideAngular)().pipe(Mt,(0,Oe.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>nO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(m.LFG(Vi),m.LFG(hr,8),m.LFG(_F,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(x),m.LFG(yF,8),m.LFG(mo,8),m.LFG(Ft,8),m.LFG(sd,8),m.LFG(Ch,8),m.LFG(Ui,8),m.LFG(Dh,8),m.LFG(go,8),m.LFG(Qu,8))};static \u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),EF=(()=>{class n{constructor(){pn.Z.registerVersion("angularfire",ma.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=m.oAB({type:n});static \u0275inj=m.cJS({providers:[vF]})}return n})();const IF={apiKey:"AIzaSyAskkATVU4YWFvF119TREfLHQ9tPhb27cs",authDomain:"j-s-cart-43e4d.firebaseapp.com",projectId:"j-s-cart-43e4d",storageBucket:"j-s-cart-43e4d.appspot.com",messagingSenderId:"1083234590925",appId:"1:1083234590925:web:dbc61fb26b945f6a288984"};let wF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.oAB({type:n,bootstrap:[uD]});static#n=this.\u0275inj=m.cJS({providers:[Am],imports:[C.b2,aD,Ih,uu.initializeApp(IF),lu,i,EF]})}return n})();C.q6().bootstrapModule(wF).catch(n=>console.error(n))},9058:(yt,be,B)=>{B.d(be,{BH:()=>pe,DV:()=>It,Dv:()=>uo,G6:()=>Sr,GJ:()=>xn,L:()=>De,LL:()=>Ve,Pz:()=>Le,Sg:()=>We,UG:()=>we,UI:()=>ts,US:()=>se,Wj:()=>Gt,Wl:()=>Dt,Yr:()=>Ss,ZB:()=>ue,ZR:()=>Me,aH:()=>Ie,b$:()=>Kn,cI:()=>Yn,dS:()=>Kt,eu:()=>ve,g5:()=>K,gK:()=>wt,gQ:()=>bt,h$:()=>He,hl:()=>ge,hu:()=>m,jU:()=>kt,lb:()=>Ir,m9:()=>ii,ne:()=>Fn,p$:()=>ne,pd:()=>Xt,r3:()=>Dn,ru:()=>$t,tV:()=>X,uI:()=>Xe,ug:()=>rs,vZ:()=>Er,w1:()=>ar,w9:()=>Qn,xO:()=>$n,xb:()=>vr,z$:()=>Ze,zd:()=>Rt});const C={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function(te,$){if(!te)throw K($)},K=function(te){return new Error("Firebase Database ("+C.SDK_VERSION+") INTERNAL ASSERT FAILED: "+te)},oe=function(te){const $=[];let z=0;for(let H=0;H<te.length;H++){let W=te.charCodeAt(H);W<128?$[z++]=W:W<2048?($[z++]=W>>6|192,$[z++]=63&W|128):55296==(64512&W)&&H+1<te.length&&56320==(64512&te.charCodeAt(H+1))?(W=65536+((1023&W)<<10)+(1023&te.charCodeAt(++H)),$[z++]=W>>18|240,$[z++]=W>>12&63|128,$[z++]=W>>6&63|128,$[z++]=63&W|128):($[z++]=W>>12|224,$[z++]=W>>6&63|128,$[z++]=63&W|128)}return $},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,$){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let W=0;W<te.length;W+=3){const ie=te[W],Be=W+1<te.length,tt=Be?te[W+1]:0,vt=W+2<te.length,xt=vt?te[W+2]:0;let Bn=(15&tt)<<2|xt>>6,pi=63&xt;vt||(pi=64,Be||(Bn=64)),H.push(z[ie>>2],z[(3&ie)<<4|tt>>4],z[Bn],z[pi])}return H.join("")},encodeString(te,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(te):this.encodeByteArray(oe(te),$)},decodeString(te,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(te):function(te){const $=[];let z=0,H=0;for(;z<te.length;){const W=te[z++];if(W<128)$[H++]=String.fromCharCode(W);else if(W>191&&W<224){const ie=te[z++];$[H++]=String.fromCharCode((31&W)<<6|63&ie)}else if(W>239&&W<365){const vt=((7&W)<<18|(63&te[z++])<<12|(63&te[z++])<<6|63&te[z++])-65536;$[H++]=String.fromCharCode(55296+(vt>>10)),$[H++]=String.fromCharCode(56320+(1023&vt))}else{const ie=te[z++],Be=te[z++];$[H++]=String.fromCharCode((15&W)<<12|(63&ie)<<6|63&Be)}}return $.join("")}(this.decodeStringToByteArray(te,$))},decodeStringToByteArray(te,$){this.init_();const z=$?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let W=0;W<te.length;){const ie=z[te.charAt(W++)],tt=W<te.length?z[te.charAt(W)]:0;++W;const xt=W<te.length?z[te.charAt(W)]:64;++W;const jt=W<te.length?z[te.charAt(W)]:64;if(++W,null==ie||null==tt||null==xt||null==jt)throw new Ee;H.push(ie<<2|tt>>4),64!==xt&&(H.push(tt<<4&240|xt>>2),64!==jt&&H.push(xt<<6&192|jt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function(te){const $=oe(te);return se.encodeByteArray($,!0)},De=function(te){return He(te).replace(/\./g,"")},X=function(te){try{return se.decodeString(te,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function ne(te){return ue(void 0,te)}function ue(te,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return $}for(const z in $)!$.hasOwnProperty(z)||!Oe(z)||(te[z]=ue(te[z],$[z]));return te}function Oe(te){return"__proto__"!==te}const lt=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=te&&X(te[1]);return $&&JSON.parse($)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},Ie=()=>{var te;return null===(te=lt())||void 0===te?void 0:te.config},Le=te=>{var $;return null===($=lt())||void 0===$?void 0:$[`_${te}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,z)=>{this.resolve=$,this.reject=z})}wrapCallback($){return(z,H)=>{z?this.reject(z):this.resolve(H),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(z):$(z,H))}}}function We(te,$){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=$||"demo-project",W=te.iat||0,ie=te.sub||te.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Be=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:W,exp:W+3600,auth_time:W,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},te);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(Be)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function we(){var te;const $=null===(te=lt())||void 0===te?void 0:te.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function kt(){return"object"==typeof self&&self.self===self}function $t(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function Kn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ar(){const te=Ze();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function Ss(){return!0===C.NODE_CLIENT||!0===C.NODE_ADMIN}function Sr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise((te,$)=>{try{let z=!0;const H="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(H);W.onsuccess=()=>{W.result.close(),z||self.indexedDB.deleteDatabase(H),te(!0)},W.onupgradeneeded=()=>{z=!1},W.onerror=()=>{var ie;$((null===(ie=W.error)||void 0===ie?void 0:ie.message)||"")}}catch(z){$(z)}})}class Me extends Error{constructor($,z,H){super(z),this.code=$,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor($,z,H){this.service=$,this.serviceName=z,this.errors=H}create($,...z){const H=z[0]||{},W=`${this.service}/${$}`,ie=this.errors[$],Be=ie?function _t(te,$){return te.replace(et,(z,H)=>{const W=$[H];return null!=W?String(W):`<${H}?>`})}(ie,H):"Error";return new Me(W,`${this.serviceName}: ${Be} (${W}).`,H)}}const et=/\{\$([^}]+)}/g;function Yn(te){return JSON.parse(te)}function Dt(te){return JSON.stringify(te)}const cn=function(te){let $={},z={},H={},W="";try{const ie=te.split(".");$=Yn(X(ie[0])||""),z=Yn(X(ie[1])||""),W=ie[2],H=z.d||{},delete z.d}catch{}return{header:$,claims:z,data:H,signature:W}},Qn=function(te){const z=cn(te).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},xn=function(te){const $=cn(te).claims;return"object"==typeof $&&!0===$.admin};function Dn(te,$){return Object.prototype.hasOwnProperty.call(te,$)}function It(te,$){if(Object.prototype.hasOwnProperty.call(te,$))return te[$]}function vr(te){for(const $ in te)if(Object.prototype.hasOwnProperty.call(te,$))return!1;return!0}function ts(te,$,z){const H={};for(const W in te)Object.prototype.hasOwnProperty.call(te,W)&&(H[W]=$.call(z,te[W],W,te));return H}function Er(te,$){if(te===$)return!0;const z=Object.keys(te),H=Object.keys($);for(const W of z){if(!H.includes(W))return!1;const ie=te[W],Be=$[W];if(Ln(ie)&&Ln(Be)){if(!Er(ie,Be))return!1}else if(ie!==Be)return!1}for(const W of H)if(!z.includes(W))return!1;return!0}function Ln(te){return null!==te&&"object"==typeof te}function $n(te){const $=[];for(const[z,H]of Object.entries(te))Array.isArray(H)?H.forEach(W=>{$.push(encodeURIComponent(z)+"="+encodeURIComponent(W))}):$.push(encodeURIComponent(z)+"="+encodeURIComponent(H));return $.length?"&"+$.join("&"):""}function Rt(te){const $={};return te.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[W,ie]=H.split("=");$[decodeURIComponent(W)]=decodeURIComponent(ie)}}),$}function Xt(te){const $=te.indexOf("?");if(!$)return"";const z=te.indexOf("#",$);return te.substring($,z>0?z:void 0)}class bt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,z){z||(z=0);const H=this.W_;if("string"==typeof $)for(let jt=0;jt<16;jt++)H[jt]=$.charCodeAt(z)<<24|$.charCodeAt(z+1)<<16|$.charCodeAt(z+2)<<8|$.charCodeAt(z+3),z+=4;else for(let jt=0;jt<16;jt++)H[jt]=$[z]<<24|$[z+1]<<16|$[z+2]<<8|$[z+3],z+=4;for(let jt=16;jt<80;jt++){const Bn=H[jt-3]^H[jt-8]^H[jt-14]^H[jt-16];H[jt]=4294967295&(Bn<<1|Bn>>>31)}let xt,Pt,W=this.chain_[0],ie=this.chain_[1],Be=this.chain_[2],tt=this.chain_[3],vt=this.chain_[4];for(let jt=0;jt<80;jt++){jt<40?jt<20?(xt=tt^ie&(Be^tt),Pt=1518500249):(xt=ie^Be^tt,Pt=1859775393):jt<60?(xt=ie&Be|tt&(ie|Be),Pt=2400959708):(xt=ie^Be^tt,Pt=3395469782);const Bn=(W<<5|W>>>27)+xt+vt+Pt+H[jt]&4294967295;vt=tt,tt=Be,Be=4294967295&(ie<<30|ie>>>2),ie=W,W=Bn}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Be&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update($,z){if(null==$)return;void 0===z&&(z=$.length);const H=z-this.blockSize;let W=0;const ie=this.buf_;let Be=this.inbuf_;for(;W<z;){if(0===Be)for(;W<=H;)this.compress_($,W),W+=this.blockSize;if("string"==typeof $){for(;W<z;)if(ie[Be]=$.charCodeAt(W),++Be,++W,Be===this.blockSize){this.compress_(ie),Be=0;break}}else for(;W<z;)if(ie[Be]=$[W],++Be,++W,Be===this.blockSize){this.compress_(ie),Be=0;break}}this.inbuf_=Be,this.total_+=z}digest(){const $=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&z,z/=256;this.compress_(this.buf_);let H=0;for(let W=0;W<5;W++)for(let ie=24;ie>=0;ie-=8)$[H]=this.chain_[W]>>ie&255,++H;return $}}function Fn(te,$){const z=new $r(te,$);return z.subscribe.bind(z)}class $r{constructor($,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{$(this)}).catch(H=>{this.error(H)})}next($){this.forEachObserver(z=>{z.next($)})}error($){this.forEachObserver(z=>{z.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,z,H){let W;if(void 0===$&&void 0===z&&void 0===H)throw new Error("Missing Observer.");W=function An(te,$){if("object"!=typeof te||null===te)return!1;for(const z of $)if(z in te&&"function"==typeof te[z])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:z,complete:H},void 0===W.next&&(W.next=nr),void 0===W.error&&(W.error=nr),void 0===W.complete&&(W.complete=nr);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),ie}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,$)}sendOne($,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{z(this.observers[$])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nr(){}const uo=function(te,$,z,H){let W;if(H<$?W="at least "+$:H>z&&(W=0===z?"none":"no more than "+z),W)throw new Error(te+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+W+".")};function wt(te,$){return`${te} failed: ${$} argument `}function Gt(te,$,z,H){if((!H||z)&&"function"!=typeof z)throw new Error(wt(te,$)+"must be a valid function.")}function Ir(te,$,z,H){if((!H||z)&&("object"!=typeof z||null===z))throw new Error(wt(te,$)+"must be a valid context object.")}const Kt=function(te){const $=[];let z=0;for(let H=0;H<te.length;H++){let W=te.charCodeAt(H);if(W>=55296&&W<=56319){const ie=W-55296;H++,m(H<te.length,"Surrogate pair missing trail surrogate."),W=65536+(ie<<10)+(te.charCodeAt(H)-56320)}W<128?$[z++]=W:W<2048?($[z++]=W>>6|192,$[z++]=63&W|128):W<65536?($[z++]=W>>12|224,$[z++]=W>>6&63|128,$[z++]=63&W|128):($[z++]=W>>18|240,$[z++]=W>>12&63|128,$[z++]=W>>6&63|128,$[z++]=63&W|128)}return $},rs=function(te){let $=0;for(let z=0;z<te.length;z++){const H=te.charCodeAt(z);H<128?$++:H<2048?$+=2:H>=55296&&H<=56319?($+=4,z++):$+=3}return $};function ii(te){return te&&te._delegate?te._delegate:te}},5619:(yt,be,B)=>{B.d(be,{X:()=>m});var C=B(8645);class m extends C.x{constructor(oe){super(),this._value=oe}get value(){return this.getValue()}_subscribe(oe){const ae=super._subscribe(oe);return!ae.closed&&oe.next(this._value),ae}getValue(){const{hasError:oe,thrownError:ae,_value:se}=this;if(oe)throw ae;return this._throwIfClosed(),se}next(oe){super.next(this._value=oe)}}},5592:(yt,be,B)=>{B.d(be,{y:()=>He});var C=B(305),m=B(7394),K=B(4850),oe=B(8407),ae=B(2653),se=B(4674),Ee=B(1441);let He=(()=>{class ue{constructor(je){je&&(this._subscribe=je)}lift(je){const Je=new ue;return Je.source=this,Je.operator=je,Je}subscribe(je,Je,Ue){const rt=function ne(ue){return ue&&ue instanceof C.Lv||function X(ue){return ue&&(0,se.m)(ue.next)&&(0,se.m)(ue.error)&&(0,se.m)(ue.complete)}(ue)&&(0,m.Nn)(ue)}(je)?je:new C.Hp(je,Je,Ue);return(0,Ee.x)(()=>{const{operator:lt,source:Jt}=this;rt.add(lt?lt.call(rt,Jt):Jt?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(je){try{return this._subscribe(je)}catch(Je){je.error(Je)}}forEach(je,Je){return new(Je=De(Je))((Ue,rt)=>{const lt=new C.Hp({next:Jt=>{try{je(Jt)}catch(un){rt(un),lt.unsubscribe()}},error:rt,complete:Ue});this.subscribe(lt)})}_subscribe(je){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(je)}[K.L](){return this}pipe(...je){return(0,oe.U)(je)(this)}toPromise(je){return new(je=De(je))((Je,Ue)=>{let rt;this.subscribe(lt=>rt=lt,lt=>Ue(lt),()=>Je(rt))})}}return ue.create=Oe=>new ue(Oe),ue})();function De(ue){var Oe;return null!==(Oe=ue??ae.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(yt,be,B)=>{B.d(be,{x:()=>Ee});var C=B(5592),m=B(7394);const oe=(0,B(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=B(9039),se=B(1441);let Ee=(()=>{class De extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const ue=new He(this,this);return ue.operator=ne,ue}_throwIfClosed(){if(this.closed)throw new oe}next(ne){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ue of this.currentObservers)ue.next(ne)}})}error(ne){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:ue}=this;for(;ue.length;)ue.shift().error(ne)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:ue,isStopped:Oe,observers:je}=this;return ue||Oe?m.Lc:(this.currentObservers=null,je.push(ne),new m.w0(()=>{this.currentObservers=null,(0,ae.P)(je,ne)}))}_checkFinalizedStatuses(ne){const{hasError:ue,thrownError:Oe,isStopped:je}=this;ue?ne.error(Oe):je&&ne.complete()}asObservable(){const ne=new C.y;return ne.source=this,ne}}return De.create=(X,ne)=>new He(X,ne),De})();class He extends Ee{constructor(X,ne){super(),this.destination=X,this.source=ne}next(X){var ne,ue;null===(ue=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===ue||ue.call(ne,X)}error(X){var ne,ue;null===(ue=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===ue||ue.call(ne,X)}complete(){var X,ne;null===(ne=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===ne||ne.call(X)}_subscribe(X){var ne,ue;return null!==(ue=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(X))&&void 0!==ue?ue:m.Lc}}},305:(yt,be,B)=>{B.d(be,{Hp:()=>Ue,Lv:()=>ue});var C=B(4674),m=B(7394),K=B(2653),oe=B(3894),ae=B(2420);const se=De("C",void 0,void 0);function De(Ie,Le,pe){return{kind:Ie,value:Le,error:pe}}var X=B(7599),ne=B(1441);class ue extends m.w0{constructor(Le){super(),this.isStopped=!1,Le?(this.destination=Le,(0,m.Nn)(Le)&&Le.add(this)):this.destination=un}static create(Le,pe,We){return new Ue(Le,pe,We)}next(Le){this.isStopped?Jt(function He(Ie){return De("N",Ie,void 0)}(Le),this):this._next(Le)}error(Le){this.isStopped?Jt(function Ee(Ie){return De("E",void 0,Ie)}(Le),this):(this.isStopped=!0,this._error(Le))}complete(){this.isStopped?Jt(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Le){this.destination.next(Le)}_error(Le){try{this.destination.error(Le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function je(Ie,Le){return Oe.call(Ie,Le)}class Je{constructor(Le){this.partialObserver=Le}next(Le){const{partialObserver:pe}=this;if(pe.next)try{pe.next(Le)}catch(We){rt(We)}}error(Le){const{partialObserver:pe}=this;if(pe.error)try{pe.error(Le)}catch(We){rt(We)}else rt(Le)}complete(){const{partialObserver:Le}=this;if(Le.complete)try{Le.complete()}catch(pe){rt(pe)}}}class Ue extends ue{constructor(Le,pe,We){let Ze;if(super(),(0,C.m)(Le)||!Le)Ze={next:Le??void 0,error:pe??void 0,complete:We??void 0};else{let Xe;this&&K.config.useDeprecatedNextContext?(Xe=Object.create(Le),Xe.unsubscribe=()=>this.unsubscribe(),Ze={next:Le.next&&je(Le.next,Xe),error:Le.error&&je(Le.error,Xe),complete:Le.complete&&je(Le.complete,Xe)}):Ze=Le}this.destination=new Je(Ze)}}function rt(Ie){K.config.useDeprecatedSynchronousErrorHandling?(0,ne.O)(Ie):(0,oe.h)(Ie)}function Jt(Ie,Le){const{onStoppedNotification:pe}=K.config;pe&&X.z.setTimeout(()=>pe(Ie,Le))}const un={closed:!0,next:ae.Z,error:function lt(Ie){throw Ie},complete:ae.Z}},7394:(yt,be,B)=>{B.d(be,{Lc:()=>se,w0:()=>ae,Nn:()=>Ee});var C=B(4674);const K=(0,B(2306).d)(De=>function(ne){De(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((ue,Oe)=>`${Oe+1}) ${ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var oe=B(9039);class ae{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const je of ne)je.remove(this);else ne.remove(this);const{initialTeardown:ue}=this;if((0,C.m)(ue))try{ue()}catch(je){X=je instanceof K?je.errors:[je]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const je of Oe)try{He(je)}catch(Je){X=X??[],Je instanceof K?X=[...X,...Je.errors]:X.push(Je)}}if(X)throw new K(X)}}add(X){var ne;if(X&&X!==this)if(this.closed)He(X);else{if(X instanceof ae){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(X)}}_hasParent(X){const{_parentage:ne}=this;return ne===X||Array.isArray(ne)&&ne.includes(X)}_addParent(X){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(X),ne):ne?[ne,X]:X}_removeParent(X){const{_parentage:ne}=this;ne===X?this._parentage=null:Array.isArray(ne)&&(0,oe.P)(ne,X)}remove(X){const{_finalizers:ne}=this;ne&&(0,oe.P)(ne,X),X instanceof ae&&X._removeParent(this)}}ae.EMPTY=(()=>{const De=new ae;return De.closed=!0,De})();const se=ae.EMPTY;function Ee(De){return De instanceof ae||De&&"closed"in De&&(0,C.m)(De.remove)&&(0,C.m)(De.add)&&(0,C.m)(De.unsubscribe)}function He(De){(0,C.m)(De)?De():De.unsubscribe()}},2653:(yt,be,B)=>{B.d(be,{config:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(yt,be,B)=>{B.d(be,{z:()=>ae});var C=B(7537),K=B(9940),oe=B(2459);function ae(...se){return function m(){return(0,C.J)(1)}()((0,oe.D)(se,(0,K.yG)(se)))}},6232:(yt,be,B)=>{B.d(be,{E:()=>m});const m=new(B(5592).y)(ae=>ae.complete())},2459:(yt,be,B)=>{B.d(be,{D:()=>Le});var C=B(4829),m=B(3093),K=B(5137),se=B(5592),He=B(4971),De=B(4674),X=B(7103);function ue(pe,We){if(!pe)throw new Error("Iterable cannot be null");return new se.y(Ze=>{(0,X.f)(Ze,We,()=>{const Xe=pe[Symbol.asyncIterator]();(0,X.f)(Ze,We,()=>{Xe.next().then(we=>{we.done?Ze.complete():Ze.next(we.value)})},0,!0)})})}var Oe=B(8382),je=B(4026),Je=B(4266),Ue=B(3664),rt=B(5726),lt=B(9853),Jt=B(541);function Le(pe,We){return We?function Ie(pe,We){if(null!=pe){if((0,Oe.c)(pe))return function oe(pe,We){return(0,C.Xf)(pe).pipe((0,K.R)(We),(0,m.Q)(We))}(pe,We);if((0,Je.z)(pe))return function Ee(pe,We){return new se.y(Ze=>{let Xe=0;return We.schedule(function(){Xe===pe.length?Ze.complete():(Ze.next(pe[Xe++]),Ze.closed||this.schedule())})})}(pe,We);if((0,je.t)(pe))return function ae(pe,We){return(0,C.Xf)(pe).pipe((0,K.R)(We),(0,m.Q)(We))}(pe,We);if((0,rt.D)(pe))return ue(pe,We);if((0,Ue.T)(pe))return function ne(pe,We){return new se.y(Ze=>{let Xe;return(0,X.f)(Ze,We,()=>{Xe=pe[He.h](),(0,X.f)(Ze,We,()=>{let we,kt;try{({value:we,done:kt}=Xe.next())}catch($t){return void Ze.error($t)}kt?Ze.complete():Ze.next(we)},0,!0)}),()=>(0,De.m)(Xe?.return)&&Xe.return()})}(pe,We);if((0,Jt.L)(pe))return function un(pe,We){return ue((0,Jt.Q)(pe),We)}(pe,We)}throw(0,lt.z)(pe)}(pe,We):(0,C.Xf)(pe)}},4829:(yt,be,B)=>{B.d(be,{Xf:()=>Oe});var C=B(7582),m=B(4266),K=B(4026),oe=B(5592),ae=B(8382),se=B(5726),Ee=B(9853),He=B(3664),De=B(541),X=B(4674),ne=B(3894),ue=B(4850);function Oe(Ie){if(Ie instanceof oe.y)return Ie;if(null!=Ie){if((0,ae.c)(Ie))return function je(Ie){return new oe.y(Le=>{const pe=Ie[ue.L]();if((0,X.m)(pe.subscribe))return pe.subscribe(Le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,m.z)(Ie))return function Je(Ie){return new oe.y(Le=>{for(let pe=0;pe<Ie.length&&!Le.closed;pe++)Le.next(Ie[pe]);Le.complete()})}(Ie);if((0,K.t)(Ie))return function Ue(Ie){return new oe.y(Le=>{Ie.then(pe=>{Le.closed||(Le.next(pe),Le.complete())},pe=>Le.error(pe)).then(null,ne.h)})}(Ie);if((0,se.D)(Ie))return lt(Ie);if((0,He.T)(Ie))return function rt(Ie){return new oe.y(Le=>{for(const pe of Ie)if(Le.next(pe),Le.closed)return;Le.complete()})}(Ie);if((0,De.L)(Ie))return function Jt(Ie){return lt((0,De.Q)(Ie))}(Ie)}throw(0,Ee.z)(Ie)}function lt(Ie){return new oe.y(Le=>{(function un(Ie,Le){var pe,We,Ze,Xe;return(0,C.mG)(this,void 0,void 0,function*(){try{for(pe=(0,C.KL)(Ie);!(We=yield pe.next()).done;)if(Le.next(We.value),Le.closed)return}catch(we){Ze={error:we}}finally{try{We&&!We.done&&(Xe=pe.return)&&(yield Xe.call(pe))}finally{if(Ze)throw Ze.error}}Le.complete()})})(Ie,Le).catch(pe=>Le.error(pe))})}},3019:(yt,be,B)=>{B.d(be,{T:()=>se});var C=B(7537),m=B(4829),K=B(6232),oe=B(9940),ae=B(2459);function se(...Ee){const He=(0,oe.yG)(Ee),De=(0,oe._6)(Ee,1/0),X=Ee;return X.length?1===X.length?(0,m.Xf)(X[0]):(0,C.J)(De)((0,ae.D)(X,He)):K.E}},2096:(yt,be,B)=>{B.d(be,{of:()=>K});var C=B(9940),m=B(2459);function K(...oe){const ae=(0,C.yG)(oe);return(0,m.D)(oe,ae)}},8251:(yt,be,B)=>{B.d(be,{x:()=>m});var C=B(305);function m(oe,ae,se,Ee,He){return new K(oe,ae,se,Ee,He)}class K extends C.Lv{constructor(ae,se,Ee,He,De,X){super(ae),this.onFinalize=De,this.shouldUnsubscribe=X,this._next=se?function(ne){try{se(ne)}catch(ue){ae.error(ue)}}:super._next,this._error=He?function(ne){try{He(ne)}catch(ue){ae.error(ue)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(ne){ae.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},3572:(yt,be,B)=>{B.d(be,{d:()=>K});var C=B(9360),m=B(8251);function K(oe){return(0,C.e)((ae,se)=>{let Ee=!1;ae.subscribe((0,m.x)(se,He=>{Ee=!0,se.next(He)},()=>{Ee||se.next(oe),se.complete()}))})}},3997:(yt,be,B)=>{B.d(be,{x:()=>oe});var C=B(2737),m=B(9360),K=B(8251);function oe(se,Ee=C.y){return se=se??ae,(0,m.e)((He,De)=>{let X,ne=!0;He.subscribe((0,K.x)(De,ue=>{const Oe=Ee(ue);(ne||!se(X,Oe))&&(ne=!1,X=Oe,De.next(ue))}))})}function ae(se,Ee){return se===Ee}},2181:(yt,be,B)=>{B.d(be,{h:()=>K});var C=B(9360),m=B(8251);function K(oe,ae){return(0,C.e)((se,Ee)=>{let He=0;se.subscribe((0,m.x)(Ee,De=>oe.call(ae,De,He++)&&Ee.next(De)))})}},1374:(yt,be,B)=>{B.d(be,{P:()=>Ee});var C=B(6973),m=B(2181),K=B(8180),oe=B(3572),ae=B(3026),se=B(2737);function Ee(He,De){const X=arguments.length>=2;return ne=>ne.pipe(He?(0,m.h)((ue,Oe)=>He(ue,Oe,ne)):se.y,(0,K.q)(1),X?(0,oe.d)(De):(0,ae.T)(()=>new C.K))}},7398:(yt,be,B)=>{B.d(be,{U:()=>K});var C=B(9360),m=B(8251);function K(oe,ae){return(0,C.e)((se,Ee)=>{let He=0;se.subscribe((0,m.x)(Ee,De=>{Ee.next(oe.call(ae,De,He++))}))})}},7537:(yt,be,B)=>{B.d(be,{J:()=>K});var C=B(1631),m=B(2737);function K(oe=1/0){return(0,C.z)(m.y,oe)}},1631:(yt,be,B)=>{B.d(be,{z:()=>He});var C=B(7398),m=B(4829),K=B(9360),oe=B(7103),ae=B(8251),Ee=B(4674);function He(De,X,ne=1/0){return(0,Ee.m)(X)?He((ue,Oe)=>(0,C.U)((je,Je)=>X(ue,je,Oe,Je))((0,m.Xf)(De(ue,Oe))),ne):("number"==typeof X&&(ne=X),(0,K.e)((ue,Oe)=>function se(De,X,ne,ue,Oe,je,Je,Ue){const rt=[];let lt=0,Jt=0,un=!1;const Ie=()=>{un&&!rt.length&&!lt&&X.complete()},Le=We=>lt<ue?pe(We):rt.push(We),pe=We=>{je&&X.next(We),lt++;let Ze=!1;(0,m.Xf)(ne(We,Jt++)).subscribe((0,ae.x)(X,Xe=>{Oe?.(Xe),je?Le(Xe):X.next(Xe)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(lt--;rt.length&&lt<ue;){const Xe=rt.shift();Je?(0,oe.f)(X,Je,()=>pe(Xe)):pe(Xe)}Ie()}catch(Xe){X.error(Xe)}}))};return De.subscribe((0,ae.x)(X,Le,()=>{un=!0,Ie()})),()=>{Ue?.()}}(ue,Oe,De,ne)))}},3093:(yt,be,B)=>{B.d(be,{Q:()=>oe});var C=B(7103),m=B(9360),K=B(8251);function oe(ae,se=0){return(0,m.e)((Ee,He)=>{Ee.subscribe((0,K.x)(He,De=>(0,C.f)(He,ae,()=>He.next(De),se),()=>(0,C.f)(He,ae,()=>He.complete(),se),De=>(0,C.f)(He,ae,()=>He.error(De),se)))})}},6699:(yt,be,B)=>{B.d(be,{R:()=>oe});var C=B(9360),m=B(8251);function oe(ae,se){return(0,C.e)(function K(ae,se,Ee,He,De){return(X,ne)=>{let ue=Ee,Oe=se,je=0;X.subscribe((0,m.x)(ne,Je=>{const Ue=je++;Oe=ue?ae(Oe,Je,Ue):(ue=!0,Je),He&&ne.next(Oe)},De&&(()=>{ue&&ne.next(Oe),ne.complete()})))}}(ae,se,arguments.length>=2,!0))}},3020:(yt,be,B)=>{B.d(be,{B:()=>ae});var C=B(4829),m=B(8645),K=B(305),oe=B(9360);function ae(Ee={}){const{connector:He=(()=>new m.x),resetOnError:De=!0,resetOnComplete:X=!0,resetOnRefCountZero:ne=!0}=Ee;return ue=>{let Oe,je,Je,Ue=0,rt=!1,lt=!1;const Jt=()=>{je?.unsubscribe(),je=void 0},un=()=>{Jt(),Oe=Je=void 0,rt=lt=!1},Ie=()=>{const Le=Oe;un(),Le?.unsubscribe()};return(0,oe.e)((Le,pe)=>{Ue++,!lt&&!rt&&Jt();const We=Je=Je??He();pe.add(()=>{Ue--,0===Ue&&!lt&&!rt&&(je=se(Ie,ne))}),We.subscribe(pe),!Oe&&Ue>0&&(Oe=new K.Hp({next:Ze=>We.next(Ze),error:Ze=>{lt=!0,Jt(),je=se(un,De,Ze),We.error(Ze)},complete:()=>{rt=!0,Jt(),je=se(un,X),We.complete()}}),(0,C.Xf)(Le).subscribe(Oe))})(ue)}}function se(Ee,He,...De){if(!0===He)return void Ee();if(!1===He)return;const X=new K.Hp({next:()=>{X.unsubscribe(),Ee()}});return(0,C.Xf)(He(...De)).subscribe(X)}},7921:(yt,be,B)=>{B.d(be,{O:()=>oe});var C=B(5211),m=B(9940),K=B(9360);function oe(...ae){const se=(0,m.yG)(ae);return(0,K.e)((Ee,He)=>{(se?(0,C.z)(ae,Ee,se):(0,C.z)(ae,Ee)).subscribe(He)})}},5137:(yt,be,B)=>{B.d(be,{R:()=>m});var C=B(9360);function m(K,oe=0){return(0,C.e)((ae,se)=>{se.add(K.schedule(()=>ae.subscribe(se),oe))})}},4664:(yt,be,B)=>{B.d(be,{w:()=>oe});var C=B(4829),m=B(9360),K=B(8251);function oe(ae,se){return(0,m.e)((Ee,He)=>{let De=null,X=0,ne=!1;const ue=()=>ne&&!De&&He.complete();Ee.subscribe((0,K.x)(He,Oe=>{De?.unsubscribe();let je=0;const Je=X++;(0,C.Xf)(ae(Oe,Je)).subscribe(De=(0,K.x)(He,Ue=>He.next(se?se(Oe,Ue,Je,je++):Ue),()=>{De=null,ue()}))},()=>{ne=!0,ue()}))})}},8180:(yt,be,B)=>{B.d(be,{q:()=>oe});var C=B(6232),m=B(9360),K=B(8251);function oe(ae){return ae<=0?()=>C.E:(0,m.e)((se,Ee)=>{let He=0;se.subscribe((0,K.x)(Ee,De=>{++He<=ae&&(Ee.next(De),ae<=He&&Ee.complete())}))})}},9397:(yt,be,B)=>{B.d(be,{b:()=>ae});var C=B(4674),m=B(9360),K=B(8251),oe=B(2737);function ae(se,Ee,He){const De=(0,C.m)(se)||Ee||He?{next:se,error:Ee,complete:He}:se;return De?(0,m.e)((X,ne)=>{var ue;null===(ue=De.subscribe)||void 0===ue||ue.call(De);let Oe=!0;X.subscribe((0,K.x)(ne,je=>{var Je;null===(Je=De.next)||void 0===Je||Je.call(De,je),ne.next(je)},()=>{var je;Oe=!1,null===(je=De.complete)||void 0===je||je.call(De),ne.complete()},je=>{var Je;Oe=!1,null===(Je=De.error)||void 0===Je||Je.call(De,je),ne.error(je)},()=>{var je,Je;Oe&&(null===(je=De.unsubscribe)||void 0===je||je.call(De)),null===(Je=De.finalize)||void 0===Je||Je.call(De)}))}):oe.y}},3026:(yt,be,B)=>{B.d(be,{T:()=>oe});var C=B(6973),m=B(9360),K=B(8251);function oe(se=ae){return(0,m.e)((Ee,He)=>{let De=!1;Ee.subscribe((0,K.x)(He,X=>{De=!0,He.next(X)},()=>De?He.complete():He.error(se())))})}function ae(){return new C.K}},7599:(yt,be,B)=>{B.d(be,{z:()=>C});const C={setTimeout(m,K,...oe){const{delegate:ae}=C;return ae?.setTimeout?ae.setTimeout(m,K,...oe):setTimeout(m,K,...oe)},clearTimeout(m){const{delegate:K}=C;return(K?.clearTimeout||clearTimeout)(m)},delegate:void 0}},4971:(yt,be,B)=>{B.d(be,{h:()=>m});const m=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(yt,be,B)=>{B.d(be,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(yt,be,B)=>{B.d(be,{K:()=>m});const m=(0,B(2306).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(yt,be,B)=>{B.d(be,{_6:()=>se,jO:()=>oe,yG:()=>ae});var C=B(4674),m=B(671);function K(Ee){return Ee[Ee.length-1]}function oe(Ee){return(0,C.m)(K(Ee))?Ee.pop():void 0}function ae(Ee){return(0,m.K)(K(Ee))?Ee.pop():void 0}function se(Ee,He){return"number"==typeof K(Ee)?Ee.pop():He}},7453:(yt,be,B)=>{B.d(be,{D:()=>ae});const{isArray:C}=Array,{getPrototypeOf:m,prototype:K,keys:oe}=Object;function ae(Ee){if(1===Ee.length){const He=Ee[0];if(C(He))return{args:He,keys:null};if(function se(Ee){return Ee&&"object"==typeof Ee&&m(Ee)===K}(He)){const De=oe(He);return{args:De.map(X=>He[X]),keys:De}}}return{args:Ee,keys:null}}},9039:(yt,be,B)=>{function C(m,K){if(m){const oe=m.indexOf(K);0<=oe&&m.splice(oe,1)}}B.d(be,{P:()=>C})},2306:(yt,be,B)=>{function C(m){const oe=m(ae=>{Error.call(ae),ae.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}B.d(be,{d:()=>C})},2714:(yt,be,B)=>{function C(m,K){return m.reduce((oe,ae,se)=>(oe[ae]=K[se],oe),{})}B.d(be,{n:()=>C})},1441:(yt,be,B)=>{B.d(be,{O:()=>oe,x:()=>K});var C=B(2653);let m=null;function K(ae){if(C.config.useDeprecatedSynchronousErrorHandling){const se=!m;if(se&&(m={errorThrown:!1,error:null}),ae(),se){const{errorThrown:Ee,error:He}=m;if(m=null,Ee)throw He}}else ae()}function oe(ae){C.config.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=ae)}},7103:(yt,be,B)=>{function C(m,K,oe,ae=0,se=!1){const Ee=K.schedule(function(){oe(),se?m.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(m.add(Ee),!se)return Ee}B.d(be,{f:()=>C})},2737:(yt,be,B)=>{function C(m){return m}B.d(be,{y:()=>C})},4266:(yt,be,B)=>{B.d(be,{z:()=>C});const C=m=>m&&"number"==typeof m.length&&"function"!=typeof m},5726:(yt,be,B)=>{B.d(be,{D:()=>m});var C=B(4674);function m(K){return Symbol.asyncIterator&&(0,C.m)(K?.[Symbol.asyncIterator])}},4674:(yt,be,B)=>{function C(m){return"function"==typeof m}B.d(be,{m:()=>C})},8382:(yt,be,B)=>{B.d(be,{c:()=>K});var C=B(4850),m=B(4674);function K(oe){return(0,m.m)(oe[C.L])}},3664:(yt,be,B)=>{B.d(be,{T:()=>K});var C=B(4971),m=B(4674);function K(oe){return(0,m.m)(oe?.[C.h])}},4026:(yt,be,B)=>{B.d(be,{t:()=>m});var C=B(4674);function m(K){return(0,C.m)(K?.then)}},541:(yt,be,B)=>{B.d(be,{L:()=>oe,Q:()=>K});var C=B(7582),m=B(4674);function K(ae){return(0,C.FC)(this,arguments,function*(){const Ee=ae.getReader();try{for(;;){const{value:He,done:De}=yield(0,C.qq)(Ee.read());if(De)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(He)}}finally{Ee.releaseLock()}})}function oe(ae){return(0,m.m)(ae?.getReader)}},671:(yt,be,B)=>{B.d(be,{K:()=>m});var C=B(4674);function m(K){return K&&(0,C.m)(K.schedule)}},9360:(yt,be,B)=>{B.d(be,{A:()=>m,e:()=>K});var C=B(4674);function m(oe){return(0,C.m)(oe?.lift)}function K(oe){return ae=>{if(m(ae))return ae.lift(function(se){try{return oe(se,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(yt,be,B)=>{B.d(be,{Z:()=>oe});var C=B(7398);const{isArray:m}=Array;function oe(ae){return(0,C.U)(se=>function K(ae,se){return m(se)?ae(...se):ae(se)}(ae,se))}},2420:(yt,be,B)=>{function C(){}B.d(be,{Z:()=>C})},8407:(yt,be,B)=>{B.d(be,{U:()=>K,z:()=>m});var C=B(2737);function m(...oe){return K(oe)}function K(oe){return 0===oe.length?C.y:1===oe.length?oe[0]:function(se){return oe.reduce((Ee,He)=>He(Ee),se)}}},3894:(yt,be,B)=>{B.d(be,{h:()=>K});var C=B(2653),m=B(7599);function K(oe){m.z.setTimeout(()=>{const{onUnhandledError:ae}=C.config;if(!ae)throw oe;ae(oe)})}},9853:(yt,be,B)=>{function C(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(be,{z:()=>C})},6814:(yt,be,B)=>{B.d(be,{Do:()=>Ue,EM:()=>ls,H9:()=>Bt,HT:()=>oe,JF:()=>cs,K0:()=>se,Mx:()=>si,O5:()=>Vu,PM:()=>Qa,S$:()=>Oe,V_:()=>He,Ye:()=>rt,b0:()=>Je,bD:()=>Vn,ez:()=>Zr,q:()=>K,sg:()=>sa,w_:()=>ae});var C=B(5879);let m=null;function K(){return m}function oe(A){m||(m=A)}class ae{}const se=new C.OlP("DocumentToken");let Ee=(()=>{class A{historyGo(x){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=C.Yz7({token:A,factory:function(){return(0,C.f3M)(De)},providedIn:"platform"})}return A})();const He=new C.OlP("Location Initialized");let De=(()=>{class A extends Ee{constructor(){super(),this._doc=(0,C.f3M)(se),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(x){const L=K().getGlobalEventTarget(this._doc,"window");return L.addEventListener("popstate",x,!1),()=>L.removeEventListener("popstate",x)}onHashChange(x){const L=K().getGlobalEventTarget(this._doc,"window");return L.addEventListener("hashchange",x,!1),()=>L.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,L,Q){this._history.pushState(x,L,Q)}replaceState(x,L,Q){this._history.replaceState(x,L,Q)}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=C.Yz7({token:A,factory:function(){return new A},providedIn:"platform"})}return A})();function X(A,F){if(0==A.length)return F;if(0==F.length)return A;let x=0;return A.endsWith("/")&&x++,F.startsWith("/")&&x++,2==x?A+F.substring(1):1==x?A+F:A+"/"+F}function ne(A){const F=A.match(/#|\?|$/),x=F&&F.index||A.length;return A.slice(0,x-("/"===A[x-1]?1:0))+A.slice(x)}function ue(A){return A&&"?"!==A[0]?"?"+A:A}let Oe=(()=>{class A{historyGo(x){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=C.Yz7({token:A,factory:function(){return(0,C.f3M)(Je)},providedIn:"root"})}return A})();const je=new C.OlP("appBaseHref");let Je=(()=>{class A extends Oe{constructor(x,L){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=L??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return X(this._baseHref,x)}path(x=!1){const L=this._platformLocation.pathname+ue(this._platformLocation.search),Q=this._platformLocation.hash;return Q&&x?`${L}${Q}`:L}pushState(x,L,Q,_e){const Fe=this.prepareExternalUrl(Q+ue(_e));this._platformLocation.pushState(x,L,Fe)}replaceState(x,L,Q,_e){const Fe=this.prepareExternalUrl(Q+ue(_e));this._platformLocation.replaceState(x,L,Fe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(L){return new(L||A)(C.LFG(Ee),C.LFG(je,8))};static#t=this.\u0275prov=C.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Ue=(()=>{class A extends Oe{constructor(x,L){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=L&&(this._baseHref=L)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let L=this._platformLocation.hash;return null==L&&(L="#"),L.length>0?L.substring(1):L}prepareExternalUrl(x){const L=X(this._baseHref,x);return L.length>0?"#"+L:L}pushState(x,L,Q,_e){let Fe=this.prepareExternalUrl(Q+ue(_e));0==Fe.length&&(Fe=this._platformLocation.pathname),this._platformLocation.pushState(x,L,Fe)}replaceState(x,L,Q,_e){let Fe=this.prepareExternalUrl(Q+ue(_e));0==Fe.length&&(Fe=this._platformLocation.pathname),this._platformLocation.replaceState(x,L,Fe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(L){return new(L||A)(C.LFG(Ee),C.LFG(je,8))};static#t=this.\u0275prov=C.Yz7({token:A,factory:A.\u0275fac})}return A})(),rt=(()=>{class A{constructor(x){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const L=this._locationStrategy.getBaseHref();this._basePath=function Ie(A){if(new RegExp("^(https?:)?//").test(A)){const[,x]=A.split(/\/\/[^\/]+/);return x}return A}(ne(un(L))),this._locationStrategy.onPopState(Q=>{this._subject.emit({url:this.path(!0),pop:!0,state:Q.state,type:Q.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,L=""){return this.path()==this.normalize(x+ue(L))}normalize(x){return A.stripTrailingSlash(function Jt(A,F){if(!A||!F.startsWith(A))return F;const x=F.substring(A.length);return""===x||["/",";","?","#"].includes(x[0])?x:F}(this._basePath,un(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,L="",Q=null){this._locationStrategy.pushState(Q,"",x,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+ue(L)),Q)}replaceState(x,L="",Q=null){this._locationStrategy.replaceState(Q,"",x,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+ue(L)),Q)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(L=>{this._notifyUrlChangeListeners(L.url,L.state)})),()=>{const L=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(L,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",L){this._urlChangeListeners.forEach(Q=>Q(x,L))}subscribe(x,L,Q){return this._subject.subscribe({next:x,error:L,complete:Q})}static#e=this.normalizeQueryParams=ue;static#t=this.joinWithSlash=X;static#n=this.stripTrailingSlash=ne;static#r=this.\u0275fac=function(L){return new(L||A)(C.LFG(Oe))};static#i=this.\u0275prov=C.Yz7({token:A,factory:function(){return function lt(){return new rt((0,C.LFG)(Oe))}()},providedIn:"root"})}return A})();function un(A){return A.replace(/\/index.html$/,"")}const Le={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var pe=function(A){return A[A.Decimal=0]="Decimal",A[A.Percent=1]="Percent",A[A.Currency=2]="Currency",A[A.Scientific=3]="Scientific",A}(pe||{}),kt=function(A){return A[A.Decimal=0]="Decimal",A[A.Group=1]="Group",A[A.List=2]="List",A[A.PercentSign=3]="PercentSign",A[A.PlusSign=4]="PlusSign",A[A.MinusSign=5]="MinusSign",A[A.Exponential=6]="Exponential",A[A.SuperscriptingExponent=7]="SuperscriptingExponent",A[A.PerMille=8]="PerMille",A[A.Infinity=9]="Infinity",A[A.NaN=10]="NaN",A[A.TimeSeparator=11]="TimeSeparator",A[A.CurrencyDecimal=12]="CurrencyDecimal",A[A.CurrencyGroup=13]="CurrencyGroup",A}(kt||{});function Me(A,F){const x=(0,C.cg1)(A),L=x[C.wAp.NumberSymbols][F];if(typeof L>"u"){if(F===kt.CurrencyDecimal)return x[C.wAp.NumberSymbols][kt.Decimal];if(F===kt.CurrencyGroup)return x[C.wAp.NumberSymbols][kt.Group]}return L}const W=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ie=22,Be=".",tt="0",vt=";",xt=",",Pt="#";function ki(A,F,x,L,Q){const Fe=function he(A,F="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},L=A.split(vt),Q=L[0],_e=L[1],Fe=-1!==Q.indexOf(Be)?Q.split(Be):[Q.substring(0,Q.lastIndexOf(tt)+1),Q.substring(Q.lastIndexOf(tt)+1)],Tt=Fe[0],Mt=Fe[1]||"";x.posPre=Tt.substring(0,Tt.indexOf(Pt));for(let mn=0;mn<Mt.length;mn++){const en=Mt.charAt(mn);en===tt?x.minFrac=x.maxFrac=mn+1:en===Pt?x.maxFrac=mn+1:x.posSuf+=en}const gn=Tt.split(xt);if(x.gSize=gn[1]?gn[1].length:0,x.lgSize=gn[2]||gn[1]?(gn[2]||gn[1]).length:0,_e){const mn=Q.length-x.posPre.length-x.posSuf.length,en=_e.indexOf(Pt);x.negPre=_e.substring(0,en).replace(/'/g,""),x.negSuf=_e.slice(en+mn).replace(/'/g,"")}else x.negPre=F+x.posPre,x.negSuf=x.posSuf;return x}(function Ve(A,F){return(0,C.cg1)(A)[C.wAp.NumberFormats][F]}(F,pe.Currency),Me(F,kt.MinusSign));return Fe.minFrac=function Er(A){let F;const x=Le[A];return x&&(F=x[2]),"number"==typeof F?F:2}(L),Fe.maxFrac=Fe.minFrac,function pi(A,F,x,L,Q,_e,Fe=!1){let Tt="",Mt=!1;if(isFinite(A)){let gn=function pt(A){let L,Q,_e,Fe,Tt,F=Math.abs(A)+"",x=0;for((Q=F.indexOf(Be))>-1&&(F=F.replace(Be,"")),(_e=F.search(/e/i))>0?(Q<0&&(Q=_e),Q+=+F.slice(_e+1),F=F.substring(0,_e)):Q<0&&(Q=F.length),_e=0;F.charAt(_e)===tt;_e++);if(_e===(Tt=F.length))L=[0],Q=1;else{for(Tt--;F.charAt(Tt)===tt;)Tt--;for(Q-=_e,L=[],Fe=0;_e<=Tt;_e++,Fe++)L[Fe]=Number(F.charAt(_e))}return Q>ie&&(L=L.splice(0,ie-1),x=Q-1,Q=1),{digits:L,exponent:x,integerLen:Q}}(A);Fe&&(gn=function Ge(A){if(0===A.digits[0])return A;const F=A.digits.length-A.integerLen;return A.exponent?A.exponent+=2:(0===F?A.digits.push(0,0):1===F&&A.digits.push(0),A.integerLen+=2),A}(gn));let mn=F.minInt,en=F.minFrac,pn=F.maxFrac;if(_e){const Yr=_e.match(W);if(null===Yr)throw new Error(`${_e} is not a valid digit info`);const Vi=Yr[1],hr=Yr[3],Ci=Yr[5];null!=Vi&&(mn=ct(Vi)),null!=hr&&(en=ct(hr)),null!=Ci?pn=ct(Ci):null!=hr&&en>pn&&(pn=en)}!function At(A,F,x){if(F>x)throw new Error(`The minimum number of digits after fraction (${F}) is higher than the maximum (${x}).`);let L=A.digits,Q=L.length-A.integerLen;const _e=Math.min(Math.max(F,Q),x);let Fe=_e+A.integerLen,Tt=L[Fe];if(Fe>0){L.splice(Math.max(A.integerLen,Fe));for(let en=Fe;en<L.length;en++)L[en]=0}else{Q=Math.max(0,Q),A.integerLen=1,L.length=Math.max(1,Fe=_e+1),L[0]=0;for(let en=1;en<Fe;en++)L[en]=0}if(Tt>=5)if(Fe-1<0){for(let en=0;en>Fe;en--)L.unshift(0),A.integerLen++;L.unshift(1),A.integerLen++}else L[Fe-1]++;for(;Q<Math.max(0,_e);Q++)L.push(0);let Mt=0!==_e;const gn=F+A.integerLen,mn=L.reduceRight(function(en,pn,Nn,dr){return dr[Nn]=(pn+=en)<10?pn:pn-10,Mt&&(0===dr[Nn]&&Nn>=gn?dr.pop():Mt=!1),pn>=10?1:0},0);mn&&(L.unshift(mn),A.integerLen++)}(gn,en,pn);let Nn=gn.digits,dr=gn.integerLen;const Vs=gn.exponent;let ps=[];for(Mt=Nn.every(Yr=>!Yr);dr<mn;dr++)Nn.unshift(0);for(;dr<0;dr++)Nn.unshift(0);dr>0?ps=Nn.splice(dr,Nn.length):(ps=Nn,Nn=[0]);const _a=[];for(Nn.length>=F.lgSize&&_a.unshift(Nn.splice(-F.lgSize,Nn.length).join(""));Nn.length>F.gSize;)_a.unshift(Nn.splice(-F.gSize,Nn.length).join(""));Nn.length&&_a.unshift(Nn.join("")),Tt=_a.join(Me(x,L)),ps.length&&(Tt+=Me(x,Q)+ps.join("")),Vs&&(Tt+=Me(x,kt.Exponential)+"+"+Vs)}else Tt=Me(x,kt.Infinity);return Tt=A<0&&!Mt?F.negPre+Tt+F.negSuf:F.posPre+Tt+F.posSuf,Tt}(A,Fe,F,kt.CurrencyGroup,kt.CurrencyDecimal,Q).replace("\xa4",x).replace("\xa4","").trim()}function ct(A){const F=parseInt(A);if(isNaN(F))throw new Error("Invalid integer literal when parsing "+A);return F}function si(A,F){F=encodeURIComponent(F);for(const x of A.split(";")){const L=x.indexOf("="),[Q,_e]=-1==L?[x,""]:[x.slice(0,L),x.slice(L+1)];if(Q.trim()===F)return decodeURIComponent(_e)}return null}class zl{constructor(F,x,L,Q){this.$implicit=F,this.ngForOf=x,this.index=L,this.count=Q}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sa=(()=>{class A{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,L,Q){this._viewContainer=x,this._template=L,this._differs=Q,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const L=this._viewContainer;x.forEachOperation((Q,_e,Fe)=>{if(null==Q.previousIndex)L.createEmbeddedView(this._template,new zl(Q.item,this._ngForOf,-1,-1),null===Fe?void 0:Fe);else if(null==Fe)L.remove(null===_e?void 0:_e);else if(null!==_e){const Tt=L.get(_e);L.move(Tt,Fe),qs(Tt,Q)}});for(let Q=0,_e=L.length;Q<_e;Q++){const Tt=L.get(Q).context;Tt.index=Q,Tt.count=_e,Tt.ngForOf=this._ngForOf}x.forEachIdentityChange(Q=>{qs(L.get(Q.currentIndex),Q)})}static ngTemplateContextGuard(x,L){return!0}static#e=this.\u0275fac=function(L){return new(L||A)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))};static#t=this.\u0275dir=C.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function qs(A,F){A.context.$implicit=F.item}let Vu=(()=>{class A{constructor(x,L){this._viewContainer=x,this._context=new So,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=L}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Wl("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Wl("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,L){return!0}static#e=this.\u0275fac=function(L){return new(L||A)(C.Y36(C.s_b),C.Y36(C.Rgc))};static#t=this.\u0275dir=C.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class So{constructor(){this.$implicit=null,this.ngIf=null}}function Wl(A,F){if(F&&!F.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,C.AaK)(F)}'.`)}let Bt=(()=>{class A{constructor(x,L="USD"){this._locale=x,this._defaultCurrencyCode=L}transform(x,L=this._defaultCurrencyCode,Q="symbol",_e,Fe){if(!function fn(A){return!(null==A||""===A||A!=A)}(x))return null;Fe=Fe||this._locale,"boolean"==typeof Q&&(Q=Q?"symbol":"code");let Tt=L||this._defaultCurrencyCode;"code"!==Q&&(Tt="symbol"===Q||"symbol-narrow"===Q?function vr(A,F,x="en"){const L=function Dt(A){return(0,C.cg1)(A)[C.wAp.Currencies]}(x)[A]||Le[A]||[],Q=L[1];return"narrow"===F&&"string"==typeof Q?Q:L[0]||A}(Tt,"symbol"===Q?"wide":"narrow",Fe):Q);try{return ki(function qr(A){if("string"==typeof A&&!isNaN(Number(A)-parseFloat(A)))return Number(A);if("number"!=typeof A)throw new Error(`${A} is not a number`);return A}(x),Fe,Tt,L,_e)}catch(Mt){throw function Wi(A,F){return new C.vHH(2100,!1)}()}}static#e=this.\u0275fac=function(L){return new(L||A)(C.Y36(C.soG,16),C.Y36(C.EJc,16))};static#t=this.\u0275pipe=C.Yjl({name:"currency",type:A,pure:!0,standalone:!0})}return A})();let Zr=(()=>{class A{static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275mod=C.oAB({type:A});static#n=this.\u0275inj=C.cJS({})}return A})();const Vn="browser",as="server";function Qa(A){return A===as}let ls=(()=>{class A{static#e=this.\u0275prov=(0,C.Yz7)({token:A,providedIn:"root",factory:()=>new Ns((0,C.LFG)(se),window)})}return A})();class Ns{constructor(F,x){this.document=F,this.window=x,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const x=function Os(A,F){const x=A.getElementById(F)||A.getElementsByName(F)[0];if(x)return x;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const L=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let Q=L.currentNode;for(;Q;){const _e=Q.shadowRoot;if(_e){const Fe=_e.getElementById(F)||_e.querySelector(`[name="${F}"]`);if(Fe)return Fe}Q=L.nextNode()}}return null}(this.document,F);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(F){this.supportsScrolling()&&(this.window.history.scrollRestoration=F)}scrollToElement(F){const x=F.getBoundingClientRect(),L=x.left+this.window.pageXOffset,Q=x.top+this.window.pageYOffset,_e=this.offset();this.window.scrollTo(L-_e[0],Q-_e[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class cs{}},5879:(yt,be,B)=>{B.d(be,{$8M:()=>jp,$WT:()=>Ps,$Z:()=>Cf,AFp:()=>bg,ALo:()=>HC,AaK:()=>ue,CHM:()=>Bi,CRH:()=>Wc,EJc:()=>JS,EpF:()=>zf,F4k:()=>Xd,FYo:()=>xg,FiY:()=>hl,GfV:()=>nE,Gpc:()=>Je,HDt:()=>mD,JOm:()=>gl,KtG:()=>q,LFG:()=>vt,LSH:()=>Wv,Lbi:()=>kd,Lck:()=>rp,MAs:()=>sy,MMx:()=>RC,NdJ:()=>Jg,O4$:()=>Uo,Ojb:()=>pf,OlP:()=>wt,Oqu:()=>sm,P3R:()=>Cw,PXZ:()=>Gs,Q6J:()=>qE,QGY:()=>Qg,Qsj:()=>kw,R0b:()=>Mi,RDi:()=>kA,Rgc:()=>wm,SBq:()=>Cl,Sil:()=>_D,Suo:()=>e0,TTD:()=>en,TgZ:()=>oy,VuI:()=>FR,W1O:()=>ap,X6Q:()=>yR,XFs:()=>Rt,Xpm:()=>ql,Xq5:()=>Pl,Xts:()=>Tg,Y36:()=>xu,YKP:()=>bC,YNc:()=>ny,Yjl:()=>aa,Yz7:()=>Vt,Z0I:()=>Dn,ZZ4:()=>P0,_Bn:()=>Ll,_UZ:()=>$f,_c5:()=>jD,_uU:()=>Ey,aQg:()=>M0,c2e:()=>d0,cJS:()=>Qn,cg1:()=>AI,dDg:()=>hR,dqk:()=>An,eFA:()=>AD,eJc:()=>r0,ekj:()=>rm,eoX:()=>m0,f3M:()=>Pt,g9A:()=>Oa,h0i:()=>Ba,hGG:()=>HD,hij:()=>Iy,iGM:()=>ZC,ifc:()=>pt,ip1:()=>gD,jDz:()=>mm,kL8:()=>Ny,kcU:()=>cu,lG2:()=>Hu,lqb:()=>sr,lri:()=>uv,n5z:()=>_d,oAB:()=>oa,oxw:()=>cy,q4F:()=>Ud,qFp:()=>Xx,qLn:()=>Ko,qOj:()=>xc,qZA:()=>Yg,rWj:()=>g0,rg0:()=>_e,s9C:()=>tm,sBO:()=>hv,s_b:()=>qI,soG:()=>nv,tb:()=>Sm,tp0:()=>Wn,uIk:()=>xl,vHH:()=>Ie,vpe:()=>Ru,wAp:()=>ah,xi3:()=>qy,xp6:()=>yE,z2F:()=>Ul,zSh:()=>d_,zs3:()=>xi});var C=B(8645),m=B(7394),K=B(5592),oe=B(3019),ae=B(5619),se=B(2096),Ee=B(3020),He=B(4664),De=B(3997);function X(i){for(let o in i)if(i[o]===X)return o;throw Error("Could not find renamed property on target object.")}function ne(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Oe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const je=X({__forward_ref__:X});function Je(i){return i.__forward_ref__=Je,i.toString=function(){return ue(this())},i}function Ue(i){return rt(i)?i():i}function rt(i){return"function"==typeof i&&i.hasOwnProperty(je)&&i.__forward_ref__===Je}function lt(i){return i&&!!i.\u0275providers}const un="https://g.co/ng/security#xss";class Ie extends Error{constructor(o,a){super(function Le(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function kt(i,o){throw new Ie(-201,!1)}function _t(i,o){null==i&&function et(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Vt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Qn(i){return{providers:i.providers||[],imports:i.imports||[]}}function xn(i){return It(i,Er)||It(i,ur)}function Dn(i){return null!==xn(i)}function It(i,o){return i.hasOwnProperty(o)?i[o]:null}function ts(i){return i&&(i.hasOwnProperty(Ln)||i.hasOwnProperty($n))?i[Ln]:null}const Er=X({\u0275prov:X}),Ln=X({\u0275inj:X}),ur=X({ngInjectableDef:X}),$n=X({ngInjectorDef:X});var Rt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Rt||{});let Xt;function Fn(i){const o=Xt;return Xt=i,o}function $r(i,o,a){const l=xn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Rt.Optional?null:void 0!==o?o:void kt(ue(i))}const An=globalThis;class wt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Vt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Gr={},zr="__NG_DI_FLAG__",ii="ngTempTokenPath",$=/\n/gm,H="__source";let W;function Be(i){const o=W;return W=i,o}function tt(i,o=Rt.Default){if(void 0===W)throw new Ie(-203,!1);return null===W?$r(i,void 0,o):W.get(i,o&Rt.Optional?null:void 0,o)}function vt(i,o=Rt.Default){return(function bt(){return Xt}()||tt)(Ue(i),o)}function Pt(i,o=Rt.Default){return vt(i,jt(o))}function jt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Bn(i){const o=[];for(let a=0;a<i.length;a++){const l=Ue(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ie(900,!1);let d,p=Rt.Default;for(let y=0;y<l.length;y++){const w=l[y],S=ki(w);"number"==typeof S?-1===S?d=w.token:p|=S:d=w}o.push(vt(d,p))}else o.push(vt(l))}return o}function pi(i,o){return i[zr]=o,i.prototype[zr]=o,i}function ki(i){return i[zr]}function he(i){return{toString:i}.toString()}var Ge=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Ge||{}),pt=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(pt||{});const At={},ct=[],rn=X({\u0275cmp:X}),gr=X({\u0275dir:X}),jn=X({\u0275pipe:X}),Ti=X({\u0275mod:X}),si=X({\u0275fac:X}),Gi=X({__NG_ELEMENT_ID__:X}),Wa=X({__NG_ENV_ID__:X});function Jc(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}function Ao(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const p=a[l++],y=a[l++],w=a[l++];i.setAttribute(o,y,w,p)}else{const p=d,y=a[++l];zl(p)?i.setProperty(o,p,y):i.setAttribute(o,p,y),l++}}return l}function Rn(i){return 3===i||4===i||6===i}function zl(i){return 64===i.charCodeAt(0)}function sa(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||qs(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function qs(i,o,a,l,d){let p=0,y=i.length;if(-1===o)y=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,o),p=y+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}const bo="ng-template";function Vu(i,o,a){let l=0,d=!0;for(;l<i.length;){let p=i[l++];if("string"==typeof p&&d){const y=i[l++];if(a&&"class"===p&&-1!==Jc(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<i.length&&"string"==typeof(p=i[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function So(i){return 4===i.type&&i.value!==bo}function Wl(i,o,a){return o===(4!==i.type||a?i.value:bo)}function qa(i,o,a){let l=4;const d=i.attrs||[],p=function ss(i){for(let o=0;o<i.length;o++)if(Rn(i[o]))return o;return i.length}(d);let y=!1;for(let w=0;w<o.length;w++){const S=o[w];if("number"!=typeof S){if(!y)if(4&l){if(l=2|1&l,""!==S&&!Wl(i,S,a)||""===S&&1===o.length){if(oi(l))return!1;y=!0}}else{const O=8&l?S:o[++w];if(8&l&&null!==i.attrs){if(!Vu(i.attrs,O,a)){if(oi(l))return!1;y=!0}continue}const Z=zi(8&l?"class":S,d,So(i),a);if(-1===Z){if(oi(l))return!1;y=!0;continue}if(""!==O){let re;re=Z>p?"":d[Z+1].toLowerCase();const le=8&l?re:null;if(le&&-1!==Jc(le,O,0)||2&l&&O!==re){if(oi(l))return!1;y=!0}}}}else{if(!y&&!oi(l)&&!oi(S))return!1;if(y&&oi(S))continue;y=!1,l=S|1&l}}return oi(l)||y}function oi(i){return 0==(1&i)}function zi(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function co(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function Or(i,o,a=!1){for(let l=0;l<o.length;l++)if(qa(i,o[l],a))return!0;return!1}function Ka(i,o){return i?":not("+o.trim()+")":o}function Uu(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!oi(y)&&(o+=Ka(p,d),d=""),l=y,p=p||!oi(l);a++}return""!==d&&(o+=Ka(p,d)),o}function ql(i){return he(()=>{const o=xo(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||pt.Emulated,styles:i.styles||ct,_:null,schemas:i.schemas||null,tView:null,id:""};Ya(a);const l=i.dependencies;return a.directiveDefs=xs(l,!1),a.pipeDefs=xs(l,!0),a.id=function Ms(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Po(i){return on(i)||lr(i)}function Bu(i){return null!==i}function oa(i){return he(()=>({type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ho(i,o){if(null==i)return At;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}function Hu(i){return he(()=>{const o=xo(i);return Ya(o),o})}function aa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function on(i){return i[rn]||null}function lr(i){return i[gr]||null}function Wr(i){return i[jn]||null}function Ps(i){const o=on(i)||lr(i)||Wr(i);return null!==o&&o.standalone}function kr(i,o){const a=i[Ti]||null;if(!a&&!0===o)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function xo(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||At,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ho(i.inputs,o),outputs:ho(i.outputs)}}function Ya(i){i.features?.forEach(o=>o(i))}function xs(i,o){if(!i)return null;const a=o?Wr:Po;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(Bu)}const Gn=0,it=1,Bt=2,fn=3,qr=4,Mo=5,zn=6,Zr=7,Vn=8,as=9,Lr=10,Ut=11,Zs=12,Qa=13,us=14,cr=15,fo=16,ls=17,Ns=18,Os=19,ks=20,cs=21,ds=22,Fr=23,Ja=24,Zt=25,Ys=1,Ls=2,hs=7,Qs=9,rr=11;function mr(i){return Array.isArray(i)&&"object"==typeof i[Ys]}function Un(i){return Array.isArray(i)&&!0===i[Ys]}function la(i){return 0!=(4&i.flags)}function Li(i){return i.componentOffset>-1}function gi(i){return 1==(1&i.flags)}function qi(i){return!!i.template}function Zl(i){return 0!=(512&i[Bt])}function Js(i,o){return i.hasOwnProperty(si)?i[si]:null}let wr=null,fs=!1;function Tr(i){const o=wr;return wr=i,o}const nu={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ru(i){if(!Fs(i)||i.dirty){if(!i.producerMustRecompute(i)&&!Ku(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function Lo(i){i.dirty=!0,function ko(i){if(void 0===i.liveConsumerNode)return;const o=fs;fs=!0;try{for(const a of i.liveConsumerNode)a.dirty||Lo(a)}finally{fs=o}}(i),i.consumerMarkedDirty?.(i)}function fa(i){return i&&(i.nextProducerIndex=0),Tr(i)}function Zu(i,o){if(Tr(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Fs(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Kr(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Ku(i){Fo(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==a.version||(ru(a),l!==a.version))return!0}return!1}function Pe(i){if(Fo(i),Fs(i))for(let o=0;o<i.producerNode.length;o++)Kr(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Kr(i,o){if(function Yl(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Fo(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)Kr(i.producerNode[l],i.producerIndexOfThis[l]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];Fo(d),d.producerIndexOfThis[l]=o}}function Fs(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Fo(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let ma=null;function _e(i){const o=Tr(null);try{return i()}finally{Tr(o)}}const Tt=()=>{},Mt=(()=>({...nu,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:Tt}))();class mn{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function en(){return pn}function pn(i){return i.type.prototype.ngOnChanges&&(i.setInput=dr),Nn}function Nn(){const i=ps(this),o=i?.current;if(o){const a=i.previous;if(a===At)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function dr(i,o,a,l){const d=this.declaredInputs[a],p=ps(i)||function _a(i,o){return i[Vs]=o}(i,{previous:At,current:null}),y=p.current||(p.current={}),w=p.previous,S=w[d];y[d]=new mn(S&&S.currentValue,o,w===At),i[l]=o}en.ngInherit=!0;const Vs="__ngSimpleChanges__";function ps(i){return i[Vs]||null}const hr=function(i,o,a){},Ci="svg";function Jn(i){for(;Array.isArray(i);)i=i[Gn];return i}function ya(i,o){return Jn(o[i])}function mi(i,o){return Jn(o[i.index])}function Ju(i,o){return i.data[o]}function Ea(i,o){return i[o]}function yn(i,o){const a=o[i];return mr(a)?a:a[Gn]}function Xs(i,o){return null==o?null:i[o]}function Xu(i){i[ls]=0}function Jl(i){1024&i[Bt]||(i[Bt]|=1024,el(i,1))}function Mp(i){1024&i[Bt]&&(i[Bt]&=-1025,el(i,-1))}function el(i,o){let a=i[fn];if(null===a)return;a[Mo]+=o;let l=a;for(a=a[fn];null!==a&&(1===o&&1===l[Mo]||-1===o&&0===l[Mo]);)a[Mo]+=o,l=a,a=a[fn]}const Ft={lFrame:j(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function od(){return Ft.bindingsEnabled}function ze(){return Ft.lFrame.lView}function Ht(){return Ft.lFrame.tView}function Bi(i){return Ft.lFrame.contextLView=i,i[Vn]}function q(i){return Ft.lFrame.contextLView=null,i}function ai(){let i=Bs();for(;null!==i&&64===i.type;)i=i.parent;return i}function Bs(){return Ft.lFrame.currentTNode}function gs(i,o){const a=Ft.lFrame;a.currentTNode=i,a.isParent=o}function Lt(){return Ft.lFrame.isParent}function _r(){return Ft.lFrame.bindingIndex++}function il(i,o){const a=Ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,tc(o)}function tc(i){Ft.lFrame.currentDirectiveIndex=i}function _i(){return Ft.lFrame.currentQueryIndex}function T(i){Ft.lFrame.currentQueryIndex=i}function b(i){const o=i[it];return 2===o.type?o.declTNode:1===o.type?i[zn]:null}function I(i,o,a){if(a&Rt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&Rt.Host||(d=b(p),null===d||(p=p[us],10&d.type))););if(null===d)return!1;o=d,i=p}const l=Ft.lFrame=N();return l.currentTNode=o,l.lView=i,!0}function R(i){const o=N(),a=i[it];Ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function N(){const i=Ft.lFrame,o=null===i?null:i.child;return null===o?j(i):o}function j(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Y(){const i=Ft.lFrame;return Ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ye=Y;function me(){const i=Y();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function tn(){return Ft.lFrame.selectedIndex}function sn(i){Ft.lFrame.selectedIndex=i}function vn(){const i=Ft.lFrame;return Ju(i.tView,i.selectedIndex)}function Uo(){Ft.lFrame.currentNamespace=Ci}function cu(){!function eo(){Ft.lFrame.currentNamespace=null}()}let bh=!0;function du(){return bh}function Bo(i){bh=i}function nc(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:S,ngAfterViewChecked:O,ngOnDestroy:U}=p;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),S&&(i.viewHooks??=[]).push(-a,S),O&&((i.viewHooks??=[]).push(a,O),(i.viewCheckHooks??=[]).push(a,O)),null!=U&&(i.destroyHooks??=[]).push(a,U)}}function Sh(i,o,a){fu(i,o,3,a)}function Ta(i,o,a,l){(3&i[Bt])===a&&fu(i,o,a,l)}function Ca(i,o){let a=i[Bt];(3&a)===o&&(a&=8191,a+=1,i[Bt]=a)}function fu(i,o,a,l){const p=l??-1,y=o.length-1;let w=0;for(let S=void 0!==l?65535&i[ls]:0;S<y;S++)if("number"==typeof o[S+1]){if(w=o[S],null!=l&&w>=l)break}else o[S]<0&&(i[ls]+=65536),(w<p||-1==p)&&(jm(i,a,o,S),i[ls]=(4294901760&i[ls])+S+2),S++}function cd(i,o){hr(4,i,o);const a=Tr(null);try{o.call(i)}finally{Tr(a),hr(5,i,o)}}function jm(i,o,a,l){const d=a[l]<0,p=a[l+1],w=i[d?-a[l]:a[l]];d?i[Bt]>>13<i[ls]>>16&&(3&i[Bt])===o&&(i[Bt]+=8192,cd(w,p)):cd(w,p)}const sl=-1;class pu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function rc(i){return i!==sl}function Da(i){return 32767&i}function Aa(i,o){let a=function zm(i){return i>>16}(i),l=o;for(;a>0;)l=l[us],a--;return l}let fd=!0;function ic(i){const o=fd;return fd=i,o}const Vr=255,Jr=5;let xh=0;const ms={};function pd(i,o){const a=Lp(i,o);if(-1!==a)return a;const l=o[it];l.firstCreatePass&&(i.injectorIndex=o.length,kp(l.data,i),kp(o,null),kp(l.blueprint,null));const d=sc(i,o),p=i.injectorIndex;if(rc(d)){const y=Da(d),w=Aa(d,o),S=w[it].data;for(let O=0;O<8;O++)o[p+O]=w[y+O]|S[y+O]}return o[p+8]=d,p}function kp(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Lp(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function sc(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=ol(d),null===l)return sl;if(a++,d=d[us],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return sl}function Fp(i,o,a){!function Wm(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Gi)&&(l=a[Gi]),null==l&&(l=a[Gi]=xh++);const d=l&Vr;o.data[i+(d>>Jr)]|=1<<d}(i,o,a)}function gu(i,o,a){if(a&Rt.Optional||void 0!==i)return i;kt()}function oc(i,o,a,l){if(a&Rt.Optional&&void 0===l&&(l=null),!(a&(Rt.Self|Rt.Host))){const d=i[as],p=Fn(void 0);try{return d?d.get(o,l,a&Rt.Optional):$r(o,l,a&Rt.Optional)}finally{Fn(p)}}return gu(l,0,a)}function Mh(i,o,a,l=Rt.Default,d){if(null!==i){if(2048&o[Bt]&&!(l&Rt.Self)){const y=function Bp(i,o,a,l,d){let p=i,y=o;for(;null!==p&&null!==y&&2048&y[Bt]&&!(512&y[Bt]);){const w=gd(p,y,a,l|Rt.Self,ms);if(w!==ms)return w;let S=p.parent;if(!S){const O=y[ks];if(O){const U=O.get(a,ms,l);if(U!==ms)return U}S=ol(y),y=y[us]}p=S}return d}(i,o,a,l,ms);if(y!==ms)return y}const p=gd(i,o,a,l,ms);if(p!==ms)return p}return oc(o,a,l,d)}function gd(i,o,a,l,d){const p=function md(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Gi)?i[Gi]:void 0;return"number"==typeof o?o>=0?o&Vr:Up:o}(a);if("function"==typeof p){if(!I(o,i,l))return l&Rt.Host?gu(d,0,l):oc(o,a,l,d);try{let y;if(y=p(l),null!=y||l&Rt.Optional)return y;kt()}finally{ye()}}else if("number"==typeof p){let y=null,w=Lp(i,o),S=sl,O=l&Rt.Host?o[cr][zn]:null;for((-1===w||l&Rt.SkipSelf)&&(S=-1===w?sc(i,o):o[w+8],S!==sl&&Oh(l,!1)?(y=o[it],w=Da(S),o=Aa(S,o)):w=-1);-1!==w;){const U=o[it];if(Nh(p,w,U.data)){const Z=Pv(w,o,a,y,l,O);if(Z!==ms)return Z}S=o[w+8],S!==sl&&Oh(l,o[it].data[w+8]===O)&&Nh(p,w,o)?(y=U,w=Da(S),o=Aa(S,o)):w=-1}}return d}function Pv(i,o,a,l,d,p){const y=o[it],w=y.data[i+8],U=ba(w,y,a,null==l?Li(w)&&fd:l!=y&&0!=(3&w.type),d&Rt.Host&&p===w);return null!==U?to(o,y,U,w):ms}function ba(i,o,a,l,d){const p=i.providerIndexes,y=o.data,w=1048575&p,S=i.directiveStart,U=p>>20,re=d?w+U:i.directiveEnd;for(let le=l?w:w+U;le<re;le++){const Ne=y[le];if(le<S&&a===Ne||le>=S&&Ne.type===a)return le}if(d){const le=y[S];if(le&&qi(le)&&le.type===a)return S}return null}function to(i,o,a,l){let d=i[a];const p=o.data;if(function dd(i){return i instanceof pu}(d)){const y=d;y.resolving&&function Ze(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${i}${a}`)}(function We(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}(p[a]));const w=ic(y.canSeeViewProviders);y.resolving=!0;const O=y.injectImpl?Fn(y.injectImpl):null;I(i,l,Rt.Default);try{d=i[a]=y.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function hu(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const y=pn(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),p&&((a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p))}(a,p[a],o)}finally{null!==O&&Fn(O),ic(w),y.resolving=!1,ye()}}return d}function Nh(i,o,a){return!!(a[o+(i>>Jr)]&1<<i)}function Oh(i,o){return!(i&Rt.Self||i&Rt.Host&&o)}class Di{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Mh(this._tNode,this._lView,o,jt(l),a)}}function Up(){return new Di(ai(),ze())}function _d(i){return he(()=>{const o=i.prototype.constructor,a=o[si]||kh(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[si]||kh(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function kh(i){return rt(i)?()=>{const o=kh(Ue(i));return o&&o()}:Js(i)}function ol(i){const o=i[it],a=o.type;return 2===a?o.declTNode:1===a?i[zn]:null}function jp(i){return function Rv(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Rn(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(ai(),i)}const _s="__parameters__";function jo(i,o,a){return he(()=>{const l=function vd(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const y=new d(...p);return w.annotation=y,w;function w(S,O,U){const Z=S.hasOwnProperty(_s)?S[_s]:Object.defineProperty(S,_s,{value:[]})[_s];for(;Z.length<=U;)Z.push(null);return(Z[U]=Z[U]||[]).push(y),S}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function uc(i,o){i.forEach(a=>Array.isArray(a)?uc(a,o):o(a))}function Vh(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function cl(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function li(i,o,a){let l=Ho(i,o);return l>=0?i[1|l]=a:(l=~l,function Uh(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Bh(i,o){const a=Ho(i,o);if(a>=0)return i[1|a]}function Ho(i,o){return function $o(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),y=i[p<<a];if(o===y)return p<<a;y>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const hl=pi(jo("Optional"),8),Wn=pi(jo("SkipSelf"),4);function pc(i){return 128==(128&i.flags)}var gl=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(gl||{});const Ai=new Map;let Pa=0;const bd="__ngContext__";function bi(i,o){mr(o)?(i[bd]=o[Os],function lg(i){Ai.set(i[Os],i)}(o)):i[bd]=o}let gc;function Ri(i,o){return gc(i,o)}function mc(i){const o=i[fn];return Un(o)?o[fn]:o}function v(i){return f(i[Zs])}function h(i){return f(i[qr])}function f(i){for(;null!==i&&!Un(i);)i=i[qr];return i}function E(i,o,a,l,d){if(null!=l){let p,y=!1;Un(l)?p=l:mr(l)&&(y=!0,l=l[Gn]);const w=Jn(l);0===i&&null!==a?null==d?pg(o,a,w):Io(o,a,w,d||null,!0):1===i&&null!==a?Io(o,a,w,d||null,!0):2===i?function Rr(i,o,a){const l=Rd(i,o);l&&function rf(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,w,y):3===i&&o.destroyNode(w),null!=p&&function at(i,o,a,l,d){const p=a[hs];p!==Jn(a)&&E(o,i,l,p,d);for(let w=rr;w<a.length;w++){const S=a[w];gt(S[it],S,i,o,l,p)}}(o,i,p,a,d)}}function ce(i,o,a){return i.createElement(o,a)}function vu(i,o){const a=i[Qs],l=a.indexOf(o);Mp(o),a.splice(l,1)}function Eu(i,o){if(i.length<=rr)return;const a=rr+o,l=i[a];if(l){const d=l[fo];null!==d&&d!==i&&vu(d,l),o>0&&(i[a-1][qr]=l[qr]);const p=cl(i,rr+o);!function ke(i,o){gt(i,o,o[Ut],2,null,null),o[Gn]=null,o[zn]=null}(l[it],l);const y=p[Ns];null!==y&&y.detachView(p[it]),l[fn]=null,l[qr]=null,l[Bt]&=-129}return l}function xa(i,o){if(!(256&o[Bt])){const a=o[Ut];o[Fr]&&Pe(o[Fr]),o[Ja]&&Pe(o[Ja]),a.destroyNode&&gt(i,o,a,3,null,null),function ft(i){let o=i[Zs];if(!o)return vl(i[it],i);for(;o;){let a=null;if(mr(o))a=o[Zs];else{const l=o[rr];l&&(a=l)}if(!a){for(;o&&!o[qr]&&o!==i;)mr(o)&&vl(o[it],o),o=o[fn];null===o&&(o=i),mr(o)&&vl(o[it],o),a=o&&o[qr]}o=a}}(o)}}function vl(i,o){if(!(256&o[Bt])){o[Bt]&=-129,o[Bt]|=256,function Iu(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof pu)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=d[p[y]],S=p[y+1];hr(4,w,S);try{S.call(w)}finally{hr(5,w,S)}}else{hr(4,d,p);try{p.call(d)}finally{hr(5,d,p)}}}}}(i,o),function hg(i,o){const a=i.cleanup,l=o[Zr];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?l[y]():l[-y].unsubscribe(),p+=2}else a[p].call(l[a[p+1]]);null!==l&&(o[Zr]=null);const d=o[cs];if(null!==d){o[cs]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(i,o),1===o[it].type&&o[Ut].destroy();const a=o[fo];if(null!==a&&Un(o[fn])){a!==o[fn]&&vu(a,o);const l=o[Ns];null!==l&&l.detachView(i)}!function Yh(i){Ai.delete(i[Os])}(o)}}function nf(i,o,a){return function fg(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[Gn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=i.data[l.directiveStart+d];if(p===pt.None||p===pt.Emulated)return null}return mi(l,a)}}(i,o.parent,a)}function Io(i,o,a,l,d){i.insertBefore(o,a,l,d)}function pg(i,o,a){i.appendChild(o,a)}function r_(i,o,a,l,d){null!==l?Io(i,o,a,l,d):pg(i,o,a)}function Rd(i,o){return i.parentNode(o)}let yi,_w,zt,jv=function Pd(i,o,a){return 40&i.type?mi(i,a):null};function Ma(i,o,a,l){const d=nf(i,l,o),p=o[Ut],w=function pw(i,o,a){return jv(i,o,a)}(l.parent||o[zn],l,o);if(null!=d)if(Array.isArray(a))for(let S=0;S<a.length;S++)r_(p,d,a[S],w,!1);else r_(p,d,a,w,!1);void 0!==yi&&yi(p,l,o,a,d)}function wu(i,o){if(null!==o){const a=o.type;if(3&a)return mi(o,i);if(4&a)return Ke(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return wu(i,l);{const d=i[o.index];return Un(d)?Ke(-1,d):Jn(d)}}if(32&a)return Ri(o,i)()||Jn(i[o.index]);{const l=gw(i,o);return null!==l?Array.isArray(l)?l[0]:wu(mc(i[cr]),l):wu(i,o.next)}}return null}function gw(i,o){return null!==o?i[cr][zn].projection[o.projection]:null}function Ke(i,o){const a=rr+i+1;if(a<o.length){const l=o[a],d=l[it].firstChild;if(null!==d)return wu(l,d)}return o[hs]}function gg(i,o,a,l,d,p,y){for(;null!=a;){const w=l[a.index],S=a.type;if(y&&0===o&&(w&&bi(Jn(w),l),a.flags|=2),32!=(32&a.flags))if(8&S)gg(i,o,a.child,l,d,p,!1),E(o,i,d,w,p);else if(32&S){const O=Ri(a,l);let U;for(;U=O();)E(o,i,d,U,p);E(o,i,d,w,p)}else 16&S?mw(i,o,l,a,d,p):E(o,i,d,w,p);a=y?a.projectionNext:a.next}}function gt(i,o,a,l,d,p){gg(a,l,i.firstChild,o,d,p,!1)}function mw(i,o,a,l,d,p){const y=a[cr],S=y[zn].projection[l.projection];if(Array.isArray(S))for(let O=0;O<S.length;O++)E(o,i,d,S[O],p);else{let O=S;const U=y[fn];pc(l)&&(O.flags|=128),gg(i,o,O,U,d,p,!0)}}function vi(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Hv(i,o,a){const{mergedAttrs:l,classes:d,styles:p}=a;null!==l&&Ao(i,o,l),null!==d&&vi(i,o,d),null!==p&&function qe(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function kA(i){_w=i}function Ot(i){return function yc(){if(void 0===zt&&(zt=null,An.trustedTypes))try{zt=An.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return zt}()?.createScriptURL(i)||i}class af{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${un})`}}function Tu(i){return i instanceof af?i.changingThisBreaksApplicationSecurity:i}function Na(i,o){const a=function FA(i){return i instanceof af&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${un})`)}return a===o}const vc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Od=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Od||{});function Wv(i){const o=wg();return o?o.sanitize(Od.URL,i)||"":Na(i,"URL")?Tu(i):function _g(i){return(i=String(i)).match(vc)?i:"unsafe:"+i}(pe(i))}function Tw(i){const o=wg();if(o)return Ot(o.sanitize(Od.RESOURCE_URL,i)||"");if(Na(i,"ResourceURL"))return Ot(Tu(i));throw new Ie(904,!1)}function Cw(i,o,a){return function zA(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Tw:Wv}(o,a)(i)}function wg(){const i=ze();return i&&i[Lr].sanitizer}const Tg=new wt("ENVIRONMENT_INITIALIZER"),Dw=new wt("INJECTOR",-1),Aw=new wt("INJECTOR_DEF_TYPES");class u_{get(o,a=Gr){if(a===Gr){const l=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw l.name="NullInjectorError",l}return a}}function Sw(...i){return{\u0275providers:qv(0,i),\u0275fromNgModule:!0}}function qv(i,...o){const a=[],l=new Set;let d;const p=y=>{a.push(y)};return uc(o,y=>{const w=y;hf(w,p,[],l)&&(d||=[],d.push(w))}),void 0!==d&&Rw(d,p),a}function Rw(i,o){for(let a=0;a<i.length;a++){const{ngModule:l,providers:d}=i[a];l_(d,p=>{o(p,l)})}}function hf(i,o,a,l){if(!(i=Ue(i)))return!1;let d=null,p=ts(i);const y=!p&&on(i);if(p||y){if(y&&!y.standalone)return!1;d=i}else{const S=i.ngModule;if(p=ts(S),!p)return!1;d=S}const w=l.has(d);if(y){if(w)return!1;if(l.add(d),y.dependencies){const S="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const O of S)hf(O,o,a,l)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let O;l.add(d);try{uc(p.imports,U=>{hf(U,o,a,l)&&(O||=[],O.push(U))})}finally{}void 0!==O&&Rw(O,o)}if(!w){const O=Js(d)||(()=>new d);o({provide:d,useFactory:O,deps:ct},d),o({provide:Aw,useValue:d,multi:!0},d),o({provide:Tg,useValue:()=>vt(d),multi:!0},d)}const S=p.providers;if(null!=S&&!w){const O=i;l_(S,U=>{o(U,O)})}}}return d!==i&&void 0!==i.providers}function l_(i,o){for(let a of i)lt(a)&&(a=a.\u0275providers),Array.isArray(a)?l_(a,o):o(a)}const Ic=X({provide:String,useValue:X});function c_(i){return null!==i&&"object"==typeof i&&Ic in i}function Br(i){return"function"==typeof i}const d_=new wt("Set Injector scope."),El={},so={};let h_;function f_(){return void 0===h_&&(h_=new u_),h_}class sr{}class ff extends sr{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Au(o,y=>this.processProvider(y)),this.records.set(Dw,wl(void 0,this)),d.has("environment")&&this.records.set(sr,wl(void 0,this));const p=this.records.get(d_);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Aw.multi,ct,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Be(this),l=Fn(void 0);try{return o()}finally{Be(a),Fn(l)}}get(o,a=Gr,l=Rt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Wa))return o[Wa](this);l=jt(l);const p=Be(this),y=Fn(void 0);try{if(!(l&Rt.SkipSelf)){let S=this.records.get(o);if(void 0===S){const O=function wc(i){return"function"==typeof i||"object"==typeof i&&i instanceof wt}(o)&&xn(o);S=O&&this.injectableDefInScope(O)?wl(Du(o),El):null,this.records.set(o,S)}if(null!=S)return this.hydrate(o,S)}return(l&Rt.Self?f_():this.parent).get(o,a=l&Rt.Optional&&a===Gr?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[ii]=w[ii]||[]).unshift(ue(o)),p)throw w;return function is(i,o,a,l){const d=i[ii];throw o[H]&&d.unshift(o[H]),i.message=function Ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):ue(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace($,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ii]=null,i}(w,o,"R3InjectorError",this.source)}throw w}finally{Fn(y),Be(p)}}resolveInjectorInitializers(){const o=Be(this),a=Fn(void 0);try{const d=this.get(Tg.multi,ct,Rt.Self);for(const p of d)p()}finally{Be(o),Fn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(ue(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let a=Br(o=Ue(o))?o:Ue(o&&o.provide);const l=function Il(i){return c_(i)?wl(void 0,i.useValue):wl(Dg(i),El)}(o);if(Br(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=wl(void 0,El,!0),d.factory=()=>Bn(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===El&&(a.value=so,a.value=a.factory()),"object"==typeof a.value&&a.value&&function WA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Ue(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Du(i){const o=xn(i),a=null!==o?o.factory:Js(i);if(null!==a)return a;if(i instanceof wt)throw new Ie(204,!1);if(i instanceof Function)return function Xr(i){const o=i.length;if(o>0)throw function dl(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Ie(204,!1);const a=function vr(i){return i&&(i[Er]||i[ur])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ie(204,!1)}function Dg(i,o,a){let l;if(Br(i)){const d=Ue(i);return Js(d)||Du(d)}if(c_(i))l=()=>Ue(i.useValue);else if(function Cg(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Bn(i.deps||[]));else if(function fr(i){return!(!i||!i.useExisting)}(i))l=()=>vt(Ue(i.useExisting));else{const d=Ue(i&&(i.useClass||i.provide));if(!function Ag(i){return!!i.deps}(i))return Js(d)||Du(d);l=()=>new d(...Bn(i.deps))}return l}function wl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Au(i,o){for(const a of i)Array.isArray(a)?Au(a,o):a&&lt(a)?Au(a.\u0275providers,o):o(a)}const bg=new wt("AppId",{providedIn:"root",factory:()=>Tc}),Tc="ng",Oa=new wt("Platform Initializer"),kd=new wt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pf=new wt("CSP nonce",{providedIn:"root",factory:()=>function Md(){if(void 0!==_w)return _w;if(typeof document<"u")return document;throw new Ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let yf=(i,o,a)=>null;function _n(i,o,a=!1){return yf(i,o,a)}class KA{}class Xv{}class QA{resolveComponentFactory(o){throw function YA(i){const o=Error(`No component factory found for ${ue(i)}.`);return o.ngComponent=i,o}(o)}}let I_=(()=>{class i{static#e=this.NULL=new QA}return i})();function tE(){return Zo(ai(),ze())}function Zo(i,o){return new Cl(mi(i,o))}let Cl=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=tE}return i})();function w_(i){return i instanceof Cl?i.nativeElement:i}class xg{}let kw=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Lw(){const i=ze(),a=yn(ai().index,i);return(mr(a)?a:i)[Ut]}()}return i})(),Dl=(()=>{class i{static#e=this.\u0275prov=Vt({token:i,providedIn:"root",factory:()=>null})}return i})();class nE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ud=new nE("16.2.12"),T_={};function sE(i,o=null,a=null,l){const d=Uw(i,o,a,l);return d.resolveInjectorInitializers(),d}function Uw(i,o=null,a=null,l,d=new Set){const p=[a||ct,Sw(i)];return l=l||("object"==typeof i?void 0:ue(i)),new ff(p,o||f_(),l||null,d)}let xi=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=Gr;static#t=this.NULL=new u_;static create(a,l){if(Array.isArray(a))return sE({name:""},l,a,"");{const d=a.name??"";return sE({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=Vt({token:i,providedIn:"any",factory:()=>vt(Dw)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function C_(i){return i.ngOriginalError}class Ko{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&C_(o);for(;a&&C_(a);)a=C_(a);return a||null}}function oE(i){return o=>{setTimeout(i,void 0,o)}}const Ru=class kg extends C.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,p=a||(()=>null),y=l;if(o&&"object"==typeof o){const S=o;d=S.next?.bind(S),p=S.error?.bind(S),y=S.complete?.bind(S)}this.__isAsync&&(p=oE(p),d&&(d=oE(d)),y&&(y=oE(y)));const w=super.subscribe({next:d,error:p,complete:y});return o instanceof m.w0&&o.add(w),w}};function an(...i){}class Mi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ru(!1),this.onMicrotaskEmpty=new Ru(!1),this.onStable=new Ru(!1),this.onError=new Ru(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eb(){const i="function"==typeof An.requestAnimationFrame;let o=An[i?"requestAnimationFrame":"setTimeout"],a=An[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function tb(i){const o=()=>{!function b_(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(An,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,aE(i),i.isCheckStableRunning=!0,A_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),aE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,y,w)=>{if(function $w(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(w))return a.invokeTask(d,p,y,w);try{return uE(i),a.invokeTask(d,p,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Bd(i)}},onInvoke:(a,l,d,p,y,w,S)=>{try{return uE(i),a.invoke(d,p,y,w,S)}finally{i.shouldCoalesceRunChangeDetection&&o(),Bd(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,aE(i),A_(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mi.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Mi.isInAngularZone())throw new Ie(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,Hw,an,an);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Hw={};function A_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function aE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function uE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Bd(i){i._nesting--,A_(i)}class jd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ru,this.onMicrotaskEmpty=new Ru,this.onStable=new Ru,this.onError=new Ru}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const lE=new wt("",{providedIn:"root",factory:Dc});function Dc(){const i=Pt(Mi);let o=!0;const a=new K.y(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new K.y(d=>{let p;i.runOutsideAngular(()=>{p=i.onStable.subscribe(()=>{Mi.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Mi.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,oe.T)(a,l.pipe((0,Ee.B)()))}function Al(i){return i instanceof Function?i():i}let hE=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Vt({token:i,providedIn:"root",factory:()=>new i})}return i})();function bl(i){for(;i;){i[Bt]|=64;const o=mc(i);if(Zl(i)&&!o)return i;i=o}return null}const Hd=new wt("",{providedIn:"root",factory:()=>!1});let En=null;function gE(i,o){return i[o]??Xw()}function mE(i,o){const a=Xw();a.producerNode?.length&&(i[o]=En,a.lView=i,En=_E())}const P_={...nu,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{bl(i.lView)},lView:null};function _E(){return Object.create(P_)}function Xw(){return En??=_E(),En}const nn={};function yE(i){x_(Ht(),ze(),tn()+i,!1)}function x_(i,o,a,l){if(!l)if(3==(3&o[Bt])){const p=i.preOrderCheckHooks;null!==p&&Sh(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Ta(o,p,0,a)}sn(a)}function xu(i,o=Rt.Default){const a=ze();return null===a?vt(i,o):Mh(ai(),a,Ue(i),o)}function Cf(){throw new Error("invalid")}function Gd(i,o,a,l,d,p,y,w,S,O,U){const Z=o.blueprint.slice();return Z[Gn]=d,Z[Bt]=140|l,(null!==O||i&&2048&i[Bt])&&(Z[Bt]|=2048),Xu(Z),Z[fn]=Z[us]=i,Z[Vn]=a,Z[Lr]=y||i&&i[Lr],Z[Ut]=w||i&&i[Ut],Z[as]=S||i&&i[as]||null,Z[zn]=p,Z[Os]=function ug(){return Pa++}(),Z[ds]=U,Z[ks]=O,Z[cr]=2==o.type?i[cr]:Z,Z}function zd(i,o,a,l,d){let p=i.data[o];if(null===p)p=function M_(i,o,a,l,d){const p=Bs(),y=Lt(),S=i.data[o]=function nT(i,o,a,l,d,p){let y=o?o.injectorIndex:-1,w=0;return function mo(){return null!==Ft.skipHydrationRootTNode}()&&(w|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=S),null!==p&&(y?null==p.child&&null!==S.parent&&(p.child=S):null===p.next&&(p.next=S,S.prev=p)),S}(i,o,a,l,d),function Qr(){return Ft.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const y=function nt(){const i=Ft.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return gs(p,!0),p}function Df(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function eT(i,o,a,l,d){const p=gE(o,Fr),y=tn(),w=2&l;try{sn(-1),w&&o.length>Zt&&x_(i,o,Zt,!1),hr(w?2:0,d);const O=w?p:null,U=fa(O);try{null!==O&&(O.dirty=!1),a(l,d)}finally{Zu(O,U)}}finally{w&&null===o[Fr]&&mE(o,Fr),sn(y),hr(w?3:1,d)}}function N_(i,o,a){if(la(o)){const l=Tr(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{Tr(l)}}}function O_(i,o,a){od()&&(function sb(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;Li(a)&&function Ac(i,o,a){const l=mi(o,i),d=tT(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const w=Ug(i,Gd(i,d,null,y,l,o,null,i[Lr].rendererFactory.createRenderer(l,a),null,null,null));i[o.index]=w}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||pd(a,o),bi(l,o);const y=a.initialInputs;for(let w=d;w<p;w++){const S=i.data[w],O=to(o,i,w,a);bi(O,o),null!==y&&lb(0,w-d,O,S,0,y),qi(S)&&(yn(a.index,o)[Vn]=to(o,i,w,a))}}(i,o,a,mi(a,o)),64==(64&a.flags)&&bE(i,o,a))}function vE(i,o,a=mi){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],w=-1===y?a(o,i):i[y];i[d++]=w}}}function tT(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=EE(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function EE(i,o,a,l,d,p,y,w,S,O,U){const Z=Zt+l,re=Z+d,le=function nb(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:nn);return a}(Z,re),Ne="function"==typeof O?O():O;return le[it]={type:i,blueprint:le,template:a,queries:null,viewQuery:w,declTNode:o,data:le.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:S,consts:Ne,incompleteFirstPass:!1,ssrId:U}}let wE=i=>null;function bf(i,o,a,l){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===l?ka(a,o,d,p):l.hasOwnProperty(d)&&ka(a,o,l[d],p)}return a}function ka(i,o,a,l){i.hasOwnProperty(a)?i[a].push(o,l):i[a]=[o,l]}function es(i,o,a,l,d,p,y,w){const S=mi(o,a);let U,O=o.inputs;!w&&null!=O&&(U=O[l])?(Bg(i,a,U,l,d),Li(o)&&function iT(i,o){const a=yn(o,i);16&a[Bt]||(a[Bt]|=64)}(a,o.index)):3&o.type&&(l=function rT(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,o.value||"",l):d,p.setProperty(S,l,d))}function DE(i,o,a,l){if(od()){const d=null===l?null:{"":-1},p=function aT(i,o){const a=i.directiveRegistry;let l=null,d=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(Or(o,y.selectors,!1))if(l||(l=[]),qi(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),l.unshift(...w,y),RE(i,o,w.length)}else l.unshift(y),RE(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(i,a);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&oT(i,o,a,y,d,w),d&&function uT(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Ie(-301,!1);l.push(o[d],p)}}}(a,l,d)}a.mergedAttrs=sa(a.mergedAttrs,a.attrs)}function oT(i,o,a,l,d,p){for(let O=0;O<l.length;O++)Fp(pd(a,o),i,l[O].type);!function ab(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let O=0;O<l.length;O++){const U=l[O];U.providersResolver&&U.providersResolver(U)}let y=!1,w=!1,S=Df(i,o,l.length,null);for(let O=0;O<l.length;O++){const U=l[O];a.mergedAttrs=sa(a.mergedAttrs,U.hostAttrs),ub(i,a,o,S,U),ob(S,U,d),null!==U.contentQueries&&(a.flags|=4),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(a.flags|=64);const Z=U.type.prototype;!y&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(Z.ngOnChanges||Z.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),S++}!function CE(i,o,a){const d=o.directiveEnd,p=i.data,y=o.attrs,w=[];let S=null,O=null;for(let U=o.directiveStart;U<d;U++){const Z=p[U],re=a?a.get(Z):null,Ne=re?re.outputs:null;S=bf(Z.inputs,U,S,re?re.inputs:null),O=bf(Z.outputs,U,O,Ne);const Ye=null===S||null===y||So(o)?null:Rl(S,U,y);w.push(Ye)}null!==S&&(S.hasOwnProperty("class")&&(o.flags|=8),S.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=S,o.outputs=O}(i,a,p)}function bE(i,o,a){const l=a.directiveStart,d=a.directiveEnd,p=a.index,y=function Np(){return Ft.lFrame.currentDirectiveIndex}();try{sn(p);for(let w=l;w<d;w++){const S=i.data[w],O=o[w];tc(w),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&SE(S,O)}}finally{sn(-1),tc(y)}}function SE(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function RE(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function ob(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;qi(o)&&(a[""]=i)}}function ub(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=Js(d.type)),y=new pu(p,qi(d),xu);i.blueprint[l]=y,a[l]=y,function Vg(i,o,a,l,d){const p=d.hostBindings;if(p){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~o.index;(function AE(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,l,p)}}(i,o,l,Df(i,a,d.hostVars,nn),d)}function $s(i,o,a,l,d,p){const y=mi(i,o);!function k_(i,o,a,l,d,p,y){if(null==p)i.removeAttribute(o,d,a);else{const w=null==y?pe(p):y(p,l||"",d);i.setAttribute(o,d,w,a)}}(o[Ut],y,p,i.value,a,l,d)}function lb(i,o,a,l,d,p){const y=p[o];if(null!==y)for(let w=0;w<y.length;)PE(l,a,y[w++],y[w++],y[w++])}function PE(i,o,a,l,d){const p=Tr(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(d=y[l].call(o,d)),null!==i.setInput?i.setInput(o,d,a,l):o[l]=d}finally{Tr(p)}}function Rl(i,o,a){let l=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===l&&(l=[]);const y=i[p];for(let w=0;w<y.length;w+=2)if(y[w]===o){l.push(p,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function xE(i,o,a,l){return[i,!0,!1,o,null,0,l,a,null,null,null]}function lT(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const p=a[l+1];if(-1!==p){const y=i.data[p];T(a[l]),y.contentQueries(2,o[p],p)}}}function Ug(i,o){return i[Zs]?i[Qa][qr]=o:i[Zs]=o,i[Qa]=o,o}function Sf(i,o,a){T(0);const l=Tr(null);try{o(i,a)}finally{Tr(l)}}function bc(i){return i[Zr]||(i[Zr]=[])}function Sc(i){return i.cleanup||(i.cleanup=[])}function ME(i,o){const a=i[as],l=a?a.get(Ko,null):null;l&&l.handleError(o)}function Bg(i,o,a,l,d){for(let p=0;p<a.length;){const y=a[p++],w=a[p++];PE(i.data[y],o[y],l,w,d)}}function cT(i,o){const a=yn(o,i),l=a[it];!function dT(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(l,a);const d=a[Gn];null!==d&&null===a[ds]&&(a[ds]=_n(d,a[as])),NE(l,a,a[Vn])}function NE(i,o,a){R(o);try{const l=i.viewQuery;null!==l&&Sf(1,l,a);const d=i.template;null!==d&&eT(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&lT(i,o),i.staticViewQueries&&Sf(2,i.viewQuery,a);const p=i.components;null!==p&&function hT(i,o){for(let a=0;a<o.length;a++)cT(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[Bt]&=-5,me()}}let OE=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,l,d){const p=typeof Zone>"u"?null:Zone.current,y=function Fe(i,o,a){const l=Object.create(Mt);a&&(l.consumerAllowSignalWrites=!0),l.fn=i,l.schedule=o;const d=y=>{l.cleanupFn=y};return l.ref={notify:()=>Lo(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Ku(l))return;l.hasRun=!0;const y=fa(l);try{l.cleanupFn(),l.cleanupFn=Tt,l.fn(d)}finally{Zu(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(a,O=>{this.all.has(O)&&this.queue.set(O,p)},d);let w;this.all.add(y),y.notify();const S=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=l?.onDestroy(S),{destroy:S}}flush(){if(0!==this.queue.size)for(const[a,l]of this.queue)this.queue.delete(a),l?l.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Vt({token:i,providedIn:"root",factory:()=>new i})}return i})();function Rc(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?p=w:1==p?d=Oe(d,w):2==p&&(l=Oe(l,w+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function Fa(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];null!==p&&l.push(Jn(p)),Un(p)&&fT(p,l);const y=a.type;if(8&y)Fa(i,o,a.child,l);else if(32&y){const w=Ri(a,o);let S;for(;S=w();)l.push(S)}else if(16&y){const w=gw(o,a);if(Array.isArray(w))l.push(...w);else{const S=mc(o[cr]);Fa(S[it],S,w,l,!0)}}a=d?a.projectionNext:a.next}return l}function fT(i,o){for(let a=rr;a<i.length;a++){const l=i[a],d=l[it].firstChild;null!==d&&Fa(l[it],l,d,o)}i[hs]!==i[Gn]&&o.push(i[hs])}function jg(i,o,a,l=!0){const d=o[Lr],p=d.rendererFactory,y=d.afterRenderEventManager;p.begin?.(),y?.begin();try{pT(i,o,i.template,a)}catch(S){throw l&&ME(o,S),S}finally{p.end?.(),d.effectManager?.flush(),y?.end()}}function pT(i,o,a,l){const d=o[Bt];if(256!=(256&d)){o[Lr].effectManager?.flush(),R(o);try{Xu(o),function ec(i){return Ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&eT(i,o,a,2,l);const y=3==(3&d);if(y){const O=i.preOrderCheckHooks;null!==O&&Sh(o,O,null)}else{const O=i.preOrderHooks;null!==O&&Ta(o,O,0,null),Ca(o,0)}if(function Wd(i){for(let o=v(i);null!==o;o=h(o)){if(!o[Ls])continue;const a=o[Qs];for(let l=0;l<a.length;l++){Jl(a[l])}}}(o),xf(o,2),null!==i.contentQueries&&lT(i,o),y){const O=i.contentCheckHooks;null!==O&&Sh(o,O)}else{const O=i.contentHooks;null!==O&&Ta(o,O,1),Ca(o,1)}!function Fg(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const l=gE(o,Ja);try{for(let d=0;d<a.length;d++){const p=a[d];if(p<0)sn(~p);else{const y=p,w=a[++d],S=a[++d];il(w,y),l.dirty=!1;const O=fa(l);try{S(2,o[y])}finally{Zu(l,O)}}}}finally{null===o[Ja]&&mE(o,Ja),sn(-1)}}(i,o);const w=i.components;null!==w&&LE(o,w,0);const S=i.viewQuery;if(null!==S&&Sf(2,S,l),y){const O=i.viewCheckHooks;null!==O&&Sh(o,O)}else{const O=i.viewHooks;null!==O&&Ta(o,O,2),Ca(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Bt]&=-73,Mp(o)}finally{me()}}}function xf(i,o){for(let a=v(i);null!==a;a=h(a))for(let l=rr;l<a.length;l++)kE(a[l],o)}function Pc(i,o,a){kE(yn(o,i),a)}function kE(i,o){if(!function Us(i){return 128==(128&i[Bt])}(i))return;const a=i[it],l=i[Bt];if(80&l&&0===o||1024&l||2===o)pT(a,i,a.template,i[Vn]);else if(i[Mo]>0){xf(i,1);const d=a.components;null!==d&&LE(i,d,1)}}function LE(i,o,a){for(let l=0;l<o.length;l++)Pc(i,o[l],a)}class Mf{get rootNodes(){const o=this._lView,a=o[it];return Fa(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(o){this._lView[Vn]=o}get destroyed(){return 256==(256&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[fn];if(Un(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Eu(o,l),cl(a,l))}this._attachedToViewContainer=!1}xa(this._lView[it],this._lView)}onDestroy(o){!function tl(i,o){if(256==(256&i[Bt]))throw new Ie(911,!1);null===i[cs]&&(i[cs]=[]),i[cs].push(o)}(this._lView,o)}markForCheck(){bl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-129}reattach(){this._lView[Bt]|=128}detectChanges(){jg(this._lView[it],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Et(i,o){gt(i,o,o[Ut],2,null,null)}(this._lView[it],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class db extends Mf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;jg(o[it],o,o[Vn],!1)}checkNoChanges(){}get context(){return null}}class F_ extends I_{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=on(o);return new qd(a,this.ngModule)}}function V_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class FE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=jt(l);const d=this.injector.get(o,T_,l);return d!==T_||a===T_?d:this.parentInjector.get(o,a,l)}}class qd extends Xv{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=V_(o.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return V_(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Wi(i){return i.map(Uu).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let p=(d=d||this.ngModule)instanceof sr?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new FE(o,p):o,w=y.get(xg,null);if(null===w)throw new Ie(407,!1);const Z={rendererFactory:w,sanitizer:y.get(Dl,null),effectManager:y.get(OE,null),afterRenderEventManager:y.get(hE,null)},re=w.createRenderer(null,this.componentDef),le=this.componentDef.selectors[0][0]||"div",Ne=l?function IE(i,o,a,l){const p=l.get(Hd,!1)||a===pt.ShadowDom,y=i.selectRootElement(o,p);return function Af(i){wE(i)}(y),y}(re,l,this.componentDef.encapsulation,y):ce(re,le,function gT(i){const o=i.toLowerCase();return"svg"===o?Ci:"math"===o?"math":null}(le)),St=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let $e=null;null!==Ne&&($e=_n(Ne,y,!0));const qt=EE(0,null,null,1,0,null,null,null,null,null,null),dn=Gd(null,qt,null,St,null,null,Z,re,y,null,$e);let Yt,Hi;R(dn);try{const $a=this.componentDef;let zs,$i=null;$a.findHostDirectiveDefs?(zs=[],$i=new Map,$a.findHostDirectiveDefs($a,zs,$i),zs.push($a)):zs=[$a];const UR=function U_(i,o){const a=i[it],l=Zt;return i[l]=o,zd(a,l,2,"#host",null)}(dn,Ne),mv=function hb(i,o,a,l,d,p,y){const w=d[it];!function VE(i,o,a,l){for(const d of i)o.mergedAttrs=sa(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Rc(o,o.mergedAttrs,!0),null!==a&&Hv(l,a,o))}(l,i,o,y);let S=null;null!==o&&(S=_n(o,d[as]));const O=p.rendererFactory.createRenderer(o,a);let U=16;a.signals?U=4096:a.onPush&&(U=64);const Z=Gd(d,tT(a),null,U,d[i.index],i,p,O,null,null,S);return w.firstCreatePass&&RE(w,i,l.length-1),Ug(d,Z),d[i.index]=Z}(UR,Ne,$a,zs,dn,Z,re);Hi=Ju(qt,Zt),Ne&&function fb(i,o,a,l){if(l)Ao(i,a,["ng-version",Ud.full]);else{const{attrs:d,classes:p}=function mh(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!oi(d))break;d=p}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Ao(i,a,d),p&&p.length>0&&vi(i,a,p.join(" "))}}(re,$a,Ne,l),void 0!==a&&function _T(i,o,a){const l=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];l.push(null!=p?Array.from(p):null)}}(Hi,this.ngContentSelectors,a),Yt=function B_(i,o,a,l,d,p){const y=ai(),w=d[it],S=mi(y,d);oT(w,d,y,a,null,l);for(let U=0;U<a.length;U++)bi(to(d,w,y.directiveStart+U,y),d);bE(w,d,y),S&&bi(S,d);const O=to(d,w,y.directiveStart+y.componentOffset,y);if(i[Vn]=d[Vn]=O,null!==p)for(const U of p)U(O,o);return N_(w,y,i),O}(mv,$a,zs,$i,dn,[Nf]),NE(qt,dn,null)}finally{me()}return new mT(this.componentType,Yt,Zo(Hi,dn),dn,Hi)}}class mT extends KA{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new db(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const p=this._rootLView;Bg(p[it],p,d,o,a),this.previousInputValues.set(o,a),bl(yn(this._tNode.index,p))}}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Nf(){const i=ai();nc(ze()[it],i)}function xc(i){let o=function Of(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(qi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=Hg(i.inputs),y.inputTransforms=Hg(i.inputTransforms),y.declaredInputs=Hg(i.declaredInputs),y.outputs=Hg(i.outputs);const w=d.hostBindings;w&&j_(i,w);const S=d.viewQuery,O=d.contentQueries;if(S&&Is(i,S),O&&vT(i,O),ne(i.inputs,d.inputs),ne(i.declaredInputs,d.declaredInputs),ne(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ne(y.inputTransforms,d.inputTransforms)),qi(d)&&d.data.animation){const U=i.data;U.animation=(U.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(i),w===xc&&(a=!1)}}o=Object.getPrototypeOf(o)}!function yT(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=sa(d.hostAttrs,a=sa(a,d.hostAttrs))}}(l)}function Hg(i){return i===At?{}:i===ct?[]:i}function Is(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function vT(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function j_(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function Pl(i){const o=i.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(a[l]=d[2])}i.inputTransforms=a}function $_(i){return!!G_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function G_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ws(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function xl(i,o,a,l){const d=ze();return ws(d,_r(),o)&&(Ht(),$s(vn(),d,i,o,a,l)),xl}function Zd(i,o,a,l){return ws(i,_r(),a)?o+pe(a)+l:nn}function ny(i,o,a,l,d,p,y,w){const S=ze(),O=Ht(),U=i+Zt,Z=O.firstCreatePass?function zE(i,o,a,l,d,p,y,w,S){const O=o.consts,U=zd(o,i,4,y||null,Xs(O,w));DE(o,a,U,Xs(O,S)),nc(o,U);const Z=U.tView=EE(2,U,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,O,null);return null!==o.queries&&(o.queries.template(o,U),Z.queries=o.queries.embeddedTView(U)),U}(U,O,S,o,a,l,d,p,y):O.data[U];gs(Z,!1);const re=ry(O,S,Z,i);du()&&Ma(O,S,re,Z),bi(re,S),Ug(S,S[U]=xE(re,S,re,Z)),gi(Z)&&O_(O,S,Z),null!=y&&vE(S,Z,w)}let ry=function WE(i,o,a,l){return Bo(!0),o[Ut].createComment("")};function sy(i){return Ea(function nl(){return Ft.lFrame.contextLView}(),Zt+i)}function qE(i,o,a){const l=ze();return ws(l,_r(),o)&&es(Ht(),vn(),l,i,o,l[Ut],a,!1),qE}function ZE(i,o,a,l,d){const y=d?"class":"style";Bg(i,a,o.inputs[y],y,l)}function oy(i,o,a,l){const d=ze(),p=Ht(),y=Zt+i,w=d[Ut],S=p.firstCreatePass?function Ts(i,o,a,l,d,p){const y=o.consts,S=zd(o,i,2,l,Xs(y,d));return DE(o,a,S,Xs(y,p)),null!==S.attrs&&Rc(S,S.attrs,!1),null!==S.mergedAttrs&&Rc(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,p,d,o,a,l):p.data[y],O=Gf(p,d,S,w,o,i);d[y]=O;const U=gi(S);return gs(S,!0),Hv(w,O,S),32!=(32&S.flags)&&du()&&Ma(p,d,O,S),0===function Ui(){return Ft.lFrame.elementDepthCount}()&&bi(O,d),function Dh(){Ft.lFrame.elementDepthCount++}(),U&&(O_(p,d,S),N_(p,S,d)),null!==l&&vE(d,S),oy}function Yg(){let i=ai();Lt()?function _o(){Ft.lFrame.isParent=!1}():(i=i.parent,gs(i,!1));const o=i;(function lu(i){return Ft.skipHydrationRootTNode===i})(o)&&function Ia(){Ft.skipHydrationRootTNode=null}(),function go(){Ft.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(nc(a,i),la(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Rh(i){return 0!=(8&i.flags)}(o)&&ZE(a,o,ze(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function $m(i){return 0!=(16&i.flags)}(o)&&ZE(a,o,ze(),o.stylesWithoutHost,!1),Yg}function $f(i,o,a,l){return oy(i,o,a,l),Yg(),$f}let Gf=(i,o,a,l,d,p)=>(Bo(!0),ce(l,d,function ld(){return Ft.lFrame.currentNamespace}()));function zf(){return ze()}function Qg(i){return!!i&&"function"==typeof i.then}function Xd(i){return!!i&&"function"==typeof i.subscribe}function Jg(i,o,a,l){const d=ze(),p=Ht(),y=ai();return function uy(i,o,a,l,d,p,y){const w=gi(l),O=i.firstCreatePass&&Sc(i),U=o[Vn],Z=bc(o);let re=!0;if(3&l.type||y){const Ye=mi(l,o),dt=y?y(Ye):Ye,St=Z.length,$e=y?dn=>y(Jn(dn[l.index])):l.index;let qt=null;if(!y&&w&&(qt=function em(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===l){const w=o[Zr],S=d[p+2];return w.length>S?w[S]:null}"string"==typeof y&&(p+=2)}return null}(i,o,d,l.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=p,qt.__ngLastListenerFn__=p,re=!1;else{p=ly(l,o,U,p,!1);const dn=a.listen(dt,d,p);Z.push(p,dn),O&&O.push(d,$e,St,St+1)}}else p=ly(l,o,U,p,!1);const le=l.outputs;let Ne;if(re&&null!==le&&(Ne=le[d])){const Ye=Ne.length;if(Ye)for(let dt=0;dt<Ye;dt+=2){const Yt=o[Ne[dt]][Ne[dt+1]].subscribe(p),Hi=Z.length;Z.push(p,Yt),O&&O.push(d,l.index,Hi,-(Hi+1))}}}(p,d,d[Ut],y,i,o,l),Jg}function JE(i,o,a,l){try{return hr(6,o,a),!1!==a(l)}catch(d){return ME(i,d),!1}finally{hr(7,o,a)}}function ly(i,o,a,l,d){return function p(y){if(y===Function)return l;bl(i.componentOffset>-1?yn(i.index,o):o);let S=JE(o,a,l,y),O=p.__ngNextListenerFn__;for(;O;)S=JE(o,a,O,y)&&S,O=O.__ngNextListenerFn__;return d&&!1===S&&y.preventDefault(),S}}function cy(i=1){return function ot(i){return(Ft.lFrame.contextLView=function Wt(i,o){for(;i>0;)o=o[us],i--;return o}(i,Ft.lFrame.contextLView))[Vn]}(i)}function tm(i,o,a){return XE(i,"",o,"",a),tm}function XE(i,o,a,l,d){const p=ze(),y=Zd(p,o,a,l);return y!==nn&&es(Ht(),vn(),p,i,y,p[Ut],d,!1),XE}function gy(i,o){return i<<17|o<<2}function Fc(i){return i>>17&32767}function tI(i){return 2|i}function Ml(i){return(131068&i)>>2}function nI(i,o){return-131069&i|o<<2}function iI(i){return 1|i}function my(i,o,a,l,d){const p=i[a+1],y=null===o;let w=l?Fc(p):Ml(p),S=!1;for(;0!==w&&(!1===S||y);){const U=i[w+1];oI(i[w],o)&&(S=!0,i[w+1]=l?iI(U):tI(U)),w=l?Fc(U):Ml(U)}S&&(i[a+1]=l?tI(p):iI(p))}function oI(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Ho(i,o)>=0}function rm(i,o){return function Qo(i,o,a,l){const d=ze(),p=Ht(),y=function Yi(i){const o=Ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function hI(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[tn()],y=function dI(i,o){return o>=i.expandoStartIndex}(i,a);(function QT(i,o){return 0!=(i.flags&(o?8:16))})(p,l)&&null===o&&!y&&(o=!1),o=function Sb(i,o,a,l){const d=function ud(i){const o=Ft.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=ih(a=im(null,i,o,a,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=im(d,i,o,a,l),null===p){let S=function Rb(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ml(l))return i[Fc(l)]}(i,o,l);void 0!==S&&Array.isArray(S)&&(S=im(null,i,o,S[1],l),S=ih(S,o.attrs,l),function Pb(i,o,a,l){i[Fc(a?o.classBindings:o.styleBindings)]=l}(i,o,l,S))}else p=function xb(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=ih(l,i[p].hostAttrs,a);return ih(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function sI(i,o,a,l,d,p){let y=p?o.classBindings:o.styleBindings,w=Fc(y),S=Ml(y);i[l]=a;let U,O=!1;if(Array.isArray(a)?(U=a[1],(null===U||Ho(a,U)>0)&&(O=!0)):U=a,d)if(0!==S){const re=Fc(i[w+1]);i[l+1]=gy(re,w),0!==re&&(i[re+1]=nI(i[re+1],l)),i[w+1]=function GT(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=gy(w,0),0!==w&&(i[w+1]=nI(i[w+1],l)),w=l;else i[l+1]=gy(S,0),0===w?w=l:i[S+1]=nI(i[S+1],l),S=l;O&&(i[l+1]=tI(i[l+1])),my(i,U,l,!0),my(i,U,l,!1),function WT(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Ho(p,o)>=0&&(a[l+1]=iI(a[l+1]))}(o,U,i,l,p),y=gy(w,S),p?o.classBindings=y:o.styleBindings=y}(d,p,o,a,y,l)}}(p,i,y,l),o!==nn&&ws(d,y,o)&&function vy(i,o,a,l,d,p,y,w){if(!(3&o.type))return;const S=i.data,O=S[w+1],U=function rI(i){return 1==(1&i)}(O)?gI(S,o,a,d,Ml(O),y):void 0;Zf(U)||(Zf(p)||function $T(i){return 2==(2&i)}(O)&&(p=gI(S,null,a,d,w,y)),function Ce(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let p=-1===l.indexOf("-")?void 0:gl.DashCase;null==d?i.removeStyle(a,l,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=gl.Important),i.setStyle(a,l,d,p))}}(l,y,ya(tn(),a),d,p))}(p,p.data[tn()],d,d[Ut],i,d[y+1]=function YT(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ue(Tu(i)))),i}(o,a),l,y)}(i,o,null,!0),rm}function im(i,o,a,l,d){let p=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(p=o[w],l=ih(l,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function ih(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),li(i,y,!!a||o[++p]))}return void 0===i?null:i}function gI(i,o,a,l,d,p){const y=null===o;let w;for(;d>0;){const S=i[d],O=Array.isArray(S),U=O?S[1]:S,Z=null===U;let re=a[d+1];re===nn&&(re=Z?ct:void 0);let le=Z?Bh(re,l):U===l?re:void 0;if(O&&!Zf(le)&&(le=Bh(S,l)),Zf(le)&&(w=le,y))return w;const Ne=i[d+1];d=y?Fc(Ne):Ml(Ne)}if(null!==o){let S=p?o.residualClasses:o.residualStyles;null!=S&&(w=Bh(S,l))}return w}function Zf(i){return void 0!==i}function Ey(i,o=""){const a=ze(),l=Ht(),d=i+Zt,p=l.firstCreatePass?zd(l,d,1,o,null):l.data[d],y=JT(l,a,p,o,i);a[d]=y,du()&&Ma(l,a,y,p),gs(p,!1)}let JT=(i,o,a,l,d)=>(Bo(!0),function M(i,o){return i.createText(o)}(o[Ut],l));function sm(i){return Iy("",i,""),sm}function Iy(i,o,a){const l=ze(),d=Zd(l,i,o,a);return d!==nn&&function La(i,o,a){const l=ya(o,i);!function V(i,o,a){i.setValue(o,a)}(i[Ut],l,a)}(l,tn(),d),Iy}const Uc=void 0;var Hb=["en",[["a","p"],["AM","PM"],Uc],[["AM","PM"],Uc,Uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uc,"{1} 'at' {0}",Uc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function My(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Yf={};function AI(i){const o=function SI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Oy(o);if(a)return a;const l=o.split("-")[0];if(a=Oy(l),a)return a;if("en"===l)return Hb;throw new Ie(701,!1)}function Ny(i){return AI(i)[ah.PluralCase]}function Oy(i){return i in Yf||(Yf[i]=An.ng&&An.ng.common&&An.ng.common.locales&&An.ng.common.locales[i]),Yf[i]}var ah=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(ah||{});const Bc="en-US";let uh=Bc;function tp(i,o,a,l,d){if(i=Ue(i),Array.isArray(i))for(let p=0;p<i.length;p++)tp(i[p],o,a,l,d);else{const p=Ht(),y=ze(),w=ai();let S=Br(i)?i:Ue(i.provide);const O=Dg(i),U=1048575&w.providerIndexes,Z=w.directiveStart,re=w.providerIndexes>>20;if(Br(i)||!i.multi){const le=new pu(O,d,xu),Ne=BI(S,o,d?U:U+re,Z);-1===Ne?(Fp(pd(w,y),p,S),zy(p,i,o.length),o.push(S),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(le),y.push(le)):(a[Ne]=le,y[Ne]=le)}else{const le=BI(S,o,U+re,Z),Ne=BI(S,o,U,U+re),dt=Ne>=0&&a[Ne];if(d&&!dt||!d&&!(le>=0&&a[le])){Fp(pd(w,y),p,S);const St=function fm(i,o,a,l,d){const p=new pu(i,a,xu);return p.multi=[],p.index=o,p.componentProviders=0,np(p,d,l&&!a),p}(d?AC:Wy,a.length,d,l,O);!d&&dt&&(a[Ne].providerFactory=St),zy(p,i,o.length,0),o.push(S),w.directiveStart++,w.directiveEnd++,d&&(w.providerIndexes+=1048576),a.push(St),y.push(St)}else zy(p,i,le>-1?le:Ne,np(a[d?Ne:le],O,!d&&l));!d&&l&&dt&&a[Ne].componentProviders++}}}function zy(i,o,a,l){const d=Br(o),p=function ir(i){return!!i.useClass}(o);if(d||p){const S=(p?Ue(o.useClass):o).prototype.ngOnDestroy;if(S){const O=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const U=O.indexOf(a);-1===U?O.push(a,[l,S]):O[U+1].push(l,S)}else O.push(a,S)}}}function np(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function BI(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function Wy(i,o,a,l){return hm(this.multi,[])}function AC(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=to(a,a[it],this.providerFactory.index,l);p=w.slice(0,y),hm(d,p);for(let S=y;S<w.length;S++)p.push(w[S])}else p=[],hm(d,p);return p}function hm(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Ll(i,o=[]){return a=>{a.providersResolver=(l,d)=>function Gy(i,o,a){const l=Ht();if(l.firstCreatePass){const d=qi(i);tp(a,l.data,l.blueprint,d,!0),tp(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class Ba{}class bC{}function rp(i,o){return new SC(i,o??null,[])}class SC extends Ba{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new F_(this);const d=kr(o);this._bootstrapComponents=Al(d.bootstrap),this._r3Injector=Uw(o,a,[{provide:Ba,useValue:this},{provide:I_,useValue:this.componentFactoryResolver},...l],ue(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class pm extends bC{constructor(o){super(),this.moduleType=o}create(o){return new SC(this.moduleType,o,[])}}class gm extends Ba{constructor(o){super(),this.componentFactoryResolver=new F_(this),this.instance=null;const a=new ff([...o.providers,{provide:Ba,useValue:this},{provide:I_,useValue:this.componentFactoryResolver}],o.parent||f_(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function RC(i,o,a=null){return new gm({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let gS=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=qv(0,a.type),d=l.length>0?RC([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Vt({token:i,providedIn:"environment",factory:()=>new i(vt(sr))})}return i})();function mm(i){i.getStandaloneInjector=o=>o.get(gS).getOrCreateStandaloneInjector(i)}function BC(i,o,a,l,d,p,y){const w=o+a;return function Oc(i,o,a,l){const d=ws(i,o,a);return ws(i,o+1,l)||d}(i,w,d,p)?function To(i,o,a){return i[o]=a}(i,w+2,y?l.call(y,d,p):l(d,p)):function Em(i,o){const a=i[o];return a===nn?void 0:a}(i,w+2)}function HC(i,o){const a=Ht();let l;const d=i+Zt;a.firstCreatePass?(l=function IS(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks??=[]).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=Js(l.type)),w=Fn(xu);try{const S=ic(!1),O=p();return ic(S),function iy(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,ze(),d,O),O}finally{Fn(w)}}function qy(i,o,a,l){const d=i+Zt,p=ze(),y=Ea(p,d);return function Im(i,o){return i[it].data[o].pure}(p,d)?BC(p,function ui(){const i=Ft.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,y.transform,a,l,y):y.transform(a,l)}function DS(){return this._results[Symbol.iterator]()}class zI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ru)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=zI.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=DS)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function ys(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Ed(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function cx(i,o,a,l=!0){const d=o[it];if(function bn(i,o,a,l){const d=rr+l,p=a.length;l>0&&(a[d-1][qr]=o),l<p-rr?(o[qr]=a[d],Vh(a,rr+l,o)):(a.push(o),o[qr]=null),o[fn]=a;const y=o[fo];null!==y&&a!==y&&function er(i,o){const a=i[Qs];o[cr]!==o[fn][fn][cr]&&(i[Ls]=!0),null===a?i[Qs]=[o]:a.push(o)}(y,o);const w=o[Ns];null!==w&&w.insertView(i),o[Bt]|=128}(d,o,i,a),l){const p=Ke(a,i),y=o[Ut],w=Rd(y,i[hs]);null!==w&&function st(i,o,a,l,d,p){l[Gn]=d,l[zn]=o,gt(i,l,a,1,d,p)}(d,i[zn],y,o,w,p)}}let wm=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=dx}return i})();const AS=wm,bS=class extends AS{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,l){const d=function lx(i,o,a,l){const d=o.tView,w=Gd(i,d,a,4096&i[Bt]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);w[fo]=i[o.index];const O=i[Ns];return null!==O&&(w[Ns]=O.createEmbeddedView(d)),NE(d,w,a),w}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:l});return new Mf(d)}};function dx(){return Zy(ai(),ze())}function Zy(i,o){return 4&i.type?new bS(o,i,Zo(i,o)):null}let qI=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=zC}return i})();function zC(){return LS(ai(),ze())}const NS=qI,OS=class extends NS{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){const o=sc(this._hostTNode,this._hostLView);if(rc(o)){const a=Aa(o,this._hostLView),l=Da(o);return new Di(a[it].data[l+8],a)}return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=kS(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(o,a,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const w=o.createEmbeddedViewImpl(a||{},p,null);return this.insertImpl(w,d,false),w}createComponent(o,a,l,d,p){const y=o&&!function mu(i){return"function"==typeof i}(o);let w;if(y)w=a;else{const Ye=a||{};w=Ye.index,l=Ye.injector,d=Ye.projectableNodes,p=Ye.environmentInjector||Ye.ngModuleRef}const S=y?o:new qd(on(o)),O=l||this.parentInjector;if(!p&&null==S.ngModule){const dt=(y?O:this.parentInjector).get(sr,null);dt&&(p=dt)}on(S.componentType??{});const le=S.create(O,d,null,p);return this.insertImpl(le.hostView,w,false),le}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,l){const d=o._lView;if(function rd(i){return Un(i[fn])}(d)){const S=this.indexOf(o);if(-1!==S)this.detach(S);else{const O=d[fn],U=new OS(O,O[zn],O[fn]);U.detach(U.indexOf(o))}}const y=this._adjustIndex(a),w=this._lContainer;return cx(w,d,y,!l),o.attachToViewContainerRef(),Vh(WC(w),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=kS(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Eu(this._lContainer,a);l&&(cl(WC(this._lContainer),a),xa(l[it],l))}detach(o){const a=this._adjustIndex(o,-1),l=Eu(this._lContainer,a);return l&&null!=cl(WC(this._lContainer),a)?new Mf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function kS(i){return i[8]}function WC(i){return i[8]||(i[8]=[])}function LS(i,o){let a;const l=o[i.index];return Un(l)?a=l:(a=xE(l,o,null,i),o[i.index]=a,Ug(o,a)),ZI(a,o,i,l),new OS(a,i,o)}let ZI=function FS(i,o,a,l){if(i[hs])return;let d;d=8&a.type?Jn(l):function qC(i,o){const a=i[Ut],l=a.createComment(""),d=mi(o,i);return Io(a,Rd(a,d),l,function PA(i,o){return i.nextSibling(o)}(a,d),!1),l}(o,a),i[hs]=d};class YI{constructor(o){this.queryList=o,this.matches=null}clone(){return new YI(this.queryList)}setDirty(){this.queryList.setDirty()}}class QI{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new QI(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==op(o,a).matches&&this.queries[a].setDirty()}}class Qy{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Jy{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Jy(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Xy{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Xy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,Tm(a,p)),this.matchTNodeWithReadOption(o,a,ba(a,o,p,!1,!1))}else l===wm?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ba(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Cl||d===qI||d===wm&&4&a.type)this.addMatch(a.index,-2);else{const p=ba(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Tm(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function VS(i,o,a,l){return-1===a?function JI(i,o){return 11&i.type?Zo(i,o):4&i.type?Zy(i,o):null}(o,i):-2===a?function US(i,o,a){return a===Cl?Zo(o,i):a===wm?Zy(o,i):a===qI?LS(o,i):void 0}(i,o,l):to(i,i[it],a,o)}function XI(i,o,a,l){const d=o[Ns].queries[l];if(null===d.matches){const p=i.data,y=a.matches,w=[];for(let S=0;S<y.length;S+=2){const O=y[S];w.push(O<0?null:VS(o,p[O],y[S+1],a.metadata.read))}d.matches=w}return d.matches}function sp(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const y=XI(i,o,d,a);for(let w=0;w<p.length;w+=2){const S=p[w];if(S>0)l.push(y[w/2]);else{const O=p[w+1],U=o[-S];for(let Z=rr;Z<U.length;Z++){const re=U[Z];re[fo]===re[fn]&&sp(re[it],re,O,l)}if(null!==U[Qs]){const Z=U[Qs];for(let re=0;re<Z.length;re++){const le=Z[re];sp(le[it],le,O,l)}}}}}return l}function ZC(i){const o=ze(),a=Ht(),l=_i();T(l+1);const d=op(a,l);if(i.dirty&&function nd(i){return 4==(4&i[Bt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?sp(a,o,l,[]):XI(a,o,d,l);i.reset(p,w_),i.notifyOnChanges()}return!0}return!1}function e0(i,o,a,l){const d=Ht();if(d.firstCreatePass){const p=ai();(function t0(i,o,a){null===i.queries&&(i.queries=new Jy),i.queries.track(new Xy(o,a))})(d,new Qy(o,a,l),p.index),function YC(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Ds(i,o,a){const l=new zI(4==(4&a));(function TE(i,o,a,l){const d=bc(o);d.push(a),i.firstCreatePass&&Sc(i).push(l,d.length-1)})(i,o,l,l.destroy),null===o[Ns]&&(o[Ns]=new QI),o[Ns].queries.push(new YI(l))}(d,ze(),a)}function Wc(){return function Xo(i,o){return i[Ns].queries[o].queryList}(ze(),_i())}function op(i,o){return i.queries.getByIndex(o)}function ap(i,o){return Zy(i,o)}function r0(i){return!!kr(i)}const gD=new wt("Application Initializer");let tv=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=Pt(gD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const p=d();if(Qg(p))a.push(p);else if(Xd(p)){const y=new Promise((w,S)=>{p.subscribe({complete:w,error:S})});a.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),d0=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const nv=new wt("LocaleId",{providedIn:"root",factory:()=>Pt(nv,Rt.Optional|Rt.SkipSelf)||function QS(){return typeof $localize<"u"&&$localize.locale||Bc}()}),JS=new wt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let mD=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ae.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class fp{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let _D=(()=>{class i{compileModuleSync(a){return new pm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=Al(kr(a).declarations).reduce((y,w)=>{const S=on(w);return S&&y.push(new qd(S)),y},[]);return new fp(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const uv=new wt(""),g0=new wt("");let _0,hR=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_0||(function CD(i){_0=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||i)(vt(Mi),vt(m0),vt(g0))};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac})}return i})(),m0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return _0?.findTestabilityInTree(this,a,l)??null}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Zc=null;const DD=new wt("AllowMultipleToken"),ta=new wt("PlatformDestroyListeners"),Sm=new wt("appBootstrapListener");class Gs{constructor(o,a){this.name=o,this.token=a}}function AD(i,o,a=[]){const l=`Platform: ${o}`,d=new wt(l);return(p=[])=>{let y=cv();if(!y||y.injector.get(DD,!1)){const w=[...a,...p,{provide:d,useValue:!0}];i?i(w):function lv(i){if(Zc&&!Zc.get(DD,!1))throw new Ie(400,!1);(function y0(){!function Pp(i){ma=i}(()=>{throw new Ie(600,!1)})})(),Zc=i;const o=i.get(v0);(function gp(i){i.get(Oa,null)?.forEach(a=>a())})(i)}(function SD(i=[],o){return xi.create({name:o,providers:[{provide:d_,useValue:"platform"},{provide:ta,useValue:new Set([()=>Zc=null])},...i]})}(w,l))}return function bD(i){const o=cv();if(!o)throw new Ie(401,!1);return o}()}}function cv(){return Zc?.get(v0)??null}let v0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function mR(i="zone.js",o){return"noop"===i?new jd:"zone.js"===i?new Mi(o):i}(l?.ngZone,function PD(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const p=function pS(i,o,a){return new SC(i,o,a)}(a.moduleType,this.injector,function E0(i){return[{provide:Mi,useFactory:i},{provide:Tg,multi:!0,useFactory:()=>{const o=Pt(MD,{optional:!0});return()=>o.initialize()}},{provide:hh,useFactory:Rm},{provide:lE,useFactory:Dc}]}(()=>d)),y=p.injector.get(Ko,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:S=>{y.handleError(S)}});p.onDestroy(()=>{dv(this._modules,p),w.unsubscribe()})}),function ja(i,o,a){try{const l=a();return Qg(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(y,d,()=>{const w=p.injector.get(tv);return w.runInitializers(),w.donePromise.then(()=>(function Ly(i){_t(i,"Expected localeId to be defined"),"string"==typeof i&&(uh=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(nv,Bc)||Bc),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,l=[]){const d=Ha({},l);return function fR(i,o,a){const l=new pm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Ul);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ie(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(ta,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||i)(vt(xi))};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Ha(i,o){return Array.isArray(o)?o.reduce(Ha,i):{...i,...o}}let Ul=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Pt(hh),this.zoneIsStable=Pt(lE),this.componentTypes=[],this.components=[],this.isStable=Pt(mD).hasPendingTasks.pipe((0,He.w)(a=>a?(0,se.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Ee.B)()),this._injector=Pt(sr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Xv;if(!this._injector.get(tv).done)throw!d&&Ps(a),new Ie(405,!1);let y;y=d?a:this._injector.get(I_).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function pR(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Ba),O=y.create(xi.NULL,[],l||y.selector,w),U=O.location.nativeElement,Z=O.injector.get(uv,null);return Z?.registerApplication(U),O.onDestroy(()=>{this.detachView(O.hostView),dv(this.components,O),Z?.unregisterApplication(U)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;dv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(Sm,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>dv(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function dv(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const hh=new wt("",{providedIn:"root",factory:()=>Pt(Ko).handleError.bind(void 0)});function Rm(){const i=Pt(Mi),o=Pt(Ko);return a=>i.runOutsideAngular(()=>o.handleError(a))}let MD=(()=>{class i{constructor(){this.zone=Pt(Mi),this.applicationRef=Pt(Ul)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function yR(){return!1}let hv=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=w0}return i})();function w0(i){return function ER(i,o,a){if(Li(i)&&!a){const l=yn(i.index,o);return new Mf(l,l)}return 47&i.type?new Mf(o[cr],o):null}(ai(),ze(),16==(16&i))}class kD{constructor(){}supports(o){return $_(o)}create(o){return new DR(o)}}const CR=(i,o)=>o;class DR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||CR}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<FD(l,d,p)?a:l,w=FD(y,d,p),S=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const O=w-d,U=S-d;if(O!=U){for(let re=0;re<O;re++){const le=re<p.length?p[re]:p[re]=0,Ne=le+re;U<=Ne&&Ne<O&&(p[re]=le+1)}p[y.previousIndex]=U-O}}w!==S&&o(y,w,S)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!$_(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],y=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,w),l=!0),a=a._next}else d=0,function mb(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new LD(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new S0),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new S0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class LD{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class b0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class S0{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new b0,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FD(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class VD{constructor(){}supports(o){return o instanceof Map||G_(o)}create(){return new AR}}class AR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||G_(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const l=new bR(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class bR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function R0(){return new P0([new kD])}let P0=(()=>{class i{static#e=this.\u0275prov=Vt({token:i,providedIn:"root",factory:R0});constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||R0()),deps:[[i,new Wn,new hl]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ie(901,!1)}}return i})();function x0(){return new M0([new VD])}let M0=(()=>{class i{static#e=this.\u0275prov=Vt({token:i,providedIn:"root",factory:x0});constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||x0()),deps:[[i,new Wn,new hl]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ie(901,!1)}}return i})();const jD=AD(null,"core",[]);let HD=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(l){return new(l||i)(vt(Ul))};static#t=this.\u0275mod=oa({type:i});static#n=this.\u0275inj=Qn({})}return i})();function FR(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function Xx(i){const o=on(i);if(!o)return null;const a=new qd(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},6593:(yt,be,B)=>{B.d(be,{Dx:()=>Ln,b2:()=>Dn,q6:()=>Vt});var C=B(5879),m=B(6814);class K extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends K{static makeCurrent(){(0,m.HT)(new oe)}onAndCancel(z,H,W){return z.addEventListener(H,W),()=>{z.removeEventListener(H,W)}}dispatchEvent(z,H){z.dispatchEvent(H)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,H){return(H=H||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,H){return"window"===H?window:"document"===H?z:"body"===H?z.body:null}getBaseHref(z){const H=function se(){return ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null}();return null==H?null:function He($){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",$);const z=Ee.pathname;return"/"===z.charAt(0)?z:`/${z}`}(H)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,m.Mx)(document.cookie,z)}}let Ee,ae=null,X=(()=>{class ${build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(W){return new(W||$)};static#t=this.\u0275prov=C.Yz7({token:$,factory:$.\u0275fac})}return $})();const ne=new C.OlP("EventManagerPlugins");let ue=(()=>{class ${constructor(H,W){this._zone=W,this._eventNameToPlugin=new Map,H.forEach(ie=>{ie.manager=this}),this._plugins=H.slice().reverse()}addEventListener(H,W,ie){return this._findPluginFor(W).addEventListener(H,W,ie)}getZone(){return this._zone}_findPluginFor(H){let W=this._eventNameToPlugin.get(H);if(W)return W;if(W=this._plugins.find(Be=>Be.supports(H)),!W)throw new C.vHH(5101,!1);return this._eventNameToPlugin.set(H,W),W}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(ne),C.LFG(C.R0b))};static#t=this.\u0275prov=C.Yz7({token:$,factory:$.\u0275fac})}return $})();class Oe{constructor(z){this._doc=z}}const je="ng-app-id";let Je=(()=>{class ${constructor(H,W,ie,Be={}){this.doc=H,this.appId=W,this.nonce=ie,this.platformId=Be,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,m.PM)(Be),this.resetHostNodes()}addStyles(H){for(const W of H)1===this.changeUsageCount(W,1)&&this.onStyleAdded(W)}removeStyles(H){for(const W of H)this.changeUsageCount(W,-1)<=0&&this.onStyleRemoved(W)}ngOnDestroy(){const H=this.styleNodesInDOM;H&&(H.forEach(W=>W.remove()),H.clear());for(const W of this.getAllStyles())this.onStyleRemoved(W);this.resetHostNodes()}addHost(H){this.hostNodes.add(H);for(const W of this.getAllStyles())this.addStyleToHost(H,W)}removeHost(H){this.hostNodes.delete(H)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(H){for(const W of this.hostNodes)this.addStyleToHost(W,H)}onStyleRemoved(H){const W=this.styleRef;W.get(H)?.elements?.forEach(ie=>ie.remove()),W.delete(H)}collectServerRenderedStyles(){const H=this.doc.head?.querySelectorAll(`style[${je}="${this.appId}"]`);if(H?.length){const W=new Map;return H.forEach(ie=>{null!=ie.textContent&&W.set(ie.textContent,ie)}),W}return null}changeUsageCount(H,W){const ie=this.styleRef;if(ie.has(H)){const Be=ie.get(H);return Be.usage+=W,Be.usage}return ie.set(H,{usage:W,elements:[]}),W}getStyleElement(H,W){const ie=this.styleNodesInDOM,Be=ie?.get(W);if(Be?.parentNode===H)return ie.delete(W),Be.removeAttribute(je),Be;{const tt=this.doc.createElement("style");return this.nonce&&tt.setAttribute("nonce",this.nonce),tt.textContent=W,this.platformIsServer&&tt.setAttribute(je,this.appId),tt}}addStyleToHost(H,W){const ie=this.getStyleElement(H,W);H.appendChild(ie);const Be=this.styleRef,tt=Be.get(W)?.elements;tt?tt.push(ie):Be.set(W,{elements:[ie],usage:1})}resetHostNodes(){const H=this.hostNodes;H.clear(),H.add(this.doc.head)}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(m.K0),C.LFG(C.AFp),C.LFG(C.Ojb,8),C.LFG(C.Lbi))};static#t=this.\u0275prov=C.Yz7({token:$,factory:$.\u0275fac})}return $})();const Ue={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,Le=new C.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ze($,z){return z.map(H=>H.replace(rt,$))}let Xe=(()=>{class ${constructor(H,W,ie,Be,tt,vt,xt,Pt=null){this.eventManager=H,this.sharedStylesHost=W,this.appId=ie,this.removeStylesOnCompDestroy=Be,this.doc=tt,this.platformId=vt,this.ngZone=xt,this.nonce=Pt,this.rendererByCompId=new Map,this.platformIsServer=(0,m.PM)(vt),this.defaultRenderer=new we(H,tt,xt,this.platformIsServer)}createRenderer(H,W){if(!H||!W)return this.defaultRenderer;this.platformIsServer&&W.encapsulation===C.ifc.ShadowDom&&(W={...W,encapsulation:C.ifc.Emulated});const ie=this.getOrCreateRenderer(H,W);return ie instanceof On?ie.applyToHost(H):ie instanceof ar&&ie.applyStyles(),ie}getOrCreateRenderer(H,W){const ie=this.rendererByCompId;let Be=ie.get(W.id);if(!Be){const tt=this.doc,vt=this.ngZone,xt=this.eventManager,Pt=this.sharedStylesHost,jt=this.removeStylesOnCompDestroy,Bn=this.platformIsServer;switch(W.encapsulation){case C.ifc.Emulated:Be=new On(xt,Pt,W,this.appId,jt,tt,vt,Bn);break;case C.ifc.ShadowDom:return new ln(xt,Pt,H,W,tt,vt,this.nonce,Bn);default:Be=new ar(xt,Pt,W,jt,tt,vt,Bn)}ie.set(W.id,Be)}return Be}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(ue),C.LFG(Je),C.LFG(C.AFp),C.LFG(Le),C.LFG(m.K0),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(C.Ojb))};static#t=this.\u0275prov=C.Yz7({token:$,factory:$.\u0275fac})}return $})();class we{constructor(z,H,W,ie){this.eventManager=z,this.doc=H,this.ngZone=W,this.platformIsServer=ie,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,H){return H?this.doc.createElementNS(Ue[H]||H,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,H){(Kn(z)?z.content:z).appendChild(H)}insertBefore(z,H,W){z&&(Kn(z)?z.content:z).insertBefore(H,W)}removeChild(z,H){z&&z.removeChild(H)}selectRootElement(z,H){let W="string"==typeof z?this.doc.querySelector(z):z;if(!W)throw new C.vHH(-5104,!1);return H||(W.textContent=""),W}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,H,W,ie){if(ie){H=ie+":"+H;const Be=Ue[ie];Be?z.setAttributeNS(Be,H,W):z.setAttribute(H,W)}else z.setAttribute(H,W)}removeAttribute(z,H,W){if(W){const ie=Ue[W];ie?z.removeAttributeNS(ie,H):z.removeAttribute(`${W}:${H}`)}else z.removeAttribute(H)}addClass(z,H){z.classList.add(H)}removeClass(z,H){z.classList.remove(H)}setStyle(z,H,W,ie){ie&(C.JOm.DashCase|C.JOm.Important)?z.style.setProperty(H,W,ie&C.JOm.Important?"important":""):z.style[H]=W}removeStyle(z,H,W){W&C.JOm.DashCase?z.style.removeProperty(H):z.style[H]=""}setProperty(z,H,W){z[H]=W}setValue(z,H){z.nodeValue=H}listen(z,H,W){if("string"==typeof z&&!(z=(0,m.q)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${H}`);return this.eventManager.addEventListener(z,H,this.decoratePreventDefault(W))}decoratePreventDefault(z){return H=>{if("__ngUnwrap__"===H)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(H)):z(H))&&H.preventDefault()}}}function Kn($){return"TEMPLATE"===$.tagName&&void 0!==$.content}class ln extends we{constructor(z,H,W,ie,Be,tt,vt,xt){super(z,Be,tt,xt),this.sharedStylesHost=H,this.hostEl=W,this.shadowRoot=W.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Pt=Ze(ie.id,ie.styles);for(const jt of Pt){const Bn=document.createElement("style");vt&&Bn.setAttribute("nonce",vt),Bn.textContent=jt,this.shadowRoot.appendChild(Bn)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,H){return super.appendChild(this.nodeOrShadowRoot(z),H)}insertBefore(z,H,W){return super.insertBefore(this.nodeOrShadowRoot(z),H,W)}removeChild(z,H){return super.removeChild(this.nodeOrShadowRoot(z),H)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ar extends we{constructor(z,H,W,ie,Be,tt,vt,xt){super(z,Be,tt,vt),this.sharedStylesHost=H,this.removeStylesOnCompDestroy=ie,this.styles=xt?Ze(xt,W.styles):W.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class On extends ar{constructor(z,H,W,ie,Be,tt,vt,xt){const Pt=ie+"-"+W.id;super(z,H,W,Be,tt,vt,xt,Pt),this.contentAttr=function pe($){return"_ngcontent-%COMP%".replace(rt,$)}(Pt),this.hostAttr=function We($){return"_nghost-%COMP%".replace(rt,$)}(Pt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,H){const W=super.createElement(z,H);return super.setAttribute(W,this.contentAttr,""),W}}let Ss=(()=>{class $ extends Oe{constructor(H){super(H)}supports(H){return!0}addEventListener(H,W,ie){return H.addEventListener(W,ie,!1),()=>this.removeEventListener(H,W,ie)}removeEventListener(H,W,ie){return H.removeEventListener(W,ie)}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(m.K0))};static#t=this.\u0275prov=C.Yz7({token:$,factory:$.\u0275fac})}return $})();const Sr=["alt","control","meta","shift"],ge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ve={alt:$=>$.altKey,control:$=>$.ctrlKey,meta:$=>$.metaKey,shift:$=>$.shiftKey};let Re=(()=>{class $ extends Oe{constructor(H){super(H)}supports(H){return null!=$.parseEventName(H)}addEventListener(H,W,ie){const Be=$.parseEventName(W),tt=$.eventCallback(Be.fullKey,ie,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(H,Be.domEventName,tt))}static parseEventName(H){const W=H.toLowerCase().split("."),ie=W.shift();if(0===W.length||"keydown"!==ie&&"keyup"!==ie)return null;const Be=$._normalizeKey(W.pop());let tt="",vt=W.indexOf("code");if(vt>-1&&(W.splice(vt,1),tt="code."),Sr.forEach(Pt=>{const jt=W.indexOf(Pt);jt>-1&&(W.splice(jt,1),tt+=Pt+".")}),tt+=Be,0!=W.length||0===Be.length)return null;const xt={};return xt.domEventName=ie,xt.fullKey=tt,xt}static matchEventFullKeyCode(H,W){let ie=ge[H.key]||H.key,Be="";return W.indexOf("code.")>-1&&(ie=H.code,Be="code."),!(null==ie||!ie)&&(ie=ie.toLowerCase()," "===ie?ie="space":"."===ie&&(ie="dot"),Sr.forEach(tt=>{tt!==ie&&(0,ve[tt])(H)&&(Be+=tt+".")}),Be+=ie,Be===W)}static eventCallback(H,W,ie){return Be=>{$.matchEventFullKeyCode(Be,H)&&ie.runGuarded(()=>W(Be))}}static _normalizeKey(H){return"esc"===H?"escape":H}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(m.K0))};static#t=this.\u0275prov=C.Yz7({token:$,factory:$.\u0275fac})}return $})();const Vt=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:m.bD},{provide:C.g9A,useValue:function et(){oe.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function Dt(){return(0,C.RDi)(document),document},deps:[]}]),kn=new C.OlP(""),Qn=[{provide:C.rWj,useClass:class De{addToWindow(z){C.dqk.getAngularTestability=(W,ie=!0)=>{const Be=z.findTestabilityInTree(W,ie);if(null==Be)throw new C.vHH(5103,!1);return Be},C.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(W=>{const ie=C.dqk.getAllAngularTestabilities();let Be=ie.length,tt=!1;const vt=function(xt){tt=tt||xt,Be--,0==Be&&W(tt)};ie.forEach(xt=>{xt.whenStable(vt)})})}findTestabilityInTree(z,H,W){return null==H?null:z.getTestability(H)??(W?(0,m.q)().isShadowRoot(H)?this.findTestabilityInTree(z,H.host,!0):this.findTestabilityInTree(z,H.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],xn=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function Yn(){return new C.qLn},deps:[]},{provide:ne,useClass:Ss,multi:!0,deps:[m.K0,C.R0b,C.Lbi]},{provide:ne,useClass:Re,multi:!0,deps:[m.K0]},Xe,Je,ue,{provide:C.FYo,useExisting:Xe},{provide:m.JF,useClass:X,deps:[]},[]];let Dn=(()=>{class ${constructor(H){}static withServerTransition(H){return{ngModule:$,providers:[{provide:C.AFp,useValue:H.appId}]}}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(kn,12))};static#t=this.\u0275mod=C.oAB({type:$});static#n=this.\u0275inj=C.cJS({providers:[...xn,...Qn],imports:[m.ez,C.hGG]})}return $})(),Ln=(()=>{class ${constructor(H){this._doc=H}getTitle(){return this._doc.title}setTitle(H){this._doc.title=H||""}static#e=this.\u0275fac=function(W){return new(W||$)(C.LFG(m.K0))};static#t=this.\u0275prov=C.Yz7({token:$,factory:function(W){let ie=null;return ie=W?new W:function Er(){return new Ln((0,C.LFG)(m.K0))}(),ie},providedIn:"root"})}return $})();typeof window<"u"&&window},9692:(yt,be,B)=>{B.d(be,{gz:()=>fn,F0:()=>yn,Od:()=>Xs,Bz:()=>Ah,lC:()=>Zs});var C=B(5879),m=B(5592),K=B(4674),ae=B(2459),se=B(2096),Ee=B(5619),He=B(7453),De=B(2737),X=B(7400),ne=B(9940),ue=B(2714),Oe=B(8251),je=B(7103);function Je(...T){const b=(0,ne.yG)(T),I=(0,ne.jO)(T),{args:R,keys:N}=(0,He.D)(T);if(0===R.length)return(0,ae.D)([],b);const j=new m.y(function Ue(T,b,I=De.y){return R=>{rt(b,()=>{const{length:N}=T,j=new Array(N);let Y=N,ye=N;for(let me=0;me<N;me++)rt(b,()=>{const ot=(0,ae.D)(T[me],b);let Wt=!1;ot.subscribe((0,Oe.x)(R,tn=>{j[me]=tn,Wt||(Wt=!0,ye--),ye||R.next(I(j.slice()))},()=>{--Y||R.complete()}))},R)},R)}}(R,b,N?Y=>(0,ue.n)(N,Y):De.y));return I?j.pipe((0,X.Z)(I)):j}function rt(T,b,I){T?(0,je.f)(I,T,b):b()}var lt=B(6973),Jt=B(5211),un=B(4829);function Ie(T){return new m.y(b=>{(0,un.Xf)(T()).subscribe(b)})}var Le=B(8407);function pe(T,b){const I=(0,K.m)(T)?T:()=>T,R=N=>N.error(I());return new m.y(b?N=>b.schedule(R,0,N):R)}var We=B(6232),Ze=B(7394),Xe=B(9360);function we(){return(0,Xe.e)((T,b)=>{let I=null;T._refCount++;const R=(0,Oe.x)(b,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(I=null);const N=T._connection,j=I;I=null,N&&(!j||N===j)&&N.unsubscribe(),b.unsubscribe()});T.subscribe(R),R.closed||(I=T.connect())})}class kt extends m.y{constructor(b,I){super(),this.source=b,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Xe.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new Ze.w0;const I=this.getSubject();b.add(this.source.subscribe((0,Oe.x)(I,void 0,()=>{this._teardown(),I.complete()},R=>{this._teardown(),I.error(R)},()=>this._teardown()))),b.closed&&(this._connection=null,b=Ze.w0.EMPTY)}return b}refCount(){return we()(this)}}var $t=B(8645),Kn=B(6814),ln=B(7398),ar=B(4664),On=B(8180),Ss=B(7921),Sr=B(2181),ge=B(1631),ve=B(1374);function Re(T,b){return(0,K.m)(b)?(0,ge.z)(T,b,1):(0,ge.z)(T,1)}var Te=B(9397);function Me(T){return(0,Xe.e)((b,I)=>{let j,R=null,N=!1;R=b.subscribe((0,Oe.x)(I,void 0,void 0,Y=>{j=(0,un.Xf)(T(Y,Me(T)(b))),R?(R.unsubscribe(),R=null,j.subscribe(I)):N=!0})),N&&(R.unsubscribe(),R=null,j.subscribe(I))})}var Ve=B(6699),_t=B(3572);function et(T){return T<=0?()=>We.E:(0,Xe.e)((b,I)=>{let R=[];b.subscribe((0,Oe.x)(I,N=>{R.push(N),T<R.length&&R.shift()},()=>{for(const N of R)I.next(N);I.complete()},void 0,()=>{R=null}))})}var Yn=B(3026);function Vt(T){return(0,Xe.e)((b,I)=>{try{b.subscribe(I)}finally{I.add(T)}})}var kn=B(2420),xn=B(7537),Dn=B(6593);const It="primary",vr=Symbol("RouteTitle");class ts{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I[0]:I}return null}getAll(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Er(T){return new ts(T)}function Ln(T,b,I){const R=I.path.split("/");if(R.length>T.length||"full"===I.pathMatch&&(b.hasChildren()||R.length<T.length))return null;const N={};for(let j=0;j<R.length;j++){const Y=R[j],ye=T[j];if(Y.startsWith(":"))N[Y.substring(1)]=ye;else if(Y!==ye.path)return null}return{consumed:T.slice(0,R.length),posParams:N}}function $n(T,b){const I=T?Object.keys(T):void 0,R=b?Object.keys(b):void 0;if(!I||!R||I.length!=R.length)return!1;let N;for(let j=0;j<I.length;j++)if(N=I[j],!Rt(T[N],b[N]))return!1;return!0}function Rt(T,b){if(Array.isArray(T)&&Array.isArray(b)){if(T.length!==b.length)return!1;const I=[...T].sort(),R=[...b].sort();return I.every((N,j)=>R[j]===N)}return T===b}function Xt(T){return T.length>0?T[T.length-1]:null}function bt(T){return function oe(T){return!!T&&(T instanceof m.y||(0,K.m)(T.lift)&&(0,K.m)(T.subscribe))}(T)?T:(0,C.QGY)(T)?(0,ae.D)(Promise.resolve(T)):(0,se.of)(T)}const Fn={exact:function nr(T,b,I){if(!Ii(T.segments,b.segments)||!Gt(T.segments,b.segments,I)||T.numberOfChildren!==b.numberOfChildren)return!1;for(const R in b.children)if(!T.children[R]||!nr(T.children[R],b.children[R],I))return!1;return!0},subset:wt},$r={exact:function An(T,b){return $n(T,b)},subset:function uo(T,b){return Object.keys(b).length<=Object.keys(T).length&&Object.keys(b).every(I=>Rt(T[I],b[I]))},ignored:()=>!0};function pr(T,b,I){return Fn[I.paths](T.root,b.root,I.matrixParams)&&$r[I.queryParams](T.queryParams,b.queryParams)&&!("exact"===I.fragment&&T.fragment!==b.fragment)}function wt(T,b,I){return ns(T,b,b.segments,I)}function ns(T,b,I,R){if(T.segments.length>I.length){const N=T.segments.slice(0,I.length);return!(!Ii(N,I)||b.hasChildren()||!Gt(N,I,R))}if(T.segments.length===I.length){if(!Ii(T.segments,I)||!Gt(T.segments,I,R))return!1;for(const N in b.children)if(!T.children[N]||!wt(T.children[N],b.children[N],R))return!1;return!0}{const N=I.slice(0,T.segments.length),j=I.slice(T.segments.length);return!!(Ii(T.segments,N)&&Gt(T.segments,N,R)&&T.children[It])&&ns(T.children[It],b,j,R)}}function Gt(T,b,I){return b.every((R,N)=>$r[I](T[N].parameters,R.parameters))}class Ir{constructor(b=new Kt([],{}),I={},R=null){this.root=b,this.queryParams=I,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return lo.serialize(this)}}class Kt{constructor(b,I){this.segments=b,this.children=I,this.parent=null,Object.values(I).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gr(this)}}class rs{constructor(b,I){this.path=b,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Er(this.parameters)),this._parameterMap}toString(){return ie(this)}}function Ii(T,b){return T.length===b.length&&T.every((I,R)=>I.path===b[R].path)}let fi=(()=>{class T{static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:function(){return new Oi},providedIn:"root"})}return T})();class Oi{parse(b){const I=new Ae(b);return new Ir(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(b){const I=`/${zr(b.root,!0)}`,R=function tt(T){const b=Object.keys(T).map(I=>{const R=T[I];return Array.isArray(R)?R.map(N=>`${te(I)}=${te(N)}`).join("&"):`${te(I)}=${te(R)}`}).filter(I=>!!I);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${I}${R}${"string"==typeof b.fragment?`#${function $(T){return encodeURI(T)}(b.fragment)}`:""}`}}const lo=new Oi;function Gr(T){return T.segments.map(b=>ie(b)).join("/")}function zr(T,b){if(!T.hasChildren())return Gr(T);if(b){const I=T.children[It]?zr(T.children[It],!1):"",R=[];return Object.entries(T.children).forEach(([N,j])=>{N!==It&&R.push(`${N}:${zr(j,!1)}`)}),R.length>0?`${I}(${R.join("//")})`:I}{const I=function wi(T,b){let I=[];return Object.entries(T.children).forEach(([R,N])=>{R===It&&(I=I.concat(b(N,R)))}),Object.entries(T.children).forEach(([R,N])=>{R!==It&&(I=I.concat(b(N,R)))}),I}(T,(R,N)=>N===It?[zr(T.children[It],!1)]:[`${N}:${zr(R,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[It]?`${Gr(T)}/${I[0]}`:`${Gr(T)}/(${I.join("//")})`}}function ii(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function te(T){return ii(T).replace(/%3B/gi,";")}function z(T){return ii(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H(T){return decodeURIComponent(T)}function W(T){return H(T.replace(/\+/g,"%20"))}function ie(T){return`${z(T.path)}${function Be(T){return Object.keys(T).map(b=>`;${z(b)}=${z(T[b])}`).join("")}(T.parameters)}`}const vt=/^[^\/()?;#]+/;function xt(T){const b=T.match(vt);return b?b[0]:""}const Pt=/^[^\/()?;=#]+/,Bn=/^[^=?&#]+/,ki=/^[^&#]+/;class Ae{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(b.length>0||Object.keys(I).length>0)&&(R[It]=new Kt(b,I)),R}parseSegment(){const b=xt(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new C.vHH(4009,!1);return this.capture(b),new rs(H(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const I=function jt(T){const b=T.match(Pt);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const N=xt(this.remaining);N&&(R=N,this.capture(R))}b[H(I)]=H(R)}parseQueryParam(b){const I=function pi(T){const b=T.match(Bn);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const Y=function is(T){const b=T.match(ki);return b?b[0]:""}(this.remaining);Y&&(R=Y,this.capture(R))}const N=W(I),j=W(R);if(b.hasOwnProperty(N)){let Y=b[N];Array.isArray(Y)||(Y=[Y],b[N]=Y),Y.push(j)}else b[N]=j}parseParens(b){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=xt(this.remaining),N=this.remaining[R.length];if("/"!==N&&")"!==N&&";"!==N)throw new C.vHH(4010,!1);let j;R.indexOf(":")>-1?(j=R.slice(0,R.indexOf(":")),this.capture(j),this.capture(":")):b&&(j=It);const Y=this.parseChildren();I[j]=1===Object.keys(Y).length?Y[It]:new Kt([],Y),this.consumeOptional("//")}return I}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new C.vHH(4011,!1)}}function he(T){return T.segments.length>0?new Kt([],{[It]:T}):T}function Ge(T){const b={};for(const R of Object.keys(T.children)){const j=Ge(T.children[R]);if(R===It&&0===j.segments.length&&j.hasChildren())for(const[Y,ye]of Object.entries(j.children))b[Y]=ye;else(j.segments.length>0||j.hasChildren())&&(b[R]=j)}return function pt(T){if(1===T.numberOfChildren&&T.children[It]){const b=T.children[It];return new Kt(T.segments.concat(b.segments),b.children)}return T}(new Kt(T.segments,b))}function At(T){return T instanceof Ir}function rn(T){let b;const N=he(function I(j){const Y={};for(const me of j.children){const ot=I(me);Y[me.outlet]=ot}const ye=new Kt(j.url,Y);return j===T&&(b=ye),ye}(T.root));return b??N}function gr(T,b,I,R){let N=T;for(;N.parent;)N=N.parent;if(0===b.length)return si(N,N,N,I,R);const j=function Jc(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Wa(!0,0,T);let b=0,I=!1;const R=T.reduce((N,j,Y)=>{if("object"==typeof j&&null!=j){if(j.outlets){const ye={};return Object.entries(j.outlets).forEach(([me,ot])=>{ye[me]="string"==typeof ot?ot.split("/"):ot}),[...N,{outlets:ye}]}if(j.segmentPath)return[...N,j.segmentPath]}return"string"!=typeof j?[...N,j]:0===Y?(j.split("/").forEach((ye,me)=>{0==me&&"."===ye||(0==me&&""===ye?I=!0:".."===ye?b++:""!=ye&&N.push(ye))}),N):[...N,j]},[]);return new Wa(I,b,R)}(b);if(j.toRoot())return si(N,N,new Kt([],{}),I,R);const Y=function Rn(T,b,I){if(T.isAbsolute)return new Ao(b,!0,0);if(!I)return new Ao(b,!1,NaN);if(null===I.parent)return new Ao(I,!0,0);const R=jn(T.commands[0])?0:1;return function zl(T,b,I){let R=T,N=b,j=I;for(;j>N;){if(j-=N,R=R.parent,!R)throw new C.vHH(4005,!1);N=R.segments.length}return new Ao(R,!1,N-j)}(I,I.segments.length-1+R,T.numberOfDoubleDots)}(j,N,T),ye=Y.processChildren?bo(Y.segmentGroup,Y.index,j.commands):qs(Y.segmentGroup,Y.index,j.commands);return si(N,Y.segmentGroup,ye,I,R)}function jn(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Ti(T){return"object"==typeof T&&null!=T&&T.outlets}function si(T,b,I,R,N){let Y,j={};R&&Object.entries(R).forEach(([me,ot])=>{j[me]=Array.isArray(ot)?ot.map(Wt=>`${Wt}`):`${ot}`}),Y=T===b?I:Gi(T,b,I);const ye=he(Ge(Y));return new Ir(ye,j,N)}function Gi(T,b,I){const R={};return Object.entries(T.children).forEach(([N,j])=>{R[N]=j===b?I:Gi(j,b,I)}),new Kt(T.segments,R)}class Wa{constructor(b,I,R){if(this.isAbsolute=b,this.numberOfDoubleDots=I,this.commands=R,b&&R.length>0&&jn(R[0]))throw new C.vHH(4003,!1);const N=R.find(Ti);if(N&&N!==Xt(R))throw new C.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ao{constructor(b,I,R){this.segmentGroup=b,this.processChildren=I,this.index=R}}function qs(T,b,I){if(T||(T=new Kt([],{})),0===T.segments.length&&T.hasChildren())return bo(T,b,I);const R=function Vu(T,b,I){let R=0,N=b;const j={match:!1,pathIndex:0,commandIndex:0};for(;N<T.segments.length;){if(R>=I.length)return j;const Y=T.segments[N],ye=I[R];if(Ti(ye))break;const me=`${ye}`,ot=R<I.length-1?I[R+1]:null;if(N>0&&void 0===me)break;if(me&&ot&&"object"==typeof ot&&void 0===ot.outlets){if(!oi(me,ot,Y))return j;R+=2}else{if(!oi(me,{},Y))return j;R++}N++}return{match:!0,pathIndex:N,commandIndex:R}}(T,b,I),N=I.slice(R.commandIndex);if(R.match&&R.pathIndex<T.segments.length){const j=new Kt(T.segments.slice(0,R.pathIndex),{});return j.children[It]=new Kt(T.segments.slice(R.pathIndex),T.children),bo(j,0,N)}return R.match&&0===N.length?new Kt(T.segments,{}):R.match&&!T.hasChildren()?So(T,b,I):R.match?bo(T,0,N):So(T,b,I)}function bo(T,b,I){if(0===I.length)return new Kt(T.segments,{});{const R=function sa(T){return Ti(T[0])?T[0].outlets:{[It]:T}}(I),N={};if(Object.keys(R).some(j=>j!==It)&&T.children[It]&&1===T.numberOfChildren&&0===T.children[It].segments.length){const j=bo(T.children[It],b,I);return new Kt(T.segments,j.children)}return Object.entries(R).forEach(([j,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(N[j]=qs(T.children[j],b,Y))}),Object.entries(T.children).forEach(([j,Y])=>{void 0===R[j]&&(N[j]=Y)}),new Kt(T.segments,N)}}function So(T,b,I){const R=T.segments.slice(0,b);let N=0;for(;N<I.length;){const j=I[N];if(Ti(j)){const me=Wl(j.outlets);return new Kt(R,me)}if(0===N&&jn(I[0])){R.push(new rs(T.segments[b].path,qa(I[0]))),N++;continue}const Y=Ti(j)?j.outlets[It]:`${j}`,ye=N<I.length-1?I[N+1]:null;Y&&ye&&jn(ye)?(R.push(new rs(Y,qa(ye))),N+=2):(R.push(new rs(Y,{})),N++)}return new Kt(R,{})}function Wl(T){const b={};return Object.entries(T).forEach(([I,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(b[I]=So(new Kt([],{}),0,R))}),b}function qa(T){const b={};return Object.entries(T).forEach(([I,R])=>b[I]=`${R}`),b}function oi(T,b,I){return T==I.path&&$n(b,I.parameters)}const zi="imperative";class Or{constructor(b,I){this.id=b,this.url=I}}class Ro extends Or{constructor(b,I,R="imperative",N=null){super(b,I),this.type=0,this.navigationTrigger=R,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ss extends Or{constructor(b,I,R){super(b,I),this.urlAfterRedirects=R,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class co extends Or{constructor(b,I,R,N){super(b,I),this.reason=R,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Za extends Or{constructor(b,I,R,N){super(b,I),this.reason=R,this.code=N,this.type=16}}class Ka extends Or{constructor(b,I,R,N){super(b,I),this.error=R,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Uu extends Or{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wi extends Or{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mh extends Or{constructor(b,I,R,N,j){super(b,I),this.urlAfterRedirects=R,this.state=N,this.shouldActivate=j,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ql extends Or{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _h extends Or{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Po{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bu{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oa{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ju{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ho{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hu{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aa{constructor(b,I,R){this.routerEvent=b,this.position=I,this.anchor=R,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class on{}class lr{constructor(b){this.url=b}}class Ps{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kr,this.attachRef=null}}let kr=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(I,R){const N=this.getOrCreateContext(I);N.outlet=R,this.contexts.set(I,N)}onChildOutletDestroyed(I){const R=this.getContext(I);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let R=this.getContext(I);return R||(R=new Ps,this.contexts.set(I,R)),R}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();class xo{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const I=this.pathFromRoot(b);return I.length>1?I[I.length-2]:null}children(b){const I=Ya(b,this._root);return I?I.children.map(R=>R.value):[]}firstChild(b){const I=Ya(b,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(b){const I=xs(b,this._root);return I.length<2?[]:I[I.length-2].children.map(N=>N.value).filter(N=>N!==b)}pathFromRoot(b){return xs(b,this._root).map(I=>I.value)}}function Ya(T,b){if(T===b.value)return b;for(const I of b.children){const R=Ya(T,I);if(R)return R}return null}function xs(T,b){if(T===b.value)return[b];for(const I of b.children){const R=xs(T,I);if(R.length)return R.unshift(b),R}return[]}class os{constructor(b,I){this.value=b,this.children=I}toString(){return`TreeNode(${this.value})`}}function Ms(T){const b={};return T&&T.children.forEach(I=>b[I.value.outlet]=I),b}class Gn extends xo{constructor(b,I){super(b),this.snapshot=I,Vn(this,b)}toString(){return this.snapshot.toString()}}function it(T,b){const I=function Bt(T,b){const Y=new zn([],{},{},"",{},It,b,null,{});return new Zr("",new os(Y,[]))}(0,b),R=new Ee.X([new rs("",{})]),N=new Ee.X({}),j=new Ee.X({}),Y=new Ee.X({}),ye=new Ee.X(""),me=new fn(R,N,Y,ye,j,It,b,I.root);return me.snapshot=I.root,new Gn(new os(me,[]),I)}class fn{constructor(b,I,R,N,j,Y,ye,me){this.urlSubject=b,this.paramsSubject=I,this.queryParamsSubject=R,this.fragmentSubject=N,this.dataSubject=j,this.outlet=Y,this.component=ye,this._futureSnapshot=me,this.title=this.dataSubject?.pipe((0,ln.U)(ot=>ot[vr]))??(0,se.of)(void 0),this.url=b,this.params=I,this.queryParams=R,this.fragment=N,this.data=j}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ln.U)(b=>Er(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ln.U)(b=>Er(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qr(T,b="emptyOnly"){const I=T.pathFromRoot;let R=0;if("always"!==b)for(R=I.length-1;R>=1;){const N=I[R],j=I[R-1];if(N.routeConfig&&""===N.routeConfig.path)R--;else{if(j.component)break;R--}}return function Mo(T){return T.reduce((b,I)=>({params:{...b.params,...I.params},data:{...b.data,...I.data},resolve:{...I.data,...b.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(R))}class zn{get title(){return this.data?.[vr]}constructor(b,I,R,N,j,Y,ye,me,ot){this.url=b,this.params=I,this.queryParams=R,this.fragment=N,this.data=j,this.outlet=Y,this.component=ye,this.routeConfig=me,this._resolve=ot}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zr extends xo{constructor(b,I){super(I),this.url=b,Vn(this,I)}toString(){return as(this._root)}}function Vn(T,b){b.value._routerState=T,b.children.forEach(I=>Vn(T,I))}function as(T){const b=T.children.length>0?` { ${T.children.map(as).join(", ")} } `:"";return`${T.value}${b}`}function Lr(T){if(T.snapshot){const b=T.snapshot,I=T._futureSnapshot;T.snapshot=I,$n(b.queryParams,I.queryParams)||T.queryParamsSubject.next(I.queryParams),b.fragment!==I.fragment&&T.fragmentSubject.next(I.fragment),$n(b.params,I.params)||T.paramsSubject.next(I.params),function ur(T,b){if(T.length!==b.length)return!1;for(let I=0;I<T.length;++I)if(!$n(T[I],b[I]))return!1;return!0}(b.url,I.url)||T.urlSubject.next(I.url),$n(b.data,I.data)||T.dataSubject.next(I.data)}else T.snapshot=T._futureSnapshot,T.dataSubject.next(T._futureSnapshot.data)}function Ut(T,b){const I=$n(T.params,b.params)&&function Rs(T,b){return Ii(T,b)&&T.every((I,R)=>$n(I.parameters,b[R].parameters))}(T.url,b.url);return I&&!(!T.parent!=!b.parent)&&(!T.parent||Ut(T.parent,b.parent))}let Zs=(()=>{class T{constructor(){this.activated=null,this._activatedRoute=null,this.name=It,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.parentContexts=(0,C.f3M)(kr),this.location=(0,C.f3M)(C.s_b),this.changeDetector=(0,C.f3M)(C.sBO),this.environmentInjector=(0,C.f3M)(C.lqb),this.inputBinder=(0,C.f3M)(us,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:R,previousValue:N}=I.name;if(R)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,R){this.activated=I,this._activatedRoute=R,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,R){if(this.isActivated)throw new C.vHH(4013,!1);this._activatedRoute=I;const N=this.location,Y=I.snapshot.component,ye=this.parentContexts.getOrCreateContext(this.name).children,me=new Qa(I,ye,N.injector);this.activated=N.createComponent(Y,{index:N.length,injector:me,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275dir=C.lG2({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[C.TTD]})}return T})();class Qa{constructor(b,I,R){this.route=b,this.childContexts=I,this.parent=R}get(b,I){return b===fn?this.route:b===kr?this.childContexts:this.parent.get(b,I)}}const us=new C.OlP("");let cr=(()=>{class T{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:R}=I,N=Je([R.queryParams,R.params,R.data]).pipe((0,ar.w)(([j,Y,ye],me)=>(ye={...j,...Y,...ye},0===me?(0,se.of)(ye):Promise.resolve(ye)))).subscribe(j=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(I);const Y=(0,C.qFp)(R.component);if(Y)for(const{templateName:ye}of Y.inputs)I.activatedComponentRef.setInput(ye,j[ye]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,N)}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac})}return T})();function ls(T,b,I){if(I&&T.shouldReuseRoute(b.value,I.value.snapshot)){const R=I.value;R._futureSnapshot=b.value;const N=function Ns(T,b,I){return b.children.map(R=>{for(const N of I.children)if(T.shouldReuseRoute(R.value,N.value.snapshot))return ls(T,R,N);return ls(T,R)})}(T,b,I);return new os(R,N)}{if(T.shouldAttach(b.value)){const j=T.retrieve(b.value);if(null!==j){const Y=j.route;return Y.value._futureSnapshot=b.value,Y.children=b.children.map(ye=>ls(T,ye)),Y}}const R=function Os(T){return new fn(new Ee.X(T.url),new Ee.X(T.params),new Ee.X(T.queryParams),new Ee.X(T.fragment),new Ee.X(T.data),T.outlet,T.component,T)}(b.value),N=b.children.map(j=>ls(T,j));return new os(R,N)}}const ks="ngNavigationCancelingError";function cs(T,b){const{redirectTo:I,navigationBehaviorOptions:R}=At(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,N=ds(!1,0,b);return N.url=I,N.navigationBehaviorOptions=R,N}function ds(T,b,I){const R=new Error("NavigationCancelingError: "+(T||""));return R[ks]=!0,R.cancellationCode=b,I&&(R.url=I),R}function Ja(T){return T&&T[ks]}let Zt=(()=>{class T{static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275cmp=C.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[C.jDz],decls:1,vars:0,template:function(R,N){1&R&&C._UZ(0,"router-outlet")},dependencies:[Zs],encapsulation:2})}return T})();function mr(T){const b=T.children&&T.children.map(mr),I=b?{...T,children:b}:{...T};return!I.component&&!I.loadComponent&&(b||I.loadChildren)&&I.outlet&&I.outlet!==It&&(I.component=Zt),I}function Un(T){return T.outlet||It}function Li(T){if(!T)return null;if(T.routeConfig?._injector)return T.routeConfig._injector;for(let b=T.parent;b;b=b.parent){const I=b.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class Zl{constructor(b,I,R,N,j){this.routeReuseStrategy=b,this.futureState=I,this.currState=R,this.forwardEvent=N,this.inputBindingEnabled=j}activate(b){const I=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,R,b),Lr(this.futureState.root),this.activateChildRoutes(I,R,b)}deactivateChildRoutes(b,I,R){const N=Ms(I);b.children.forEach(j=>{const Y=j.value.outlet;this.deactivateRoutes(j,N[Y],R),delete N[Y]}),Object.values(N).forEach(j=>{this.deactivateRouteAndItsChildren(j,R)})}deactivateRoutes(b,I,R){const N=b.value,j=I?I.value:null;if(N===j)if(N.component){const Y=R.getContext(N.outlet);Y&&this.deactivateChildRoutes(b,I,Y.children)}else this.deactivateChildRoutes(b,I,R);else j&&this.deactivateRouteAndItsChildren(I,R)}deactivateRouteAndItsChildren(b,I){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,I):this.deactivateRouteAndOutlet(b,I)}detachAndStoreRouteSubtree(b,I){const R=I.getContext(b.value.outlet),N=R&&b.value.component?R.children:I,j=Ms(b);for(const Y of Object.keys(j))this.deactivateRouteAndItsChildren(j[Y],N);if(R&&R.outlet){const Y=R.outlet.detach(),ye=R.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:Y,route:b,contexts:ye})}}deactivateRouteAndOutlet(b,I){const R=I.getContext(b.value.outlet),N=R&&b.value.component?R.children:I,j=Ms(b);for(const Y of Object.keys(j))this.deactivateRouteAndItsChildren(j[Y],N);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(b,I,R){const N=Ms(I);b.children.forEach(j=>{this.activateRoutes(j,N[j.value.outlet],R),this.forwardEvent(new Hu(j.value.snapshot))}),b.children.length&&this.forwardEvent(new ju(b.value.snapshot))}activateRoutes(b,I,R){const N=b.value,j=I?I.value:null;if(Lr(N),N===j)if(N.component){const Y=R.getOrCreateContext(N.outlet);this.activateChildRoutes(b,I,Y.children)}else this.activateChildRoutes(b,I,R);else if(N.component){const Y=R.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const ye=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),Y.children.onOutletReAttached(ye.contexts),Y.attachRef=ye.componentRef,Y.route=ye.route.value,Y.outlet&&Y.outlet.attach(ye.componentRef,ye.route.value),Lr(ye.route.value),this.activateChildRoutes(b,null,Y.children)}else{const ye=Li(N.snapshot);Y.attachRef=null,Y.route=N,Y.injector=ye,Y.outlet&&Y.outlet.activateWith(N,Y.injector),this.activateChildRoutes(b,null,Y.children)}}else this.activateChildRoutes(b,null,R)}}class $u{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class No{constructor(b,I){this.component=b,this.route=I}}function yh(T,b,I){const R=T._root;return da(R,b?b._root:null,I,[R.value])}function ca(T,b){const I=Symbol(),R=b.get(T,I);return R===I?"function"!=typeof T||(0,C.Z0I)(T)?b.get(T):T:R}function da(T,b,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=Ms(b);return T.children.forEach(Y=>{(function vh(T,b,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=T.value,Y=b?b.value:null,ye=I?I.getContext(T.value.outlet):null;if(Y&&j.routeConfig===Y.routeConfig){const me=function Eh(T,b,I){if("function"==typeof I)return I(T,b);switch(I){case"pathParamsChange":return!Ii(T.url,b.url);case"pathParamsOrQueryParamsChange":return!Ii(T.url,b.url)||!$n(T.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ut(T,b)||!$n(T.queryParams,b.queryParams);default:return!Ut(T,b)}}(Y,j,j.routeConfig.runGuardsAndResolvers);me?N.canActivateChecks.push(new $u(R)):(j.data=Y.data,j._resolvedData=Y._resolvedData),da(T,b,j.component?ye?ye.children:null:I,R,N),me&&ye&&ye.outlet&&ye.outlet.isActivated&&N.canDeactivateChecks.push(new No(ye.outlet.component,Y))}else Y&&Mn(b,ye,N),N.canActivateChecks.push(new $u(R)),da(T,null,j.component?ye?ye.children:null:I,R,N)})(Y,j[Y.value.outlet],I,R.concat([Y.value]),N),delete j[Y.value.outlet]}),Object.entries(j).forEach(([Y,ye])=>Mn(ye,I.getContext(Y),N)),N}function Mn(T,b,I){const R=Ms(T),N=T.value;Object.entries(R).forEach(([j,Y])=>{Mn(Y,N.component?b?b.children.getContext(j):null:b,I)}),I.canDeactivateChecks.push(new No(N.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,N))}function eu(T){return"function"==typeof T}function qu(T){return T instanceof lt.K||"EmptyError"===T?.name}const tu=Symbol("INITIAL_VALUE");function Oo(){return(0,ar.w)(T=>Je(T.map(b=>b.pipe((0,On.q)(1),(0,Ss.O)(tu)))).pipe((0,ln.U)(b=>{for(const I of b)if(!0!==I){if(I===tu)return tu;if(!1===I||I instanceof Ir)return I}return!0}),(0,Sr.h)(b=>b!==tu),(0,On.q)(1)))}function po(T){return(0,Le.z)((0,Te.b)(b=>{if(At(b))throw cs(0,b)}),(0,ln.U)(b=>!0===b))}class ko{constructor(b){this.segmentGroup=b||null}}class ha{constructor(b){this.urlTree=b}}function Lo(T){return pe(new ko(T))}function fa(T){return pe(new ha(T))}class Pe{constructor(b,I){this.urlSerializer=b,this.urlTree=I}noMatchError(b){return new C.vHH(4002,!1)}lineralizeSegments(b,I){let R=[],N=I.root;for(;;){if(R=R.concat(N.segments),0===N.numberOfChildren)return(0,se.of)(R);if(N.numberOfChildren>1||!N.children[It])return pe(new C.vHH(4e3,!1));N=N.children[It]}}applyRedirectCommands(b,I,R){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),b,R)}applyRedirectCreateUrlTree(b,I,R,N){const j=this.createSegmentGroup(b,I.root,R,N);return new Ir(j,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(b,I){const R={};return Object.entries(b).forEach(([N,j])=>{if("string"==typeof j&&j.startsWith(":")){const ye=j.substring(1);R[N]=I[ye]}else R[N]=j}),R}createSegmentGroup(b,I,R,N){const j=this.createSegments(b,I.segments,R,N);let Y={};return Object.entries(I.children).forEach(([ye,me])=>{Y[ye]=this.createSegmentGroup(b,me,R,N)}),new Kt(j,Y)}createSegments(b,I,R,N){return I.map(j=>j.path.startsWith(":")?this.findPosParam(b,j,N):this.findOrReturn(j,R))}findPosParam(b,I,R){const N=R[I.path.substring(1)];if(!N)throw new C.vHH(4001,!1);return N}findOrReturn(b,I){let R=0;for(const N of I){if(N.path===b.path)return I.splice(R),N;R++}return b}}const iu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kr(T,b,I,R,N){const j=Fs(T,b,I);return j.matched?(R=function Ks(T,b){return T.providers&&!T._injector&&(T._injector=(0,C.MMx)(T.providers,b,`Route: ${T.path}`)),T._injector??b}(b,R),function ru(T,b,I,R){const N=b.canMatch;if(!N||0===N.length)return(0,se.of)(!0);const j=N.map(Y=>{const ye=ca(Y,T);return bt(function ed(T){return T&&eu(T.canMatch)}(ye)?ye.canMatch(b,I):T.runInContext(()=>ye(b,I)))});return(0,se.of)(j).pipe(Oo(),po())}(R,b,I).pipe((0,ln.U)(Y=>!0===Y?j:{...iu}))):(0,se.of)(j)}function Fs(T,b,I){if(""===b.path)return"full"===b.pathMatch&&(T.hasChildren()||I.length>0)?{...iu}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const N=(b.matcher||Ln)(I,T,b);if(!N)return{...iu};const j={};Object.entries(N.posParams??{}).forEach(([ye,me])=>{j[ye]=me.path});const Y=N.consumed.length>0?{...j,...N.consumed[N.consumed.length-1].parameters}:j;return{matched:!0,consumedSegments:N.consumed,remainingSegments:I.slice(N.consumed.length),parameters:Y,positionalParamSegments:N.posParams??{}}}function Fo(T,b,I,R){return I.length>0&&function Rp(T,b,I){return I.some(R=>pa(T,b,R)&&Un(R)!==It)}(T,I,R)?{segmentGroup:new Kt(b,Ql(R,new Kt(I,T.children))),slicedSegments:[]}:0===I.length&&function Bm(T,b,I){return I.some(R=>pa(T,b,R))}(T,I,R)?{segmentGroup:new Kt(T.segments,Yl(T,0,I,R,T.children)),slicedSegments:I}:{segmentGroup:new Kt(T.segments,T.children),slicedSegments:I}}function Yl(T,b,I,R,N){const j={};for(const Y of R)if(pa(T,I,Y)&&!N[Un(Y)]){const ye=new Kt([],{});j[Un(Y)]=ye}return{...N,...j}}function Ql(T,b){const I={};I[It]=b;for(const R of T)if(""===R.path&&Un(R)!==It){const N=new Kt([],{});I[Un(R)]=N}return I}function pa(T,b,I){return(!(T.hasChildren()||b.length>0)||"full"!==I.pathMatch)&&""===I.path}class Yu{constructor(b,I,R,N,j,Y,ye){this.injector=b,this.configLoader=I,this.rootComponentType=R,this.config=N,this.urlTree=j,this.paramsInheritanceStrategy=Y,this.urlSerializer=ye,this.allowRedirects=!0,this.applyRedirects=new Pe(this.urlSerializer,this.urlTree)}noMatchError(b){return new C.vHH(4002,!1)}recognize(){const b=Fo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,It).pipe(Me(I=>{if(I instanceof ha)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof ko?this.noMatchError(I):I}),(0,ln.U)(I=>{const R=new zn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},It,this.rootComponentType,null,{}),N=new os(R,I),j=new Zr("",N),Y=function ct(T,b,I=null,R=null){return gr(rn(T),b,I,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return Y.queryParams=this.urlTree.queryParams,j.url=this.urlSerializer.serialize(Y),this.inheritParamsAndData(j._root),{state:j,tree:Y}}))}match(b){return this.processSegmentGroup(this.injector,this.config,b.root,It).pipe(Me(R=>{throw R instanceof ko?this.noMatchError(R):R}))}inheritParamsAndData(b){const I=b.value,R=qr(I,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data),b.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(b,I,R,N){return 0===R.segments.length&&R.hasChildren()?this.processChildren(b,I,R):this.processSegment(b,I,R,R.segments,N,!0)}processChildren(b,I,R){const N=[];for(const j of Object.keys(R.children))"primary"===j?N.unshift(j):N.push(j);return(0,ae.D)(N).pipe(Re(j=>{const Y=R.children[j],ye=function la(T,b){const I=T.filter(R=>Un(R)===b);return I.push(...T.filter(R=>Un(R)!==b)),I}(I,j);return this.processSegmentGroup(b,ye,Y,j)}),(0,Ve.R)((j,Y)=>(j.push(...Y),j)),(0,_t.d)(null),function Dt(T,b){const I=arguments.length>=2;return R=>R.pipe(T?(0,Sr.h)((N,j)=>T(N,j,R)):De.y,et(1),I?(0,_t.d)(b):(0,Yn.T)(()=>new lt.K))}(),(0,ge.z)(j=>{if(null===j)return Lo(R);const Y=Qu(j);return function Pp(T){T.sort((b,I)=>b.value.outlet===It?-1:I.value.outlet===It?1:b.value.outlet.localeCompare(I.value.outlet))}(Y),(0,se.of)(Y)}))}processSegment(b,I,R,N,j,Y){return(0,ae.D)(I).pipe(Re(ye=>this.processSegmentAgainstRoute(ye._injector??b,I,ye,R,N,j,Y).pipe(Me(me=>{if(me instanceof ko)return(0,se.of)(null);throw me}))),(0,ve.P)(ye=>!!ye),Me(ye=>{if(qu(ye))return function su(T,b,I){return 0===b.length&&!T.children[I]}(R,N,j)?(0,se.of)([]):Lo(R);throw ye}))}processSegmentAgainstRoute(b,I,R,N,j,Y,ye){return function ga(T,b,I,R){return!!(Un(T)===R||R!==It&&pa(b,I,T))&&("**"===T.path||Fs(b,T,I).matched)}(R,N,j,Y)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(b,N,R,j,Y,ye):ye&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,N,I,R,j,Y):Lo(N):Lo(N)}expandSegmentAgainstRouteUsingRedirect(b,I,R,N,j,Y){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,R,N,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(b,I,R,N,j,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,I,R,N){const j=this.applyRedirects.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?fa(j):this.applyRedirects.lineralizeSegments(R,j).pipe((0,ge.z)(Y=>{const ye=new Kt(Y,{});return this.processSegment(b,I,ye,Y,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,I,R,N,j,Y){const{matched:ye,consumedSegments:me,remainingSegments:ot,positionalParamSegments:Wt}=Fs(I,N,j);if(!ye)return Lo(I);const tn=this.applyRedirects.applyRedirectCommands(me,N.redirectTo,Wt);return N.redirectTo.startsWith("/")?fa(tn):this.applyRedirects.lineralizeSegments(N,tn).pipe((0,ge.z)(sn=>this.processSegment(b,R,I,sn.concat(ot),Y,!1)))}matchSegmentAgainstRoute(b,I,R,N,j,Y){let ye;if("**"===R.path){const me=N.length>0?Xt(N).parameters:{},ot=new zn(N,me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vo(R),Un(R),R.component??R._loadedComponent??null,R,A(R));ye=(0,se.of)({snapshot:ot,consumedSegments:[],remainingSegments:[]}),I.children={}}else ye=Kr(I,R,N,b).pipe((0,ln.U)(({matched:me,consumedSegments:ot,remainingSegments:Wt,parameters:tn})=>me?{snapshot:new zn(ot,tn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Vo(R),Un(R),R.component??R._loadedComponent??null,R,A(R)),consumedSegments:ot,remainingSegments:Wt}:null));return ye.pipe((0,ar.w)(me=>null===me?Lo(I):this.getChildConfig(b=R._injector??b,R,N).pipe((0,ar.w)(({routes:ot})=>{const Wt=R._loadedInjector??b,{snapshot:tn,consumedSegments:sn,remainingSegments:vn}=me,{segmentGroup:Uo,slicedSegments:vo}=Fo(I,sn,vn,ot);if(0===vo.length&&Uo.hasChildren())return this.processChildren(Wt,ot,Uo).pipe((0,ln.U)(eo=>null===eo?null:[new os(tn,eo)]));if(0===ot.length&&0===vo.length)return(0,se.of)([new os(tn,[])]);const cu=Un(R)===j;return this.processSegment(Wt,ot,Uo,vo,cu?It:j,!0).pipe((0,ln.U)(eo=>[new os(tn,eo)]))}))))}getChildConfig(b,I,R){return I.children?(0,se.of)({routes:I.children,injector:b}):I.loadChildren?void 0!==I._loadedRoutes?(0,se.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function nu(T,b,I,R){const N=b.canLoad;if(void 0===N||0===N.length)return(0,se.of)(!0);const j=N.map(Y=>{const ye=ca(Y,T);return bt(function wh(T){return T&&eu(T.canLoad)}(ye)?ye.canLoad(b,I):T.runInContext(()=>ye(b,I)))});return(0,se.of)(j).pipe(Oo(),po())}(b,I,R).pipe((0,ge.z)(N=>N?this.configLoader.loadChildren(b,I).pipe((0,Te.b)(j=>{I._loadedRoutes=j.routes,I._loadedInjector=j.injector})):function Ku(T){return pe(ds(!1,3))}())):(0,se.of)({routes:[],injector:b})}}function ou(T){const b=T.value.routeConfig;return b&&""===b.path}function Qu(T){const b=[],I=new Set;for(const R of T){if(!ou(R)){b.push(R);continue}const N=b.find(j=>R.value.routeConfig===j.value.routeConfig);void 0!==N?(N.children.push(...R.children),I.add(N)):b.push(R)}for(const R of I){const N=Qu(R.children);b.push(new os(R.value,N))}return b.filter(R=>!I.has(R))}function Vo(T){return T.data||{}}function A(T){return T.resolve||{}}function Tt(T){return"string"==typeof T.title||null===T.title}function Mt(T){return(0,ar.w)(b=>{const I=T(b);return I?(0,ae.D)(I).pipe((0,ln.U)(()=>b)):(0,se.of)(b)})}const gn=new C.OlP("ROUTES");let mn=(()=>{class T{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,C.f3M)(C.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,se.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const R=bt(I.loadComponent()).pipe((0,ln.U)(Nn),(0,Te.b)(j=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=j}),Vt(()=>{this.componentLoaders.delete(I)})),N=new kt(R,()=>new $t.x).pipe(we());return this.componentLoaders.set(I,N),N}loadChildren(I,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,se.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const j=function en(T,b,I,R){return bt(T.loadChildren()).pipe((0,ln.U)(Nn),(0,ge.z)(N=>N instanceof C.YKP||Array.isArray(N)?(0,se.of)(N):(0,ae.D)(b.compileModuleAsync(N))),(0,ln.U)(N=>{R&&R(T);let j,Y,ye=!1;return Array.isArray(N)?(Y=N,!0):(j=N.create(I).injector,Y=j.get(gn,[],{optional:!0,self:!0}).flat()),{routes:Y.map(mr),injector:j}}))}(R,this.compiler,I,this.onLoadEndListener).pipe(Vt(()=>{this.childrenLoaders.delete(R)})),Y=new kt(j,()=>new $t.x).pipe(we());return this.childrenLoaders.set(R,Y),Y}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();function Nn(T){return function pn(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let dr=(()=>{class T{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $t.x,this.transitionAbortSubject=new $t.x,this.configLoader=(0,C.f3M)(mn),this.environmentInjector=(0,C.f3M)(C.lqb),this.urlSerializer=(0,C.f3M)(fi),this.rootContexts=(0,C.f3M)(kr),this.inputBindingEnabled=null!==(0,C.f3M)(us,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,se.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new Bu(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new Po(N))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:R})}setupNavigations(I,R,N){return this.transitions=new Ee.X({id:0,currentUrlTree:R,currentRawUrl:R,currentBrowserUrl:R,extractedUrl:I.urlHandlingStrategy.extract(R),urlAfterRedirects:I.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zi,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Sr.h)(j=>0!==j.id),(0,ln.U)(j=>({...j,extractedUrl:I.urlHandlingStrategy.extract(j.rawUrl)})),(0,ar.w)(j=>{this.currentTransition=j;let Y=!1,ye=!1;return(0,se.of)(j).pipe((0,Te.b)(me=>{this.currentNavigation={id:me.id,initialUrl:me.rawUrl,extractedUrl:me.extractedUrl,trigger:me.source,extras:me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ar.w)(me=>{const ot=me.currentBrowserUrl.toString(),Wt=!I.navigated||me.extractedUrl.toString()!==ot||ot!==me.currentUrlTree.toString();if(!Wt&&"reload"!==(me.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const sn="";return this.events.next(new Za(me.id,this.urlSerializer.serialize(me.rawUrl),sn,0)),me.resolve(null),We.E}if(I.urlHandlingStrategy.shouldProcessUrl(me.rawUrl))return(0,se.of)(me).pipe((0,ar.w)(sn=>{const vn=this.transitions?.getValue();return this.events.next(new Ro(sn.id,this.urlSerializer.serialize(sn.extractedUrl),sn.source,sn.restoredState)),vn!==this.transitions?.getValue()?We.E:Promise.resolve(sn)}),function F(T,b,I,R,N,j){return(0,ge.z)(Y=>function ma(T,b,I,R,N,j,Y="emptyOnly"){return new Yu(T,b,I,R,N,Y,j).recognize()}(T,b,I,R,Y.extractedUrl,N,j).pipe((0,ln.U)(({state:ye,tree:me})=>({...Y,targetSnapshot:ye,urlAfterRedirects:me}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Te.b)(sn=>{j.targetSnapshot=sn.targetSnapshot,j.urlAfterRedirects=sn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:sn.urlAfterRedirects};const vn=new Uu(sn.id,this.urlSerializer.serialize(sn.extractedUrl),this.urlSerializer.serialize(sn.urlAfterRedirects),sn.targetSnapshot);this.events.next(vn)}));if(Wt&&I.urlHandlingStrategy.shouldProcessUrl(me.currentRawUrl)){const{id:sn,extractedUrl:vn,source:Uo,restoredState:vo,extras:cu}=me,eo=new Ro(sn,this.urlSerializer.serialize(vn),Uo,vo);this.events.next(eo);const ld=it(0,this.rootComponentType).snapshot;return this.currentTransition=j={...me,targetSnapshot:ld,urlAfterRedirects:vn,extras:{...cu,skipLocationChange:!1,replaceUrl:!1}},(0,se.of)(j)}{const sn="";return this.events.next(new Za(me.id,this.urlSerializer.serialize(me.extractedUrl),sn,1)),me.resolve(null),We.E}}),(0,Te.b)(me=>{const ot=new Wi(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects),me.targetSnapshot);this.events.next(ot)}),(0,ln.U)(me=>(this.currentTransition=j={...me,guards:yh(me.targetSnapshot,me.currentSnapshot,this.rootContexts)},j)),function Kl(T,b){return(0,ge.z)(I=>{const{targetSnapshot:R,currentSnapshot:N,guards:{canActivateChecks:j,canDeactivateChecks:Y}}=I;return 0===Y.length&&0===j.length?(0,se.of)({...I,guardsResult:!0}):function Js(T,b,I,R){return(0,ae.D)(T).pipe((0,ge.z)(N=>function Tr(T,b,I,R,N){const j=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,se.of)(!0);const Y=j.map(ye=>{const me=Li(b)??N,ot=ca(ye,me);return bt(function zu(T){return T&&eu(T.canDeactivate)}(ot)?ot.canDeactivate(T,b,I,R):me.runInContext(()=>ot(T,b,I,R))).pipe((0,ve.P)())});return(0,se.of)(Y).pipe(Oo())}(N.component,N.route,I,b,R)),(0,ve.P)(N=>!0!==N,!0))}(Y,R,N,T).pipe((0,ge.z)(ye=>ye&&function Ih(T){return"boolean"==typeof T}(ye)?function Fi(T,b,I,R){return(0,ae.D)(b).pipe(Re(N=>(0,Jt.z)(function td(T,b){return null!==T&&b&&b(new oa(T)),(0,se.of)(!0)}(N.route.parent,R),function Ki(T,b){return null!==T&&b&&b(new ho(T)),(0,se.of)(!0)}(N.route,R),function fs(T,b,I){const R=b[b.length-1],j=b.slice(0,b.length-1).reverse().map(Y=>function Xc(T){const b=T.routeConfig?T.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:T,guards:b}:null}(Y)).filter(Y=>null!==Y).map(Y=>Ie(()=>{const ye=Y.guards.map(me=>{const ot=Li(Y.node)??I,Wt=ca(me,ot);return bt(function Gu(T){return T&&eu(T.canActivateChild)}(Wt)?Wt.canActivateChild(R,T):ot.runInContext(()=>Wt(R,T))).pipe((0,ve.P)())});return(0,se.of)(ye).pipe(Oo())}));return(0,se.of)(j).pipe(Oo())}(T,N.path,I),function wr(T,b,I){const R=b.routeConfig?b.routeConfig.canActivate:null;if(!R||0===R.length)return(0,se.of)(!0);const N=R.map(j=>Ie(()=>{const Y=Li(b)??I,ye=ca(j,Y);return bt(function Zi(T){return T&&eu(T.canActivate)}(ye)?ye.canActivate(b,T):Y.runInContext(()=>ye(b,T))).pipe((0,ve.P)())}));return(0,se.of)(N).pipe(Oo())}(T,N.route,I))),(0,ve.P)(N=>!0!==N,!0))}(R,j,T,b):(0,se.of)(ye)),(0,ln.U)(ye=>({...I,guardsResult:ye})))})}(this.environmentInjector,me=>this.events.next(me)),(0,Te.b)(me=>{if(j.guardsResult=me.guardsResult,At(me.guardsResult))throw cs(0,me.guardsResult);const ot=new mh(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects),me.targetSnapshot,!!me.guardsResult);this.events.next(ot)}),(0,Sr.h)(me=>!!me.guardsResult||(this.cancelNavigationTransition(me,"",3),!1)),Mt(me=>{if(me.guards.canActivateChecks.length)return(0,se.of)(me).pipe((0,Te.b)(ot=>{const Wt=new ql(ot.id,this.urlSerializer.serialize(ot.extractedUrl),this.urlSerializer.serialize(ot.urlAfterRedirects),ot.targetSnapshot);this.events.next(Wt)}),(0,ar.w)(ot=>{let Wt=!1;return(0,se.of)(ot).pipe(function x(T,b){return(0,ge.z)(I=>{const{targetSnapshot:R,guards:{canActivateChecks:N}}=I;if(!N.length)return(0,se.of)(I);let j=0;return(0,ae.D)(N).pipe(Re(Y=>function L(T,b,I,R){const N=T.routeConfig,j=T._resolve;return void 0!==N?.title&&!Tt(N)&&(j[vr]=N.title),function Q(T,b,I,R){const N=function _e(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===N.length)return(0,se.of)({});const j={};return(0,ae.D)(N).pipe((0,ge.z)(Y=>function Fe(T,b,I,R){const N=Li(b)??R,j=ca(T,N);return bt(j.resolve?j.resolve(b,I):N.runInContext(()=>j(b,I)))}(T[Y],b,I,R).pipe((0,ve.P)(),(0,Te.b)(ye=>{j[Y]=ye}))),et(1),function cn(T){return(0,ln.U)(()=>T)}(j),Me(Y=>qu(Y)?We.E:pe(Y)))}(j,T,b,R).pipe((0,ln.U)(Y=>(T._resolvedData=Y,T.data=qr(T,I).resolve,N&&Tt(N)&&(T.data[vr]=N.title),null)))}(Y.route,R,T,b)),(0,Te.b)(()=>j++),et(1),(0,ge.z)(Y=>j===N.length?(0,se.of)(I):We.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Te.b)({next:()=>Wt=!0,complete:()=>{Wt||this.cancelNavigationTransition(ot,"",2)}}))}),(0,Te.b)(ot=>{const Wt=new _h(ot.id,this.urlSerializer.serialize(ot.extractedUrl),this.urlSerializer.serialize(ot.urlAfterRedirects),ot.targetSnapshot);this.events.next(Wt)}))}),Mt(me=>{const ot=Wt=>{const tn=[];Wt.routeConfig?.loadComponent&&!Wt.routeConfig._loadedComponent&&tn.push(this.configLoader.loadComponent(Wt.routeConfig).pipe((0,Te.b)(sn=>{Wt.component=sn}),(0,ln.U)(()=>{})));for(const sn of Wt.children)tn.push(...ot(sn));return tn};return Je(ot(me.targetSnapshot.root)).pipe((0,_t.d)(),(0,On.q)(1))}),Mt(()=>this.afterPreactivation()),(0,ln.U)(me=>{const ot=function fo(T,b,I){const R=ls(T,b._root,I?I._root:void 0);return new Gn(R,b)}(I.routeReuseStrategy,me.targetSnapshot,me.currentRouterState);return this.currentTransition=j={...me,targetRouterState:ot},j}),(0,Te.b)(()=>{this.events.next(new on)}),((T,b,I,R)=>(0,ln.U)(N=>(new Zl(b,N.targetRouterState,N.currentRouterState,I,R).activate(T),N)))(this.rootContexts,I.routeReuseStrategy,me=>this.events.next(me),this.inputBindingEnabled),(0,On.q)(1),(0,Te.b)({next:me=>{Y=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ss(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects))),I.titleStrategy?.updateTitle(me.targetRouterState.snapshot),me.resolve(!0)},complete:()=>{Y=!0}}),function Qn(T){return(0,Xe.e)((b,I)=>{(0,un.Xf)(T).subscribe((0,Oe.x)(I,()=>I.complete(),kn.Z)),!I.closed&&b.subscribe(I)})}(this.transitionAbortSubject.pipe((0,Te.b)(me=>{throw me}))),Vt(()=>{Y||ye||this.cancelNavigationTransition(j,"",1),this.currentNavigation?.id===j.id&&(this.currentNavigation=null)}),Me(me=>{if(ye=!0,Ja(me))this.events.next(new co(j.id,this.urlSerializer.serialize(j.extractedUrl),me.message,me.cancellationCode)),function Fr(T){return Ja(T)&&At(T.url)}(me)?this.events.next(new lr(me.url)):j.resolve(!1);else{this.events.next(new Ka(j.id,this.urlSerializer.serialize(j.extractedUrl),me,j.targetSnapshot??void 0));try{j.resolve(I.errorHandler(me))}catch(ot){j.reject(ot)}}return We.E}))}))}cancelNavigationTransition(I,R,N){const j=new co(I.id,this.urlSerializer.serialize(I.extractedUrl),R,N);this.events.next(j),I.resolve(!1)}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();function Vs(T){return T!==zi}let ps=(()=>{class T{buildTitle(I){let R,N=I.root;for(;void 0!==N;)R=this.getResolvedTitleForRoute(N)??R,N=N.children.find(j=>j.outlet===It);return R}getResolvedTitleForRoute(I){return I.data[vr]}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:function(){return(0,C.f3M)(_a)},providedIn:"root"})}return T})(),_a=(()=>{class T extends ps{constructor(I){super(),this.title=I}updateTitle(I){const R=this.buildTitle(I);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||T)(C.LFG(Dn.Dx))};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})(),Yr=(()=>{class T{static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:function(){return(0,C.f3M)(hr)},providedIn:"root"})}return T})();class Vi{shouldDetach(b){return!1}store(b,I){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,I){return b.routeConfig===I.routeConfig}}let hr=(()=>{class T extends Vi{static#e=this.\u0275fac=function(){let I;return function(N){return(I||(I=C.n5z(T)))(N||T)}}();static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();const Ci=new C.OlP("",{providedIn:"root",factory:()=>({})});let xp=(()=>{class T{static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:function(){return(0,C.f3M)(Jn)},providedIn:"root"})}return T})(),Jn=(()=>{class T{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,R){return I}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();var uu=function(T){return T[T.COMPLETE=0]="COMPLETE",T[T.FAILED=1]="FAILED",T[T.REDIRECTING=2]="REDIRECTING",T}(uu||{});function ya(T,b){T.events.pipe((0,Sr.h)(I=>I instanceof ss||I instanceof co||I instanceof Ka||I instanceof Za),(0,ln.U)(I=>I instanceof ss||I instanceof Za?uu.COMPLETE:I instanceof co&&(0===I.code||1===I.code)?uu.REDIRECTING:uu.FAILED),(0,Sr.h)(I=>I!==uu.REDIRECTING),(0,On.q)(1)).subscribe(()=>{b()})}function mi(T){throw T}function va(T,b,I){return b.parse("/")}const Ju={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ea={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yn=(()=>{class T{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,C.f3M)(C.c2e),this.isNgZoneEnabled=!1,this._events=new $t.x,this.options=(0,C.f3M)(Ci,{optional:!0})||{},this.pendingTasks=(0,C.f3M)(C.HDt),this.errorHandler=this.options.errorHandler||mi,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||va,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,C.f3M)(xp),this.routeReuseStrategy=(0,C.f3M)(Yr),this.titleStrategy=(0,C.f3M)(ps),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,C.f3M)(gn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,C.f3M)(dr),this.urlSerializer=(0,C.f3M)(fi),this.location=(0,C.f3M)(Kn.Ye),this.componentInputBindingEnabled=!!(0,C.f3M)(us,{optional:!0}),this.eventsSubscription=new Ze.w0,this.isNgZoneEnabled=(0,C.f3M)(C.R0b)instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=it(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(R=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(Us(R)&&this._events.next(R));if(R instanceof Ro)Vs(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(R instanceof Za)this.rawUrlTree=N.rawUrl;else if(R instanceof Uu){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(j,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(R instanceof on)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(R instanceof co)0!==R.code&&1!==R.code&&(this.navigated=!0),(3===R.code||2===R.code)&&this.restoreHistory(N);else if(R instanceof lr){const j=this.urlHandlingStrategy.merge(R.url,N.currentRawUrl),Y={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Vs(N.source)};this.scheduleNavigation(j,zi,null,Y,{resolve:N.resolve,reject:N.reject,promise:N.promise})}R instanceof Ka&&this.restoreHistory(N,!0),R instanceof ss&&(this.navigated=!0),Us(R)&&this._events.next(R)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),zi,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const R="popstate"===I.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,R,I.state)},0)}))}navigateToSyncWithBrowser(I,R,N){const j={replaceUrl:!0},Y=N?.navigationId?N:null;if(N){const me={...N};delete me.navigationId,delete me.\u0275routerPageId,0!==Object.keys(me).length&&(j.state=me)}const ye=this.parseUrl(I);this.scheduleNavigation(ye,R,Y,j)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(mr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,R={}){const{relativeTo:N,queryParams:j,fragment:Y,queryParamsHandling:ye,preserveFragment:me}=R,ot=me?this.currentUrlTree.fragment:Y;let tn,Wt=null;switch(ye){case"merge":Wt={...this.currentUrlTree.queryParams,...j};break;case"preserve":Wt=this.currentUrlTree.queryParams;break;default:Wt=j||null}null!==Wt&&(Wt=this.removeEmptyProps(Wt));try{tn=rn(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),tn=this.currentUrlTree.root}return gr(tn,I,Wt,ot??null)}navigateByUrl(I,R={skipLocationChange:!1}){const N=At(I)?I:this.parseUrl(I),j=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(j,zi,null,R)}navigate(I,R={skipLocationChange:!1}){return function nd(T){for(let b=0;b<T.length;b++)if(null==T[b])throw new C.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,R),R)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let R;try{R=this.urlSerializer.parse(I)}catch(N){R=this.malformedUriErrorHandler(N,this.urlSerializer,I)}return R}isActive(I,R){let N;if(N=!0===R?{...Ju}:!1===R?{...Ea}:R,At(I))return pr(this.currentUrlTree,I,N);const j=this.parseUrl(I);return pr(this.currentUrlTree,j,N)}removeEmptyProps(I){return Object.keys(I).reduce((R,N)=>{const j=I[N];return null!=j&&(R[N]=j),R},{})}scheduleNavigation(I,R,N,j,Y){if(this.disposed)return Promise.resolve(!1);let ye,me,ot;Y?(ye=Y.resolve,me=Y.reject,ot=Y.promise):ot=new Promise((tn,sn)=>{ye=tn,me=sn});const Wt=this.pendingTasks.add();return ya(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Wt))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:j,resolve:ye,reject:me,promise:ot,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ot.catch(tn=>Promise.reject(tn))}setBrowserUrl(I,R){const N=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(N)||R.extras.replaceUrl){const Y={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState(N,"",Y)}else{const j={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go(N,"",j)}}restoreHistory(I,R=!1){if("computed"===this.canceledNavigationResolution){const j=this.currentPageId-this.browserPageId;0!==j?this.location.historyGo(j):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===j&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,R){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:R}:{navigationId:I}}static#e=this.\u0275fac=function(R){return new(R||T)};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();function Us(T){return!(T instanceof on||T instanceof lr)}let rd=(()=>{class T{constructor(I,R,N,j,Y,ye){this.router=I,this.route=R,this.tabIndexAttribute=N,this.renderer=j,this.el=Y,this.locationStrategy=ye,this.href=null,this.commands=null,this.onChanges=new $t.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const me=Y.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===me||"area"===me,this.isAnchorElement?this.subscription=I.events.subscribe(ot=>{ot instanceof ss&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,R,N,j,Y){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||R||N||j||Y||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,C.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,R){const N=this.renderer,j=this.el.nativeElement;null!==R?N.setAttribute(j,I,R):N.removeAttribute(j,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||T)(C.Y36(yn),C.Y36(fn),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36(Kn.S$))};static#t=this.\u0275dir=C.lG2({type:T,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,N){1&R&&C.NdJ("click",function(Y){return N.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&R&&C.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",C.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",C.VuI],replaceUrl:["replaceUrl","replaceUrl",C.VuI],routerLink:"routerLink"},standalone:!0,features:[C.Xq5,C.TTD]})}return T})(),Xs=(()=>{class T{get isActive(){return this._isActive}constructor(I,R,N,j,Y){this.router=I,this.element=R,this.renderer=N,this.cdr=j,this.link=Y,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new C.vpe,this.routerEventsSubscription=I.events.subscribe(ye=>{ye instanceof ss&&this.update()})}ngAfterContentInit(){(0,se.of)(this.links.changes,(0,se.of)(null)).pipe((0,xn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),this.link].filter(R=>!!R).map(R=>R.onChanges);this.linkInputChangesSubscription=(0,ae.D)(I).pipe((0,xn.J)()).subscribe(R=>{this._isActive!==this.isLinkActive(this.router)(R)&&this.update()})}set routerLinkActive(I){const R=Array.isArray(I)?I:I.split(" ");this.classes=R.filter(N=>!!N)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const I=this.hasActiveLinks();this._isActive!==I&&(this._isActive=I,this.cdr.markForCheck(),this.classes.forEach(R=>{I?this.renderer.addClass(this.element.nativeElement,R):this.renderer.removeClass(this.element.nativeElement,R)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const R=function Xu(T){return!!T.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&I.isActive(N.urlTree,R)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.links.some(I)}static#e=this.\u0275fac=function(R){return new(R||T)(C.Y36(yn),C.Y36(C.SBq),C.Y36(C.Qsj),C.Y36(C.sBO),C.Y36(rd,8))};static#t=this.\u0275dir=C.lG2({type:T,selectors:[["","routerLinkActive",""]],contentQueries:function(R,N,j){if(1&R&&C.Suo(j,rd,5),2&R){let Y;C.iGM(Y=C.CRH())&&(N.links=Y)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[C.TTD]})}return T})();class Jl{}let tl=(()=>{class T{constructor(I,R,N,j,Y){this.router=I,this.injector=N,this.preloadingStrategy=j,this.loader=Y}setUpPreloading(){this.subscription=this.router.events.pipe((0,Sr.h)(I=>I instanceof ss),Re(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,R){const N=[];for(const j of R){j.providers&&!j._injector&&(j._injector=(0,C.MMx)(j.providers,I,`Route: ${j.path}`));const Y=j._injector??I,ye=j._loadedInjector??Y;(j.loadChildren&&!j._loadedRoutes&&void 0===j.canLoad||j.loadComponent&&!j._loadedComponent)&&N.push(this.preloadConfig(Y,j)),(j.children||j._loadedRoutes)&&N.push(this.processRoutes(ye,j.children??j._loadedRoutes))}return(0,ae.D)(N).pipe((0,xn.J)())}preloadConfig(I,R){return this.preloadingStrategy.preload(R,()=>{let N;N=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(I,R):(0,se.of)(null);const j=N.pipe((0,ge.z)(Y=>null===Y?(0,se.of)(void 0):(R._loadedRoutes=Y.routes,R._loadedInjector=Y.injector,this.processRoutes(Y.injector??I,Y.routes))));if(R.loadComponent&&!R._loadedComponent){const Y=this.loader.loadComponent(R);return(0,ae.D)([j,Y]).pipe((0,xn.J)())}return j})}static#e=this.\u0275fac=function(R){return new(R||T)(C.LFG(yn),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(Jl),C.LFG(mn))};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})();const id=new C.OlP("");let Ft=(()=>{class T{constructor(I,R,N,j,Y={}){this.urlSerializer=I,this.transitions=R,this.viewportScroller=N,this.zone=j,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Ro?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof ss?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Za&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof aa&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,R){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new aa(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){C.$Z()};static#t=this.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac})}return T})();function Ui(T,b){return{\u0275kind:T,\u0275providers:b}}function lu(){const T=(0,C.f3M)(C.zs3);return b=>{const I=T.get(C.z2F);if(b!==I.components[0])return;const R=T.get(yn),N=T.get(Xl);1===T.get(Xn)&&R.initialNavigation(),T.get(Ht,null,C.XFs.Optional)?.setUpPreloading(),T.get(id,null,C.XFs.Optional)?.init(),R.resetRootComponentType(I.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const Xl=new C.OlP("",{factory:()=>new $t.x}),Xn=new C.OlP("",{providedIn:"root",factory:()=>1}),Ht=new C.OlP("");function Bi(T){return Ui(0,[{provide:Ht,useExisting:tl},{provide:Jl,useExisting:T}])}const Lt=new C.OlP("ROUTER_FORROOT_GUARD"),_o=[Kn.Ye,{provide:fi,useClass:Oi},yn,kr,{provide:fn,useFactory:function Ch(T){return T.routerState.root},deps:[yn]},mn,[]];function nl(){return new C.PXZ("Router",yn)}let Ah=(()=>{class T{constructor(I){}static forRoot(I,R){return{ngModule:T,providers:[_o,[],{provide:gn,multi:!0,useValue:I},{provide:Lt,useFactory:ec,deps:[[yn,new C.FiY,new C.tp0]]},{provide:Ci,useValue:R||{}},R?.useHash?{provide:Kn.S$,useClass:Kn.Do}:{provide:Kn.S$,useClass:Kn.b0},{provide:id,useFactory:()=>{const T=(0,C.f3M)(Kn.EM),b=(0,C.f3M)(C.R0b),I=(0,C.f3M)(Ci),R=(0,C.f3M)(dr),N=(0,C.f3M)(fi);return I.scrollOffset&&T.setOffset(I.scrollOffset),new Ft(N,R,T,b,I)}},R?.preloadingStrategy?Bi(R.preloadingStrategy).\u0275providers:[],{provide:C.PXZ,multi:!0,useFactory:nl},R?.initialNavigation?_r(R):[],R?.bindToComponentInputs?Ui(8,[cr,{provide:us,useExisting:cr}]).\u0275providers:[],[{provide:Yi,useFactory:lu},{provide:C.tb,multi:!0,useExisting:Yi}]]}}static forChild(I){return{ngModule:T,providers:[{provide:gn,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(R){return new(R||T)(C.LFG(Lt,8))};static#t=this.\u0275mod=C.oAB({type:T});static#n=this.\u0275inj=C.cJS({})}return T})();function ec(T){return"guarded"}function _r(T){return["disabled"===T.initialNavigation?Ui(3,[{provide:C.ip1,multi:!0,useFactory:()=>{const b=(0,C.f3M)(yn);return()=>{b.setUpLocationChangeListener()}}},{provide:Xn,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?Ui(2,[{provide:Xn,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:b=>{const I=b.get(Kn.V_,Promise.resolve());return()=>I.then(()=>new Promise(R=>{const N=b.get(yn),j=b.get(Xl);ya(N,()=>{R(!0)}),b.get(dr).afterPreactivation=()=>(R(!0),j.closed?(0,se.of)(void 0):j),N.initialNavigation()}))}}]).\u0275providers:[]]}const Yi=new C.OlP("")},3106:(yt,be,B)=>{B.d(be,{Z:()=>Je});var C=B(9058),m=B(4537),K=B(534),oe=B(7879);class ae{constructor(rt,lt){this._delegate=rt,this.firebase=lt,(0,K._addComponent)(rt,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=rt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this._delegate.automaticDataCollectionEnabled=rt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(rt=>{this._delegate.checkDestroyed(),rt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(rt,lt=K._DEFAULT_ENTRY_NAME){var Jt;this._delegate.checkDestroyed();const un=this._delegate.container.getProvider(rt);return!un.isInitialized()&&"EXPLICIT"===(null===(Jt=un.getComponent())||void 0===Jt?void 0:Jt.instantiationMode)&&un.initialize(),un.getImmediate({identifier:lt})}_removeServiceInstance(rt,lt=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(rt).clearInstance(lt)}_addComponent(rt){(0,K._addComponent)(this._delegate,rt)}_addOrOverwriteComponent(rt){(0,K._addOrOverwriteComponent)(this._delegate,rt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function De(){const Ue=function He(Ue){const rt={},lt={__esModule:!0,initializeApp:function Ie(Ze,Xe={}){const we=K.initializeApp(Ze,Xe);if((0,C.r3)(rt,we.name))return rt[we.name];const kt=new Ue(we,lt);return rt[we.name]=kt,kt},app:un,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ze){const Xe=Ze.name,we=Xe.replace("-compat","");if(K._registerComponent(Ze)&&"PUBLIC"===Ze.type){const kt=($t=un())=>{if("function"!=typeof $t[we])throw Ee.create("invalid-app-argument",{appName:Xe});return $t[we]()};void 0!==Ze.serviceProps&&(0,C.ZB)(kt,Ze.serviceProps),lt[we]=kt,Ue.prototype[we]=function(...$t){return this._getService.bind(this,Xe).apply(this,Ze.multipleInstances?$t:[])}}return"PUBLIC"===Ze.type?lt[we]:null},removeApp:function Jt(Ze){delete rt[Ze]},useAsService:function We(Ze,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:K}};function un(Ze){if(!(0,C.r3)(rt,Ze=Ze||K._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Ze});return rt[Ze]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function Le(){return Object.keys(rt).map(Ze=>rt[Ze])}}),un.App=Ue,lt}(ae);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function rt(lt){(0,C.ZB)(Ue,lt)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Ue}(),ne=new oe.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=X;!function je(Ue){(0,K.registerVersion)("@firebase/app-compat","0.2.22",Ue)}()},534:(yt,be,B)=>{B.r(be),B.d(be,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Kt,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>$r,_addOrOverwriteComponent:()=>pr,_apps:()=>bt,_clearComponents:()=>wt,_components:()=>Fn,_getProvider:()=>nr,_registerComponent:()=>An,_removeServiceInstance:()=>uo,deleteApp:()=>wi,getApp:()=>Rs,getApps:()=>Ii,initializeApp:()=>rs,onLog:()=>lo,registerVersion:()=>Oi,setLogLevel:()=>Gr});var C=B(5861),m=B(4537),K=B(7879),oe=B(9058);const ae=(Ae,he)=>he.some(Ge=>Ae instanceof Ge);let se,Ee;const X=new WeakMap,ne=new WeakMap,ue=new WeakMap,Oe=new WeakMap,je=new WeakMap;let rt={get(Ae,he,Ge){if(Ae instanceof IDBTransaction){if("done"===he)return ne.get(Ae);if("objectStoreNames"===he)return Ae.objectStoreNames||ue.get(Ae);if("store"===he)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return Ie(Ae[he])},set:(Ae,he,Ge)=>(Ae[he]=Ge,!0),has:(Ae,he)=>Ae instanceof IDBTransaction&&("done"===he||"store"===he)||he in Ae};function un(Ae){return"function"==typeof Ae?function Jt(Ae){return Ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ae)?function(...he){return Ae.apply(Le(this),he),Ie(X.get(this))}:function(...he){return Ie(Ae.apply(Le(this),he))}:function(he,...Ge){const pt=Ae.call(Le(this),he,...Ge);return ue.set(pt,he.sort?he.sort():[he]),Ie(pt)}}(Ae):(Ae instanceof IDBTransaction&&function Ue(Ae){if(ne.has(Ae))return;const he=new Promise((Ge,pt)=>{const At=()=>{Ae.removeEventListener("complete",ct),Ae.removeEventListener("error",rn),Ae.removeEventListener("abort",rn)},ct=()=>{Ge(),At()},rn=()=>{pt(Ae.error||new DOMException("AbortError","AbortError")),At()};Ae.addEventListener("complete",ct),Ae.addEventListener("error",rn),Ae.addEventListener("abort",rn)});ne.set(Ae,he)}(Ae),ae(Ae,function He(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ae,rt):Ae)}function Ie(Ae){if(Ae instanceof IDBRequest)return function Je(Ae){const he=new Promise((Ge,pt)=>{const At=()=>{Ae.removeEventListener("success",ct),Ae.removeEventListener("error",rn)},ct=()=>{Ge(Ie(Ae.result)),At()},rn=()=>{pt(Ae.error),At()};Ae.addEventListener("success",ct),Ae.addEventListener("error",rn)});return he.then(Ge=>{Ge instanceof IDBCursor&&X.set(Ge,Ae)}).catch(()=>{}),je.set(he,Ae),he}(Ae);if(Oe.has(Ae))return Oe.get(Ae);const he=un(Ae);return he!==Ae&&(Oe.set(Ae,he),je.set(he,Ae)),he}const Le=Ae=>je.get(Ae),Ze=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],we=new Map;function kt(Ae,he){if(!(Ae instanceof IDBDatabase)||he in Ae||"string"!=typeof he)return;if(we.get(he))return we.get(he);const Ge=he.replace(/FromIndex$/,""),pt=he!==Ge,At=Xe.includes(Ge);if(!(Ge in(pt?IDBIndex:IDBObjectStore).prototype)||!At&&!Ze.includes(Ge))return;const ct=function(){var rn=(0,C.Z)(function*(gr,...jn){const Ti=this.transaction(gr,At?"readwrite":"readonly");let si=Ti.store;return pt&&(si=si.index(jn.shift())),(yield Promise.all([si[Ge](...jn),At&&Ti.done]))[0]});return function(jn){return rn.apply(this,arguments)}}();return we.set(he,ct),ct}!function lt(Ae){rt=Ae(rt)}(Ae=>({...Ae,get:(he,Ge,pt)=>kt(he,Ge)||Ae.get(he,Ge,pt),has:(he,Ge)=>!!kt(he,Ge)||Ae.has(he,Ge)}));class $t{constructor(he){this.container=he}getPlatformInfoString(){return this.container.getProviders().map(Ge=>{if(function Kn(Ae){const he=Ae.getComponent();return"VERSION"===he?.type}(Ge)){const pt=Ge.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Ge=>Ge).join(" ")}}const ln="@firebase/app",On=new K.Yd("@firebase/app"),Rt="[DEFAULT]",Xt={[ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,Fn=new Map;function $r(Ae,he){try{Ae.container.addComponent(he)}catch(Ge){On.debug(`Component ${he.name} failed to register with FirebaseApp ${Ae.name}`,Ge)}}function pr(Ae,he){Ae.container.addOrOverwriteComponent(he)}function An(Ae){const he=Ae.name;if(Fn.has(he))return On.debug(`There were multiple attempts to register component ${he}.`),!1;Fn.set(he,Ae);for(const Ge of bt.values())$r(Ge,Ae);return!0}function nr(Ae,he){const Ge=Ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Ge&&Ge.triggerHeartbeat(),Ae.container.getProvider(he)}function uo(Ae,he,Ge=Rt){nr(Ae,he).clearInstance(Ge)}function wt(){Fn.clear()}const Gt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ir{constructor(he,Ge,pt){this._isDeleted=!1,this._options=Object.assign({},he),this._config=Object.assign({},Ge),this._name=Ge.name,this._automaticDataCollectionEnabled=Ge.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this.checkDestroyed(),this._automaticDataCollectionEnabled=he}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(he){this._isDeleted=he}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}}const Kt="10.5.2";function rs(Ae,he={}){let Ge=Ae;"object"!=typeof he&&(he={name:he});const pt=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},he),At=pt.name;if("string"!=typeof At||!At)throw Gt.create("bad-app-name",{appName:String(At)});if(Ge||(Ge=(0,oe.aH)()),!Ge)throw Gt.create("no-options");const ct=bt.get(At);if(ct){if((0,oe.vZ)(Ge,ct.options)&&(0,oe.vZ)(pt,ct.config))return ct;throw Gt.create("duplicate-app",{appName:At})}const rn=new m.H0(At);for(const jn of Fn.values())rn.addComponent(jn);const gr=new Ir(Ge,pt,rn);return bt.set(At,gr),gr}function Rs(Ae=Rt){const he=bt.get(Ae);if(!he&&Ae===Rt&&(0,oe.aH)())return rs();if(!he)throw Gt.create("no-app",{appName:Ae});return he}function Ii(){return Array.from(bt.values())}function wi(Ae){return fi.apply(this,arguments)}function fi(){return(fi=(0,C.Z)(function*(Ae){const he=Ae.name;bt.has(he)&&(bt.delete(he),yield Promise.all(Ae.container.getProviders().map(Ge=>Ge.delete())),Ae.isDeleted=!0)})).apply(this,arguments)}function Oi(Ae,he,Ge){var pt;let At=null!==(pt=Xt[Ae])&&void 0!==pt?pt:Ae;Ge&&(At+=`-${Ge}`);const ct=At.match(/\s|\//),rn=he.match(/\s|\//);if(ct||rn){const gr=[`Unable to register library "${At}" with version "${he}":`];return ct&&gr.push(`library name "${At}" contains illegal characters (whitespace or "/")`),ct&&rn&&gr.push("and"),rn&&gr.push(`version name "${he}" contains illegal characters (whitespace or "/")`),void On.warn(gr.join(" "))}An(new m.wA(`${At}-version`,()=>({library:At,version:he}),"VERSION"))}function lo(Ae,he){if(null!==Ae&&"function"!=typeof Ae)throw Gt.create("invalid-log-argument");(0,K.Am)(Ae,he)}function Gr(Ae){(0,K.Ub)(Ae)}const zr="firebase-heartbeat-database",ii=1,te="firebase-heartbeat-store";let $=null;function z(){return $||($=function pe(Ae,he,{blocked:Ge,upgrade:pt,blocking:At,terminated:ct}={}){const rn=indexedDB.open(Ae,he),gr=Ie(rn);return pt&&rn.addEventListener("upgradeneeded",jn=>{pt(Ie(rn.result),jn.oldVersion,jn.newVersion,Ie(rn.transaction),jn)}),Ge&&rn.addEventListener("blocked",jn=>Ge(jn.oldVersion,jn.newVersion,jn)),gr.then(jn=>{ct&&jn.addEventListener("close",()=>ct()),At&&jn.addEventListener("versionchange",Ti=>At(Ti.oldVersion,Ti.newVersion,Ti))}).catch(()=>{}),gr}(zr,ii,{upgrade:(Ae,he)=>{0===he&&Ae.createObjectStore(te)}}).catch(Ae=>{throw Gt.create("idb-open",{originalErrorMessage:Ae.message})})),$}function W(){return(W=(0,C.Z)(function*(Ae){try{return yield(yield z()).transaction(te).objectStore(te).get(tt(Ae))}catch(he){if(he instanceof oe.ZR)On.warn(he.message);else{const Ge=Gt.create("idb-get",{originalErrorMessage:he?.message});On.warn(Ge.message)}}})).apply(this,arguments)}function ie(Ae,he){return Be.apply(this,arguments)}function Be(){return(Be=(0,C.Z)(function*(Ae,he){try{const pt=(yield z()).transaction(te,"readwrite");yield pt.objectStore(te).put(he,tt(Ae)),yield pt.done}catch(Ge){if(Ge instanceof oe.ZR)On.warn(Ge.message);else{const pt=Gt.create("idb-set",{originalErrorMessage:Ge?.message});On.warn(pt.message)}}})).apply(this,arguments)}function tt(Ae){return`${Ae.name}!${Ae.options.appId}`}class Pt{constructor(he){this.container=he,this._heartbeatsCache=null;const Ge=this.container.getProvider("app").getImmediate();this._storage=new pi(Ge),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var he=this;return(0,C.Z)(function*(){const pt=he.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=jt();if(null===he._heartbeatsCache&&(he._heartbeatsCache=yield he._heartbeatsCachePromise),he._heartbeatsCache.lastSentHeartbeatDate!==At&&!he._heartbeatsCache.heartbeats.some(ct=>ct.date===At))return he._heartbeatsCache.heartbeats.push({date:At,agent:pt}),he._heartbeatsCache.heartbeats=he._heartbeatsCache.heartbeats.filter(ct=>{const rn=new Date(ct.date).valueOf();return Date.now()-rn<=2592e6}),he._storage.overwrite(he._heartbeatsCache)})()}getHeartbeatsHeader(){var he=this;return(0,C.Z)(function*(){if(null===he._heartbeatsCache&&(yield he._heartbeatsCachePromise),null===he._heartbeatsCache||0===he._heartbeatsCache.heartbeats.length)return"";const Ge=jt(),{heartbeatsToSend:pt,unsentEntries:At}=function Bn(Ae,he=1024){const Ge=[];let pt=Ae.slice();for(const At of Ae){const ct=Ge.find(rn=>rn.agent===At.agent);if(ct){if(ct.dates.push(At.date),ki(Ge)>he){ct.dates.pop();break}}else if(Ge.push({agent:At.agent,dates:[At.date]}),ki(Ge)>he){Ge.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Ge,unsentEntries:pt}}(he._heartbeatsCache.heartbeats),ct=(0,oe.L)(JSON.stringify({version:2,heartbeats:pt}));return he._heartbeatsCache.lastSentHeartbeatDate=Ge,At.length>0?(he._heartbeatsCache.heartbeats=At,yield he._storage.overwrite(he._heartbeatsCache)):(he._heartbeatsCache.heartbeats=[],he._storage.overwrite(he._heartbeatsCache)),ct})()}}function jt(){return(new Date).toISOString().substring(0,10)}class pi{constructor(he){this.app=he,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var he=this;return(0,C.Z)(function*(){return(yield he._canUseIndexedDBPromise)&&(yield function H(Ae){return W.apply(this,arguments)}(he.app))||{heartbeats:[]}})()}overwrite(he){var Ge=this;return(0,C.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const ct=yield Ge.read();return ie(Ge.app,{lastSentHeartbeatDate:null!==(pt=he.lastSentHeartbeatDate)&&void 0!==pt?pt:ct.lastSentHeartbeatDate,heartbeats:he.heartbeats})}})()}add(he){var Ge=this;return(0,C.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const ct=yield Ge.read();return ie(Ge.app,{lastSentHeartbeatDate:null!==(pt=he.lastSentHeartbeatDate)&&void 0!==pt?pt:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...he.heartbeats]})}})()}}function ki(Ae){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Ae})).length}!function is(Ae){An(new m.wA("platform-logger",he=>new $t(he),"PRIVATE")),An(new m.wA("heartbeat",he=>new Pt(he),"PRIVATE")),Oi(ln,"0.9.22",Ae),Oi(ln,"0.9.22","esm2017"),Oi("fire-js","")}("")},4537:(yt,be,B)=>{B.d(be,{H0:()=>He,wA:()=>K,zt:()=>ae});var C=B(5861),m=B(9058);class K{constructor(X,ne,ue){this.name=X,this.instanceFactory=ne,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const oe="[DEFAULT]";class ae{constructor(X,ne){this.name=X,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const ne=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(ne)){const ue=new m.BH;if(this.instancesDeferred.set(ne,ue),this.isInitialized(ne)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:ne});Oe&&ue.resolve(Oe)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(X){var ne;const ue=this.normalizeInstanceIdentifier(X?.identifier),Oe=null!==(ne=X?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(je){if(Oe)return null;throw je}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function Ee(De){return"EAGER"===De.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[ne,ue]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(ne);try{const je=this.getOrInitializeService({instanceIdentifier:Oe});ue.resolve(je)}catch{}}}}clearInstance(X=oe){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,C.Z)(function*(){const ne=Array.from(X.instances.values());yield Promise.all([...ne.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...ne.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=oe){return this.instances.has(X)}getOptions(X=oe){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:ne={}}=X,ue=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:ue,options:ne});for(const[je,Je]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(je)&&Je.resolve(Oe);return Oe}onInit(X,ne){var ue;const Oe=this.normalizeInstanceIdentifier(ne),je=null!==(ue=this.onInitCallbacks.get(Oe))&&void 0!==ue?ue:new Set;je.add(X),this.onInitCallbacks.set(Oe,je);const Je=this.instances.get(Oe);return Je&&X(Je,Oe),()=>{je.delete(X)}}invokeOnInitCallbacks(X,ne){const ue=this.onInitCallbacks.get(ne);if(ue)for(const Oe of ue)try{Oe(X,ne)}catch{}}getOrInitializeService({instanceIdentifier:X,options:ne={}}){let ue=this.instances.get(X);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(De=X,De===oe?void 0:De),options:ne}),this.instances.set(X,ue),this.instancesOptions.set(X,ne),this.invokeOnInitCallbacks(ue,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,ue)}catch{}var De;return ue||null}normalizeInstanceIdentifier(X=oe){return this.component?this.component.multipleInstances?X:oe:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const ne=this.getProvider(X.name);if(ne.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);ne.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const ne=new ae(X,this);return this.providers.set(X,ne),ne}getProviders(){return Array.from(this.providers.values())}}},7879:(yt,be,B)=>{B.d(be,{Am:()=>De,Ub:()=>He,Yd:()=>Ee,in:()=>m});const C=[];var m=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(m||{});const K={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},oe=m.INFO,ae={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},se=(X,ne,...ue)=>{if(ne<X.logLevel)return;const Oe=(new Date).toISOString(),je=ae[ne];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[je](`[${Oe}]  ${X.name}:`,...ue)};class Ee{constructor(ne){this.name=ne,this._logLevel=oe,this._logHandler=se,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in m))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?K[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...ne),this._logHandler(this,m.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...ne),this._logHandler(this,m.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,m.INFO,...ne),this._logHandler(this,m.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,m.WARN,...ne),this._logHandler(this,m.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...ne),this._logHandler(this,m.ERROR,...ne)}}function He(X){C.forEach(ne=>{ne.setLogLevel(X)})}function De(X,ne){for(const ue of C){let Oe=null;ne&&ne.level&&(Oe=K[ne.level]),ue.userLogHandler=null===X?null:(je,Je,...Ue)=>{const rt=Ue.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch{return null}}).filter(lt=>lt).join(" ");Je>=(Oe??je.logLevel)&&X({level:m[Je].toLowerCase(),message:rt,args:Ue,type:je.name})}}}},8290:(yt,be,B)=>{B.r(be);var C=B(5861),m=B(3106),K=B(9058),oe=B(534),ae=B(7879),se=B(7582),Ee=B(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Je=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ue=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jt=new ae.Yd("@firebase/auth");function Ie(v,...h){Jt.logLevel<=ae.in.ERROR&&Jt.error(`Auth (${oe.SDK_VERSION}): ${v}`,...h)}function Le(v,...h){throw Xe(v,...h)}function pe(v,...h){return Xe(v,...h)}function We(v,h,f){const E=Object.assign(Object.assign({},Ue()),{[h]:f});return new K.LL("auth","Firebase",E).create(h,{appName:v.name})}function Ze(v,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Le(v,"argument-error"),We(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(v,...h){if("string"!=typeof v){const f=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(f,...E)}return rt.create(v,...h)}function we(v,h,...f){if(!v)throw Xe(h,...f)}function kt(v){const h="INTERNAL ASSERTION FAILED: "+v;throw Ie(h),new Error(h)}function $t(v,h){v||kt(h)}function Kn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ln(){return"http:"===ar()||"https:"===ar()}function ar(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Sr{constructor(h,f){this.shortDelay=h,this.longDelay=f,$t(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function On(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ln()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(v,h){$t(v.emulator,"Emulator should always be set here");const{url:f}=v.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class ve{static initialize(h,f,E){this.fetchImpl=h,f&&(this.headersImpl=f),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Re={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Te=new Sr(3e4,6e4);function Me(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Ve(v,h,f,E){return _t.apply(this,arguments)}function _t(){return(_t=(0,C.Z)(function*(v,h,f,E,M={}){return et(v,M,(0,C.Z)(function*(){let V={},ee={};E&&("GET"===h?ee=E:V={body:JSON.stringify(E)});const ce=(0,K.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),ke=yield v._getAdditionalHeaders();return ke["Content-Type"]="application/json",v.languageCode&&(ke["X-Firebase-Locale"]=v.languageCode),ve.fetch()(Vt(v,v.config.apiHost,f,ce),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function et(v,h,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,C.Z)(function*(v,h,f){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},Re),h);try{const M=new Qn(v),V=yield Promise.race([f(),M.promise]);M.clearNetworkTimeout();const ee=yield V.json();if("needConfirmation"in ee)throw xn(v,"account-exists-with-different-credential",ee);if(V.ok&&!("errorMessage"in ee))return ee;{const ce=V.ok?ee.errorMessage:ee.error.message,[ke,st]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw xn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===ke)throw xn(v,"email-already-in-use",ee);if("USER_DISABLED"===ke)throw xn(v,"user-disabled",ee);const Et=E[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw We(v,Et,st);Le(v,Et)}}catch(M){if(M instanceof K.ZR)throw M;Le(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Dt(v,h,f,E){return cn.apply(this,arguments)}function cn(){return(cn=(0,C.Z)(function*(v,h,f,E,M={}){const V=yield Ve(v,h,f,E,M);return"mfaPendingCredential"in V&&Le(v,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function Vt(v,h,f,E){const M=`${h}${f}?${E}`;return v.config.emulator?ge(v.config,M):`${v.config.apiScheme}://${M}`}function kn(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,E)=>{this.timer=setTimeout(()=>E(pe(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(v,h,f){const E={appName:v.name};f.email&&(E.email=f.email),f.phoneNumber&&(E.phoneNumber=f.phoneNumber);const M=pe(v,h,E);return M.customData._tokenResponse=f,M}function Dn(v){return void 0!==v&&void 0!==v.getResponse}function It(v){return void 0!==v&&void 0!==v.enterprise}class vr{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return kn(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Er(){return(Er=(0,C.Z)(function*(v){return(yield Ve(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ln(v,h){return ur.apply(this,arguments)}function ur(){return(ur=(0,C.Z)(function*(v,h){return Ve(v,"GET","/v2/recaptchaConfig",Me(v,h))})).apply(this,arguments)}function Rt(){return(Rt=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function bt(){return(bt=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $r(){return($r=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function pr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function uo(){return(uo=(0,C.Z)(function*(v,h=!1){const f=(0,K.m9)(v),E=yield f.getIdToken(h),M=ns(E);we(M&&M.exp&&M.auth_time&&M.iat,f.auth,"internal-error");const V="object"==typeof M.firebase?M.firebase:void 0,ee=V?.sign_in_provider;return{claims:M,token:E,authTime:pr(wt(M.auth_time)),issuedAtTime:pr(wt(M.iat)),expirationTime:pr(wt(M.exp)),signInProvider:ee||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(v){return 1e3*Number(v)}function ns(v){const[h,f,E]=v.split(".");if(void 0===h||void 0===f||void 0===E)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,K.tV)(f);return M?JSON.parse(M):(Ie("Failed to decode base64 JWT payload"),null)}catch(M){return Ie("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Ir(v,h){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,C.Z)(function*(v,h,f=!1){if(f)return h;try{return yield h}catch(E){throw E instanceof K.ZR&&function rs({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Rs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,C.Z)(function*(){yield f.iteration()}),E)}iteration(){var h=this;return(0,C.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class Ii{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=pr(this.lastLoginAt),this.creationTime=pr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wi(v){return fi.apply(this,arguments)}function fi(){return fi=(0,C.Z)(function*(v){var h;const f=v.auth,E=yield v.getIdToken(),M=yield Ir(v,function Fn(v,h){return $r.apply(this,arguments)}(f,{idToken:E}));we(M?.users.length,f,"internal-error");const V=M.users[0];v._notifyReloadListener(V);const ee=null!==(h=V.providerUserInfo)&&void 0!==h&&h.length?function zr(v){return v.map(h=>{var{providerId:f}=h,E=(0,se._T)(h,["providerId"]);return{providerId:f,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(V.providerUserInfo):[],ce=function Gr(v,h){return[...v.filter(E=>!h.some(M=>M.providerId===E.providerId)),...h]}(v.providerData,ee),Et=!!v.isAnonymous&&!(v.email&&V.passwordHash||ce?.length),ft={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:ce,metadata:new Ii(V.createdAt,V.lastLoginAt),isAnonymous:Et};Object.assign(v,ft)}),fi.apply(this,arguments)}function lo(){return(lo=(0,C.Z)(function*(v){const h=(0,K.m9)(v);yield wi(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function te(){return(te=(0,C.Z)(function*(v,h){const f=yield et(v,{},(0,C.Z)(function*(){const E=(0,K.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:M,apiKey:V}=v.config,ee=Vt(v,M,"/v1/token",`key=${V}`),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",ve.fetch()(ee,{method:"POST",headers:ce,body:E})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){we(h.idToken,"internal-error"),we(typeof h.idToken<"u","internal-error"),we(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Gt(v){const h=ns(v);return we(h,"internal-error"),we(typeof h.exp<"u","internal-error"),we(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var E=this;return(0,C.Z)(function*(){return we(!E.accessToken||E.refreshToken,h,"user-token-expired"),f||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var E=this;return(0,C.Z)(function*(){const{accessToken:M,refreshToken:V,expiresIn:ee}=yield function ii(v,h){return te.apply(this,arguments)}(h,f);E.updateTokensAndExpiration(M,V,Number(ee))})()}updateTokensAndExpiration(h,f,E){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,f){const{refreshToken:E,accessToken:M,expirationTime:V}=f,ee=new $;return E&&(we("string"==typeof E,"internal-error",{appName:h}),ee.refreshToken=E),M&&(we("string"==typeof M,"internal-error",{appName:h}),ee.accessToken=M),V&&(we("number"==typeof V,"internal-error",{appName:h}),ee.expirationTime=V),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return kt("not implemented")}}function z(v,h){we("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class H{constructor(h){var{uid:f,auth:E,stsTokenManager:M}=h,V=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new Ii(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,C.Z)(function*(){const E=yield Ir(f,f.stsTokenManager.getToken(f.auth,h));return we(E,f.auth,"internal-error"),f.accessToken!==E&&(f.accessToken=E,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),E})()}getIdTokenResult(h){return function nr(v){return uo.apply(this,arguments)}(this,h)}reload(){return function Oi(v){return lo.apply(this,arguments)}(this)}_assign(h){this!==h&&(we(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new H(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var E=this;return(0,C.Z)(function*(){let M=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),M=!0),f&&(yield wi(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,C.Z)(function*(){const f=yield h.getIdToken();return yield Ir(h,function $n(v,h){return Rt.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var E,M,V,ee,ce,ke,st,Et;const ft=null!==(E=f.displayName)&&void 0!==E?E:void 0,bn=null!==(M=f.email)&&void 0!==M?M:void 0,er=null!==(V=f.phoneNumber)&&void 0!==V?V:void 0,vu=null!==(ee=f.photoURL)&&void 0!==ee?ee:void 0,Eu=null!==(ce=f.tenantId)&&void 0!==ce?ce:void 0,xa=null!==(ke=f._redirectEventId)&&void 0!==ke?ke:void 0,vl=null!==(st=f.createdAt)&&void 0!==st?st:void 0,hg=null!==(Et=f.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Iu,emailVerified:nf,isAnonymous:fg,providerData:Io,stsTokenManager:pg}=f;we(Iu&&pg,h,"internal-error");const r_=$.fromJSON(this.name,pg);we("string"==typeof Iu,h,"internal-error"),z(ft,h.name),z(bn,h.name),we("boolean"==typeof nf,h,"internal-error"),we("boolean"==typeof fg,h,"internal-error"),z(er,h.name),z(vu,h.name),z(Eu,h.name),z(xa,h.name),z(vl,h.name),z(hg,h.name);const rf=new H({uid:Iu,auth:h,email:bn,emailVerified:nf,displayName:ft,isAnonymous:fg,photoURL:vu,phoneNumber:er,tenantId:Eu,stsTokenManager:r_,createdAt:vl,lastLoginAt:hg});return Io&&Array.isArray(Io)&&(rf.providerData=Io.map(fw=>Object.assign({},fw))),xa&&(rf._redirectEventId=xa),rf}static _fromIdTokenResponse(h,f,E=!1){return(0,C.Z)(function*(){const M=new $;M.updateFromServerResponse(f);const V=new H({uid:f.localId,auth:h,stsTokenManager:M,isAnonymous:E});return yield wi(V),V})()}}const W=new Map;function ie(v){$t(v instanceof Function,"Expected a class definition");let h=W.get(v);return h?($t(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,W.set(v,h),h)}const tt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(f,E){var M=this;return(0,C.Z)(function*(){M.storage[f]=E})()}_get(f){var E=this;return(0,C.Z)(function*(){const M=E.storage[f];return void 0===M?null:M})()}_remove(f){var E=this;return(0,C.Z)(function*(){delete E.storage[f]})()}_addListener(f,E){}_removeListener(f,E){}}return v.type="NONE",v})();function vt(v,h,f){return`firebase:${v}:${h}:${f}`}class xt{constructor(h,f,E){this.persistence=h,this.auth=f,this.userKey=E;const{config:M,name:V}=this.auth;this.fullUserKey=vt(this.userKey,M.apiKey,V),this.fullPersistenceKey=vt("persistence",M.apiKey,V),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,C.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?H._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,C.Z)(function*(){if(f.persistence===h)return;const E=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,E?f.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,E="authUser"){return(0,C.Z)(function*(){if(!f.length)return new xt(ie(tt),h,E);const M=(yield Promise.all(f.map(function(){var st=(0,C.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return st.apply(this,arguments)}}()))).filter(st=>st);let V=M[0]||ie(tt);const ee=vt(E,h.config.apiKey,h.name);let ce=null;for(const st of f)try{const Et=yield st._get(ee);if(Et){const ft=H._fromJSON(h,Et);st!==V&&(ce=ft),V=st;break}}catch{}const ke=M.filter(st=>st._shouldAllowMigration);return V._shouldAllowMigration&&ke.length?(V=ke[0],ce&&(yield V._set(ee,ce.toJSON())),yield Promise.all(f.map(function(){var st=(0,C.Z)(function*(Et){if(Et!==V)try{yield Et._remove(ee)}catch{}});return function(Et){return st.apply(this,arguments)}}())),new xt(V,h,E)):new xt(V,h,E)})()}}function Pt(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ki(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(jt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ae(h))return"Blackberry";if(he(h))return"Webos";if(Bn(h))return"Safari";if((h.includes("chrome/")||pi(h))&&!h.includes("edge/"))return"Chrome";if(is(h))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function jt(v=(0,K.z$)()){return/firefox\//i.test(v)}function Bn(v=(0,K.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function pi(v=(0,K.z$)()){return/crios\//i.test(v)}function ki(v=(0,K.z$)()){return/iemobile/i.test(v)}function is(v=(0,K.z$)()){return/android/i.test(v)}function Ae(v=(0,K.z$)()){return/blackberry/i.test(v)}function he(v=(0,K.z$)()){return/webos/i.test(v)}function Ge(v=(0,K.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function rn(v=(0,K.z$)()){return Ge(v)||is(v)||he(v)||Ae(v)||/windows phone/i.test(v)||ki(v)}function jn(v,h=[]){let f;switch(v){case"Browser":f=Pt((0,K.z$)());break;case"Worker":f=`${Pt((0,K.z$)())}-${v}`;break;default:f=v}const E=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${oe.SDK_VERSION}/${E}`}class Ti{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const E=V=>new Promise((ee,ce)=>{try{ee(h(V))}catch(ke){ce(ke)}});E.onAbort=f,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,C.Z)(function*(){if(f.auth.currentUser===h)return;const E=[];try{for(const M of f.queue)yield M(h),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const V of E)try{V()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function Gi(){return(Gi=(0,C.Z)(function*(v,h={}){return Ve(v,"GET","/v2/passwordPolicy",Me(v,h))})).apply(this,arguments)}class Jc{constructor(h){var f,E,M,V;const ee=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=ee.minPasswordLength)&&void 0!==f?f:6,ee.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ee.maxPasswordLength),void 0!==ee.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ee.containsLowercaseCharacter),void 0!==ee.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ee.containsUppercaseCharacter),void 0!==ee.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ee.containsNumericCharacter),void 0!==ee.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ee.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(E=h.allowedNonAlphanumericCharacters)||void 0===E?void 0:E.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(V=h.forceUpgradeOnSignin)&&void 0!==V&&V,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,E,M,V,ee,ce;const ke={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,ke),this.validatePasswordCharacterOptions(h,ke),ke.isValid&&(ke.isValid=null===(f=ke.meetsMinPasswordLength)||void 0===f||f),ke.isValid&&(ke.isValid=null===(E=ke.meetsMaxPasswordLength)||void 0===E||E),ke.isValid&&(ke.isValid=null===(M=ke.containsLowercaseLetter)||void 0===M||M),ke.isValid&&(ke.isValid=null===(V=ke.containsUppercaseLetter)||void 0===V||V),ke.isValid&&(ke.isValid=null===(ee=ke.containsNumericCharacter)||void 0===ee||ee),ke.isValid&&(ke.isValid=null===(ce=ke.containsNonAlphanumericCharacter)||void 0===ce||ce),ke}validatePasswordLengthOptions(h,f){const E=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;E&&(f.meetsMinPasswordLength=h.length>=E),M&&(f.meetsMaxPasswordLength=h.length<=M)}validatePasswordCharacterOptions(h,f){let E;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let M=0;M<h.length;M++)E=h.charAt(M),this.updatePasswordCharacterOptionsStatuses(f,E>="a"&&E<="z",E>="A"&&E<="Z",E>="0"&&E<="9",this.allowedNonAlphanumericCharacters.includes(E))}updatePasswordCharacterOptionsStatuses(h,f,E,M,V){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=E)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=V))}}class Ao{constructor(h,f,E,M){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zl(this),this.idTokenSubscription=new zl(this),this.beforeStateQueue=new Ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(h,f){var E=this;return f&&(this._popupRedirectResolver=ie(f)),this._initializationPromise=this.queue((0,C.Z)(function*(){var M,V;if(!E._deleted&&(E.persistenceManager=yield xt.create(E,h),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(f),E.lastNotifiedUid=(null===(V=E.currentUser)||void 0===V?void 0:V.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,C.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUser(h){var f=this;return(0,C.Z)(function*(){var E;const M=yield f.assertedPersistence.getCurrentUser();let V=M,ee=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ce=null===(E=f.redirectUser)||void 0===E?void 0:E._redirectEventId,ke=V?._redirectEventId,st=yield f.tryRedirectSignIn(h);(!ce||ce===ke)&&st?.user&&(V=st.user,ee=!0)}if(!V)return f.directlySetCurrentUser(null);if(!V._redirectEventId){if(ee)try{yield f.beforeStateQueue.runMiddleware(V)}catch(ce){V=M,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ce))}return V?f.reloadAndSetCurrentUserOrClear(V):f.directlySetCurrentUser(null)}return we(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===V._redirectEventId?f.directlySetCurrentUser(V):f.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(h){var f=this;return(0,C.Z)(function*(){let E=null;try{E=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,C.Z)(function*(){try{yield wi(h)}catch(E){if("auth/network-request-failed"!==E?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ss(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,C.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,C.Z)(function*(){const E=h?(0,K.m9)(h):null;return E&&we(E.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(E&&E._clone(f))})()}_updateCurrentUser(h,f=!1){var E=this;return(0,C.Z)(function*(){if(!E._deleted)return h&&we(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),f||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,C.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,C.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var f=this;return this.queue((0,C.Z)(function*(){yield f.assertedPersistence.setPersistence(ie(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,C.Z)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const E=f._getPasswordPolicyInternal();return E.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):E.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,C.Z)(function*(){const f=yield function si(v){return Gi.apply(this,arguments)}(h),E=new Jc(f);null===h.tenantId?h._projectPasswordPolicy=E:h._tenantPasswordPolicies[h.tenantId]=E})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new K.LL("auth","Firebase",h())}onAuthStateChanged(h,f,E){return this.registerStateListener(this.authStateSubscription,h,f,E)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,E){return this.registerStateListener(this.idTokenSubscription,h,f,E)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const E=this.onAuthStateChanged(()=>{E(),h()},f)}})}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var E=this;return(0,C.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(f);return null===h?M.removeCurrentUser():M.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,C.Z)(function*(){if(!f.redirectPersistenceManager){const E=h&&ie(h)||f._popupRedirectResolver;we(E,f,"argument-error"),f.redirectPersistenceManager=yield xt.create(f,[ie(E._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,C.Z)(function*(){var E,M;return f._isInitialized&&(yield f.queue((0,C.Z)(function*(){}))),(null===(E=f._currentUser)||void 0===E?void 0:E._redirectEventId)===h?f._currentUser:(null===(M=f.redirectUser)||void 0===M?void 0:M._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,C.Z)(function*(){if(h===f.currentUser)return f.queue((0,C.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,E,M){if(this._deleted)return()=>{};const V="function"==typeof f?f:f.next.bind(f);let ee=!1;const ce=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(ce,this,"internal-error"),ce.then(()=>{ee||V(this.currentUser)}),"function"==typeof f){const ke=h.addObserver(f,E,M);return()=>{ee=!0,ke()}}{const ke=h.addObserver(f);return()=>{ee=!0,ke()}}}directlySetCurrentUser(h){var f=this;return(0,C.Z)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=jn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,C.Z)(function*(){var f;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const M=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();M&&(E["X-Firebase-Client"]=M);const V=yield h._getAppCheckToken();return V&&(E["X-Firebase-AppCheck"]=V),E})()}_getAppCheckToken(){var h=this;return(0,C.Z)(function*(){var f;const E=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return E?.error&&function un(v,...h){Jt.logLevel<=ae.in.WARN&&Jt.warn(`Auth (${oe.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Rn(v){return(0,K.m9)(v)}class zl{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,K.ne)(f=>this.observer=f)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qs(v){return new Promise((h,f)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=h,E.onerror=M=>{const V=pe("internal-error");V.customData=M,f(V)},E.type="text/javascript",E.charset="UTF-8",function sa(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(E)})}function bo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class qa{constructor(h){this.type="recaptcha-enterprise",this.auth=Rn(h)}verify(h="verify",f=!1){var E=this;return(0,C.Z)(function*(){function V(){return V=(0,C.Z)(function*(ce){if(!f){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var ke=(0,C.Z)(function*(st,Et){Ln(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ft=>{if(void 0!==ft.recaptchaKey){const bn=new vr(ft);return null==ce.tenantId?ce._agentRecaptchaConfig=bn:ce._tenantRecaptchaConfigs[ce.tenantId]=bn,st(bn.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(ft=>{Et(ft)})});return function(st,Et){return ke.apply(this,arguments)}}())}),V.apply(this,arguments)}function ee(ce,ke,st){const Et=window.grecaptcha;It(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(ce,{action:h}).then(ft=>{ke(ft)}).catch(()=>{ke("NO_RECAPTCHA")})}):st(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,ke)=>{(function M(ce){return V.apply(this,arguments)})(E.auth).then(st=>{if(!f&&It(window.grecaptcha))ee(st,ce,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));qs("https://www.google.com/recaptcha/enterprise.js?render="+st).then(()=>{ee(st,ce,ke)}).catch(Et=>{ke(Et)})}}).catch(st=>{ke(st)})})})()}}function oi(v,h,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,C.Z)(function*(v,h,f,E=!1){const M=new qa(v);let V;try{V=yield M.verify(f)}catch{V=yield M.verify(f,!0)}const ee=Object.assign({},h);return Object.assign(ee,E?{captchaResp:V}:{captchaResponse:V}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}function Or(v,h,f,E){return Ro.apply(this,arguments)}function Ro(){return Ro=(0,C.Z)(function*(v,h,f,E){var M;if(null!==(M=v._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const V=yield oi(v,h,f,"getOobCode"===f);return E(v,V)}return E(v,h).catch(function(){var V=(0,C.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ce=yield oi(v,h,f,"getOobCode"===f);return E(v,ce)}return Promise.reject(ee)});return function(ee){return V.apply(this,arguments)}}())}),Ro.apply(this,arguments)}function Wi(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function ql(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Po{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return kt("not implemented")}_getIdTokenResponse(h){return kt("not implemented")}_linkToIdToken(h,f){return kt("not implemented")}_getReauthenticationResolver(h){return kt("not implemented")}}function Bu(v,h){return oa.apply(this,arguments)}function oa(){return(oa=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:resetPassword",Me(v,h))})).apply(this,arguments)}function ju(v,h){return ho.apply(this,arguments)}function ho(){return(ho=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function aa(){return(aa=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:update",Me(v,h))})).apply(this,arguments)}function on(v,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithPassword",Me(v,h))})).apply(this,arguments)}function Wr(v,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:sendOobCode",Me(v,h))})).apply(this,arguments)}function xo(){return(xo=(0,C.Z)(function*(v,h){return Wr(v,h)})).apply(this,arguments)}function Ya(v,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,C.Z)(function*(v,h){return Wr(v,h)})).apply(this,arguments)}function os(v,h){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,C.Z)(function*(v,h){return Wr(v,h)})).apply(this,arguments)}function it(){return(it=(0,C.Z)(function*(v,h){return Wr(v,h)})).apply(this,arguments)}function fn(){return(fn=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithEmailLink",Me(v,h))})).apply(this,arguments)}function Mo(){return(Mo=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithEmailLink",Me(v,h))})).apply(this,arguments)}class zn extends Po{constructor(h,f,E,M=null){super("password",E),this._email=h,this._password=f,this._tenantId=M}static _fromEmailAndPassword(h,f){return new zn(h,f,"password")}static _fromEmailAndCode(h,f,E=null){return new zn(h,f,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,C.Z)(function*(){switch(f.signInMethod){case"password":return Or(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",on);case"emailLink":return function Bt(v,h){return fn.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Le(h,"internal-error")}})()}_linkToIdToken(h,f){var E=this;return(0,C.Z)(function*(){switch(E.signInMethod){case"password":return ju(h,{idToken:f,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function qr(v,h){return Mo.apply(this,arguments)}(h,{idToken:f,email:E._email,oobCode:E._password});default:Le(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Zr(v,h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithIdp",Me(v,h))})).apply(this,arguments)}class Lr extends Po{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new Lr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Le("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:M}=f,V=(0,se._T)(f,["providerId","signInMethod"]);if(!E||!M)return null;const ee=new Lr(E,M);return ee.idToken=V.idToken||void 0,ee.accessToken=V.accessToken||void 0,ee.secret=V.secret,ee.nonce=V.nonce,ee.pendingToken=V.pendingToken||null,ee}_getIdTokenResponse(h){return Zr(h,this.buildRequest())}_linkToIdToken(h,f){const E=this.buildRequest();return E.idToken=f,Zr(h,E)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Zr(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,K.xO)(f)}return h}}function Zs(){return(Zs=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:sendVerificationCode",Me(v,h))})).apply(this,arguments)}function us(){return(us=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Me(v,h))})).apply(this,arguments)}function fo(){return(fo=(0,C.Z)(function*(v,h){const f=yield Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Me(v,h));if(f.temporaryProof)throw xn(v,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const ls={USER_NOT_FOUND:"user-not-found"};function Os(){return(Os=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Me(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ls)})).apply(this,arguments)}class ks extends Po{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ks({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ks({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function Qa(v,h){return us.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function cr(v,h){return fo.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Ns(v,h){return Os.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:E,verificationCode:M}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:E,code:M}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:E,phoneNumber:M,temporaryProof:V}=h;return E||f||M||V?new ks({verificationId:f,verificationCode:E,phoneNumber:M,temporaryProof:V}):null}}class Fr{constructor(h){var f,E,M,V,ee,ce;const ke=(0,K.zd)((0,K.pd)(h)),st=null!==(f=ke.apiKey)&&void 0!==f?f:null,Et=null!==(E=ke.oobCode)&&void 0!==E?E:null,ft=function cs(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ke.mode)&&void 0!==M?M:null);we(st&&Et&&ft,"argument-error"),this.apiKey=st,this.operation=ft,this.code=Et,this.continueUrl=null!==(V=ke.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(ee=ke.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(ce=ke.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const f=function ds(v){const h=(0,K.zd)((0,K.pd)(v)).link,f=h?(0,K.zd)((0,K.pd)(h)).deep_link_id:null,E=(0,K.zd)((0,K.pd)(v)).deep_link_id;return(E?(0,K.zd)((0,K.pd)(E)).link:null)||E||f||h||v}(h);try{return new Fr(f)}catch{return null}}}let Zt=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(f,E){return zn._fromEmailAndPassword(f,E)}static credentialWithLink(f,E){const M=Fr.parseLink(E);return we(M,"argument-error"),zn._fromEmailAndCode(f,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ks{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ys extends Ks{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ls extends Ys{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return we("providerId"in f&&"signInMethod"in f,"argument-error"),Lr._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return we(h.idToken||h.accessToken,"argument-error"),Lr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ls.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ls.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:V,nonce:ee,providerId:ce}=h;if(!E&&!M&&!f&&!V||!ce)return null;try{return new Ls(ce)._credential({idToken:f,accessToken:E,nonce:ee,pendingToken:V})}catch{return null}}}let hs=(()=>{class v extends Ys{constructor(){super("facebook.com")}static credential(f){return Lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return v.credentialFromTaggedObject(f)}static credentialFromError(f){return v.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return v.credential(f.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ua=(()=>{class v extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(f,E){return Lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:E})}static credentialFromResult(f){return v.credentialFromTaggedObject(f)}static credentialFromError(f){return v.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:E,oauthAccessToken:M}=f;if(!E&&!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Qs=(()=>{class v extends Ys{constructor(){super("github.com")}static credential(f){return Lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return v.credentialFromTaggedObject(f)}static credentialFromError(f){return v.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return v.credential(f.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class rr extends Po{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Zr(h,this.buildRequest())}_linkToIdToken(h,f){const E=this.buildRequest();return E.idToken=f,Zr(h,E)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Zr(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:M,pendingToken:V}=f;return E&&M&&V&&E===M?new rr(E,V):null}static _create(h,f){return new rr(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mr extends Ks{constructor(h){we(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return mr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return mr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=rr.fromJSON(h);return we(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:E}=h;if(!f||!E)return null;try{return rr._create(E,f)}catch{return null}}}let Un=(()=>{class v extends Ys{constructor(){super("twitter.com")}static credential(f,E){return Lr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:E})}static credentialFromResult(f){return v.credentialFromTaggedObject(f)}static credentialFromError(f){return v.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=f;if(!E||!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function la(v,h){return Li.apply(this,arguments)}function Li(){return(Li=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signUp",Me(v,h))})).apply(this,arguments)}class gi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,E,M=!1){return(0,C.Z)(function*(){const V=yield H._fromIdTokenResponse(h,E,M),ee=qi(E);return new gi({user:V,providerId:ee,_tokenResponse:E,operationType:f})})()}static _forOperation(h,f,E){return(0,C.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const M=qi(E);return new gi({user:h,providerId:M,_tokenResponse:E,operationType:f})})()}}function qi(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function $u(){return($u=(0,C.Z)(function*(v){var h;const f=Rn(v);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new gi({user:f.currentUser,providerId:null,operationType:"signIn"});const E=yield la(f,{returnSecureToken:!0}),M=yield gi._fromIdTokenResponse(f,"signIn",E,!0);return yield f._updateCurrentUser(M.user),M})).apply(this,arguments)}class No extends K.ZR{constructor(h,f,E,M){var V;super(f.code,f.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,No.prototype),this.customData={appName:h.name,tenantId:null!==(V=h.tenantId)&&void 0!==V?V:void 0,_serverResponse:f.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,f,E,M){return new No(h,f,E,M)}}function yh(v,h,f,E){return("reauthenticate"===h?f._getReauthenticationResolver(v):f._getIdTokenResponse(v)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?No._fromErrorAndOperation(v,V,h,E):V})}function Xc(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function da(){return da=(0,C.Z)(function*(v,h){const f=(0,K.m9)(v);yield Mn(!0,f,h);const{providerUserInfo:E}=yield function Xt(v,h){return bt.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),M=Xc(E||[]);return f.providerData=f.providerData.filter(V=>M.has(V.providerId)),M.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),da.apply(this,arguments)}function vh(v,h){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,C.Z)(function*(v,h,f=!1){const E=yield Ir(v,h._linkToIdToken(v.auth,yield v.getIdToken()),f);return gi._forOperation(v,"link",E)})).apply(this,arguments)}function Mn(v,h,f){return eu.apply(this,arguments)}function eu(){return(eu=(0,C.Z)(function*(v,h,f){yield wi(h);const M=!1===v?"provider-already-linked":"no-such-provider";we(Xc(h.providerData).has(f)===v,h.auth,M)})).apply(this,arguments)}function Ih(v,h){return wh.apply(this,arguments)}function wh(){return(wh=(0,C.Z)(function*(v,h,f=!1){const{auth:E}=v,M="reauthenticate";try{const V=yield Ir(v,yh(E,M,h,v),f);we(V.idToken,E,"internal-error");const ee=ns(V.idToken);we(ee,E,"internal-error");const{sub:ce}=ee;return we(v.uid===ce,E,"user-mismatch"),gi._forOperation(v,M,V)}catch(V){throw"auth/user-not-found"===V?.code&&Le(E,"user-mismatch"),V}})).apply(this,arguments)}function Zi(v,h){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,C.Z)(function*(v,h,f=!1){const E="signIn",M=yield yh(v,E,h),V=yield gi._fromIdTokenResponse(v,E,M);return f||(yield v._updateCurrentUser(V.user)),V})).apply(this,arguments)}function zu(v,h){return ed.apply(this,arguments)}function ed(){return(ed=(0,C.Z)(function*(v,h){return Zi(Rn(v),h)})).apply(this,arguments)}function Th(v,h){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,C.Z)(function*(v,h){const f=(0,K.m9)(v);return yield Mn(!1,f,h.providerId),vh(f,h)})).apply(this,arguments)}function qu(v,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,C.Z)(function*(v,h){return Ih((0,K.m9)(v),h)})).apply(this,arguments)}function Kl(){return(Kl=(0,C.Z)(function*(v,h){return Dt(v,"POST","/v1/accounts:signInWithCustomToken",Me(v,h))})).apply(this,arguments)}function Fi(){return Fi=(0,C.Z)(function*(v,h){const f=Rn(v),E=yield function Oo(v,h){return Kl.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),M=yield gi._fromIdTokenResponse(f,"signIn",E);return yield f._updateCurrentUser(M.user),M}),Fi.apply(this,arguments)}class Ki{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?td._fromServerResponse(h,f):"totpInfo"in f?wr._fromServerResponse(h,f):Le(h,"internal-error")}}class td extends Ki{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new td(f)}}class wr extends Ki{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new wr(f)}}function fs(v,h,f){var E;we((null===(E=f.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),we(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(we(f.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(we(f.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Tr(v){return nu.apply(this,arguments)}function nu(){return(nu=(0,C.Z)(function*(v){const h=Rn(v);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ru(){return(ru=(0,C.Z)(function*(v,h,f){const E=Rn(v),M={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&fs(E,M,f),yield Or(E,M,"getOobCode",Ya)})).apply(this,arguments)}function ha(){return ha=(0,C.Z)(function*(v,h,f){yield Bu((0,K.m9)(v),{oobCode:h,newPassword:f}).catch(function(){var E=(0,C.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Tr(v),M});return function(M){return E.apply(this,arguments)}}())}),ha.apply(this,arguments)}function fa(){return fa=(0,C.Z)(function*(v,h){yield function Hu(v,h){return aa.apply(this,arguments)}((0,K.m9)(v),{oobCode:h})}),fa.apply(this,arguments)}function Zu(v,h){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,C.Z)(function*(v,h){const f=(0,K.m9)(v),E=yield Bu(f,{oobCode:h}),M=E.requestType;switch(we(M,f,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":we(E.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":we(E.mfaInfo,f,"internal-error");default:we(E.email,f,"internal-error")}let V=null;return E.mfaInfo&&(V=Ki._fromServerResponse(Rn(f),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:V},operation:M}})).apply(this,arguments)}function iu(){return(iu=(0,C.Z)(function*(v,h){const{data:f}=yield Zu((0,K.m9)(v),h);return f.email})).apply(this,arguments)}function Fs(){return(Fs=(0,C.Z)(function*(v,h,f){const E=Rn(v),ee=yield Or(E,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",la).catch(ke=>{throw"auth/password-does-not-meet-requirements"===ke.code&&Tr(v),ke}),ce=yield gi._fromIdTokenResponse(E,"signIn",ee);return yield E._updateCurrentUser(ce.user),ce})).apply(this,arguments)}function Ql(){return(Ql=(0,C.Z)(function*(v,h,f){const E=Rn(v),M={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function V(ee,ce){we(ce.handleCodeInApp,E,"argument-error"),ce&&fs(E,ee,ce)})(M,f),yield Or(E,M,"getOobCode",os)})).apply(this,arguments)}function pa(){return(pa=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v),M=Zt.credentialWithLink(h,f||Kn());return we(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),zu(E,M)})).apply(this,arguments)}function su(){return(su=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:createAuthUri",Me(v,h))})).apply(this,arguments)}function Yu(){return Yu=(0,C.Z)(function*(v,h){const E={identifier:h,continueUri:ln()?Kn():"http://localhost"},{signinMethods:M}=yield function ga(v,h){return su.apply(this,arguments)}((0,K.m9)(v),E);return M||[]}),Yu.apply(this,arguments)}function ou(){return ou=(0,C.Z)(function*(v,h){const f=(0,K.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&fs(f.auth,M,h);const{email:V}=yield function kr(v,h){return xo.apply(this,arguments)}(f.auth,M);V!==v.email&&(yield v.reload())}),ou.apply(this,arguments)}function au(){return au=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};f&&fs(E.auth,V,f);const{email:ee}=yield function Gn(v,h){return it.apply(this,arguments)}(E.auth,V);ee!==v.email&&(yield v.reload())}),au.apply(this,arguments)}function A(){return(A=(0,C.Z)(function*(v,h){return Ve(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function x(){return x=(0,C.Z)(function*(v,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const E=(0,K.m9)(v),V={idToken:yield E.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},ee=yield Ir(E,function Vo(v,h){return A.apply(this,arguments)}(E.auth,V));E.displayName=ee.displayName||null,E.photoURL=ee.photoUrl||null;const ce=E.providerData.find(({providerId:ke})=>"password"===ke);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ee)}),x.apply(this,arguments)}function _e(v,h,f){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,C.Z)(function*(v,h,f){const{auth:E}=v,V={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(V.email=h),f&&(V.password=f);const ee=yield Ir(v,ju(E,V));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class Mt{constructor(h,f,E={}){this.isNewUser=h,this.providerId=f,this.profile=E}}class gn extends Mt{constructor(h,f,E,M){super(h,f,E),this.username=M}}class mn extends Mt{constructor(h,f){super(h,"facebook.com",f)}}class en extends gn{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class pn extends Mt{constructor(h,f){super(h,"google.com",f)}}class Nn extends gn{constructor(h,f,E){super(h,"twitter.com",f,E)}}function dr(v){const{user:h,_tokenResponse:f}=v;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Tt(v){var h,f;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},V=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ee=null===(f=null===(h=ns(v.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(ee)return new Mt(V,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!E)return null;switch(E){case"facebook.com":return new mn(V,M);case"github.com":return new en(V,M);case"google.com":return new pn(V,M);case"twitter.com":return new Nn(V,M,v.screenName||null);case"custom":case"anonymous":return new Mt(V,null);default:return new Mt(V,E,M)}}(f)}class va{constructor(h,f,E){this.type=h,this.credential=f,this.user=E}static _fromIdtoken(h,f){return new va("enroll",h,f)}static _fromMfaPendingCredential(h){return new va("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,E;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return va._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(E=h.multiFactorSession)&&void 0!==E&&E.idToken)return va._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ju{constructor(h,f,E){this.session=h,this.hints=f,this.signInResolver=E}static _fromError(h,f){const E=Rn(h),M=f.customData._serverResponse,V=(M.mfaInfo||[]).map(ce=>Ki._fromServerResponse(E,ce));we(M.mfaPendingCredential,E,"internal-error");const ee=va._fromMfaPendingCredential(M.mfaPendingCredential);return new Ju(ee,V,function(){var ce=(0,C.Z)(function*(ke){const st=yield ke._process(E,ee);delete M.mfaInfo,delete M.mfaPendingCredential;const Et=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(f.operationType){case"signIn":const ft=yield gi._fromIdTokenResponse(E,f.operationType,Et);return yield E._updateCurrentUser(ft.user),ft;case"reauthenticate":return we(f.user,E,"internal-error"),gi._forOperation(f.user,f.operationType,Et);default:Le(E,"internal-error")}});return function(ke){return ce.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,C.Z)(function*(){return f.signInResolver(h)})()}}class Xu{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(E=>Ki._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new Xu(h)}getSession(){var h=this;return(0,C.Z)(function*(){return va._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var E=this;return(0,C.Z)(function*(){const M=h,V=yield E.getSession(),ee=yield Ir(E.user,M._process(E.user.auth,V,f));return yield E.user._updateTokensIfNecessary(ee),E.user.reload()})()}unenroll(h){var f=this;return(0,C.Z)(function*(){const E="string"==typeof h?h:h.uid,M=yield f.user.getIdToken();try{const V=yield Ir(f.user,function Xs(v,h){return Ve(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Me(v,h))}(f.user.auth,{idToken:M,mfaEnrollmentId:E}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ee})=>ee!==E),yield f.user._updateTokensIfNecessary(V),yield f.user.reload()}catch(V){throw V}})()}}const Jl=new WeakMap,el="__sak";class tl{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(el,"1"),this.storage.removeItem(el),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ui=(()=>{class v extends tl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,E)=>this.onStorageEvent(f,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function id(){const v=(0,K.z$)();return Bn(v)||Ge(v)}()&&function gr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=rn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),V=this.localCache[E];M!==V&&f(E,V,M)}}onStorageEvent(f,E=!1){if(!f.key)return void this.forAllChangedKeys((ce,ke,st)=>{this.notifyListeners(ce,st)});const M=f.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(f.newValue!==ce)null!==f.newValue?this.storage.setItem(M,f.newValue):this.storage.removeItem(M);else if(this.localCache[M]===f.newValue&&!E)return}const V=()=>{const ce=this.storage.getItem(M);!E&&this.localCache[M]===ce||this.notifyListeners(M,ce)},ee=this.storage.getItem(M);!function ct(){return(0,K.w1)()&&10===document.documentMode}()||ee===f.newValue||f.newValue===f.oldValue?V():setTimeout(V,10)}notifyListeners(f,E){this.localCache[f]=E;const M=this.listeners[f];if(M)for(const V of Array.from(M))V(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,E){var M=()=>super._set,V=this;return(0,C.Z)(function*(){yield M().call(V,f,E),V.localCache[f]=JSON.stringify(E)})()}_get(f){var E=()=>super._get,M=this;return(0,C.Z)(function*(){const V=yield E().call(M,f);return M.localCache[f]=JSON.stringify(V),V})()}_remove(f){var E=()=>super._remove,M=this;return(0,C.Z)(function*(){yield E().call(M,f),delete M.localCache[f]})()}}return v.type="LOCAL",v})(),go=(()=>{class v extends tl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,E){}_removeListener(f,E){}}return v.type="SESSION",v})();let mo=(()=>{class v{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const E=this.receivers.find(V=>V.isListeningto(f));if(E)return E;const M=new v(f);return this.receivers.push(M),M}isListeningto(f){return this.eventTarget===f}handleEvent(f){var E=this;return(0,C.Z)(function*(){const M=f,{eventId:V,eventType:ee,data:ce}=M.data,ke=E.handlersMap[ee];if(!ke?.size)return;M.ports[0].postMessage({status:"ack",eventId:V,eventType:ee});const st=Array.from(ke).map(function(){var ft=(0,C.Z)(function*(bn){return bn(M.origin,ce)});return function(bn){return ft.apply(this,arguments)}}()),Et=yield function od(v){return Promise.all(v.map(function(){var h=(0,C.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(E){return{fulfilled:!1,reason:E}}});return function(f){return h.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:V,eventType:ee,response:Et})})()}_subscribe(f,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(E)}_unsubscribe(f,E){this.handlersMap[f]&&E&&this.handlersMap[f].delete(E),(!E||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function lu(v="",h=10){let f="";for(let E=0;E<h;E++)f+=Math.floor(10*Math.random());return v+f}class Xl{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,E=50){var M=this;return(0,C.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let ee,ce;return new Promise((ke,st)=>{const Et=lu("",20);V.port1.start();const ft=setTimeout(()=>{st(new Error("unsupported_event"))},E);ce={messageChannel:V,onMessage(bn){const er=bn;if(er.data.eventId===Et)switch(er.data.status){case"ack":clearTimeout(ft),ee=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),ke(er.data.response);break;default:clearTimeout(ft),clearTimeout(ee),st(new Error("invalid_response"))}}},M.handlers.add(ce),V.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:h,eventId:Et,data:f},[V.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function Xn(){return window}function Ia(){return typeof Xn().WorkerGlobalScope<"u"&&"function"==typeof Xn().importScripts}function Ht(){return(Ht=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ai="firebaseLocalStorageDb",nt="firebaseLocalStorage",gs="fbase_key";class Lt{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function _o(v,h){return v.transaction([nt],h?"readwrite":"readonly").objectStore(nt)}function Ah(){const v=indexedDB.open(ai,1);return new Promise((h,f)=>{v.addEventListener("error",()=>{f(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(nt,{keyPath:gs})}catch(M){f(M)}}),v.addEventListener("success",(0,C.Z)(function*(){const E=v.result;E.objectStoreNames.contains(nt)?h(E):(E.close(),yield function nl(){const v=indexedDB.deleteDatabase(ai);return new Lt(v).toPromise()}(),h(yield Ah()))}))})}function rl(v,h,f){return ui.apply(this,arguments)}function ui(){return(ui=(0,C.Z)(function*(v,h,f){const E=_o(v,!0).put({[gs]:h,value:f});return new Lt(E).toPromise()})).apply(this,arguments)}function ec(){return(ec=(0,C.Z)(function*(v,h){const f=_o(v,!1).get(h),E=yield new Lt(f).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function _r(v,h){const f=_o(v,!0).delete(h);return new Lt(f).toPromise()}const il=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,C.Z)(function*(){return f.db||(f.db=yield Ah()),f.db})()}_withRetries(f){var E=this;return(0,C.Z)(function*(){let M=0;for(;;)try{const V=yield E._openDb();return yield f(V)}catch(V){if(M++>3)throw V;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,C.Z)(function*(){return Ia()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,C.Z)(function*(){f.receiver=mo._getInstance(function q(){return Ia()?self:null}()),f.receiver._subscribe("keyChanged",function(){var E=(0,C.Z)(function*(M,V){return{keyProcessed:(yield f._poll()).includes(V.key)}});return function(M,V){return E.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var E=(0,C.Z)(function*(M,V){return["keyChanged"]});return function(M,V){return E.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,C.Z)(function*(){var E,M;if(f.activeServiceWorker=yield function ze(){return Ht.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Xl(f.activeServiceWorker);const V=yield f.sender._send("ping",{},800);V&&null!==(E=V[0])&&void 0!==E&&E.fulfilled&&null!==(M=V[0])&&void 0!==M&&M.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var E=this;return(0,C.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Bi(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:f},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const f=yield Ah();return yield rl(f,el,"1"),yield _r(f,el),!0}catch{}return!1})()}_withPendingWrite(f){var E=this;return(0,C.Z)(function*(){E.pendingWrites++;try{yield f()}finally{E.pendingWrites--}})()}_set(f,E){var M=this;return(0,C.Z)(function*(){return M._withPendingWrite((0,C.Z)(function*(){return yield M._withRetries(V=>rl(V,f,E)),M.localCache[f]=E,M.notifyServiceWorker(f)}))})()}_get(f){var E=this;return(0,C.Z)(function*(){const M=yield E._withRetries(V=>function yo(v,h){return ec.apply(this,arguments)}(V,f));return E.localCache[f]=M,M})()}_remove(f){var E=this;return(0,C.Z)(function*(){return E._withPendingWrite((0,C.Z)(function*(){return yield E._withRetries(M=>_r(M,f)),delete E.localCache[f],E.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,C.Z)(function*(){const E=yield f._withRetries(ee=>{const ce=_o(ee,!1).getAll();return new Lt(ce).toPromise()});if(!E)return[];if(0!==f.pendingWrites)return[];const M=[],V=new Set;for(const{fbase_key:ee,value:ce}of E)V.add(ee),JSON.stringify(f.localCache[ee])!==JSON.stringify(ce)&&(f.notifyListeners(ee,ce),M.push(ee));for(const ee of Object.keys(f.localCache))f.localCache[ee]&&!V.has(ee)&&(f.notifyListeners(ee,null),M.push(ee));return M})()}notifyListeners(f,E){this.localCache[f]=E;const M=this.listeners[f];if(M)for(const V of Array.from(M))V(E)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(E)}_removeListener(f,E){this.listeners[f]&&(this.listeners[f].delete(E),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),b=1e12;class I{constructor(h){this.auth=h,this.counter=b,this._widgets=new Map}render(h,f){const E=this.counter;return this._widgets.set(E,new R(h,this.auth.name,f||{})),this.counter++,E}reset(h){var f;const E=h||b;null===(f=this._widgets.get(E))||void 0===f||f.delete(),this._widgets.delete(E)}getResponse(h){var f;return(null===(f=this._widgets.get(h||b))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,C.Z)(function*(){var E;return null===(E=f._widgets.get(h||b))||void 0===E||E.execute(),""})()}}class R{constructor(h,f,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof h?document.getElementById(h):h;we(M,"argument-error",{appName:f}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function N(v){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const j=bo("rcb"),Y=new Sr(3e4,6e4);class me{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Xn().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return we(function ot(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Dn(Xn().grecaptcha)?Promise.resolve(Xn().grecaptcha):new Promise((E,M)=>{const V=Xn().setTimeout(()=>{M(pe(h,"network-request-failed"))},Y.get());Xn()[j]=()=>{Xn().clearTimeout(V),delete Xn()[j];const ce=Xn().grecaptcha;if(!ce||!Dn(ce))return void M(pe(h,"internal-error"));const ke=ce.render;ce.render=(st,Et)=>{const ft=ke(st,Et);return this.counter++,ft},this.hostLanguage=f,E(ce)},qs(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:j,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(V),M(pe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Xn().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wt{load(h){return(0,C.Z)(function*(){return new I(h)})()}clearedOneInstance(){}}const tn="recaptcha",sn={theme:"light",type:"image"};class vn{constructor(h,f,E=Object.assign({},sn)){this.parameters=E,this.type=tn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(h),this.isInvisible="invisible"===this.parameters.size,we(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof f?document.getElementById(f):f;we(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wt:new me,this.validateStartingState()}verify(){var h=this;return(0,C.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(f)||new Promise(V=>{const ee=ce=>{ce&&(h.tokenChangeListeners.delete(ee),V(ce))};h.tokenChangeListeners.add(ee),h.isInvisible&&E.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){we(!this.parameters.sitekey,this.auth,"argument-error"),we(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),we(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(E=>E(f)),"function"==typeof h)h(f);else if("string"==typeof h){const E=Xn()[h];"function"==typeof E&&E(f)}}}assertNotDestroyed(){we(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,C.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const E=document.createElement("div");f.appendChild(E),f=E}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,C.Z)(function*(){we(ln()&&!Ia(),h.auth,"internal-error"),yield function Uo(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function ts(v){return Er.apply(this,arguments)}(h.auth);we(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return we(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vo{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ks._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function eo(){return(eo=(0,C.Z)(function*(v,h,f){const E=Rn(v),M=yield hu(E,h,(0,K.m9)(f));return new vo(M,V=>zu(E,V))})).apply(this,arguments)}function bh(){return(bh=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v);yield Mn(!1,E,"phone");const M=yield hu(E.auth,h,(0,K.m9)(f));return new vo(M,V=>Th(E,V))})).apply(this,arguments)}function Bo(){return(Bo=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v),M=yield hu(E.auth,h,(0,K.m9)(f));return new vo(M,V=>qu(E,V))})).apply(this,arguments)}function hu(v,h,f){return nc.apply(this,arguments)}function nc(){return nc=(0,C.Z)(function*(v,h,f){var E;const M=yield f.verify();try{let V;if(we("string"==typeof M,v,"argument-error"),we(f.type===tn,v,"argument-error"),V="string"==typeof h?{phoneNumber:h}:h,"session"in V){const ee=V.session;if("phoneNumber"in V)return we("enroll"===ee.type,v,"internal-error"),(yield function yn(v,h){return Ve(v,"POST","/v2/accounts/mfaEnrollment:start",Me(v,h))}(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{we("signin"===ee.type,v,"internal-error");const ce=(null===(E=V.multiFactorHint)||void 0===E?void 0:E.uid)||V.multiFactorUid;return we(ce,v,"missing-multi-factor-info"),(yield function Np(v,h){return Ve(v,"POST","/v2/accounts/mfaSignIn:start",Me(v,h))}(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Ut(v,h){return Zs.apply(this,arguments)}(v,{phoneNumber:V.phoneNumber,recaptchaToken:M});return ee}}finally{f._reset()}}),nc.apply(this,arguments)}function Ta(){return(Ta=(0,C.Z)(function*(v,h){yield vh((0,K.m9)(v),h)})).apply(this,arguments)}let Ca=(()=>{class v{constructor(f){this.providerId=v.PROVIDER_ID,this.auth=Rn(f)}verifyPhoneNumber(f,E){return hu(this.auth,f,(0,K.m9)(E))}static credential(f,E){return ks._fromVerification(f,E)}static credentialFromResult(f){return v.credentialFromTaggedObject(f)}static credentialFromError(f){return v.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:E,temporaryProof:M}=f;return E&&M?ks._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function fu(v,h){return h?ie(h):(we(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class cd extends Po{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Zr(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Zr(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Zr(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function jm(v){return Zi(v.auth,new cd(v),v.bypassAuthState)}function sl(v){const{auth:h,user:f}=v;return we(f,h,"internal-error"),Ih(f,new cd(v),v.bypassAuthState)}function pu(v){return dd.apply(this,arguments)}function dd(){return(dd=(0,C.Z)(function*(v){const{auth:h,user:f}=v;return we(f,h,"internal-error"),vh(f,new cd(v),v.bypassAuthState)})).apply(this,arguments)}class Op{constructor(h,f,E,M,V=!1){this.auth=h,this.resolver=E,this.user=M,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,C.Z)(function*(E,M){h.pendingPromise={resolve:E,reject:M};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(V){h.reject(V)}});return function(E,M){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,C.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:V,tenantId:ee,error:ce,type:ke}=h;if(ce)return void f.reject(ce);const st={auth:f.auth,requestUri:E,sessionId:M,tenantId:ee||void 0,postBody:V||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ke)(st))}catch(Et){f.reject(Et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return jm;case"linkViaPopup":case"linkViaRedirect":return pu;case"reauthViaPopup":case"reauthViaRedirect":return sl;default:Le(this.auth,"internal-error")}}resolve(h){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hd=new Sr(2e3,1e4);function Rh(){return(Rh=(0,C.Z)(function*(v,h,f){const E=Rn(v);Ze(v,h,Ks);const M=fu(E,f);return new Da(E,"signInViaPopup",h,M).executeNotNull()})).apply(this,arguments)}function Gm(){return(Gm=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v);Ze(E.auth,h,Ks);const M=fu(E.auth,f);return new Da(E.auth,"reauthViaPopup",h,M,E).executeNotNull()})).apply(this,arguments)}function rc(){return(rc=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v);Ze(E.auth,h,Ks);const M=fu(E.auth,f);return new Da(E.auth,"linkViaPopup",h,M,E).executeNotNull()})).apply(this,arguments)}let Da=(()=>{class v extends Op{constructor(f,E,M,V,ee){super(f,E,V,ee),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var f=this;return(0,C.Z)(function*(){const E=yield f.execute();return we(E,f.auth,"internal-error"),E})()}onExecution(){var f=this;return(0,C.Z)(function*(){$t(1===f.filter.length,"Popup operations only handle one event");const E=lu();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],E),f.authWindow.associatedEvent=E,f.resolver._originValidation(f.auth).catch(M=>{f.reject(M)}),f.resolver._isIframeWebStorageSupported(f.auth,M=>{M||f.reject(pe(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const f=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,hd.get())};f()}}return v.currentPopupAction=null,v})();const zm="pendingRedirect",Aa=new Map;class fd extends Op{constructor(h,f,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,C.Z)(function*(){let E=Aa.get(f.auth._key());if(!E){try{const V=(yield function ic(v,h){return Ph.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;E=()=>Promise.resolve(V)}catch(M){E=()=>Promise.reject(M)}Aa.set(f.auth._key(),E)}return f.bypassAuthState||Aa.set(f.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,E=this;return(0,C.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(E,h);if("unknown"!==h.type){if(h.eventId){const M=yield E.auth._redirectUserForId(h.eventId);if(M)return E.user=M,f().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function Ph(){return(Ph=(0,C.Z)(function*(v,h){const f=pd(h),E=Wm(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(f));return yield E._remove(f),M})).apply(this,arguments)}function Vr(v,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,C.Z)(function*(v,h){return Wm(v)._set(pd(h),"true")})).apply(this,arguments)}function ms(v,h){Aa.set(v._key(),h)}function Wm(v){return ie(v._redirectPersistence)}function pd(v){return vt(zm,v.config.apiKey,v.name)}function kp(v,h,f){return function Lp(v,h,f){return sc.apply(this,arguments)}(v,h,f)}function sc(){return(sc=(0,C.Z)(function*(v,h,f){const E=Rn(v);Ze(v,h,Ks),yield E._initializationPromise;const M=fu(E,f);return yield Vr(M,E),M._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Fp(v,h,f){return function Rv(v,h,f){return gu.apply(this,arguments)}(v,h,f)}function gu(){return(gu=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v);Ze(E.auth,h,Ks),yield E.auth._initializationPromise;const M=fu(E.auth,f);yield Vr(M,E.auth);const V=yield Nh(E);return M._openRedirect(E.auth,h,"reauthViaRedirect",V)})).apply(this,arguments)}function oc(v,h,f){return function Mh(v,h,f){return gd.apply(this,arguments)}(v,h,f)}function gd(){return(gd=(0,C.Z)(function*(v,h,f){const E=(0,K.m9)(v);Ze(E.auth,h,Ks),yield E.auth._initializationPromise;const M=fu(E.auth,f);yield Mn(!1,E,h.providerId),yield Vr(M,E.auth);const V=yield Nh(E);return M._openRedirect(E.auth,h,"linkViaRedirect",V)})).apply(this,arguments)}function ba(){return(ba=(0,C.Z)(function*(v,h){return yield Rn(v)._initializationPromise,to(v,h,!1)})).apply(this,arguments)}function to(v,h){return md.apply(this,arguments)}function md(){return(md=(0,C.Z)(function*(v,h,f=!1){const E=Rn(v),M=fu(E,h),ee=yield new fd(E,M,f).execute();return ee&&!f&&(delete ee.user._redirectEventId,yield E._persistUserIfCurrent(ee.user),yield E._setRedirectUser(null,h)),ee})).apply(this,arguments)}function Nh(v){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,C.Z)(function*(v){const h=lu(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class Vp{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(f=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function _d(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Up(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var E;if(h.error&&!Up(h)){const M=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";f.onError(pe(this.auth,M))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const E=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Di(h))}saveEventToCache(h){this.cachedEventUids.add(Di(h)),this.lastProcessedEventTime=Date.now()}}function Di(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Up({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function kh(v){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,C.Z)(function*(v,h={}){return Ve(v,"GET","/v1/projects",h)})).apply(this,arguments)}const ol=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jp=/^https?/;function _s(){return(_s=(0,C.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield kh(v);for(const f of h)try{if(al(f))return}catch{}Le(v,"unauthorized-domain")})).apply(this,arguments)}function al(v){const h=Kn(),{protocol:f,hostname:E}=new URL(h);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===E?"chrome-extension:"===f&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&ee.hostname===E}if(!jp.test(f))return!1;if(ol.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const yd=new Sr(3e4,6e4);function vd(){const v=Xn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let f=0;f<v.CP.length;f++)v.CP[f]=null}let Lh=null;const xv=new Sr(5e3,15e3),Fh="__/auth/iframe",Hp="emulator/auth/iframe",Mv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nv(v){const h=v.config;we(h.authDomain,v,"auth-domain-config-required");const f=h.emulator?ge(h,Hp):`https://${v.config.authDomain}/${Fh}`,E={apiKey:h.apiKey,appName:v.name,v:oe.SDK_VERSION},M=qm.get(v.config.apiHost);M&&(E.eid=M);const V=v._getFrameworks();return V.length&&(E.fw=V.join(",")),`${f}?${(0,K.xO)(E).slice(1)}`}function ll(){return ll=(0,C.Z)(function*(v){const h=yield function Qi(v){return Lh=Lh||function jo(v){return new Promise((h,f)=>{var E,M,V;function ee(){vd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{vd(),f(pe(v,"network-request-failed"))},timeout:yd.get()})}if(null!==(M=null===(E=Xn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)h(gapi.iframes.getContext());else{if(null===(V=Xn().gapi)||void 0===V||!V.load){const ce=bo("iframefcb");return Xn()[ce]=()=>{gapi.load?ee():f(pe(v,"network-request-failed"))},qs(`https://apis.google.com/js/api.js?onload=${ce}`).catch(ke=>f(ke))}ee()}}).catch(h=>{throw Lh=null,h})}(v),Lh}(v),f=Xn().gapi;return we(f,v,"internal-error"),h.open({where:document.body,url:Nv(v),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mv,dontclear:!0},E=>new Promise(function(){var M=(0,C.Z)(function*(V,ee){yield E.restyle({setHideOnLeave:!1});const ce=pe(v,"network-request-failed"),ke=Xn().setTimeout(()=>{ee(ce)},xv.get());function st(){Xn().clearTimeout(ke),V(E)}E.ping(st).then(st,()=>{ee(ce)})});return function(V,ee){return M.apply(this,arguments)}}()))}),ll.apply(this,arguments)}const $p={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ys{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const cl="__/auth/handler",dl="emulator/auth/handler",Zm=encodeURIComponent("fac");function zp(v,h,f,E,M,V){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,C.Z)(function*(v,h,f,E,M,V){we(v.config.authDomain,v,"auth-domain-config-required"),we(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:f,redirectUrl:E,v:oe.SDK_VERSION,eventId:M};if(h instanceof Ks){h.setDefaultLanguage(v.languageCode),ee.providerId=h.providerId||"",(0,K.xb)(h.getCustomParameters())||(ee.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Et,ft]of Object.entries(V||{}))ee[Et]=ft}if(h instanceof Ys){const Et=h.getScopes().filter(ft=>""!==ft);Et.length>0&&(ee.scopes=Et.join(","))}v.tenantId&&(ee.tid=v.tenantId);const ce=ee;for(const Et of Object.keys(ce))void 0===ce[Et]&&delete ce[Et];const ke=yield v._getAppCheckToken(),st=ke?`#${Zm}=${encodeURIComponent(ke)}`:"";return`${function cw({config:v}){return v.emulator?ge(v,dl):`https://${v.authDomain}/${cl}`}(v)}?${(0,K.xO)(ce).slice(1)}${st}`})).apply(this,arguments)}const li="webStorageSupport",Ho=class Bh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=go,this._completeRedirectFn=to,this._overrideRedirectResult=ms}_openPopup(h,f,E,M){var V=this;return(0,C.Z)(function*(){var ee;$t(null===(ee=V.eventManagers[h._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const ce=yield zp(h,f,E,Kn(),M);return function uc(v,h,f,E=500,M=600){const V=Math.max((window.screen.availHeight-M)/2,0).toString(),ee=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const ke=Object.assign(Object.assign({},$p),{width:E.toString(),height:M.toString(),top:V,left:ee}),st=(0,K.z$)().toLowerCase();f&&(ce=pi(st)?"_blank":f),jt(st)&&(h=h||"http://localhost",ke.scrollbars="yes");const Et=Object.entries(ke).reduce((bn,[er,vu])=>`${bn}${er}=${vu},`,"");if(function At(v=(0,K.z$)()){var h;return Ge(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(st)&&"_self"!==ce)return function Vh(v,h){const f=document.createElement("a");f.href=v,f.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(E)}(h||"",ce),new ys(null);const ft=window.open(h||"",ce,Et);we(ft,v,"popup-blocked");try{ft.focus()}catch{}return new ys(ft)}(h,ce,lu())})()}_openRedirect(h,f,E,M){var V=this;return(0,C.Z)(function*(){return yield V._originValidation(h),function ad(v){Xn().location.href=v}(yield zp(h,f,E,Kn(),M)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:M,promise:V}=this.eventManagers[f];return M?Promise.resolve(M):($t(V,"If manager is not set, promise should be"),V)}const E=this.initAndGetManager(h);return this.eventManagers[f]={promise:E},E.catch(()=>{delete this.eventManagers[f]}),E}initAndGetManager(h){var f=this;return(0,C.Z)(function*(){const E=yield function ul(v){return ll.apply(this,arguments)}(h),M=new Vp(h);return E.register("authEvent",V=>(we(V?.authEvent,h,"invalid-auth-event"),{status:M.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:M},f.iframes[h._key()]=E,M})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(li,{type:li},M=>{var V;const ee=null===(V=M?.[0])||void 0===V?void 0:V[li];void 0!==ee&&f(!!ee),Le(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ac(v){return _s.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return rn()||Bn()||Ge()}};class jh{constructor(h){this.factorId=h}_process(h,f,E){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,E);case"signin":return this._finalizeSignIn(h,f.credential);default:return kt("unexpected MultiFactorSessionType")}}}class $o extends jh{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new $o(h)}_finalizeEnroll(h,f,E){return function nd(v,h){return Ve(v,"POST","/v2/accounts/mfaEnrollment:finalize",Me(v,h))}(h,{idToken:f,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function tc(v,h){return Ve(v,"POST","/v2/accounts/mfaSignIn:finalize",Me(v,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wp=(()=>{class v{constructor(){}static assertion(f){return $o._fromCredential(f)}}return v.FACTOR_ID="phone",v})();var Km="@firebase/auth";class no{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,C.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(E=>{h(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zo(){return window}(0,K.Pz)("authIdTokenMaxAge"),function hl(v){(0,oe._registerComponent)(new Ee.wA("auth",(h,{options:f})=>{const E=h.getProvider("app").getImmediate(),M=h.getProvider("heartbeat"),V=h.getProvider("app-check-internal"),{apiKey:ee,authDomain:ce}=E.options;we(ee&&!ee.includes(":"),"invalid-api-key",{appName:E.name});const ke={apiKey:ee,authDomain:ce,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jn(v)},st=new Ao(E,M,V,ke);return function Ka(v,h){const f=h?.persistence||[],E=(Array.isArray(f)?f:[f]).map(ie);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(E,h?.popupRedirectResolver)}(st,f),st},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,E)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new Ee.wA("auth-internal",h=>{const f=Rn(h.getProvider("auth").getImmediate());return new no(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Km,"1.3.2",function Hh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,oe.registerVersion)(Km,"1.3.2","esm2017")}("Browser");function Yp(){return Yp=(0,C.Z)(function*(v,h,f){var E;const{BuildInfo:M}=zo();$t(h.sessionId,"AuthEvent did not contain a session ID");const V=yield function kv(v){return _u.apply(this,arguments)}(h.sessionId),ee={};return Ge()?ee.ibi=M.packageName:is()?ee.apn=M.packageName:Le(v,"operation-not-supported-in-this-environment"),M.displayName&&(ee.appDisplayName=M.displayName),ee.sessionId=V,zp(v,f,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,ee)}),Yp.apply(this,arguments)}function fl(){return(fl=(0,C.Z)(function*(v){const{BuildInfo:h}=zo(),f={};Ge()?f.iosBundleId=h.packageName:is()?f.androidPackageName=h.packageName:Le(v,"operation-not-supported-in-this-environment"),yield kh(v,f)})).apply(this,arguments)}function Cd(){return(Cd=(0,C.Z)(function*(v,h,f){const{cordova:E}=zo();let M=()=>{};try{yield new Promise((V,ee)=>{let ce=null;function ke(){var ft;V();const bn=null===(ft=E.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof bn&&bn(),"function"==typeof f?.close&&f.close()}function st(){ce||(ce=window.setTimeout(()=>{ee(pe(v,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&st()}h.addPassiveListener(ke),document.addEventListener("resume",st,!1),is()&&document.addEventListener("visibilitychange",Et,!1),M=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",Et,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function _u(){return(_u=(0,C.Z)(function*(v){const h=function Lv(v){if($t(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),f=new Uint8Array(h);for(let E=0;E<v.length;E++)f[E]=v.charCodeAt(E);return f}(v),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Dd extends Vp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,C.Z)(function*(){yield h.initPromise})()}}function $h(v){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,C.Z)(function*(v){const h=yield Wh()._get(Qp(v));return h&&(yield Wh()._remove(Qp(v))),h})).apply(this,arguments)}function Vv(){const v=[];for(let f=0;f<20;f++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function Wh(){return ie(Ui)}function Qp(v){return vt("authEvent",v.config.apiKey,v.name)}function Xp(v){if(!v?.includes("?"))return{};const[h,...f]=v.split("?");return(0,K.zd)(f.join("?"))}const eg=class qh{constructor(){this._redirectPersistence=go,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=to,this._overrideRedirectResult=ms}_initialize(h){var f=this;return(0,C.Z)(function*(){const E=h._key();let M=f.eventManagers.get(E);return M||(M=new Dd(h),f.eventManagers.set(E,M),f.attachCallbackListeners(h,M)),M})()}_openPopup(h){Le(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,E,M){var V=this;return(0,C.Z)(function*(){!function Qm(v){var h,f,E,M,V,ee,ce,ke,st,Et;const ft=zo();we("function"==typeof(null===(h=ft?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),we(typeof(null===(f=ft?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),we("function"==typeof(null===(V=null===(M=null===(E=ft?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===V?void 0:V.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),we("function"==typeof(null===(ke=null===(ce=null===(ee=ft?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===ke?void 0:ke.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),we("function"==typeof(null===(Et=null===(st=ft?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===Et?void 0:Et.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const ee=yield V._initialize(h);yield ee.initialized(),ee.resetRedirect(),function xh(){Aa.clear()}(),yield V._originValidation(h);const ce=function Jm(v,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:Vv(),postBody:null,tenantId:v.tenantId,error:pe(v,"no-auth-event")}}(h,E,M);yield function Xm(v,h){return Wh()._set(Qp(v),h)}(h,ce);const ke=yield function Ov(v,h,f){return Yp.apply(this,arguments)}(h,ce,f),st=yield function Td(v){const{cordova:h}=zo();return new Promise(f=>{h.plugins.browsertab.isAvailable(E=>{let M=null;E?h.plugins.browsertab.openUrl(v):M=h.InAppBrowser.open(v,function pt(v=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),f(M)})})}(ke);return function pl(v,h,f){return Cd.apply(this,arguments)}(h,ee,st)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function dc(v){return fl.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:E,handleOpenURL:M,BuildInfo:V}=zo(),ee=setTimeout((0,C.Z)(function*(){yield $h(h),f.onEvent(tg())}),500),ce=function(){var Et=(0,C.Z)(function*(ft){clearTimeout(ee);const bn=yield $h(h);let er=null;bn&&ft?.url&&(er=function zh(v,h){var f,E;const M=function hw(v){const h=Xp(v),f=h.link?decodeURIComponent(h.link):void 0,E=Xp(f).link,M=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Xp(M).link||M||E||f||v}(h);if(M.includes("/__/auth/callback")){const V=Xp(M),ee=V.firebaseError?function Jp(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(V.firebaseError)):null,ce=null===(E=null===(f=ee?.code)||void 0===f?void 0:f.split("auth/"))||void 0===E?void 0:E[1],ke=ce?pe(ce):null;return ke?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(bn,ft.url)),f.onEvent(er||tg())});return function(bn){return Et.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const ke=M,st=`${V.packageName.toLowerCase()}://`;zo().handleOpenURL=function(){var Et=(0,C.Z)(function*(ft){if(ft.toLowerCase().startsWith(st)&&ce({url:ft}),"function"==typeof ke)try{ke(ft)}catch(bn){console.error(bn)}});return function(ft){return Et.apply(this,arguments)}}()}};function tg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function Hn(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function rg(v=(0,K.z$)()){return!("file:"!==Hn()&&"ionic:"!==Hn()&&"capacitor:"!==Hn()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function pc(){try{const v=self.localStorage,h=lu();if(v)return v.setItem(h,"1"),v.removeItem(h),!function sg(v=(0,K.z$)()){return function fc(){return(0,K.w1)()&&11===document?.documentMode}()||function ig(v=(0,K.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,K.hl)()}catch{return Ra()&&(0,K.hl)()}return!1}function Ra(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gl(){return(function ng(){return"http:"===Hn()||"https:"===Hn()}()||(0,K.ru)()||rg())&&!function e_(){return(0,K.b$)()||(0,K.UG)()}()&&pc()&&!Ra()}function Eo(){return rg()&&typeof document<"u"}function og(){return(og=(0,C.Z)(function*(){return!!Eo()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Ai={LOCAL:"local",NONE:"none",SESSION:"session"},Pa=we,ug="persistence";function ml(v){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,C.Z)(function*(v){yield v._initializationPromise;const h=Ji(),f=vt(ug,v.config.apiKey,v.name);h&&h.setItem(f,v._getPersistence())})).apply(this,arguments)}function Ji(){var v;try{return(null===(v=function ag(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Jh=we;class js{constructor(){this.browserResolver=ie(Ho),this.cordovaResolver=ie(eg),this.underlyingResolver=null,this._redirectPersistence=go,this._completeRedirectFn=to,this._overrideRedirectResult=ms}_initialize(h){var f=this;return(0,C.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,E,M){var V=this;return(0,C.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._openPopup(h,f,E,M)})()}_openRedirect(h,f,E,M){var V=this;return(0,C.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._openRedirect(h,f,E,M)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Eo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,C.Z)(function*(){if(h.underlyingResolver)return;const f=yield function t_(){return og.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function bd(v){return v.unwrap()}function _l(v){return ef(v)}function ef(v){const{_tokenResponse:h}=v instanceof K.ZR?v.customData:v;if(!h)return null;if(!(v instanceof K.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ca.credentialFromResult(v);const f=h.providerId;if(!f||f===De.PASSWORD)return null;let E;switch(f){case De.GOOGLE:E=ua;break;case De.FACEBOOK:E=hs;break;case De.GITHUB:E=Qs;break;case De.TWITTER:E=Un;break;default:const{oauthIdToken:M,oauthAccessToken:V,oauthTokenSecret:ee,pendingToken:ce,nonce:ke}=h;return V||ee||M||ce?ce?f.startsWith("saml.")?rr._create(f,ce):Lr._fromParams({providerId:f,signInMethod:f,pendingToken:ce,idToken:M,accessToken:V}):new Ls(f).credential({idToken:M,accessToken:V,rawNonce:ke}):null}return v instanceof K.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Si(v,h){return h.catch(f=>{throw f instanceof K.ZR&&function Xh(v,h){var f;const E=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new yu(v,function Ea(v,h){var f;const E=(0,K.m9)(v),M=h;return we(h.customData.operationType,E,"argument-error"),we(null===(f=M.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,E,"argument-error"),Ju._fromError(E,M)}(v,h));else if(E){const M=ef(h),V=h;M&&(V.credential=M,V.tenantId=E.tenantId||void 0,V.email=E.email||void 0,V.phoneNumber=E.phoneNumber||void 0)}}(v,f),f}).then(f=>{const M=f.user;return{operationType:f.operationType,credential:_l(f),additionalUserInfo:dr(f),user:Wo.getOrCreate(M)}})}function Sd(v,h){return tf.apply(this,arguments)}function tf(){return(tf=(0,C.Z)(function*(v,h){const f=yield h;return{verificationId:f.verificationId,confirm:E=>Si(v,f.confirm(E))}})).apply(this,arguments)}class yu{constructor(h,f){this.resolver=f,this.auth=function bi(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Si(bd(this.auth),this.resolver.resolveSignIn(h))}}class Wo{constructor(h){this._delegate=h,this.multiFactor=function Mp(v){const h=(0,K.m9)(v);return Jl.has(h)||Jl.set(h,Xu._fromUser(h)),Jl.get(h)}(h)}static getOrCreate(h){return Wo.USER_MAP.has(h)||Wo.USER_MAP.set(h,new Wo(h)),Wo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,C.Z)(function*(){return Si(f.auth,Th(f._delegate,h))})()}linkWithPhoneNumber(h,f){var E=this;return(0,C.Z)(function*(){return Sd(E.auth,function ld(v,h,f){return bh.apply(this,arguments)}(E._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,C.Z)(function*(){return Si(f.auth,function Sv(v,h,f){return rc.apply(this,arguments)}(f._delegate,h,js))})()}linkWithRedirect(h){var f=this;return(0,C.Z)(function*(){return yield ml(Rn(f.auth)),oc(f._delegate,h,js)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,C.Z)(function*(){return Si(f.auth,qu(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return Sd(this.auth,function du(v,h,f){return Bo.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return Si(this.auth,function $m(v,h,f){return Gm.apply(this,arguments)}(this._delegate,h,js))}reauthenticateWithRedirect(h){var f=this;return(0,C.Z)(function*(){return yield ml(Rn(f.auth)),Fp(f._delegate,h,js)})()}sendEmailVerification(h){return function Pp(v,h){return ou.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,C.Z)(function*(){return yield function ca(v,h){return da.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function L(v,h){return _e((0,K.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function Q(v,h){return _e((0,K.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Sh(v,h){return Ta.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function F(v,h){return x.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function Qu(v,h,f){return au.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wo.USER_MAP=new WeakMap;const yl=we;let cg=(()=>{class v{constructor(f,E){if(this.app=f,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=f.options;yl(M,"invalid-api-key",{appName:f.name}),yl(M,"invalid-api-key",{appName:f.name});const V=typeof window<"u"?js:void 0;this._delegate=E.initialize({options:{persistence:gc(M,f.name),popupRedirectResolver:V}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,E){!function Uu(v,h,f){const E=Rn(v);we(E._canInitEmulator,E,"emulator-config-failed"),we(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const M=!!f?.disableWarnings,V=Wi(h),{host:ee,port:ce}=function mh(v){const h=Wi(v),f=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!f)return{host:"",port:null};const E=f[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const V=M[1];return{host:V,port:ql(E.substr(V.length+1))}}{const[V,ee]=E.split(":");return{host:V,port:ql(ee)}}}(h);E.config.emulator={url:`${V}//${ee}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ee,port:ce,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function _h(){function v(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,f,E)}applyActionCode(f){return function Lo(v,h){return fa.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Zu(this._delegate,f)}confirmPasswordReset(f,E){return function ko(v,h,f){return ha.apply(this,arguments)}(this._delegate,f,E)}createUserWithEmailAndPassword(f,E){var M=this;return(0,C.Z)(function*(){return Si(M._delegate,function Kr(v,h,f){return Fs.apply(this,arguments)}(M._delegate,f,E))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ma(v,h){return Yu.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Rp(v,h){const f=Fr.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,C.Z)(function*(){yl(gl(),f._delegate,"operation-not-supported-in-this-environment");const E=yield function Pv(v,h){return ba.apply(this,arguments)}(f._delegate,js);return E?Si(f._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Uv(v,h){Rn(v)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,E,M){const{next:V,error:ee,complete:ce}=dg(f,E,M);return this._delegate.onAuthStateChanged(V,ee,ce)}onIdTokenChanged(f,E,M){const{next:V,error:ee,complete:ce}=dg(f,E,M);return this._delegate.onIdTokenChanged(V,ee,ce)}sendSignInLinkToEmail(f,E){return function Yl(v,h,f){return Ql.apply(this,arguments)}(this._delegate,f,E)}sendPasswordResetEmail(f,E){return function po(v,h,f){return ru.apply(this,arguments)}(this._delegate,f,E||void 0)}setPersistence(f){var E=this;return(0,C.Z)(function*(){let M;switch(function lg(v,h){Pa(Object.values(Ai).includes(h),v,"invalid-persistence-type"),(0,K.b$)()?Pa(h!==Ai.SESSION,v,"unsupported-persistence-type"):(0,K.UG)()?Pa(h===Ai.NONE,v,"unsupported-persistence-type"):Ra()?Pa(h===Ai.NONE||h===Ai.LOCAL&&(0,K.hl)(),v,"unsupported-persistence-type"):Pa(h===Ai.NONE||pc(),v,"unsupported-persistence-type")}(E._delegate,f),f){case Ai.SESSION:M=go;break;case Ai.LOCAL:M=(yield ie(il)._isAvailable())?il:Ui;break;case Ai.NONE:M=tt;break;default:return Le("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Si(this._delegate,function Zl(v){return $u.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Si(this._delegate,zu(this._delegate,f))}signInWithCustomToken(f){return Si(this._delegate,function Js(v,h){return Fi.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,E){return Si(this._delegate,function Fo(v,h,f){return zu((0,K.m9)(v),Zt.credential(h,f)).catch(function(){var E=(0,C.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Tr(v),M});return function(M){return E.apply(this,arguments)}}())}(this._delegate,f,E))}signInWithEmailLink(f,E){return Si(this._delegate,function Bm(v,h,f){return pa.apply(this,arguments)}(this._delegate,f,E))}signInWithPhoneNumber(f,E){return Sd(this._delegate,function cu(v,h,f){return eo.apply(this,arguments)}(this._delegate,f,E))}signInWithPopup(f){var E=this;return(0,C.Z)(function*(){return yl(gl(),E._delegate,"operation-not-supported-in-this-environment"),Si(E._delegate,function Hm(v,h,f){return Rh.apply(this,arguments)}(E._delegate,f,js))})()}signInWithRedirect(f){var E=this;return(0,C.Z)(function*(){return yl(gl(),E._delegate,"operation-not-supported-in-this-environment"),yield ml(E._delegate),kp(E._delegate,f,js)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Pe(v,h){return iu.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ai,v})();function dg(v,h,f){let E=v;"function"!=typeof v&&({next:E,error:h,complete:f}=v);const M=E;return{next:ee=>M(ee&&Wo.getOrCreate(ee)),error:h,complete:f}}function gc(v,h){const f=function Qh(v,h){const f=Ji();if(!f)return[];const E=vt(ug,v,h);switch(f.getItem(E)){case Ai.NONE:return[tt];case Ai.LOCAL:return[il,go];case Ai.SESSION:return[go];default:return[]}}(v,h);if(typeof self<"u"&&!f.includes(il)&&f.push(il),typeof window<"u")for(const E of[Ui,go])f.includes(E)||f.push(E);return f.includes(tt)||f.push(tt),f}class Ri{constructor(){this.providerId="phone",this._delegate=new Ca(bd(m.Z.auth()))}static credential(h,f){return Ca.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Ri.PHONE_SIGN_IN_METHOD=Ca.PHONE_SIGN_IN_METHOD,Ri.PROVIDER_ID=Ca.PROVIDER_ID;const n_=we;class mc{constructor(h,f,E=m.Z.app()){var M;n_(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new vn(E.auth(),h,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Bv(v){v.INTERNAL.registerComponent(new Ee.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new cg(f,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zt,FacebookAuthProvider:hs,GithubAuthProvider:Qs,GoogleAuthProvider:ua,OAuthProvider:Ls,SAMLAuthProvider:mr,PhoneAuthProvider:Ri,PhoneMultiFactorGenerator:Wp,RecaptchaVerifier:mc,TwitterAuthProvider:Un,Auth:cg,AuthCredential:Po,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.8")}(m.Z)},5861:(yt,be,B)=>{function C(K,oe,ae,se,Ee,He,De){try{var X=K[He](De),ne=X.value}catch(ue){return void ae(ue)}X.done?oe(ne):Promise.resolve(ne).then(se,Ee)}function m(K){return function(){var oe=this,ae=arguments;return new Promise(function(se,Ee){var He=K.apply(oe,ae);function De(ne){C(He,se,Ee,De,X,"next",ne)}function X(ne){C(He,se,Ee,De,X,"throw",ne)}De(void 0)})}}B.d(be,{Z:()=>m})},7582:(yt,be,B)=>{function oe(ge,ve){var Re={};for(var Te in ge)Object.prototype.hasOwnProperty.call(ge,Te)&&ve.indexOf(Te)<0&&(Re[Te]=ge[Te]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(Te=Object.getOwnPropertySymbols(ge);Me<Te.length;Me++)ve.indexOf(Te[Me])<0&&Object.prototype.propertyIsEnumerable.call(ge,Te[Me])&&(Re[Te[Me]]=ge[Te[Me]])}return Re}function ue(ge,ve,Re,Te){return new(Re||(Re=Promise))(function(Ve,_t){function et(cn){try{Dt(Te.next(cn))}catch(Vt){_t(Vt)}}function Yn(cn){try{Dt(Te.throw(cn))}catch(Vt){_t(Vt)}}function Dt(cn){cn.done?Ve(cn.value):function Me(Ve){return Ve instanceof Re?Ve:new Re(function(_t){_t(Ve)})}(cn.value).then(et,Yn)}Dt((Te=Te.apply(ge,ve||[])).next())})}function Ie(ge){return this instanceof Ie?(this.v=ge,this):new Ie(ge)}function Le(ge,ve,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,Te=Re.apply(ge,ve||[]),Ve=[];return Me={},_t("next"),_t("throw"),_t("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function _t(kn){Te[kn]&&(Me[kn]=function(Qn){return new Promise(function(xn,Dn){Ve.push([kn,Qn,xn,Dn])>1||et(kn,Qn)})})}function et(kn,Qn){try{!function Yn(kn){kn.value instanceof Ie?Promise.resolve(kn.value.v).then(Dt,cn):Vt(Ve[0][2],kn)}(Te[kn](Qn))}catch(xn){Vt(Ve[0][3],xn)}}function Dt(kn){et("next",kn)}function cn(kn){et("throw",kn)}function Vt(kn,Qn){kn(Qn),Ve.shift(),Ve.length&&et(Ve[0][0],Ve[0][1])}}function We(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ve=ge[Symbol.asyncIterator];return ve?ve.call(ge):(ge=function Ue(ge){var ve="function"==typeof Symbol&&Symbol.iterator,Re=ve&&ge[ve],Te=0;if(Re)return Re.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Te>=ge.length&&(ge=void 0),{value:ge&&ge[Te++],done:!ge}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Re={},Te("next"),Te("throw"),Te("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function Te(Ve){Re[Ve]=ge[Ve]&&function(_t){return new Promise(function(et,Yn){!function Me(Ve,_t,et,Yn){Promise.resolve(Yn).then(function(Dt){Ve({value:Dt,done:et})},_t)}(et,Yn,(_t=ge[Ve](_t)).done,_t.value)})}}}B.d(be,{FC:()=>Le,KL:()=>We,_T:()=>oe,mG:()=>ue,qq:()=>Ie}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=5699)}]);