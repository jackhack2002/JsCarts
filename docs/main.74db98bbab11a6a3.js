"use strict";(self.webpackChunkAngular_e_commerce_site=self.webpackChunkAngular_e_commerce_site||[]).push([[179],{1249:(yt,be,B)=>{B.d(be,{N:()=>K});var D=B(5619),p=B(5879);let K=(()=>{class ie{constructor(){this.cartItems=[],this.cartItemsSubject=new D.X(this.cartItems)}getCartItems(){return this.cartItemsSubject.asObservable()}addToCart(oe){const Ee=this.cartItems.find($e=>$e.id===oe.id);Ee?(Ee.quantity++,Ee.totalPrice=Ee.price*Ee.quantity):(oe.quantity=1,oe.totalPrice=oe.price,this.cartItems.push(oe))}removeFromCart(oe){const Ee=this.cartItems.findIndex($e=>$e.id===oe.id);-1!==Ee&&(this.cartItems.splice(Ee,1),this.cartItemsSubject.next(this.cartItems))}clearCart(){this.cartItems=[],this.cartItemsSubject.next(this.cartItems)}static#e=this.\u0275fac=function(Ee){return new(Ee||ie)};static#t=this.\u0275prov=p.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},751:(yt,be,B)=>{B.d(be,{M:()=>ie});var D=B(5619),p=B(2096),K=B(5879);let ie=(()=>{class ue{constructor(){this.productdetail=[],this.productSubject=new D.X(this.productdetail),this.shirts=[{id:"s1",name:"Shirt 1",price:500,image:"././assets/shirt/shirt1.jpeg",quantity:1,totalPrice:0},{id:"s2",name:"Shirt 2",price:750,image:"././assets/shirt/shirt2.jpeg",quantity:1,totalPrice:0},{id:"s3",name:"Shirt 3",price:500,image:"././assets/shirt/shirt3.jpeg",quantity:1,totalPrice:0},{id:"s4",name:"Shirt 4",price:750,image:"././assets/shirt/shirt4.jpeg",quantity:1,totalPrice:0},{id:"s5",name:"Shirt 5",price:500,image:"././assets/shirt/shirt5.jpeg",quantity:1,totalPrice:0},{id:"s6",name:"Product 6",price:750,image:"././assets/shirt/shirt6.jpeg",quantity:1,totalPrice:0},{id:"s7",name:"Product 7",price:500,image:"././assets/shirt/shirt7.jpeg",quantity:1,totalPrice:0},{id:"s8",name:"Product 8",price:750,image:"././assets/shirt/shirt8.jpeg",quantity:1,totalPrice:0},{id:"s9",name:"Product 9",price:500,image:"././assets/shirt/shirt9.jpeg",quantity:1,totalPrice:0},{id:"s10",name:"Product 10",price:750,image:"././assets/shirt/shirt10.jpeg",quantity:1,totalPrice:0}],this.mobiles=[{id:"m1",name:"Mobile 1",price:500,image:"././assets/mobile/mobile1.webp",quantity:1,totalPrice:0},{id:"m2",name:"Mobile 2",price:750,image:"././assets/mobile/mobile2.jpg",quantity:1,totalPrice:0},{id:"m3",name:"Mobile 3",price:500,image:"././assets/mobile/mobile3.png",quantity:1,totalPrice:0},{id:"m4",name:"Mobile 4",price:750,image:"././assets/mobile/mobile4.webp",quantity:1,totalPrice:0},{id:"m5",name:"Mobile 5",price:500,image:"././assets/mobile/mobile5.jpeg",quantity:1,totalPrice:0},{id:"m6",name:"Product 6",price:750,image:"././assets/mobile/mobile1.webp",quantity:1,totalPrice:0},{id:"m7",name:"Product 7",price:500,image:"././assets/mobile/mobile2.jpg",quantity:1,totalPrice:0},{id:"m8",name:"Product 8",price:750,image:"././assets/mobile/mobile3.png",quantity:1,totalPrice:0},{id:"m9",name:"Product 9",price:500,image:"././assets/mobile/mobile4.webp",quantity:1,totalPrice:0},{id:"m10",name:"Product 10",price:750,image:"././assets/mobile/mobile5.jpeg",quantity:1,totalPrice:0}],this.laptop=[{id:"l1",name:"HP Laptop 39.6 cm 15s-eq2212AU",price:34199,image:"././assets/laptop/laptop1.png",quantity:1,totalPrice:0},{id:"l2",name:'HP Stream 14-ax040wm 14"',price:21343.88,image:"././assets/laptop/laptop2.png",quantity:1,totalPrice:0},{id:"l3",name:'HP 14 Series 14" 14-dq0050nr',price:72900,image:"././assets/laptop/laptop3.png",quantity:1,totalPrice:0},{id:"l4",name:"HP Pavilion 15-eg2009TU - Silver",price:68999,image:"././assets/laptop/laptop4.png",quantity:1,totalPrice:0},{id:"l5",name:"Lenovo Legion 5i Pro",price:144990,image:"././assets/laptop/laptop5.png",quantity:1,totalPrice:0}]}productDetail(Ee){const $e=this.productdetail.find(De=>De.id===Ee.id);console.log($e)}getDetail(){return this.productSubject.asObservable()}getShirts(){return(0,p.of)(this.shirts)}getMobiles(){return(0,p.of)(this.mobiles)}getLaptop(){return(0,p.of)(this.laptop)}static#e=this.\u0275fac=function($e){return new($e||ue)};static#t=this.\u0275prov=K.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"})}return ue})()},2650:(yt,be,B)=>{var D=B(6593),p=B(5879),K=B(6814),ie=B(2459),ue=B(5592),oe=B(7453),Ee=B(4829),$e=B(9940),De=B(8251),X=B(7400),ne=B(2714),Pe=B(7398);let He=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq))};static#t=this.\u0275dir=p.lG2({type:n})}return n})(),Je=(()=>{class n extends He{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=p.n5z(n)))(s||n)}}();static#t=this.\u0275dir=p.lG2({type:n,features:[p.qOj]})}return n})();const Be=new p.OlP("NgValueAccessor"),en={provide:Be,useExisting:(0,p.Gpc)(()=>Fe),multi:!0},Ie=new p.OlP("CompositionEventMode");let Fe=(()=>{class n extends He{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function un(){const n=(0,K.q)()?(0,K.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ie,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&p.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[p._Bn([en]),p.qOj]})}return n})();const Ke=new p.OlP("NgValidators"),Xe=new p.OlP("NgAsyncValidators");function xe(n){return null!=n}function Ce(n){return(0,p.QGY)(n)?(0,ie.D)(n):n}function Oe(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ue(n,e){return e.map(t=>t(n))}function et(n){return n.map(e=>function _t(n){return!n.validate}(e)?e:t=>e.validate(t))}function At(n){return null!=n?function Zn(n){if(!n)return null;const e=n.filter(xe);return 0==e.length?null:function(t){return Oe(Ue(t,e))}}(et(n)):null}function Ut(n){return null!=n?function cn(n){if(!n)return null;const e=n.filter(xe);return 0==e.length?null:function(t){return function le(...n){const e=(0,$e.jO)(n),{args:t,keys:r}=(0,oe.D)(n),s=new ue.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let _=c,C=c;for(let P=0;P<c;P++){let k=!1;(0,Ee.Xf)(t[P]).subscribe((0,De.x)(u,G=>{k||(k=!0,C--),m[P]=G},()=>_--,void 0,()=>{(!_||!k)&&(C||u.next(r?(0,ne.n)(r,m):m),u.complete())}))}});return e?s.pipe((0,X.Z)(e)):s}(Ue(t,e).map(Ce)).pipe((0,Pe.U)(Oe))}}(et(n)):null}function Nn(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function In(n){return n?Array.isArray(n)?n:[n]:[]}function wt(n,e){return Array.isArray(n)?n.includes(e):n===e}function vr(n,e){const t=In(e);return In(n).forEach(s=>{wt(t,s)||t.push(s)}),t}function rs(n,e){return In(e).filter(t=>!wt(n,t))}class Er{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=At(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ut(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class On extends Er{get formDirective(){return null}get path(){return null}}class lr extends Er{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hn{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let St=(()=>{class n extends Hn{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(lr,2))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&p.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[p.qOj]})}return n})(),Dn=(()=>{class n extends Hn{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(On,10))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&p.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[p.qOj]})}return n})();const qr="VALID",Wr="INVALID",ti="PENDING",te="DISABLED";function $(n){return(se(n)?n.validators:n)||null}function H(n,e){return(se(e)?e.asyncValidators:n)||null}function se(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Et{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qr}get invalid(){return this.status===Wr}get pending(){return this.status==ti}get disabled(){return this.status===te}get enabled(){return this.status!==te}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rs(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rs(e,this._rawAsyncValidators))}hasValidator(e){return wt(this._rawValidators,e)}hasAsyncValidator(e){return wt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ti,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=te,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qr,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qr||this.status===ti)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?te:qr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ti,this._hasOwnPendingAsyncValidator=!0;const t=Ce(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?te:this.errors?Wr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ti)?ti:this._anyControlsHaveStatus(Wr)?Wr:qr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){se(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function z(n){return Array.isArray(n)?At(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function q(n){return Array.isArray(n)?Ut(n):n||null}(this._rawAsyncValidators)}}class xt extends Et{constructor(e,t,r){super($(t),H(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function tt(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new p.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function je(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e?e[s]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const wi=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Bi}),Bi="always";function fe(n,e,t=Bi){dt(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pr(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ti(n,e)})}(n,e),function ni(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Un(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ti(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function bt(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pt(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dt(n,e){const t=function Kn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Nn(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Rn(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Nn(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();pt(e._rawValidators,s),pt(e._rawAsyncValidators,s)}function Ti(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const ri={provide:On,useExisting:(0,p.Gpc)(()=>wr)},Hi=(()=>Promise.resolve())();let wr=(()=>{class n extends On{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new xt({},At(t),Ut(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Hi.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fe(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Hi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Hi.then(()=>{const r=this._findContainer(t.path),s=new xt({});(function ji(n,e){dt(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Hi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Hi.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Hu(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Ke,10),p.Y36(Xe,10),p.Y36(wi,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&p.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ri]),p.qOj]})}return n})();function Vo(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function os(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const mo=class extends Et{constructor(e=null,t,r){super($(t),H(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),se(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=os(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vo(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vo(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){os(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Bo={provide:lr,useExisting:(0,p.Gpc)(()=>_o)},zu=(()=>Promise.resolve())();let _o=(()=>{class n extends lr{constructor(t,r,s,u,c,m){super(),this._changeDetectorRef=c,this.callSetDisabledState=m,this.control=new mo,this._registered=!1,this.name="",this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Fo(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Fe?t=u:function Lo(n){return Object.getPrototypeOf(n.constructor)===Je}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ws(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zu.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,p.VuI)(r);zu.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Ae(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(On,9),p.Y36(Ke,10),p.Y36(Xe,10),p.Y36(Be,10),p.Y36(p.sBO,8),p.Y36(wi,8))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Bo]),p.qOj,p.TTD]})}return n})(),jo=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const cr={provide:Be,useExisting:(0,p.Gpc)(()=>yo),multi:!0};let xs=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({})}return n})(),Ur=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:xs})}return n})(),yo=(()=>{class n extends Je{constructor(t,r,s,u){super(t,r),this._registry=s,this._injector=u,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,p.f3M)(wi,{optional:!0})??Bi}ngOnInit(){this._control=this._injector.get(lr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ur),p.Y36(p.zs3))};static#t=this.\u0275dir=p.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,s){1&r&&p.NdJ("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[p._Bn([cr]),p.qOj]})}return n})();const Gi=new p.OlP("NgModelWithFormControlWarning");let Eo=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[xs]})}return n})(),_h=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wi,useValue:t.callSetDisabledState??Bi}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[Eo]})}return n})(),rd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gi,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:wi,useValue:t.callSetDisabledState??Bi}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[Eo]})}return n})();var xi=B(9692),Wu=B(1249),Zu=B(751);function id(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",12)(1,"div",13),p._UZ(2,"img",14),p.TgZ(3,"div",15),p._uU(4),p._UZ(5,"br"),p._uU(6),p.ALo(7,"currency"),p._UZ(8,"br"),p.TgZ(9,"button",16),p.NdJ("click",function(){p.CHM(t);const s=p.oxw().$implicit,u=p.oxw();return p.KtG(u.addToCart(s))}),p._uU(10," Add to Cart "),p.qZA()()()()}if(2&n){const t=p.oxw().$implicit;p.xp6(2),p.s9C("alt",t.name),p.Q6J("src",t.image,p.LSH),p.xp6(2),p.hij(" ",t.name,""),p.xp6(2),p.hij(" ",p.xi3(7,4,t.price,"INR"),"")}}function yh(n,e){if(1&n&&(p.TgZ(0,"div"),p.YNc(1,id,11,7,"div",11),p.qZA()),2&n){const t=e.index;p.xp6(1),p.Q6J("ngIf",t<4)}}function Ku(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",12)(1,"div",13),p._UZ(2,"img",14),p.TgZ(3,"div",15),p._uU(4),p._UZ(5,"br"),p._uU(6),p.ALo(7,"currency"),p._UZ(8,"br"),p.TgZ(9,"button",17),p.NdJ("click",function(){p.CHM(t);const s=p.oxw().$implicit,u=p.oxw();return p.KtG(u.addToCart(s))}),p._uU(10," Add to Cart "),p.qZA()()()()}if(2&n){const t=p.oxw().$implicit;p.xp6(2),p.s9C("alt",t.name),p.Q6J("src",t.image,p.LSH),p.xp6(2),p.hij(" ",t.name,""),p.xp6(2),p.hij(" ",p.xi3(7,4,t.price,"INR"),"")}}function Yu(n,e){if(1&n&&(p.TgZ(0,"div"),p.YNc(1,Ku,11,7,"div",11),p.qZA()),2&n){const t=e.index;p.xp6(1),p.Q6J("ngIf",t<4)}}function tu(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",12)(1,"div",13),p._UZ(2,"img",14),p.TgZ(3,"div",15),p._uU(4),p._UZ(5,"br"),p._uU(6),p.ALo(7,"currency"),p._UZ(8,"br"),p.TgZ(9,"button",17),p.NdJ("click",function(){p.CHM(t);const s=p.oxw().$implicit,u=p.oxw();return p.KtG(u.addToCart(s))}),p._uU(10," Add to Cart "),p.qZA()()()()}if(2&n){const t=p.oxw().$implicit;p.xp6(2),p.s9C("alt",t.name),p.Q6J("src",t.image,p.LSH),p.xp6(2),p.hij(" ",t.name,""),p.xp6(2),p.hij(" ",p.xi3(7,4,t.price,"INR"),"")}}function $o(n,e){if(1&n&&(p.TgZ(0,"div"),p.YNc(1,tu,11,7,"div",11),p.qZA()),2&n){const t=e.index;p.xp6(1),p.Q6J("ngIf",t<4)}}let Wl=(()=>{class n{constructor(t,r,s){this.router=t,this.cartService=r,this.productService=s,this.shirts=[],this.mobiles=[],this.laptop=[],this.productService.getShirts().subscribe(u=>{this.shirts=u}),this.productService.getMobiles().subscribe(u=>{this.mobiles=u}),this.productService.getLaptop().subscribe(u=>{this.laptop=u})}addToCart(t){localStorage.getItem("IsAuthorized")?(this.cartService.addToCart(t),alert("Item added to Cart..")):(alert("Login to continue ..."),this.router.navigate(["/login"]))}navigateToProductDetails(t){this.productService.productDetail(t),this.router.navigate(["/dashboard/details"])}navigateToShirt(){this.router.navigate(["dashboard/products/shirt"])}navigateToMobile(){this.router.navigate(["dashboard/products/mobile"])}navigateToLaptop(){this.router.navigate(["dashboard/products/laptop"])}ViewDetails(){this.productService.getDetail()}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(xi.F0),p.Y36(Wu.N),p.Y36(Zu.M))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-product-list"]],decls:28,vars:3,consts:[[1,"m-1"],[1,"w-screen","h-screen"],[1,"w-full","bg-slate-400","h-fit","mt-1"],[1,"flex","justify-between","w-full","h-10","p-6","mx-3","my-auto"],[1,"font-serif","text-3xl"],[1,"mr-10","text-blue-600",3,"click"],[1,"flex","flex-wrap","items-stretch","justify-start","w-full","gap-5","p-5","mx-10","h-fit"],[4,"ngFor","ngForOf"],[1,"bg-white","h-1","min-w-full"],[1,"w-full","bg-slate-400","h-fit"],[1,"w-full","bg-slate-400","h-fit","mt-5"],["class","product-card",4,"ngIf"],[1,"product-card"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700","mt-2",3,"click"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),p._uU(5,"SHIRTS"),p.qZA(),p.TgZ(6,"button",5),p.NdJ("click",function(){return s.navigateToShirt()}),p._uU(7,"Show more >"),p.qZA()(),p.TgZ(8,"div",6),p.YNc(9,yh,2,1,"div",7),p.qZA(),p._UZ(10,"div",8),p.TgZ(11,"div",9)(12,"div",3)(13,"h2",4),p._uU(14,"MOBILES"),p.qZA(),p.TgZ(15,"button",5),p.NdJ("click",function(){return s.navigateToMobile()}),p._uU(16,"Show more >"),p.qZA()(),p.TgZ(17,"div",6),p.YNc(18,Yu,2,1,"div",7),p.qZA(),p._UZ(19,"div",8),p.TgZ(20,"div",10)(21,"div",3)(22,"h2",4),p._uU(23,"LAPTOPS"),p.qZA(),p.TgZ(24,"button",5),p.NdJ("click",function(){return s.navigateToLaptop()}),p._uU(25,"Show more >"),p.qZA()(),p.TgZ(26,"div",6),p.YNc(27,$o,2,1,"div",7),p.qZA()()()()()()),2&r&&(p.xp6(9),p.Q6J("ngForOf",s.shirts),p.xp6(9),p.Q6J("ngForOf",s.mobiles),p.xp6(9),p.Q6J("ngForOf",s.laptop))},dependencies:[K.sg,K.O5,K.H9]})}return n})();var Js=B(7394);class Mi extends Js.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const qi={setInterval(n,e,...t){const{delegate:r}=qi;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=qi;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var sd=B(9039);class Tr extends Mi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return qi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&qi.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,sd.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const fs={now:()=>(fs.delegate||Date).now(),delegate:void 0};class Cr{constructor(e,t=Cr.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Cr.now=fs.now;class nu extends Cr{constructor(e,t=Cr.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Io=new nu(Tr),ru=Io;var Go=B(671);let Qu=(()=>{class n{constructor(){this.currentImageIndex=0,this.totalImages=5,this.imageChangeSubscription=new Js.w0}ngOnInit(){this.imageChangeSubscription=function Ia(n=0,e=Io){return n<0&&(n=0),function zo(n=0,e,t=ru){let r=-1;return null!=e&&((0,Go.K)(e)?t=e:r=e),new ue.y(s=>{let u=function Ea(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let c=0;return t.schedule(function(){s.closed||(s.next(c++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,n,e)}(3e3).subscribe(()=>{this.nextImage()})}nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.totalImages}prevImage(){this.currentImageIndex=(this.currentImageIndex-1+this.totalImages)%this.totalImages}ngOnDestroy(){this.imageChangeSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-carousel"]],decls:15,vars:10,consts:[[1,"m-1"],[1,"absolute","flex","w-full","h-fit","sm:h-80"],[1,"flex","justify-between","w-full","mx-3","my-auto"],[1,"text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"],["id","slider",1,"w-full","mx-px","my-px","bg-blue-600","h-fit","sm:h-80"],["src","././assets/banner/banner1.jpg",1,"w-full","h-72","sm:h-full"],["src","././assets/banner/banner2.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","././assets/banner/banner3.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","././assets/banner/banner4.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","././assets/banner/banner5.jpg",1,"hidden","w-full","h-72","sm:h-full"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),p.NdJ("click",function(){return s.prevImage()}),p.O4$(),p.TgZ(4,"svg",4),p._UZ(5,"path",5),p.qZA()(),p.kcU(),p.TgZ(6,"button",3),p.NdJ("click",function(){return s.nextImage()}),p.O4$(),p.TgZ(7,"svg",4),p._UZ(8,"path",6),p.qZA()()()(),p.kcU(),p.TgZ(9,"div",7),p._UZ(10,"img",8)(11,"img",9)(12,"img",10)(13,"img",11)(14,"img",12),p.qZA()()),2&r&&(p.xp6(10),p.ekj("hidden",0!==s.currentImageIndex),p.xp6(1),p.ekj("hidden",1!==s.currentImageIndex),p.xp6(1),p.ekj("hidden",2!==s.currentImageIndex),p.xp6(1),p.ekj("hidden",3!==s.currentImageIndex),p.xp6(1),p.ekj("hidden",4!==s.currentImageIndex))}})}return n})(),Ju=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"h-fit","mt-3"],[1,"relative","h-32","w-32","..."]],template:function(r,s){1&r&&(p._UZ(0,"app-carousel"),p.TgZ(1,"div",0),p._UZ(2,"app-product-list"),p.qZA(),p._UZ(3,"div",1))},dependencies:[Wl,Qu]})}return n})();var lt,Me=B(5861),Pr=B(534),Ci=B(4537),hr=B(7879),W=B(9058),Zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ni={},od=od||{},Ft=Zl||self;function Xu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wa(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var qo="closure_uid_"+(1e9*Math.random()>>>0),vh=0;function iu(n,e,t){return n.call.apply(n.bind,arguments)}function Eh(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Dr(n,e,t){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?iu:Eh).apply(null,arguments)}function su(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function A(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[s].apply(r,c)}}function F(){this.s=this.s,this.o=this.o}F.prototype.s=!1,F.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ad(n){Object.prototype.hasOwnProperty.call(n,qo)&&n[qo]||(n[qo]=++vh)}(this)},F.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const L=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Q(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ve(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Xu(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let c=0;c<u;c++)n[s+c]=r[c]}else n.push(r)}}function Se(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var It=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",()=>{},e),Ft.removeEventListener("test",()=>{},e)}catch{}return n}();function rn(n){return/^[\s\xa0]*$/.test(n)}function dn(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Kt(n){return-1!=dn().indexOf(n)}function Wt(n){return Wt[" "](n),n}Wt[" "]=function(){};var xr,n,xn=Kt("Opera"),Fn=Kt("Trident")||Kt("MSIE"),ps=Kt("Edge"),Oi=ps||Fn,Wo=Kt("Gecko")&&!(-1!=dn().toLowerCase().indexOf("webkit")&&!Kt("Edge"))&&!(Kt("Trident")||Kt("MSIE"))&&!Kt("Edge"),ii=-1!=dn().toLowerCase().indexOf("webkit")&&!Kt("Edge");function Xs(){var n=Ft.document;return n?n.documentMode:void 0}e:{var Wi="",ud=(n=dn(),Wo?/rv:([^\);]+)(\)|;)/.exec(n):ps?/Edge\/([\d\.]+)/.exec(n):Fn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ii?/WebKit\/(\S+)/.exec(n):xn?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ud&&(Wi=ud?ud[1]:""),Fn){var Bn=Xs();if(null!=Bn&&Bn>parseFloat(Wi)){xr=String(Bn);break e}}xr=Wi}var pi=Ft.document&&Fn&&(Xs()||parseInt(xr,10))||void 0;function Vs(n,e){if(Se.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Wo){e:{try{Wt(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Kl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Vs.$.h.call(this)}}A(Vs,Se);var Kl={2:"touch",3:"pen",4:"mouse"};Vs.prototype.h=function(){Vs.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var eo="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Ip(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Yn,this.fa=this.ia=!1}function Yl(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function tl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nl(n){const e={};for(const t in n)e[t]=n[t];return e}const rl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ih(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<rl.length;u++)t=rl[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ta(n){this.src=n,this.g={},this.h=0}function il(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=L(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Yl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function sl(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Ta.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=sl(n,e,r,s);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new Ip(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Vt="closure_lm_"+(1e6*Math.random()|0),ld={};function wp(n,e,t,r,s){if(r&&r.once)return Ko(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)wp(n,e[u],t,r,s);return null}return t=ol(t),n&&n[eo]?n.O(e,t,wa(r)?!!r.capture:!!r,s):Zi(n,e,t,!1,r,s)}function Zi(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=wa(s)?!!s.capture:!!s,m=rr(n);if(m||(n[Vt]=m=new Ta(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function $m(){const e=Th;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)It||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Da(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ko(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ko(n,e[u],t,r,s);return null}return t=ol(t),n&&n[eo]?n.P(e,t,wa(r)?!!r.capture:!!r,s):Zi(n,e,t,!0,r,s)}function wh(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)wh(n,e[u],t,r,s);else r=wa(r)?!!r.capture:!!r,t=ol(t),n&&n[eo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=sl(u=n.g[e],t,r,s))&&(Yl(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=rr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=sl(e,t,r,s)),(t=-1<n?e[n]:null)&&Ca(t))}function Ca(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[eo])il(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Da(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rr(e))?(il(t,n),0==t.h&&(t.src=null,e[Vt]=null)):Yl(n)}}}function Da(n){return n in ld?ld[n]:ld[n]="on"+n}function Th(n,e){if(n.fa)n=!0;else{e=new Vs(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ca(n),n=t.call(r,e)}return n}function rr(n){return(n=n[Vt])instanceof Ta?n:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ol(n){return"function"==typeof n?n:(n[cd]||(n[cd]=function(e){return n.handleEvent(e)}),n[cd])}function ke(){F.call(this),this.i=new Ta(this),this.S=this,this.J=null}function Ot(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Se(e,n);else if(e instanceof Se)e.target=e.target||n;else{var s=e;Ih(e=new Se(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=al(c,r,!0,e)&&s}if(s=al(c=e.g=n,r,!0,e)&&s,s=al(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=al(c=e.g=t[u],r,!1,e)&&s}function al(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var m=c.listener,_=c.la||c.src;c.ia&&il(n.i,c),s=!1!==m.call(_,r)&&s}}return s&&!r.defaultPrevented}A(ke,F),ke.prototype[eo]=!0,ke.prototype.removeEventListener=function(n,e,t,r){wh(this,n,e,t,r)},ke.prototype.N=function(){if(ke.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Yl(t[r]);delete n.g[e],n.h--}}this.J=null},ke.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ke.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var dd=Ft.JSON.stringify;function Tp(){var n=Hr;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Us=new class si{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Qo,n=>n.reset());class Qo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ou(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Cp(n){Ft.setTimeout(()=>{throw n},0)}let au,Aa=!1,Hr=new class Yo{constructor(){this.h=this.g=null}add(e,t){const r=Us.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},to=()=>{const n=Ft.Promise.resolve(void 0);au=()=>{n.then(Ql)}};var Ql=()=>{for(var n;n=Tp();){try{n.h.call(n.g)}catch(t){Cp(t)}var e=Us;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Aa=!1};function no(n,e){ke.call(this),this.h=n||1,this.g=e||Ft,this.j=Dr(this.qb,this),this.l=Date.now()}function gs(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function hd(n,e,t){if("function"==typeof n)t&&(n=Dr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Dr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function Dp(n){n.g=hd(()=>{n.g=null,n.i&&(n.i=!1,Dp(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}A(no,ke),(lt=no.prototype).ga=!1,lt.T=null,lt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ot(this,"tick"),this.ga&&(gs(this),this.start()))}},lt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.N=function(){no.$.N.call(this),gs(this),delete this.g};class ul extends F{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Dp(this)}N(){super.N(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jl(n){F.call(this),this.h=n,this.g={}}A(Jl,F);var fd=[];function pd(n,e,t,r){Array.isArray(t)||(t&&(fd[0]=t.toString()),t=fd);for(var s=0;s<t.length;s++){var u=wp(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ch(n){tl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ca(e)},n),n.g={}}function w(){this.g=!0}function R(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function j(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return dd(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Jl.prototype.N=function(){Jl.$.N.call(this),Ch(this)},Jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},w.prototype.Ea=function(){this.g=!1},w.prototype.info=function(){};var Y={},_e=null;function me(){return _e=_e||new ke}function at(n){Se.call(this,Y.Ta,n)}function $t(n){const e=me();Ot(e,new at(e))}function Jt(n,e){Se.call(this,Y.STAT_EVENT,n),this.stat=e}function kt(n){const e=me();Ot(e,new Jt(e,n))}function Tn(n,e){Se.call(this,Y.Ua,n),this.size=e}function ro(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Y.Ta="serverreachability",A(at,Se),Y.STAT_EVENT="statevent",A(Jt,Se),Y.Ua="timingevent",A(Tn,Se);var io={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ll={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function so(){}function md(){}so.prototype.h=null;var lu,uu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function oo(){Se.call(this,"d")}function Xl(){Se.call(this,"c")}function cl(){}function Jo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Jl(this),this.P=du,this.V=new no(n=Oi?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}A(oo,Se),A(Xl,Se),A(cl,so),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},lu=new cl;var du=45e3,ec={},Dh={};function hu(n,e,t){n.L=1,n.v=pu(ao(e)),n.s=t,n.S=!0,tc(n,null)}function tc(n,e){n.G=Date.now(),bh(n),n.A=ao(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),kh(t.i,"t",r),n.C=0,t=n.l.J,n.h=new cu,n.g=Lp(n.l,t?e:null,!n.s),0<n.O&&(n.M=new ul(Dr(n.Pa,n,n.g),n.O)),pd(n.U,n.g,"readystatechange",n.nb),e=n.I?nl(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),$t(),function b(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),_=0;_<m.length;_++){var C=m[_].split("=");if(1<C.length){var P=C[0];C=C[1];var k=P.split("_");c=2<=k.length&&"type"==k[1]?c+(P+"=")+C+"&":c+(P+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Ah(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Gm(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=Ap(n,t),s==Dh){4==e&&(n.o=4,kt(14),r=!1),R(n.j,n.m,null,"[Incomplete Response]");break}if(s==ec){n.o=4,kt(15),R(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}R(n.j,n.m,s,null),dl(n,s)}Ah(n)&&s!=Dh&&s!=ec&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,kt(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),pc(e),e.M=!0,kt(11))):(R(n.j,n.m,t,"[Invalid Chunked Response]"),rc(n),nc(n))}function Ap(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dh:(t=Number(e.substring(t,r)),isNaN(t)?ec:(r+=1)+t>e.length?Dh:(e=e.slice(r,r+t),n.C=r+t,e))}function bh(n){n.Y=Date.now()+n.P,Sh(n,n.P)}function Sh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ro(Dr(n.lb,n),e)}function Rh(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function nc(n){0==n.l.H||n.J||Id(n.l,n)}function rc(n){Rh(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,gs(n.V),Ch(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function dl(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||oc(t.i,n)))if(!n.K&&oc(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;_l(t),gi(t)}zh(t),kt(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=ro(Dr(t.ib,t),6e3));if(1>=Rp(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else na(t,11)}else if((n.K||t.g==n)&&_l(t),!rn(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let C=s[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const P=C[3];null!=P&&(t.ra=P,t.l.info("VER="+t.ra));const k=C[4];null!=k&&(t.Ga=k,t.l.info("SVER="+t.Ga));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.L=r=1.5*G,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const he=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var u=r.i;u.g||-1==he.indexOf("spdy")&&-1==he.indexOf("quic")&&-1==he.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(yd(u,u.h),u.h=null))}if(r.F){const Re=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.Da=Re,ir(r.I,r.F,Re))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=wd(r,r.J?r.pa:null,r.Y),c.K){Pp(r.i,c);var m=c,_=r.L;_&&m.setTimeout(_),m.B&&(Rh(m),bh(m)),r.g=c}else Gh(r);0<t.j.length&&ta(t)}else"stop"!=C[0]&&"close"!=C[0]||na(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?na(t,7):Km(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}$t()}catch{}}function Xo(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function _v(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Xu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hl(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Xu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(lt=Jo.prototype).setTimeout=function(n){this.P=n},lt.nb=function(n){n=n.target;const e=this.M;e&&3==Ki(n)?e.l():this.Pa(n)},lt.Pa=function(n){try{if(n==this.g)e:{const P=Ki(this.g);var e=this.g.Ia();if(this.g.da(),!(3>P)&&(3!=P||Oi||this.g&&(this.h.h||this.g.ja()||Np(this.g)))){this.J||4!=P||7==e||$t(),Rh(this);var t=this.g.da();this.ca=t;t:if(Ah(this)){var r=Np(this.g);n="";var s=r.length,u=4==Ki(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){rc(this),nc(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function I(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,P,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,_=this.g;if((m=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rn(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,kt(12),rc(this),nc(this);break e}R(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dl(this,t)}this.S?(Gm(this,P,c),Oi&&this.i&&3==P&&(pd(this.U,this.V,"tick",this.mb),this.V.start())):(R(this.j,this.m,c,null),dl(this,c)),4==P&&rc(this),this.i&&!this.J&&(4==P?Id(this.l,this):(this.i=!1,bh(this)))}else(function jh(n){const e={};n=(n.g&&2<=Ki(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(rn(n[r]))continue;var t=ou(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function wo(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,kt(12)):(this.o=0,kt(13)),rc(this),nc(this)}}}catch{}},lt.mb=function(){if(this.g){var n=Ki(this.g),e=this.g.ja();this.C<e.length&&(Rh(this),Gm(this,n,e),this.i&&4!=n&&bh(this))}},lt.cancel=function(){this.J=!0,rc(this)},lt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function N(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($t(),kt(17)),rc(this),this.o=2,nc(this)):Sh(this,this.Y-n)};var Ph=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fu){this.h=n.h,fl(this,n.j),this.s=n.s,this.g=n.g,Mh(this,n.m),this.l=n.l;var e=n.i,t=new gu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Bs(this,t),this.o=n.o}else n&&(e=String(n).match(Ph))?(this.h=!1,fl(this,e[1]||"",!0),this.s=pl(e[2]||""),this.g=pl(e[3]||"",!0),Mh(this,e[4]),this.l=pl(e[5]||"",!0),Bs(this,e[6]||"",!0),this.o=pl(e[7]||"")):(this.h=!1,this.i=new gu(null,this.h))}function ao(n){return new fu(n)}function fl(n,e,t){n.j=t?pl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Bs(n,e,t){e instanceof gu?(n.i=e,function Lh(n,e){e&&!n.j&&(mu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(gl(this,r),kh(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ic(e,zm)),n.i=new gu(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function pu(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ic(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sc),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sc(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ic(e,Nh,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ic(e,Nh,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ic(t,"/"==t.charAt(0)?Oh:yv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ic(t,qm)),n.join("")};var Nh=/[#\/\?@]/g,yv=/[#\?:]/g,Oh=/[#\?]/g,zm=/[#\?@]/g,qm=/#/g;function gu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function mu(n){n.g||(n.g=new Map,n.h=0,n.i&&function xh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function gl(n,e){mu(n),e=_u(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function To(n,e){return mu(n),e=_u(n,e),n.g.has(e)}function kh(n,e,t){gl(n,e),0<t.length&&(n.i=null,n.g.set(_u(n,e),Q(t)),n.h+=t.length)}function _u(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function bp(n){this.l=n||ki,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ka&&Ft.g.Ka()&&Ft.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=gu.prototype).add=function(n,e){mu(this),this.i=null,n=_u(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){mu(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},lt.ta=function(){mu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},lt.Z=function(n){mu(this);let e=[];if("string"==typeof n)To(this,n)&&(e=e.concat(this.g.get(_u(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},lt.set=function(n,e){return mu(this),this.i=null,To(this,n=_u(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var s=u;""!==c[r]&&(s+="="+encodeURIComponent(String(c[r]))),n.push(s)}}return this.i=n.join("&")};var ki=10;function Sp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Rp(n){return n.h?1:n.g?n.g.size:0}function oc(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yd(n,e){n.g?n.g.add(e):n.h=e}function Pp(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Fh(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Q(n.i)}bp.prototype.cancel=function(){if(this.i=Fh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ac=class{stringify(n){return Ft.JSON.stringify(n,void 0)}parse(n){return Ft.JSON.parse(n,void 0)}};function yu(){this.g=new ac}function uc(n,e,t){const r=t||"";try{Xo(n,function(s,u){let c=s;wa(s)&&(c=dd(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function ml(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function ea(n){this.l=n.ec||null,this.j=n.ob||!1}function lc(n,e){ke.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=xp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}A(ea,so),ea.prototype.g=function(){return new lc(this.l,this.j)},ea.prototype.i=function(n){return function(){return n}}({}),A(lc,ke);var xp=0;function vv(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Vh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uh(n)}function Uh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=lc.prototype).open=function(n,e){if(this.readyState!=xp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uh(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vh(this)),this.readyState=xp},lt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vv(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},lt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vh(this):Uh(this),3==this.readyState&&vv(this)}},lt.Za=function(n){this.g&&(this.response=this.responseText=n,Vh(this))},lt.Ya=function(n){this.g&&(this.response=n,Vh(this))},lt.ka=function(){this.g&&Vh(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var uw=Ft.JSON.parse;function $r(n){ke.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ev,this.L=this.M=!1}A($r,ke);var Ev="",cc=/^https?$/i,Mp=["POST","PUT"];function Qr(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Zm(n),Bh(n)}function Zm(n){n.F||(n.F=!0,Ot(n,"complete"),Ot(n,"error"))}function dc(n){if(n.h&&typeof od<"u"&&(!n.C[1]||4!=Ki(n)||2!=n.da()))if(n.v&&4==Ki(n))hd(n.La,0,n);else if(Ot(n,"readystatechange"),4==Ki(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var s=String(n.I).match(Ph)[1]||null;!s&&Ft.self&&Ft.self.location&&(s=Ft.self.location.protocol.slice(0,-1)),r=!cc.test(s?s.toLowerCase():"")}t=r}if(t)Ot(n,"complete"),Ot(n,"success");else{n.m=6;try{var u=2<Ki(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Zm(n)}}finally{Bh(n)}}}function Bh(n,e){if(n.g){ms(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ot(n,"ready");try{t.onreadystatechange=r}catch{}}}function ms(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Ki(n){return n.g?n.g.readyState:0}function Np(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Ev:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hc(n){let e="";return tl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Op(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hc(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function fc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Hh(n){this.Ga=0,this.j=[],this.l=new w,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fc("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fc("baseRetryDelayMs",5e3,n),this.hb=fc("retryDelaySeedMs",1e4,n),this.eb=fc("forwardChannelMaxRetries",2,n),this.xa=fc("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new bp(n&&n.concurrentRequestLimit),this.Ja=new yu,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Km(n){if($h(n),3==n.H){var e=n.W++,t=ao(n.I);if(ir(t,"SID",n.K),ir(t,"RID",e),ir(t,"TYPE","terminate"),Ed(n,t),(e=new Jo(n,n.l,e)).L=2,e.v=pu(ao(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon)try{t=Ft.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=Lp(e.l,null),e.g.ha(e.v)),e.G=Date.now(),bh(e)}Qm(n)}function gi(n){n.g&&(pc(n),n.g.cancel(),n.g=null)}function $h(n){gi(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),_l(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function ta(n){if(!Sp(n.i)&&!n.m){n.m=!0;var e=n.Na;au||to(),Aa||(au(),Aa=!0),Hr.add(e,n),n.C=0}}function vd(n,e){var t;t=e?e.m:n.W++;const r=ao(n.I);ir(r,"SID",n.K),ir(r,"RID",t),ir(r,"AID",n.V),Ed(n,r),n.o&&n.s&&Op(r,n.o,n.s),t=new Jo(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=wv(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yd(n.i,t),hu(t,r,e)}function Ed(n,e){n.na&&tl(n.na,function(t,r){ir(e,r,t)}),n.h&&Xo({},function(t,r){ir(e,r,t)})}function wv(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Dr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let _=0;_<t;_++){let C=s[_].g;const P=s[_].map;if(C-=u,0>C)u=Math.max(0,s[_].g-100),m=!1;else try{uc(P,c,"req"+C+"_")}catch{r&&r(P)}}if(m){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Gh(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;au||to(),Aa||(au(),Aa=!0),Hr.add(e,n),n.A=0}}function zh(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=ro(Dr(n.Ma,n),Ym(n,n.A)),n.A++,0))}function pc(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function kp(n){n.g=new Jo(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ao(n.wa);ir(e,"RID","rpc"),ir(e,"SID",n.K),ir(e,"AID",n.V),ir(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ir(e,"TO",n.qa),ir(e,"TYPE","xmlhttp"),Ed(n,e),n.o&&n.s&&Op(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=pu(ao(e)),t.s=null,t.S=!0,tc(t,n)}function _l(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Id(n,e){var t=null;if(n.g==e){_l(n),pc(n),n.g=null;var r=2}else{if(!oc(n.i,e))return;t=e.F,Pp(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;Ot(r=me(),new Tn(r,t)),ta(n)}else Gh(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function lw(n,e){return!(Rp(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=ro(Dr(n.Na,n,e),Ym(n,n.C)),n.C++,0)))}(n,e)||2==r&&zh(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:na(n,5);break;case 4:na(n,10);break;case 3:na(n,6);break;default:na(n,2)}}function Ym(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function na(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Dr(n.pb,n);t||(t=new fu("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||fl(t,"https"),pu(t)),function Wm(n,e){const t=new w;if(Ft.Image){const r=new Image;r.onload=su(ml,t,r,"TestLoadImage: loaded",!0,e),r.onerror=su(ml,t,r,"TestLoadImage: error",!1,e),r.onabort=su(ml,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=su(ml,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else kt(2);n.H=0,n.h&&n.h.za(e),Qm(n),$h(n)}function Qm(n){if(n.H=0,n.ma=[],n.h){const e=Fh(n.i);(0!=e.length||0!=n.j.length)&&(ve(n.ma,e),ve(n.ma,n.j),n.i.i.length=0,Q(n.j),n.j.length=0),n.h.ya()}}function wd(n,e,t){var r=t instanceof fu?ao(t):new fu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Mh(r,r.m);else{var s=Ft.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new fu(null);r&&fl(u,r),e&&(u.g=e),s&&Mh(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&ir(r,t,e),ir(r,"VER",n.ra),Ed(n,r),r}function Lp(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $r(t&&n.Ha&&!n.va?new ea({ob:!0}):n.va)).Oa(n.J),e}function Fp(){}function Td(){if(Fn&&!(10<=Number(pi)))throw Error("Environmental error: no available transport.")}function Mr(n,e){ke.call(this),this.g=new Hh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!rn(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rn(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vu(this)}function Vp(n){oo.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Jm(){Xl.call(this),this.status=1}function vu(n){this.g=n}function Di(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Up(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((s=u+((c=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function zn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(lt=$r.prototype).Oa=function(n){this.M=n},lt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():lu.g(),this.C=function gd(n){return n.h||(n.h=n.i())}(this.u?this.u:lu),this.g.onreadystatechange=Dr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Qr(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ft.FormData&&n instanceof Ft.FormData,!(0<=L(Mp,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ms(this),0<this.B&&((this.L=function Iv(n){return Fn&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.ua,this)):this.A=hd(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Qr(this,u)}},lt.ua=function(){typeof od<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ot(this,"complete"),Ot(this,"abort"),Bh(this))},lt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bh(this,!0)),$r.$.N.call(this)},lt.La=function(){this.s||(this.G||this.v||this.l?dc(this):this.kb())},lt.kb=function(){dc(this)},lt.isActive=function(){return!!this.g},lt.da=function(){try{return 2<Ki(this)?this.g.status:-1}catch{return-1}},lt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),uw(e)}},lt.Ia=function(){return this.m},lt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=Hh.prototype).ra=8,lt.H=1,lt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Jo(this,this.l,n);let u=this.s;if(this.U&&(u?(u=nl(u),Ih(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=wv(this,s,e),ir(t=ao(this.I),"RID",n),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),Ed(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(hc(u)))+"&"+e:this.o&&Op(t,this.o,u)),yd(this.i,s),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),s.aa=!0,hu(s,t,null)):hu(s,t,e),this.H=2}}else 3==this.H&&(n?vd(this,n):0==this.j.length||Sp(this.i)||vd(this))},lt.Ma=function(){if(this.u=null,kp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ro(Dr(this.jb,this),n)}},lt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),gi(this),kp(this))},lt.ib=function(){null!=this.v&&(this.v=null,gi(this),zh(this),kt(19))},lt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))},lt.isActive=function(){return!!this.h&&this.h.isActive(this)},(lt=Fp.prototype).Ba=function(){},lt.Aa=function(){},lt.za=function(){},lt.ya=function(){},lt.isActive=function(){return!0},lt.Va=function(){},Td.prototype.g=function(n,e){return new Mr(n,e)},A(Mr,ke),Mr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;kt(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=wd(n,null,n.Y),ta(n)},Mr.prototype.close=function(){Km(this.g)},Mr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=dd(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ta(e)},Mr.prototype.N=function(){this.g.h=null,delete this.j,Km(this.g),delete this.g,Mr.$.N.call(this)},A(Vp,oo),A(Jm,Xl),A(vu,Fp),vu.prototype.Ba=function(){Ot(this.g,"a")},vu.prototype.Aa=function(n){Ot(this.g,new Vp(n))},vu.prototype.za=function(n){Ot(this.g,new Jm)},vu.prototype.ya=function(){Ot(this.g,"b")},A(Di,function gc(){this.blockSize=-1}),Di.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Di.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Up(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Up(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Up(this,r),s=0;break}}this.h=s,this.i+=e},Di.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var qh={};function Bp(n){return-128<=n&&128>n?function nr(n,e){var t=qh;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new zn([0|e],0>e?-1:0)}):new zn([0|n],0>n?-1:0)}function ba(n){if(isNaN(n)||!isFinite(n))return mc;if(0>n)return mi(ba(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=jp;return new zn(e,0)}var jp=4294967296,mc=Bp(0),_c=Bp(1),Hp=Bp(16777216);function Sa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function _s(n){return-1==n.h}function mi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new zn(t,~n.h).add(_c)}function Cd(n,e){return n.add(mi(e))}function $p(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function yl(n,e){this.g=n,this.h=e}function yc(n,e){if(Sa(e))throw Error("division by zero");if(Sa(n))return new yl(mc,mc);if(_s(n))return e=yc(mi(n),e),new yl(mi(e.g),mi(e.h));if(_s(e))return e=yc(n,mi(e)),new yl(mi(e.g),e.h);if(30<n.g.length){if(_s(n)||_s(e))throw Error("slowDivide_ only works with positive integers.");for(var t=_c,r=e;0>=r.X(n);)t=Zh(t),r=Zh(r);var s=Dd(t,1),u=Dd(r,1);for(r=Dd(r,2),t=Dd(t,2);!Sa(r);){var c=u.add(r);0>=c.X(n)&&(s=s.add(t),u=c),r=Dd(r,1),t=Dd(t,1)}return e=Cd(n,s.R(e)),new yl(s,e)}for(s=mc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=ba(t)).R(e);_s(c)||0<c.X(n);)c=(u=ba(t-=r)).R(e);Sa(u)&&(u=_c),s=s.add(u),n=Cd(n,c)}return new yl(s,n)}function Zh(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new zn(t,n.h)}function Dd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new zn(s,n.h)}(lt=zn.prototype).ea=function(){if(_s(this))return-mi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:jp+r)*e,e*=jp}return n},lt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Sa(this))return"0";if(_s(this))return"-"+mi(this).toString(n);for(var e=ba(Math.pow(n,6)),t=this,r="";;){var s=yc(t,e).g,u=((0<(t=Cd(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Sa(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},lt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},lt.X=function(n){return _s(n=Cd(this,n))?-1:Sa(n)?0:1},lt.abs=function(){return _s(this)?mi(this):this},lt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),c=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=c>>>16,t[s]=(c&=65535)<<16|(u&=65535)}return new zn(t,-2147483648&t[t.length-1]?-1:0)},lt.R=function(n){if(Sa(this)||Sa(n))return mc;if(_s(this))return _s(n)?mi(this).R(mi(n)):mi(mi(this).R(n));if(_s(n))return mi(this.R(mi(n)));if(0>this.X(Hp)&&0>n.X(Hp))return ba(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,c=65535&this.D(r),m=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=c*_,$p(t,2*r+2*s),t[2*r+2*s+1]+=u*_,$p(t,2*r+2*s+1),t[2*r+2*s+1]+=c*m,$p(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,$p(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new zn(t,0)},lt.gb=function(n){return yc(this,n).h},lt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new zn(t,this.h&n.h)},lt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new zn(t,this.h|n.h)},lt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new zn(t,this.h^n.h)},Td.prototype.createWebChannel=Td.prototype.g,Mr.prototype.send=Mr.prototype.u,Mr.prototype.open=Mr.prototype.m,Mr.prototype.close=Mr.prototype.close,io.NO_ERROR=0,io.TIMEOUT=8,io.HTTP_ERROR=6,ll.COMPLETE="complete",md.EventType=uu,uu.OPEN="a",uu.CLOSE="b",uu.ERROR="c",uu.MESSAGE="d",ke.prototype.listen=ke.prototype.O,$r.prototype.listenOnce=$r.prototype.P,$r.prototype.getLastError=$r.prototype.Sa,$r.prototype.getLastErrorCode=$r.prototype.Ia,$r.prototype.getStatus=$r.prototype.da,$r.prototype.getResponseJson=$r.prototype.Wa,$r.prototype.getResponseText=$r.prototype.ja,$r.prototype.send=$r.prototype.ha,$r.prototype.setWithCredentials=$r.prototype.Oa,Di.prototype.digest=Di.prototype.l,Di.prototype.reset=Di.prototype.reset,Di.prototype.update=Di.prototype.j,zn.prototype.add=zn.prototype.add,zn.prototype.multiply=zn.prototype.R,zn.prototype.modulo=zn.prototype.gb,zn.prototype.compare=zn.prototype.X,zn.prototype.toNumber=zn.prototype.ea,zn.prototype.toString=zn.prototype.toString,zn.prototype.getBits=zn.prototype.D,zn.fromNumber=ba,zn.fromString=function Wh(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return mi(Wh(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ba(Math.pow(e,8)),r=mc,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),c=parseInt(n.substring(s,s+u),e);8>u?(u=ba(Math.pow(e,u)),r=r.R(u).add(ba(c))):r=(r=r.R(t)).add(ba(c))}return r};var Gp=Ni.createWebChannelTransport=function(){return new Td},zp=Ni.getStatEventTarget=function(){return me()},Xm=Ni.ErrorCode=io,cw=Ni.EventType=ll,Tv=Ni.Event=Y,Cv=Ni.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dw=Ni.FetchXmlHttpFactory=ea,Kh=Ni.WebChannel=md,Yh=Ni.XhrIo=$r,Eu=Ni.Md5=Di,vl=Ni.Integer=zn;const Qh="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Co="10.5.2";const Ra=new hr.Yd("@firebase/firestore");function El(){return Ra.logLevel}function qe(n,...e){if(Ra.logLevel<=hr.in.DEBUG){const t=e.map(qp);Ra.debug(`Firestore (${Co}): ${n}`,...t)}}function sr(n,...e){if(Ra.logLevel<=hr.in.ERROR){const t=e.map(qp);Ra.error(`Firestore (${Co}): ${n}`,...t)}}function Yi(n,...e){if(Ra.logLevel<=hr.in.WARN){const t=e.map(qp);Ra.warn(`Firestore (${Co}): ${n}`,...t)}}function qp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Rt(n,e){n||gt()}function nt(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends W.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Jh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class Ji{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wp{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=C=>this.i!==s?(s=this.i,t(C)):Promise.resolve();let c=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Nr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=c;e.enqueueRetryable((0,Me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},_=C=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Nr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new Jh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new oi(e)}}class Pa{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xh{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Pa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ai{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=u=>{null!=u.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.R;return this.R=u.token,qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?s(u):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.R=t.token,new Ai(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Zp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Xi{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=Zp(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Iu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Kp(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new We(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new We(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new We(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new bn(0,0))}static max(){return new Dt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class vc{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===vc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends vc{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const Yp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends vc{construct(e,t,r){return new jn(e,t,r)}static isValidIdentifier(e){return Yp.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new We(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new We(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new We(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===m?(c=!c,s++):"."!==m||c?(r+=m,s++):(u(),s++)}if(u(),c)throw new We(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class st{constructor(e){this.path=e}static fromPath(e){return new st(mn.fromString(e))}static fromName(e){return new st(mn.fromString(e).popFirst(5))}static empty(){return new st(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new mn(e.slice()))}}class ra{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Qp(n){return n.fields.find(e=>2===e.kind)}function Il(n){return n.fields.filter(e=>2!==e.kind)}ra.UNKNOWN_ID=-1;class h{constructor(e,t){this.fieldPath=e,this.kind=t}}class E{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new E(0,ee.min())}}function M(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Dt.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new ee(s,st.empty(),e)}function U(n){return new ee(n.readTime,n.key,-1)}class ee{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ee(Dt.min(),st.empty(),-1)}static max(){return new ee(Dt.max(),st.empty(),-1)}}function ce(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=st.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const Ve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ot{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ft(n){return vt.apply(this,arguments)}function vt(){return vt=(0,Me.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==Ve)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),vt.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let s=0,u=0,c=!1;e.forEach(m=>{++s,m.next(()=>{++u,c&&u===s&&t()},_=>r(_))}),c=!0,u===s&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(s=>s?ae.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,s)=>{const u=e.length,c=new Array(u);let m=0;for(let _=0;_<u;_++){const C=_;t(e[C]).next(P=>{c[C]=P,++m,m===u&&r(c)},P=>s(P))}})}static doWhile(e,t){return new ae((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class ys{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new xa(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Pd(r.target.error);this.V.reject(new xa(e,s))}}static open(e,t,r,s){try{return new ys(t,e.transaction(s,r))}catch(u){throw new xa(t,u)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new e_(t)}}class es{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===es.S((0,W.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),Ma(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,W.hl)())return!1;if(es.C())return!0;const e=(0,W.z$)(),t=es.S(e),r=0<t&&t<10,s=es.v(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,Me.Z)(function*(){return t.db||(qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new xa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;s("VersionError"===m.name?new We(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new We(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new xa(e,m))},u.onupgradeneeded=c=>{qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.p.N(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Me.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.O(e);const _=ys.open(u.db,e,c?"readonly":"readwrite",r),C=s(_).next(P=>(_.g(),P)).catch(P=>(_.abort(P),ae.reject(P))).toPromise();return C.catch(()=>{}),yield _.m,C}catch(_){const C=_,P="FirebaseError"!==C.name&&m<3;if(qe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",P),u.close(),!P)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Sd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ma(this.k.delete())}}class xa extends We{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Do(n){return"IndexedDbTransactionError"===n.name}class e_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ma(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),Ma(this.store.add(e))}get(e){return Ma(this.store.get(e)).next(t=>(void 0===t&&(t=null),qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),Ma(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),Ma(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.G(s,(c,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ae((u,c)=>{s.onerror=m=>{c(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}H(e,t){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(u,c,m)=>m.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new ae((r,s)=>{t.onerror=u=>{const c=Pd(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}G(e,t){const r=[];return new ae((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void s();const _=new Sd(m),C=t(m.primaryKey,m.value,_);if(C instanceof ae){const P=C.catch(k=>(_.done(),ae.reject(k)));r.push(P)}_.isDone?s():null===_.$?m.continue():m.continue(_.$)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ma(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Pd(r.target.error);t(s)}})}let Rd=!1;function Pd(n){const e=es.S((0,W.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rd||(Rd=!0,setTimeout(()=>{throw r},0)),r}}return n}class Na{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Me.Z)(function*(){t.task=null;try{qe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(r){Do(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ft(r)}yield t.ee(6e4)}))}}class Jp{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let s=t,u=!0;return ae.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return qe("IndexBackiller",`Processing collection: ${c}`),this.re(e,c,s).next(m=>{s-=m,r.add(c)});u=!1})).next(()=>t-s)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ie(s,u)).next(m=>(qe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}ie(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=U(u);ce(c,r)>0&&(r=c)}),new ee(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let vs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.se(s),this.oe=s=>r.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function wl(n){return null==n}function ef(n){return 0===n&&1/n==-1/0}function Xp(n){return"number"==typeof n&&Number.isInteger(n)&&!ef(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Es(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bv(e)),e=hw(n.get(t),e);return bv(e)}function hw(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function bv(n){return n+"\x01\x01"}function Oa(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&gt(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let _;0===s.length?_=m:(s+=m,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:gt()}u=c+2}return new mn(r)}const t_=["userId","batchId"];function eg(n,e){return[n,Es(e)]}function tg(n,e,t){return[n,Es(e),t]}const ng={},fw=["prefixPath","collectionGroup","readTime","documentId"],Sv=["prefixPath","collectionGroup","documentId"],n_=["collectionGroup","readTime","prefixPath","documentId"],pw=["canonicalId","targetId"],Rv=["targetId","path"],rg=["path","targetId"],PA=["collectionId","parent"],gw=["indexId","uid"],xA=["uid","sequenceNumber"],MA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NA=["indexId","uid","orderedDocumentKey"],mw=["userId","collectionPath","documentId"],_w=["userId","collectionPath","largestBatchId"],r_=["userId","collectionGroup","largestBatchId"],i_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tf=[...i_,"documentOverlays"],yw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vw=yw,ZP=[...vw,"indexConfiguration","indexState","indexEntries"];class Pv extends ot{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function _i(n,e){const t=nt(n);return es.M(t.ae,e)}function Ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ig(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class or{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sg(this.root,e,this.comparator,!1)}getReverseIterator(){return new sg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sg(this.root,e,this.comparator,!0)}}class sg{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Li{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Li.RED,this.left=s??Li.EMPTY,this.right=u??Li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Li(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Li.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1,Li.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,t,r,s,u){return this}insert(e,t,r){return new Li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xv(this.data.getIterator())}getIteratorFrom(e){return new xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qn(this.comparator);return t.data=e,t}}class xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nf(n){return n.hasNext()?n.getNext():void 0}class uo{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new uo([])}unionWith(e){let t=new Qn(jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Iu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Iw("Invalid base64 string: "+u):u}}(e);return new bi(t)}static fromUint8Array(e){const t=function(s){let u="";for(let c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);return u}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const Ec=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=Ec.exec(n);if(Rt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jr(n.seconds),nanos:Jr(n.nanos)}}function Jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?bi.fromBase64String(n):bi.fromUint8Array(n)}function Mv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Nv(n){const e=n.mapValue.fields.__previous_value__;return Mv(e)?Nv(e):e}function s_(n){const e=ia(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}class KP{constructor(e,t,r,s,u,c,m,_,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=C}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}const wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},o_={nullValue:"NULL_VALUE"};function Tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mv(n)?4:kv(n)?9007199254740991:10:gt()}function wu(n,e){if(n===e)return!0;const t=Tc(n);if(t!==Tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return s_(n).isEqual(s_(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const c=ia(s.timestampValue),m=ia(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,Ic(n.bytesValue).isEqual(Ic(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return Jr(s.geoPointValue.latitude)===Jr(u.geoPointValue.latitude)&&Jr(s.geoPointValue.longitude)===Jr(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return Jr(s.integerValue)===Jr(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const c=Jr(s.doubleValue),m=Jr(u.doubleValue);return c===m?ef(c)===ef(m):isNaN(c)&&isNaN(m)}return!1}(n,e);case 9:return Iu(n.arrayValue.values||[],e.arrayValue.values||[],wu);case 10:return function(s,u){const c=s.mapValue.fields||{},m=u.mapValue.fields||{};if(Ew(c)!==Ew(m))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===m[_]||!wu(c[_],m[_])))return!1;return!0}(n,e);default:return gt()}var u}function xd(n,e){return void 0!==(n.values||[]).find(t=>wu(t,e))}function Is(n,e){if(n===e)return 0;const t=Tc(n),r=Tc(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(u,c){const m=Jr(u.integerValue||u.doubleValue),_=Jr(c.integerValue||c.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(n,e);case 3:return rf(n.timestampValue,e.timestampValue);case 4:return rf(s_(n),s_(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(u,c){const m=Ic(u),_=Ic(c);return m.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(u,c){const m=u.split("/"),_=c.split("/");for(let C=0;C<m.length&&C<_.length;C++){const P=Gt(m[C],_[C]);if(0!==P)return P}return Gt(m.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,c){const m=Gt(Jr(u.latitude),Jr(c.latitude));return 0!==m?m:Gt(Jr(u.longitude),Jr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,c){const m=u.values||[],_=c.values||[];for(let C=0;C<m.length&&C<_.length;++C){const P=Is(m[C],_[C]);if(P)return P}return Gt(m.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,c){if(u===wc.mapValue&&c===wc.mapValue)return 0;if(u===wc.mapValue)return 1;if(c===wc.mapValue)return-1;const m=u.fields||{},_=Object.keys(m),C=c.fields||{},P=Object.keys(C);_.sort(),P.sort();for(let k=0;k<_.length&&k<P.length;++k){const G=Gt(_[k],P[k]);if(0!==G)return G;const J=Is(m[_[k]],C[P[k]]);if(0!==J)return J}return Gt(_.length,P.length)}(n.mapValue,e.mapValue);default:throw gt()}}function rf(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=ia(n),r=ia(e),s=Gt(t.seconds,r.seconds);return 0!==s?s:Gt(t.nanos,r.nanos)}function Md(n){return a_(n)}function a_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ia(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const u of t.values||[])s?s=!1:r+=",",r+=a_(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",u=!0;for(const c of r)u?u=!1:s+=",",s+=`${c}:${a_(t.fields[c])}`;return s+"}"}(n.mapValue):gt()}function sf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ww(n){return!!n&&"integerValue"in n}function u_(n){return!!n&&"arrayValue"in n}function l_(n){return!!n&&"nullValue"in n}function c_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ov(n){return!!n&&"mapValue"in n}function d_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ao(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=d_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=d_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function kA(n){return"nullValue"in n?o_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sf(Tl.empty(),st.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function LA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sf(Tl.empty(),st.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wc:gt()}function Tw(n,e){const t=Is(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Cw(n,e){const t=Is(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fi{constructor(e){this.value=e}static empty(){return new Fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ov(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=d_(t)}setAll(e){let t=jn.emptyPath(),r={},s=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=m.popLast()}c?r[m.lastSegment()]=d_(c):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Ov(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ov(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ao(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Fi(d_(this.value))}}function ag(n){const e=[];return Ao(n.fields,(t,r)=>{const s=new jn([t]);if(Ov(r)){const u=ag(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new uo(e)}class Ar{constructor(e,t,r,s,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Ar(e,0,Dt.min(),Dt.min(),Dt.min(),Fi.empty(),0)}static newFoundDocument(e,t,r,s){return new Ar(e,1,t,Dt.min(),r,s,0)}static newNoDocument(e,t){return new Ar(e,2,t,Dt.min(),Dt.min(),Fi.empty(),0)}static newUnknownDocument(e,t){return new Ar(e,3,t,Dt.min(),Dt.min(),Fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tu{constructor(e,t){this.position=e,this.inclusive=t}}function Dw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?st.comparator(st.fromName(c.referenceValue),t.key):Is(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Nd(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wu(n.position[t],e.position[t]))return!1;return!0}class ug{constructor(e,t="asc"){this.field=e,this.dir=t}}function FA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class h_{}class _n extends h_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new bw(e,t,r):"array-contains"===t?new UA(e,r):"in"===t?new jv(e,r):"not-in"===t?new Rw(e,r):"array-contains-any"===t?new f_(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Sw(e,r):new Uv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Is(t,this.value)):null!==t&&Tc(this.value)===Tc(t)&&this.matchesComparison(Is(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends h_{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Jn(e,t)}matches(e){return af(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function af(n){return"and"===n.op}function Lv(n){return"or"===n.op}function Fv(n){return Vv(n)&&af(n)}function Vv(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function Aw(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+Md(n.value);if(Fv(n))return n.filters.map(e=>Aw(e)).join(",");{const e=n.filters.map(t=>Aw(t)).join(",");return`${n.op}(${e})`}}function VA(n,e){return n instanceof _n?(r=n,(s=e)instanceof _n&&r.op===s.op&&r.field.isEqual(s.field)&&wu(r.value,s.value)):n instanceof Jn?function(r,s){return s instanceof Jn&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((u,c,m)=>u&&VA(c,s.filters[m]),!0)}(n,e):void gt();var r,s}function uf(n,e){const t=n.filters.concat(e);return Jn.create(t,n.op)}function lf(n){return n instanceof _n?`${(t=n).field.canonicalString()} ${t.op} ${Md(t.value)}`:n instanceof Jn?function(t){return t.op.toString()+" {"+t.getFilters().map(lf).join(" ,")+"}"}(n):"Filter";var t}class bw extends _n{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sw extends _n{constructor(e,t){super(e,"in",t),this.keys=Bv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Uv extends _n{constructor(e,t){super(e,"not-in",t),this.keys=Bv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>st.fromName(r.referenceValue))}class UA extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return u_(t)&&xd(t.arrayValue,this.value)}}class jv extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xd(this.value.arrayValue,t)}}class Rw extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xd(this.value.arrayValue,t)}}class f_ extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!u_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}}class YP{constructor(e,t=null,r=[],s=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=m,this.ce=null}}function lg(n,e=null,t=[],r=[],s=null,u=null,c=null){return new YP(n,e,t,r,s,u,c)}function Od(n){const e=nt(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Aw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(u=r).field.canonicalString()+u.dir;var u}).join(","),wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Md(r)).join(",")),e.ce=t}return e.ce}function kd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nd(n.startAt,e.startAt)&&Nd(n.endAt,e.endAt)}function cg(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dg(n,e){return n.filters.filter(t=>t instanceof _n&&t.field.isEqual(e))}function Cc(n,e,t){let r=o_,s=!0;for(const u of dg(n,e)){let c=o_,m=!0;switch(u.op){case"<":case"<=":c=kA(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=o_}Tw({value:r,inclusive:s},{value:c,inclusive:m})<0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Tw({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Pw(n,e,t){let r=wc,s=!0;for(const u of dg(n,e)){let c=wc,m=!0;switch(u.op){case">=":case">":c=LA(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=wc}Cw({value:r,inclusive:s},{value:c,inclusive:m})>0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Cw({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class ka{constructor(e,t=null,r=[],s=[],u=null,c="F",m=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=_,this.le=null,this.he=null,this.Pe=null}}function hg(n,e,t,r,s,u,c,m){return new ka(n,e,t,r,s,u,c,m)}function cf(n){return new ka(n)}function p_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function df(n){return null!==n.collectionGroup}function js(n){const e=nt(n);if(null===e.le){e.le=[];const t=new Set;for(const u of e.explicitOrderBy)e.le.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Qn(jn.comparator);return c.filters.forEach(_=>{_.getFlattenedFilters().forEach(C=>{C.isInequality()&&(m=m.add(C.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.le.push(new ug(u,r))}),t.has(jn.keyField().canonicalString())||e.le.push(new ug(jn.keyField(),r))}return e.le}function yi(n){const e=nt(n);return e.he||(e.he=function g_(n,e){if("F"===n.limitType)return lg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new ug(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new Tu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Tu(n.startAt.position,n.startAt.inclusive):null;return lg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,js(n))),e.he}function Hv(n,e){const t=n.filters.concat([e]);return new ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function m_(n,e,t){return new ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return kd(yi(n),yi(e))&&n.limitType===e.limitType}function Ld(n){return`${Od(yi(n))}|lt:${n.limitType}`}function ff(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>lf(s)).join(", ")}]`),wl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Md(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Md(s)).join(",")),`Target(${r})`}(yi(n))}; limitType=${n.limitType})`}function fg(n,e){return e.isFoundDocument()&&function(r,s){const u=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):st.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,e)&&function(r,s){for(const u of js(r))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(r,s){for(const u of r.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(c,m,_){const C=Dw(c,m,_);return c.inclusive?C<=0:C<0}(r.startAt,js(r),s)||r.endAt&&!function(c,m,_){const C=Dw(c,m,_);return c.inclusive?C>=0:C>0}(r.endAt,js(r),s)));var r,s}function xw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function __(n){return(e,t)=>{let r=!1;for(const s of js(n)){const u=Mw(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Mw(n,e,t){const r=n.field.isKeyField()?st.comparator(e.key,t.key):function(u,c,m){const _=c.data.field(u),C=m.data.field(u);return null!==_&&null!==C?Is(_,C):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}class Cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return ig(this.inner)}size(){return this.innerSize}}const Nw=new or(st.comparator);function ws(){return Nw}const BA=new or(st.comparator);function y_(...n){let e=BA;for(const t of n)e=e.insert(t.key,t);return e}function Ow(n){let e=BA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cu(){return v_()}function jA(){return v_()}function v_(){return new Cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const E_=new or(st.comparator),HA=new Qn(st.comparator);function sn(...n){let e=HA;for(const t of n)e=e.add(t);return e}const $v=new Qn(Gt);function Dc(){return $v}function I_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function w_(n){return{integerValue:""+n}}function pf(n,e){return Xp(e)?w_(e):I_(n,e)}class Fd{constructor(){this._=void 0}}function gf(n,e,t){return n instanceof Dl?function(s,u){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&Mv(u)&&(u=Nv(u)),u&&(c.fields.__previous_value__=u),{mapValue:c}}(t,e):n instanceof mf?C_(n,e):n instanceof La?kw(n,e):function(s,u){const c=T_(s,u),m=Lw(c)+Lw(s.Ie);return ww(c)&&ww(s.Ie)?w_(m):I_(s.serializer,m)}(n,e)}function Gv(n,e,t){return n instanceof mf?C_(n,e):n instanceof La?kw(n,e):t}function T_(n,e){return n instanceof Vd?ww(r=e)||(u=r)&&"doubleValue"in u?e:{integerValue:0}:null;var r,u}class Dl extends Fd{}class mf extends Fd{constructor(e){super(),this.elements=e}}function C_(n,e){const t=Fw(e);for(const r of n.elements)t.some(s=>wu(s,r))||t.push(r);return{arrayValue:{values:t}}}class La extends Fd{constructor(e){super(),this.elements=e}}function kw(n,e){let t=Fw(e);for(const r of n.elements)t=t.filter(s=>!wu(s,r));return{arrayValue:{values:t}}}class Vd extends Fd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Lw(n){return Jr(n.integerValue||n.doubleValue)}function Fw(n){return u_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ud{constructor(e,t){this.field=e,this.transform=t}}class $A{constructor(e,t){this.version=e,this.transformResults=t}}class Or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class D_{}function pg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new mg(n.key,Or.none()):new Al(n.key,n.data,Or.none());{const t=n.data,r=Fi.empty();let s=new Qn(jn.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new bl(n.key,r,new uo(s.toArray()),Or.none())}}function qv(n,e,t){n instanceof Al?function(s,u,c){const m=s.value.clone(),_=Bw(s.fieldTransforms,u,c.transformResults);m.setAll(_),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):n instanceof bl?function(s,u,c){if(!zv(s.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Bw(s.fieldTransforms,u,c.transformResults),_=u.data;_.setAll(Wv(s)),_.setAll(m),u.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gg(n,e,t,r){return n instanceof Al?function(u,c,m,_){if(!zv(u.precondition,c))return m;const C=u.value.clone(),P=Zv(u.fieldTransforms,_,c);return C.setAll(P),c.convertToFoundDocument(c.version,C).setHasLocalMutations(),null}(n,e,t,r):n instanceof bl?function(u,c,m,_){if(!zv(u.precondition,c))return m;const C=Zv(u.fieldTransforms,_,c),P=c.data;return P.setAll(Wv(u)),P.setAll(C),c.convertToFoundDocument(c.version,P).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(k=>k.field))}(n,e,t,r):(m=t,zv(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m);var c,m}function Uw(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=T_(r.transform,s||null);null!=u&&(null===t&&(t=Fi.empty()),t.set(r.field,u))}return t||null}function A_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&Iu(r,s,(u,c)=>function Vw(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof mf&&s instanceof mf||r instanceof La&&s instanceof La?Iu(r.elements,s.elements,wu):r instanceof Vd&&s instanceof Vd?wu(r.Ie,s.Ie):r instanceof Dl&&s instanceof Dl);var r,s}(u,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class Al extends D_{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bl extends D_{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Wv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bw(n,e,t){const r=new Map;Rt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,m=e.data.field(u.field);r.set(u.field,Gv(c,m,t[s]))}return r}function Zv(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,gf(u,c,e))}return r}class mg extends D_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kv extends D_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _f{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&qv(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jA();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(s.key)?null:m;const _=pg(c,m);null!==_&&r.set(s.key,_),c.isValidDocument()||c.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&Iu(this.mutations,e.mutations,(t,r)=>A_(t,r))&&Iu(this.baseMutations,e.baseMutations,(t,r)=>A_(t,r))}}class Yv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Rt(e.mutations.length===r.length);let s=E_;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new Yv(e,t,r,s)}}class Ac{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class GA{constructor(e,t){this.count=e,this.unchangedNames=t}}var ai,Sn;function jw(n){switch(n){default:return gt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function Hw(n){if(void 0===n)return sr("GRPC error has no .code"),we.UNKNOWN;switch(n){case ai.OK:return we.OK;case ai.CANCELLED:return we.CANCELLED;case ai.UNKNOWN:return we.UNKNOWN;case ai.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case ai.INTERNAL:return we.INTERNAL;case ai.UNAVAILABLE:return we.UNAVAILABLE;case ai.UNAUTHENTICATED:return we.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case ai.NOT_FOUND:return we.NOT_FOUND;case ai.ALREADY_EXISTS:return we.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return we.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case ai.ABORTED:return we.ABORTED;case ai.OUT_OF_RANGE:return we.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return we.UNIMPLEMENTED;case ai.DATA_LOSS:return we.DATA_LOSS;default:return gt()}}(Sn=ai||(ai={}))[Sn.OK=0]="OK",Sn[Sn.CANCELLED=1]="CANCELLED",Sn[Sn.UNKNOWN=2]="UNKNOWN",Sn[Sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sn[Sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sn[Sn.NOT_FOUND=5]="NOT_FOUND",Sn[Sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sn[Sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sn[Sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sn[Sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sn[Sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sn[Sn.ABORTED=10]="ABORTED",Sn[Sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sn[Sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sn[Sn.INTERNAL=13]="INTERNAL",Sn[Sn.UNAVAILABLE=14]="UNAVAILABLE",Sn[Sn.DATA_LOSS=15]="DATA_LOSS";function Qv(){return new TextEncoder}const Jv=new vl([4294967295,4294967295],0);function zA(n){const e=Qv().encode(n),t=new Eu;return t.update(e),new Uint8Array(t.digest())}function b_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new vl([t,r],0),new vl([s,u],0)]}class S_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vg(`Invalid padding: ${t}`);if(r<0)throw new vg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new vg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new vg(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=vl.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(vl.fromNumber(r)));return 1===s.compare(Jv)&&(s=new vl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=zA(e),[r,s]=b_(t);for(let u=0;u<this.hashCount;u++){const c=this.de(r,s,u);if(!this.Ae(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new S_(u,s,t);return r.forEach(m=>c.insert(m)),c}insert(e){if(0===this.Te)return;const t=zA(e),[r,s]=b_(t);for(let u=0;u<this.hashCount;u++){const c=this.de(r,s,u);this.Re(c)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class vg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Eg{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,yf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Eg(Dt.min(),s,new or(Gt),ws(),sn())}}class yf{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yf(r,t,sn(),sn(),sn())}}class R_{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class Xv{constructor(e,t){this.targetId=e,this.fe=t}}class $w{constructor(e,t,r=bi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Gw{constructor(){this.ge=0,this.pe=tE(),this.ye=bi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=sn(),t=sn(),r=sn();return this.pe.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:gt()}}),new yf(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=tE()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class QP{constructor(e){this.Le=e,this.ke=new Map,this.qe=ws(),this.Qe=eE(),this.Ke=new or(Gt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const u=s.target;if(cg(u))if(0===r){const c=new st(u.path);this.We(t,c,Ar.newNoDocument(c,Dt.min()))}else Rt(1===r);else{const c=this.Ze(t);if(c!==r){const m=this.Xe(e),_=m?this.et(m,e,c):1;0!==_&&(this.He(t),this.Ke=this.Ke.insert(t,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:u=0}=t;let c,m;try{c=Ic(r).toUint8Array()}catch(_){if(_ instanceof Iw)return Yi("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new S_(c,s,u)}catch(_){return Yi(_ instanceof vg?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return 0===m.Te?null:m}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(u=>{const c=this.Le.nt(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.We(t,u,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((u,c)=>{const m=this.Ye(c);if(m){if(u.current&&cg(m.target)){const _=new st(m.target.path);null!==this.qe.get(_)||this.st(c,_)||this.We(c,_,Ar.newNoDocument(_,e))}u.De&&(t.set(c,u.ve()),u.Fe())}});let r=sn();this.Qe.forEach((u,c)=>{let m=!0;c.forEachWhile(_=>{const C=this.Ye(_);return!C||"TargetPurposeLimboResolution"===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.qe.forEach((u,c)=>c.setReadTime(e));const s=new Eg(e,t,this.Ke,this.qe,r);return this.qe=ws(),this.Qe=eE(),this.Ke=new or(Gt),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Gw,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Qn(Gt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Gw),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function eE(){return new or(st.comparator)}function tE(){return new or(st.comparator)}const Fa={asc:"ASCENDING",desc:"DESCENDING"},zw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JP={and:"AND",or:"OR"};class nE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Du(n,e){return n.useProto3Json||wl(e)?e:{value:e}}function bc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XP(n,e){return bc(n,e.toTimestamp())}function ui(n){return Rt(!!n),Dt.fromTimestamp(function(t){const r=ia(t);return new bn(r.seconds,r.nanos)}(n))}function Ig(n,e){return(r=n,new mn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Va(n){const e=mn.fromString(n);return Rt(x_(e)),e}function vf(n,e){return Ig(n.databaseId,e.path)}function Au(n,e){const t=Va(e);if(t.get(1)!==n.databaseId.projectId)throw new We(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new We(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(P_(t))}function Ww(n,e){return Ig(n.databaseId,e)}function Si(n){const e=Va(n);return 4===e.length?mn.emptyPath():P_(e)}function wg(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P_(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Zw(n,e,t){return{name:vf(n,e),fields:t.value.mapValue.fields}}function Kw(n,e,t){const r=Au(n,e.name),s=ui(e.updateTime),u=e.createTime?ui(e.createTime):Dt.min(),c=new Fi({mapValue:{fields:e.fields}}),m=Ar.newFoundDocument(r,s,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Ef(n,e){let t;if(e instanceof Al)t={update:Zw(n,e.key,e.value)};else if(e instanceof mg)t={delete:vf(n,e.key)};else if(e instanceof bl)t={update:Zw(n,e.key,e.data),updateMask:Xw(e.fieldMask)};else{if(!(e instanceof Kv))return gt();t={verify:vf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const m=c.transform;if(m instanceof Dl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof mf)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof La)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Vd)return{fieldPath:c.field.canonicalString(),increment:m.Ie};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:XP(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:gt()),t;var u}function iE(n,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Or.updateTime(ui(u.updateTime)):void 0!==u.exists?Or.exists(u.exists):Or.none():Or.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(c,m){let _=null;"setToServerValue"in m?(Rt("REQUEST_TIME"===m.setToServerValue),_=new Dl):"appendMissingElements"in m?_=new mf(m.appendMissingElements.values||[]):"removeAllFromArray"in m?_=new La(m.removeAllFromArray.values||[]):"increment"in m?_=new Vd(c,m.increment):gt();const C=jn.fromServerFormat(m.fieldPath);return new Ud(C,_)}(n,s)):[];var u;if(e.update){const s=Au(n,e.update.name),u=new Fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new uo((e.updateMask.fieldPaths||[]).map(P=>jn.fromServerFormat(P)));return new bl(s,u,c,t,r)}return new Al(s,u,t,r)}if(e.delete){const s=Au(n,e.delete);return new mg(s,t)}if(e.verify){const s=Au(n,e.verify);return new Kv(s,t)}return gt()}function sE(n,e){return{documents:[Ww(n,e.path)]}}function oE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ww(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ww(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return uE(Jn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(C=>{return{field:Sc((k=C).field),direction:If(k.dir)};var k})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=Du(n,e.limit);return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),t;var _}function Jw(n){let e=Si(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Rt(1===r);const P=t.from[0];P.allDescendants?s=P.collectionId:e=e.child(P.collectionId)}let u=[];t.where&&(u=function(k){const G=aE(k);return G instanceof Jn&&Fv(G)?G.getFilters():[G]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(G=>{return new ug(Tf((he=G).field),function(Ne){switch(Ne){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(he.direction));var he}));let m=null;t.limit&&(m=function(k){let G;return G="object"==typeof k?k.value:k,wl(G)?null:G}(t.limit));let _=null;var k;t.startAt&&(_=new Tu((k=t.startAt).values||[],!!k.before));let C=null;return t.endAt&&(C=function(k){return new Tu(k.values||[],!k.before)}(t.endAt)),hg(e,s,c,u,m,"F",_,C)}function aE(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tf(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Tf(t.unaryFilter.field);return _n.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Tf(t.unaryFilter.field);return _n.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Tf(t.unaryFilter.field);return _n.create(c,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?_n.create(Tf((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jn.create(t.compositeFilter.filters.map(r=>aE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return gt()}}(t.compositeFilter.op))}(n):gt();var t}function If(n){return Fa[n]}function Sl(n){return zw[n]}function wf(n){return JP[n]}function Sc(n){return{fieldPath:n.canonicalString()}}function Tf(n){return jn.fromServerFormat(n.fieldPath)}function uE(n){return n instanceof _n?function(t){if("=="===t.op){if(c_(t.value))return{unaryFilter:{field:Sc(t.field),op:"IS_NAN"}};if(l_(t.value))return{unaryFilter:{field:Sc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(c_(t.value))return{unaryFilter:{field:Sc(t.field),op:"IS_NOT_NAN"}};if(l_(t.value))return{unaryFilter:{field:Sc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sc(t.field),op:Sl(t.op),value:t.value}}}(n):n instanceof Jn?function(t){const r=t.getFilters().map(s=>uE(s));return 1===r.length?r[0]:{compositeFilter:{op:wf(t.op),filters:r}}}(n):gt()}function Xw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function x_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class bo{constructor(e,t,r,s,u=Dt.min(),c=Dt.min(),m=bi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Tg{constructor(e){this.ut=e}}function lE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:M_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vf(u=n.ut,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:bc(u,c.version.toTimestamp()),createTime:bc(u,c.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bd(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Bd(e.version)}}var u,c;return r}function M_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(n){const e=new bn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Hd(n,e){const t=(e.baseMutations||[]).map(u=>iE(n.ut,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>iE(n.ut,u)),s=bn.fromMillis(e.localWriteTimeMs);return new _f(e.batchId,s,t,r)}function Cf(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):Dt.min();let r;return r=void 0!==n.query.documents?(Rt(1===(u=n.query).documents.length),yi(cf(Si(u.documents[0])))):function(u){return yi(Jw(u))}(n.query),new bo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,bi.fromBase64String(n.resumeToken));var u}function WA(n,e){const t=Bd(e.snapshotVersion),r=Bd(e.lastLimboFreeSnapshotVersion);let s;s=cg(e.target)?sE(n.ut,e.target):oE(n.ut,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Od(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function cE(n){const e=Jw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?m_(e,e.limit,"L"):e}function tT(n,e){return new Ac(e.largestBatchId,iE(n.ut,e.overlayMutation))}function ZA(n,e){const t=e.path.lastSegment();return[n,Es(e.path.popLast()),t]}function dE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bd(r.readTime),documentKey:Es(r.documentKey.path),largestBatchId:r.largestBatchId}}class nT{getBundleMetadata(e,t){return KA(e).get(t).next(r=>{if(r)return{id:(u=r).bundleId,createTime:jd(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return KA(e).put({bundleId:(s=t).id,createTime:Bd(ui(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Cg(e).get(t).next(r=>{if(r)return{name:(u=r).name,query:cE(u.bundledQuery),readTime:jd(u.readTime)};var u})}saveNamedQuery(e,t){return Cg(e).put({name:(s=t).name,readTime:Bd(ui(s.readTime)),bundledQuery:s.bundledQuery});var s}}function KA(n){return _i(n,"bundles")}function Cg(n){return _i(n,"namedQueries")}class Dg{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new Dg(e,t.uid||"")}getOverlay(e,t){return Df(e).get(ZA(this.userId,t)).next(r=>r?tT(this.serializer,r):null)}getOverlays(e,t){const r=Cu();return ae.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const m=new Ac(t,c);s.push(this.lt(e,m))}),ae.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(Es(c.getCollectionPath())));const u=[];return s.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Df(e).H("collectionPathOverlayIndex",m))}),ae.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Cu(),u=Es(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Df(e).W("collectionPathOverlayIndex",c).next(m=>{for(const _ of m){const C=tT(this.serializer,_);s.set(C.getKey(),C)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Cu();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Df(e).Y({index:"collectionGroupOverlayIndex",range:m},(_,C,P)=>{const k=tT(this.serializer,C);u.size()<s||k.largestBatchId===c?(u.set(k.getKey(),k),c=k.largestBatchId):P.done()}).next(()=>u)}lt(e,t){return Df(e).put(function(s,u,c){const[m,_,C]=ZA(u,c.mutation.key);return{userId:u,collectionPath:_,documentId:C,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Ef(s.ut,c.mutation)}}(this.serializer,this.userId,t))}}function Df(n){return _i(n,"documentOverlays")}class $d{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Jr(e.integerValue));else if("doubleValue"in e){const r=Jr(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),ef(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Ic(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?kv(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):gt()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const s of Object.keys(r))this.At(s,t),this.Pt(r[s],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const s of r)this.Pt(s,t)}ft(e,t){this.Tt(t,37),st.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function rT(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function hE(n){const e=64-function(r){let s=0;for(let u=0;u<8;++u){const c=rT(255&r[u]);if(s+=c,8!==c)break}return s}(n);return Math.ceil(e/8)}$d.St=new $d;class on{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Dt(r.value),r=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const s=t.codePointAt(0);this.Dt(240|s>>>18),this.Dt(128|63&s>>>12),this.Dt(128|63&s>>>6),this.Dt(128|63&s)}}this.Ct()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Nt(e){const t=this.Bt(e),r=hE(t);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}kt(e){const t=this.Bt(e),r=hE(t);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class iT{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class sT{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class bu{constructor(){this.Wt=new on,this.Gt=new iT(this.Wt),this.zt=new sT(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Rc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Rc(this.indexId,this.documentKey,this.arrayValue,r)}}function Pc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ag(n.arrayValue,e.arrayValue),0!==t?t:(t=Ag(n.directionalValue,e.directionalValue),0!==t?t:st.comparator(n.documentKey,e.documentKey)))}function Ag(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Gd{constructor(e){this.Jt=new Qn((t,r)=>jn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Rt(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Qp(e);if(void 0!==t&&!this.tn(t))return!1;const r=Il(e);let s=new Set,u=0,c=0;for(;u<r.length&&this.tn(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.Jt.size>0){const m=this.Jt.getIterator().getNext();if(!s.has(m.field.canonicalString())){const _=r[u];if(!this.nn(m,_)||!this.rn(this.Yt[c++],_))return!1}++u}for(;u<r.length;++u)if(c>=this.Yt.length||!this.rn(this.Yt[c++],r[u]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Qn(jn.comparator);const t=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new h(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new h(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new h(r.field,"asc"===r.dir?0:1)));return new ra(ra.UNKNOWN_ID,this.collectionId,t,E.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function N_(n){var e,t;if(Rt(n instanceof _n||n instanceof Jn),n instanceof _n){if(n instanceof jv){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>_n.create(n.field,"==",u)))||[];return Jn.create(s,"or")}return n}const r=n.filters.map(s=>N_(s));return Jn.create(r,n.op)}function bg(n){if(0===n.getFilters().length)return[];const e=Rg(N_(n));return Rt(k_(e)),O_(e)||Sg(e)?[e]:e.getFilters()}function O_(n){return n instanceof _n}function Sg(n){return n instanceof Jn&&Fv(n)}function k_(n){return O_(n)||Sg(n)||function(t){if(t instanceof Jn&&Lv(t)){for(const r of t.getFilters())if(!O_(r)&&!Sg(r))return!1;return!0}return!1}(n)}function Rg(n){if(Rt(n instanceof _n||n instanceof Jn),n instanceof _n)return n;if(1===n.filters.length)return Rg(n.filters[0]);const e=n.filters.map(r=>Rg(r));let t=Jn.create(e,n.op);return t=V_(t),k_(t)?t:(Rt(t instanceof Jn),Rt(af(t)),Rt(t.filters.length>1),t.filters.reduce((r,s)=>L_(r,s)))}function L_(n,e){let t;return Rt(n instanceof _n||n instanceof Jn),Rt(e instanceof _n||e instanceof Jn),t=n instanceof _n?e instanceof _n?Jn.create([n,e],"and"):F_(n,e):e instanceof _n?F_(e,n):function(s,u){if(Rt(s.filters.length>0&&u.filters.length>0),af(s)&&af(u))return uf(s,u.getFilters());const c=Lv(s)?s:u,m=Lv(s)?u:s,_=c.filters.map(C=>L_(C,m));return Jn.create(_,"or")}(n,e),V_(t)}function F_(n,e){if(af(e))return uf(e,n.getFilters());{const t=e.filters.map(r=>L_(n,r));return Jn.create(t,"or")}}function V_(n){if(Rt(n instanceof _n||n instanceof Jn),n instanceof _n)return n;const e=n.getFilters();if(1===e.length)return V_(e[0]);if(Vv(n))return n;const t=e.map(s=>V_(s)),r=[];return t.forEach(s=>{s instanceof _n?r.push(s):s instanceof Jn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Jn.create(r,n.op)}class YA{constructor(){this.on=new fE}addToCollectionParentIndex(e,t){return this.on.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(ee.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(ee.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class fE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Qn(mn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qn(mn.comparator)).toArray()}}const Pg=new Uint8Array(0);class QA{constructor(e,t){this.user=e,this.databaseId=t,this._n=new fE,this.an=new Cl(r=>Od(r),(r,s)=>kd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const u={collectionId:r,parent:Es(s)};return oT(e).put(u)}return ae.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Kp(t),""],!1,!0);return oT(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Oa(c.parent))}return r})}addFieldIndex(e,t){const r=xg(e),s={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(_=>[_.fieldPath.canonicalString(),_.kind])};var m;delete s.indexId;const u=r.add(s);if(t.indexState){const c=zd(e);return u.next(m=>{c.put(dE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=xg(e),s=zd(e),u=Af(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=xg(e),r=Af(e),s=zd(e);return t.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,t){return ae.forEach(this.un(t),r=>this.getIndexType(e,r).next(s=>{if(0===s||1===s){const u=new Gd(r).sn();if(null!=u)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=Af(e);let s=!0;const u=new Map;return ae.forEach(this.un(t),c=>this.cn(e,c).next(m=>{s&&(s=!!m),u.set(c,m)})).next(()=>{if(s){let c=sn();const m=[];return ae.forEach(u,(_,C)=>{var Qe;qe("IndexedDbIndexManager",`Using index ${Qe=_,`id=${Qe.indexId}|cg=${Qe.collectionGroup}|f=${Qe.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${Od(t)}`);const P=function(Qe,Ct){const Xt=Qp(Ct);if(void 0===Xt)return null;for(const En of dg(Qe,Xt.fieldPath))switch(En.op){case"array-contains-any":return En.value.arrayValue.values||[];case"array-contains":return[En.value]}return null}(C,_),k=function(Qe,Ct){const Xt=new Map;for(const En of Il(Ct))for(const ei of dg(Qe,En.fieldPath))switch(ei.op){case"==":case"in":Xt.set(En.fieldPath.canonicalString(),ei.value);break;case"not-in":case"!=":return Xt.set(En.fieldPath.canonicalString(),ei.value),Array.from(Xt.values())}return null}(C,_),G=function(Qe,Ct){const Xt=[];let En=!0;for(const ei of Il(Ct)){const fo=0===ei.kind?Cc(Qe,ei.fieldPath,Qe.startAt):Pw(Qe,ei.fieldPath,Qe.startAt);Xt.push(fo.value),En&&(En=fo.inclusive)}return new Tu(Xt,En)}(C,_),J=function(Qe,Ct){const Xt=[];let En=!0;for(const ei of Il(Ct)){const fo=0===ei.kind?Pw(Qe,ei.fieldPath,Qe.endAt):Cc(Qe,ei.fieldPath,Qe.endAt);Xt.push(fo.value),En&&(En=fo.inclusive)}return new Tu(Xt,En)}(C,_),he=this.ln(_,C,G),Re=this.ln(_,C,J),Ne=this.hn(_,C,k),ht=this.Pn(_.indexId,P,he,G.inclusive,Re,J.inclusive,Ne);return ae.forEach(ht,mt=>r.j(mt,t.limit).next(Qe=>{Qe.forEach(Ct=>{const Xt=st.fromSegments(Ct.documentKey);c.has(Xt)||(c=c.add(Xt),m.push(Xt))})}))}).next(()=>m)}return ae.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:bg(Jn.create(e.filters,"and")).map(r=>lg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,r,s,u,c,m){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),C=_/(null!=t?t.length:1),P=[];for(let k=0;k<_;++k){const G=t?this.In(t[k/C]):Pg,J=this.Tn(e,G,r[k%C],s),he=this.En(e,G,u[k%C],c),Re=m.map(Ne=>this.Tn(e,G,Ne,!0));P.push(...this.createRange(J,he,Re))}return P}Tn(e,t,r,s){const u=new Rc(e,st.empty(),t,r);return s?u:u.Ht()}En(e,t,r,s){const u=new Rc(e,st.empty(),t,r);return s?u.Ht():u}cn(e,t){const r=new Gd(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const m of u)r.en(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;const s=this.un(t);return ae.forEach(s,u=>this.cn(e,u).next(c=>{c?0!==r&&c.fields.length<function(_){let C=new Qn(jn.comparator),P=!1;for(const k of _.filters)for(const G of k.getFlattenedFilters())G.field.isKeyField()||("array-contains"===G.op||"array-contains-any"===G.op?P=!0:C=C.add(G.field));for(const k of _.orderBy)k.field.isKeyField()||(C=C.add(k.field));return C.size+(P?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}dn(e,t){const r=new bu;for(const s of Il(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.jt(s.kind);$d.St.ht(u,c)}return r.Ut()}In(e){const t=new bu;return $d.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const r=new bu;return $d.St.ht(sf(this.databaseId,t),r.jt(function(u){const c=Il(u);return 0===c.length?0:c[c.length-1].kind}(e))),r.Ut()}hn(e,t,r){if(null===r)return[];let s=[];s.push(new bu);let u=0;for(const c of Il(e)){const m=r[u++];for(const _ of s)if(this.Rn(t,c.fieldPath)&&u_(m))s=this.Vn(s,c,m);else{const C=_.jt(c.kind);$d.St.ht(m,C)}}return this.mn(s)}ln(e,t,r){return this.hn(e,t,r.position)}mn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ut();return t}Vn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of s){const _=new bu;_.seed(m.Ut()),$d.St.ht(c,_.jt(t.kind)),u.push(_)}return u}Rn(e,t){return!!e.filters.find(r=>r instanceof _n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=xg(e),s=zd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return ae.forEach(u,m=>s.get([m.indexId,this.uid]).next(_=>{c.push(function(P,k){const G=k?new E(k.sequenceNumber,new ee(jd(k.readTime),new st(Oa(k.documentKey)),k.largestBatchId)):E.empty(),J=P.fields.map(([he,Re])=>new h(jn.fromServerFormat(he),Re));return new ra(P.indexId,P.collectionGroup,J,G)}(m,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=xg(e),u=zd(e);return this.fn(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ae.forEach(m,_=>u.put(dE(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ae.forEach(m,_=>this.gn(e,s,_).next(C=>{const P=this.pn(u,_);return C.isEqual(P)?ae.resolve():this.yn(e,u,_,C,P)}))))})}wn(e,t,r,s){return Af(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.An(r,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,r,s){return Af(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.An(r,t.key),t.key.path.toArray()])}gn(e,t,r){const s=Af(e);let u=new Qn(Pc);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,t)])},(c,m)=>{u=u.add(new Rc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}pn(e,t){let r=new Qn(Pc);const s=this.dn(t,e);if(null==s)return r;const u=Qp(t);if(null!=u){const c=e.data.field(u.fieldPath);if(u_(c))for(const m of c.arrayValue.values||[])r=r.add(new Rc(t.indexId,e.key,this.In(m),s))}else r=r.add(new Rc(t.indexId,e.key,Pg,s));return r}yn(e,t,r,s,u){qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(_,C,P,k,G){const J=_.getIterator(),he=C.getIterator();let Re=nf(J),Ne=nf(he);for(;Re||Ne;){let ht=!1,mt=!1;if(Re&&Ne){const Qe=P(Re,Ne);Qe<0?mt=!0:Qe>0&&(ht=!0)}else null!=Re?mt=!0:ht=!0;ht?(k(Ne),Ne=nf(he)):mt?(G(Re),Re=nf(J)):(Re=nf(J),Ne=nf(he))}}(s,u,Pc,m=>{c.push(this.wn(e,t,r,m))},m=>{c.push(this.Sn(e,t,r,m))}),ae.waitFor(c)}fn(e){let t=1;return zd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Pc(c,m)).filter((c,m,_)=>!m||0!==Pc(c,_[m-1]));const s=[];s.push(e);for(const c of r){const m=Pc(c,e),_=Pc(c,t);if(0===m)s[0]=e.Ht();else if(m>0&&_<0)s.push(c),s.push(c.Ht());else if(_>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2){if(this.bn(s[c],s[c+1]))return[];u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,Pg,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,Pg,[]]))}return u}bn(e,t){return Pc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pE)}getMinOffset(e,t){return ae.mapArray(this.un(t),r=>this.cn(e,r).next(s=>s||gt())).next(pE)}}function oT(n){return _i(n,"collectionParents")}function Af(n){return _i(n,"indexEntries")}function xg(n){return _i(n,"indexConfiguration")}function zd(n){return _i(n,"indexState")}function pE(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;ce(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ee(e.readTime,e.documentKey,t)}const aT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ts(e,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lo(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const _=r.Y({range:c},(P,k,G)=>(m++,G.delete()));u.push(_.next(()=>{Rt(1===m)}));const C=[];for(const P of t.mutations){const k=tg(e,P.key.path,t.batchId);u.push(s.delete(k)),C.push(P.key)}return ae.waitFor(u).next(()=>C)}function U_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}Ts.DEFAULT_COLLECTION_PERCENTILE=10,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ts.DEFAULT=new Ts(41943040,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ts.DISABLED=new Ts(-1,0,0);class B_{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Dn={}}static ct(e,t,r,s){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new B_(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).Y({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=qd(e),c=Su(e);return c.add({}).next(m=>{Rt("number"==typeof m);const _=new _f(m,t,r,s),C=function(J,he,Re){const Ne=Re.baseMutations.map(mt=>Ef(J.ut,mt)),ht=Re.mutations.map(mt=>Ef(J.ut,mt));return{userId:he,batchId:Re.batchId,localWriteTimeMs:Re.localWriteTime.toMillis(),baseMutations:Ne,mutations:ht}}(this.serializer,this.userId,_),P=[];let k=new Qn((G,J)=>Gt(G.canonicalString(),J.canonicalString()));for(const G of s){const J=tg(this.userId,G.key.path,m);k=k.add(G.key.path.popLast()),P.push(c.put(C)),P.push(u.put(J,ng))}return k.forEach(G=>{P.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.Dn[m]=_.keys()}),ae.waitFor(P).next(()=>_)})}lookupMutationBatch(e,t){return Su(e).get(t).next(r=>r?(Rt(r.userId===this.userId),Hd(this.serializer,r)):null)}Cn(e,t){return this.Dn[t]?ae.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Dn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Su(e).Y({index:"userMutationsIndex",range:s},(c,m,_)=>{m.userId===this.userId&&(Rt(m.batchId>=r),u=Hd(this.serializer,m)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Su(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).W("userMutationsIndex",t).next(r=>r.map(s=>Hd(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=eg(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return qd(e).Y({range:s},(c,m,_)=>{const[C,P,k]=c,G=Oa(P);if(C===this.userId&&t.path.isEqual(G))return Su(e).get(k).next(J=>{if(!J)throw gt();Rt(J.userId===this.userId),u.push(Hd(this.serializer,J))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Gt);const s=[];return t.forEach(u=>{const c=eg(this.userId,u.path),m=IDBKeyRange.lowerBound(c),_=qd(e).Y({range:m},(C,P,k)=>{const[G,J,he]=C,Re=Oa(J);G===this.userId&&u.path.isEqual(Re)?r=r.add(he):k.done()});s.push(_)}),ae.waitFor(s).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=eg(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Qn(Gt);return qd(e).Y({range:c},(_,C,P)=>{const[k,G,J]=_,he=Oa(G);k===this.userId&&r.isPrefixOf(he)?he.length===s&&(m=m.add(J)):P.done()}).next(()=>this.vn(e,m))}vn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Su(e).get(u).next(c=>{if(null===c)throw gt();Rt(c.userId===this.userId),r.push(Hd(this.serializer,c))}))}),ae.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return lo(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),ae.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return qd(e).Y({range:r},(u,c,m)=>{if(u[0]===this.userId){const _=Oa(u[1]);s.push(_)}else m.done()}).next(()=>{Rt(0===s.length)})})}containsKey(e,t){return JA(e,this.userId,t)}Mn(e){return uT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JA(n,e,t){const r=eg(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return qd(n).Y({range:u,J:!0},(m,_,C)=>{const[P,k,G]=m;P===e&&k===s&&(c=!0),C.done()}).next(()=>c)}function Su(n){return _i(n,"mutations")}function qd(n){return _i(n,"documentMutations")}function uT(n){return _i(n,"mutationQueues")}class Wd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Wd(0)}static Nn(){return new Wd(-1)}}class XA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Wd(t.highestTargetId);return t.highestTargetId=r.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Dt.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Ln(e,s)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(t,r),this.Ln(e,r))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Zd(e).Y((c,m)=>{const _=Cf(m);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Zd(e).Y((r,s)=>{const u=Cf(s);t(u)})}Bn(e){return lT(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Ln(e,t){return lT(e).put("targetGlobalKey",t)}kn(e,t){return Zd(e).put(WA(this.serializer,t))}qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Od(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Zd(e).Y({range:s,index:"queryTargetsIndex"},(c,m,_)=>{const C=Cf(m);kd(t,C.target)&&(u=C,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=xc(e);return t.forEach(c=>{const m=Es(c.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(s)}removeMatchingKeys(e,t,r){const s=xc(e);return ae.forEach(t,u=>{const c=Es(u.path);return ae.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=xc(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=xc(e);let u=sn();return s.Y({range:r,J:!0},(c,m,_)=>{const C=Oa(c[1]),P=new st(C);u=u.add(P)}).next(()=>u)}containsKey(e,t){const r=Es(t.path),s=IDBKeyRange.bound([r],[Kp(r)],!1,!0);let u=0;return xc(e).Y({index:"documentTargetsIndex",J:!0,range:s},([c,m],_,C)=>{0!==c&&(u++,C.done())}).next(()=>u>0)}_t(e,t){return Zd(e).get(t).next(r=>r?Cf(r):null)}}function Zd(n){return _i(n,"targets")}function lT(n){return _i(n,"targetGlobal")}function xc(n){return _i(n,"targetDocuments")}function j_([n,e],[t,r]){const s=Gt(n,t);return 0===s?Gt(e,r):s}class eb{constructor(e){this.Qn=e,this.buffer=new Qn(j_),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();j_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Me.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Do(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ft(r)}yield t.Gn(3e5)}))}}class tb{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(vs._e);const r=new eb(t);return this.zn.forEachTarget(e,s=>r.Un(s.sequenceNumber)).next(()=>this.zn.Hn(e,s=>r.Un(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(aT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aT):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let r,s,u,c,m,_,C;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),s=this.params.maximumSequenceNumbersToCollect):s=k,c=Date.now(),this.nthSequenceNumber(e,s))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),El()<=hr.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-P}ms\n\tDetermined least recently used ${s} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(_-m)+`ms\n\tRemoved ${k} documents in `+(C-_)+`ms\nTotal Duration: ${C-P}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:k})))}}class nb{constructor(e,t){this.db=e,this.garbageCollector=function dT(n,e){return new tb(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Yn(e){let t=0;return this.Hn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(r,s)=>t(s))}addReference(e,t,r){return So(e,r)}removeReference(e,t,r){return So(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return So(e,t)}Xn(e,t){return function(s,u){let c=!1;return uT(s).Z(m=>JA(s,m,u).next(_=>(_&&(c=!0),ae.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Zn(e,(c,m)=>{if(m<=t){const _=this.Xn(e,c).next(C=>{if(!C)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Dt.min()),xc(e).delete([0,Es(c.path)])))});s.push(_)}}).next(()=>ae.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return So(e,t)}Zn(e,t){const r=xc(e);let s,u=vs._e;return r.Y({index:"documentTargetsIndex"},([c,m],{path:_,sequenceNumber:C})=>{0===c?(u!==vs._e&&t(new st(Oa(s)),u),u=C,s=_):u=vs._e}).next(()=>{u!==vs._e&&t(new st(Oa(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function So(n,e){return xc(n).put((s=n.currentSequenceNumber,{targetId:0,path:Es(e.path),sequenceNumber:s}));var s}class H_{constructor(){this.changes=new Cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mc(e).put(r)}removeEntry(e,t,r){return Mc(e).delete(function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],M_(c),m[m.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.er(e,r)))}getEntry(e,t){let r=Ar.newInvalidDocument(t);return Mc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nc(t))},(s,u)=>{r=this.tr(t,u)}).next(()=>r)}nr(e,t){let r={size:0,document:Ar.newInvalidDocument(t)};return Mc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Nc(t))},(s,u)=>{r={document:this.tr(t,u),size:U_(u)}}).next(()=>r)}getEntries(e,t){let r=ws();return this.rr(e,t,(s,u)=>{const c=this.tr(s,u);r=r.insert(s,c)}).next(()=>r)}ir(e,t){let r=ws(),s=new or(st.comparator);return this.rr(e,t,(u,c)=>{const m=this.tr(u,c);r=r.insert(u,m),s=s.insert(u,U_(c))}).next(()=>({documents:r,sr:s}))}rr(e,t,r){if(t.isEmpty())return ae.resolve();let s=new Qn(sb);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Nc(s.first()),Nc(s.last())),c=s.getIterator();let m=c.getNext();return Mc(e).Y({index:"documentKeyIndex",range:u},(_,C,P)=>{const k=st.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&sb(m,k)<0;)r(m,null),m=c.getNext();m&&m.isEqual(k)&&(r(m,C),m=c.hasNext()?c.getNext():null),m?P.U(Nc(m)):P.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),M_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],_=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mc(e).W(IDBKeyRange.bound(m,_,!0)).next(C=>{u?.incrementDocumentReadCount(C.length);let P=ws();for(const k of C){const G=this.tr(st.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);G.isFoundDocument()&&(fg(t,G)||s.has(G.key))&&(P=P.insert(G.key,G))}return P})}getAllFromCollectionGroup(e,t,r,s){let u=ws();const c=$_(t,r),m=$_(t,ee.max());return Mc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(_,C,P)=>{const k=this.tr(st.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===s&&P.done()}).next(()=>u)}newChangeBuffer(e){return new ib(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mE(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}er(e,t){return mE(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const r=function eT(n,e){let t;if(e.document)t=Kw(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=st.fromSegments(e.noDocument.path),s=jd(e.noDocument.readTime);t=Ar.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=st.fromSegments(e.unknownDocument.path),s=jd(e.unknownDocument.version);t=Ar.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const u=new bn(s[0],s[1]);return Dt.fromTimestamp(u)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Ar.newInvalidDocument(e)}}function gE(n){return new rb(n)}class ib extends H_{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Cl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Qn((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.ar.get(u);if(t.push(this._r.removeEntry(e,u,m.readTime)),c.isValidDocument()){const _=lE(this._r.serializer,c);s=s.add(u.path.popLast());const C=U_(_);r+=C-m.size,t.push(this._r.addEntry(e,u,_))}else if(r-=m.size,this.trackRemovals){const _=lE(this._r.serializer,c.convertToNoDocument(Dt.min()));t.push(this._r.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,u))}),t.push(this._r.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(r=>(this.ar.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:r,sr:s})=>(s.forEach((u,c)=>{this.ar.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function mE(n){return _i(n,"remoteDocumentGlobal")}function Mc(n){return _i(n,"remoteDocumentsV14")}function Nc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $_(n,e){const t=e.documentKey.path.toArray();return[n,M_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sb(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Gt(t[u],r[u]),s)return s;return s=Gt(t.length,r.length),s||(s=Gt(t[t.length-2],r[r.length-2]),s||Gt(t[t.length-1],r[r.length-1]))}class hT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _E{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&gg(r.mutation,s,uo.empty(),bn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sn()){const s=Cu();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=y_();return u.forEach((m,_)=>{c=c.insert(m,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Cu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sn()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,s){let u=ws();const c=v_(),m=v_();return t.forEach((_,C)=>{const P=r.get(C.key);s.has(C.key)&&(void 0===P||P.mutation instanceof bl)?u=u.insert(C.key,C):void 0!==P?(c.set(C.key,P.mutation.getFieldMask()),gg(P.mutation,C,P.mutation.getFieldMask(),bn.now())):c.set(C.key,uo.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((C,P)=>c.set(C,P)),t.forEach((C,P)=>{var k;return m.set(C,new hT(P,null!==(k=c.get(C))&&void 0!==k?k:null))}),m))}recalculateAndSaveOverlays(e,t){const r=v_();let s=new or((c,m)=>c-m),u=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(_=>{const C=t.get(_);if(null===C)return;let P=r.get(_)||uo.empty();P=m.applyToLocalView(C,P),r.set(_,P);const k=(s.get(m.batchId)||sn()).add(_);s=s.insert(m.batchId,k)})}).next(()=>{const c=[],m=s.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),C=_.key,P=_.value,k=jA();P.forEach(G=>{if(!u.has(G)){const J=pg(t.get(G),r.get(G));null!==J&&k.set(G,J),u=u.add(G)}}),c.push(this.documentOverlayCache.saveOverlays(e,C,k))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return st.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):df(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var c}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ae.resolve(Cu());let m=-1,_=u;return c.next(C=>ae.forEach(C,(P,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(P)?ae.resolve():this.remoteDocumentCache.getEntry(e,P).next(G=>{_=_.insert(P,G)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,_,C,sn())).next(P=>({batchId:m,changes:Ow(P)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next(r=>{let s=y_();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const u=t.collectionGroup;let c=y_();return this.indexManager.getCollectionParents(e,u).next(m=>ae.forEach(m,_=>{const C=(k=t,G=_.child(u),new ka(G,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt));var k,G;return this.getDocumentsMatchingCollectionQuery(e,C,r,s).next(P=>{P.forEach((k,G)=>{c=c.insert(k,G)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,s))).next(c=>{u.forEach((_,C)=>{const P=C.getKey();null===c.get(P)&&(c=c.insert(P,Ar.newInvalidDocument(P)))});let m=y_();return c.forEach((_,C)=>{const P=u.get(_);void 0!==P&&gg(P.mutation,C,uo.empty(),bn.now()),fg(t,C)&&(m=m.insert(_,C))}),m})}}class fT{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return ae.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(s=t).id,version:s.version,createTime:ui(s.createTime)}),ae.resolve();var s}getNamedQuery(e,t){return ae.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(s=t).name,query:cE(s.bundledQuery),readTime:ui(s.readTime)}),ae.resolve();var s}}class pT{constructor(){this.overlays=new or(st.comparator),this.lr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cu();return ae.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.lt(e,t,u)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.lr.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.lr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const s=Cu(),u=t.length+1,c=new st(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const _=m.getNext().value,C=_.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new or((C,P)=>C-P);const c=this.overlays.getIterator();for(;c.hasNext();){const C=c.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let P=u.get(C.largestBatchId);null===P&&(P=Cu(),u=u.insert(C.largestBatchId,P)),P.set(C.getKey(),C)}}const m=Cu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((C,P)=>m.set(C,P)),!(m.size()>=s)););return ae.resolve(m)}lt(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Ac(t,r));let u=this.lr.get(t);void 0===u&&(u=sn(),this.lr.set(t,u)),this.lr.set(t,u.add(r.key))}}class Mg{constructor(){this.hr=new Qn(mr.Pr),this.Ir=new Qn(mr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new mr(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new mr(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new st(new mn([])),r=new mr(t,e),s=new mr(t,e+1),u=[];return this.Ir.forEachInRange([r,s],c=>{this.dr(c),u.push(c.key)}),u}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new st(new mn([])),r=new mr(t,e),s=new mr(t,e+1);let u=sn();return this.Ir.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new mr(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mr{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return st.comparator(e.key,t.key)||Gt(e.gr,t.gr)}static Tr(e,t){return Gt(e.gr,t.gr)||st.comparator(e.key,t.key)}}class ob{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Qn(mr.Pr)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.pr;this.pr++;const c=new _f(u,t,r,s);this.mutationQueue.push(c);for(const m of s)this.yr=this.yr.add(new mr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Sr(t+1),u=s<0?0:s;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mr(t,0),s=new mr(t,Number.POSITIVE_INFINITY),u=[];return this.yr.forEachInRange([r,s],c=>{const m=this.wr(c.gr);u.push(m)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Gt);return t.forEach(s=>{const u=new mr(s,0),c=new mr(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([u,c],m=>{r=r.add(m.gr)})}),ae.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;st.isDocumentKey(u)||(u=u.child(""));const c=new mr(new st(u),0);let m=new Qn(Gt);return this.yr.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===s&&(m=m.add(_.gr)),!0)},c),ae.resolve(this.br(m))}br(e){const t=[];return e.forEach(r=>{const s=this.wr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Rt(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return ae.forEach(t.mutations,s=>{const u=new mr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new mr(t,0),s=this.yr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ae.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ab{constructor(e){this.Cr=e,this.docs=new or(st.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Ar.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Ar.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=ws();const c=t.path,m=new st(c.child("")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:C,value:{document:P}}=_.getNext();if(!c.isPrefixOf(C.path))break;C.path.length>c.length+1||ce(U(P),r)<=0||(s.has(P.key)||fg(t,P))&&(u=u.insert(P.key,P.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,t,r,s){gt()}vr(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yE(this)}getSize(e){return ae.resolve(this.size)}}class yE extends H_{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this._r.addEntry(e,s)):this._r.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class ub{constructor(e){this.persistence=e,this.Fr=new Cl(t=>Od(t),kd),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Mg,this.targetCount=0,this.Nr=Wd.On()}forEachTarget(e,t){return this.Fr.forEach((r,s)=>t(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),ae.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Wd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.kn(t),ae.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Fr.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fr.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ae.waitFor(u).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Or.containsKey(t))}}class G_{constructor(e,t){this.Br={},this.overlays={},this.Lr=new vs(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ub(this),this.indexManager=new YA,this.remoteDocumentCache=new ab(r=>this.referenceDelegate.Qr(r)),this.serializer=new Tg(t),this.Kr=new fT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new ob(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const s=new lb(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(u=>this.referenceDelegate.Ur(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Wr(e,t){return ae.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class lb extends ot{constructor(e){super(),this.currentSequenceNumber=e}}class Kd{constructor(e){this.persistence=e,this.Gr=new Mg,this.zr=null}static jr(e){return new Kd(e)}get Hr(){if(this.zr)return this.zr;throw gt()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Hr.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Hr,r=>{const s=st.fromPath(r);return this.Jr(e,s).next(u=>{u||t.removeEntry(s,Dt.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return ae.or([()=>ae.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class gT{constructor(e){this.serializer=e}N(e,t,r,s){const u=new ys("createOrUpgrade",t);var _;r<1&&s>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",t_,{unique:!0}),_.createObjectStore("documentMutations"),Ng(e),function(_){_.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&s>=3&&(0!==r&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),Ng(e)),c=c.next(()=>function(_){const C=_.store("targetGlobal"),P={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return C.put("targetGlobalKey",P)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(_,C){return C.store("mutations").W().next(P=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",t_,{unique:!0});const k=C.store("mutations"),G=P.map(J=>k.put(J));return ae.waitFor(G)})}(e,u))),c=c.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Zr(u))),r<6&&s>=6&&(c=c.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(u)))),r<7&&s>=7&&(c=c.next(()=>this.ei(u))),r<8&&s>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.ni(u))),r<11&&s>=11&&(c=c.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(_){const C=_.createObjectStore("documentOverlays",{keyPath:mw});C.createIndex("collectionPathOverlayIndex",_w,{unique:!1}),C.createIndex("collectionGroupOverlayIndex",r_,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(_){const C=_.createObjectStore("remoteDocumentsV14",{keyPath:fw});C.createIndex("documentKeyIndex",Sv),C.createIndex("collectionGroupIndex",n_)}(e)).next(()=>this.ri(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.ii(e,u))),r<15&&s>=15&&(c=c.next(()=>function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:gw}).createIndex("sequenceNumberIndex",xA,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:MA}).createIndex("documentKeyIndex",NA,{unique:!1})}(e))),c}Xr(e){let t=0;return e.store("remoteDocuments").Y((r,s)=>{t+=U_(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>ae.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(m=>ae.forEach(m,_=>{Rt(_.userId===u.userId);const C=Hd(this.serializer,_);return lo(e,u.userId,C).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Y((c,m)=>{const _=new mn(c),C=[0,Es(_)];u.push(t.get(C).next(P=>P?ae.resolve():t.put({targetId:0,path:Es(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ae.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:PA});const r=t.store("collectionParents"),s=new fE,u=c=>{if(s.add(c)){const m=c.lastSegment(),_=c.popLast();return r.put({collectionId:m,parent:Es(_)})}};return t.store("remoteDocuments").Y({J:!0},(c,m)=>{const _=new mn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([c,m,_],C)=>{const P=Oa(m);return u(P.popLast())}))}ni(e){const t=e.store("targets");return t.Y((r,s)=>{const u=Cf(s),c=WA(this.serializer,u);return t.put(c)})}ri(e,t){const r=t.store("remoteDocuments"),s=[];return r.Y((u,c)=>{const m=t.store("remoteDocumentsV14"),_=(k=c,k.document?new st(mn.fromString(k.document.name).popFirst(5)):k.noDocument?st.fromSegments(k.noDocument.path):k.unknownDocument?st.fromSegments(k.unknownDocument.path):gt()).path.toArray(),C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};var k;s.push(m.put(C))}).next(()=>ae.waitFor(s))}ii(e,t){const r=t.store("mutations"),s=gE(this.serializer),u=new G_(Kd.jr,this.serializer.ut);return r.W().next(c=>{const m=new Map;return c.forEach(_=>{var C;let P=null!==(C=m.get(_.userId))&&void 0!==C?C:sn();Hd(this.serializer,_).keys().forEach(k=>P=P.add(k)),m.set(_.userId,P)}),ae.forEach(m,(_,C)=>{const P=new oi(C),k=Dg.ct(this.serializer,P),G=u.getIndexManager(P),J=B_.ct(P,this.serializer,G,u.referenceDelegate);return new _E(s,J,k,G).recalculateAndSaveOverlaysForDocumentKeys(new Pv(t,vs._e),_).next()})})}}function Ng(n){n.createObjectStore("targetDocuments",{keyPath:Rv}).createIndex("documentTargetsIndex",rg,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pw,{unique:!0}),n.createObjectStore("targetGlobal")}const mT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vE{constructor(e,t,r,s,u,c,m,_,C,P,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=u,this.window=c,this.document=m,this.oi=C,this._i=P,this.ai=k,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=G=>Promise.resolve(),!vE.D())throw new We(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nb(this,s),this.Ii=t+"main",this.serializer=new Tg(_),this.Ti=new es(this.Ii,this.ai,new gT(this.serializer)),this.qr=new XA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gE(this.serializer),this.Kr=new nT,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===P&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(we.FAILED_PRECONDITION,mT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new vs(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var r=(0,Me.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,Me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Me.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Og(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(Do(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return bf(e).get("owner").next(t=>ae.resolve(this.wi(t)))}Si(e){return Og(e).delete(this.clientId)}bi(){var e=this;return(0,Me.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=_i(r,"clientMetadata");return s.W().next(u=>{const c=e.Ci(u,18e5),m=u.filter(_=>-1===c.indexOf(_));return ae.forEach(m,_=>s.delete(_.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Ei)for(const r of t)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?ae.resolve(!0):bf(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new We(we.FAILED_PRECONDITION,mT);return!1}}return!(!this.networkEnabled||!this.inForeground)||Og(e).W().next(r=>void 0===this.Ci(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Me.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Pv(t,vs._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(r=>this.Di(r.updateTimeMs,t)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Og(e).W().next(t=>this.Ci(t,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return B_.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QA(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Dg.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,r){qe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(_=this.ai)?ZP:14===_?vw:13===_?yw:12===_?tf:11===_?i_:void gt();var _;let c;return this.Ti.runTransaction(e,s,u,m=>(c=new Pv(m,this.Lr?this.Lr.next():vs._e),"readwrite-primary"===t?this.fi(c).next(_=>!!_||this.gi(c)).next(_=>{if(!_)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new We(we.FAILED_PRECONDITION,Ve);return r(c)}).next(_=>this.yi(c).next(()=>_)):this.Li(c).next(()=>r(c)))).then(m=>(c.raiseOnCommittedEvent(),m))}Li(e){return bf(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new We(we.FAILED_PRECONDITION,mT)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bf(e).put("owner",t)}static D(){return es.D()}pi(e){const t=bf(e);return t.get("owner").next(r=>this.wi(r)?(qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Di(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,W.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const r=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bf(n){return _i(n,"owner")}function Og(n){return _i(n,"clientMetadata")}function EE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class IE{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=s}static Qi(e,t){let r=sn(),s=sn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new IE(e,t.fromCache,r,s)}}class _T{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wE{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,s){const u={result:null};return this.zi(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.ji(e,t,s,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new _T;return this.Hi(e,t,c).next(m=>{if(u.result=m,this.$i)return this.Ji(e,t,c,m.size)})}).next(()=>u.result)}Ji(e,t,r,s){return r.documentReadCount<this.Ui?(El()<=hr.in.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",ff(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),ae.resolve()):(El()<=hr.in.DEBUG&&qe("QueryEngine","Query:",ff(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(El()<=hr.in.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",ff(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):ae.resolve())}zi(e,t){if(p_(t))return ae.resolve(null);let r=yi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=m_(t,null,"F"),r=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=sn(...u);return this.Gi.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(_=>{const C=this.Yi(t,m);return this.Zi(t,C,c,_.readTime)?this.zi(e,m_(t,null,"F")):this.Xi(e,C,t,_)}))})))}ji(e,t,r,s){return p_(t)||s.isEqual(Dt.min())?ae.resolve(null):this.Gi.getDocuments(e,r).next(u=>{const c=this.Yi(t,u);return this.Zi(t,c,r,s)?ae.resolve(null):(El()<=hr.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ff(t)),this.Xi(e,c,t,M(s,-1)).next(m=>m))})}Yi(e,t){let r=new Qn(__(e));return t.forEach((s,u)=>{fg(e,u)&&(r=r.add(u))}),r}Zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Hi(e,t,r){return El()<=hr.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",ff(t)),this.Gi.getDocumentsMatchingQuery(e,t,ee.min(),r)}Xi(e,t,r,s){return this.Gi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class kg{constructor(e,t,r,s){this.persistence=e,this.es=t,this.serializer=s,this.ts=new or(Gt),this.ns=new Cl(u=>Od(u),kd),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _E(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function yT(n,e,t,r){return new kg(n,e,t,r)}function TE(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,Me.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let _=sn();for(const C of s){c.push(C.batchId);for(const P of C.mutations)_=_.add(P.key)}for(const C of u){m.push(C.batchId);for(const P of C.mutations)_=_.add(P.key)}return t.localDocuments.getDocuments(r,_).next(C=>({_s:C,removedBatchIds:c,addedBatchIds:m}))})})}),z_.apply(this,arguments)}function vT(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function ET(n,e,t){let r=sn(),s=sn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=ws();return t.forEach((m,_)=>{const C=u.get(m);_.isFoundDocument()!==C.isFoundDocument()&&(s=s.add(m)),_.isNoDocument()&&_.version.isEqual(Dt.min())?(e.removeEntry(m,_.readTime),c=c.insert(m,_)):!C.isValidDocument()||_.version.compareTo(C.version)>0||0===_.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(_),c=c.insert(m,_)):qe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",_.version)}),{us:c,cs:s}})}function db(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sf(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.qr.getTargetData(r,e).next(u=>u?(s=u,ae.resolve(s)):t.qr.allocateTargetId(r).next(c=>(s=new bo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ts.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}function Rf(n,e,t){return CE.apply(this,arguments)}function CE(){return CE=(0,Me.Z)(function*(n,e,t){const r=nt(n),s=r.ts.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Do(c))throw c;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ts=r.ts.remove(e),r.ns.delete(s.target)}),CE.apply(this,arguments)}function q_(n,e,t){const r=nt(n);let s=Dt.min(),u=sn();return r.persistence.runTransaction("Execute query","readwrite",c=>function(_,C,P){const k=nt(_),G=k.ns.get(P);return void 0!==G?ae.resolve(k.ts.get(G)):k.qr.getTargetData(C,P)}(r,c,yi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(c,m.targetId).next(_=>{u=_})}).next(()=>r.es.getDocumentsMatchingQuery(c,e,t?s:Dt.min(),t?u:sn())).next(m=>(DE(r,xw(e),m),{documents:m,ls:u})))}function IT(n,e){const t=nt(n),r=nt(t.qr),s=t.ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r._t(u,e).next(c=>c?c.target:null))}function wT(n,e){const t=nt(n),r=t.rs.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ss.getAllFromCollectionGroup(s,e,M(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(DE(t,e,s),s))}function DE(n,e,t){let r=n.rs.get(e)||Dt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.rs.set(e,r)}function bE(){return bE=(0,Me.Z)(function*(n,e,t,r){const s=nt(n);let u=sn(),c=ws();for(const C of t){const P=e.hs(C.metadata.name);C.document&&(u=u.add(P));const k=e.Ps(C);k.setReadTime(e.Is(C.metadata.readTime)),c=c.insert(P,k)}const m=s.ss.newChangeBuffer({trackRemovals:!0}),_=yield Sf(s,(P=r,yi(cf(mn.fromString(`__bundle__/docs/${P}`)))));var P;return s.persistence.runTransaction("Apply bundle documents","readwrite",C=>ET(C,m,c).next(P=>(m.apply(C),P)).next(P=>s.qr.removeMatchingKeysForTargetId(C,_.targetId).next(()=>s.qr.addMatchingKeys(C,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(C,P.us,P.cs)).next(()=>P.us)))}),bE.apply(this,arguments)}function W_(n,e){return SE.apply(this,arguments)}function SE(){return SE=(0,Me.Z)(function*(n,e,t=sn()){const r=yield Sf(n,yi(cE(e.bundledQuery))),s=nt(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=ui(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(u,e);const m=r.withResumeToken(bi.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(m.targetId,m),s.qr.updateTargetData(u,m).next(()=>s.qr.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.qr.addMatchingKeys(u,t,r.targetId)).next(()=>s.Kr.saveNamedQuery(u,e))})}),SE.apply(this,arguments)}function TT(n,e){return`firestore_clients_${n}_${e}`}function CT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function RE(n,e){return`firestore_targets_${n}_${e}`}class Z_{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ts(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new We(s.error.code,s.error.message))),c?new Z_(e,t,s.state,u):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ts(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new We(r.error.code,r.error.message))),u?new Fg(e,r.state,s):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class K_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Dc();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=Xp(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new K_(e,u):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Y_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Y_(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Q_{constructor(){this.activeTargetIds=Dc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PE{constructor(e,t,r,s,u){this.window=e,this.si=t,this.persistenceKey=r,this.Rs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new or(Gt),this.started=!1,this.ps=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ys=TT(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Q_),this.Ss=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Me.Z)(function*(){const t=yield e.syncEngine.Bi();for(const s of t){if(s===e.Rs)continue;const u=e.getItem(TT(e.persistenceKey,s));if(u){const c=K_.Ts(s,u);c&&(e.gs=e.gs.insert(c.clientId,c))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const s=e.Ms(r);s&&e.xs(s)}for(const s of e.ps)e.fs(s);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,r){this.Ns(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(RE(this.persistenceKey,e));if(r){const s=Fg.Ts(e,r);s&&(t=s.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(RE(this.persistenceKey,e))}updateQueryState(e,t,r){this.ks(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qe("SharedClientState","READ",e,t),t}setItem(e,t){qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ss.test(r.key)){if(null==r.newValue){const s=t.Ks(r.key);return t.$s(s,null)}{const s=t.Us(r.key,r.newValue);if(s)return t.$s(s.clientId,s)}}else if(t.bs.test(r.key)){if(null!==r.newValue){const s=t.Ws(r.key,r.newValue);if(s)return t.Gs(s)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const s=t.zs(r.key,r.newValue);if(s)return t.js(s)}}else if(r.key===t.Cs){if(null!==r.newValue){const s=t.Ms(r.newValue);if(s)return t.xs(s)}}else if(r.key===t.ws){const s=function(c){let m=vs._e;if(null!=c)try{const _=JSON.parse(c);Rt("number"==typeof _),m=_}catch(_){sr("SharedClientState","Failed to read sequence number from WebStorage",_)}return m}(r.newValue);s!==vs._e&&t.sequenceNumberHandler(s)}else if(r.key===t.vs){const s=t.Hs(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Js(u)))}}else t.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,r){const s=new Z_(this.currentUser,e,t,r),u=CT(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Es())}Bs(e){const t=CT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,r){const s=RE(this.persistenceKey,e),u=new Fg(e,t,r);this.setItem(s,u.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const r=this.Ks(e);return K_.Ts(r,t)}Ws(e,t){const r=this.bs.exec(e),s=Number(r[1]);return Z_.Ts(new oi(void 0!==r[2]?r[2]:null),s,t)}zs(e,t){const r=this.Ds.exec(e),s=Number(r[1]);return Fg.Ts(s,t)}Ms(e){return Y_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,Me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const r=t?this.gs.insert(e,t):this.gs.remove(e),s=this.Os(this.gs),u=this.Os(r),c=[],m=[];return u.forEach(_=>{s.has(_)||c.push(_)}),s.forEach(_=>{u.has(_)||m.push(_)}),this.syncEngine.Xs(c,m).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Dc();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class hb{constructor(){this.eo=new Q_,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Q_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DT{ro(e){}shutdown(){}}class xE{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ME=null;function Pf(){return null===ME?ME=268435456+Math.round(2147483648*Math.random()):ME++,"0x"+ME.toString(16)}const fb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pb{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Vi="WebChannelConnection";class gb extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${s}/databases/${u}`,this.po="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${u}`}get yo(){return!1}wo(t,r,s,u,c){const m=Pf(),_=this.So(t,r);qe("RestConnection",`Sending RPC '${t}' ${m}:`,_,s);const C={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(C,u,c),this.Do(t,_,C,s).then(P=>(qe("RestConnection",`Received RPC '${t}' ${m}: `,P),P),P=>{throw Yi("RestConnection",`RPC '${t}' ${m} failed with error: `,P,"url: ",_,"request:",s),P})}Co(t,r,s,u,c,m){return this.wo(t,r,s,u,c)}bo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Co,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,c)=>t[c]=u),s&&s.headers.forEach((u,c)=>t[c]=u)}So(t,r){return`${this.mo}/v1/${r}:${fb[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,s){const u=Pf();return new Promise((c,m)=>{const _=new Yh;_.setWithCredentials(!0),_.listenOnce(cw.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Xm.NO_ERROR:const P=_.getResponseJson();qe(Vi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(P)),c(P);break;case Xm.TIMEOUT:qe(Vi,`RPC '${e}' ${u} timed out`),m(new We(we.DEADLINE_EXCEEDED,"Request time out"));break;case Xm.HTTP_ERROR:const k=_.getStatus();if(qe(Vi,`RPC '${e}' ${u} failed with status:`,k,"response text:",_.getResponseText()),k>0){let G=_.getResponseJson();Array.isArray(G)&&(G=G[0]);const J=G?.error;if(J&&J.status&&J.message){const he=function(Ne){const ht=Ne.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(ht)>=0?ht:we.UNKNOWN}(J.status);m(new We(he,J.message))}else m(new We(we.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new We(we.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{qe(Vi,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(s);qe(Vi,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",C,r,15)})}vo(e,t,r){const s=Pf(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Gp(),m=zp(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(_.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(_.xmlHttpFactory=new dw({})),this.bo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const P=u.join("");qe(Vi,`Creating RPC '${e}' stream ${s}: ${P}`,_);const k=c.createWebChannel(P,_);let G=!1,J=!1;const he=new pb({co:Ne=>{J?qe(Vi,`Not sending because RPC '${e}' stream ${s} is closed:`,Ne):(G||(qe(Vi,`Opening RPC '${e}' stream ${s} transport.`),k.open(),G=!0),qe(Vi,`RPC '${e}' stream ${s} sending:`,Ne),k.send(Ne))},lo:()=>k.close()}),Re=(Ne,ht,mt)=>{Ne.listen(ht,Qe=>{try{mt(Qe)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return Re(k,Kh.EventType.OPEN,()=>{J||qe(Vi,`RPC '${e}' stream ${s} transport opened.`)}),Re(k,Kh.EventType.CLOSE,()=>{J||(J=!0,qe(Vi,`RPC '${e}' stream ${s} transport closed`),he.Ro())}),Re(k,Kh.EventType.ERROR,Ne=>{J||(J=!0,Yi(Vi,`RPC '${e}' stream ${s} transport errored:`,Ne),he.Ro(new We(we.UNAVAILABLE,"The operation could not be completed")))}),Re(k,Kh.EventType.MESSAGE,Ne=>{var ht;if(!J){const mt=Ne.data[0];Rt(!!mt);const Ct=mt.error||(null===(ht=mt[0])||void 0===ht?void 0:ht.error);if(Ct){qe(Vi,`RPC '${e}' stream ${s} received error:`,Ct);const Xt=Ct.status;let En=function(aw){const S1=ai[aw];if(void 0!==S1)return Hw(S1)}(Xt),ei=Ct.message;void 0===En&&(En=we.INTERNAL,ei="Unknown error status: "+Xt+" with message "+Ct.message),J=!0,he.Ro(new We(En,ei)),k.close()}else qe(Vi,`RPC '${e}' stream ${s} received:`,mt),he.Vo(mt)}}),Re(m,Tv.STAT_EVENT,Ne=>{Ne.stat===Cv.PROXY?qe(Vi,`RPC '${e}' stream ${s} detected buffering proxy`):Ne.stat===Cv.NOPROXY&&qe(Vi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{he.Ao()},0),he}}function Ua(){return typeof window<"u"?window:null}function kc(){return typeof document<"u"?document:null}function vi(n){return new nE(n,!0)}class Rl{constructor(e,t,r=1e3,s=1.5,u=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=s,this.xo=u,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,t-r);s>0&&qe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Vg{constructor(e,t,r,s,u,c,m,_){this.si=e,this.Ko=r,this.$o=s,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Rl(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Me.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Me.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,Me.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===t&&this.s_(r,s)},r=>{e(()=>{const s=new We(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Me.Z)(function*(){e.state=0,e.start()}))}o_(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sa extends Vg{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=u}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function Yw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(C=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:gt(),s=e.targetChange.targetIds||[],u=function(C,P){return C.useProto3Json?(Rt(void 0===P||"string"==typeof P),bi.fromBase64String(P||"")):(Rt(void 0===P||P instanceof Uint8Array),bi.fromUint8Array(P||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(C){const P=void 0===C.code?we.UNKNOWN:Hw(C.code);return new We(P,C.message||"")}(c);t=new $w(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Au(n,r.document.name),u=ui(r.document.updateTime),c=r.document.createTime?ui(r.document.createTime):Dt.min(),m=new Fi({mapValue:{fields:r.document.fields}}),_=Ar.newFoundDocument(s,u,c,m);t=new R_(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=Au(n,r.document),u=r.readTime?ui(r.readTime):Dt.min(),c=Ar.newNoDocument(s,u);t=new R_([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=Au(n,r.document);t=new R_([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return gt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,c=new GA(s,u);t=new Xv(r.targetId,c)}}var C;return t}(this.serializer,e),r=function(u){if(!("targetChange"in u))return Dt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Dt.min():c.readTime?ui(c.readTime):Dt.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=wg(this.serializer),t.addTarget=function(u,c){let m;const _=c.target;if(m=cg(_)?{documents:sE(u,_)}:{query:oE(u,_)},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=qw(u,c.resumeToken);const C=Du(u,c.expectedCount);null!==C&&(m.expectedCount=C)}else if(c.snapshotVersion.compareTo(Dt.min())>0){m.readTime=bc(u,c.snapshotVersion.toTimestamp());const C=Du(u,c.expectedCount);null!==C&&(m.expectedCount=C)}return m}(this.serializer,e);const r=function qA(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=wg(this.serializer),t.removeTarget=e,this.e_(t)}}class NE extends Vg{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=u,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function Qw(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(s,u){let c=ui(s.updateTime?s.updateTime:u);return c.isEqual(Dt.min())&&(c=ui(u)),new $A(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.I_(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=wg(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ef(this.serializer,r))};this.e_(t)}}class xf extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new We(we.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.wo(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(we.UNKNOWN,s.toString())})}Co(e,t,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new We(we.UNKNOWN,u.toString())})}terminate(){this.d_=!0}}class Nf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(sr(t),this.f_=!1):qe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Of{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=u,this.F_.ro(m=>{r.enqueueAndForget((0,Me.Z)(function*(){var _;Pl(c)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Me.Z)(function*(P){const k=nt(P);k.C_.add(4),yield Ba(k),k.M_.set("Unknown"),k.C_.delete(4),yield Ru(k)}),function C(P){return _.apply(this,arguments)})(c))}))}),this.M_=new Nf(r,s)}}function Ru(n){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,Me.Z)(function*(n){if(Pl(n))for(const e of n.v_)yield e(!0)}),Fc.apply(this,arguments)}function Ba(n){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,Me.Z)(function*(n){for(const e of n.v_)yield e(!1)}),Vc.apply(this,arguments)}function Ug(n,e){const t=nt(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),ey(t)?X_(t):xl(t).Ho()&&J_(t,e))}function kf(n,e){const t=nt(n),r=xl(t);t.D_.delete(e),r.Ho()&&OE(t,e),0===t.D_.size&&(r.Ho()?r.Zo():Pl(t)&&t.M_.set("Unknown"))}function J_(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xl(n).u_(e)}function OE(n,e){n.x_.Oe(e),xl(n).c_(e)}function X_(n){n.x_=new QP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),xl(n).start(),n.M_.g_()}function ey(n){return Pl(n)&&!xl(n).jo()&&n.D_.size>0}function Pl(n){return 0===nt(n).C_.size}function kE(n){n.x_=void 0}function AT(n){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,Me.Z)(function*(n){n.D_.forEach((e,t)=>{J_(n,e)})}),Bg.apply(this,arguments)}function mb(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Me.Z)(function*(n,e){kE(n),ey(n)?(n.M_.w_(e),X_(n)):n.M_.set("Unknown")}),bT.apply(this,arguments)}function ex(n,e,t){return LE.apply(this,arguments)}function LE(){return LE=(0,Me.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof $w&&2===e.state&&e.cause)try{yield(r=(0,Me.Z)(function*(u,c){const m=c.cause;for(const _ of c.targetIds)u.D_.has(_)&&(yield u.remoteSyncer.rejectListen(_,m),u.D_.delete(_),u.x_.removeTarget(_))}),function s(u,c){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ty(n,r)}else if(e instanceof R_?n.x_.$e(e):e instanceof Xv?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Dt.min()))try{const r=yield vT(n.localStore);t.compareTo(r)>=0&&(yield function(u,c){const m=u.x_.it(c);return m.targetChanges.forEach((_,C)=>{if(_.resumeToken.approximateByteSize()>0){const P=u.D_.get(C);P&&u.D_.set(C,P.withResumeToken(_.resumeToken,c))}}),m.targetMismatches.forEach((_,C)=>{const P=u.D_.get(_);if(!P)return;u.D_.set(_,P.withResumeToken(bi.EMPTY_BYTE_STRING,P.snapshotVersion)),OE(u,_);const k=new bo(P.target,_,C,P.sequenceNumber);J_(u,k)}),u.remoteSyncer.applyRemoteEvent(m)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield ty(n,r)}var r}),LE.apply(this,arguments)}function ty(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,Me.Z)(function*(n,e,t){if(!Do(e))throw e;n.C_.add(1),yield Ba(n),n.M_.set("Offline"),t||(t=()=>vT(n.localStore)),n.asyncQueue.enqueueRetryable((0,Me.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Ru(n)}))}),ST.apply(this,arguments)}function RT(n,e){return e().catch(t=>ty(n,t,e))}function jg(n){return FE.apply(this,arguments)}function FE(){return FE=(0,Me.Z)(function*(n){const e=nt(n),t=ja(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;_b(e);)try{const s=yield db(e.localStore,r);if(null===s){0===e.b_.length&&t.Zo();break}r=s.batchId,yb(e,s)}catch(s){yield ty(e,s)}ny(e)&&Lf(e)}),FE.apply(this,arguments)}function _b(n){return Pl(n)&&n.b_.length<10}function yb(n,e){n.b_.push(e);const t=ja(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function ny(n){return Pl(n)&&!ja(n).jo()&&n.b_.length>0}function Lf(n){ja(n).start()}function VE(n){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Me.Z)(function*(n){ja(n).E_()}),Ff.apply(this,arguments)}function PT(n){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Me.Z)(function*(n){const e=ja(n);for(const t of n.b_)e.P_(t.mutations)}),Yd.apply(this,arguments)}function xT(n,e,t){return UE.apply(this,arguments)}function UE(){return UE=(0,Me.Z)(function*(n,e,t){const r=n.b_.shift(),s=Yv.from(r,e,t);yield RT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield jg(n)}),UE.apply(this,arguments)}function Hg(n,e){return BE.apply(this,arguments)}function BE(){return BE=(0,Me.Z)(function*(n,e){var t;e&&ja(n).h_&&(yield(t=(0,Me.Z)(function*(s,u){if(jw(m=u.code)&&m!==we.ABORTED){const c=s.b_.shift();ja(s).Yo(),yield RT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,u)),yield jg(s)}var m}),function r(s,u){return t.apply(this,arguments)})(n,e)),ny(n)&&Lf(n)}),BE.apply(this,arguments)}function MT(n,e){return jE.apply(this,arguments)}function jE(){return jE=(0,Me.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=Pl(t);t.C_.add(3),yield Ba(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Ru(t)}),jE.apply(this,arguments)}function HE(n,e){return $g.apply(this,arguments)}function $g(){return $g=(0,Me.Z)(function*(n,e){const t=nt(n);e?(t.C_.delete(2),yield Ru(t)):e||(t.C_.add(2),yield Ba(t),t.M_.set("Unknown"))}),$g.apply(this,arguments)}function xl(n){return n.O_||(n.O_=function(t,r,s){const u=nt(t);return u.A_(),new sa(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{ho:AT.bind(null,n),Io:mb.bind(null,n),a_:ex.bind(null,n)}),n.v_.push(function(){var e=(0,Me.Z)(function*(t){t?(n.O_.Yo(),ey(n)?X_(n):n.M_.set("Unknown")):(yield n.O_.stop(),kE(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function ja(n){return n.N_||(n.N_=function(t,r,s){const u=nt(t);return u.A_(),new NE(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{ho:VE.bind(null,n),Io:Hg.bind(null,n),T_:PT.bind(null,n),I_:xT.bind(null,n)}),n.v_.push(function(){var e=(0,Me.Z)(function*(t){t?(n.N_.Yo(),yield jg(n)):(yield n.N_.stop(),n.b_.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class NT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,m=new NT(e,t,c,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new We(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vf(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Do(n))return new We(we.UNAVAILABLE,`${e}: ${n}`);throw n}class Uf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=y_(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new Uf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ry{constructor(){this.B_=new or(st.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):gt():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bf{constructor(e,t,r,s,u,c,m,_,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,s,u){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new Bf(e,t,Uf.emptySet(t),c,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class OT{constructor(){this.k_=void 0,this.listeners=[]}}class vb{constructor(){this.queries=new Cl(e=>Ld(e),hf),this.onlineState="Unknown",this.q_=new Set}}function $E(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,Me.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new OT),s)try{u.k_=yield t.onListen(r)}catch(c){const m=Vf(c,`Initialization of query '${ff(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Q_(t.onlineState),u.k_&&e.K_(u.k_)&&GE(t)}),iy.apply(this,arguments)}function sy(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,Me.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),oy.apply(this,arguments)}function Eb(n,e){const t=nt(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const m of c.listeners)m.K_(s)&&(r=!0);c.k_=s}}r&&GE(t)}function Ib(n,e,t){const r=nt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function GE(n){n.q_.forEach(e=>{e.next()})}class ay{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Bf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Bf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class zE{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class uy{constructor(e){this.serializer=e}hs(e){return Au(this.serializer,e)}Ps(e){return e.metadata.exists?Kw(this.serializer,e.document,!1):Ar.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ui(e)}}class wb{constructor(e,t,r){this.X_=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gg(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const r=mn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,r=new uy(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.hs(s.metadata.name);for(const c of s.metadata.queries){const m=(t.get(c)||sn()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,Me.Z)(function*(){const t=yield function AE(n,e,t,r){return bE.apply(this,arguments)}(e.localStore,new uy(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const s of e.queries)yield W_(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function Gg(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zg{constructor(e){this.key=e}}class ly{constructor(e){this.key=e}}class qE{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=sn(),this.mutatedKeys=sn(),this._a=__(e),this.aa=new Uf(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new ry,s=t?t.aa:this.aa;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,m=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,C="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((P,k)=>{const G=s.get(P),J=fg(this.query,k)?k:null,he=!!G&&this.mutatedKeys.has(G.key),Re=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Ne=!1;G&&J?G.data.isEqual(J.data)?he!==Re&&(r.track({type:3,doc:J}),Ne=!0):this.ha(G,J)||(r.track({type:2,doc:J}),Ne=!0,(_&&this._a(J,_)>0||C&&this._a(J,C)<0)&&(m=!0)):!G&&J?(r.track({type:0,doc:J}),Ne=!0):G&&!J&&(r.track({type:1,doc:G}),Ne=!0,(_||C)&&(m=!0)),Ne&&(J?(c=c.add(J),u=Re?u.add(P):u.delete(P)):(c=c.delete(P),u=u.delete(P)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const P="F"===this.query.limitType?c.last():c.first();c=c.delete(P.key),u=u.delete(P.key),r.track({type:1,doc:P})}return{aa:c,la:r,Zi:m,mutatedKeys:u}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const u=e.la.L_();u.sort((C,P)=>function(G,J){const he=Re=>{switch(Re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return he(G)-he(J)}(C.type,P.type)||this._a(C.doc,P.doc)),this.Pa(r);const c=t?this.Ia():[],m=0===this.oa.size&&this.current?1:0,_=m!==this.sa;return this.sa=m,0!==u.length||_?{snapshot:new Bf(this.query,e.aa,s,u,e.mutatedKeys,0===m,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:c}:{Ta:c}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new ry,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=sn(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new ly(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new zg(r))}),t}da(e){this.ia=e.ls,this.oa=sn();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Bf.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Tb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Cb{constructor(e){this.key=e,this.Ra=!1}}class Db{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Va={},this.ma=new Cl(m=>Ld(m),hf),this.fa=new Map,this.ga=new Set,this.pa=new or(st.comparator),this.ya=new Map,this.wa=new Mg,this.Sa={},this.ba=new Map,this.Da=Wd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function WE(n,e){return qg.apply(this,arguments)}function qg(){return qg=(0,Me.Z)(function*(n,e){const t=aI(n);let r,s;const u=t.ma.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Aa();else{const c=yield Sf(t.localStore,yi(e)),m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield cy(t,e,r,"current"===m,c.resumeToken),t.isPrimaryClient&&Ug(t.remoteStore,c)}return s}),qg.apply(this,arguments)}function cy(n,e,t,r,s){return dy.apply(this,arguments)}function dy(){return dy=(0,Me.Z)(function*(n,e,t,r,s){n.va=(k,G,J)=>{return(he=(0,Me.Z)(function*(Ne,ht,mt,Qe){let Ct=ht.view.ca(mt);Ct.Zi&&(Ct=yield q_(Ne.localStore,ht.query,!1).then(({documents:ei})=>ht.view.ca(ei,Ct)));const Xt=Qe&&Qe.targetChanges.get(ht.targetId),En=ht.view.applyChanges(Ct,Ne.isPrimaryClient,Xt);return py(Ne,ht.targetId,En.Ta),En.snapshot}),function Re(Ne,ht,mt,Qe){return he.apply(this,arguments)})(n,k,G,J);var he};const u=yield q_(n.localStore,e,!0),c=new qE(e,u.ls),m=c.ca(u.documents),_=yf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),C=c.applyChanges(m,n.isPrimaryClient,_);py(n,t,C.Ta);const P=new Tb(e,t,c);return n.ma.set(e,P),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),C.snapshot}),dy.apply(this,arguments)}function Ab(n,e){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,Me.Z)(function*(n,e){const t=nt(n),r=t.ma.get(e),s=t.fa.get(r.targetId);if(s.length>1)return t.fa.set(r.targetId,s.filter(u=>!hf(u,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),kf(t.remoteStore,r.targetId),Qd(t,r.targetId)}).catch(ft))):(Qd(t,r.targetId),yield Rf(t.localStore,r.targetId,!0))}),ZE.apply(this,arguments)}function Wg(){return Wg=(0,Me.Z)(function*(n,e,t){const r=_y(n);try{const s=yield function(c,m){const _=nt(c),C=bn.now(),P=m.reduce((J,he)=>J.add(he.key),sn());let k,G;return _.persistence.runTransaction("Locally write mutations","readwrite",J=>{let he=ws(),Re=sn();return _.ss.getEntries(J,P).next(Ne=>{he=Ne,he.forEach((ht,mt)=>{mt.isValidDocument()||(Re=Re.add(ht))})}).next(()=>_.localDocuments.getOverlayedDocuments(J,he)).next(Ne=>{k=Ne;const ht=[];for(const mt of m){const Qe=Uw(mt,k.get(mt.key).overlayedDocument);null!=Qe&&ht.push(new bl(mt.key,Qe,ag(Qe.value.mapValue),Or.exists(!0)))}return _.mutationQueue.addMutationBatch(J,C,ht,m)}).next(Ne=>{G=Ne;const ht=Ne.applyToLocalDocumentSet(k,Re);return _.documentOverlayCache.saveOverlays(J,Ne.batchId,ht)})}).then(()=>({batchId:G.batchId,changes:Ow(k)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,m,_){let C=c.Sa[c.currentUser.toKey()];C||(C=new or(Gt)),C=C.insert(m,_),c.Sa[c.currentUser.toKey()]=C}(r,s.batchId,t),yield Pu(r,s.changes),yield jg(r.remoteStore)}catch(s){const u=Vf(s,"Failed to persist write");t.reject(u)}}),Wg.apply(this,arguments)}function KE(n,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Me.Z)(function*(n,e){const t=nt(n);try{const r=yield function Lg(n,e){const t=nt(n),r=e.snapshotVersion;let s=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ss.newChangeBuffer({trackRemovals:!0});s=t.ts;const m=[];e.targetChanges.forEach((P,k)=>{const G=s.get(k);if(!G)return;m.push(t.qr.removeMatchingKeys(u,P.removedDocuments,k).next(()=>t.qr.addMatchingKeys(u,P.addedDocuments,k)));let J=G.withSequenceNumber(u.currentSequenceNumber);var Re,Ne,ht;null!==e.targetMismatches.get(k)?J=J.withResumeToken(bi.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):P.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(P.resumeToken,r)),s=s.insert(k,J),Ne=J,ht=P,(0===(Re=G).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-Re.snapshotVersion.toMicroseconds()>=3e8||ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0)&&m.push(t.qr.updateTargetData(u,J))});let _=ws(),C=sn();if(e.documentUpdates.forEach(P=>{e.resolvedLimboDocuments.has(P)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,P))}),m.push(ET(u,c,e.documentUpdates).next(P=>{_=P.us,C=P.cs})),!r.isEqual(Dt.min())){const P=t.qr.getLastRemoteSnapshotVersion(u).next(k=>t.qr.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(P)}return ae.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,C)).next(()=>_)}).then(u=>(t.ts=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.ya.get(u);c&&(Rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ra=!0:s.modifiedDocuments.size>0?Rt(c.Ra):s.removedDocuments.size>0&&(Rt(c.Ra),c.Ra=!1))}),yield Pu(t,r,e)}catch(r){yield ft(r)}}),Zg.apply(this,arguments)}function YE(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ma.forEach((u,c)=>{const m=c.view.Q_(e);m.snapshot&&s.push(m.snapshot)}),function(c,m){const _=nt(c);_.onlineState=m;let C=!1;_.queries.forEach((P,k)=>{for(const G of k.listeners)G.Q_(m)&&(C=!0)}),C&&GE(_)}(r.eventManager,e),s.length&&r.Va.a_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bb(n,e,t){return hy.apply(this,arguments)}function hy(){return hy=(0,Me.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ya.get(e),u=s&&s.key;if(u){let c=new or(st.comparator);c=c.insert(u,Ar.newNoDocument(u,Dt.min()));const m=sn().add(u),_=new Eg(Dt.min(),new Map,new or(Gt),c,m);yield KE(r,_),r.pa=r.pa.remove(u),r.ya.delete(e),gy(r)}else yield Rf(r.localStore,e,!1).then(()=>Qd(r,e,t)).catch(ft)}),hy.apply(this,arguments)}function LT(n,e){return fy.apply(this,arguments)}function fy(){return fy=(0,Me.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const s=yield function cb(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.ss.newChangeBuffer({trackRemovals:!0});return function(m,_,C,P){const k=C.batch,G=k.keys();let J=ae.resolve();return G.forEach(he=>{J=J.next(()=>P.getEntry(_,he)).next(Re=>{const Ne=C.docVersions.get(he);Rt(null!==Ne),Re.version.compareTo(Ne)<0&&(k.applyToRemoteDocument(Re,C),Re.isValidDocument()&&(Re.setReadTime(C.commitVersion),P.addEntry(Re)))})}),J.next(()=>m.mutationQueue.removeMutationBatch(_,k))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let _=sn();for(let C=0;C<m.mutationResults.length;++C)m.mutationResults[C].transformResults.length>0&&(_=_.add(m.batch.mutations[C].key));return _}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);Yg(t,r,null),Kg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pu(t,s)}catch(s){yield ft(s)}}),fy.apply(this,arguments)}function FT(n,e,t){return QE.apply(this,arguments)}function QE(){return QE=(0,Me.Z)(function*(n,e,t){const r=nt(n);try{const s=yield function(c,m){const _=nt(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let P;return _.mutationQueue.lookupMutationBatch(C,m).next(k=>(Rt(null!==k),P=k.keys(),_.mutationQueue.removeMutationBatch(C,k))).next(()=>_.mutationQueue.performConsistencyCheck(C)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(C,P,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(C,P)).next(()=>_.localDocuments.getDocuments(C,P))})}(r.localStore,e);Yg(r,e,t),Kg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pu(r,s)}catch(s){yield ft(s)}}),QE.apply(this,arguments)}function JE(){return JE=(0,Me.Z)(function*(n,e){const t=nt(n);Pl(t.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const m=nt(c);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>m.mutationQueue.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const s=t.ba.get(r)||[];s.push(e),t.ba.set(r,s)}catch(r){const s=Vf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),JE.apply(this,arguments)}function Kg(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function Yg(n,e,t){const r=nt(n);let s=r.Sa[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Sa[r.currentUser.toKey()]=s}}function Qd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||XE(n,r)})}function XE(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(kf(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),gy(n))}function py(n,e,t){for(const r of t)r instanceof zg?(n.wa.addReference(r.key,e),VT(n,r)):r instanceof ly?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||XE(n,r.key)):gt()}function VT(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.ga.add(r),gy(n))}function gy(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new st(mn.fromString(e)),r=n.Da.next();n.ya.set(r,new Cb(t)),n.pa=n.pa.insert(t,r),Ug(n.remoteStore,new bo(yi(cf(t.path)),r,"TargetPurposeLimboResolution",vs._e))}}function Pu(n,e,t){return my.apply(this,arguments)}function my(){return my=(0,Me.Z)(function*(n,e,t){const r=nt(n),s=[],u=[],c=[];var m;r.ma.isEmpty()||(r.ma.forEach((m,_)=>{c.push(r.va(_,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C?.fromCache?"not-current":"current"),C){s.push(C);const P=IE.Qi(_.targetId,C);u.push(P)}}))}),yield Promise.all(c),r.Va.a_(s),yield(m=(0,Me.Z)(function*(C,P){const k=nt(C);try{yield k.persistence.runTransaction("notifyLocalViewChanges","readwrite",G=>ae.forEach(P,J=>ae.forEach(J.ki,he=>k.persistence.referenceDelegate.addReference(G,J.targetId,he)).next(()=>ae.forEach(J.qi,he=>k.persistence.referenceDelegate.removeReference(G,J.targetId,he)))))}catch(G){if(!Do(G))throw G;qe("LocalStore","Failed to update sequence numbers: "+G)}for(const G of P){const J=G.targetId;if(!G.fromCache){const he=k.ts.get(J),Ne=he.withLastLimboFreeSnapshotVersion(he.snapshotVersion);k.ts=k.ts.insert(J,Ne)}}}),function _(C,P){return m.apply(this,arguments)})(r.localStore,u))}),my.apply(this,arguments)}function UT(n,e){return jf.apply(this,arguments)}function jf(){return jf=(0,Me.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield TE(t.localStore,e);t.currentUser=e,(u=t).ba.forEach(m=>{m.forEach(_=>{_.reject(new We(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pu(t,r._s)}var u}),jf.apply(this,arguments)}function Uc(n,e){const t=nt(n),r=t.ya.get(e);if(r&&r.Ra)return sn().add(r.key);{let s=sn();const u=t.fa.get(e);if(!u)return s;for(const c of u){const m=t.ma.get(c);s=s.unionWith(m.view.ua)}return s}}function Rb(n,e){return eI.apply(this,arguments)}function eI(){return eI=(0,Me.Z)(function*(n,e){const t=nt(n),r=yield q_(t.localStore,e.query,!0),s=e.view.da(r);return t.isPrimaryClient&&py(t,e.targetId,s.Ta),s}),eI.apply(this,arguments)}function tI(n,e){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,Me.Z)(function*(n,e){const t=nt(n);return wT(t.localStore,e).then(r=>Pu(t,r))}),Ml.apply(this,arguments)}function nI(n,e,t,r){return rI.apply(this,arguments)}function rI(){return rI=(0,Me.Z)(function*(n,e,t,r){const s=nt(n),u=yield function(m,_){const C=nt(m),P=nt(C.mutationQueue);return C.persistence.runTransaction("Lookup mutation documents","readonly",k=>P.Cn(k,_).next(G=>G?C.localDocuments.getDocuments(k,G):ae.resolve(null)))}(s.localStore,e);var _;null!==u?("pending"===t?yield jg(s.remoteStore):"acknowledged"===t||"rejected"===t?(Yg(s,e,r||null),Kg(s,e),_=e,nt(nt(s.localStore).mutationQueue).Fn(_)):gt(),yield Pu(s,u)):qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),rI.apply(this,arguments)}function BT(){return BT=(0,Me.Z)(function*(n,e){const t=nt(n);if(aI(t),_y(t),!0===e&&!0!==t.Ca){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield Pb(t,r.toArray());t.Ca=!0,yield HE(t.remoteStore,!0);for(const u of s)Ug(t.remoteStore,u)}else if(!1===e&&!1!==t.Ca){const r=[];let s=Promise.resolve();t.fa.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(Qd(t,c),Rf(t.localStore,c,!0))),kf(t.remoteStore,c)}),yield s,yield Pb(t,r),function(c){const m=nt(c);m.ya.forEach((_,C)=>{kf(m.remoteStore,C)}),m.wa.Vr(),m.ya=new Map,m.pa=new or(st.comparator)}(t),t.Ca=!1,yield HE(t.remoteStore,!1)}}),BT.apply(this,arguments)}function Pb(n,e,t){return sI.apply(this,arguments)}function sI(){return sI=(0,Me.Z)(function*(n,e,t){const r=nt(n),s=[],u=[];for(const c of e){let m;const _=r.fa.get(c);if(_&&0!==_.length){m=yield Sf(r.localStore,yi(_[0]));for(const C of _){const P=r.ma.get(C),k=yield Rb(r,P);k.snapshot&&u.push(k.snapshot)}}else{const C=yield IT(r.localStore,c);m=yield Sf(r.localStore,C),yield cy(r,jT(C),c,!1,m.resumeToken)}s.push(m)}return r.Va.a_(u),s}),sI.apply(this,arguments)}function jT(n){return hg(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function HT(n){return t=nt(n).localStore,nt(nt(t).persistence).Bi();var t}function xb(n,e,t,r){return li.apply(this,arguments)}function li(){return li=(0,Me.Z)(function*(n,e,t,r){const s=nt(n);if(s.Ca)return void qe("SyncEngine","Ignoring unexpected query state notification.");const u=s.fa.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield wT(s.localStore,xw(u[0])),m=Eg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield Pu(s,c,m);break}case"rejected":yield Rf(s.localStore,e,!0),Qd(s,e,r);break;default:gt()}}),li.apply(this,arguments)}function $T(n,e,t){return oI.apply(this,arguments)}function oI(){return oI=(0,Me.Z)(function*(n,e,t){const r=aI(n);if(r.Ca){for(const s of e){if(r.fa.has(s)){qe("SyncEngine","Adding an already active target "+s);continue}const u=yield IT(r.localStore,s),c=yield Sf(r.localStore,u);yield cy(r,jT(u),c.targetId,!1,c.resumeToken),Ug(r.remoteStore,c)}for(const s of t)r.fa.has(s)&&(yield Rf(r.localStore,s,!1).then(()=>{kf(r.remoteStore,s),Qd(r,s)}).catch(ft))}}),oI.apply(this,arguments)}function aI(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bb.bind(null,e),e.Va.a_=Eb.bind(null,e.eventManager),e.Va.Fa=Ib.bind(null,e.eventManager),e}function _y(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FT.bind(null,e),e}class Hf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Me.Z)(function*(){t.serializer=vi(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return yT(this.persistence,new wE,e.initialUser,this.serializer)}createPersistence(e){return new G_(Kd.jr,this.serializer)}createSharedClientState(e){return new hb}terminate(){var e=this;return(0,Me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bc extends Hf{constructor(e,t,r){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Me.Z)(function*(){yield t().call(r,e),yield r.xa.initialize(r,e),yield _y(r.xa.syncEngine),yield jg(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return yT(this.persistence,new wE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new cT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Jp(t,this.persistence);return new Na(e.asyncQueue,r)}createPersistence(e){const t=EE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ts.withCacheSize(this.cacheSizeBytes):Ts.DEFAULT;return new vE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ua(),kc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hb}}class zT extends Bc{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Me.Z)(function*(){yield t().call(r,e);const s=r.xa.syncEngine;r.sharedClientState instanceof PE&&(r.sharedClientState.syncEngine={Ys:nI.bind(null,s),Zs:xb.bind(null,s),Xs:$T.bind(null,s),Bi:HT.bind(null,s),Js:tI.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var u=(0,Me.Z)(function*(c){yield function iI(n,e){return BT.apply(this,arguments)}(r.xa.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Ua();if(!PE.D(t))throw new We(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=EE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new PE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $f{initialize(e,t){var r=this;return(0,Me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>YE(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=UT.bind(null,r.syncEngine),yield HE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vb}createDatastore(e){const t=vi(e.databaseInfo.databaseId),r=new gb(e.databaseInfo);return new xf(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,u=e.asyncQueue,c=t=>YE(this.syncEngine,t,0),m=xE.D()?new xE:new DT,new Of(r,s,u,c,m);var r,s,u,c,m}createSyncEngine(e,t){return function(s,u,c,m,_,C,P){const k=new Db(s,u,c,m,_,C);return P&&(k.Ca=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Me.Z)(function*(r){const s=nt(r);qe("RemoteStore","RemoteStore shutting down."),s.C_.add(5),yield Ba(s),s.F_.shutdown(),s.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function uI(n,e=10240){let t=0;return{read:()=>(0,Me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class yy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qT{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Me.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Me.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Me.Z)(function*(){const t=yield e.qa();if(null===t)return null;const r=e.La.decode(t),s=Number(r);isNaN(s)&&e.Qa(`length string (${r}) is not valid number`);const u=yield e.Ka(s);return new zE(JSON.parse(u),t.length+s)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Me.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ka(e){var t=this;return(0,Me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const r=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Me.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class tx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new We(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Me.Z)(function*(c,m){const _=nt(c),C=wg(_.serializer)+"/documents",P={documents:m.map(he=>vf(_.serializer,he))},k=yield _.Co("BatchGetDocuments",C,P,m.length),G=new Map;k.forEach(he=>{const Re=function rE(n,e){return"found"in e?function(r,s){Rt(!!s.found);const u=Au(r,s.found.name),c=ui(s.found.updateTime),m=s.found.createTime?ui(s.found.createTime):Dt.min(),_=new Fi({mapValue:{fields:s.found.fields}});return Ar.newFoundDocument(u,c,m,_)}(n,e):"missing"in e?function(r,s){Rt(!!s.missing),Rt(!!s.readTime);const u=Au(r,s.missing),c=ui(s.readTime);return Ar.newNoDocument(u,c)}(n,e):gt()}(_.serializer,he);G.set(Re.key.toString(),Re)});const J=[];return m.forEach(he=>{const Re=G.get(he.toString());Rt(!!Re),J.push(Re)}),J}),function u(c,m){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new mg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=st.fromPath(s);e.mutations.push(new Kv(u,e.precondition(u)))}),yield(r=(0,Me.Z)(function*(u,c){const m=nt(u),_=wg(m.serializer)+"/documents",C={writes:c.map(P=>Ef(m.serializer,P))};yield m.wo("Commit",_,C)}),function s(u,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new We(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Or.exists(!1):Or.updateTime(t):Or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new We(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Or.updateTime(t)}return Or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WT{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Wa=r.maxAttempts,this.zo=new Rl(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Me.Z)(function*(){const t=new tx(e.datastore),r=e.za(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.ja(u)}))}).catch(s=>{e.ja(s)})}))}za(e){try{const t=this.updateFunction(e);return!wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!jw(t)}return!1}}class lI{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=oi.UNAUTHENTICATED,this.clientId=Xi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Me.Z)(function*(m){qe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new We(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Vf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Ro(n,e){return cI.apply(this,arguments)}function cI(){return cI=(0,Me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Me.Z)(function*(u){r.isEqual(u)||(yield TE(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),cI.apply(this,arguments)}function dI(n,e){return oa.apply(this,arguments)}function oa(){return oa=(0,Me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Po(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>MT(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>MT(e.remoteStore,u)),n._onlineComponents=e}),oa.apply(this,arguments)}function aa(n){return"FirebaseError"===n.name?n.code===we.FAILED_PRECONDITION||n.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Po(n){return vy.apply(this,arguments)}function vy(){return vy=(0,Me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ro(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!aa(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),yield Ro(n,new Hf)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),yield Ro(n,new Hf);return n._offlineComponents}),vy.apply(this,arguments)}function Qg(n){return hI.apply(this,arguments)}function hI(){return hI=(0,Me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield dI(n,n._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),yield dI(n,new $f))),n._onlineComponents}),hI.apply(this,arguments)}function ZT(n){return Po(n).then(e=>e.persistence)}function Gf(n){return Po(n).then(e=>e.localStore)}function KT(n){return Qg(n).then(e=>e.remoteStore)}function Jg(n){return Qg(n).then(e=>e.syncEngine)}function qf(n){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,Me.Z)(function*(n){const e=yield Qg(n),t=e.eventManager;return t.onListen=WE.bind(null,e.syncEngine),t.onUnlisten=Ab.bind(null,e.syncEngine),t}),Ey.apply(this,arguments)}function fI(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(u,c,m,_,C){const P=new yy({next:G=>{c.enqueueAndForget(()=>sy(u,k));const J=G.docs.has(m);!J&&G.fromCache?C.reject(new We(we.UNAVAILABLE,"Failed to get document because the client is offline.")):J&&G.fromCache&&_&&"server"===_.source?C.reject(new We(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(G)},error:G=>C.reject(G)}),k=new ay(cf(m.path),P,{includeMetadataChanges:!0,J_:!0});return $E(u,k)}(yield qf(n),n.asyncQueue,e,t,r)})),r.promise}function QT(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(u,c,m,_,C){const P=new yy({next:G=>{c.enqueueAndForget(()=>sy(u,k)),G.fromCache&&"server"===_.source?C.reject(new We(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(G)},error:G=>C.reject(G)}),k=new ay(m,P,{includeMetadataChanges:!0,J_:!0});return $E(u,k)}(yield qf(n),n.asyncQueue,e,t,r)})),r.promise}function Xg(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const gI=new Map;function wy(n,e,t){if(!t)throw new We(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mI(n,e,t,r){if(!0===e&&!0===r)throw new We(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _I(n){if(!st.isDocumentKey(n))throw new We(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yI(n){if(st.isDocumentKey(n))throw new We(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function em(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":gt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new We(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=em(n);throw new We(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vI(n,e){if(e<=0)throw new We(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tC{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new We(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new We(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Xg(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new We(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new We(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new We(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new We(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new We(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tC(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Dv;switch(r.type){case"firstParty":return new Xh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=gI.get(t);r&&(qe("ComponentProvider","Removing Datastore"),gI.delete(t),r.terminate())}(this),Promise.resolve()}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class br{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}}class xu extends ts{constructor(e,t,r){super(e,t,cf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new st(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function Ty(n,e,...t){if(n=(0,W.m9)(n),wy("collection","path",e),n instanceof tm){const r=mn.fromString(e,...t);return yI(r),new xu(n,null,r)}{if(!(n instanceof br||n instanceof xu))throw new We(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return yI(r),new xu(n.firestore,null,r)}}function jc(n,e,...t){if(n=(0,W.m9)(n),1===arguments.length&&(e=Xi.newId()),wy("doc","path",e),n instanceof tm){const r=mn.fromString(e,...t);return _I(r),new br(n,null,new st(r))}{if(!(n instanceof br||n instanceof xu))throw new We(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return _I(r),new br(n.firestore,n instanceof xu?n.converter:null,new st(r))}}function rC(n,e){return n=(0,W.m9)(n),e=(0,W.m9)(e),(n instanceof br||n instanceof xu)&&(e instanceof br||e instanceof xu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function EI(n,e){return n=(0,W.m9)(n),e=(0,W.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&hf(n._query,e._query)&&n.converter===e.converter}class Vb{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Rl(this,"async_queue_retry"),this.iu=()=>{const t=kc();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=kc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=kc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Nr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Me.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Do(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,sr("INTERNAL UNHANDLED ERROR: ",function(c){let m=c.message||"";return c.stack&&(m=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),m}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const s=NT.createAndSchedule(this,e,t,r,u=>this.au(u));return this.Xa.push(s),s}su(){this.eu&&gt()}verifyOperationInProgress(){}uu(){var e=this;return(0,Me.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function II(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class Ub{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends tm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Vb,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wI(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||wI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wI(n){var e,t,r;const s=n._freezeSettings(),u=(_=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KP(n._databaseId,_,n._persistenceKey,(P=s).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,Xg(P.experimentalLongPollingOptions),P.useFetchStreams));var _,P;n._firestoreClient=new lI(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function TI(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,Me.Z)(function*(){try{yield Ro(n,t),yield dI(n,e),r.resolve()}catch(s){const u=s;if(!aa(u))throw u;Yi("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function dC(n){if(n._initialized||n._terminated)throw new We(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(bi.fromBase64String(e))}catch(t){throw new We(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nl(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ha{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new We(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hc{constructor(e){this._methodName=e}}class rm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new We(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new We(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const ix=/^__.*__$/;class Zf{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Al(e,this.data,t,this.fieldTransforms)}}class hC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Cy{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Pu(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Au(e),s}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Sy(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(fC(this.Iu)&&ix.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Kf{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vi(e)}pu(e,t,r,s=!1){return new Cy({Iu:e,methodName:t,gu:r,path:jn.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(n){const e=n._freezeSettings(),t=vi(n._databaseId);return new Kf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eh(n,e,t,r,s,u={}){const c=n.pu(u.merge||u.mergeFields?2:0,e,t,s);DI("Data must be an object, but it was:",c,r);const m=_C(r,c);let _,C;if(u.merge)_=new uo(c.fieldMask),C=c.fieldTransforms;else if(u.mergeFields){const P=[];for(const k of u.mergeFields){const G=Ol(e,k,t);if(!c.contains(G))throw new We(we.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);im(P,G)||P.push(G)}_=new uo(P),C=c.fieldTransforms.filter(k=>_.covers(k.field))}else _=null,C=c.fieldTransforms;return new Zf(new Fi(m),_,C)}class $c extends Hc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $c}}function Hs(n,e,t){return new Cy({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pC extends Hc{_toFieldTransform(e){return new Ud(e.path,new Dl)}isEqual(e){return e instanceof pC}}class gC extends Hc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Hs(this,e,!0),r=this.yu.map(u=>Gc(u,t)),s=new mf(r);return new Ud(e.path,s)}isEqual(e){return this===e}}class mC extends Hc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Hs(this,e,!0),r=this.yu.map(u=>Gc(u,t)),s=new La(r);return new Ud(e.path,s)}isEqual(e){return this===e}}class Hb extends Hc{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Vd(e.serializer,pf(e.serializer,this.wu));return new Ud(e.path,t)}isEqual(e){return this===e}}function Dy(n,e,t,r){const s=n.pu(1,e,t);DI("Data must be an object, but it was:",s,r);const u=[],c=Fi.empty();Ao(r,(_,C)=>{const P=by(e,_,t);C=(0,W.m9)(C);const k=s.Ru(P);if(C instanceof $c)u.push(P);else{const G=Gc(C,k);null!=G&&(u.push(P),c.set(P,G))}});const m=new uo(u);return new hC(c,m,s.fieldTransforms)}function Ay(n,e,t,r,s,u){const c=n.pu(1,e,t),m=[Ol(e,r,t)],_=[s];if(u.length%2!=0)throw new We(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)m.push(Ol(e,u[G])),_.push(u[G+1]);const C=[],P=Fi.empty();for(let G=m.length-1;G>=0;--G)if(!im(C,m[G])){const J=m[G];let he=_[G];he=(0,W.m9)(he);const Re=c.Ru(J);if(he instanceof $c)C.push(J);else{const Ne=Gc(he,Re);null!=Ne&&(C.push(J),P.set(J,Ne))}}const k=new uo(C);return new hC(P,k,c.fieldTransforms)}function CI(n,e,t,r=!1){return Gc(t,n.pu(r?4:3,e))}function Gc(n,e){if(yC(n=(0,W.m9)(n)))return DI("Unsupported field value:",e,n),_C(n,e);if(n instanceof Hc)return function(r,s){if(!fC(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,s){const u=[];let c=0;for(const m of r){let _=Gc(m,s.Vu(c));null==_&&(_={nullValue:"NULL_VALUE"}),u.push(_),c++}return{arrayValue:{values:u}}}(n,e)}return function(r,s){if(null===(r=(0,W.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return pf(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=bn.fromDate(r);return{timestampValue:bc(s.serializer,u)}}if(r instanceof bn){const u=new bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bc(s.serializer,u)}}if(r instanceof rm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nl)return{bytesValue:qw(s.serializer,r._byteString)};if(r instanceof br){const u=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw s.mu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ig(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${em(r)}`)}(n,e)}function _C(n,e){const t={};return ig(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(n,(r,s)=>{const u=Gc(s,e.Eu(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function yC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof rm||n instanceof Nl||n instanceof br||n instanceof Hc)}function DI(n,e,t){if(!yC(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=em(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var s}function Ol(n,e,t){if((e=(0,W.m9)(e))instanceof Ha)return e._internalPath;if("string"==typeof e)return by(n,e);throw Sy("Field path arguments must be of type string or ",n,!1,void 0,t)}const $b=new RegExp("[~\\*/\\[\\]]");function by(n,e,t){if(e.search($b)>=0)throw Sy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ha(...e.split("."))._internalPath}catch{throw Sy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sy(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${s}`),_+=")"),new We(we.INVALID_ARGUMENT,m+n+_)}function im(n,e){return n.some(t=>t.isEqual(e))}class Yf{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vC extends Yf{data(){return super.data()}}function sm(n,e){return"string"==typeof e?by(n,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}function EC(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new We(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class th{}class kl extends th{}function zc(n,e,...t){let r=[];e instanceof th&&r.push(e),r=r.concat(t),function(u){const c=u.filter(_=>_ instanceof nh).length,m=u.filter(_=>_ instanceof om).length;if(c>1||c>0&&m>0)throw new We(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class om extends kl{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new om(e,t,r)}_apply(e){const t=this._parse(e);return TC(e._query,t),new ts(e.firestore,e.converter,Hv(e._query,t))}_parse(e){const t=Xd(e.firestore);return function(u,c,m,_,C,P,k){let G;if(C.isKeyField()){if("array-contains"===P||"array-contains-any"===P)throw new We(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if("in"===P||"not-in"===P){Qf(k,P);const J=[];for(const he of k)J.push(SI(_,u,he));G={arrayValue:{values:J}}}else G=SI(_,u,k)}else"in"!==P&&"not-in"!==P&&"array-contains-any"!==P||Qf(k,P),G=CI(m,"where",k,"in"===P||"not-in"===P);return _n.create(C,P,G)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class nh extends th{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let c=s;const m=u.getFlattenedFilters();for(const _ of m)TC(c,_),c=Hv(c,_)}(e._query,t),new ts(e.firestore,e.converter,Hv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AI extends kl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new AI(e,t)}_apply(e){const t=function(s,u,c){if(null!==s.startAt)throw new We(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new We(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ug(u,c)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(s,u){const c=s.explicitOrderBy.concat([u]);return new ka(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ry extends kl{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ry(e,t,r)}_apply(e){return new ts(e.firestore,e.converter,m_(e._query,this._limit,this._limitType))}}class bI extends kl{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bI(e,t,r)}_apply(e){const t=wC(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(u=t,new ka((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class am extends kl{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new am(e,t,r)}_apply(e){const t=wC(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(u=t,new ka((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function wC(n,e,t,r){if(t[0]=(0,W.m9)(t[0]),t[0]instanceof Yf)return function(u,c,m,_,C){if(!_)throw new We(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const P=[];for(const k of js(u))if(k.field.isKeyField())P.push(sf(c,_.key));else{const G=_.data.field(k.field);if(Mv(G))throw new We(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+k.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===G){const J=k.field.canonicalString();throw new We(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${J}' (used as the orderBy) does not exist.`)}P.push(G)}return new Tu(P,C)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Xd(n.firestore);return function(c,m,_,C,P,k){const G=c.explicitOrderBy;if(P.length>G.length)throw new We(we.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const J=[];for(let he=0;he<P.length;he++){const Re=P[he];if(G[he].field.isKeyField()){if("string"!=typeof Re)throw new We(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof Re}`);if(!df(c)&&-1!==Re.indexOf("/"))throw new We(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${C}() must be a plain document ID, but '${Re}' contains a slash.`);const Ne=c.path.child(mn.fromString(Re));if(!st.isDocumentKey(Ne))throw new We(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${C}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const ht=new st(Ne);J.push(sf(m,ht))}else{const Ne=CI(_,C,Re);J.push(Ne)}}return new Tu(J,k)}(n._query,n.firestore._databaseId,s,e,t,r)}}function SI(n,e,t){if("string"==typeof(t=(0,W.m9)(t))){if(""===t)throw new We(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!df(e)&&-1!==t.indexOf("/"))throw new We(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!st.isDocumentKey(r))throw new We(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sf(n,new st(r))}if(t instanceof br)return sf(n,t._key);throw new We(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${em(t)}.`)}function Qf(n,e){if(!Array.isArray(n)||0===n.length)throw new We(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TC(n,e){const t=function(s,u){for(const c of s)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new We(we.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RI{convertValue(e,t="none"){switch(Tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ao(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new rm(Jr(e.latitude),Jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Nv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(s_(e));default:return null}}convertTimestamp(e){const t=ia(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Rt(x_(r));const s=new Tl(r.get(1),r.get(3)),u=new st(r.popFirst(5));return s.isEqual(t)||sr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ux extends RI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}class rh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mu extends Yf{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class um extends Mu{data(e={}){return super.data(e)}}class Ll{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new rh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new um(this._firestore,this._userDataWriter,r.key,r,new rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new We(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(m=>({type:"added",doc:new um(s._firestore,s._userDataWriter,m.doc.key,m.doc,new rh(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const _=new um(s._firestore,s._userDataWriter,m.doc.key,m.doc,new rh(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let C=-1,P=-1;return 0!==m.type&&(C=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),1!==m.type&&(c=c.add(m.doc),P=c.indexOf(m.doc.key)),{type:Qb(m.type),doc:_,oldIndex:C,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function PI(n,e){return n instanceof Mu&&e instanceof Mu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ll&&e instanceof Ll&&n._firestore===e._firestore&&EI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nu extends RI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}function xI(n,e,t){n=gn(n,br);const r=gn(n.firestore,_r),s=xy(n.converter,e,t);return Jf(r,[eh(Xd(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Or.none())])}function lm(n,e,t,...r){n=gn(n,br);const s=gn(n.firestore,_r),u=Xd(s);let c;return c="string"==typeof(e=(0,W.m9)(e))||e instanceof Ha?Ay(u,"updateDoc",n._key,e,t,r):Dy(u,"updateDoc",n._key,e),Jf(s,[c.toMutation(n._key,Or.exists(!0))])}function bC(n){return Jf(gn(n.firestore,_r),[new mg(n._key,Or.none())])}function MI(n,e){const t=gn(n.firestore,_r),r=jc(n),s=xy(n.converter,e);return Jf(t,[eh(Xd(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}function NI(n,...e){var t,r,s;n=(0,W.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||II(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(II(e[c])){const k=e[c];e[c]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[c+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[c+2]=null===(s=k.complete)||void 0===s?void 0:s.bind(k)}let _,C,P;if(n instanceof br)C=gn(n.firestore,_r),P=cf(n._key.path),_={next:k=>{e[c]&&e[c](OI(C,n,k))},error:e[c+1],complete:e[c+2]};else{const k=gn(n,ts);C=gn(k.firestore,_r),P=k._query;const G=new Nu(C);_={next:J=>{e[c]&&e[c](new Ll(C,G,k,J))},error:e[c+1],complete:e[c+2]},EC(n._query)}return function(G,J,he,Re){const Ne=new yy(Re),ht=new ay(J,Ne,he);return G.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return $E(yield qf(G),ht)})),()=>{Ne.Na(),G.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return sy(yield qf(G),ht)}))}}(Gr(C),P,m,_)}function Jf(n,e){return function(r,s){const u=new Nr;return r.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function kT(n,e,t){return Wg.apply(this,arguments)}(yield Jg(r),s,u)})),u.promise}(Gr(n),e)}function OI(n,e,t){const r=t.docs.get(e._key),s=new Nu(n);return new Mu(n,s,e._key,r,new rh(t.hasPendingWrites,t.fromCache),e.converter)}const kI={maxAttempts:5};class LI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xd(e)}set(e,t,r){this._verifyNotCommitted();const s=Ou(e,this._firestore),u=xy(s.converter,t,r),c=eh(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Or.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ou(e,this._firestore);let c;return c="string"==typeof(t=(0,W.m9)(t))||t instanceof Ha?Ay(this._dataReader,"WriteBatch.update",u._key,t,r,s):Dy(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ou(e,this._firestore);return this._mutations=this._mutations.concat(new mg(t._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ou(n,e){if((n=(0,W.m9)(n)).firestore!==e)throw new We(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cS extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Xd(t)}get(t){const r=Ou(t,this._firestore),s=new ux(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return gt();const c=u[0];if(c.isFoundDocument())return new Yf(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new Yf(this._firestore,s,r._key,null,r.converter);throw gt()})}set(t,r,s){const u=Ou(t,this._firestore),c=xy(u.converter,r,s),m=eh(this._dataReader,"Transaction.set",u._key,c,null!==u.converter,s);return this._transaction.set(u._key,m),this}update(t,r,s,...u){const c=Ou(t,this._firestore);let m;return m="string"==typeof(r=(0,W.m9)(r))||r instanceof Ha?Ay(this._dataReader,"Transaction.update",c._key,r,s,u):Dy(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,m),this}delete(t){const r=Ou(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ou(e,this._firestore),r=new Nu(this._firestore);return super.get(e).then(s=>new Mu(this._firestore,r,t._key,s._document,new rh(!1,!1),t.converter))}}!function(e,t=!0){Co=Pr.SDK_VERSION,(0,Pr._registerComponent)(new Ci.wA("firestore",(r,{instanceIdentifier:s,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new _r(new Wp(r.getProvider("auth-internal")),new bd(r.getProvider("app-check-internal")),function(C,P){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new We(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(C.options.projectId,P)}(c,s),c);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,Pr.registerVersion)(Qh,"4.3.2",e),(0,Pr.registerVersion)(Qh,"4.3.2","esm2017")}();var dm=function(){return dm=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},dm.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var mS={includeMetadataChanges:!1};function jI(n,e){return void 0===e&&(e=mS),new ue.y(function(t){return{unsubscribe:NI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}function yS(n,e){var t;void 0===e&&(e={});var r=n.data(e);return n.exists()&&"object"==typeof r&&null!==r&&e.idField?dm(dm({},r),((t={})[e.idField]=n.id,t)):r}function LC(n,e){return void 0===e&&(e={}),function wS(n){return jI(n,{includeMetadataChanges:!0}).pipe((0,Pe.U)(function(e){return e.docs}))}(n).pipe((0,Pe.U)(function(t){return t.map(function(r){return yS(r,e)})}))}var ku=B(2096),Cs=B(4664);B(8290),(0,Pr.registerVersion)("firebase","10.5.2","app");const jC=new class BC extends nu{}(class UC extends Tr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var Tx=B(9397),hm=B(3093),fm=B(5137);const Xf=new p.GfV("ANGULARFIRE2_VERSION");class qc{constructor(){return((n,e)=>{const t=(0,Pr.getApps)(),r=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r})(AS)}}const AS="app-check";function Wc(){}class HC{zone;delegate;constructor(e,t=jC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const s=this.zone;return this.delegate.schedule(function(c){s.runGuarded(()=>{e.apply(this,[c])})},t,r)}}class Ax{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wc,{},Wc,Wc)),t.pipe((0,Tx.b)({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ly=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new HC(Zone.current)),this.insideAngular=t.run(()=>new HC(Zone.current,Io)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(p.LFG(p.R0b))};static \u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pm(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function $C(n){return n.pipe((0,hm.Q)(pm().outsideAngular))}function kr(n){return function GC(n){return function(t){return(t=t.lift(new Ax(n.ngZone))).pipe((0,fm.R)(n.outsideAngular),(0,hm.Q)(n.insideAngular))}}(pm())(n)}var $s=B(3106);$s.Z.registerVersion("firebase","10.5.2","app-compat");const zC=["ngOnDestroy"];class zI{constructor(e){return e}}const Fl=new p.OlP("angularfire2.app.options"),ep=new p.OlP("angularfire2.app.name");function mm(n,e,t){const s="object"==typeof t&&t||{};s.name=s.name||"string"==typeof t&&t||"[DEFAULT]";const c=$s.Z.apps.filter(m=>m&&m.name===s.name)[0]||e.runOutsideAngular(()=>$s.Z.initializeApp(n,s));try{if(JSON.stringify(n)!==JSON.stringify(c.options)){const m=!!module.hot;qC("error",`${c.name} Firebase App already initialized with different options${m?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new zI(c)}const qC=(n,...e)=>{(0,p.X6Q)()&&typeof console<"u"&&console[n](...e)},WC={provide:zI,useFactory:mm,deps:[Fl,p.R0b,[new p.FiY,ep]]};let qI=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Fl,useValue:t},{provide:ep,useValue:r}]}}constructor(t){$s.Z.registerVersion("angularfire",Xf.full,"core"),$s.Z.registerVersion("angularfire",Xf.full,"app-compat"),$s.Z.registerVersion("angular",p.q4F.full,t.toString())}static \u0275fac=function(r){return new(r||n)(p.LFG(p.Lbi))};static \u0275mod=p.oAB({type:n});static \u0275inj=p.cJS({providers:[WC]})}return n})();function _m(n,e,t,r,s){const[,u,c]=globalThis.\u0275AngularfireInstanceCache.find(m=>m[0]===n)||[];if(u)return function NS(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(s,c)||(WI("error",`${e} was already initialized on the ${t} Firebase App with different settings.${ZC?" You may need to reload as Firebase is not HMR aware.":""}`),WI("warn",{is:s,was:c})),u;{const m=r();return globalThis.\u0275AngularfireInstanceCache.push([n,m,s]),m}}const ZC=typeof module<"u"&&!!module.hot,WI=(n,...e)=>{(0,p.X6Q)()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var KC=B(8645),ZI=B(3019);class KI extends KC.x{constructor(e=1/0,t=1/0,r=fs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let m=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)m=_;m&&r.splice(0,m+1)}}}var Fy=B(3020);function YI(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,Fy.B)({connector:()=>new KI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var QI=B(1374),JI=B(4674);function YC(n,e){return(0,JI.m)(e)?(0,Cs.w)(()=>n,e):(0,Cs.w)(()=>n)}var XI=B(2181);const e0=new p.OlP("angularfire2.auth.use-emulator"),Vy=new p.OlP("angularfire2.auth.settings"),ym=new p.OlP("angularfire2.auth.tenant-id"),Uy=new p.OlP("angularfire2.auth.langugage-code"),t0=new p.OlP("angularfire2.auth.use-device-language"),By=new p.OlP("angularfire.auth.persistence"),jy=(n,e,t,r,s,u,c,m)=>_m(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),c)for(const[C,P]of Object.entries(c))_.settings[C]=P;return m&&_.setPersistence(m),_},[t,r,s,u,c,m]);let vm=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,s,u,c,m,_,C,P,k,G,J){const he=new KC.x,Re=(0,ku.of)(void 0).pipe((0,hm.Q)(c.outsideAngular),(0,Cs.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8290)))),(0,Pe.U)(()=>mm(t,u,r)),(0,Pe.U)(Ne=>jy(Ne,u,m,C,P,k,_,G)),YI({bufferSize:1,refCount:!1}));if((0,K.PM)(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ku.of)(null);else{Re.pipe((0,QI.P)()).subscribe();const Ne=Re.pipe((0,Cs.w)(Qe=>Qe.getRedirectResult().then(Ct=>Ct,()=>null)),kr,YI({bufferSize:1,refCount:!1})),ht=Re.pipe((0,Cs.w)(Qe=>new ue.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Qe.onAuthStateChanged(Xt=>Ct.next(Xt),Xt=>Ct.error(Xt),()=>Ct.complete()))})))),mt=Re.pipe((0,Cs.w)(Qe=>new ue.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Qe.onIdTokenChanged(Xt=>Ct.next(Xt),Xt=>Ct.error(Xt),()=>Ct.complete()))}))));this.authState=Ne.pipe(YC(ht),(0,fm.R)(c.outsideAngular),(0,hm.Q)(c.insideAngular)),this.user=Ne.pipe(YC(mt),(0,fm.R)(c.outsideAngular),(0,hm.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Cs.w)(Qe=>Qe?(0,ie.D)(Qe.getIdToken()):(0,ku.of)(null))),this.idTokenResult=this.user.pipe((0,Cs.w)(Qe=>Qe?(0,ie.D)(Qe.getIdTokenResult()):(0,ku.of)(null))),this.credential=(0,ZI.T)(Ne,he,this.authState.pipe((0,XI.h)(Qe=>!Qe))).pipe((0,Pe.U)(Qe=>Qe?.user?Qe:null),(0,fm.R)(c.outsideAngular),(0,hm.Q)(c.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(s,u)=>t.runOutsideAngular(()=>{if(n[u])return r?.spy?.get&&r.spy.get(u,n[u]),n[u];if(zC.indexOf(u)>-1)return()=>{};const c=e.toPromise().then(m=>{const _=m?.[u];return"function"==typeof _?_.bind(m):_?.then?_.then(C=>t.run(()=>C)):t.run(()=>_)});return new Proxy(()=>{},{get:(m,_)=>c[_],apply:(m,_,C)=>c.then(P=>{const k=P?.(...C);return r?.spy?.apply&&r.spy.apply(u,C,k),k})})})}))(this,Re,u,{spy:{apply:(Ne,ht,mt)=>{(Ne.startsWith("signIn")||Ne.startsWith("createUser"))&&mt.then(Qe=>he.next(Qe))}}})}static \u0275fac=function(r){return new(r||n)(p.LFG(Fl),p.LFG(ep,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ly),p.LFG(e0,8),p.LFG(Vy,8),p.LFG(ym,8),p.LFG(Uy,8),p.LFG(t0,8),p.LFG(By,8),p.LFG(qc,8))};static \u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),QC=(()=>{class n{constructor(){$s.Z.registerVersion("angularfire",Xf.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=p.oAB({type:n});static \u0275inj=p.cJS({providers:[vm]})}return n})();var Hy=B(7921),$y=B(9360);function Gy(){return(0,$y.e)((n,e)=>{let t,r=!1;n.subscribe((0,De.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var tp=B(6699),Ds=B(3997);function n0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new We("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LS(){if(typeof Uint8Array>"u")throw new We("unimplemented","Uint8Arrays are not available in this environment.")}function FS(){if(!function OA(){return typeof atob<"u"}())throw new We("unimplemented","Blobs are unavailable in Firestore in this environment.")}class rp{constructor(e){this._delegate=e}static fromBase64String(e){return FS(),new rp(Nl.fromBase64String(e))}static fromUint8Array(e){return LS(),new rp(Nl.fromUint8Array(e))}toBase64(){return FS(),this._delegate.toBase64()}toUint8Array(){return LS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Em(n){return function Sx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Rx{enableIndexedDbPersistence(e,t){return function iC(n,e){dC(n=gn(n,_r));const t=Gr(n);if(t._uninitializedComponentsProvider)throw new We(we.FAILED_PRECONDITION,"SDK cache is already specified.");Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new $f;return TI(t,s,new Bc(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sC(n){dC(n=gn(n,_r));const e=Gr(n);if(e._uninitializedComponentsProvider)throw new We(we.FAILED_PRECONDITION,"SDK cache is already specified.");Yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new $f;return TI(e,r,new zT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oC(n){if(n._initialized&&!n._terminated)throw new We(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{yield(t=(0,Me.Z)(function*(s){if(!es.D())return Promise.resolve();const u=s+"main";yield es.delete(u)}),function r(s){return t.apply(this,arguments)})(EE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function nC(n,e,t,r={}){var s;const u=(n=gn(n,tm))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let m,_;if("string"==typeof r.mockUserToken)m=r.mockUserToken,_=oi.MOCK_USER;else{m=(0,W.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new We(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new oi(C)}n._authCredentials=new Ji(new Jh(m,_))}}(this._delegate,e,t,r)}enableNetwork(){return function uC(n){return function Nb(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield ZT(n),t=yield KT(n);return e.setNetworkEnabled(!0),function(s){const u=nt(s);return u.C_.delete(0),Ru(u)}(t)}))}(Gr(n=gn(n,_r)))}(this._delegate)}disableNetwork(){return function lC(n){return function Ob(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield ZT(n),t=yield KT(n);return e.setNetworkEnabled(!1),(r=(0,Me.Z)(function*(u){const c=nt(u);c.C_.add(0),yield Ba(c),c.M_.set("Offline")}),function s(u){return r.apply(this,arguments)})(t);var r}))}(Gr(n=gn(n,_r)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aC(n){return function(t){const r=new Nr;return t.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function Sb(n,e){return JE.apply(this,arguments)}(yield Jg(t),r)})),r.promise}(Gr(n=gn(n,_r)))}(this._delegate)}onSnapshotsInSync(e){return function nS(n,e){return function JT(n,e){const t=new yy(e);return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return s=yield qf(n),u=t,nt(s).q_.add(u),void u.next();var s,u})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return s=yield qf(n),u=t,void nt(s).q_.delete(u);var s,u}))}}(Gr(n=gn(n,_r)),II(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new We("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oh(this,Ty(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ua(this,jc(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,function Fb(n,e){if(n=gn(n,tm),wy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new We(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(r=e,new ka(mn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function dS(n,e,t){n=gn(n,_r);const r=Object.assign(Object.assign({},kI),t);return function(u){if(u.maxAttempts<1)throw new We(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,c,m){const _=new Nr;return u.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){const C=yield function zf(n){return Qg(n).then(e=>e.datastore)}(u);new WT(u.asyncQueue,C,m,c,_).run()})),_.promise}(Gr(n),s=>e(new cS(n,s)),r)}(this._delegate,t=>e(new zy(this,t)))}batch(){return Gr(this._delegate),new JC(new LI(this._delegate,e=>Jf(this._delegate,e)))}loadBundle(e){return function cC(n,e){const t=Gr(n=gn(n,_r)),r=new Ub;return function XT(n,e,t,r){const s=function(c,m){let _;return _="string"==typeof c?Qv().encode(c):c,P=function(P,k){if(P instanceof Uint8Array)return uI(P,k);if(P instanceof ArrayBuffer)return uI(new Uint8Array(P),k);if(P instanceof ReadableStream)return P.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new qT(P,m);var P}(t,vi(e));n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){!function Mb(n,e,t){const r=nt(n);var s;(s=(0,Me.Z)(function*(c,m,_){try{const C=yield m.getMetadata();if(yield function(he,Re){const Ne=nt(he),ht=ui(Re.createTime);return Ne.persistence.runTransaction("hasNewerBundle","readonly",mt=>Ne.Kr.getBundleMetadata(mt,Re.id)).then(mt=>!!mt&&mt.createTime.compareTo(ht)>=0)}(c.localStore,C))return yield m.close(),_._completeWith({taskState:"Success",documentsLoaded:(he=C).totalDocuments,bytesLoaded:he.totalBytes,totalDocuments:he.totalDocuments,totalBytes:he.totalBytes}),Promise.resolve(new Set);_._updateProgress(Gg(C));const P=new wb(C,c.localStore,m.serializer);let k=yield m.Ma();for(;k;){const J=yield P.ea(k);J&&_._updateProgress(J),k=yield m.Ma()}const G=yield P.complete();return yield Pu(c,G.ra,void 0),yield function(he,Re){const Ne=nt(he);return Ne.persistence.runTransaction("Save bundle","readwrite",ht=>Ne.Kr.saveBundleMetadata(ht,Re))}(c.localStore,C),_._completeWith(G.progress),Promise.resolve(G.na)}catch(C){return Yi("SyncEngine",`Loading bundle failed with ${C}`),_._failWith(C),Promise.resolve(new Set)}var he}),function u(c,m,_){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield Jg(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Jd(n,e){return function eC(n,e){return n.asyncQueue.enqueue((0,Me.Z)(function*(){return function(r,s){const u=nt(r);return u.persistence.runTransaction("Get named query","readonly",c=>u.Kr.getNamedQuery(c,s))}(yield Gf(n),e)}))}(Gr(n=gn(n,_r)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ui(this,t):null)}}class Zc extends RI{constructor(e){super(),this.firestore=e}convertBytes(e){return new rp(new Nl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ua.forKey(t,this.firestore,null)}}class zy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Zc(e)}get(e){const t=ah(e);return this._delegate.get(t).then(r=>new ip(this._firestore,new Mu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ah(e);return r?(n0("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ah(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ah(e);return this._delegate.delete(t),this}}class JC{constructor(e){this._delegate=e}set(e,t,r){const s=ah(e);return r?(n0("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ah(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ah(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new um(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Im(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kc.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Kc(e,new Zc(e),t),s.set(t,u)),u}}Kc.INSTANCES=new WeakMap;class ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zc(e)}static forPath(e,t,r){if(e.length%2!=0)throw new We("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ua(t,new br(t._delegate,r,new st(e)))}static forKey(e,t,r){return new ua(t,new br(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oh(this.firestore,Ty(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,W.m9)(e))instanceof br&&rC(this._delegate,e)}set(e,t){t=n0("DocumentReference.set",t);try{return t?xI(this._delegate,e,t):xI(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lm(this._delegate,e):lm(this._delegate,e,t,...r)}catch(s){throw Gs(s,"updateDoc()","DocumentReference.update()")}}delete(){return bC(this._delegate)}onSnapshot(...e){const t=XC(e),r=qy(e,s=>new ip(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return NI(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Xb(n){n=gn(n,br);const e=gn(n.firestore,_r),t=Gr(e),r=new Nu(e);return function YT(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(r=(0,Me.Z)(function*(u,c,m){try{const _=yield function(P,k){const G=nt(P);return G.persistence.runTransaction("read document","readonly",J=>G.localDocuments.getDocument(J,k))}(u,c);_.isFoundDocument()?m.resolve(_):_.isNoDocument()?m.resolve(null):m.reject(new We(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const C=Vf(_,`Failed to get document '${c} from cache`);m.reject(C)}}),function s(u,c,m){return r.apply(this,arguments)})(yield Gf(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Mu(e,r,n._key,s,new rh(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function DC(n){n=gn(n,br);const e=gn(n.firestore,_r);return fI(Gr(e),n._key,{source:"server"}).then(t=>OI(e,n,t))}(this._delegate):function Jb(n){n=gn(n,br);const e=gn(n.firestore,_r);return fI(Gr(e),n._key).then(t=>OI(e,n,t))}(this._delegate),t.then(r=>new ip(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?Kc.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function XC(n){for(const e of n)if("object"==typeof e&&!Em(e))return e;return{}}function qy(n,e){var t,r;let s;return s=Em(n[0])?n[0]:Em(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class ip{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ua(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PI(this._delegate,e._delegate)}}class Im extends ip{data(e){const t=this._delegate.data(e);return function Qi(n,e){n||gt()}(void 0!==t),t}}class Ui{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zc(e)}where(e,t,r){try{return new Ui(this.firestore,zc(this._delegate,function Gb(n,e,t){const r=e,s=sm("where",n);return om._create(s,r,t)}(e,t,r)))}catch(s){throw Gs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ui(this.firestore,zc(this._delegate,function IC(n,e="asc"){const t=e,r=sm("orderBy",n);return AI._create(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ui(this.firestore,zc(this._delegate,function Wb(n){return vI("limit",n),Ry._create("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ui(this.firestore,zc(this._delegate,function sx(n){return vI("limitToLast",n),Ry._create("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ui(this.firestore,zc(this._delegate,function ox(...n){return bI._create("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ui(this.firestore,zc(this._delegate,function ax(...n){return bI._create("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ui(this.firestore,zc(this._delegate,function Py(...n){return am._create("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ui(this.firestore,zc(this._delegate,function Zb(...n){return am._create("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return EI(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eS(n){n=gn(n,ts);const e=gn(n.firestore,_r),t=Gr(e),r=new Nu(e);return function Iy(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(r=(0,Me.Z)(function*(u,c,m){try{const _=yield q_(u,c,!0),C=new qE(c,_.ls),P=C.ca(_.documents),k=C.applyChanges(P,!1);m.resolve(k.snapshot)}catch(_){const C=Vf(_,`Failed to execute query '${c} against cache`);m.reject(C)}}),function s(u,c,m){return r.apply(this,arguments)})(yield Gf(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ll(e,r,n,s))}(this._delegate):"server"===e?.source?function tS(n){n=gn(n,ts);const e=gn(n.firestore,_r),t=Gr(e),r=new Nu(e);return QT(t,n._query,{source:"server"}).then(s=>new Ll(e,r,n,s))}(this._delegate):function AC(n){n=gn(n,ts);const e=gn(n.firestore,_r),t=Gr(e),r=new Nu(e);return EC(n._query),QT(t,n._query).then(s=>new Ll(e,r,n,s))}(this._delegate),t.then(r=>new eD(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XC(e),r=qy(e,s=>new eD(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return NI(this._delegate,t,r)}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?Kc.getInstance(this.firestore,e):null))}}class r0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Im(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Im(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new r0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Im(this._firestore,r))})}isEqual(e){return PI(this._delegate,e._delegate)}}class oh extends Ui{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ua(this.firestore,e):null}doc(e){try{return new ua(this.firestore,void 0===e?jc(this._delegate):jc(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return MI(this._delegate,e).then(t=>new ua(this.firestore,t))}isEqual(e){return rC(this._delegate,e._delegate)}withConverter(e){return new oh(this.firestore,this._delegate.withConverter(e?Kc.getInstance(this.firestore,e):null))}}function ah(n){return gn(n,br)}class Wy{constructor(...e){this._delegate=new Ha(...e)}static documentId(){return new Wy(jn.keyField().canonicalString())}isEqual(e){return(e=(0,W.m9)(e))instanceof Ha&&this._delegate._internalPath.isEqual(e._internalPath)}}class la{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hS(){return new pC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new la(e)}static delete(){const e=function FI(){return new $c("deleteField")}();return e._methodName="FieldValue.delete",new la(e)}static arrayUnion(...e){const t=function xC(...n){return new gC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new la(t)}static arrayRemove(...e){const t=function ih(...n){return new mC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new la(t)}static increment(e){const t=function MC(n){return new Hb("increment",n)}(e);return t._methodName="FieldValue.increment",new la(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BS={Firestore:VS,GeoPoint:rm,Timestamp:bn,Blob:rp,Transaction:zy,WriteBatch:JC,DocumentReference:ua,DocumentSnapshot:ip,Query:Ui,QueryDocumentSnapshot:Im,QuerySnapshot:eD,CollectionReference:oh,FieldPath:Wy,FieldValue:la,setLogLevel:function US(n){!function Ad(n){Ra.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nD(n,e){return function Px(n,e=Io){return new ue.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function o0(n,e){return nD(n,e).pipe((0,Pe.U)(t=>({payload:t,type:"query"})))}!function s0(n){(function tD(n,e){n.INTERNAL.registerComponent(new Ci.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},BS)))})(n,(e,t)=>new VS(e,t,new Rx)),n.registerVersion("@firebase/firestore-compat","0.3.21")}($s.Z);class rD{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=c0(r,t);return new oD(s,u,this.afs)}snapshotChanges(){return function xx(n,e){return nD(n,e).pipe((0,Hy.O)(void 0),Gy(),(0,Pe.U)(t=>{const[r,s]=t;return s.exists?r?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pe.U)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return(0,ie.D)(this.ref.get(e)).pipe(kr)}}function Zy(n,e){return o0(n,e).pipe((0,Hy.O)(void 0),Gy(),(0,Pe.U)(t=>{const[r,s]=t,u=s.payload.docChanges(),c=u.map(m=>({type:m.type,payload:m}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((m,_)=>{const C=u.find(k=>k.doc.ref.isEqual(m.ref)),P=r?.payload.docs.find(k=>k.ref.isEqual(m.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(m.metadata)||!C&&P&&JSON.stringify(P.metadata)===JSON.stringify(m.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:m}})}),c}))}function a0(n,e,t){return Zy(n,t).pipe((0,tp.R)((r,s)=>function iD(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function sD(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return u0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return u0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return u0(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,Ds.x)(),(0,Pe.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function u0(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function l0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oD{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pe.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe((0,Hy.O)(void 0),Gy(),(0,XI.h)(([r,s])=>s.length>0||!r),(0,Pe.U)(([,r])=>r),kr)}auditTrail(e){return this.stateChanges(e).pipe((0,tp.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=l0(e);return a0(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr)}valueChanges(e={}){return o0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),kr)}get(e){return(0,ie.D)(this.query.get(e)).pipe(kr)}add(e){return this.ref.add(e)}doc(e){return new rD(this.ref.doc(e),this.afs)}}class jS{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,XI.h)(t=>t.length>0),kr):Zy(this.query,this.afs.schedulers.outsideAngular).pipe(kr)}auditTrail(e){return this.stateChanges(e).pipe((0,tp.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=l0(e);return a0(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr)}valueChanges(e={}){return o0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(r=>r.payload.docs.map(s=>e.idField?{[e.idField]:s.id,...s.data()}:s.data())),kr)}get(e){return(0,ie.D)(this.query.get(e)).pipe(kr)}}const aD=new p.OlP("angularfire2.enableFirestorePersistence"),HS=new p.OlP("angularfire2.firestore.persistenceSettings"),uD=new p.OlP("angularfire2.firestore.settings"),lD=new p.OlP("angularfire2.firestore.use-emulator");function c0(n,e=(t=>t)){return{query:e(n),ref:n}}let cD=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,s,u,c,m,_,C,P,k,G,J,he,Re,Ne,ht,mt){this.schedulers=_;const Qe=mm(t,m,r),Ct=P;k&&jy(Qe,m,G,he,Re,Ne,J,ht),[this.firestore,this.persistenceEnabled$]=_m(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Xt=m.runOutsideAngular(()=>Qe.firestore());if(u&&Xt.settings(u),Ct&&Xt.useEmulator(...Ct),s&&!(0,K.PM)(c)){const En=()=>{try{return(0,ie.D)(Xt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ei){return typeof console<"u"&&console.warn(ei),(0,ku.of)(!1)}};return[Xt,m.runOutsideAngular(En)]}return[Xt,(0,ku.of)(!1)]},[u,Ct,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=c0(s,r),m=this.schedulers.ngZone.run(()=>u);return new oD(m,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new jS(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new rD(s,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(p.LFG(Fl),p.LFG(ep,8),p.LFG(aD,8),p.LFG(uD,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ly),p.LFG(HS,8),p.LFG(lD,8),p.LFG(vm,8),p.LFG(e0,8),p.LFG(Vy,8),p.LFG(ym,8),p.LFG(Uy,8),p.LFG(t0,8),p.LFG(By,8),p.LFG(qc,8))};static \u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),wm=(()=>{class n{get currentUserProfile$(){return(0,ie.D)(this.angularfireauth.currentUser).pipe((0,Cs.w)(t=>t&&"object"==typeof t&&"uid"in t?function NC(n,e){return void 0===e&&(e={}),function _S(n){return jI(n,{includeMetadataChanges:!0})}(n).pipe((0,Pe.U)(function(t){return yS(t,e)}))}(jc(this.angularfirestore.firestore,"users",t.uid)):(0,ku.of)(null)))}constructor(t,r,s){this.angularfireauth=t,this.angularfirestore=r,this.router=s,this.isLoggedIn=!1}signin(t,r){var s=this;return(0,Me.Z)(function*(){yield s.angularfireauth.signInWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(u.user))})})()}signup(t,r){var s=this;return(0,Me.Z)(function*(){return s.angularfireauth.createUserWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("IsAuthorized","true"),s.router.navigate(["/dashboard/home"]),localStorage.setItem("user",JSON.stringify(u.user))}).catch(u=>{alert("Invalid Data"),console.log(u)})})()}logout(){this.angularfireauth.signOut(),localStorage.removeItem("user")}forgotPassword(t){this.angularfireauth.sendPasswordResetEmail(t)}saveData(t){MI(Ty(this.angularfirestore.firestore,"users"),t.value).then(s=>{console.log(s),this.userId=s.id,console.log("data saved successfully")}).catch(s=>{console.log(s)})}getDatas(){const t=Ty(this.angularfirestore.firestore,"users");LC(t,{idField:"id"}).subscribe(r=>{console.log(r),localStorage.setItem("users",JSON.stringify(r))}),this.userData=LC(t,{idField:"id"})}addUser(t){const r=jc(this.angularfirestore.firestore,"users",t?.uid);return(0,ie.D)(xI(r,t))}updateData(t){const r=jc(this.angularfirestore.firestore,"users",t?.uid);return(0,ie.D)(lm(r,{...t}))}deleteData(t){const r=jc(this.angularfirestore.firestore,"users",t?.uid);return(0,ie.D)(bC(r).then(()=>{alert("Data Deleted !")}))}static#e=this.\u0275fac=function(r){return new(r||n)(p.LFG(vm),p.LFG(cD),p.LFG(xi.F0))};static#t=this.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nx(n,e){if(1&n){const t=p.EpF();p.O4$(),p.TgZ(0,"svg",20),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.showPassword())}),p._UZ(1,"path",21)(2,"path",22),p.qZA()}}function dD(n,e){if(1&n){const t=p.EpF();p.O4$(),p.TgZ(0,"svg",20),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.showPassword())}),p._UZ(1,"path",23),p.qZA()}}let Ox=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.email="",this.password="",this.changetype=!0,this.viewIcon=!0}register(){this.router.navigate(["/register"])}login(t,r){var s=this;return(0,Me.Z)(function*(){yield s.userinfo.signin(t,r),s.userinfo.isLoggedIn?(localStorage.setItem("IsAuthorized","true"),s.router.navigate(["/dashboard/home"])):alert("Invalid Data")})()}ForgotPassword(t){t?(this.userinfo.forgotPassword(t),window.location.reload()):alert("Fill Email Field !")}showPassword(){this.changetype=!this.changetype,this.viewIcon=!this.viewIcon}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(xi.F0),p.Y36(wm))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-user-login"]],decls:29,vars:5,consts:[[1,"flex","w-full","h-screen"],[1,"mx-auto","mt-20"],[1,"border-4","border-golden","h-96","w-96","rounded-3xl"],["src","././assets/img/navlogo.png",1,"p-6","rounded-full"],[1,"flex","flex-col","items-center","justify-center","mt-2"],[1,"mx-auto","my-3"],["for","email",1,"text-gray-800"],["type","email","id","email","name","email",1,"ml-2","border-2","border-golden","outline-none","hover:border-amber-400","rounded-md",3,"ngModel","ngModelChange"],[1,"mx-auto","my-3","flex","flex-row"],["for","password",1,"text-gray-800"],[1,"flex","flex-row","ml-2","border-2","border-golden","rounded-md"],["id","password",1,"border-golden","outline-none",3,"type","ngModel","ngModelChange"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","w-6 h-6 text-golden",3,"click",4,"ngIf"],[1,"flex","justify-between","w-full","h-fit","mt-2"],[1,"mx-10","text-blue-600"],["for","passwordreset",1,"cursor-pointer","hover:underline",3,"click"],[1,"mx-10"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-center","text-white","rounded-lg","bg-golden","hover:bg-golden","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],[1,"text-center","w-full","mt-4"],[1,"text-blue-600","bg-golden","w-64","mx-5","rounded-lg","font-bold","py-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-golden",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),p._UZ(4,"img",3),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"label",6),p._uU(8,"Email :"),p.qZA(),p.TgZ(9,"input",7),p.NdJ("ngModelChange",function(c){return s.email=c}),p.qZA()(),p.TgZ(10,"div",8)(11,"label",9),p._uU(12,"Password :"),p.qZA(),p.TgZ(13,"div",10)(14,"div")(15,"input",11),p.NdJ("ngModelChange",function(c){return s.password=c}),p.qZA()(),p.TgZ(16,"div"),p.YNc(17,Nx,3,0,"svg",12),p.YNc(18,dD,2,0,"svg",12),p.qZA()()(),p.TgZ(19,"div",13)(20,"div",14)(21,"label",15),p.NdJ("click",function(){return s.ForgotPassword(s.email)}),p._uU(22,"Forgot Password?"),p.qZA()(),p.TgZ(23,"div",16)(24,"button",17),p.NdJ("click",function(){return s.login(s.email,s.password)}),p._uU(25,"LOGIN"),p.qZA()()()(),p.TgZ(26,"div",18)(27,"button",19),p.NdJ("click",function(){return s.register()}),p._uU(28,"Create Account"),p.qZA()()()()()),2&r&&(p.xp6(9),p.Q6J("ngModel",s.email),p.xp6(6),p.Q6J("type",s.changetype?"password":"text")("ngModel",s.password),p.xp6(2),p.Q6J("ngIf",1==s.viewIcon),p.xp6(1),p.Q6J("ngIf",0==s.viewIcon))},dependencies:[K.O5,Fe,St,_o]})}return n})();function kx(n,e){if(1&n){const t=p.EpF();p.O4$(),p.TgZ(0,"svg",41),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.showPassword())}),p._UZ(1,"path",42)(2,"path",43),p.qZA()}}function Lx(n,e){if(1&n){const t=p.EpF();p.O4$(),p.TgZ(0,"svg",41),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.showPassword())}),p._UZ(1,"path",44),p.qZA()}}let Fx=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.changetype=!0,this.viewIcon=!0}register(t){var r=this;return(0,Me.Z)(function*(){console.log(t.value),console.log(t.value.email,t.value.password),r.userinfo.signup(t.value.email,t.value.password),r.userinfo.saveData(t)})()}login(){this.router.navigate(["/login"])}showPassword(){this.changetype=!this.changetype,this.viewIcon=!this.viewIcon}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(xi.F0),p.Y36(wm))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-user-registration"]],decls:63,vars:4,consts:[[1,"flex","w-full","h-screen"],[1,"mx-auto","mt-20"],[1,"border-4","border-golden","max-h-fit","w-96","rounded-3xl"],["src","././assets/img/navlogo.png",1,"p-6","rounded-full"],[3,"ngSubmit"],["form","ngForm"],[1,"flex","flex-col","items-center","justify-center","mt-2"],[1,"mx-auto","my-2"],["for","firstname",1,"text-gray-800"],["type","text","id","firstname","name","firstname","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","lastname",1,"text-gray-800"],["type","text","id","lastname","name","lastname","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","title",1,"text-gray-800"],["type","radio","id","titleMr","name","title","ngModel","","value","Mr.",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","titleMr"],["type","radio","id","titleMrs","name","title","ngModel","","value","Mrs.",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","titleMrs"],["type","radio","id","titleMiss","name","title","ngModel","","value","Miss",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","titleMiss"],["type","radio","id","titleDr","name","title","ngModel","","value","Dr.",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","titleDr"],["for","mobile",1,"text-gray-800"],["type","text","id","mobile","name","mobile","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],["for","email",1,"text-gray-800"],["type","email","id","email","name","email","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],[1,"mx-auto","my-auto"],["for","address",1,"text-gray-800"],["type","text","id","address","name","address","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],[1,"flex","flex-row","mx-auto","my-3"],["for","password",1,"text-gray-800"],[1,"flex","flex-row","ml-2","border-2","rounded-md","border-golden"],["id","password","name","password","ngModel","",1,"outline-none",3,"type"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","w-6 h-6 text-golden",3,"click",4,"ngIf"],[1,"mx-auto","my-3"],["for","confirmPassword",1,"text-gray-800"],["id","confirmPassword","name","confirmPassword","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none",3,"type"],[1,"flex","flex-row","w-full","my-5","h-fit"],[1,"w-full","ml-4","text-blue-600","basis-9/12"],["for","passwordreset",1,"cursor-pointer",3,"click"],[1,"mx-10"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-center","text-white","rounded-lg","bg-golden","focus:ring-amber-300","basis-3/12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-golden",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(r,s){if(1&r){const u=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),p._UZ(4,"img",3),p.qZA(),p.TgZ(5,"form",4,5),p.NdJ("ngSubmit",function(){p.CHM(u);const m=p.MAs(6);return p.KtG(s.register(m))}),p.TgZ(7,"div",6)(8,"div",7)(9,"label",8),p._uU(10,"First Name :"),p.qZA(),p._UZ(11,"input",9),p.qZA(),p.TgZ(12,"div",7)(13,"label",10),p._uU(14,"Last Name :"),p.qZA(),p._UZ(15,"input",11),p.qZA(),p.TgZ(16,"div",7)(17,"label",12),p._uU(18,"Select Title:"),p.qZA(),p._UZ(19,"input",13),p.TgZ(20,"label",14),p._uU(21,"Mr."),p.qZA(),p._UZ(22,"input",15),p.TgZ(23,"label",16),p._uU(24,"Mrs."),p.qZA(),p._UZ(25,"input",17),p.TgZ(26,"label",18),p._uU(27,"Miss"),p.qZA(),p._UZ(28,"input",19),p.TgZ(29,"label",20),p._uU(30,"Dr."),p.qZA()(),p.TgZ(31,"div",7)(32,"label",21),p._uU(33,"Mobile :"),p.qZA(),p._UZ(34,"input",22),p.qZA(),p.TgZ(35,"div",7)(36,"label",23),p._uU(37,"Email :"),p.qZA(),p._UZ(38,"input",24),p.qZA(),p.TgZ(39,"div",25)(40,"label",26),p._uU(41,"Address :"),p.qZA(),p._UZ(42,"textarea",27),p.qZA(),p.TgZ(43,"div",28)(44,"label",29),p._uU(45,"Password :"),p.qZA(),p.TgZ(46,"div",30)(47,"div"),p._UZ(48,"input",31),p.qZA(),p.TgZ(49,"div"),p.YNc(50,kx,3,0,"svg",32),p.YNc(51,Lx,2,0,"svg",32),p.qZA()()(),p.TgZ(52,"div",33)(53,"label",34),p._uU(54,"Confirm Password :"),p.qZA(),p._UZ(55,"input",35),p.qZA(),p.TgZ(56,"div",36)(57,"div",37)(58,"label",38),p.NdJ("click",function(){return s.login()}),p._uU(59,"Already have an account?"),p.qZA()(),p.TgZ(60,"div",39)(61,"button",40),p._uU(62,"register"),p.qZA()()()()()()()()}2&r&&(p.xp6(48),p.Q6J("type",s.changetype?"password":"text"),p.xp6(2),p.Q6J("ngIf",1==s.viewIcon),p.xp6(1),p.Q6J("ngIf",0==s.viewIcon),p.xp6(4),p.Q6J("type",s.changetype?"password":"text"))},dependencies:[K.O5,jo,Fe,yo,St,Dn,_o,wr]})}return n})();function Vx(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"div",17),p._UZ(2,"img",18),p.TgZ(3,"div",19)(4,"h3"),p._uU(5),p.qZA(),p.TgZ(6,"p"),p._uU(7),p.ALo(8,"currency"),p.qZA(),p.TgZ(9,"div",20)(10,"button",21),p.NdJ("click",function(){const u=p.CHM(t).index,c=p.oxw(2);return p.KtG(c.decreaseQuantity(u))}),p._uU(11,"-"),p.qZA(),p.TgZ(12,"span",22),p._uU(13),p.qZA(),p.TgZ(14,"button",21),p.NdJ("click",function(){const u=p.CHM(t).index,c=p.oxw(2);return p.KtG(c.increaseQuantity(u))}),p._uU(15,"+"),p.qZA()(),p.TgZ(16,"div",23)(17,"button",24),p.NdJ("click",function(){const u=p.CHM(t).$implicit,c=p.oxw(2);return p.KtG(c.removeItemFromCart(u))}),p._uU(18,"Remove"),p.qZA()()()()()}if(2&n){const t=e.$implicit;p.xp6(2),p.s9C("alt",t.name),p.Q6J("src",t.image,p.LSH),p.xp6(3),p.Oqu(t.name),p.xp6(2),p.hij("Price: ",p.xi3(8,5,t.totalPrice,"INR"),""),p.xp6(6),p.Oqu(t.quantity)}}function Ux(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div")(1,"div",4)(2,"h2",5),p._uU(3,"Your Cart"),p.qZA()(),p.TgZ(4,"div",6)(5,"div",7),p.YNc(6,Vx,19,8,"div",8),p.qZA(),p.TgZ(7,"div",9)(8,"div",10)(9,"h2",11),p._uU(10,"Summary"),p.qZA(),p.TgZ(11,"div",12)(12,"span"),p._uU(13,"Subtotal"),p.qZA(),p.TgZ(14,"span"),p._uU(15),p.ALo(16,"currency"),p.qZA()(),p.TgZ(17,"div",12)(18,"span"),p._uU(19,"Taxes (10%)"),p.qZA(),p.TgZ(20,"span"),p._uU(21),p.ALo(22,"currency"),p.qZA()(),p.TgZ(23,"div",12)(24,"span"),p._uU(25,"Shipping Charges"),p.qZA(),p.TgZ(26,"span"),p._uU(27),p.ALo(28,"currency"),p.qZA()(),p._UZ(29,"hr",13),p.TgZ(30,"div",12)(31,"span",14),p._uU(32,"Total"),p.qZA(),p.TgZ(33,"span",14),p._uU(34),p.ALo(35,"currency"),p.qZA()(),p.TgZ(36,"button",15),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.Checkout())}),p._uU(37,"Checkout"),p.qZA(),p.TgZ(38,"button",16),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.clearCart())}),p._uU(39,"Clear Cart"),p.qZA()()()(),p._UZ(40,"div"),p.qZA()}if(2&n){const t=p.oxw();p.xp6(6),p.Q6J("ngForOf",t.cartItems),p.xp6(9),p.Oqu(p.xi3(16,5,(t.overallTotal-20)/1.1,"INR")),p.xp6(6),p.Oqu(p.xi3(22,8,(t.overallTotal-20)/11,"INR")),p.xp6(6),p.Oqu(p.xi3(28,11,20,"INR")),p.xp6(7),p.Oqu(p.xi3(35,14,t.overallTotal,"INR"))}}function Bx(n,e){1&n&&(p.TgZ(0,"div",25)(1,"div",26)(2,"h1",27),p._uU(3,"Your cart is empty."),p.qZA(),p.TgZ(4,"div",28)(5,"a",29),p._uU(6,"Go to home page"),p.qZA()()()())}let jx=(()=>{class n{constructor(t,r){this.cartService=t,this.router=r,this.cartItems=[],this.overallTotal=0}ngOnInit(){this.cartService.getCartItems().subscribe(t=>{this.cartItems=t}),this.calculateOverallTotal()}increaseQuantity(t){this.cartItems[t].quantity++,this.cartItems[t].totalPrice=this.cartItems[t].quantity*this.cartItems[t].price,this.calculateOverallTotal()}decreaseQuantity(t){this.cartItems[t].quantity>1&&(this.cartItems[t].quantity--,this.cartItems[t].totalPrice=this.cartItems[t].quantity*this.cartItems[t].price,this.calculateOverallTotal())}removeItemFromCart(t){this.cartService.removeFromCart(t),this.calculateOverallTotal()}clearCart(){this.cartService.clearCart(),this.cartItems=[]}calculateOverallTotal(){const t=this.cartItems.reduce((u,c)=>u+c.price*c.quantity,0);this.overallTotal=t+.1*t+20}Checkout(){this.router.navigate(["/checkout"])}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Wu.N),p.Y36(xi.F0))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-cart"]],decls:5,vars:2,consts:[[1,"w-screen","h-screen","bg-gray-400","bg-opacity-50"],[1,"w-full","bg-slate-400","h-fit"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"flex","justify-between","w-full","h-10","p-6","mx-3","my-auto"],[1,"font-serif","text-3xl"],[1,"flex","items-start","justify-start","w-full"],[1,"flex","flex-wrap","items-start","justify-start","w-3/5","gap-5","p-5","mx-auto","h-fit"],[4,"ngFor","ngForOf"],[1,"md:w-1/4","m-5"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"my-2"],[1,"font-semibold"],[1,"bg-blue-500","text-white","py-2","px-4","rounded-lg","mt-4","w-full",3,"click"],[1,"w-full","h-8","mt-2","text-white","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"flex","justify-center","items-center"],[1,"w-8","h-8","bg-blue-600","text-white","rounded-xl",3,"click"],[1,"mx-2"],[1,"mt-2"],[1,"w-full","h-8","text-white","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"],[1,"h-screen","bg-slate-300"],[1,"p-10","text-center","py-48"],[1,"font-bold","text-3xl"],[1,"pt-10"],["href","#",1,"text-blue-700","text-xl"]],template:function(r,s){if(1&r&&(p.TgZ(0,"div",0)(1,"div",1),p.YNc(2,Ux,41,17,"div",2),p.qZA()(),p.YNc(3,Bx,7,0,"ng-template",null,3,p.W1O)),2&r){const u=p.MAs(4);p.xp6(2),p.Q6J("ngIf",s.cartItems.length>0)("ngIfElse",u)}},dependencies:[K.sg,K.O5,K.H9]})}return n})();function Hx(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",9)(1,"button",16),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.Login())}),p._uU(2,"LOGIN"),p.qZA()()}}function hD(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",17)(1,"button",18),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.menu())}),p.O4$(),p.TgZ(2,"svg",19),p._UZ(3,"path",20),p.qZA()(),p.kcU(),p.TgZ(4,"div",21)(5,"div",22)(6,"button",23),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.profile())}),p._uU(7,"PROFILE"),p.qZA(),p.TgZ(8,"button",23),p.NdJ("click",function(){p.CHM(t);const s=p.oxw();return p.KtG(s.Logout())}),p._uU(9,"LOGOUT"),p.qZA()()()()}if(2&n){const t=p.oxw();p.xp6(4),p.Q6J("hidden",t.visible)}}let d0=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.isLogout=new p.vpe,this.isAuthorized="true"===localStorage.getItem("IsAuthorized"),this.visible=!0}Login(){this.router.navigate(["/login"])}profile(){this.router.navigate(["/dashboard/profile"]),this.visible=!this.visible}logout(){localStorage.removeItem("IsAuthorized"),localStorage.removeItem("IsAdmin"),window.location.reload(),this.router.navigate(["/dashboard/home"])}cart(){localStorage.getItem("IsAuthorized")?this.router.navigate(["/cart"]):(alert("Login to continue ..."),this.router.navigate(["/login"]))}menu(){this.visible=!this.visible}Logout(){this.userinfo.logout(),localStorage.removeItem("IsAuthorized"),localStorage.removeItem("IsAdmin"),window.location.reload(),this.router.navigate(["/dashboard/home"])}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(xi.F0),p.Y36(wm))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:20,vars:2,consts:[[1,"flex","flex-row","h-16","gap-2","py-2","mx-2","mt-2","bg-gray-500"],["href","#","routerLinkActive","dashboard"],["src","./assets/img/navlogo.png","alt","logo",1,"h-full","max-w-full","mx-1"],[1,"w-full","h-10"],[1,"h-8"],[1,"absolute","mt-4","ml-3"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","search","id","default-search","placeholder","Search products ...",1,"block","w-full","p-3","pl-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"mt-2"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-8","h-8","mx-3","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"],[1,"mx-1"],["class","mt-2",4,"ngIf"],["class","mx-2 mt-2",4,"ngIf"],["type","button",1,"px-4","py-2","mr-3","text-sm","font-medium","text-center","text-white","bg-blue-700","rounded-lg","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","md:mr-0","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"mx-2","mt-2"],["type","button",1,"px-4","py-2","mr-3","text-sm","font-medium","text-center","md:mr-0",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],[1,"absolute","h-fit","w-fit","top-6","right-28",3,"hidden"],[1,"absolute","w-20","bg-white","border-2","border-black","rounded-md"],[1,"w-20","h-10","border-2","border-black","rounded-sm",3,"click"]],template:function(r,s){1&r&&(p.TgZ(0,"nav")(1,"div",0)(2,"div")(3,"a",1),p._UZ(4,"img",2),p.qZA()(),p.TgZ(5,"div",3)(6,"div",4)(7,"div",5),p.O4$(),p.TgZ(8,"svg",6),p._UZ(9,"path",7),p.qZA()(),p.kcU(),p._UZ(10,"input",8),p.qZA()(),p.TgZ(11,"div",9)(12,"button",10),p.NdJ("click",function(){return s.cart()}),p.O4$(),p.TgZ(13,"svg",11),p._UZ(14,"path",12),p.qZA()()(),p.kcU(),p.TgZ(15,"div",13)(16,"div"),p.YNc(17,Hx,3,0,"div",14),p.qZA(),p.TgZ(18,"div"),p.YNc(19,hD,10,1,"div",15),p.qZA()()()()),2&r&&(p.xp6(17),p.Q6J("ngIf",!s.isAuthorized),p.xp6(2),p.Q6J("ngIf",s.isAuthorized))},dependencies:[K.O5,xi.Od]})}return n})(),fD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:5,vars:0,consts:[[1,"h-[100vh]"],[1,"h-full","pt-1"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0)(1,"div"),p._UZ(2,"app-header"),p.qZA(),p.TgZ(3,"div",1),p._UZ(4,"router-outlet"),p.qZA()())},dependencies:[xi.lC,d0]})}return n})(),$S=(()=>{class n{constructor(t,r){this.cartService=t,this.router=r,this.cartItems=[],this.overallTotal=0}ngOnInit(){this.cartService.getCartItems().subscribe(t=>{this.cartItems=t}),this.calculateOverallTotal()}calculateOverallTotal(){const t=this.cartItems.reduce((u,c)=>u+c.price*c.quantity,0);this.overallTotal=t+.1*t+20}clearCart(){this.cartService.clearCart(),this.cartItems=[]}placeOrder(){this.router.navigate(["dashboard/home"]),this.clearCart()}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(Wu.N),p.Y36(xi.F0))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-checkout"]],decls:91,vars:20,consts:[[1,"bg-slate-600","w-full","min-h-screen","bg-opacity-70"],[1,"text-center","text-3xl","pt-2","font-bold"],[1,"text-5xl"],[1,"flex","h-fit","p-10"],[1,"w-full","flex","flex-wrap","items-start","justify-between"],[1,"w-full","md:w-1/2","h-fit"],[1,"p-3","w-full"],[1,"text-xl","font-semibold"],[1,"m-5"],[1,"bg-white","w-fit","rounded-lg","shadow-md","p-6"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"my-2"],[1,"font-semibold"],[1,"w-full","p-3"],[1,"m-3","flex","w-full"],[1,"w-full"],["for","name",1,"mt-3","ml-2","text-xl","w-full","font-medium"],["type","text","id","name","name","name","required","",1,"ml-10","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","address",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","address","name","address","rows","1","required","",1,"ml-5","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","city",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","city","name","city","required","",1,"ml-14","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","pincode",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","pincode","name","pincode","required","",1,"ml-3","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","email",1,"mt-3","ml-2","text-xl","font-medium"],["type","email","id","email","name","email","required","",1,"ml-10","mt-3","w-fit","border-2","rounded-lg","border-black"],[1,"w-full","h-fit"],[1,"p-4","h-48","w-80","bg-green-700","m-2","rounded-xl","border-2","border-black"],[1,"mt-2","w-full"],["for","cardnumber"],["type","number","id","cardnumber","name","cardnumber","maxlength","16","required","",1,"ml-2","w-40","border-2","border-black","rounded-lg"],[1,"mt-2"],["for","expdate"],["type","number","id","expdate","name","expmonth","maxlength","2","required","",1,"w-8","ml-2","border-2","border-black","rounded-lg"],["type","number","name","expyear","id","expdate","maxlength","4","required","",1,"w-16","ml-2","border-2","border-black","rounded-lg"],["for","cvv"],["type","text","id","cvv","name","cvv","required","",1,"ml-2","w-16","border-2","border-black","rounded-lg"],[1,"flex","ml-5","my-12","w-full"],[1,"font-semibold","ml-3"],[1,"ml-10","bg-blue-500","text-white","px-4","py-3","rounded-lg","w-40","h-12",3,"click"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"h1",2),p._uU(4,"CHECKOUT"),p.qZA()(),p.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h2",7),p._uU(10,"Order Summary"),p.qZA(),p.TgZ(11,"div")(12,"div",8)(13,"div",9)(14,"h2",10),p._uU(15,"Summary"),p.qZA(),p.TgZ(16,"div",11)(17,"span"),p._uU(18,"Subtotal"),p.qZA(),p.TgZ(19,"span"),p._uU(20),p.ALo(21,"currency"),p.qZA()(),p.TgZ(22,"div",11)(23,"span"),p._uU(24,"Taxes (10%)"),p.qZA(),p.TgZ(25,"span"),p._uU(26),p.ALo(27,"currency"),p.qZA()(),p.TgZ(28,"div",11)(29,"span"),p._uU(30,"Shipping Charges"),p.qZA(),p.TgZ(31,"span"),p._uU(32),p.ALo(33,"currency"),p.qZA()(),p._UZ(34,"hr",12),p.TgZ(35,"div",11)(36,"span",13),p._uU(37,"Total"),p.qZA(),p.TgZ(38,"span",13),p._uU(39),p.ALo(40,"currency"),p.qZA()()()()()()(),p.TgZ(41,"div",5)(42,"div",14)(43,"h2",7),p._uU(44,"Shipping Information"),p.qZA(),p.TgZ(45,"form",15)(46,"div",16)(47,"div")(48,"label",17),p._uU(49,"Name :"),p.qZA(),p._UZ(50,"input",18),p.qZA(),p.TgZ(51,"div")(52,"label",19),p._uU(53,"Address :"),p.qZA(),p._UZ(54,"textarea",20),p.qZA(),p.TgZ(55,"div")(56,"label",21),p._uU(57,"City :"),p.qZA(),p._UZ(58,"input",22),p.qZA(),p.TgZ(59,"div")(60,"label",23),p._uU(61,"PIN Code :"),p.qZA(),p._UZ(62,"input",24),p.qZA(),p.TgZ(63,"div")(64,"label",25),p._uU(65,"Email :"),p.qZA(),p._UZ(66,"input",26),p.qZA()()()()(),p.TgZ(67,"div",27)(68,"form",28)(69,"div",29)(70,"label",30),p._uU(71,"Card Number :"),p.qZA(),p._UZ(72,"input",31),p.qZA(),p.TgZ(73,"div",32)(74,"label",33),p._uU(75,"Expiration Date :"),p.qZA(),p._UZ(76,"input",34),p._uU(77," / "),p._UZ(78,"input",35),p.qZA(),p.TgZ(79,"div",32)(80,"label",36),p._uU(81,"CVV :"),p.qZA(),p._UZ(82,"input",37),p.qZA()(),p.TgZ(83,"div",38)(84,"h4",13),p._uU(85,"Total :"),p.qZA(),p.TgZ(86,"h4",39),p._uU(87),p.ALo(88,"currency"),p.qZA(),p.TgZ(89,"button",40),p.NdJ("click",function(){return s.placeOrder()}),p._uU(90,"Place Order"),p.qZA()()()()()()()),2&r&&(p.xp6(20),p.Oqu(p.xi3(21,5,(s.overallTotal-20)/1.1,"INR")),p.xp6(6),p.Oqu(p.xi3(27,8,(s.overallTotal-20)/11,"INR")),p.xp6(6),p.Oqu(p.xi3(33,11,20,"INR")),p.xp6(7),p.Oqu(p.xi3(40,14,s.overallTotal,"INR")),p.xp6(48),p.Oqu(p.xi3(88,17,s.overallTotal,"INR")))},dependencies:[jo,Dn,wr,K.H9]})}return n})();function Ky(n,e){if(1&n&&(p.TgZ(0,"div")(1,"div",2),p._UZ(2,"img",3),p.qZA(),p.TgZ(3,"div",4)(4,"h2"),p._uU(5),p.qZA(),p._uU(6," Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque rem expedita aut quisquam odit dolore officiis quis laborum alias, quidem suscipit sint, ipsum rerum excepturi eius cum quia nihil dolor! "),p.TgZ(7,"p"),p._uU(8),p.qZA(),p.TgZ(9,"button",5),p._uU(10,"Add to Cart"),p.qZA()()()),2&n){const t=e.$implicit;p.xp6(2),p.s9C("alt",t.name),p.Q6J("src",t.image,p.LSH),p.xp6(3),p.Oqu(t.name),p.xp6(3),p.hij("Price: \u20b9",t.price,"")}}const Gx=[{path:"dashboard",component:fD,children:[{path:"home",component:Ju},{path:"",redirectTo:"home",pathMatch:"full"},{path:"details",component:(()=>{class n{constructor(t,r){this.route=t,this.productService=r,this.products=[],this.productService.getDetail().subscribe(s=>{this.products=s})}ngOnInit(){this.products=this.route.snapshot.data.product}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(xi.gz),p.Y36(Zu.M))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"flex","w-full","mt-5"],[4,"ngFor","ngForOf"],[1,"p-10"],[3,"src","alt"],[1,"p-2","w-96","mt-12"],[1,"w-56","mt-10","h-8","text-gray-70","0","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0),p.YNc(1,Ky,11,4,"div",1),p.qZA()),2&r&&(p.xp6(1),p.Q6J("ngForOf",s.products))},dependencies:[K.sg]})}return n})()},{path:"profile",component:(()=>{class n{onSubmit(){throw new Error("Method not implemented.")}constructor(t){this.userInfo=t,this.firstName="jacob",this.lastName="jabakumar S",this.Email="jacobjabakumar2002@gmail.com",this.phoneNumber="7305283377",this.Address="55/12, chinna colony, vanagram road,athipet",this.profileForm=new xt({}),this.userId="",this.NAME="Jacob",this.isDisabled=!0,this.enable=!0}ngOnInit(){this.getUser(),this.user=localStorage.getItem("users")}getUser(){this.userInfo.currentUserProfile$.subscribe(t=>{})}updateUser(t,r){this.userInfo.updateData(t)}deleteUser(t){this.userInfo.deleteData(t)}enableButton(){this.isDisabled=!this.isDisabled}enableSave(){this.enable=this.enable}static#e=this.\u0275fac=function(r){return new(r||n)(p.Y36(wm))};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-profile"]],decls:37,vars:21,consts:[[1,"h-[100vh]","flex","w-full","bg-gray-600","bg-opacity-30"],[1,"h-fit","p-4","w-fit","bg-white","border-slate-700","rounded-3xl","items-stretch","justify-between","mx-auto","border-4","mt-28"],[1,"h-20","w-fit","flex","mt-8","mx-32"],["for","profile_image","src","../../assets/img/sample.png","alt","profile_image",1,"absolute","h-28","w-28","rounded-full","border-4","border-zinc-600","mx-auto"],["type","file","id","profile_image",1,"absolute","pt-20","pl-2","h-28","opacity-70","w-28","border-4","rounded-full","border-zinc-600"],[1,"w-full","h-fit","flex","flex-row","mt-5","p-5"],[1,"w-full","h-fit",3,"ngSubmit"],[1,"w-full","flex","flex-row","items-stretch","justify-between"],[1,"my-2","font-sans","font-bold","w-fit"],["type","text",1,"mx-2","my-2","font-sans","font-bold",3,"disabled","value"],[1,"my-2","font-sans","font-bold"],[1,"h-10","w-full","flex","items-stretch","justify-between"],[1,"mx-auto","py-2","px-2","bg-blue-500","rounded-lg","font-semibold","text-lg","text-white",3,"click"],[1,"mx-auto","py-2","px-2","bg-blue-500","rounded-lg","font-semibold","text-lg","text-white","cursor-not-allowed",3,"disabled"]],template:function(r,s){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2),p._UZ(3,"img",3)(4,"input",4),p.qZA(),p.TgZ(5,"div",5)(6,"form",6),p.NdJ("ngSubmit",function(){return s.onSubmit()}),p.TgZ(7,"div",7)(8,"h5",8),p._uU(9,"FirstName :"),p.qZA(),p._UZ(10,"input",9),p.ALo(11,"uppercase"),p.qZA(),p.TgZ(12,"div",7)(13,"h5",10),p._uU(14,"LastName :"),p.qZA(),p._UZ(15,"input",9),p.ALo(16,"uppercase"),p.qZA(),p.TgZ(17,"div",7)(18,"h5",10),p._uU(19,"Email :"),p.qZA(),p._UZ(20,"input",9),p.ALo(21,"lowercase"),p.qZA(),p.TgZ(22,"div",7)(23,"h5",10),p._uU(24,"PhoneNumber :"),p.qZA(),p._UZ(25,"input",9),p.ALo(26,"uppercase"),p.qZA(),p.TgZ(27,"div",7)(28,"h5",10),p._uU(29,"Address :"),p.qZA(),p._UZ(30,"input",9),p.ALo(31,"lowercase"),p.qZA()()(),p.TgZ(32,"div",11)(33,"button",12),p.NdJ("click",function(){return s.enableButton()}),p._uU(34,"EDIT PROFILE"),p.qZA(),p.TgZ(35,"button",13),p._uU(36,"SAVE"),p.qZA()()()()),2&r&&(p.xp6(10),p.s9C("value",p.lcZ(11,11,s.firstName)),p.Q6J("disabled",s.isDisabled),p.xp6(5),p.s9C("value",p.lcZ(16,13,s.lastName)),p.Q6J("disabled",s.isDisabled),p.xp6(5),p.s9C("value",p.lcZ(21,15,s.Email)),p.Q6J("disabled",s.isDisabled),p.xp6(5),p.s9C("value",p.lcZ(26,17,s.phoneNumber)),p.Q6J("disabled",s.isDisabled),p.xp6(5),p.s9C("value",p.lcZ(31,19,s.Address)),p.Q6J("disabled",s.isDisabled),p.xp6(5),p.Q6J("disabled",!0))},dependencies:[jo,Dn,wr,K.gd,K.i8]})}return n})()},{path:"products",loadChildren:()=>B.e(13).then(B.bind(B,4013)).then(n=>n.ProductsModule)}]},{path:"login",component:Ox},{path:"register",component:Fx},{path:"cart",component:jx},{path:"checkout",component:$S},{path:"",redirectTo:"dashboard",pathMatch:"full"}];let GS=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n});static#n=this.\u0275inj=p.cJS({imports:[xi.Bz.forRoot(Gx),xi.Bz]})}return n})(),pD=(()=>{class n{constructor(){this.title="Angular-e-commerce-site"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){1&r&&p._UZ(0,"router-outlet")},dependencies:[xi.lC]})}return n})();const gD="firebasestorage.googleapis.com",mD="storageBucket";class yr extends W.ZR{constructor(e,t,r=0){super(h0(e),`Firebase Storage: ${t} (${h0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return h0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Lr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Lr||{});function h0(n){return"storage/"+n}function f0(){return new yr(Lr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _D(){return new yr(Lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yD(){return new yr(Lr.CANCELED,"User canceled the upload/download.")}function vD(){return new yr(Lr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sp(n){return new yr(Lr.INVALID_ARGUMENT,n)}function g0(){return new yr(Lr.APP_DELETED,"The Firebase app was deleted.")}function Yy(n){return new yr(Lr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cm(n,e){return new yr(Lr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Dm(n){throw new yr(Lr.INTERNAL_ERROR,"Internal error: "+n)}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch{return new ns(e,"")}if(""===r.path)return r;throw function JS(n){return new yr(Lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function C(Ct){Ct.path_=decodeURIComponent(Ct.path)}const k=t.replace(/[.]/g,"\\."),Qe=[{regex:m,indices:{bucket:1,path:3},postModify:function u(Ct){"/"===Ct.path.charAt(Ct.path.length-1)&&(Ct.path_=Ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${k}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===gD?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let Ct=0;Ct<Qe.length;Ct++){const Xt=Qe[Ct],En=Xt.regex.exec(e);if(En){let fo=En[Xt.indices.path];fo||(fo=""),r=new ns(En[Xt.indices.bucket],fo),Xt.postModify(r);break}}if(null==r)throw function QS(n){return new yr(Lr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class ED{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Am(n){return"string"==typeof n||n instanceof String}function TD(n){return bm()&&n instanceof Blob}function bm(){return typeof Blob<"u"&&!(0,W.UG)()}function Lu(n,e,t,r){if(r<e)throw sp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sp(`Invalid value for '${n}'. Expected ${t} or less.`)}function Fu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Qy(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Yc=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Yc||{});function CD(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class Wx{constructor(e,t,r,s,u,c,m,_,C,P,k,G=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=_,this.timeout_=C,this.progressCallback_=P,this.connectionFactory_=k,this.retry=G,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((J,he)=>{this.resolve_=J,this.reject_=he,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(m,m.getResponse());!function ID(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==m){const _=f0();_.serverResponse=m.getErrorText(),c(this.errorCallback_?this.errorCallback_(m,_):_)}else c(s.canceled?this.appDelete_?g0():yD():_D())};this.canceled_?t(0,new Sm(!1,null,!0)):this.backoffId_=function qx(n,e,t){let r=1,s=null,u=null,c=!1,m=0;function _(){return 2===m}let C=!1;function P(...Ne){C||(C=!0,e.apply(null,Ne))}function k(Ne){s=setTimeout(()=>{s=null,n(J,_())},Ne)}function G(){u&&clearTimeout(u)}function J(Ne,...ht){if(C)return void G();if(Ne)return G(),void P.call(null,Ne,...ht);if(_()||c)return G(),void P.call(null,Ne,...ht);let Qe;r<64&&(r*=2),1===m?(m=2,Qe=0):Qe=1e3*(r+Math.random()),k(Qe)}let he=!1;function Re(Ne){he||(he=!0,G(),!C&&(null!==s?(Ne||(m=2),clearTimeout(s),k(0)):Ne||(m=1)))}return k(0),u=setTimeout(()=>{c=!0,Re(!0)},t),Re}((r,s)=>{if(s)return void r(!1,new Sm(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===Yc.NO_ERROR,_=u.getStatus();if(!m||CD(_,this.additionalRetryCodes_)&&this.retry){const P=u.getErrorCode()===Yc.ABORT;return void r(!1,new Sm(!1,null,P))}const C=-1!==this.successCodes_.indexOf(_);r(!0,new Sm(C,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function co(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Sm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AD(...n){const e=function Zx(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(bm())return new Blob(n);throw new yr(Lr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rm{constructor(e,t){this.data=e,this.contentType=t||null}}function Jy(n,e){switch(n){case ca.RAW:return new Rm(m0(e));case ca.BASE64:case ca.BASE64URL:return new Rm(_0(n,e));case ca.DATA_URL:return new Rm(function op(n){const e=new y0(n);return e.base64?_0(ca.BASE64,e.rest):function lR(n){let e;try{e=decodeURIComponent(n)}catch{throw Cm(ca.DATA_URL,"Malformed data URL.")}return m0(e)}(e.rest)}(e),function Xy(n){return new y0(n).contentType}(e))}throw f0()}function m0(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function _0(n,e){switch(n){case ca.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw Cm(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ca.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw Cm(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function bD(n){if(typeof atob>"u")throw function nR(n){return new yr(Lr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:Cm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class y0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Cm(ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function SD(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class $a{constructor(e,t){let r=0,s="";TD(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(TD(this.data_)){const s=function uR(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new $a(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $a(r,!0)}}static getBlob(...e){if(bm()){const t=e.map(r=>r instanceof $a?r.data_:r);return new $a(AD.apply(null,t))}{const t=e.map(c=>Am(c)?Jy(ca.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)s[u++]=c[m]}),new $a(s,!0)}}uploadData(){return this.data_}}function v0(n){let e;try{e=JSON.parse(n)}catch{return null}return function rR(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function E0(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function dR(n,e){return e}class zs{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||dR}}let I0=null;function ev(){if(I0)return I0;const n=[];n.push(new zs("bucket")),n.push(new zs("generation")),n.push(new zs("metageneration")),n.push(new zs("name","fullPath",!0));const t=new zs("name");t.xform=function e(u,c){return function Yx(n){return!Am(n)||n.length<2?n:E0(n)}(c)},n.push(t);const s=new zs("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new zs("timeCreated")),n.push(new zs("updated")),n.push(new zs("md5Hash",null,!0)),n.push(new zs("cacheControl",null,!0)),n.push(new zs("contentDisposition",null,!0)),n.push(new zs("contentEncoding",null,!0)),n.push(new zs("contentLanguage",null,!0)),n.push(new zs("contentType",null,!0)),n.push(new zs("metadata","customMetadata",!0)),I0=n,I0}function PD(n,e,t){const r=v0(e);return null===r?null:function hR(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function RD(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ns(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function xD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const pR="prefixes",gR="items";class Vu{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xo(n){if(!n)throw f0()}function tv(n,e){return function t(r,s){const u=PD(n,s,e);return xo(null!==u),u}}function da(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function p0(){return new yr(Lr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function KS(){return new yr(Lr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ZS(n){return new yr(Lr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function YS(n){return new yr(Lr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function ap(n){const e=da(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function WS(n){return new yr(Lr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function nv(n,e,t){const s=Fu(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new Vu(s,"GET",tv(n,t),c);return m.errorHandler=ap(e),m}function w0(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=Fu(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,P=new Vu(m,"GET",function mR(n,e){return function t(r,s){const u=function Jx(n,e,t){const r=v0(t);return null===r?null:function Qx(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[pR])for(const s of t[pR]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new ns(e,u));r.prefixes.push(c)}if(t[gR])for(const s of t[gR]){const u=n._makeStorageReference(new ns(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return xo(null!==u),u}}(n,e.bucket),C);return P.urlParams=u,P.errorHandler=da(e),P}function _R(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Xx(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Pm{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function D0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xo(!1)}return xo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const LD={STATE_CHANGED:"state_changed"},As={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function A0(n){switch(n){case"running":case"pausing":case"canceling":return As.RUNNING;case"paused":return As.PAUSED;case"success":return As.SUCCESS;case"canceled":return As.CANCELED;default:return As.ERROR}}class IR{constructor(e,t,r){if(function wD(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function uh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let iv=null;class eM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Dm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class FD extends eM{initXhr(){this.xhr_.responseType="text"}}function Mo(){return iv?iv():new FD}class VD{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ev(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Lr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(CD(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=_D()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Lr.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function vR(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=_R(e,r,s),m={name:c.fullPath},_=Fu(u,n.host,n._protocol),P={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},k=xD(c,t),he=new Vu(_,"POST",function J(Re){let Ne;D0(Re);try{Ne=Re.getResponseHeader("X-Goog-Upload-URL")}catch{xo(!1)}return xo(Am(Ne)),Ne},n.maxUploadRetryTime);return he.urlParams=m,he.headers=P,he.body=k,he.errorHandler=da(e),he}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Mo,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function ER(n,e,t,r){const _=new Vu(t,"POST",function u(C){const P=D0(C,["active","final"]);let k=null;try{k=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xo(!1)}k||xo(!1);const G=Number(k);return xo(!isNaN(G)),new Pm(G,r.size(),"final"===P)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=da(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Mo,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Pm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function kD(n,e,t,r,s,u,c,m){const _=new Pm(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function eR(){return new yr(Lr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const C=_.total-_.current;let P=C;s>0&&(P=Math.min(P,s));const k=_.current;let J="";J=0===P?"finalize":C===P?"upload, finalize":"upload";const he={"X-Goog-Upload-Command":J,"X-Goog-Upload-Offset":`${_.current}`},Re=r.slice(k,k+P);if(null===Re)throw vD();const Qe=new Vu(t,"POST",function Ne(Ct,Xt){const En=D0(Ct,["active","final"]),ei=_.current+P,fo=r.size();let aw;return aw="final"===En?tv(e,u)(Ct,Xt):null,new Pm(ei,fo,"final"===En,aw)},e.maxUploadRetryTime);return Qe.headers=he,Qe.body=Re.uploadData(),Qe.progressCallback=m||null,Qe.errorHandler=da(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const m=this._ref.storage._makeRequest(c,Mo,s,u,!1);this._request=m,m.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=nv(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Mo,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function yR(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function m(){let Qe="";for(let Ct=0;Ct<2;Ct++)Qe+=Math.random().toString().slice(2);return Qe}();c["Content-Type"]="multipart/related; boundary="+_;const C=_R(e,r,s),P=xD(C,t),J=$a.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+P+"\r\n--"+_+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===J)throw vD();const he={name:C.fullPath},Re=Fu(u,n.host,n._protocol),ht=n.maxUploadRetryTime,mt=new Vu(Re,"POST",tv(n,t),ht);return mt.urlParams=he,mt.headers=c,mt.body=J.uploadData(),mt.errorHandler=da(e),mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Mo,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=yD(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=A0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new IR(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(A0(this._state)){case As.SUCCESS:uh(this._resolve.bind(null,this.snapshot))();break;case As.CANCELED:case As.ERROR:uh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(A0(this._state)){case As.RUNNING:case As.PAUSED:e.next&&uh(e.next.bind(e,this.snapshot))();break;case As.SUCCESS:e.complete&&uh(e.complete.bind(e))();break;default:e.error&&uh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class lh{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lh(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return E0(this._location.path)}get storage(){return this._service}get parent(){const e=function cR(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new lh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Yy(e)}}function S0(n,e,t){return jD.apply(this,arguments)}function jD(){return jD=(0,Me.Z)(function*(n,e,t){const s=yield HD(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield S0(n,e,s.nextPageToken))}),jD.apply(this,arguments)}function HD(n,e){null!=e&&"number"==typeof e.maxResults&&Lu("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=w0(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Mo)}function GD(n){n._throwIfRoot("getDownloadURL");const e=function T0(n,e,t){const s=Fu(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new Vu(s,"GET",function MD(n,e){return function t(r,s){const u=PD(n,s,e);return xo(null!==u),function fR(n,e,t,r){const s=v0(e);if(null===s||!Am(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(C=>{const k=n.fullPath;return Fu("/b/"+c(n.bucket)+"/o/"+c(k),t,r)+Qy({alt:"media",token:C})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return m.errorHandler=ap(e),m}(n.storage,n._location,ev());return n.storage.makeRequestWithTokens(e,Mo).then(t=>{if(null===t)throw function tR(){return new yr(Lr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function xm(n,e){const t=function Kx(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ns(n._location.bucket,t);return new lh(n.storage,r)}function P0(n,e){if(n instanceof qD){const t=n;if(null==t._bucket)throw function XS(){return new yr(Lr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mD+"' property when initializing the app?")}();const r=new lh(t,t._bucket);return null!=e?P0(r,e):r}return void 0!==e?xm(n,e):n}function zD(n,e){if(e&&function SR(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qD)return function RR(n,e){return new lh(n,e)}(n,e);throw sp("To use ref(service, url), the first argument must be a Storage instance.")}return P0(n,e)}function PR(n,e){const t=e?.[mD];return null==t?null:ns.makeFromBucketSpec(t,n)}class qD{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=gD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?ns.makeFromBucketSpec(s,this._host):PR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):PR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Lu("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Lu("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lh(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new ED(g0());{const c=function DD(n,e,t,r,s,u,c=!0){const m=Qy(n.urlParams),_=n.url+m,C=Object.assign({},n.headers);return function oR(n,e){e&&(n["X-Firebase-GMPID"]=e)}(C,e),function iR(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(C,t),function sR(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(C,u),function aR(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(C,r),new Wx(_,n.method,C,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Me.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const WD="@firebase/storage";function kR(n,e){return zD(n=(0,W.m9)(n),e)}function o(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new qD(t,r,s,e,Pr.SDK_VERSION)}!function a(){(0,Pr._registerComponent)(new Ci.wA("storage",o,"PUBLIC").setMultipleInstances(!0)),(0,Pr.registerVersion)(WD,"0.11.2",""),(0,Pr.registerVersion)(WD,"0.11.2","esm2017")}();class l{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class d{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new l(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new l(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new l(c,this,this._ref)):{next:t.next?c=>t.next(new l(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class f{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new y(e,this._service))}get items(){return this._delegate.items.map(e=>new y(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class y{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dM(n,e){return xm(n,e)}(this._delegate,e);return new y(t,this.storage)}get root(){return new y(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new y(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new d(function sM(n,e,t){return function UD(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new VD(n,new $a(e),t)}(n=(0,W.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ca.RAW,r){this._throwIfRoot("putString");const s=Jy(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new d(new VD(this._delegate,new $a(s.data,!0),u),this)}listAll(){return function OR(n){return function BD(n){const e={prefixes:[],items:[]};return S0(n,e).then(()=>e)}(n=(0,W.m9)(n))}(this._delegate).then(e=>new f(e,this.storage))}list(e){return function uM(n,e){return HD(n=(0,W.m9)(n),e)}(this._delegate,e||void 0).then(t=>new f(t,this.storage))}getMetadata(){return function oM(n){return function R0(n){n._throwIfRoot("getMetadata");const e=nv(n.storage,n._location,ev());return n.storage.makeRequestWithTokens(e,Mo)}(n=(0,W.m9)(n))}(this._delegate)}updateMetadata(e){return function aM(n,e){return function $D(n,e){n._throwIfRoot("updateMetadata");const t=function C0(n,e,t,r){const u=Fu(e.fullServerUrl(),n.host,n._protocol),m=xD(t,r),C=n.maxOperationRetryTime,P=new Vu(u,"PATCH",tv(n,r),C);return P.headers={"Content-Type":"application/json; charset=utf-8"},P.body=m,P.errorHandler=ap(e),P}(n.storage,n._location,e,ev());return n.storage.makeRequestWithTokens(t,Mo)}(n=(0,W.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function lM(n){return GD(n=(0,W.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function cM(n){return function bR(n){n._throwIfRoot("deleteObject");const e=function rv(n,e){const r=Fu(e.fullServerUrl(),n.host,n._protocol),m=new Vu(r,"DELETE",function c(_,C){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=ap(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Mo)}(n=(0,W.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Yy(e)}}class T{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(S(e))throw sp("ref() expected a child path but got a URL, use refFromURL instead.");return new y(kR(this._delegate,e),this)}refFromURL(e){if(!S(e))throw sp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(e,this._delegate.host)}catch{throw sp("refFromUrl() expected a valid full URL but got an invalid one.")}return new y(kR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function ZD(n,e,t,r={}){!function xR(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,W.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function S(n){return/^[A-Za-z]+:\/\//.test(n)}function re(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new T(t,r)}function Ye(n){const e=function Le(n){return new ue.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function zS(n,e=Io){return(0,$y.e)((t,r)=>{let s=null,u=null,c=null;const m=()=>{if(s){s.unsubscribe(),s=null;const C=u;u=null,r.next(C)}};function _(){const C=c+n,P=e.now();if(P<C)return s=this.schedule(void 0,C-P),void r.add(s);m()}t.subscribe((0,De.x)(r,C=>{u=C,c=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Pe.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ut(n){return{getDownloadURL:()=>(0,ku.of)(void 0).pipe($C,(0,Cs.w)(()=>n.getDownloadURL()),kr),getMetadata:()=>(0,ku.of)(void 0).pipe($C,(0,Cs.w)(()=>n.getMetadata()),kr),delete:()=>(0,ie.D)(n.delete()),child:e=>ut(n.child(e)),updateMetadata:e=>(0,ie.D)(n.updateMetadata(e)),put:(e,t)=>Ye(n.put(e,t)),putString:(e,t,r)=>Ye(n.putString(e,t,r)),list:e=>(0,ie.D)(n.list(e)),listAll:()=>(0,ie.D)(n.listAll())}}!function de(n){const e={TaskState:As,TaskEvent:LD,StringFormat:ca,Storage:T,Reference:y};n.INTERNAL.registerComponent(new Ci.wA("storage-compat",re,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}($s.Z);const Nt=new p.OlP("angularfire2.storageBucket"),Ze=new p.OlP("angularfire2.storage.maxUploadRetryTime"),Yt=new p.OlP("angularfire2.storage.maxOperationRetryTime"),pn=new p.OlP("angularfire2.storage.use-emulator");let Xn=(()=>{class n{storage;constructor(t,r,s,u,c,m,_,C,P,k){const G=mm(t,c,r);this.storage=_m(`${G.name}.storage.${s}`,"AngularFireStorage",G.name,()=>{const J=c.runOutsideAngular(()=>G.storage(s||void 0)),he=P;return he&&J.useEmulator(...he),_&&J.setMaxUploadRetryTime(_),C&&J.setMaxOperationRetryTime(C),J},[_,C])}ref(t){return ut(this.storage.ref(t))}refFromURL(t){return ut(this.storage.refFromURL(t))}upload(t,r,s){return ut(this.storage.ref(t)).put(r,s)}static \u0275fac=function(r){return new(r||n)(p.LFG(Fl),p.LFG(ep,8),p.LFG(Nt,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ly),p.LFG(Ze,8),p.LFG(Yt,8),p.LFG(pn,8),p.LFG(qc,8))};static \u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Vl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=p.oAB({type:n});static \u0275inj=p.cJS({})}return n})(),up=(()=>{class n{constructor(){$s.Z.registerVersion("angularfire",Xf.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=p.oAB({type:n});static \u0275inj=p.cJS({providers:[Xn],imports:[Vl]})}return n})();var x0=B(2737),LR=B(2420);const hM="@firebase/database";let VR="";function UR(n){VR=n}class L1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,W.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,W.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class F1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,W.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const pM=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new L1(e)}}catch{}return new F1},Mm=pM("localStorage"),BR=pM("sessionStorage"),sv=new hr.Yd("@firebase/database"),gM=function(){let n=1;return function(){return n++}}(),mM=function(n){const e=(0,W.dS)(n),t=new W.gQ;t.update(e);const r=t.digest();return W.US.encodeByteArray(r)},M0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=M0.apply(null,r):e+="object"==typeof r?(0,W.Wl)(r):r,e+=" "}return e};let Nm=null,_M=!0;const yM=function(n,e){(0,W.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(sv.logLevel=hr.in.VERBOSE,Nm=sv.log.bind(sv),e&&BR.set("logging_enabled",!0)):"function"==typeof n?Nm=n:(Nm=null,BR.remove("logging_enabled"))},bs=function(...n){if(!0===_M&&(_M=!1,null===Nm&&!0===BR.get("logging_enabled")&&yM(!0)),Nm){const e=M0.apply(null,n);Nm(e)}},N0=function(n){return function(...e){bs(n,...e)}},jR=function(...n){const e="FIREBASE INTERNAL ERROR: "+M0(...n);sv.error(e)},Qc=function(...n){const e=`FIREBASE FATAL ERROR: ${M0(...n)}`;throw sv.error(e),new Error(e)},ho=function(...n){const e="FIREBASE WARNING: "+M0(...n);sv.warn(e)},KD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lp="[MIN_NAME]",ch="[MAX_NAME]",Om=function(n,e){if(n===e)return 0;if(n===lp||e===ch)return-1;if(e===lp||n===ch)return 1;{const t=IM(n),r=IM(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},B1=function(n,e){return n===e?0:n<e?-1:1},O0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,W.Wl)(e))},HR=function(n){if("object"!=typeof n||null===n)return(0,W.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,W.Wl)(e[r]),t+=":",t+=HR(n[e[r]]);return t+="}",t},vM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)r.push(n.substring(s,s+e>t?t:s+e));return r};function Ss(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const EM=function(n){(0,W.hu)(!KD(n),"Invalid JSON number");const r=1023;let s,u,c,m,_;0===n?(u=0,c=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=m+r,c=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(_=52;_;_-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)C.push(u%2?1:0),u=Math.floor(u/2);C.push(s?1:0),C.reverse();const P=C.join("");let k="";for(_=0;_<64;_+=8){let G=parseInt(P.substr(_,8),2).toString(16);1===G.length&&(G="0"+G),k+=G}return k.toLowerCase()},G1=new RegExp("^-?(0*)\\d{1,10}$"),IM=function(n){if(G1.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ov=function(n){try{n()}catch(e){setTimeout(()=>{throw ho("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},k0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Z1{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ho(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class K1{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ho(e)}}let L0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const AM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RM="websocket",PM="long_polling";class GR{constructor(e,t,r,s,u=!1,c="",m=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function xM(n,e,t){let r;if((0,W.hu)("string"==typeof e,"typeof type must == string"),(0,W.hu)("object"==typeof t,"typeof params must == object"),e===RM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==PM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Y1(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return Ss(t,(u,c)=>{s.push(u+"="+c)}),r+s.join("&")}class Q1{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,W.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,W.p$)(this.counters_)}}const zR={},qR={};function WR(n){const e=n.toString();return zR[e]||(zR[e]=new Q1),zR[e]}class X1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ov(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cp{constructor(e,t,r,s,u,c,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.transportSessionId=c,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=N0(e),this.stats_=WR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),xM(t,PM,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new X1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,W.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ZR((...u)=>{const[c,m,_,C,P]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=m,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&AM.test(location.hostname)&&(r.r="f");const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cp.forceAllow_=!0}static forceDisallow(){cp.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!cp.forceAllow_&&(cp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,W.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,W.h$)(t),s=vM(r,1840);for(let u=0;u<s.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,W.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ZR{constructor(e,t,r,s){if(this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ZR.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(m){bs("frame writing exception"),m.stack&&bs(m.stack),bs(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||bs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+s+"="+c.seg+"&ts"+s+"="+c.ts+"&d"+s+"="+c.d,s++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),r()})}addTag(e,t){(0,W.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||"loaded"===s||"complete"===s)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{bs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let QD=null;typeof MozWebSocket<"u"?QD=MozWebSocket:typeof WebSocket<"u"&&(QD=WebSocket);let av=(()=>{class n{constructor(t,r,s,u,c,m,_){this.connId=t,this.applicationId=s,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=N0(this.connId),this.stats_=WR(r),this.connURL=n.connectionURL_(r,m,_,u,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,s,u,c){const m={v:"5"};return!(0,W.Yr)()&&typeof location<"u"&&location.hostname&&AM.test(location.hostname)&&(m.r="f"),r&&(m.s=r),s&&(m.ls=s),u&&(m.ac=u),c&&(m.p=c),xM(t,RM,m)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mm.set("previous_websocket_failure",!0);try{let s;if((0,W.Yr)()){s={headers:{"User-Agent":`Firebase/5/${VR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,m=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;m&&(s.proxy={origin:m})}this.mySock=new QD(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const u=s.message||s.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==QD&&!n.forceDisallow_}static previouslyFailed(){return Mm.isInMemoryStorage||!0===Mm.get("previous_websocket_failure")}markConnectionHealthy(){Mm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=(0,W.cI)(r);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const r=(0,W.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=vM(r,16384);s.length>1&&this.sendString_(String(s.length));for(let u=0;u<s.length;u++)this.sendString_(s[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),VM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[cp,av]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=av&&av.isAvailable();let s=r&&!av.previouslyFailed();if(t.webSocketOnly&&(r||ho("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[av];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class zM{constructor(e,t,r,s,u,c,m,_,C,P){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=u,this.onMessage_=c,this.onReady_=m,this.onDisconnect_=_,this.onKill_=C,this.lastSessionId=P,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=N0("c:"+this.id+":"),this.transportManager_=new VM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=k0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=O0("t",e),r=O0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=O0("t",e),r=O0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=O0("t",e);if("d"in e){const r=e.d;if("h"===t){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?jR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ho("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),k0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):k0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qM{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class WM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,W.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let u=0;u<s.length;u++)if(s[u].callback===t&&(!r||r===s[u].context))return void s.splice(u,1)}validateEventType_(e){(0,W.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class JD extends WM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new JD}getInitialEvent(e){return(0,W.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ar{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function qn(){return new ar("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dp(n){return n.pieces_.length-n.pieceNum_}function Sr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ar(n.pieces_,e)}function YR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function F0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function YM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ar(e,0)}function Xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ar)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new ar(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function Oo(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return Oo(Sr(n),Sr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function IO(n,e){const t=F0(n,0),r=F0(e,0);for(let s=0;s<t.length&&s<r.length;s++){const u=Om(t[s],r[s]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function QR(n,e){if(dp(n)!==dp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Uu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dp(n)>dp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class wO{constructor(e,t){this.errorPrefix_=t,this.parts_=F0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,W.ug)(this.parts_[r]);QM(this)}}function QM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+km(n))}function km(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class JR extends WM{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new JR}getInitialEvent(e){return(0,W.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const V0=1e3;let eA,Lm=(()=>{class n extends qM{constructor(t,r,s,u,c,m,_,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=m,this.appCheckTokenProvider_=_,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=N0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=V0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");JR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&JD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,s){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,W.Wl)(c)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[u]=s)}get(t){this.initConnection_();const r=new W.BH,u={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:m=>{const _=m.d;"ok"===m.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(u),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,s,u){this.initConnection_();const c=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+c),this.listens.has(m)||this.listens.set(m,new Map),(0,W.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(m).has(c),"listen() called twice for same path/queryId.");const _={onComplete:u,hashFn:r,query:t,tag:s};this.listens.get(m).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(t){const r=t.query,s=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+s+" for "+u);const c={p:s};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const C=_.d,P=_.s;n.warnOnListenWarnings_(C,r),(this.listens.get(s)&&this.listens.get(s).get(u))===t&&(this.log_("listen response",_),"ok"!==P&&this.removeListen_(s,u),t.onComplete&&t.onComplete(P,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,W.r3)(t,"w")){const s=(0,W.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ho(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,W.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,W.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(r,s,u=>{const c=u.s,m=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,s=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(t,r){const s=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+u),(0,W.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,u)&&this.connected_&&this.sendUnlisten_(s,u,t._queryObject,r)}sendUnlisten_(t,r,s,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=s,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:s})}onDisconnectMerge(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:s})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,s,u){const c={p:r,d:s};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,m=>{u&&setTimeout(()=>{u(m.s,m.d)},Math.floor(0))})}put(t,r,s,u){this.putInternal("p",t,r,s,u)}merge(t,r,s,u){this.putInternal("m",t,r,s,u)}putInternal(t,r,s,u,c){this.initConnection_();const m={p:r,d:s};void 0!==c&&(m.h=c),this.outstandingPuts_.push({action:t,request:m,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,s,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,W.Wl)(t));const r=t.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):jR("Unrecognized action received from server: "+(0,W.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=V0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let _=!1,C=null;const P=function(){C?C.close():(_=!0,u())};t.realtime_={close:P,sendRequest:function(J){(0,W.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(J)}};const G=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[J,he]=yield Promise.all([t.authTokenProvider_.getToken(G),t.appCheckTokenProvider_.getToken(G)]);_?bs("getToken() completed but was canceled"):(bs("getToken() completed. Creating connection."),t.authToken_=J&&J.accessToken,t.appCheckToken_=he&&he.token,C=new zM(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,s,u,Re=>{ho(Re+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(J){t.log_("Failed to get token: "+J),_||(t.repoInfo_.nodeAdmin&&ho(J),P())}}})()}interrupt(t){bs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){bs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let s;s=r?r.map(c=>HR(c)).join("$"):"default";const u=this.removeListen_(t,s);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const s=new ar(t).toString();let u;if(this.listens.has(s)){const c=this.listens.get(s);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(s)}else u=void 0;return u}onAuthRevoked_(t,r){bs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){bs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,W.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+VR.replace(/\./g,"-")]=1,(0,W.uI)()?t["framework.cordova"]=1:(0,W.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=JD.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Cn(e,t)}}class XD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Cn(lp,e),s=new Cn(lp,t);return 0!==this.compare(r,s)}minPost(){return Cn.MIN}}class eN extends XD{static get __EMPTY_NODE(){return eA}static set __EMPTY_NODE(e){eA=e}compare(e,t){return Om(e.name,t.name)}isDefinedOn(e){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Cn.MIN}maxPost(){return new Cn(ch,eA)}makePost(e,t){return(0,W.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Cn(e,eA)}toString(){return".key"}}const Jc=new eN;class tA{constructor(e,t,r,s,u=null){this.isReverse_=s,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,s&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let eP,Ul=(()=>{class n{constructor(t,r,s,u,c){this.key=t,this.value=r,this.color=s??n.RED,this.left=u??ha.EMPTY_NODE,this.right=c??ha.EMPTY_NODE}copy(t,r,s,u,c){return new n(t??this.key,r??this.value,s??this.color,u??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let u=this;const c=s(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,s),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,s)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return ha.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let s,u;if(s=this,r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===r(t,s.key)){if(s.right.isEmpty())return ha.EMPTY_NODE;u=s.right.min_(),s=s.copy(u.key,u.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ha{constructor(e,t=ha.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ha(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ul.BLACK,null,null))}remove(e){return new ha(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ul.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(s=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tA(this.root_,null,this.comparator_,!0,e)}}function PO(n,e){return Om(n.name,e.name)}function XR(n,e){return Om(n,e)}ha.EMPTY_NODE=new class RO{copy(e,t,r,s,u){return this}insert(e,t,r){return new Ul(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tN=function(n){return"number"==typeof n?"number:"+EM(n):"string:"+n},nN=function(n){if(n.isLeafNode()){const e=n.val();(0,W.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,W.r3)(e,".sv"),"Priority must be a string or number.")}else(0,W.hu)(n===eP||n.isEmpty(),"priority of unexpected type.");(0,W.hu)(n===eP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rN,iN,sN,uv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nN(this.priorityNode_)}static set __childrenNodeConstructor(t){rN=t}static get __childrenNodeConstructor(){return rN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const s=yn(t);return null===s?r:r.isEmpty()&&".priority"!==s?this:((0,W.hu)(".priority"!==s||1===dp(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Sr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?EM(this.value_):this.value_,this.lazyHash_=mM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,W.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,s=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(s);return(0,W.hu)(u>=0,"Unknown leaf type: "+r),(0,W.hu)(c>=0,"Unknown leaf type: "+s),u===c?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fr=new class OO extends XD{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),u=r.compareTo(s);return 0===u?Om(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Cn.MIN}maxPost(){return new Cn(ch,new uv("[PRIORITY-POST]",sN))}makePost(e,t){const r=iN(e);return new Cn(t,new uv("[PRIORITY-POST]",r))}toString(){return".priority"}},kO=Math.log(2);class LO{constructor(e){this.count=parseInt(Math.log(e+1)/kO,10),this.current_=this.count-1;const s=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nA=function(n,e,t,r){n.sort(e);const s=function(_,C){const P=C-_;let k,G;if(0===P)return null;if(1===P)return k=n[_],G=t?t(k):k,new Ul(G,k.node,Ul.BLACK,null,null);{const J=parseInt(P/2,10)+_,he=s(_,J),Re=s(J+1,C);return k=n[J],G=t?t(k):k,new Ul(G,k.node,Ul.BLACK,he,Re)}},m=function(_){let C=null,P=null,k=n.length;const G=function(he,Re){const Ne=k-he,ht=k;k-=he;const mt=s(Ne+1,ht),Qe=n[Ne],Ct=t?t(Qe):Qe;J(new Ul(Ct,Qe.node,Re,null,mt))},J=function(he){C?(C.left=he,C=he):(P=he,C=he)};for(let he=0;he<_.count;++he){const Re=_.nextBitIsOne(),Ne=Math.pow(2,_.count-(he+1));Re?G(Ne,Ul.BLACK):(G(Ne,Ul.BLACK),G(Ne,Ul.RED))}return P}(new LO(n.length));return new ha(r||e,m)};let tP;const lv={};class dh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,W.hu)(lv&&Fr,"ChildrenNode.ts has not been loaded"),tP=tP||new dh({".priority":lv},{".priority":Fr}),tP}get(e){const t=(0,W.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ha?t:null}hasIndex(e){return(0,W.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,W.hu)(e!==Jc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const u=t.getIterator(Cn.Wrap);let m,c=u.getNext();for(;c;)s=s||e.isDefinedOn(c.node),r.push(c),c=u.getNext();m=s?nA(r,e.getCompare()):lv;const _=e.toString(),C=Object.assign({},this.indexSet_);C[_]=e;const P=Object.assign({},this.indexes_);return P[_]=m,new dh(P,C)}addToIndexes(e,t){const r=(0,W.UI)(this.indexes_,(s,u)=>{const c=(0,W.DV)(this.indexSet_,u);if((0,W.hu)(c,"Missing index implementation for "+u),s===lv){if(c.isDefinedOn(e.node)){const m=[],_=t.getIterator(Cn.Wrap);let C=_.getNext();for(;C;)C.name!==e.name&&m.push(C),C=_.getNext();return m.push(e),nA(m,c.getCompare())}return lv}{const m=t.get(e.name);let _=s;return m&&(_=_.remove(new Cn(e.name,m))),_.insert(e,e.node)}});return new dh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,W.UI)(this.indexes_,s=>{if(s===lv)return s;{const u=t.get(e.name);return u?s.remove(new Cn(e.name,u)):s}});return new dh(r,this.indexSet_)}}let U0,hn=(()=>{class n{constructor(t,r,s){this.children_=t,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&nN(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return U0||(U0=new n(new ha(XR),null,dh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||U0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?U0:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(Sr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,W.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const s=new Cn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(s,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(s,this.children_));const m=u.isEmpty()?U0:this.priorityNode_;return new n(u,m,c)}}updateChild(t,r){const s=yn(t);if(null===s)return r;{(0,W.hu)(".priority"!==yn(t)||1===dp(t),".priority must be the last token in a path");const u=this.getImmediateChild(s).updateChild(Sr(t),r);return this.updateImmediateChild(s,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let s=0,u=0,c=!0;if(this.forEachChild(Fr,(m,_)=>{r[m]=_.val(t),s++,c&&n.INTEGER_REGEXP_.test(m)?u=Math.max(u,Number(m)):c=!1}),!t&&c&&u<2*s){const m=[];for(const _ in r)m[_]=r[_];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tN(this.getPriority().val())+":"),this.forEachChild(Fr,(r,s)=>{const u=s.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":mM(t)}return this.lazyHash_}getPredecessorChildName(t,r,s){const u=this.resolveIndex_(s);if(u){const c=u.getPredecessorKey(new Cn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Cn(r,this.children_.get(r)):null}forEachChild(t,r){const s=this.resolveIndex_(t);return s?s.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Cn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Cn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===B0?-1:0}withIndex(t){if(t===Jc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Jc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const s=this.getIterator(Fr),u=r.getIterator(Fr);let c=s.getNext(),m=u.getNext();for(;c&&m;){if(c.name!==m.name||!c.node.equals(m.node))return!1;c=s.getNext(),m=u.getNext()}return null===c&&null===m}return!1}return!1}}resolveIndex_(t){return t===Jc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const B0=new class FO extends hn{constructor(){super(new ha(XR),hn.EMPTY_NODE,dh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return hn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Cn,{MIN:{value:new Cn(lp,hn.EMPTY_NODE)},MAX:{value:new Cn(ch,B0)}}),eN.__EMPTY_NODE=hn.EMPTY_NODE,uv.__childrenNodeConstructor=hn,function xO(n){eP=n}(B0),function NO(n){sN=n}(B0);const VO=!0;function ci(n,e=null){if(null===n)return hn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,W.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new uv(n,ci(e));if(n instanceof Array||!VO){let t=hn.EMPTY_NODE;return Ss(n,(r,s)=>{if((0,W.r3)(n,r)&&"."!==r.substring(0,1)){const u=ci(s);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(ci(e))}{const t=[];let r=!1;if(Ss(n,(c,m)=>{if("."!==c.substring(0,1)){const _=ci(m);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Cn(c,_)))}}),0===t.length)return hn.EMPTY_NODE;const u=nA(t,PO,c=>c.name,XR);if(r){const c=nA(t,Fr.getCompare());return new hn(u,ci(e),new dh({".priority":c},{".priority":Fr}))}return new hn(u,ci(e),dh.Default)}}!function MO(n){iN=n}(ci);class nP extends XD{constructor(e){super(),this.indexPath_=e,(0,W.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),u=r.compareTo(s);return 0===u?Om(e.name,t.name):u}makePost(e,t){const r=ci(e),s=hn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Cn(t,s)}maxPost(){const e=hn.EMPTY_NODE.updateChild(this.indexPath_,B0);return new Cn(ch,e)}toString(){return F0(this.indexPath_,0).join("/")}}const rP=new class UO extends XD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Om(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Cn.MIN}maxPost(){return Cn.MAX}makePost(e,t){const r=ci(e);return new Cn(t,r)}toString(){return".value"}};function oN(n){return{type:"value",snapshotNode:n}}function cv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function j0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function H0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class iP{constructor(e){this.index_=e}updateChild(e,t,r,s,u,c){(0,W.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(s).equals(r.getChild(s))&&m.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(j0(t,m)):(0,W.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?c.trackChildChange(cv(t,r)):c.trackChildChange(H0(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Fr,(s,u)=>{t.hasChild(s)||r.trackChildChange(j0(s,u))}),t.isLeafNode()||t.forEachChild(Fr,(s,u)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(u)||r.trackChildChange(H0(s,u,c))}else r.trackChildChange(cv(s,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?hn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $0{constructor(e){this.indexedFilter_=new iP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$0.getStartPost_(e),this.endPost_=$0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,s,u,c){return this.matches(new Cn(t,r))||(r=hn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=hn.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(hn.EMPTY_NODE);const u=this;return t.forEachChild(Fr,(c,m)=>{u.matches(new Cn(c,m))||(s=s.updateImmediateChild(c,hn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class jO{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,s,u,c){return this.rangedFilter_.matches(new Cn(t,r))||(r=hn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=hn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;s=hn.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m)){if(!this.withinDirectionalEnd(m))break;s=s.updateImmediateChild(m.name,m.node),c++}}}else{let u;s=t.withIndex(this.index_),s=s.updatePriority(hn.EMPTY_NODE),u=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let c=0;for(;u.hasNext();){const m=u.getNext();c<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?c++:s=s.updateImmediateChild(m.name,hn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,u){let c;if(this.reverse_){const k=this.index_.getCompare();c=(G,J)=>k(J,G)}else c=this.index_.getCompare();const m=e;(0,W.hu)(m.numChildren()===this.limit_,"");const _=new Cn(t,r),C=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),P=this.rangedFilter_.matches(_);if(m.hasChild(t)){const k=m.getImmediateChild(t);let G=s.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=G&&(G.name===t||m.hasChild(G.name));)G=s.getChildAfterChild(this.index_,G,this.reverse_);const J=null==G?1:c(G,_);if(P&&!r.isEmpty()&&J>=0)return u?.trackChildChange(H0(t,r,k)),m.updateImmediateChild(t,r);{u?.trackChildChange(j0(t,k));const Re=m.updateImmediateChild(t,hn.EMPTY_NODE);return null!=G&&this.rangedFilter_.matches(G)?(u?.trackChildChange(cv(G.name,G.node)),Re.updateImmediateChild(G.name,G.node)):Re}}return r.isEmpty()?e:P&&c(C,_)>=0?(null!=u&&(u.trackChildChange(j0(C.name,C.node)),u.trackChildChange(cv(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(C.name,hn.EMPTY_NODE)):e}}class rA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ch}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fr}copy(){const e=new rA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function oP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function iA(n,e){const t=n.copy();return t.index_=e,t}function aN(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Fr?t="$priority":n.index_===rP?t="$value":n.index_===Jc?t="$key":((0,W.hu)(n.index_ instanceof nP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,W.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,W.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,W.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,W.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,W.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fr&&(e.i=n.index_.toString()),e}class sA extends qM{constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=N0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,W.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,s){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=sA.getListenId_(e,r),m={};this.listens_[c]=m;const _=aN(e._queryParams);this.restRequest_(u+".json",_,(C,P)=>{let k=P;if(404===C&&(k=null,C=null),null===C&&this.onDataUpdate_(u,k,!1,r),(0,W.DV)(this.listens_,c)===m){let G;G=C?401===C?"permission_denied":"rest_error:"+C:"ok",s(G,null)}})}unlisten(e,t){const r=sA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=aN(e._queryParams),r=e._path.toString(),s=new W.BH;return this.restRequest_(r+".json",t,(u,c)=>{let m=c;404===u&&(m=null,u=null),null===u?(this.onDataUpdate_(r,m,!1,null),s.resolve(m)):s.reject(new Error(m))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,u])=>{s&&s.accessToken&&(t.auth=s.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,W.xO)(t);this.log_("Sending REST request for "+c);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+c+" received. status:",m.status,"response:",m.responseText);let _=null;if(m.status>=200&&m.status<300){try{_=(0,W.cI)(m.responseText)}catch{ho("Failed to parse JSON response for "+c+": "+m.responseText)}r(null,_)}else 401!==m.status&&404!==m.status&&ho("Got unsuccessful REST response for "+c+" Status: "+m.status),r(m.status);r=null}},m.open("GET",c,!0),m.send()})}}class WO{constructor(){this.rootNode_=hn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function oA(){return{value:null,children:new Map}}function dv(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,oA()),dv(n.children.get(r),e=Sr(e),t)}}function aP(n,e){if(vn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Fr,(r,s)=>{dv(n,new ar(r),s)}),aP(n,e)}}if(n.children.size>0){const t=yn(e);return e=Sr(e),n.children.has(t)&&aP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function uP(n,e,t){null!==n.value?t(e,n.value):function ZO(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,s)=>{uP(s,new ar(e.toString()+"/"+r),t)})}class KO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ss(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}class JO{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new KO(e);const r=1e4+2e4*Math.random();k0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ss(e,(s,u)=>{u>0&&(0,W.r3)(this.statsToReport_,s)&&(t[s]=u,r=!0)}),r&&this.server_.reportStats(t),k0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Xc||{});function dP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Xc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ar(e));return new aA(qn(),t,this.revert)}}return(0,W.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new aA(Sr(this.path),this.affectedTree,this.revert)}}class G0{constructor(e,t){this.source=e,this.path=t,this.type=Xc.LISTEN_COMPLETE}operationForChild(e){return vn(this.path)?new G0(this.source,qn()):new G0(this.source,Sr(this.path))}}class Fm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Xc.OVERWRITE}operationForChild(e){return vn(this.path)?new Fm(this.source,qn(),this.snap.getImmediateChild(e)):new Fm(this.source,Sr(this.path),this.snap)}}class hv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Xc.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new ar(e));return t.isEmpty()?null:t.value?new Fm(this.source,qn(),t.value):new hv(this.source,qn(),t)}return(0,W.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hv(this.source,Sr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class XO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function z0(n,e,t,r,s,u){const c=r.filter(m=>m.type===t);c.sort((m,_)=>function nk(n,e,t){if(null==e.childName||null==t.childName)throw(0,W.g5)("Should only compare child_ events.");const r=new Cn(e.childName,e.snapshotNode),s=new Cn(t.childName,t.snapshotNode);return n.index_.compare(r,s)}(n,m,_)),c.forEach(m=>{const _=function tk(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,u);s.forEach(C=>{C.respondsTo(m.type)&&e.push(C.createEvent(_,n.query_))})})}function uA(n,e){return{eventCache:n,serverCache:e}}function q0(n,e,t,r){return uA(new hp(e,t,r),n.serverCache)}function cN(n,e,t,r){return uA(n.eventCache,new hp(e,t,r))}function lA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let hP;class Vr{constructor(e,t=(()=>(hP||(hP=new ha(B1)),hP))()){this.value=e,this.children=t}static fromObject(e){let t=new Vr(null);return Ss(e,(r,s)=>{t=t.set(new ar(r),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:qn(),value:this.value};if(vn(e))return null;{const r=yn(e),s=this.children.get(r);if(null!==s){const u=s.findRootMostMatchingPathAndValue(Sr(e),t);return null!=u?{path:Xr(new ar(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(Sr(e)):new Vr(null)}}set(e,t){if(vn(e))return new Vr(t,this.children);{const r=yn(e),u=(this.children.get(r)||new Vr(null)).set(Sr(e),t),c=this.children.insert(r,u);return new Vr(this.value,c)}}remove(e){if(vn(e))return this.children.isEmpty()?new Vr(null):new Vr(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const s=r.remove(Sr(e));let u;return u=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&u.isEmpty()?new Vr(null):new Vr(this.value,u)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(Sr(e)):null}}setTree(e,t){if(vn(e))return t;{const r=yn(e),u=(this.children.get(r)||new Vr(null)).setTree(Sr(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Vr(this.value,c)}}fold(e){return this.fold_(qn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,u)=>{r[s]=u.fold_(Xr(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,qn(),t)}findOnPath_(e,t,r){const s=!!this.value&&r(t,this.value);if(s)return s;if(vn(e))return null;{const u=yn(e),c=this.children.get(u);return c?c.findOnPath_(Sr(e),Xr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,qn(),t)}foreachOnPath_(e,t,r){if(vn(e))return this;{this.value&&r(t,this.value);const s=yn(e),u=this.children.get(s);return u?u.foreachOnPath_(Sr(e),Xr(t,s),r):new Vr(null)}}foreach(e){this.foreach_(qn(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Bl{constructor(e){this.writeTree_=e}static empty(){return new Bl(new Vr(null))}}function W0(n,e,t){if(vn(e))return new Bl(new Vr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const s=r.path;let u=r.value;const c=Oo(s,e);return u=u.updateChild(c,t),new Bl(n.writeTree_.set(s,u))}{const s=new Vr(t),u=n.writeTree_.setTree(e,s);return new Bl(u)}}}function fP(n,e,t){let r=n;return Ss(t,(s,u)=>{r=W0(r,Xr(e,s),u)}),r}function dN(n,e){if(vn(e))return Bl.empty();{const t=n.writeTree_.setTree(e,new Vr(null));return new Bl(t)}}function pP(n,e){return null!=Um(n,e)}function Um(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Oo(t.path,e)):null}function hN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fr,(r,s)=>{e.push(new Cn(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{null!=s.value&&e.push(new Cn(r,s.value))}),e}function fp(n,e){if(vn(e))return n;{const t=Um(n,e);return new Bl(null!=t?new Vr(t):n.writeTree_.subtree(e))}}function gP(n){return n.writeTree_.isEmpty()}function fv(n,e){return fN(qn(),n.writeTree_,e)}function fN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,u)=>{".priority"===s?((0,W.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=fN(Xr(n,s),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Xr(n,".priority"),r)),t}}function cA(n,e){return yN(e,n)}function uk(n,e){if(n.snap)return Uu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Uu(Xr(n.path,t),e))return!0;return!1}function ck(n){return n.visible}function pN(n,e,t){let r=Bl.empty();for(let s=0;s<n.length;++s){const u=n[s];if(e(u)){const c=u.path;let m;if(u.snap)Uu(t,c)?(m=Oo(t,c),r=W0(r,m,u.snap)):Uu(c,t)&&(m=Oo(c,t),r=W0(r,qn(),u.snap.getChild(m)));else{if(!u.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if(Uu(t,c))m=Oo(t,c),r=fP(r,m,u.children);else if(Uu(c,t))if(m=Oo(c,t),vn(m))r=fP(r,qn(),u.children);else{const _=(0,W.DV)(u.children,yn(m));if(_){const C=_.getChild(Sr(m));r=W0(r,qn(),C)}}}}}return r}function gN(n,e,t,r,s){if(r||s){const u=fp(n.visibleWrites,e);return!s&&gP(u)?t:s||null!=t||pP(u,qn())?fv(pN(n.allWrites,function(C){return(C.visible||s)&&(!r||!~r.indexOf(C.writeId))&&(Uu(C.path,e)||Uu(e,C.path))},e),t||hn.EMPTY_NODE):null}{const u=Um(n.visibleWrites,e);if(null!=u)return u;{const c=fp(n.visibleWrites,e);return gP(c)?t:null!=t||pP(c,qn())?fv(c,t||hn.EMPTY_NODE):null}}}function dA(n,e,t,r){return gN(n.writeTree,n.treePath,e,t,r)}function mP(n,e){return function dk(n,e,t){let r=hn.EMPTY_NODE;const s=Um(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Fr,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=fp(n.visibleWrites,e);return t.forEachChild(Fr,(c,m)=>{const _=fv(fp(u,new ar(c)),m);r=r.updateImmediateChild(c,_)}),hN(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return hN(fp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function mN(n,e,t,r){return function hk(n,e,t,r,s){(0,W.hu)(r||s,"Either existingEventSnap or existingServerSnap must exist");const u=Xr(e,t);if(pP(n.visibleWrites,u))return null;{const c=fp(n.visibleWrites,u);return gP(c)?s.getChild(t):fv(c,s.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function hA(n,e){return function pk(n,e){return Um(n.visibleWrites,e)}(n.writeTree,Xr(n.treePath,e))}function _P(n,e,t){return function fk(n,e,t,r){const s=Xr(e,t),u=Um(n.visibleWrites,s);return null!=u?u:r.isCompleteForChild(t)?fv(fp(n.visibleWrites,s),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function _N(n,e){return yN(Xr(n.treePath,e),n.writeTree)}function yN(n,e){return{treePath:n,writeTree:e}}class yk{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,W.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const u=s.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,H0(r,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,j0(r,s.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,cv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,W.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(r,H0(r,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const vN=new class vk{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class yP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _P(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vm(this.viewCache_),u=function _k(n,e,t,r,s,u){return function gk(n,e,t,r,s,u,c){let m;const _=fp(n.visibleWrites,e),C=Um(_,qn());if(null!=C)m=C;else{if(null==t)return[];m=fv(_,t)}if(m=m.withIndex(c),m.isEmpty()||m.isLeafNode())return[];{const P=[],k=c.getCompare(),G=u?m.getReverseIteratorFrom(r,c):m.getIteratorFrom(r,c);let J=G.getNext();for(;J&&P.length<s;)0!==k(J,r)&&P.push(J),J=G.getNext();return P}}(n.writeTree,n.treePath,e,t,r,s,u)}(this.writes_,s,t,1,r,e);return 0===u.length?null:u[0]}}function EN(n,e,t,r,s,u){const c=e.eventCache;if(null!=hA(r,t))return e;{let m,_;if(vn(t))if((0,W.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Vm(e),k=mP(r,C instanceof hn?C:hn.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),k,u)}else{const C=dA(r,Vm(e));m=n.filter.updateFullNode(e.eventCache.getNode(),C,u)}else{const C=yn(t);if(".priority"===C){(0,W.hu)(1===dp(t),"Can't have a priority with additional path components");const P=c.getNode();_=e.serverCache.getNode();const k=mN(r,t,P,_);m=null!=k?n.filter.updatePriority(P,k):c.getNode()}else{const P=Sr(t);let k;if(c.isCompleteForChild(C)){_=e.serverCache.getNode();const G=mN(r,t,c.getNode(),_);k=null!=G?c.getNode().getImmediateChild(C).updateChild(P,G):c.getNode().getImmediateChild(C)}else k=_P(r,C,e.serverCache);m=null!=k?n.filter.updateChild(c.getNode(),C,k,P,s,u):c.getNode()}}return q0(e,m,c.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function fA(n,e,t,r,s,u,c,m){const _=e.serverCache;let C;const P=c?n.filter:n.filter.getIndexedFilter();if(vn(t))C=P.updateFullNode(_.getNode(),r,null);else if(P.filtersNodes()&&!_.isFiltered()){const J=_.getNode().updateChild(t,r);C=P.updateFullNode(_.getNode(),J,null)}else{const J=yn(t);if(!_.isCompleteForPath(t)&&dp(t)>1)return e;const he=Sr(t),Ne=_.getNode().getImmediateChild(J).updateChild(he,r);C=".priority"===J?P.updatePriority(_.getNode(),Ne):P.updateChild(_.getNode(),J,Ne,he,vN,null)}const k=cN(e,C,_.isFullyInitialized()||vn(t),P.filtersNodes());return EN(n,k,t,s,new yP(s,k,u),m)}function vP(n,e,t,r,s,u,c){const m=e.eventCache;let _,C;const P=new yP(s,e,u);if(vn(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=q0(e,C,!0,n.filter.filtersNodes());else{const k=yn(t);if(".priority"===k)C=n.filter.updatePriority(e.eventCache.getNode(),r),_=q0(e,C,m.isFullyInitialized(),m.isFiltered());else{const G=Sr(t),J=m.getNode().getImmediateChild(k);let he;if(vn(G))he=r;else{const Re=P.getCompleteChild(k);he=null!=Re?".priority"===YR(G)&&Re.getChild(YM(G)).isEmpty()?Re:Re.updateChild(G,r):hn.EMPTY_NODE}_=J.equals(he)?e:q0(e,n.filter.updateChild(m.getNode(),k,he,G,P,c),m.isFullyInitialized(),n.filter.filtersNodes())}}return _}function IN(n,e){return n.eventCache.isCompleteForChild(e)}function wN(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function EP(n,e,t,r,s,u,c,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,_=e;C=vn(t)?r:new Vr(null).setTree(t,r);const P=e.serverCache.getNode();return C.children.inorderTraversal((k,G)=>{if(P.hasChild(k)){const he=wN(0,e.serverCache.getNode().getImmediateChild(k),G);_=fA(n,_,new ar(k),he,s,u,c,m)}}),C.children.inorderTraversal((k,G)=>{const J=!e.serverCache.isCompleteForChild(k)&&null===G.value;if(!P.hasChild(k)&&!J){const Re=wN(0,e.serverCache.getNode().getImmediateChild(k),G);_=fA(n,_,new ar(k),Re,s,u,c,m)}}),_}class Sk{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new iP(r.getIndex()),u=function HO(n){return n.loadsAllData()?new iP(n.getIndex()):n.hasLimit()?new jO(n):new $0(n)}(r);this.processor_=function Ek(n){return{filter:n}}(u);const c=t.serverCache,m=t.eventCache,_=s.updateFullNode(hn.EMPTY_NODE,c.getNode(),null),C=u.updateFullNode(hn.EMPTY_NODE,m.getNode(),null),P=new hp(_,c.isFullyInitialized(),s.filtersNodes()),k=new hp(C,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=uA(k,P),this.eventGenerator_=new XO(this.query_)}get query(){return this.query_}}function xk(n,e){const t=Vm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function TN(n){return 0===n.eventRegistrations_.length}function CN(n,e,t){const r=[];if(t){(0,W.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,s);c&&r.push(c)})}if(e){let s=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(u+1));break}}else s.push(c)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function DN(n,e,t,r){e.type===Xc.MERGE&&null!==e.source.queryId&&((0,W.hu)(Vm(n.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(lA(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,u=function wk(n,e,t,r,s){const u=new yk;let c,m;if(t.type===Xc.OVERWRITE){const C=t;C.source.fromUser?c=vP(n,e,C.path,C.snap,r,s,u):((0,W.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||e.serverCache.isFiltered()&&!vn(C.path),c=fA(n,e,C.path,C.snap,r,s,m,u))}else if(t.type===Xc.MERGE){const C=t;C.source.fromUser?c=function Ck(n,e,t,r,s,u,c){let m=e;return r.foreach((_,C)=>{const P=Xr(t,_);IN(e,yn(P))&&(m=vP(n,m,P,C,s,u,c))}),r.foreach((_,C)=>{const P=Xr(t,_);IN(e,yn(P))||(m=vP(n,m,P,C,s,u,c))}),m}(n,e,C.path,C.children,r,s,u):((0,W.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||e.serverCache.isFiltered(),c=EP(n,e,C.path,C.children,r,s,m,u))}else if(t.type===Xc.ACK_USER_WRITE){const C=t;c=C.revert?function bk(n,e,t,r,s,u){let c;if(null!=hA(r,t))return e;{const m=new yP(r,e,s),_=e.eventCache.getNode();let C;if(vn(t)||".priority"===yn(t)){let P;if(e.serverCache.isFullyInitialized())P=dA(r,Vm(e));else{const k=e.serverCache.getNode();(0,W.hu)(k instanceof hn,"serverChildren would be complete if leaf node"),P=mP(r,k)}C=n.filter.updateFullNode(_,P,u)}else{const P=yn(t);let k=_P(r,P,e.serverCache);null==k&&e.serverCache.isCompleteForChild(P)&&(k=_.getImmediateChild(P)),C=null!=k?n.filter.updateChild(_,P,k,Sr(t),m,u):e.eventCache.getNode().hasChild(P)?n.filter.updateChild(_,P,hn.EMPTY_NODE,Sr(t),m,u):_,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=dA(r,Vm(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=hA(r,qn()),q0(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,s,u):function Dk(n,e,t,r,s,u,c){if(null!=hA(s,t))return e;const m=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(vn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return fA(n,e,t,_.getNode().getChild(t),s,u,m,c);if(vn(t)){let C=new Vr(null);return _.getNode().forEachChild(Jc,(P,k)=>{C=C.set(new ar(P),k)}),EP(n,e,t,C,s,u,m,c)}return e}{let C=new Vr(null);return r.foreach((P,k)=>{const G=Xr(t,P);_.isCompleteForPath(G)&&(C=C.set(P,_.getNode().getChild(G)))}),EP(n,e,t,C,s,u,m,c)}}(n,e,C.path,C.affectedTree,r,s,u)}else{if(t.type!==Xc.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+t.type);c=function Ak(n,e,t,r,s){const u=e.serverCache;return EN(n,cN(e,u.getNode(),u.isFullyInitialized()||vn(t),u.isFiltered()),t,r,vN,s)}(n,e,t.path,r,u)}const _=u.getChanges();return function Tk(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=lA(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(oN(lA(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,s,e,t,r);return function Ik(n,e){(0,W.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,W.hu)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,AN(n,u.changes,u.viewCache.eventCache.getNode(),null)}function AN(n,e,t,r){return function ek(n,e,t,r){const s=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function BO(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),z0(n,s,"child_removed",e,r,t),z0(n,s,"child_added",e,r,t),z0(n,s,"child_moved",u,r,t),z0(n,s,"child_changed",e,r,t),z0(n,s,"value",e,r,t),s}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let pA,mA;class bN{constructor(){this.views=new Map}}function IP(n,e,t,r){const s=e.source.queryId;if(null!==s){const u=n.views.get(s);return(0,W.hu)(null!=u,"SyncTree gave us an op for an invalid query."),DN(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(DN(c,e,t,r));return u}}function SN(n,e,t,r,s){const c=n.views.get(e._queryIdentifier);if(!c){let m=dA(t,s?r:null),_=!1;m?_=!0:r instanceof hn?(m=mP(t,r),_=!1):(m=hn.EMPTY_NODE,_=!1);const C=uA(new hp(m,_,!1),new hp(r,s,!1));return new Sk(e,C)}return c}function RN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function pp(n,e){let t=null;for(const r of n.views.values())t=t||xk(r,e);return t}function PN(n,e){return e._queryParams.loadsAllData()?gA(n):n.views.get(e._queryIdentifier)}function xN(n,e){return null!=PN(n,e)}function gp(n){return null!=gA(n)}function gA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let jk=1;class MN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vr(null),this.pendingWriteTree_=function mk(){return{visibleWrites:Bl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wP(n,e,t,r,s){return function ik(n,e,t,r,s){(0,W.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=W0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,s),s?pv(n,new Fm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function mp(n,e,t=!1){const r=function ok(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function ak(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,W.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,u=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const m=n.allWrites[c];m.visible&&(c>=t&&uk(m,r.path)?s=!1:Uu(r.path,m.path)&&(u=!0)),c--}return!!s&&(u?(function lk(n){n.visibleWrites=pN(n.allWrites,ck,qn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=dN(n.visibleWrites,r.path):Ss(r.children,_=>{n.visibleWrites=dN(n.visibleWrites,Xr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let u=new Vr(null);return null!=r.snap?u=u.set(qn(),!0):Ss(r.children,c=>{u=u.set(new ar(c),!0)}),pv(n,new aA(r.path,u,t))}return[]}function Z0(n,e,t){return pv(n,new Fm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function _A(n,e,t,r,s=!1){const u=e._path,c=n.syncPointTree_.get(u);let m=[];if(c&&("default"===e._queryIdentifier||xN(c,e))){const _=function Vk(n,e,t,r){const s=e._queryIdentifier,u=[];let c=[];const m=gp(n);if("default"===s)for(const[_,C]of n.views.entries())c=c.concat(CN(C,t,r)),TN(C)&&(n.views.delete(_),C.query._queryParams.loadsAllData()||u.push(C.query));else{const _=n.views.get(s);_&&(c=c.concat(CN(_,t,r)),TN(_)&&(n.views.delete(s),_.query._queryParams.loadsAllData()||u.push(_.query)))}return m&&!gp(n)&&u.push(new(function kk(){return(0,W.hu)(pA,"Reference.ts has not been loaded"),pA}())(e._repo,e._path)),{removed:u,events:c}}(c,e,t,r);(function Lk(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(u));const C=_.removed;if(m=_.events,!s){const P=-1!==C.findIndex(G=>G._queryParams.loadsAllData()),k=n.syncPointTree_.findOnPath(u,(G,J)=>gp(J));if(P&&!k){const G=n.syncPointTree_.subtree(u);if(!G.isEmpty()){const J=function Zk(n){return n.fold((e,t,r)=>{if(t&&gp(t))return[gA(t)];{let s=[];return t&&(s=RN(t)),Ss(r,(u,c)=>{s=s.concat(c)}),s}})}(G);for(let he=0;he<J.length;++he){const Re=J[he],Ne=Re.query,ht=LN(n,Re);n.listenProvider_.startListening(Y0(Ne),K0(n,Ne),ht.hashFn,ht.onComplete)}}}!k&&C.length>0&&!r&&(P?n.listenProvider_.stopListening(Y0(e),null):C.forEach(G=>{const J=n.queryToTagMap.get(vA(G));n.listenProvider_.stopListening(Y0(G),J)}))}!function Kk(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=vA(r),u=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(u)}}}(n,C)}return m}function NN(n,e,t,r){const s=CP(n,r);if(null!=s){const u=DP(s),c=u.path,m=u.queryId,_=Oo(c,e);return AP(n,c,new Fm(dP(m),_,t))}return[]}function TP(n,e,t,r=!1){const s=e._path;let u=null,c=!1;n.syncPointTree_.foreachOnPath(s,(G,J)=>{const he=Oo(G,s);u=u||pp(J,he),c=c||gp(J)});let _,m=n.syncPointTree_.get(s);m?(c=c||gp(m),u=u||pp(m,qn())):(m=new bN,n.syncPointTree_=n.syncPointTree_.set(s,m)),null!=u?_=!0:(_=!1,u=hn.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((J,he)=>{const Re=pp(he,qn());Re&&(u=u.updateImmediateChild(J,Re))}));const C=xN(m,e);if(!C&&!e._queryParams.loadsAllData()){const G=vA(e);(0,W.hu)(!n.queryToTagMap.has(G),"View does not exist, but we have a tag");const J=function Yk(){return jk++}();n.queryToTagMap.set(G,J),n.tagToQueryMap.set(J,G)}let k=function Fk(n,e,t,r,s,u){const c=SN(n,e,r,s,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Mk(n,e){n.eventRegistrations_.push(e)}(c,t),function Nk(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fr,(u,c)=>{r.push(cv(u,c))}),t.isFullyInitialized()&&r.push(oN(t.getNode())),AN(n,r,t.getNode(),e)}(c,t)}(m,e,t,cA(n.pendingWriteTree_,s),u,_);if(!C&&!c&&!r){const G=PN(m,e);k=k.concat(function Qk(n,e,t){const r=e._path,s=K0(n,e),u=LN(n,t),c=n.listenProvider_.startListening(Y0(e),s,u.hashFn,u.onComplete),m=n.syncPointTree_.subtree(r);if(s)(0,W.hu)(!gp(m.value),"If we're adding a query, it shouldn't be shadowed");else{const _=m.fold((C,P,k)=>{if(!vn(C)&&P&&gp(P))return[gA(P).query];{let G=[];return P&&(G=G.concat(RN(P).map(J=>J.query))),Ss(k,(J,he)=>{G=G.concat(he)}),G}});for(let C=0;C<_.length;++C){const P=_[C];n.listenProvider_.stopListening(Y0(P),K0(n,P))}}return c}(n,e,G))}return k}function yA(n,e,t){const s=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,m)=>{const C=pp(m,Oo(c,e));if(C)return C});return gN(s,e,u,t,!0)}function pv(n,e){return ON(e,n.syncPointTree_,null,cA(n.pendingWriteTree_,qn()))}function ON(n,e,t,r){if(vn(n.path))return kN(n,e,t,r);{const s=e.get(qn());null==t&&null!=s&&(t=pp(s,qn()));let u=[];const c=yn(n.path),m=n.operationForChild(c),_=e.children.get(c);if(_&&m){const C=t?t.getImmediateChild(c):null,P=_N(r,c);u=u.concat(ON(m,_,C,P))}return s&&(u=u.concat(IP(s,n,r,t))),u}}function kN(n,e,t,r){const s=e.get(qn());null==t&&null!=s&&(t=pp(s,qn()));let u=[];return e.children.inorderTraversal((c,m)=>{const _=t?t.getImmediateChild(c):null,C=_N(r,c),P=n.operationForChild(c);P&&(u=u.concat(kN(P,m,_,C)))}),s&&(u=u.concat(IP(s,n,r,t))),u}function LN(n,e){const t=e.query,r=K0(n,t);return{hashFn:()=>(function Rk(n){return n.viewCache_.serverCache.getNode()}(e)||hn.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return r?function zk(n,e,t){const r=CP(n,t);if(r){const s=DP(r),u=s.path,c=s.queryId,m=Oo(u,e);return AP(n,u,new G0(dP(c),m))}return[]}(n,t._path,r):function Gk(n,e){return pv(n,new G0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function $1(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(s,t);return _A(n,t,null,u)}}}}function K0(n,e){const t=vA(e);return n.queryToTagMap.get(t)}function vA(n){return n._path.toString()+"$"+n._queryIdentifier}function CP(n,e){return n.tagToQueryMap.get(e)}function DP(n){const e=n.indexOf("$");return(0,W.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ar(n.substr(0,e))}}function AP(n,e,t){const r=n.syncPointTree_.get(e);return(0,W.hu)(r,"Missing sync point for query tag that we're tracking"),IP(r,t,cA(n.pendingWriteTree_,e),null)}function Y0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Bk(){return(0,W.hu)(mA,"Reference.ts has not been loaded"),mA}())(n._repo,n._path):n}class bP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bP(t)}node(){return this.node_}}class SP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Xr(this.path_,e);return new SP(this.syncTree_,t)}node(){return yA(this.syncTree_,this.path_)}}const Jk=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},FN=function(n,e,t){return n&&"object"==typeof n?((0,W.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Xk(n[".sv"],e,t):"object"==typeof n[".sv"]?eL(n[".sv"],e):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Xk=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,W.hu)(!1,"Unexpected server value: "+n)},eL=function(n,e,t){n.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,W.hu)(!1,"Unexpected increment value: "+r);const s=e.node();if((0,W.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const c=s.getValue();return"number"!=typeof c?r:c+r},VN=function(n,e,t,r){return PP(e,new SP(t,n),r)},RP=function(n,e,t){return PP(n,new bP(e),t)};function PP(n,e,t){const r=n.getPriority().val(),s=FN(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,m=FN(c.getValue(),e,t);return m!==c.getValue()||s!==c.getPriority().val()?new uv(m,ci(s)):n}{const c=n;return u=c,s!==c.getPriority().val()&&(u=u.updatePriority(new uv(s))),c.forEachChild(Fr,(m,_)=>{const C=PP(_,e.getImmediateChild(m),t);C!==_&&(u=u.updateImmediateChild(m,C))}),u}}class xP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function EA(n,e){let t=e instanceof ar?e:new ar(e),r=n,s=yn(t);for(;null!==s;){const u=(0,W.DV)(r.node.children,s)||{children:{},childCount:0};r=new xP(s,r,u),t=Sr(t),s=yn(t)}return r}function Bm(n){return n.node.value}function MP(n,e){n.node.value=e,NP(n)}function UN(n){return n.node.childCount>0}function IA(n,e){Ss(n.node.children,(t,r)=>{e(new xP(t,n,r))})}function BN(n,e,t,r){t&&!r&&e(n),IA(n,s=>{BN(s,e,!0,r)}),t&&r&&e(n)}function Q0(n){return new ar(null===n.parent?n.name:Q0(n.parent)+"/"+n.name)}function NP(n){null!==n.parent&&function rL(n,e,t){const r=function tL(n){return void 0===Bm(n)&&!UN(n)}(t),s=(0,W.r3)(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,NP(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,NP(n))}(n.parent,n.name,n)}const iL=/[\[\].#$\/\u0000-\u001F\u007F]/,sL=/[\[\].#$\u0000-\u001F\u007F]/,OP=10485760,wA=function(n){return"string"==typeof n&&0!==n.length&&!iL.test(n)},jN=function(n){return"string"==typeof n&&0!==n.length&&!sL.test(n)},J0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!KD(n)||n&&"object"==typeof n&&(0,W.r3)(n,".sv")},ed=function(n,e,t,r){r&&void 0===e||X0((0,W.gK)(n,"value"),e,t)},X0=function(n,e,t){const r=t instanceof ar?new wO(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+km(r));if("function"==typeof e)throw new Error(n+"contains a function "+km(r)+" with contents = "+e.toString());if(KD(e))throw new Error(n+"contains "+e.toString()+" "+km(r));if("string"==typeof e&&e.length>OP/3&&(0,W.ug)(e)>OP)throw new Error(n+"contains a string greater than "+OP+" utf8 bytes "+km(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,u=!1;if(Ss(e,(c,m)=>{if(".value"===c)s=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!wA(c)))throw new Error(n+" contains an invalid key ("+c+") "+km(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function TO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,W.ug)(e),QM(n)})(r,c),X0(n,m,r),function CO(n){const e=n.parts_.pop();n.byteLength_-=(0,W.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),s&&u)throw new Error(n+' contains ".value" child '+km(r)+" in addition to actual children.")}},HN=function(n,e,t,r){if(r&&void 0===e)return;const s=(0,W.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const u=[];Ss(e,(c,m)=>{const _=new ar(c);if(X0(s,m,Xr(t,_)),".priority"===YR(_)&&!J0(m))throw new Error(s+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=F0(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!wA(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(IO);let s=null;for(t=0;t<e.length;t++){if(r=e[t],null!==s&&Uu(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,u)},kP=function(n,e,t){if(!t||void 0!==e){if(KD(e))throw new Error((0,W.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!J0(e))throw new Error((0,W.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ew=function(n,e,t,r){if(!(r&&void 0===t||wA(t)))throw new Error((0,W.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},tw=function(n,e,t,r){if(!(r&&void 0===t||jN(t)))throw new Error((0,W.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},uL=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),tw(n,e,t,r)},Bu=function(n,e){if(".info"===yn(e))throw new Error(n+" failed = Can't modify data under /.info/")},$N=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!wA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jN(n)}(t))throw new Error((0,W.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function TA(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],u=s.getPath();null!==t&&!QR(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(s)}t&&n.eventLists_.push(t)}function GN(n,e,t){TA(n,t),zN(n,r=>QR(r,e))}function Ga(n,e,t){TA(n,t),zN(n,r=>Uu(r,e)||Uu(e,r))}function zN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];s&&(e(s.path)?(cL(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function cL(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Nm&&bs("event: "+t.toString()),ov(r)}}}const qN="repo_interrupt",dL=25;class hL{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oA(),this.transactionQueueTree_=new xP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WN(n){const t=n.infoData_.getNode(new ar(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function nw(n){return Jk({timestamp:WN(n)})}function ZN(n,e,t,r,s){n.dataUpdateCount++;const u=new ar(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(r){const _=(0,W.UI)(t,C=>ci(C));c=function qk(n,e,t,r){const s=CP(n,r);if(s){const u=DP(s),c=u.path,m=u.queryId,_=Oo(c,e),C=Vr.fromObject(t);return AP(n,c,new hv(dP(m),_,C))}return[]}(n.serverSyncTree_,u,_,s)}else{const _=ci(t);c=NN(n.serverSyncTree_,u,_,s)}else if(r){const _=(0,W.UI)(t,C=>ci(C));c=function $k(n,e,t){const r=Vr.fromObject(t);return pv(n,new hv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,_)}else{const _=ci(t);c=Z0(n.serverSyncTree_,u,_)}let m=u;c.length>0&&(m=mv(n,u)),Ga(n.eventQueue_,m,c)}function KN(n,e){LP(n,"connected",e),!1===e&&function _L(n){gv(n,"onDisconnectEvents");const e=nw(n),t=oA();uP(n.onDisconnect_,qn(),(s,u)=>{const c=VN(s,u,n.serverSyncTree_,e);dv(t,s,c)});let r=[];uP(t,qn(),(s,u)=>{r=r.concat(Z0(n.serverSyncTree_,s,u));const c=BP(n,s);mv(n,c)}),n.onDisconnect_=oA(),Ga(n.eventQueue_,qn(),r)}(n)}function LP(n,e,t){const r=new ar("/.info/"+e),s=ci(t);n.infoData_.updateSnapshot(r,s);const u=Z0(n.infoSyncTree_,r,s);Ga(n.eventQueue_,r,u)}function CA(n){return n.nextWriteId_++}function FP(n,e,t,r,s){gv(n,"set",{path:e.toString(),value:t,priority:r});const u=nw(n),c=ci(t,r),m=yA(n.serverSyncTree_,e),_=RP(c,m,u),C=CA(n),P=wP(n.serverSyncTree_,e,_,C,!0);TA(n.eventQueue_,P),n.server_.put(e.toString(),c.val(!0),(G,J)=>{const he="ok"===G;he||ho("set at "+e+" failed: "+G);const Re=mp(n.serverSyncTree_,C,!he);Ga(n.eventQueue_,e,Re),_p(0,s,G,J)});const k=BP(n,e);mv(n,k),Ga(n.eventQueue_,k,[])}function yL(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{"ok"===r&&aP(n.onDisconnect_,e),_p(0,t,r,s)})}function YN(n,e,t,r){const s=ci(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,c)=>{"ok"===u&&dv(n.onDisconnect_,e,s),_p(0,r,u,c)})}function VP(n,e,t){let r;r=".info"===yn(e._path)?_A(n.infoSyncTree_,e,t):_A(n.serverSyncTree_,e,t),GN(n.eventQueue_,e._path,r)}function QN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(qN)}function gv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bs(t,...e)}function _p(n,e,t,r){e&&ov(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let u=s;r&&(u+=": "+r);const c=new Error(u);c.code=s,e(c)}})}function UP(n,e,t){return yA(n.serverSyncTree_,e,t)||hn.EMPTY_NODE}function DA(n,e=n.transactionQueueTree_){if(e||AA(n,e),Bm(e)){const t=XN(n,e);(0,W.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function CL(n,e,t){const r=t.map(C=>C.currentWriteId),s=UP(n,e,r);let u=s;const c=s.hash();for(let C=0;C<t.length;C++){const P=t[C];(0,W.hu)(0===P.status,"tryToSendTransactionQueue_: items in queue should all be run."),P.status=1,P.retryCount++;const k=Oo(e,P.path);u=u.updateChild(k,P.currentOutputSnapshotRaw)}const m=u.val(!0),_=e;n.server_.put(_.toString(),m,C=>{gv(n,"transaction put response",{path:_.toString(),status:C});let P=[];if("ok"===C){const k=[];for(let G=0;G<t.length;G++)t[G].status=2,P=P.concat(mp(n.serverSyncTree_,t[G].currentWriteId)),t[G].onComplete&&k.push(()=>t[G].onComplete(null,!0,t[G].currentOutputSnapshotResolved)),t[G].unwatcher();AA(n,EA(n.transactionQueueTree_,e)),DA(n,n.transactionQueueTree_),Ga(n.eventQueue_,e,P);for(let G=0;G<k.length;G++)ov(k[G])}else{if("datastale"===C)for(let k=0;k<t.length;k++)t[k].status=3===t[k].status?4:0;else{ho("transaction at "+_.toString()+" failed: "+C);for(let k=0;k<t.length;k++)t[k].status=4,t[k].abortReason=C}mv(n,e)}},c)}(n,Q0(e),t)}else UN(e)&&IA(e,t=>{DA(n,t)})}function mv(n,e){const t=JN(n,e),r=Q0(t);return function DL(n,e,t){if(0===e.length)return;const r=[];let s=[];const c=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const _=e[m],C=Oo(t,_.path);let k,P=!1;if((0,W.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)P=!0,k=_.abortReason,s=s.concat(mp(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=dL)P=!0,k="maxretry",s=s.concat(mp(n.serverSyncTree_,_.currentWriteId,!0));else{const G=UP(n,_.path,c);_.currentInputSnapshot=G;const J=e[m].update(G.val());if(void 0!==J){X0("transaction failed: Data returned ",J,_.path);let he=ci(J);"object"==typeof J&&null!=J&&(0,W.r3)(J,".priority")||(he=he.updatePriority(G.getPriority()));const Ne=_.currentWriteId,ht=nw(n),mt=RP(he,G,ht);_.currentOutputSnapshotRaw=he,_.currentOutputSnapshotResolved=mt,_.currentWriteId=CA(n),c.splice(c.indexOf(Ne),1),s=s.concat(wP(n.serverSyncTree_,_.path,mt,_.currentWriteId,_.applyLocally)),s=s.concat(mp(n.serverSyncTree_,Ne,!0))}else P=!0,k="nodata",s=s.concat(mp(n.serverSyncTree_,_.currentWriteId,!0))}Ga(n.eventQueue_,t,s),s=[],P&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===k?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(k),!1,null)))}AA(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)ov(r[m]);DA(n,n.transactionQueueTree_)}(n,XN(n,t),r),r}function JN(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===Bm(r);)r=EA(r,t),t=yn(e=Sr(e));return r}function XN(n,e){const t=[];return e1(n,e,t),t.sort((r,s)=>r.order-s.order),t}function e1(n,e,t){const r=Bm(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);IA(e,s=>{e1(n,s,t)})}function AA(n,e){const t=Bm(e);if(t){let r=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[r]=t[s],r++);t.length=r,MP(e,t.length>0?t:void 0)}IA(e,r=>{AA(n,r)})}function BP(n,e){const t=Q0(JN(n,e)),r=EA(n.transactionQueueTree_,e);return function nL(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,s=>{jP(n,s)}),jP(n,r),BN(r,s=>{jP(n,s)}),t}function jP(n,e){const t=Bm(e);if(t){const r=[];let s=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,W.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,W.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(mp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?MP(e,void 0):t.length=u+1,Ga(n.eventQueue_,Q0(e),s);for(let c=0;c<r.length;c++)ov(r[c])}}const HP=function(n,e){const t=SL(n),r=t.namespace;return"firebase.com"===t.domain&&Qc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Qc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ho("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new GR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ar(t.pathString)}},SL=function(n){let e="",t="",r="",s="",u="",c=!0,m="https",_=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(m=n.substring(0,C-1),n=n.substring(C+2));let P=n.indexOf("/");-1===P&&(P=n.length);let k=n.indexOf("?");-1===k&&(k=n.length),e=n.substring(0,Math.min(P,k)),P<k&&(s=function AL(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(P,k)));const G=function bL(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ho(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,k)));C=e.indexOf(":"),C>=0?(c="https"===m||"wss"===m,_=parseInt(e.substring(C+1),10)):C=e.length;const J=e.slice(0,C);if("localhost"===J.toLowerCase())t="localhost";else if(J.split(".").length<=2)t=J;else{const he=e.indexOf(".");r=e.substring(0,he).toLowerCase(),t=e.substring(he+1),u=r}"ns"in G&&(u=G.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:m,pathString:s,namespace:u}},t1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",RL=function(){let n=0;const e=[];return function(t){const r=t===n;let s;n=t;const u=new Array(8);for(s=7;s>=0;s--)u[s]=t1.charAt(t%64),t=Math.floor(t/64);(0,W.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)c+=t1.charAt(e[s]);return(0,W.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class n1{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Wl)(this.snapshot.exportVal())}}class r1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class $P{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class i1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new W.BH;return yL(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bu("OnDisconnect.remove",this._path);const e=new W.BH;return YN(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bu("OnDisconnect.set",this._path),ed("OnDisconnect.set",e,this._path,!1);const t=new W.BH;return YN(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Bu("OnDisconnect.setWithPriority",this._path),ed("OnDisconnect.setWithPriority",e,this._path,!1),kP("OnDisconnect.setWithPriority",t,!1);const r=new W.BH;return function vL(n,e,t,r,s){const u=ci(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,m)=>{"ok"===c&&dv(n.onDisconnect_,e,u),_p(0,s,c,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Bu("OnDisconnect.update",this._path),HN("OnDisconnect.update",e,this._path,!1);const t=new W.BH;return function EL(n,e,t,r){if((0,W.xb)(t))return bs("onDisconnect().update() called with empty data.  Don't do anything."),void _p(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,u)=>{"ok"===s&&Ss(t,(c,m)=>{const _=ci(m);dv(n.onDisconnect_,Xr(e,c),_)}),_p(0,r,s,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fa{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return vn(this._path)?null:YR(this._path)}get ref(){return new ju(this._repo,this._path)}get _queryIdentifier(){const e=uN(this._queryParams),t=HR(e);return"{}"===t?"default":t}get _queryObject(){return uN(this._queryParams)}isEqual(e){if(!((e=(0,W.m9)(e))instanceof fa))return!1;const t=this._repo===e._repo,r=QR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function EO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function bA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function yp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Jc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==lp)throw new Error(r);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==ch)throw new Error(r);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===Fr){if(null!=e&&!J0(e)||null!=t&&!J0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(n.getIndex()instanceof nP||n.getIndex()===rP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ju extends fa{constructor(e,t){super(e,t,new rA,!1)}get parent(){const e=YM(this._path);return null===e?null:new ju(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class jm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ar(e),r=Hm(this.ref,e);return new jm(this._node.getChild(t),r,Fr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,s)=>e(new jm(s,Hm(this.ref,r),Fr)))}hasChild(e){const t=new ar(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function s1(n,e){return(n=(0,W.m9)(n))._checkNotDeleted("ref"),void 0!==e?Hm(n._root,e):n._root}function o1(n,e){(n=(0,W.m9)(n))._checkNotDeleted("refFromURL");const t=HP(e,n._repo.repoInfo_.nodeAdmin);$N("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Qc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),s1(n,t.path.toString())}function Hm(n,e){return null===yn((n=(0,W.m9)(n))._path)?uL("child","path",e,!1):tw("child","path",e,!1),new ju(n._repo,Xr(n._path,e))}function GP(n,e){n=(0,W.m9)(n),Bu("set",n._path),ed("set",e,n._path,!1);const t=new W.BH;return FP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function OL(n,e){HN("update",e,n._path,!1);const t=new W.BH;return function mL(n,e,t,r){gv(n,"update",{path:e.toString(),value:t});let s=!0;const u=nw(n),c={};if(Ss(t,(m,_)=>{s=!1,c[m]=VN(Xr(e,m),ci(_),n.serverSyncTree_,u)}),s)bs("update() called with empty data.  Don't do anything."),_p(0,r,"ok",void 0);else{const m=CA(n),_=function Hk(n,e,t,r){!function sk(n,e,t,r){(0,W.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=fP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const s=Vr.fromObject(t);return pv(n,new hv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,c,m);TA(n.eventQueue_,_),n.server_.merge(e.toString(),t,(C,P)=>{const k="ok"===C;k||ho("update at "+e+" failed: "+C);const G=mp(n.serverSyncTree_,m,!k),J=G.length>0?mv(n,e):e;Ga(n.eventQueue_,J,G),_p(0,r,C,P)}),Ss(t,C=>{const P=BP(n,Xr(e,C));mv(n,P)}),Ga(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kL(n){n=(0,W.m9)(n);const e=new $P(()=>{}),t=new rw(e);return function gL(n,e,t){const r=function Wk(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,P)=>{const k=Oo(C,t);r=r||pp(P,k)});let s=n.syncPointTree_.get(t);s?r=r||pp(s,qn()):(s=new bN,n.syncPointTree_=n.syncPointTree_.set(t,s));const u=null!=r,c=u?new hp(r,!0,!1):null;return function Pk(n){return lA(n.viewCache_)}(SN(s,e,cA(n.pendingWriteTree_,e._path),u?c.getNode():hn.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(s=>{const u=ci(s).withIndex(e._queryParams.getIndex());let c;if(TP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Z0(n.serverSyncTree_,e._path,u);else{const m=K0(n.serverSyncTree_,e);c=NN(n.serverSyncTree_,e._path,u,m)}return Ga(n.eventQueue_,e._path,c),_A(n.serverSyncTree_,e,t,null,!0),u},s=>(gv(n,"get for query "+(0,W.Wl)(e)+" failed: "+s),Promise.reject(new Error(s))))}(n._repo,n,t).then(r=>new jm(r,new ju(n._repo,n._path),n._queryParams.getIndex()))}class rw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new n1("value",this,new jm(e.snapshotNode,new ju(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new r1(this,e,t):null}matches(e){return e instanceof rw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class RA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new r1(this,e,t):null}createEvent(e,t){(0,W.hu)(null!=e.childName,"Child events should have a childName.");const r=Hm(new ju(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new n1(e.type,this,new jm(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof RA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function iw(n,e,t,r,s){let u;if("object"==typeof r&&(u=void 0,s=r),"function"==typeof r&&(u=r),s&&s.onlyOnce){const _=t,C=(P,k)=>{VP(n._repo,n,m),_(P,k)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new $P(t,u||void 0),m="value"===e?new rw(c):new RA(e,c);return function IL(n,e,t){let r;r=".info"===yn(e._path)?TP(n.infoSyncTree_,e,t):TP(n.serverSyncTree_,e,t),GN(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>VP(n._repo,n,m)}function zP(n,e,t,r){return iw(n,"value",e,t,r)}function a1(n,e,t,r){return iw(n,"child_added",e,t,r)}function u1(n,e,t,r){return iw(n,"child_changed",e,t,r)}function l1(n,e,t,r){return iw(n,"child_moved",e,t,r)}function c1(n,e,t,r){return iw(n,"child_removed",e,t,r)}function d1(n,e,t){let r=null;const s=t?new $P(t):null;"value"===e?r=new rw(s):e&&(r=new RA(e,s)),VP(n._repo,n,r)}class jl{}class h1 extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("endAt",this._value,e._path,!0);const t=oP(e._queryParams,this._value,this._key);if(SA(t),yp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class FL extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("endBefore",this._value,e._path,!1);const t=function qO(n,e,t){let r;return r=oP(n,e,n.index_===Jc||t?t:lp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(SA(t),yp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class f1 extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("startAt",this._value,e._path,!0);const t=sP(e._queryParams,this._value,this._key);if(SA(t),yp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class BL extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("startAfter",this._value,e._path,!1);const t=function zO(n,e,t){let r;return r=sP(n,e,n.index_===Jc||t?t:ch),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SA(t),yp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fa(e._repo,e._path,t,e._orderByCalled)}}class HL extends jl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(e._repo,e._path,function $O(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class GL extends jl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fa(e._repo,e._path,function GO(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class qL extends jl{constructor(e){super(),this._path=e}_apply(e){bA(e,"orderByChild");const t=new ar(this._path);if(vn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new nP(t),s=iA(e._queryParams,r);return yp(s),new fa(e._repo,e._path,s,!0)}}class ZL extends jl{_apply(e){bA(e,"orderByKey");const t=iA(e._queryParams,Jc);return yp(t),new fa(e._repo,e._path,t,!0)}}class YL extends jl{_apply(e){bA(e,"orderByPriority");const t=iA(e._queryParams,Fr);return yp(t),new fa(e._repo,e._path,t,!0)}}class JL extends jl{_apply(e){bA(e,"orderByValue");const t=iA(e._queryParams,rP);return yp(t),new fa(e._repo,e._path,t,!0)}}class eF extends jl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ed("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new h1(this._value,this._key)._apply(new f1(this._value,this._key)._apply(e))}}function Hl(n,...e){let t=(0,W.m9)(n);for(const r of e)t=r._apply(t);return t}(function Ok(n){(0,W.hu)(!pA,"__referenceConstructor has already been defined"),pA=n})(ju),function Uk(n){(0,W.hu)(!mA,"__referenceConstructor has already been defined"),mA=n}(ju);const qP={};function WP(n,e,t,r,s){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||Qc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bs("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,C,c=HP(u,s),m=c.repoInfo;typeof process<"u"&&process.env&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(_=!0,u=`http://${C}?ns=${m.namespace}`,c=HP(u,s),m=c.repoInfo):_=!c.repoInfo.secure;const P=s&&_?new L0(L0.OWNER):new K1(n.name,n.options,e);$N("Invalid Firebase Database URL",c),vn(c.path)||Qc("Database URL must point to the root of a Firebase Database (not including a child path).");const k=function sF(n,e,t,r){let s=qP[e.name];s||(s={},qP[e.name]=s);let u=s[n.toURLString()];return u&&Qc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new hL(n,false,t,r),s[n.toURLString()]=u,u}(m,n,P,new Z1(n.name,t));return new aF(k,n)}class aF{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function fL(n,e,t){if(n.stats_=WR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sA(n.repoInfo_,(r,s,u,c)=>{ZN(n,r,s,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>KN(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Lm(n.repoInfo_,e,(r,s,u,c)=>{ZN(n,r,s,u,c)},r=>{KN(n,r)},r=>{!function pL(n,e){Ss(e,(t,r)=>{LP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function J1(n,e){const t=n.toString();return qR[t]||(qR[t]=e()),qR[t]}(n.repoInfo_,()=>new JO(n.stats_,n.server_)),n.infoData_=new WO,n.infoSyncTree_=new MN({startListening:(r,s,u,c)=>{let m=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(m=Z0(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),m},stopListening:()=>{}}),LP(n,"connected",!1),n.serverSyncTree_=new MN({startListening:(r,s,u,c)=>(n.server_.listen(r,u,s,(m,_)=>{const C=c(m,_);Ga(n.eventQueue_,r._path,C)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ju(this._repo,qn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function iF(n,e){const t=qP[e];(!t||t[n.key]!==n)&&Qc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),QN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Qc("Cannot call "+e+" on a deleted database.")}}function g1(){VM.IS_TRANSPORT_INITIALIZED&&ho("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function uF(){g1(),cp.forceDisallow()}function lF(){g1(),av.forceDisallow(),cp.forceAllow()}function hF(n,e){yM(n,e)}const pF={".sv":"timestamp"};class _F{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Lm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Lm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function fF(n){UR(Pr.SDK_VERSION),(0,Pr._registerComponent)(new Ci.wA("database",(e,{instanceIdentifier:t})=>WP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pr.registerVersion)(hM,"1.0.1",n),(0,Pr.registerVersion)(hM,"1.0.1","esm2017")}();const IF=new hr.Yd("@firebase/database-compat"),_1=function(n){IF.warn("FIREBASE WARNING: "+n)};class CF{constructor(e){this._delegate=e}cancel(e){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,t);return r&&s.then(()=>r(null),u=>r(u)),s}update(e,t){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let u=0;u<e.length;++u)s[""+u]=e[u];e=s,_1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),s=>t(s)),r}}class DF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),tw("DataSnapshot.child","path",e,!1),new vp(this._database,this._delegate.child(e))}hasChild(e){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),tw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new vp(this._database,t)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new za(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,s){var u;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",t,!1);const c=qs.getCancelAndContextArgs_("Query.on",r,s),m=(C,P)=>{t.call(c.context,new vp(this.database,C),P)};m.userCallback=t,m.context=c.context;const _=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return zP(this._delegate,m,_),t;case"child_added":return a1(this._delegate,m,_),t;case"child_removed":return c1(this._delegate,m,_),t;case"child_changed":return u1(this._delegate,m,_),t;case"child_moved":return l1(this._delegate,m,_),t;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,W.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,W.Wj)("Query.off","callback",t,!0),(0,W.lb)("Query.off","context",r,!0),t){const s=()=>{};s.userCallback=t,s.context=r,d1(this._delegate,e,s)}else d1(this._delegate,e)}get(){return kL(this._delegate).then(e=>new vp(this.database,e))}once(e,t,r,s){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",t,!0);const u=qs.getCancelAndContextArgs_("Query.once",r,s),c=new W.BH,m=(C,P)=>{const k=new vp(this.database,C);t&&t.call(u.context,k,P),c.resolve(k)};m.userCallback=t,m.context=u.context;const _=C=>{u.cancel&&u.cancel.call(u.context,C),c.reject(C)};switch(e){case"value":zP(this._delegate,m,_,{onlyOnce:!0});break;case"child_added":a1(this._delegate,m,_,{onlyOnce:!0});break;case"child_removed":c1(this._delegate,m,_,{onlyOnce:!0});break;case"child_changed":u1(this._delegate,m,_,{onlyOnce:!0});break;case"child_moved":l1(this._delegate,m,_,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new qs(this.database,Hl(this._delegate,function $L(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new HL(n)}(e)))}limitToLast(e){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new qs(this.database,Hl(this._delegate,function zL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new GL(n)}(e)))}orderByChild(e){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new qs(this.database,Hl(this._delegate,function WL(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return tw("orderByChild","path",n,!1),new qL(n)}(e)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new qs(this.database,Hl(this._delegate,function KL(){return new ZL}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new qs(this.database,Hl(this._delegate,function QL(){return new YL}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new qs(this.database,Hl(this._delegate,function XL(){return new JL}()))}startAt(e=null,t){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new qs(this.database,Hl(this._delegate,function UL(n=null,e){return ew("startAt","key",e,!0),new f1(n,e)}(e,t)))}startAfter(e=null,t){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new qs(this.database,Hl(this._delegate,function jL(n,e){return ew("startAfter","key",e,!0),new BL(n,e)}(e,t)))}endAt(e=null,t){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new qs(this.database,Hl(this._delegate,function LL(n,e){return ew("endAt","key",e,!0),new h1(n,e)}(e,t)))}endBefore(e=null,t){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new qs(this.database,Hl(this._delegate,function VL(n,e){return ew("endBefore","key",e,!0),new FL(n,e)}(e,t)))}equalTo(e,t){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new qs(this.database,Hl(this._delegate,function tF(n,e){return ew("equalTo","key",e,!0),new eF(n,e)}(e,t)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof qs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const s={cancel:void 0,context:void 0};if(t&&r)s.cancel=t,(0,W.Wj)(e,"cancel",s.cancel,!0),s.context=r,(0,W.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,W.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new za(this.database,new ju(this._delegate._repo,this._delegate._path))}}class za extends qs{constructor(e,t){super(e,new fa(t._repo,t._path,new rA,!1)),this.database=e,this._delegate=t}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new za(this.database,Hm(this._delegate,e))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new za(this.database,e):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new za(this.database,this._delegate.root)}set(e,t){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",t,!0);const r=GP(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,t){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let u=0;u<e.length;++u)s[""+u]=e[u];e=s,_1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bu("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",t,!0);const r=OL(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",r,!0);const s=function NL(n,e,t){if(Bu("setWithPriority",n._path),ed("setWithPriority",e,n._path,!1),kP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new W.BH;return FP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&s.then(()=>r(null),u=>r(u)),s}remove(e){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",e,!0);const t=function xL(n){return Bu("remove",n._path),GP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,W.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const s=function yF(n,e,t){var r;if(n=(0,W.m9)(n),Bu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(r=t?.applyLocally)||void 0===r||r,u=new W.BH,m=zP(n,()=>{});return function TL(n,e,t,r,s,u){gv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:gM(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=UP(n,e,void 0);c.currentInputSnapshot=m;const _=c.update(m.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{X0("transaction failed: Data returned ",_,c.path),c.status=0;const C=EA(n.transactionQueueTree_,e),P=Bm(C)||[];let k;P.push(c),MP(C,P),"object"==typeof _&&null!==_&&(0,W.r3)(_,".priority")?(k=(0,W.DV)(_,".priority"),(0,W.hu)(J0(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=(yA(n.serverSyncTree_,e)||hn.EMPTY_NODE).getPriority().val();const G=nw(n),J=ci(_,k),he=RP(J,m,G);c.currentOutputSnapshotRaw=J,c.currentOutputSnapshotResolved=he,c.currentWriteId=CA(n);const Re=wP(n.serverSyncTree_,e,he,c.currentWriteId,c.applyLocally);Ga(n.eventQueue_,e,Re),DA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,C,P)=>{let k=null;_?u.reject(_):(k=new jm(P,new ju(n._repo,n._path),Fr),u.resolve(new _F(C,k)))},m,s),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new DF(u.committed,new vp(this.database,u.snapshot)));return t&&s.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),s}setPriority(e,t){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",t,!0);const r=function ML(n,e){n=(0,W.m9)(n),Bu("setPriority",n._path),kP("setPriority",e,!1);const t=new W.BH;return FP(n._repo,Xr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}push(e,t){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",t,!0);const r=function PL(n,e){n=(0,W.m9)(n),Bu("push",n._path),ed("push",e,n._path,!0);const t=WN(n._repo),r=RL(t),s=Hm(n,r),u=Hm(n,r);let c;return c=null!=e?GP(u,e).then(()=>u):Promise.resolve(u),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}(this._delegate,e),s=r.then(c=>new za(this.database,c));t&&s.then(()=>t(null),c=>t(c));const u=new za(this.database,r);return u.then=s.then.bind(s),u.catch=s.catch.bind(s,void 0),u}onDisconnect(){return Bu("Reference.onDisconnect",this._delegate._path),new CF(new i1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class sw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:uF,forceLongPolling:lF}}useEmulator(e,t,r={}){!function m1(n,e,t,r={}){(n=(0,W.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Qc("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let u;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new L0(L0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,W.Sg)(r.mockUserToken,n.app.options.projectId);u=new L0(c)}!function rF(n,e,t,r){n.repoInfo_=new GR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(s,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,W.Dv)("database.ref",0,1,arguments.length),e instanceof za){const t=o1(this._delegate,e.toString());return new za(this,t)}{const t=s1(this._delegate,e);return new za(this,t)}}refFromURL(e){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const r=o1(this._delegate,e);return new za(this,r)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function cF(n){(n=(0,W.m9)(n))._checkNotDeleted("goOffline"),QN(n._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function dF(n){(n=(0,W.m9)(n))._checkNotDeleted("goOnline"),function wL(n){n.persistentConnection_&&n.persistentConnection_.resume(qN)}(n._repo)}(this._delegate)}}sw.ServerValue={TIMESTAMP:function gF(){return pF}(),increment:n=>function mF(n){return{".sv":{increment:n}}}(n)};var bF=Object.freeze({__proto__:null,initStandalone:function AF({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:s,namespace:u,nodeAdmin:c=!1}){UR(t);const m=new Ci.H0("database-standalone"),_=new Ci.zt("auth-internal",m);let C;return _.setComponent(new Ci.wA("auth-internal",()=>r,"PRIVATE")),s&&(C=new Ci.zt("app-check-internal",m),C.setComponent(new Ci.wA("app-check-internal",()=>s,"PRIVATE"))),{instance:new sw(WP(n,_,C,e,c),n),namespace:u}}});const SF=sw.ServerValue;function ow(n,e,t="on",r=Io){return new ue.y(s=>{let u=null;return u=n[t](e,(c,m)=>{r.schedule(()=>{s.next({snapshot:c,prevKey:m})}),"once"===t&&r.schedule(()=>s.complete())},c=>{r.schedule(()=>s.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,Pe.U)(s=>{const{snapshot:u,prevKey:c}=s;let m=null;return u.exists()&&(m=u.key),{type:e,payload:u,prevKey:c,key:m}}),(0,Fy.B)())}function y1(n){return null==n}function v1(n){return"function"==typeof n.set}function E1(n,e){return v1(e)?e:n.ref(e)}function I1(n,e){if(function PF(n){return"string"==typeof n}(n))return e.stringCase();if(v1(n))return e.firebaseCase();if(function xF(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function w1(n){return(y1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function T1(n,e,t){const r=(e=w1(e)).map(s=>ow(n,s,"on",t));return(0,ZI.T)(...r)}function C1(n,e){return function(r,s){return I1(r,{stringCase:()=>n.child(r)[e](s),firebaseCase:()=>r[e](s),snapshotCase:()=>r.ref[e](s)})}}function kF(n){return function(t){return t?I1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function D1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function VF(n,e){const{payload:t,prevKey:r,key:s}=e,u=D1(n,s),c=function FF(n,e){if(y1(e))return 0;{const t=D1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let m=null;e.payload.forEach(_=>{const C={payload:_,type:"value",prevKey:m,key:_.key};return m=_.key,n=[...n,C],!1})}return n;case"child_added":if(u>-1)(n[u-1]?.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===s?e:m);case"child_moved":if(u>-1){const m=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,m),n}return n;default:return n}}function A1(n,e,t){return function LF(n,e,t){return ow(n,"value","once",t).pipe((0,Cs.w)(r=>{const s=[(0,ku.of)(r)];return e.forEach(u=>s.push(ow(n,u,"on",t))),(0,ZI.T)(...s).pipe((0,tp.R)(VF,[]))}),(0,Ds.x)())}(n,e=w1(e),t)}function b1(n,e){return function(){return ow(n,"value","on",e)}}!function RF(n){n.INTERNAL.registerComponent(new Ci.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new sw(s,r)},"PUBLIC").setServiceProps({Reference:za,Query:qs,Database:sw,DataSnapshot:vp,enableLogging:hF,INTERNAL:bF,ServerValue:SF}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.1")}($s.Z);const jF=new p.OlP("angularfire2.realtimeDatabaseURL"),HF=new p.OlP("angularfire2.database.use-emulator");let $F=(()=>{class n{schedulers;database;constructor(t,r,s,u,c,m,_,C,P,k,G,J,he,Re,Ne){this.schedulers=m;const ht=_,mt=mm(t,c,r);C&&jy(mt,c,P,G,J,he,k,Re),this.database=_m(`${mt.name}.database.${s}`,"AngularFireDatabase",mt.name,()=>{const Qe=c.runOutsideAngular(()=>mt.database(s||void 0));return ht&&Qe.useEmulator(...ht),Qe},[ht])}list(t,r){const s=this.schedulers.ngZone.runOutsideAngular(()=>E1(this.database,t));let u=s;return r&&(u=r(s)),function UF(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:C1(r,"update"),set:C1(r,"set"),push:s=>r.push(s),remove:kF(r),snapshotChanges:s=>A1(n,s,t).pipe(kr),stateChanges:s=>T1(n,s,t).pipe(kr),auditTrail:s=>function MF(n,e,t){return function OF(n,e,t){return function NF(n,e){return ow(n,"value","on",e).pipe((0,Pe.U)(t=>{let r;return t.payload.forEach(s=>(r=s.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function FR(...n){const e=(0,$e.jO)(n);return(0,$y.e)((t,r)=>{const s=n.length,u=new Array(s);let c=n.map(()=>!1),m=!1;for(let _=0;_<s;_++)(0,Ee.Xf)(n[_]).subscribe((0,De.x)(r,C=>{u[_]=C,!m&&!c[_]&&(c[_]=!0,(m=c.every(x0.y))&&(c=null))},LR.Z));t.subscribe((0,De.x)(r,_=>{if(m){const C=[_,...u];r.next(e?e(...C):C)}}))})}(e),(0,Pe.U)(([s,u])=>{const c=s.lastKeyToLoad,m=u.map(_=>_.key);return{actions:u,lastKeyToLoad:c,loadedKeys:m}}),function k1(n){return(0,$y.e)((e,t)=>{let r=!1,s=0;e.subscribe((0,De.x)(t,u=>(r||(r=!n(u,s++)))&&t.next(u)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Pe.U)(s=>s.actions))}(n,T1(n,e).pipe((0,tp.R)((s,u)=>[...s,u],[])),t)}(n,s,t).pipe(kr),valueChanges:(s,u)=>A1(n,s,t).pipe((0,Pe.U)(m=>m.map(_=>u&&u.idField?{..._.payload.val(),[u.idField]:_.key}:_.payload.val())),kr)}}(u,this)}object(t){return function BF(n,e){return{query:n,snapshotChanges:()=>b1(n,e.schedulers.outsideAngular)().pipe(kr),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>b1(n,e.schedulers.outsideAngular)().pipe(kr,(0,Pe.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>E1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(p.LFG(Fl),p.LFG(ep,8),p.LFG(jF,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ly),p.LFG(HF,8),p.LFG(vm,8),p.LFG(e0,8),p.LFG(Vy,8),p.LFG(ym,8),p.LFG(Uy,8),p.LFG(t0,8),p.LFG(By,8),p.LFG(qc,8))};static \u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),GF=(()=>{class n{constructor(){$s.Z.registerVersion("angularfire",Xf.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=p.oAB({type:n});static \u0275inj=p.cJS({providers:[$F]})}return n})();const zF={apiKey:"AIzaSyAskkATVU4YWFvF119TREfLHQ9tPhb27cs",authDomain:"j-s-cart-43e4d.firebaseapp.com",projectId:"j-s-cart-43e4d",storageBucket:"j-s-cart-43e4d.appspot.com",messagingSenderId:"1083234590925",appId:"1:1083234590925:web:dbc61fb26b945f6a288984"};let qF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.oAB({type:n,bootstrap:[pD]});static#n=this.\u0275inj=p.cJS({providers:[wm],imports:[D.b2,GS,_h,rd,qI.initializeApp(zF),QC,up,GF]})}return n})();D.q6().bootstrapModule(qF).catch(n=>console.error(n))},9058:(yt,be,B)=>{B.d(be,{BH:()=>pe,DV:()=>wt,Dv:()=>po,G6:()=>Rr,GJ:()=>Rn,L:()=>De,LL:()=>Ue,Pz:()=>Fe,Sg:()=>ze,UG:()=>Te,UI:()=>rs,US:()=>oe,Wj:()=>qt,Wl:()=>At,Yr:()=>Rs,ZB:()=>le,ZR:()=>Oe,aH:()=>Ie,b$:()=>Wn,cI:()=>Zn,dS:()=>Qt,eu:()=>ye,g5:()=>K,gK:()=>Tt,gQ:()=>St,h$:()=>$e,hl:()=>ge,hu:()=>p,jU:()=>Lt,lb:()=>Ir,m9:()=>ti,ne:()=>Dn,p$:()=>ne,pd:()=>tn,r3:()=>In,ru:()=>zt,tV:()=>X,uI:()=>Xe,ug:()=>ss,vZ:()=>Er,w1:()=>ur,w9:()=>Kn,xO:()=>Hn,xb:()=>vr,z$:()=>Ke,zd:()=>Pt});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},p=function(te,$){if(!te)throw K($)},K=function(te){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+te)},ie=function(te){const $=[];let z=0;for(let H=0;H<te.length;H++){let q=te.charCodeAt(H);q<128?$[z++]=q:q<2048?($[z++]=q>>6|192,$[z++]=63&q|128):55296==(64512&q)&&H+1<te.length&&56320==(64512&te.charCodeAt(H+1))?(q=65536+((1023&q)<<10)+(1023&te.charCodeAt(++H)),$[z++]=q>>18|240,$[z++]=q>>12&63|128,$[z++]=q>>6&63|128,$[z++]=63&q|128):($[z++]=q>>12|224,$[z++]=q>>6&63|128,$[z++]=63&q|128)}return $},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,$){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let q=0;q<te.length;q+=3){const se=te[q],je=q+1<te.length,tt=je?te[q+1]:0,Et=q+2<te.length,xt=Et?te[q+2]:0;let Vn=(15&tt)<<2|xt>>6,hi=63&xt;Et||(hi=64,je||(Vn=64)),H.push(z[se>>2],z[(3&se)<<4|tt>>4],z[Vn],z[hi])}return H.join("")},encodeString(te,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(te):this.encodeByteArray(ie(te),$)},decodeString(te,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(te):function(te){const $=[];let z=0,H=0;for(;z<te.length;){const q=te[z++];if(q<128)$[H++]=String.fromCharCode(q);else if(q>191&&q<224){const se=te[z++];$[H++]=String.fromCharCode((31&q)<<6|63&se)}else if(q>239&&q<365){const Et=((7&q)<<18|(63&te[z++])<<12|(63&te[z++])<<6|63&te[z++])-65536;$[H++]=String.fromCharCode(55296+(Et>>10)),$[H++]=String.fromCharCode(56320+(1023&Et))}else{const se=te[z++],je=te[z++];$[H++]=String.fromCharCode((15&q)<<12|(63&se)<<6|63&je)}}return $.join("")}(this.decodeStringToByteArray(te,$))},decodeStringToByteArray(te,$){this.init_();const z=$?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let q=0;q<te.length;){const se=z[te.charAt(q++)],tt=q<te.length?z[te.charAt(q)]:0;++q;const xt=q<te.length?z[te.charAt(q)]:64;++q;const Ht=q<te.length?z[te.charAt(q)]:64;if(++q,null==se||null==tt||null==xt||null==Ht)throw new Ee;H.push(se<<2|tt>>4),64!==xt&&(H.push(tt<<4&240|xt>>2),64!==Ht&&H.push(xt<<6&192|Ht))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $e=function(te){const $=ie(te);return oe.encodeByteArray($,!0)},De=function(te){return $e(te).replace(/\./g,"")},X=function(te){try{return oe.decodeString(te,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function ne(te){return le(void 0,te)}function le(te,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return $}for(const z in $)!$.hasOwnProperty(z)||!Pe(z)||(te[z]=le(te[z],$[z]));return te}function Pe(te){return"__proto__"!==te}const ct=()=>{try{return function He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=te&&X(te[1]);return $&&JSON.parse($)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},Ie=()=>{var te;return null===(te=ct())||void 0===te?void 0:te.config},Fe=te=>{var $;return null===($=ct())||void 0===$?void 0:$[`_${te}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,z)=>{this.resolve=$,this.reject=z})}wrapCallback($){return(z,H)=>{z?this.reject(z):this.resolve(H),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(z):$(z,H))}}}function ze(te,$){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=$||"demo-project",q=te.iat||0,se=te.sub||te.user_id;if(!se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:q,exp:q+3600,auth_time:q,sub:se,user_id:se,firebase:{sign_in_provider:"custom",identities:{}}},te);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(je)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Te(){var te;const $=null===(te=ct())||void 0===te?void 0:te.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Lt(){return"object"==typeof self&&self.self===self}function zt(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function Wn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ur(){const te=Ke();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function Rs(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function Rr(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){try{return"object"==typeof indexedDB}catch{return!1}}function ye(){return new Promise((te,$)=>{try{let z=!0;const H="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(H);q.onsuccess=()=>{q.result.close(),z||self.indexedDB.deleteDatabase(H),te(!0)},q.onupgradeneeded=()=>{z=!1},q.onerror=()=>{var se;$((null===(se=q.error)||void 0===se?void 0:se.message)||"")}}catch(z){$(z)}})}class Oe extends Error{constructor($,z,H){super(z),this.code=$,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor($,z,H){this.service=$,this.serviceName=z,this.errors=H}create($,...z){const H=z[0]||{},q=`${this.service}/${$}`,se=this.errors[$],je=se?function _t(te,$){return te.replace(et,(z,H)=>{const q=$[H];return null!=q?String(q):`<${H}?>`})}(se,H):"Error";return new Oe(q,`${this.serviceName}: ${je} (${q}).`,H)}}const et=/\{\$([^}]+)}/g;function Zn(te){return JSON.parse(te)}function At(te){return JSON.stringify(te)}const cn=function(te){let $={},z={},H={},q="";try{const se=te.split(".");$=Zn(X(se[0])||""),z=Zn(X(se[1])||""),q=se[2],H=z.d||{},delete z.d}catch{}return{header:$,claims:z,data:H,signature:q}},Kn=function(te){const z=cn(te).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Rn=function(te){const $=cn(te).claims;return"object"==typeof $&&!0===$.admin};function In(te,$){return Object.prototype.hasOwnProperty.call(te,$)}function wt(te,$){if(Object.prototype.hasOwnProperty.call(te,$))return te[$]}function vr(te){for(const $ in te)if(Object.prototype.hasOwnProperty.call(te,$))return!1;return!0}function rs(te,$,z){const H={};for(const q in te)Object.prototype.hasOwnProperty.call(te,q)&&(H[q]=$.call(z,te[q],q,te));return H}function Er(te,$){if(te===$)return!0;const z=Object.keys(te),H=Object.keys($);for(const q of z){if(!H.includes(q))return!1;const se=te[q],je=$[q];if(On(se)&&On(je)){if(!Er(se,je))return!1}else if(se!==je)return!1}for(const q of H)if(!z.includes(q))return!1;return!0}function On(te){return null!==te&&"object"==typeof te}function Hn(te){const $=[];for(const[z,H]of Object.entries(te))Array.isArray(H)?H.forEach(q=>{$.push(encodeURIComponent(z)+"="+encodeURIComponent(q))}):$.push(encodeURIComponent(z)+"="+encodeURIComponent(H));return $.length?"&"+$.join("&"):""}function Pt(te){const $={};return te.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[q,se]=H.split("=");$[decodeURIComponent(q)]=decodeURIComponent(se)}}),$}function tn(te){const $=te.indexOf("?");if(!$)return"";const z=te.indexOf("#",$);return te.substring($,z>0?z:void 0)}class St{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,z){z||(z=0);const H=this.W_;if("string"==typeof $)for(let Ht=0;Ht<16;Ht++)H[Ht]=$.charCodeAt(z)<<24|$.charCodeAt(z+1)<<16|$.charCodeAt(z+2)<<8|$.charCodeAt(z+3),z+=4;else for(let Ht=0;Ht<16;Ht++)H[Ht]=$[z]<<24|$[z+1]<<16|$[z+2]<<8|$[z+3],z+=4;for(let Ht=16;Ht<80;Ht++){const Vn=H[Ht-3]^H[Ht-8]^H[Ht-14]^H[Ht-16];H[Ht]=4294967295&(Vn<<1|Vn>>>31)}let xt,Mt,q=this.chain_[0],se=this.chain_[1],je=this.chain_[2],tt=this.chain_[3],Et=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(xt=tt^se&(je^tt),Mt=1518500249):(xt=se^je^tt,Mt=1859775393):Ht<60?(xt=se&je|tt&(se|je),Mt=2400959708):(xt=se^je^tt,Mt=3395469782);const Vn=(q<<5|q>>>27)+xt+Et+Mt+H[Ht]&4294967295;Et=tt,tt=je,je=4294967295&(se<<30|se>>>2),se=q,q=Vn}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+se&4294967295,this.chain_[2]=this.chain_[2]+je&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+Et&4294967295}update($,z){if(null==$)return;void 0===z&&(z=$.length);const H=z-this.blockSize;let q=0;const se=this.buf_;let je=this.inbuf_;for(;q<z;){if(0===je)for(;q<=H;)this.compress_($,q),q+=this.blockSize;if("string"==typeof $){for(;q<z;)if(se[je]=$.charCodeAt(q),++je,++q,je===this.blockSize){this.compress_(se),je=0;break}}else for(;q<z;)if(se[je]=$[q],++je,++q,je===this.blockSize){this.compress_(se),je=0;break}}this.inbuf_=je,this.total_+=z}digest(){const $=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&z,z/=256;this.compress_(this.buf_);let H=0;for(let q=0;q<5;q++)for(let se=24;se>=0;se-=8)$[H]=this.chain_[q]>>se&255,++H;return $}}function Dn(te,$){const z=new zr(te,$);return z.subscribe.bind(z)}class zr{constructor($,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{$(this)}).catch(H=>{this.error(H)})}next($){this.forEachObserver(z=>{z.next($)})}error($){this.forEachObserver(z=>{z.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,z,H){let q;if(void 0===$&&void 0===z&&void 0===H)throw new Error("Missing Observer.");q=function wn(te,$){if("object"!=typeof te||null===te)return!1;for(const z of $)if(z in te&&"function"==typeof te[z])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:z,complete:H},void 0===q.next&&(q.next=er),void 0===q.error&&(q.error=er),void 0===q.complete&&(q.complete=er);const se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),se}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,$)}sendOne($,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{z(this.observers[$])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function er(){}const po=function(te,$,z,H){let q;if(H<$?q="at least "+$:H>z&&(q=0===z?"none":"no more than "+z),q)throw new Error(te+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+q+".")};function Tt(te,$){return`${te} failed: ${$} argument `}function qt(te,$,z,H){if((!H||z)&&"function"!=typeof z)throw new Error(Tt(te,$)+"must be a valid function.")}function Ir(te,$,z,H){if((!H||z)&&("object"!=typeof z||null===z))throw new Error(Tt(te,$)+"must be a valid context object.")}const Qt=function(te){const $=[];let z=0;for(let H=0;H<te.length;H++){let q=te.charCodeAt(H);if(q>=55296&&q<=56319){const se=q-55296;H++,p(H<te.length,"Surrogate pair missing trail surrogate."),q=65536+(se<<10)+(te.charCodeAt(H)-56320)}q<128?$[z++]=q:q<2048?($[z++]=q>>6|192,$[z++]=63&q|128):q<65536?($[z++]=q>>12|224,$[z++]=q>>6&63|128,$[z++]=63&q|128):($[z++]=q>>18|240,$[z++]=q>>12&63|128,$[z++]=q>>6&63|128,$[z++]=63&q|128)}return $},ss=function(te){let $=0;for(let z=0;z<te.length;z++){const H=te.charCodeAt(z);H<128?$++:H<2048?$+=2:H>=55296&&H<=56319?($+=4,z++):$+=3}return $};function ti(te){return te&&te._delegate?te._delegate:te}},5619:(yt,be,B)=>{B.d(be,{X:()=>p});var D=B(8645);class p extends D.x{constructor(ie){super(),this._value=ie}get value(){return this.getValue()}_subscribe(ie){const ue=super._subscribe(ie);return!ue.closed&&ie.next(this._value),ue}getValue(){const{hasError:ie,thrownError:ue,_value:oe}=this;if(ie)throw ue;return this._throwIfClosed(),oe}next(ie){super.next(this._value=ie)}}},5592:(yt,be,B)=>{B.d(be,{y:()=>$e});var D=B(305),p=B(7394),K=B(4850),ie=B(8407),ue=B(2653),oe=B(4674),Ee=B(1441);let $e=(()=>{class le{constructor(He){He&&(this._subscribe=He)}lift(He){const Je=new le;return Je.source=this,Je.operator=He,Je}subscribe(He,Je,Be){const rt=function ne(le){return le&&le instanceof D.Lv||function X(le){return le&&(0,oe.m)(le.next)&&(0,oe.m)(le.error)&&(0,oe.m)(le.complete)}(le)&&(0,p.Nn)(le)}(He)?He:new D.Hp(He,Je,Be);return(0,Ee.x)(()=>{const{operator:ct,source:en}=this;rt.add(ct?ct.call(rt,en):en?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(He){try{return this._subscribe(He)}catch(Je){He.error(Je)}}forEach(He,Je){return new(Je=De(Je))((Be,rt)=>{const ct=new D.Hp({next:en=>{try{He(en)}catch(un){rt(un),ct.unsubscribe()}},error:rt,complete:Be});this.subscribe(ct)})}_subscribe(He){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(He)}[K.L](){return this}pipe(...He){return(0,ie.U)(He)(this)}toPromise(He){return new(He=De(He))((Je,Be)=>{let rt;this.subscribe(ct=>rt=ct,ct=>Be(ct),()=>Je(rt))})}}return le.create=Pe=>new le(Pe),le})();function De(le){var Pe;return null!==(Pe=le??ue.config.Promise)&&void 0!==Pe?Pe:Promise}},8645:(yt,be,B)=>{B.d(be,{x:()=>Ee});var D=B(5592),p=B(7394);const ie=(0,B(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=B(9039),oe=B(1441);let Ee=(()=>{class De extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const le=new $e(this,this);return le.operator=ne,le}_throwIfClosed(){if(this.closed)throw new ie}next(ne){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(ne)}})}error(ne){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:le}=this;for(;le.length;)le.shift().error(ne)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:le,isStopped:Pe,observers:He}=this;return le||Pe?p.Lc:(this.currentObservers=null,He.push(ne),new p.w0(()=>{this.currentObservers=null,(0,ue.P)(He,ne)}))}_checkFinalizedStatuses(ne){const{hasError:le,thrownError:Pe,isStopped:He}=this;le?ne.error(Pe):He&&ne.complete()}asObservable(){const ne=new D.y;return ne.source=this,ne}}return De.create=(X,ne)=>new $e(X,ne),De})();class $e extends Ee{constructor(X,ne){super(),this.destination=X,this.source=ne}next(X){var ne,le;null===(le=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===le||le.call(ne,X)}error(X){var ne,le;null===(le=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===le||le.call(ne,X)}complete(){var X,ne;null===(ne=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===ne||ne.call(X)}_subscribe(X){var ne,le;return null!==(le=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(X))&&void 0!==le?le:p.Lc}}},305:(yt,be,B)=>{B.d(be,{Hp:()=>Be,Lv:()=>le});var D=B(4674),p=B(7394),K=B(2653),ie=B(3894),ue=B(2420);const oe=De("C",void 0,void 0);function De(Ie,Fe,pe){return{kind:Ie,value:Fe,error:pe}}var X=B(7599),ne=B(1441);class le extends p.w0{constructor(Fe){super(),this.isStopped=!1,Fe?(this.destination=Fe,(0,p.Nn)(Fe)&&Fe.add(this)):this.destination=un}static create(Fe,pe,ze){return new Be(Fe,pe,ze)}next(Fe){this.isStopped?en(function $e(Ie){return De("N",Ie,void 0)}(Fe),this):this._next(Fe)}error(Fe){this.isStopped?en(function Ee(Ie){return De("E",void 0,Ie)}(Fe),this):(this.isStopped=!0,this._error(Fe))}complete(){this.isStopped?en(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Fe){this.destination.next(Fe)}_error(Fe){try{this.destination.error(Fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function He(Ie,Fe){return Pe.call(Ie,Fe)}class Je{constructor(Fe){this.partialObserver=Fe}next(Fe){const{partialObserver:pe}=this;if(pe.next)try{pe.next(Fe)}catch(ze){rt(ze)}}error(Fe){const{partialObserver:pe}=this;if(pe.error)try{pe.error(Fe)}catch(ze){rt(ze)}else rt(Fe)}complete(){const{partialObserver:Fe}=this;if(Fe.complete)try{Fe.complete()}catch(pe){rt(pe)}}}class Be extends le{constructor(Fe,pe,ze){let Ke;if(super(),(0,D.m)(Fe)||!Fe)Ke={next:Fe??void 0,error:pe??void 0,complete:ze??void 0};else{let Xe;this&&K.config.useDeprecatedNextContext?(Xe=Object.create(Fe),Xe.unsubscribe=()=>this.unsubscribe(),Ke={next:Fe.next&&He(Fe.next,Xe),error:Fe.error&&He(Fe.error,Xe),complete:Fe.complete&&He(Fe.complete,Xe)}):Ke=Fe}this.destination=new Je(Ke)}}function rt(Ie){K.config.useDeprecatedSynchronousErrorHandling?(0,ne.O)(Ie):(0,ie.h)(Ie)}function en(Ie,Fe){const{onStoppedNotification:pe}=K.config;pe&&X.z.setTimeout(()=>pe(Ie,Fe))}const un={closed:!0,next:ue.Z,error:function ct(Ie){throw Ie},complete:ue.Z}},7394:(yt,be,B)=>{B.d(be,{Lc:()=>oe,w0:()=>ue,Nn:()=>Ee});var D=B(4674);const K=(0,B(2306).d)(De=>function(ne){De(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((le,Pe)=>`${Pe+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var ie=B(9039);class ue{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const He of ne)He.remove(this);else ne.remove(this);const{initialTeardown:le}=this;if((0,D.m)(le))try{le()}catch(He){X=He instanceof K?He.errors:[He]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const He of Pe)try{$e(He)}catch(Je){X=X??[],Je instanceof K?X=[...X,...Je.errors]:X.push(Je)}}if(X)throw new K(X)}}add(X){var ne;if(X&&X!==this)if(this.closed)$e(X);else{if(X instanceof ue){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(X)}}_hasParent(X){const{_parentage:ne}=this;return ne===X||Array.isArray(ne)&&ne.includes(X)}_addParent(X){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(X),ne):ne?[ne,X]:X}_removeParent(X){const{_parentage:ne}=this;ne===X?this._parentage=null:Array.isArray(ne)&&(0,ie.P)(ne,X)}remove(X){const{_finalizers:ne}=this;ne&&(0,ie.P)(ne,X),X instanceof ue&&X._removeParent(this)}}ue.EMPTY=(()=>{const De=new ue;return De.closed=!0,De})();const oe=ue.EMPTY;function Ee(De){return De instanceof ue||De&&"closed"in De&&(0,D.m)(De.remove)&&(0,D.m)(De.add)&&(0,D.m)(De.unsubscribe)}function $e(De){(0,D.m)(De)?De():De.unsubscribe()}},2653:(yt,be,B)=>{B.d(be,{config:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(yt,be,B)=>{B.d(be,{z:()=>ue});var D=B(7537),K=B(9940),ie=B(2459);function ue(...oe){return function p(){return(0,D.J)(1)}()((0,ie.D)(oe,(0,K.yG)(oe)))}},6232:(yt,be,B)=>{B.d(be,{E:()=>p});const p=new(B(5592).y)(ue=>ue.complete())},2459:(yt,be,B)=>{B.d(be,{D:()=>Fe});var D=B(4829),p=B(3093),K=B(5137),oe=B(5592),$e=B(4971),De=B(4674),X=B(7103);function le(pe,ze){if(!pe)throw new Error("Iterable cannot be null");return new oe.y(Ke=>{(0,X.f)(Ke,ze,()=>{const Xe=pe[Symbol.asyncIterator]();(0,X.f)(Ke,ze,()=>{Xe.next().then(Te=>{Te.done?Ke.complete():Ke.next(Te.value)})},0,!0)})})}var Pe=B(8382),He=B(4026),Je=B(4266),Be=B(3664),rt=B(5726),ct=B(9853),en=B(541);function Fe(pe,ze){return ze?function Ie(pe,ze){if(null!=pe){if((0,Pe.c)(pe))return function ie(pe,ze){return(0,D.Xf)(pe).pipe((0,K.R)(ze),(0,p.Q)(ze))}(pe,ze);if((0,Je.z)(pe))return function Ee(pe,ze){return new oe.y(Ke=>{let Xe=0;return ze.schedule(function(){Xe===pe.length?Ke.complete():(Ke.next(pe[Xe++]),Ke.closed||this.schedule())})})}(pe,ze);if((0,He.t)(pe))return function ue(pe,ze){return(0,D.Xf)(pe).pipe((0,K.R)(ze),(0,p.Q)(ze))}(pe,ze);if((0,rt.D)(pe))return le(pe,ze);if((0,Be.T)(pe))return function ne(pe,ze){return new oe.y(Ke=>{let Xe;return(0,X.f)(Ke,ze,()=>{Xe=pe[$e.h](),(0,X.f)(Ke,ze,()=>{let Te,Lt;try{({value:Te,done:Lt}=Xe.next())}catch(zt){return void Ke.error(zt)}Lt?Ke.complete():Ke.next(Te)},0,!0)}),()=>(0,De.m)(Xe?.return)&&Xe.return()})}(pe,ze);if((0,en.L)(pe))return function un(pe,ze){return le((0,en.Q)(pe),ze)}(pe,ze)}throw(0,ct.z)(pe)}(pe,ze):(0,D.Xf)(pe)}},4829:(yt,be,B)=>{B.d(be,{Xf:()=>Pe});var D=B(7582),p=B(4266),K=B(4026),ie=B(5592),ue=B(8382),oe=B(5726),Ee=B(9853),$e=B(3664),De=B(541),X=B(4674),ne=B(3894),le=B(4850);function Pe(Ie){if(Ie instanceof ie.y)return Ie;if(null!=Ie){if((0,ue.c)(Ie))return function He(Ie){return new ie.y(Fe=>{const pe=Ie[le.L]();if((0,X.m)(pe.subscribe))return pe.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,p.z)(Ie))return function Je(Ie){return new ie.y(Fe=>{for(let pe=0;pe<Ie.length&&!Fe.closed;pe++)Fe.next(Ie[pe]);Fe.complete()})}(Ie);if((0,K.t)(Ie))return function Be(Ie){return new ie.y(Fe=>{Ie.then(pe=>{Fe.closed||(Fe.next(pe),Fe.complete())},pe=>Fe.error(pe)).then(null,ne.h)})}(Ie);if((0,oe.D)(Ie))return ct(Ie);if((0,$e.T)(Ie))return function rt(Ie){return new ie.y(Fe=>{for(const pe of Ie)if(Fe.next(pe),Fe.closed)return;Fe.complete()})}(Ie);if((0,De.L)(Ie))return function en(Ie){return ct((0,De.Q)(Ie))}(Ie)}throw(0,Ee.z)(Ie)}function ct(Ie){return new ie.y(Fe=>{(function un(Ie,Fe){var pe,ze,Ke,Xe;return(0,D.mG)(this,void 0,void 0,function*(){try{for(pe=(0,D.KL)(Ie);!(ze=yield pe.next()).done;)if(Fe.next(ze.value),Fe.closed)return}catch(Te){Ke={error:Te}}finally{try{ze&&!ze.done&&(Xe=pe.return)&&(yield Xe.call(pe))}finally{if(Ke)throw Ke.error}}Fe.complete()})})(Ie,Fe).catch(pe=>Fe.error(pe))})}},3019:(yt,be,B)=>{B.d(be,{T:()=>oe});var D=B(7537),p=B(4829),K=B(6232),ie=B(9940),ue=B(2459);function oe(...Ee){const $e=(0,ie.yG)(Ee),De=(0,ie._6)(Ee,1/0),X=Ee;return X.length?1===X.length?(0,p.Xf)(X[0]):(0,D.J)(De)((0,ue.D)(X,$e)):K.E}},2096:(yt,be,B)=>{B.d(be,{of:()=>K});var D=B(9940),p=B(2459);function K(...ie){const ue=(0,D.yG)(ie);return(0,p.D)(ie,ue)}},8251:(yt,be,B)=>{B.d(be,{x:()=>p});var D=B(305);function p(ie,ue,oe,Ee,$e){return new K(ie,ue,oe,Ee,$e)}class K extends D.Lv{constructor(ue,oe,Ee,$e,De,X){super(ue),this.onFinalize=De,this.shouldUnsubscribe=X,this._next=oe?function(ne){try{oe(ne)}catch(le){ue.error(le)}}:super._next,this._error=$e?function(ne){try{$e(ne)}catch(le){ue.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(ne){ue.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},3572:(yt,be,B)=>{B.d(be,{d:()=>K});var D=B(9360),p=B(8251);function K(ie){return(0,D.e)((ue,oe)=>{let Ee=!1;ue.subscribe((0,p.x)(oe,$e=>{Ee=!0,oe.next($e)},()=>{Ee||oe.next(ie),oe.complete()}))})}},3997:(yt,be,B)=>{B.d(be,{x:()=>ie});var D=B(2737),p=B(9360),K=B(8251);function ie(oe,Ee=D.y){return oe=oe??ue,(0,p.e)(($e,De)=>{let X,ne=!0;$e.subscribe((0,K.x)(De,le=>{const Pe=Ee(le);(ne||!oe(X,Pe))&&(ne=!1,X=Pe,De.next(le))}))})}function ue(oe,Ee){return oe===Ee}},2181:(yt,be,B)=>{B.d(be,{h:()=>K});var D=B(9360),p=B(8251);function K(ie,ue){return(0,D.e)((oe,Ee)=>{let $e=0;oe.subscribe((0,p.x)(Ee,De=>ie.call(ue,De,$e++)&&Ee.next(De)))})}},1374:(yt,be,B)=>{B.d(be,{P:()=>Ee});var D=B(6973),p=B(2181),K=B(8180),ie=B(3572),ue=B(3026),oe=B(2737);function Ee($e,De){const X=arguments.length>=2;return ne=>ne.pipe($e?(0,p.h)((le,Pe)=>$e(le,Pe,ne)):oe.y,(0,K.q)(1),X?(0,ie.d)(De):(0,ue.T)(()=>new D.K))}},7398:(yt,be,B)=>{B.d(be,{U:()=>K});var D=B(9360),p=B(8251);function K(ie,ue){return(0,D.e)((oe,Ee)=>{let $e=0;oe.subscribe((0,p.x)(Ee,De=>{Ee.next(ie.call(ue,De,$e++))}))})}},7537:(yt,be,B)=>{B.d(be,{J:()=>K});var D=B(1631),p=B(2737);function K(ie=1/0){return(0,D.z)(p.y,ie)}},1631:(yt,be,B)=>{B.d(be,{z:()=>$e});var D=B(7398),p=B(4829),K=B(9360),ie=B(7103),ue=B(8251),Ee=B(4674);function $e(De,X,ne=1/0){return(0,Ee.m)(X)?$e((le,Pe)=>(0,D.U)((He,Je)=>X(le,He,Pe,Je))((0,p.Xf)(De(le,Pe))),ne):("number"==typeof X&&(ne=X),(0,K.e)((le,Pe)=>function oe(De,X,ne,le,Pe,He,Je,Be){const rt=[];let ct=0,en=0,un=!1;const Ie=()=>{un&&!rt.length&&!ct&&X.complete()},Fe=ze=>ct<le?pe(ze):rt.push(ze),pe=ze=>{He&&X.next(ze),ct++;let Ke=!1;(0,p.Xf)(ne(ze,en++)).subscribe((0,ue.x)(X,Xe=>{Pe?.(Xe),He?Fe(Xe):X.next(Xe)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(ct--;rt.length&&ct<le;){const Xe=rt.shift();Je?(0,ie.f)(X,Je,()=>pe(Xe)):pe(Xe)}Ie()}catch(Xe){X.error(Xe)}}))};return De.subscribe((0,ue.x)(X,Fe,()=>{un=!0,Ie()})),()=>{Be?.()}}(le,Pe,De,ne)))}},3093:(yt,be,B)=>{B.d(be,{Q:()=>ie});var D=B(7103),p=B(9360),K=B(8251);function ie(ue,oe=0){return(0,p.e)((Ee,$e)=>{Ee.subscribe((0,K.x)($e,De=>(0,D.f)($e,ue,()=>$e.next(De),oe),()=>(0,D.f)($e,ue,()=>$e.complete(),oe),De=>(0,D.f)($e,ue,()=>$e.error(De),oe)))})}},6699:(yt,be,B)=>{B.d(be,{R:()=>ie});var D=B(9360),p=B(8251);function ie(ue,oe){return(0,D.e)(function K(ue,oe,Ee,$e,De){return(X,ne)=>{let le=Ee,Pe=oe,He=0;X.subscribe((0,p.x)(ne,Je=>{const Be=He++;Pe=le?ue(Pe,Je,Be):(le=!0,Je),$e&&ne.next(Pe)},De&&(()=>{le&&ne.next(Pe),ne.complete()})))}}(ue,oe,arguments.length>=2,!0))}},3020:(yt,be,B)=>{B.d(be,{B:()=>ue});var D=B(4829),p=B(8645),K=B(305),ie=B(9360);function ue(Ee={}){const{connector:$e=(()=>new p.x),resetOnError:De=!0,resetOnComplete:X=!0,resetOnRefCountZero:ne=!0}=Ee;return le=>{let Pe,He,Je,Be=0,rt=!1,ct=!1;const en=()=>{He?.unsubscribe(),He=void 0},un=()=>{en(),Pe=Je=void 0,rt=ct=!1},Ie=()=>{const Fe=Pe;un(),Fe?.unsubscribe()};return(0,ie.e)((Fe,pe)=>{Be++,!ct&&!rt&&en();const ze=Je=Je??$e();pe.add(()=>{Be--,0===Be&&!ct&&!rt&&(He=oe(Ie,ne))}),ze.subscribe(pe),!Pe&&Be>0&&(Pe=new K.Hp({next:Ke=>ze.next(Ke),error:Ke=>{ct=!0,en(),He=oe(un,De,Ke),ze.error(Ke)},complete:()=>{rt=!0,en(),He=oe(un,X),ze.complete()}}),(0,D.Xf)(Fe).subscribe(Pe))})(le)}}function oe(Ee,$e,...De){if(!0===$e)return void Ee();if(!1===$e)return;const X=new K.Hp({next:()=>{X.unsubscribe(),Ee()}});return(0,D.Xf)($e(...De)).subscribe(X)}},7921:(yt,be,B)=>{B.d(be,{O:()=>ie});var D=B(5211),p=B(9940),K=B(9360);function ie(...ue){const oe=(0,p.yG)(ue);return(0,K.e)((Ee,$e)=>{(oe?(0,D.z)(ue,Ee,oe):(0,D.z)(ue,Ee)).subscribe($e)})}},5137:(yt,be,B)=>{B.d(be,{R:()=>p});var D=B(9360);function p(K,ie=0){return(0,D.e)((ue,oe)=>{oe.add(K.schedule(()=>ue.subscribe(oe),ie))})}},4664:(yt,be,B)=>{B.d(be,{w:()=>ie});var D=B(4829),p=B(9360),K=B(8251);function ie(ue,oe){return(0,p.e)((Ee,$e)=>{let De=null,X=0,ne=!1;const le=()=>ne&&!De&&$e.complete();Ee.subscribe((0,K.x)($e,Pe=>{De?.unsubscribe();let He=0;const Je=X++;(0,D.Xf)(ue(Pe,Je)).subscribe(De=(0,K.x)($e,Be=>$e.next(oe?oe(Pe,Be,Je,He++):Be),()=>{De=null,le()}))},()=>{ne=!0,le()}))})}},8180:(yt,be,B)=>{B.d(be,{q:()=>ie});var D=B(6232),p=B(9360),K=B(8251);function ie(ue){return ue<=0?()=>D.E:(0,p.e)((oe,Ee)=>{let $e=0;oe.subscribe((0,K.x)(Ee,De=>{++$e<=ue&&(Ee.next(De),ue<=$e&&Ee.complete())}))})}},9397:(yt,be,B)=>{B.d(be,{b:()=>ue});var D=B(4674),p=B(9360),K=B(8251),ie=B(2737);function ue(oe,Ee,$e){const De=(0,D.m)(oe)||Ee||$e?{next:oe,error:Ee,complete:$e}:oe;return De?(0,p.e)((X,ne)=>{var le;null===(le=De.subscribe)||void 0===le||le.call(De);let Pe=!0;X.subscribe((0,K.x)(ne,He=>{var Je;null===(Je=De.next)||void 0===Je||Je.call(De,He),ne.next(He)},()=>{var He;Pe=!1,null===(He=De.complete)||void 0===He||He.call(De),ne.complete()},He=>{var Je;Pe=!1,null===(Je=De.error)||void 0===Je||Je.call(De,He),ne.error(He)},()=>{var He,Je;Pe&&(null===(He=De.unsubscribe)||void 0===He||He.call(De)),null===(Je=De.finalize)||void 0===Je||Je.call(De)}))}):ie.y}},3026:(yt,be,B)=>{B.d(be,{T:()=>ie});var D=B(6973),p=B(9360),K=B(8251);function ie(oe=ue){return(0,p.e)((Ee,$e)=>{let De=!1;Ee.subscribe((0,K.x)($e,X=>{De=!0,$e.next(X)},()=>De?$e.complete():$e.error(oe())))})}function ue(){return new D.K}},7599:(yt,be,B)=>{B.d(be,{z:()=>D});const D={setTimeout(p,K,...ie){const{delegate:ue}=D;return ue?.setTimeout?ue.setTimeout(p,K,...ie):setTimeout(p,K,...ie)},clearTimeout(p){const{delegate:K}=D;return(K?.clearTimeout||clearTimeout)(p)},delegate:void 0}},4971:(yt,be,B)=>{B.d(be,{h:()=>p});const p=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(yt,be,B)=>{B.d(be,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(yt,be,B)=>{B.d(be,{K:()=>p});const p=(0,B(2306).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(yt,be,B)=>{B.d(be,{_6:()=>oe,jO:()=>ie,yG:()=>ue});var D=B(4674),p=B(671);function K(Ee){return Ee[Ee.length-1]}function ie(Ee){return(0,D.m)(K(Ee))?Ee.pop():void 0}function ue(Ee){return(0,p.K)(K(Ee))?Ee.pop():void 0}function oe(Ee,$e){return"number"==typeof K(Ee)?Ee.pop():$e}},7453:(yt,be,B)=>{B.d(be,{D:()=>ue});const{isArray:D}=Array,{getPrototypeOf:p,prototype:K,keys:ie}=Object;function ue(Ee){if(1===Ee.length){const $e=Ee[0];if(D($e))return{args:$e,keys:null};if(function oe(Ee){return Ee&&"object"==typeof Ee&&p(Ee)===K}($e)){const De=ie($e);return{args:De.map(X=>$e[X]),keys:De}}}return{args:Ee,keys:null}}},9039:(yt,be,B)=>{function D(p,K){if(p){const ie=p.indexOf(K);0<=ie&&p.splice(ie,1)}}B.d(be,{P:()=>D})},2306:(yt,be,B)=>{function D(p){const ie=p(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}B.d(be,{d:()=>D})},2714:(yt,be,B)=>{function D(p,K){return p.reduce((ie,ue,oe)=>(ie[ue]=K[oe],ie),{})}B.d(be,{n:()=>D})},1441:(yt,be,B)=>{B.d(be,{O:()=>ie,x:()=>K});var D=B(2653);let p=null;function K(ue){if(D.config.useDeprecatedSynchronousErrorHandling){const oe=!p;if(oe&&(p={errorThrown:!1,error:null}),ue(),oe){const{errorThrown:Ee,error:$e}=p;if(p=null,Ee)throw $e}}else ue()}function ie(ue){D.config.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=ue)}},7103:(yt,be,B)=>{function D(p,K,ie,ue=0,oe=!1){const Ee=K.schedule(function(){ie(),oe?p.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(p.add(Ee),!oe)return Ee}B.d(be,{f:()=>D})},2737:(yt,be,B)=>{function D(p){return p}B.d(be,{y:()=>D})},4266:(yt,be,B)=>{B.d(be,{z:()=>D});const D=p=>p&&"number"==typeof p.length&&"function"!=typeof p},5726:(yt,be,B)=>{B.d(be,{D:()=>p});var D=B(4674);function p(K){return Symbol.asyncIterator&&(0,D.m)(K?.[Symbol.asyncIterator])}},4674:(yt,be,B)=>{function D(p){return"function"==typeof p}B.d(be,{m:()=>D})},8382:(yt,be,B)=>{B.d(be,{c:()=>K});var D=B(4850),p=B(4674);function K(ie){return(0,p.m)(ie[D.L])}},3664:(yt,be,B)=>{B.d(be,{T:()=>K});var D=B(4971),p=B(4674);function K(ie){return(0,p.m)(ie?.[D.h])}},4026:(yt,be,B)=>{B.d(be,{t:()=>p});var D=B(4674);function p(K){return(0,D.m)(K?.then)}},541:(yt,be,B)=>{B.d(be,{L:()=>ie,Q:()=>K});var D=B(7582),p=B(4674);function K(ue){return(0,D.FC)(this,arguments,function*(){const Ee=ue.getReader();try{for(;;){const{value:$e,done:De}=yield(0,D.qq)(Ee.read());if(De)return yield(0,D.qq)(void 0);yield yield(0,D.qq)($e)}}finally{Ee.releaseLock()}})}function ie(ue){return(0,p.m)(ue?.getReader)}},671:(yt,be,B)=>{B.d(be,{K:()=>p});var D=B(4674);function p(K){return K&&(0,D.m)(K.schedule)}},9360:(yt,be,B)=>{B.d(be,{A:()=>p,e:()=>K});var D=B(4674);function p(ie){return(0,D.m)(ie?.lift)}function K(ie){return ue=>{if(p(ue))return ue.lift(function(oe){try{return ie(oe,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(yt,be,B)=>{B.d(be,{Z:()=>ie});var D=B(7398);const{isArray:p}=Array;function ie(ue){return(0,D.U)(oe=>function K(ue,oe){return p(oe)?ue(...oe):ue(oe)}(ue,oe))}},2420:(yt,be,B)=>{function D(){}B.d(be,{Z:()=>D})},8407:(yt,be,B)=>{B.d(be,{U:()=>K,z:()=>p});var D=B(2737);function p(...ie){return K(ie)}function K(ie){return 0===ie.length?D.y:1===ie.length?ie[0]:function(oe){return ie.reduce((Ee,$e)=>$e(Ee),oe)}}},3894:(yt,be,B)=>{B.d(be,{h:()=>K});var D=B(2653),p=B(7599);function K(ie){p.z.setTimeout(()=>{const{onUnhandledError:ue}=D.config;if(!ue)throw ie;ue(ie)})}},9853:(yt,be,B)=>{function D(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(be,{z:()=>D})},6814:(yt,be,B)=>{B.d(be,{Do:()=>Be,EM:()=>ls,H9:()=>jt,HT:()=>ie,JF:()=>cs,K0:()=>oe,Mx:()=>ni,O5:()=>Hu,PM:()=>Qa,S$:()=>Pe,V_:()=>$e,Ye:()=>rt,b0:()=>Je,bD:()=>kn,ez:()=>Yr,gd:()=>jo,i8:()=>Bo,q:()=>K,sg:()=>pa,w_:()=>ue});var D=B(5879);let p=null;function K(){return p}function ie(A){p||(p=A)}class ue{}const oe=new D.OlP("DocumentToken");let Ee=(()=>{class A{historyGo(x){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return(0,D.f3M)(De)},providedIn:"platform"})}return A})();const $e=new D.OlP("Location Initialized");let De=(()=>{class A extends Ee{constructor(){super(),this._doc=(0,D.f3M)(oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(x){const L=K().getGlobalEventTarget(this._doc,"window");return L.addEventListener("popstate",x,!1),()=>L.removeEventListener("popstate",x)}onHashChange(x){const L=K().getGlobalEventTarget(this._doc,"window");return L.addEventListener("hashchange",x,!1),()=>L.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,L,Q){this._history.pushState(x,L,Q)}replaceState(x,L,Q){this._history.replaceState(x,L,Q)}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return new A},providedIn:"platform"})}return A})();function X(A,F){if(0==A.length)return F;if(0==F.length)return A;let x=0;return A.endsWith("/")&&x++,F.startsWith("/")&&x++,2==x?A+F.substring(1):1==x?A+F:A+"/"+F}function ne(A){const F=A.match(/#|\?|$/),x=F&&F.index||A.length;return A.slice(0,x-("/"===A[x-1]?1:0))+A.slice(x)}function le(A){return A&&"?"!==A[0]?"?"+A:A}let Pe=(()=>{class A{historyGo(x){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return(0,D.f3M)(Je)},providedIn:"root"})}return A})();const He=new D.OlP("appBaseHref");let Je=(()=>{class A extends Pe{constructor(x,L){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=L??this._platformLocation.getBaseHrefFromDOM()??(0,D.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return X(this._baseHref,x)}path(x=!1){const L=this._platformLocation.pathname+le(this._platformLocation.search),Q=this._platformLocation.hash;return Q&&x?`${L}${Q}`:L}pushState(x,L,Q,ve){const Se=this.prepareExternalUrl(Q+le(ve));this._platformLocation.pushState(x,L,Se)}replaceState(x,L,Q,ve){const Se=this.prepareExternalUrl(Q+le(ve));this._platformLocation.replaceState(x,L,Se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(L){return new(L||A)(D.LFG(Ee),D.LFG(He,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Be=(()=>{class A extends Pe{constructor(x,L){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=L&&(this._baseHref=L)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let L=this._platformLocation.hash;return null==L&&(L="#"),L.length>0?L.substring(1):L}prepareExternalUrl(x){const L=X(this._baseHref,x);return L.length>0?"#"+L:L}pushState(x,L,Q,ve){let Se=this.prepareExternalUrl(Q+le(ve));0==Se.length&&(Se=this._platformLocation.pathname),this._platformLocation.pushState(x,L,Se)}replaceState(x,L,Q,ve){let Se=this.prepareExternalUrl(Q+le(ve));0==Se.length&&(Se=this._platformLocation.pathname),this._platformLocation.replaceState(x,L,Se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(L){return new(L||A)(D.LFG(Ee),D.LFG(He,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac})}return A})(),rt=(()=>{class A{constructor(x){this._subject=new D.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const L=this._locationStrategy.getBaseHref();this._basePath=function Ie(A){if(new RegExp("^(https?:)?//").test(A)){const[,x]=A.split(/\/\/[^\/]+/);return x}return A}(ne(un(L))),this._locationStrategy.onPopState(Q=>{this._subject.emit({url:this.path(!0),pop:!0,state:Q.state,type:Q.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,L=""){return this.path()==this.normalize(x+le(L))}normalize(x){return A.stripTrailingSlash(function en(A,F){if(!A||!F.startsWith(A))return F;const x=F.substring(A.length);return""===x||["/",";","?","#"].includes(x[0])?x:F}(this._basePath,un(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,L="",Q=null){this._locationStrategy.pushState(Q,"",x,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+le(L)),Q)}replaceState(x,L="",Q=null){this._locationStrategy.replaceState(Q,"",x,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+le(L)),Q)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(L=>{this._notifyUrlChangeListeners(L.url,L.state)})),()=>{const L=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(L,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",L){this._urlChangeListeners.forEach(Q=>Q(x,L))}subscribe(x,L,Q){return this._subject.subscribe({next:x,error:L,complete:Q})}static#e=this.normalizeQueryParams=le;static#t=this.joinWithSlash=X;static#n=this.stripTrailingSlash=ne;static#r=this.\u0275fac=function(L){return new(L||A)(D.LFG(Pe))};static#i=this.\u0275prov=D.Yz7({token:A,factory:function(){return function ct(){return new rt((0,D.LFG)(Pe))}()},providedIn:"root"})}return A})();function un(A){return A.replace(/\/index.html$/,"")}const Fe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var pe=function(A){return A[A.Decimal=0]="Decimal",A[A.Percent=1]="Percent",A[A.Currency=2]="Currency",A[A.Scientific=3]="Scientific",A}(pe||{}),Lt=function(A){return A[A.Decimal=0]="Decimal",A[A.Group=1]="Group",A[A.List=2]="List",A[A.PercentSign=3]="PercentSign",A[A.PlusSign=4]="PlusSign",A[A.MinusSign=5]="MinusSign",A[A.Exponential=6]="Exponential",A[A.SuperscriptingExponent=7]="SuperscriptingExponent",A[A.PerMille=8]="PerMille",A[A.Infinity=9]="Infinity",A[A.NaN=10]="NaN",A[A.TimeSeparator=11]="TimeSeparator",A[A.CurrencyDecimal=12]="CurrencyDecimal",A[A.CurrencyGroup=13]="CurrencyGroup",A}(Lt||{});function Oe(A,F){const x=(0,D.cg1)(A),L=x[D.wAp.NumberSymbols][F];if(typeof L>"u"){if(F===Lt.CurrencyDecimal)return x[D.wAp.NumberSymbols][Lt.Decimal];if(F===Lt.CurrencyGroup)return x[D.wAp.NumberSymbols][Lt.Group]}return L}const q=/^(\d+)?\.((\d+)(-(\d+))?)?$/,se=22,je=".",tt="0",Et=";",xt=",",Mt="#";function wi(A,F,x,L,Q){const Se=function fe(A,F="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},L=A.split(Et),Q=L[0],ve=L[1],Se=-1!==Q.indexOf(je)?Q.split(je):[Q.substring(0,Q.lastIndexOf(tt)+1),Q.substring(Q.lastIndexOf(tt)+1)],It=Se[0],rn=Se[1]||"";x.posPre=It.substring(0,It.indexOf(Mt));for(let Kt=0;Kt<rn.length;Kt++){const Wt=rn.charAt(Kt);Wt===tt?x.minFrac=x.maxFrac=Kt+1:Wt===Mt?x.maxFrac=Kt+1:x.posSuf+=Wt}const dn=It.split(xt);if(x.gSize=dn[1]?dn[1].length:0,x.lgSize=dn[2]||dn[1]?(dn[2]||dn[1]).length:0,ve){const Kt=Q.length-x.posPre.length-x.posSuf.length,Wt=ve.indexOf(Mt);x.negPre=ve.substring(0,Wt).replace(/'/g,""),x.negSuf=ve.slice(Wt+Kt).replace(/'/g,"")}else x.negPre=F+x.posPre,x.negSuf=x.posSuf;return x}(function Ue(A,F){return(0,D.cg1)(A)[D.wAp.NumberFormats][F]}(F,pe.Currency),Oe(F,Lt.MinusSign));return Se.minFrac=function Er(A){let F;const x=Fe[A];return x&&(F=x[2]),"number"==typeof F?F:2}(L),Se.maxFrac=Se.minFrac,function hi(A,F,x,L,Q,ve,Se=!1){let It="",rn=!1;if(isFinite(A)){let dn=function pt(A){let L,Q,ve,Se,It,F=Math.abs(A)+"",x=0;for((Q=F.indexOf(je))>-1&&(F=F.replace(je,"")),(ve=F.search(/e/i))>0?(Q<0&&(Q=ve),Q+=+F.slice(ve+1),F=F.substring(0,ve)):Q<0&&(Q=F.length),ve=0;F.charAt(ve)===tt;ve++);if(ve===(It=F.length))L=[0],Q=1;else{for(It--;F.charAt(It)===tt;)It--;for(Q-=ve,L=[],Se=0;ve<=It;ve++,Se++)L[Se]=Number(F.charAt(ve))}return Q>se&&(L=L.splice(0,se-1),x=Q-1,Q=1),{digits:L,exponent:x,integerLen:Q}}(A);Se&&(dn=function Ge(A){if(0===A.digits[0])return A;const F=A.digits.length-A.integerLen;return A.exponent?A.exponent+=2:(0===F?A.digits.push(0,0):1===F&&A.digits.push(0),A.integerLen+=2),A}(dn));let Kt=F.minInt,Wt=F.minFrac,nr=F.maxFrac;if(ve){const ii=ve.match(q);if(null===ii)throw new Error(`${ve} is not a valid digit info`);const Xs=ii[1],xr=ii[3],Wi=ii[5];null!=Xs&&(Kt=dt(Xs)),null!=xr&&(Wt=dt(xr)),null!=Wi?nr=dt(Wi):null!=xr&&Wt>nr&&(nr=Wt)}!function bt(A,F,x){if(F>x)throw new Error(`The minimum number of digits after fraction (${F}) is higher than the maximum (${x}).`);let L=A.digits,Q=L.length-A.integerLen;const ve=Math.min(Math.max(F,Q),x);let Se=ve+A.integerLen,It=L[Se];if(Se>0){L.splice(Math.max(A.integerLen,Se));for(let Wt=Se;Wt<L.length;Wt++)L[Wt]=0}else{Q=Math.max(0,Q),A.integerLen=1,L.length=Math.max(1,Se=ve+1),L[0]=0;for(let Wt=1;Wt<Se;Wt++)L[Wt]=0}if(It>=5)if(Se-1<0){for(let Wt=0;Wt>Se;Wt--)L.unshift(0),A.integerLen++;L.unshift(1),A.integerLen++}else L[Se-1]++;for(;Q<Math.max(0,ve);Q++)L.push(0);let rn=0!==ve;const dn=F+A.integerLen,Kt=L.reduceRight(function(Wt,nr,xn,Fn){return Fn[xn]=(nr+=Wt)<10?nr:nr-10,rn&&(0===Fn[xn]&&xn>=dn?Fn.pop():rn=!1),nr>=10?1:0},0);Kt&&(L.unshift(Kt),A.integerLen++)}(dn,Wt,nr);let xn=dn.digits,Fn=dn.integerLen;const ps=dn.exponent;let Oi=[];for(rn=xn.every(ii=>!ii);Fn<Kt;Fn++)xn.unshift(0);for(;Fn<0;Fn++)xn.unshift(0);Fn>0?Oi=xn.splice(Fn,xn.length):(Oi=xn,xn=[0]);const Wo=[];for(xn.length>=F.lgSize&&Wo.unshift(xn.splice(-F.lgSize,xn.length).join(""));xn.length>F.gSize;)Wo.unshift(xn.splice(-F.gSize,xn.length).join(""));xn.length&&Wo.unshift(xn.join("")),It=Wo.join(Oe(x,L)),Oi.length&&(It+=Oe(x,Q)+Oi.join("")),ps&&(It+=Oe(x,Lt.Exponential)+"+"+ps)}else It=Oe(x,Lt.Infinity);return It=A<0&&!rn?F.negPre+It+F.negSuf:F.posPre+It+F.posSuf,It}(A,Se,F,Lt.CurrencyGroup,Lt.CurrencyDecimal,Q).replace("\xa4",x).replace("\xa4","").trim()}function dt(A){const F=parseInt(A);if(isNaN(F))throw new Error("Invalid integer literal when parsing "+A);return F}function ni(A,F){F=encodeURIComponent(F);for(const x of A.split(";")){const L=x.indexOf("="),[Q,ve]=-1==L?[x,""]:[x.slice(0,L),x.slice(L+1)];if(Q.trim()===F)return decodeURIComponent(ve)}return null}class $l{constructor(F,x,L,Q){this.$implicit=F,this.ngForOf=x,this.index=L,this.count=Q}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pa=(()=>{class A{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,L,Q){this._viewContainer=x,this._template=L,this._differs=Q,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const L=this._viewContainer;x.forEachOperation((Q,ve,Se)=>{if(null==Q.previousIndex)L.createEmbeddedView(this._template,new $l(Q.item,this._ngForOf,-1,-1),null===Se?void 0:Se);else if(null==Se)L.remove(null===ve?void 0:ve);else if(null!==ve){const It=L.get(ve);L.move(It,Se),Ws(It,Q)}});for(let Q=0,ve=L.length;Q<ve;Q++){const It=L.get(Q).context;It.index=Q,It.count=ve,It.ngForOf=this._ngForOf}x.forEachIdentityChange(Q=>{Ws(L.get(Q.currentIndex),Q)})}static ngTemplateContextGuard(x,L){return!0}static#e=this.\u0275fac=function(L){return new(L||A)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function Ws(A,F){A.context.$implicit=F.item}let Hu=(()=>{class A{constructor(x,L){this._viewContainer=x,this._context=new Fo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=L}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Gl("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Gl("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,L){return!0}static#e=this.\u0275fac=function(L){return new(L||A)(D.Y36(D.s_b),D.Y36(D.Rgc))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class Fo{constructor(){this.$implicit=null,this.ngIf=null}}function Gl(A,F){if(F&&!F.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,D.AaK)(F)}'.`)}function $i(A,F){return new D.vHH(2100,!1)}let Bo=(()=>{class A{transform(x){if(null==x)return null;if("string"!=typeof x)throw $i();return x.toLowerCase()}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275pipe=D.Yjl({name:"lowercase",type:A,pure:!0,standalone:!0})}return A})(),jo=(()=>{class A{transform(x){if(null==x)return null;if("string"!=typeof x)throw $i();return x.toUpperCase()}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275pipe=D.Yjl({name:"uppercase",type:A,pure:!0,standalone:!0})}return A})(),jt=(()=>{class A{constructor(x,L="USD"){this._locale=x,this._defaultCurrencyCode=L}transform(x,L=this._defaultCurrencyCode,Q="symbol",ve,Se){if(!function fn(A){return!(null==A||""===A||A!=A)}(x))return null;Se=Se||this._locale,"boolean"==typeof Q&&(Q=Q?"symbol":"code");let It=L||this._defaultCurrencyCode;"code"!==Q&&(It="symbol"===Q||"symbol-narrow"===Q?function vr(A,F,x="en"){const L=function At(A){return(0,D.cg1)(A)[D.wAp.Currencies]}(x)[A]||Fe[A]||[],Q=L[1];return"narrow"===F&&"string"==typeof Q?Q:L[0]||A}(It,"symbol"===Q?"wide":"narrow",Se):Q);try{return wi(function Kr(A){if("string"==typeof A&&!isNaN(Number(A)-parseFloat(A)))return Number(A);if("number"!=typeof A)throw new Error(`${A} is not a number`);return A}(x),Se,It,L,ve)}catch(rn){throw $i()}}static#e=this.\u0275fac=function(L){return new(L||A)(D.Y36(D.soG,16),D.Y36(D.EJc,16))};static#t=this.\u0275pipe=D.Yjl({name:"currency",type:A,pure:!0,standalone:!0})}return A})();let Yr=(()=>{class A{static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275mod=D.oAB({type:A});static#n=this.\u0275inj=D.cJS({})}return A})();const kn="browser",as="server";function Qa(A){return A===as}let ls=(()=>{class A{static#e=this.\u0275prov=(0,D.Yz7)({token:A,providedIn:"root",factory:()=>new Os((0,D.LFG)(oe),window)})}return A})();class Os{constructor(F,x){this.document=F,this.window=x,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const x=function ks(A,F){const x=A.getElementById(F)||A.getElementsByName(F)[0];if(x)return x;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const L=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let Q=L.currentNode;for(;Q;){const ve=Q.shadowRoot;if(ve){const Se=ve.getElementById(F)||ve.querySelector(`[name="${F}"]`);if(Se)return Se}Q=L.nextNode()}}return null}(this.document,F);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(F){this.supportsScrolling()&&(this.window.history.scrollRestoration=F)}scrollToElement(F){const x=F.getBoundingClientRect(),L=x.left+this.window.pageXOffset,Q=x.top+this.window.pageYOffset,ve=this.offset();this.window.scrollTo(L-ve[0],Q-ve[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class cs{}},5879:(yt,be,B)=>{B.d(be,{$8M:()=>Fh,$WT:()=>xs,$Z:()=>Rc,AFp:()=>Mw,ALo:()=>jC,AaK:()=>le,CHM:()=>al,CRH:()=>jy,EJc:()=>$x,EpF:()=>kT,F4k:()=>KE,FYo:()=>ai,FiY:()=>na,GfV:()=>yg,Gpc:()=>Je,HDt:()=>pD,JOm:()=>sr,KtG:()=>dd,LFG:()=>Et,LSH:()=>h_,Lbi:()=>ws,Lck:()=>gx,MAs:()=>ay,MMx:()=>pS,NdJ:()=>Zg,O4$:()=>ro,Ojb:()=>Ow,OlP:()=>Tt,Oqu:()=>pI,P3R:()=>Vv,PXZ:()=>sR,Q6J:()=>zE,QGY:()=>Wg,Qsj:()=>Sn,R0b:()=>Si,RDi:()=>Ew,Rgc:()=>gm,SBq:()=>_g,Sil:()=>gD,Suo:()=>By,TTD:()=>Wt,TgZ:()=>Gg,VuI:()=>iM,W1O:()=>tp,X6Q:()=>zs,XFs:()=>Pt,Xpm:()=>zl,Xq5:()=>xE,Xts:()=>lf,Y36:()=>bu,YKP:()=>MC,YNc:()=>iy,Yjl:()=>ga,Yz7:()=>Ut,Z0I:()=>In,ZZ4:()=>iv,_Bn:()=>xC,_UZ:()=>ly,_c5:()=>VD,_uU:()=>XT,aQg:()=>Mo,c2e:()=>fD,cJS:()=>Kn,cg1:()=>Ha,dDg:()=>rR,dqk:()=>wn,eFA:()=>AD,eJc:()=>Em,ekj:()=>lI,eoX:()=>Am,f3M:()=>Mt,g9A:()=>Nw,h0i:()=>ih,hGG:()=>lh,hij:()=>Xg,iGM:()=>Uy,ifc:()=>pt,ip1:()=>hD,jDz:()=>UI,kL8:()=>Hc,kcU:()=>ll,lG2:()=>jo,lcZ:()=>fm,lqb:()=>js,lri:()=>ID,n5z:()=>Rp,oAB:()=>Bo,oxw:()=>FT,q4F:()=>Qv,qFp:()=>ZD,qLn:()=>Du,qOj:()=>AE,qZA:()=>zg,rWj:()=>wD,rg0:()=>ve,s9C:()=>Kg,sBO:()=>hR,s_b:()=>Fl,soG:()=>Ky,tb:()=>Yc,tp0:()=>wd,uIk:()=>NE,vHH:()=>Ie,vpe:()=>Va,wAp:()=>Zf,xi3:()=>Xf,xp6:()=>iT,z2F:()=>op,zSh:()=>ka,zs3:()=>Fa});var D=B(8645),p=B(7394),K=B(5592),ie=B(3019),ue=B(5619),oe=B(2096),Ee=B(3020),$e=B(4664),De=B(3997);function X(i){for(let o in i)if(i[o]===X)return o;throw Error("Could not find renamed property on target object.")}function ne(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const He=X({__forward_ref__:X});function Je(i){return i.__forward_ref__=Je,i.toString=function(){return le(this())},i}function Be(i){return rt(i)?i():i}function rt(i){return"function"==typeof i&&i.hasOwnProperty(He)&&i.__forward_ref__===Je}function ct(i){return i&&!!i.\u0275providers}const un="https://g.co/ng/security#xss";class Ie extends Error{constructor(o,a){super(function Fe(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function Lt(i,o){throw new Ie(-201,!1)}function _t(i,o){null==i&&function et(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Kn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Rn(i){return wt(i,Er)||wt(i,lr)}function In(i){return null!==Rn(i)}function wt(i,o){return i.hasOwnProperty(o)?i[o]:null}function rs(i){return i&&(i.hasOwnProperty(On)||i.hasOwnProperty(Hn))?i[On]:null}const Er=X({\u0275prov:X}),On=X({\u0275inj:X}),lr=X({ngInjectableDef:X}),Hn=X({ngInjectorDef:X});var Pt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Pt||{});let tn;function Dn(i){const o=tn;return tn=i,o}function zr(i,o,a){const l=Rn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Pt.Optional?null:void 0!==o?o:void Lt(le(i))}const wn=globalThis;class Tt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qr={},Wr="__NG_DI_FLAG__",ti="ngTempTokenPath",$=/\n/gm,H="__source";let q;function je(i){const o=q;return q=i,o}function tt(i,o=Pt.Default){if(void 0===q)throw new Ie(-203,!1);return null===q?zr(i,void 0,o):q.get(i,o&Pt.Optional?null:void 0,o)}function Et(i,o=Pt.Default){return(function St(){return tn}()||tt)(Be(i),o)}function Mt(i,o=Pt.Default){return Et(i,Ht(o))}function Ht(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Vn(i){const o=[];for(let a=0;a<i.length;a++){const l=Be(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ie(900,!1);let d,f=Pt.Default;for(let y=0;y<l.length;y++){const T=l[y],S=wi(T);"number"==typeof S?-1===S?d=T.token:f|=S:d=T}o.push(Et(d,f))}else o.push(Et(l))}return o}function hi(i,o){return i[Wr]=o,i.prototype[Wr]=o,i}function wi(i){return i[Wr]}function fe(i){return{toString:i}.toString()}var Ge=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Ge||{}),pt=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(pt||{});const bt={},dt=[],nn=X({\u0275cmp:X}),pr=X({\u0275dir:X}),Un=X({\u0275pipe:X}),Ti=X({\u0275mod:X}),ni=X({\u0275fac:X}),ji=X({__NG_ELEMENT_ID__:X}),qa=X({__NG_ENV_ID__:X});function td(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}function ko(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],y=a[l++],T=a[l++];i.setAttribute(o,y,T,f)}else{const f=d,y=a[++l];$l(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),l++}}return l}function An(i){return 3===i||4===i||6===i}function $l(i){return 64===i.charCodeAt(0)}function pa(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Ws(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Ws(i,o,a,l,d){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const T=i[f++];if("number"==typeof T){if(T===o){y=-1;break}if(T>o){y=f-1;break}}}for(;f<i.length;){const T=i[f];if("number"==typeof T)break;if(T===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}const Lo="ng-template";function Hu(i,o,a){let l=0,d=!0;for(;l<i.length;){let f=i[l++];if("string"==typeof f&&d){const y=i[l++];if(a&&"class"===f&&-1!==td(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<i.length&&"string"==typeof(f=i[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function Fo(i){return 4===i.type&&i.value!==Lo}function Gl(i,o,a){return o===(4!==i.type||a?i.value:Lo)}function Wa(i,o,a){let l=4;const d=i.attrs||[],f=function os(i){for(let o=0;o<i.length;o++)if(An(i[o]))return o;return i.length}(d);let y=!1;for(let T=0;T<o.length;T++){const S=o[T];if("number"!=typeof S){if(!y)if(4&l){if(l=2|1&l,""!==S&&!Gl(i,S,a)||""===S&&1===o.length){if(ri(l))return!1;y=!0}}else{const O=8&l?S:o[++T];if(8&l&&null!==i.attrs){if(!Hu(i.attrs,O,a)){if(ri(l))return!1;y=!0}continue}const Z=Hi(8&l?"class":S,d,Fo(i),a);if(-1===Z){if(ri(l))return!1;y=!0;continue}if(""!==O){let re;re=Z>f?"":d[Z+1].toLowerCase();const de=8&l?re:null;if(de&&-1!==td(de,O,0)||2&l&&O!==re){if(ri(l))return!1;y=!0}}}}else{if(!y&&!ri(l)&&!ri(S))return!1;if(y&&ri(S))continue;y=!1,l=S|1&l}}return ri(l)||y}function ri(i){return 0==(1&i)}function Hi(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let T=o[++d];for(;"string"==typeof T;)T=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function mo(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function wr(i,o,a=!1){for(let l=0;l<o.length;l++)if(Wa(i,o[l],a))return!0;return!1}function Ka(i,o){return i?":not("+o.trim()+")":o}function $u(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const T=i[++a];d+="["+y+(T.length>0?'="'+T+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!ri(y)&&(o+=Ka(f,d),d=""),l=y,f=f||!ri(l);a++}return""!==d&&(o+=Ka(f,d)),o}function zl(i){return fe(()=>{const o=yo(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||pt.Emulated,styles:i.styles||dt,_:null,schemas:i.schemas||null,tView:null,id:""};Ya(a);const l=i.dependencies;return a.directiveDefs=Ms(l,!1),a.pipeDefs=Ms(l,!0),a.id=function Ns(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Uo(i){return an(i)||cr(i)}function Gu(i){return null!==i}function Bo(i){return fe(()=>({type:i.type,bootstrap:i.bootstrap||dt,declarations:i.declarations||dt,imports:i.imports||dt,exports:i.exports||dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function _o(i,o){if(null==i)return bt;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}function jo(i){return fe(()=>{const o=yo(i);return Ya(o),o})}function ga(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function an(i){return i[nn]||null}function cr(i){return i[pr]||null}function Zr(i){return i[Un]||null}function xs(i){const o=an(i)||cr(i)||Zr(i);return null!==o&&o.standalone}function Ur(i,o){const a=i[Ti]||null;if(!a&&!0===o)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function yo(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||bt,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||dt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_o(i.inputs,o),outputs:_o(i.outputs)}}function Ya(i){i.features?.forEach(o=>o(i))}function Ms(i,o){if(!i)return null;const a=o?Zr:Uo;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(Gu)}const $n=0,it=1,jt=2,fn=3,Kr=4,Ho=5,Gn=6,Yr=7,kn=8,as=9,Br=10,Bt=11,Zs=12,Qa=13,us=14,dr=15,vo=16,ls=17,Os=18,ks=19,Ls=20,cs=21,ds=22,jr=23,Ja=24,Zt=25,Ys=1,Fs=2,hs=7,Qs=9,tr=11;function gr(i){return Array.isArray(i)&&"object"==typeof i[Ys]}function Ln(i){return Array.isArray(i)&&!0===i[Ys]}function _a(i){return 0!=(4&i.flags)}function Pi(i){return i.componentOffset>-1}function fi(i){return 1==(1&i.flags)}function zi(i){return!!i.template}function ql(i){return 0!=(512&i[jt])}function Js(i,o){return i.hasOwnProperty(ni)?i[ni]:null}let Tr=null,fs=!1;function Cr(i){const o=Tr;return Tr=i,o}const nu={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ru(i){if(!hr(i)||i.dirty){if(!i.producerMustRecompute(i)&&!Ju(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function zo(i){i.dirty=!0,function Go(i){if(void 0===i.liveConsumerNode)return;const o=fs;fs=!0;try{for(const a of i.liveConsumerNode)a.dirty||zo(a)}finally{fs=o}}(i),i.consumerMarkedDirty?.(i)}function Ia(i){return i&&(i.nextProducerIndex=0),Cr(i)}function Qu(i,o){if(Cr(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(hr(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Ci(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Ju(i){W(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==a.version||(ru(a),l!==a.version))return!0}return!1}function Me(i){if(W(i),hr(i))for(let o=0;o<i.producerNode.length;o++)Ci(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Ci(i,o){if(function Zl(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),W(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)Ci(i.producerNode[l],i.producerIndexOfThis[l]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];W(d),d.producerIndexOfThis[l]=o}}function hr(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function W(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let ad=null;function ve(i){const o=Cr(null);try{return i()}finally{Cr(o)}}const It=()=>{},rn=(()=>({...nu,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:It}))();class Kt{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Wt(){return nr}function nr(i){return i.type.prototype.ngOnChanges&&(i.setInput=Fn),xn}function xn(){const i=Oi(this),o=i?.current;if(o){const a=i.previous;if(a===bt)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Fn(i,o,a,l){const d=this.declaredInputs[a],f=Oi(i)||function Wo(i,o){return i[ps]=o}(i,{previous:bt,current:null}),y=f.current||(f.current={}),T=f.previous,S=T[d];y[d]=new Kt(S&&S.currentValue,o,T===bt),i[l]=o}Wt.ngInherit=!0;const ps="__ngSimpleChanges__";function Oi(i){return i[ps]||null}const xr=function(i,o,a){},Wi="svg";function Bn(i){for(;Array.isArray(i);)i=i[$n];return i}function el(i,o){return Bn(o[i])}function pi(i,o){return Bn(o[i.index])}function Kl(i,o){return i.data[o]}function eo(i,o){return i[o]}function Yn(i,o){const a=o[i];return gr(a)?a:a[$n]}function wo(i,o){return null==o?null:i[o]}function nl(i){i[ls]=0}function rl(i){1024&i[jt]||(i[jt]|=1024,Ta(i,1))}function Ih(i){1024&i[jt]&&(i[jt]&=-1025,Ta(i,-1))}function Ta(i,o){let a=i[fn];if(null===a)return;a[Ho]+=o;let l=a;for(a=a[fn];null!==a&&(1===o&&1===l[Ho]||-1===o&&0===l[Ho]);)a[Ho]+=o,l=a,a=a[fn]}const Vt={lFrame:j(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wh(){return Vt.bindingsEnabled}function ke(){return Vt.lFrame.lView}function Ot(){return Vt.lFrame.tView}function al(i){return Vt.lFrame.contextLView=i,i[kn]}function dd(i){return Vt.lFrame.contextLView=null,i}function si(){let i=Tp();for(;null!==i&&64===i.type;)i=i.parent;return i}function Tp(){return Vt.lFrame.currentTNode}function Us(i,o){const a=Vt.lFrame;a.currentTNode=i,a.isParent=o}function Qo(){return Vt.lFrame.isParent}function Hr(){const i=Vt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function no(){return Vt.lFrame.bindingIndex++}function ul(i,o){const a=Vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,fd(o)}function fd(i){Vt.lFrame.currentDirectiveIndex=i}function Ch(){return Vt.lFrame.currentQueryIndex}function w(i){Vt.lFrame.currentQueryIndex=i}function b(i){const o=i[it];return 2===o.type?o.declTNode:1===o.type?i[Gn]:null}function I(i,o,a){if(a&Pt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&Pt.Host||(d=b(f),null===d||(f=f[us],10&d.type))););if(null===d)return!1;o=d,i=f}const l=Vt.lFrame=N();return l.currentTNode=o,l.lView=i,!0}function R(i){const o=N(),a=i[it];Vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function N(){const i=Vt.lFrame,o=null===i?null:i.child;return null===o?j(i):o}function j(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Y(){const i=Vt.lFrame;return Vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const _e=Y;function me(){const i=Y();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Jt(){return Vt.lFrame.selectedIndex}function kt(i){Vt.lFrame.selectedIndex=i}function Tn(){const i=Vt.lFrame;return Kl(i.tView,i.selectedIndex)}function ro(){Vt.lFrame.currentNamespace=Wi}function ll(){!function so(){Vt.lFrame.currentNamespace=null}()}let md=!0;function uu(){return md}function oo(i){md=i}function lu(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:T,ngAfterViewInit:S,ngAfterViewChecked:O,ngOnDestroy:V}=f;y&&(i.contentHooks??=[]).push(-a,y),T&&((i.contentHooks??=[]).push(a,T),(i.contentCheckHooks??=[]).push(a,T)),S&&(i.viewHooks??=[]).push(-a,S),O&&((i.viewHooks??=[]).push(a,O),(i.viewCheckHooks??=[]).push(a,O)),null!=V&&(i.destroyHooks??=[]).push(a,V)}}function cl(i,o,a){du(i,o,3,a)}function Jo(i,o,a,l){(3&i[jt])===a&&du(i,o,a,l)}function cu(i,o){let a=i[jt];(3&a)===o&&(a&=8191,a+=1,i[jt]=a)}function du(i,o,a,l){const f=l??-1,y=o.length-1;let T=0;for(let S=void 0!==l?65535&i[ls]:0;S<y;S++)if("number"==typeof o[S+1]){if(T=o[S],null!=l&&T>=l)break}else o[S]<0&&(i[ls]+=65536),(T<f||-1==f)&&(Dh(i,a,o,S),i[ls]=(4294901760&i[ls])+S+2),S++}function ec(i,o){xr(4,i,o);const a=Cr(null);try{o.call(i)}finally{Cr(a),xr(5,i,o)}}function Dh(i,o,a,l){const d=a[l]<0,f=a[l+1],T=i[d?-a[l]:a[l]];d?i[jt]>>13<i[ls]>>16&&(3&i[jt])===o&&(i[jt]+=8192,ec(T,f)):ec(T,f)}const hu=-1;class tc{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function dl(i){return i!==hu}function hl(i){return 32767&i}function Xo(i,o){let a=function _v(i){return i>>16}(i),l=o;for(;a>0;)l=l[us],a--;return l}let Ph=!0;function xh(i){const o=Ph;return Ph=i,o}const ao=255,fl=5;let Mh=0;const Bs={};function pu(i,o){const a=ic(i,o);if(-1!==a)return a;const l=o[it];l.firstCreatePass&&(i.injectorIndex=o.length,pl(l.data,i),pl(o,null),pl(l.blueprint,null));const d=sc(i,o),f=i.injectorIndex;if(dl(d)){const y=hl(d),T=Xo(d,o),S=T[it].data;for(let O=0;O<8;O++)o[f+O]=T[y+O]|S[y+O]}return o[f+8]=d,f}function pl(i,o){i.push(0,0,0,0,0,0,0,0,o)}function ic(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function sc(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Pp(d),null===l)return hu;if(a++,d=d[us],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return hu}function Nh(i,o,a){!function ir(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ji)&&(l=a[ji]),null==l&&(l=a[ji]=Mh++);const d=l&ao;o.data[i+(d>>fl)]|=1<<d}(i,o,a)}function Oh(i,o,a){if(a&Pt.Optional||void 0!==i)return i;Lt()}function zm(i,o,a,l){if(a&Pt.Optional&&void 0===l&&(l=null),!(a&(Pt.Self|Pt.Host))){const d=i[as],f=Dn(void 0);try{return d?d.get(o,l,a&Pt.Optional):zr(o,l,a&Pt.Optional)}finally{Dn(f)}}return Oh(l,0,a)}function qm(i,o,a,l=Pt.Default,d){if(null!==i){if(2048&o[jt]&&!(l&Pt.Self)){const y=function yd(i,o,a,l,d){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[jt]&&!(512&y[jt]);){const T=gu(f,y,a,l|Pt.Self,Bs);if(T!==Bs)return T;let S=f.parent;if(!S){const O=y[Ls];if(O){const V=O.get(a,Bs,l);if(V!==Bs)return V}S=Pp(y),y=y[us]}f=S}return d}(i,o,a,l,Bs);if(y!==Bs)return y}const f=gu(i,o,a,l,Bs);if(f!==Bs)return f}return zm(o,a,l,d)}function gu(i,o,a,l,d){const f=function kh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ji)?i[ji]:void 0;return"number"==typeof o?o>=0?o&ao:Sp:o}(a);if("function"==typeof f){if(!I(o,i,l))return l&Pt.Host?Oh(d,0,l):zm(o,a,l,d);try{let y;if(y=f(l),null!=y||l&Pt.Optional)return y;Lt()}finally{_e()}}else if("number"==typeof f){let y=null,T=ic(i,o),S=hu,O=l&Pt.Host?o[dr][Gn]:null;for((-1===T||l&Pt.SkipSelf)&&(S=-1===T?sc(i,o):o[T+8],S!==hu&&Lh(l,!1)?(y=o[it],T=hl(S),o=Xo(S,o)):T=-1);-1!==T;){const V=o[it];if(_u(f,T,V.data)){const Z=mu(T,o,a,y,l,O);if(Z!==Bs)return Z}S=o[T+8],S!==hu&&Lh(l,o[it].data[T+8]===O)&&_u(f,T,o)?(y=V,T=hl(S),o=Xo(S,o)):T=-1}}return d}function mu(i,o,a,l,d,f){const y=o[it],T=y.data[i+8],V=gl(T,y,a,null==l?Pi(T)&&Ph:l!=y&&0!=(3&T.type),d&Pt.Host&&f===T);return null!==V?To(o,y,V,T):Bs}function gl(i,o,a,l,d){const f=i.providerIndexes,y=o.data,T=1048575&f,S=i.directiveStart,V=f>>20,re=d?T+V:i.directiveEnd;for(let de=l?T:T+V;de<re;de++){const Le=y[de];if(de<S&&a===Le||de>=S&&Le.type===a)return de}if(d){const de=y[S];if(de&&zi(de)&&de.type===a)return S}return null}function To(i,o,a,l){let d=i[a];const f=o.data;if(function Ah(i){return i instanceof tc}(d)){const y=d;y.resolving&&function Ke(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ze(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}(f[a]));const T=xh(y.canSeeViewProviders);y.resolving=!0;const O=y.injectImpl?Dn(y.injectImpl):null;I(i,l,Pt.Default);try{d=i[a]=y.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Xl(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=nr(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==O&&Dn(O),xh(T),y.resolving=!1,_e()}}return d}function _u(i,o,a){return!!(a[o+(i>>fl)]&1<<i)}function Lh(i,o){return!(i&Pt.Self||i&Pt.Host&&o)}class ki{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return qm(this._tNode,this._lView,o,Ht(l),a)}}function Sp(){return new ki(si(),ke())}function Rp(i){return fe(()=>{const o=i.prototype.constructor,a=o[ni]||oc(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[ni]||oc(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function oc(i){return rt(i)?()=>{const o=oc(Be(i));return o&&o()}:Js(i)}function Pp(i){const o=i[it],a=o.type;return 2===a?o.declTNode:1===a?i[Gn]:null}function Fh(i){return function yv(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(An(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(si(),i)}const yu="__parameters__";function ea(i,o,a){return fe(()=>{const l=function ml(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return T.annotation=y,T;function T(S,O,V){const Z=S.hasOwnProperty(yu)?S[yu]:Object.defineProperty(S,yu,{value:[]})[yu];for(;Z.length<=V;)Z.push(null);return(Z[V]=Z[V]||[]).push(y),S}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Ki(i,o){i.forEach(a=>Array.isArray(a)?Ki(a,o):o(a))}function Np(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function jh(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function gi(i,o,a){let l=ta(i,o);return l>=0?i[1|l]=a:(l=~l,function Hh(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function $h(i,o){const a=ta(i,o);if(a>=0)return i[1|a]}function ta(i,o){return function vd(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=i[f<<a];if(o===y)return f<<a;y>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const na=hi(ea("Optional"),8),wd=hi(ea("SkipSelf"),4);function Ad(i){return 128==(128&i.flags)}var sr=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(sr||{});const Qi=new Map;let nt=0;const Xh="__ngContext__";function Ai(i,o){gr(o)?(i[Xh]=o[ks],function We(i){Qi.set(i[ks],i)}(o)):i[Xh]=o}let Yp;function jn(i,o){return Yp(i,o)}function ra(i){const o=i[fn];return Ln(o)?o[fn]:o}function v(i){return g(i[Zs])}function h(i){return g(i[Kr])}function g(i){for(;null!==i&&!Ln(i);)i=i[Kr];return i}function E(i,o,a,l,d){if(null!=l){let f,y=!1;Ln(l)?f=l:gr(l)&&(y=!0,l=l[$n]);const T=Bn(l);0===i&&null!==a?null==d?Jp(o,a,T):Na(o,a,T,d||null,!0):1===i&&null!==a?Na(o,a,T,d||null,!0):2===i?function n_(i,o,a){const l=Xp(i,o);l&&function wl(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,T,y):3===i&&o.destroyNode(T),null!=f&&function xA(i,o,a,l,d){const f=a[hs];f!==Bn(a)&&E(o,i,l,f,d);for(let T=tr;T<a.length;T++){const S=a[T];rg(S[it],S,i,o,l,f)}}(o,i,f,a,d)}}function ce(i,o,a){return i.createElement(o,a)}function es(i,o){const a=i[Qs],l=a.indexOf(o);Ih(o),a.splice(l,1)}function Sd(i,o){if(i.length<=tr)return;const a=tr+o,l=i[a];if(l){const d=l[vo];null!==d&&d!==i&&es(d,l),o>0&&(i[a-1][Kr]=l[Kr]);const f=jh(i,tr+o);!function Ve(i,o){rg(i,o,o[Bt],2,null,null),o[$n]=null,o[Gn]=null}(l[it],l);const y=f[Os];null!==y&&y.detachView(f[it]),l[fn]=null,l[Kr]=null,l[jt]&=-129}return l}function xa(i,o){if(!(256&o[jt])){const a=o[Bt];o[jr]&&Me(o[jr]),o[Ja]&&Me(o[Ja]),a.destroyNode&&rg(i,o,a,3,null,null),function vt(i){let o=i[Zs];if(!o)return Do(i[it],i);for(;o;){let a=null;if(gr(o))a=o[Zs];else{const l=o[tr];l&&(a=l)}if(!a){for(;o&&!o[Kr]&&o!==i;)gr(o)&&Do(o[it],o),o=o[fn];null===o&&(o=i),gr(o)&&Do(o[it],o),a=o&&o[Kr]}o=a}}(o)}}function Do(i,o){if(!(256&o[jt])){o[jt]&=-129,o[jt]|=256,function Ma(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof tc)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const T=d[f[y]],S=f[y+1];xr(4,T,S);try{S.call(T)}finally{xr(5,T,S)}}else{xr(4,d,f);try{f.call(d)}finally{xr(5,d,f)}}}}}(i,o),function e_(i,o){const a=i.cleanup,l=o[Yr];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?l[y]():l[-y].unsubscribe(),f+=2}else a[f].call(l[a[f+1]]);null!==l&&(o[Yr]=null);const d=o[cs];if(null!==d){o[cs]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[it].type&&o[Bt].destroy();const a=o[vo];if(null!==a&&Ln(o[fn])){a!==o[fn]&&es(a,o);const l=o[Os];null!==l&&l.detachView(i)}!function Jh(i){Qi.delete(i[ks])}(o)}}function Rd(i,o,a){return function Pd(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[$n];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=i.data[l.directiveStart+d];if(f===pt.None||f===pt.Emulated)return null}return pi(l,a)}}(i,o.parent,a)}function Na(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Jp(i,o,a){i.appendChild(o,a)}function vs(i,o,a,l,d){null!==l?Na(i,o,a,l,d):Jp(i,o,a)}function Xp(i,o){return i.parentNode(o)}let t_,_i,ig,Oa=function bv(i,o,a){return 40&i.type?pi(i,a):null};function tg(i,o,a,l){const d=Rd(i,l,o),f=o[Bt],T=function hw(i,o,a){return Oa(i,o,a)}(l.parent||o[Gn],l,o);if(null!=d)if(Array.isArray(a))for(let S=0;S<a.length;S++)vs(f,d,a[S],T,!1);else vs(f,d,a,T,!1);void 0!==t_&&t_(f,l,o,a,d)}function ng(i,o){if(null!==o){const a=o.type;if(3&a)return pi(o,i);if(4&a)return Sv(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return ng(i,l);{const d=i[o.index];return Ln(d)?Sv(-1,d):Bn(d)}}if(32&a)return jn(o,i)()||Bn(i[o.index]);{const l=fw(i,o);return null!==l?Array.isArray(l)?l[0]:ng(ra(i[dr]),l):ng(i,o.next)}}return null}function fw(i,o){return null!==o?i[dr][Gn].projection[o.projection]:null}function Sv(i,o){const a=tr+i+1;if(a<o.length){const l=o[a],d=l[it].firstChild;if(null!==d)return ng(l,d)}return o[hs]}function Rv(i,o,a,l,d,f,y){for(;null!=a;){const T=l[a.index],S=a.type;if(y&&0===o&&(T&&Ai(Bn(T),l),a.flags|=2),32!=(32&a.flags))if(8&S)Rv(i,o,a.child,l,d,f,!1),E(o,i,d,T,f);else if(32&S){const O=jn(a,l);let V;for(;V=O();)E(o,i,d,V,f);E(o,i,d,T,f)}else 16&S?gw(i,o,l,a,d,f):E(o,i,d,T,f);a=y?a.projectionNext:a.next}}function rg(i,o,a,l,d,f){Rv(a,l,i.firstChild,o,d,f,!1)}function gw(i,o,a,l,d,f){const y=a[dr],S=y[Gn].projection[l.projection];if(Array.isArray(S))for(let O=0;O<S.length;O++)E(o,i,d,S[O],f);else{let O=S;const V=y[fn];Ad(l)&&(O.flags|=128),Rv(i,o,O,V,d,f,!0)}}function mw(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function _w(i,o,a){const{mergedAttrs:l,classes:d,styles:f}=a;null!==l&&ko(i,o,l),null!==d&&mw(i,o,d),null!==f&&function NA(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function Ew(i){_i=i}function Qn(i){return function or(){if(void 0===ig&&(ig=null,wn.trustedTypes))try{ig=wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return ig}()?.createScriptURL(i)||i}class xv{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${un})`}}function Ec(i){return i instanceof xv?i.changingThisBreaksApplicationSecurity:i}function ia(i,o){const a=function Jr(i){return i instanceof xv&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${un})`)}return a===o}const wu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Nd=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Nd||{});function h_(i){const o=uf();return o?o.sanitize(Nd.URL,i)||"":ia(i,"URL")?Ec(i):function xd(i){return(i=String(i)).match(wu)?i:"unsafe:"+i}(pe(i))}function _n(i){const o=uf();if(o)return Qn(o.sanitize(Nd.RESOURCE_URL,i)||"");if(ia(i,"ResourceURL"))return Qn(Ec(i));throw new Ie(904,!1)}function Vv(i,o,a){return function Fv(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?_n:h_}(o,a)(i)}function uf(){const i=ke();return i&&i[Br].sanitizer}const lf=new Tt("ENVIRONMENT_INITIALIZER"),bw=new Tt("INJECTOR",-1),Sw=new Tt("INJECTOR_DEF_TYPES");class Uv{get(o,a=qr){if(a===qr){const l=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw l.name="NullInjectorError",l}return a}}function UA(...i){return{\u0275providers:jv(0,i),\u0275fromNgModule:!0}}function jv(i,...o){const a=[],l=new Set;let d;const f=y=>{a.push(y)};return Ki(o,y=>{const T=y;f_(T,f,[],l)&&(d||=[],d.push(T))}),void 0!==d&&Rw(d,f),a}function Rw(i,o){for(let a=0;a<i.length;a++){const{ngModule:l,providers:d}=i[a];lg(d,f=>{o(f,l)})}}function f_(i,o,a,l){if(!(i=Be(i)))return!1;let d=null,f=rs(i);const y=!f&&an(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const S=i.ngModule;if(f=rs(S),!f)return!1;d=S}const T=l.has(d);if(y){if(T)return!1;if(l.add(d),y.dependencies){const S="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const O of S)f_(O,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let O;l.add(d);try{Ki(f.imports,V=>{f_(V,o,a,l)&&(O||=[],O.push(V))})}finally{}void 0!==O&&Rw(O,o)}if(!T){const O=Js(d)||(()=>new d);o({provide:d,useFactory:O,deps:dt},d),o({provide:Sw,useValue:d,multi:!0},d),o({provide:lf,useValue:()=>Et(d),multi:!0},d)}const S=f.providers;if(null!=S&&!T){const O=i;lg(S,V=>{o(V,O)})}}}return d!==i&&void 0!==i.providers}function lg(i,o){for(let a of i)ct(a)&&(a=a.\u0275providers),Array.isArray(a)?lg(a,o):o(a)}const Od=X({provide:String,useValue:X});function kd(i){return null!==i&&"object"==typeof i&&Od in i}function Cc(i){return"function"==typeof i}const ka=new Tt("Set Injector scope."),hg={},cf={};let p_;function df(){return void 0===p_&&(p_=new Uv),p_}class js{}class yi extends js{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,__(o,y=>this.processProvider(y)),this.records.set(bw,Ld(void 0,this)),d.has("environment")&&this.records.set(js,Ld(void 0,this));const f=this.records.get(ka);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Sw.multi,dt,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=je(this),l=Dn(void 0);try{return o()}finally{je(a),Dn(l)}}get(o,a=qr,l=Pt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(qa))return o[qa](this);l=Ht(l);const f=je(this),y=Dn(void 0);try{if(!(l&Pt.SkipSelf)){let S=this.records.get(o);if(void 0===S){const O=function xw(i){return"function"==typeof i||"object"==typeof i&&i instanceof Tt}(o)&&Rn(o);S=O&&this.injectableDefInScope(O)?Ld(g_(o),hg):null,this.records.set(o,S)}if(null!=S)return this.hydrate(o,S)}return(l&Pt.Self?df():this.parent).get(o,a=l&Pt.Optional&&a===qr?null:a)}catch(T){if("NullInjectorError"===T.name){if((T[ti]=T[ti]||[]).unshift(le(o)),f)throw T;return function Bi(i,o,a,l){const d=i[ti];throw o[H]&&d.unshift(o[H]),i.message=function Ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let T=o[y];f.push(y+":"+("string"==typeof T?JSON.stringify(T):le(T)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace($,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ti]=null,i}(T,o,"R3InjectorError",this.source)}throw T}finally{Dn(y),je(f)}}resolveInjectorInitializers(){const o=je(this),a=Dn(void 0);try{const d=this.get(lf.multi,dt,Pt.Self);for(const f of d)f()}finally{je(o),Dn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(le(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let a=Cc(o=Be(o))?o:Be(o&&o.provide);const l=function m_(i){return kd(i)?Ld(void 0,i.useValue):Ld(hf(i),hg)}(o);if(Cc(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ld(void 0,hg,!0),d.factory=()=>Vn(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===hg&&(a.value=cf,a.value=a.factory()),"object"==typeof a.value&&a.value&&function fg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Be(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function g_(i){const o=Rn(i),a=null!==o?o.factory:Js(i);if(null!==a)return a;if(i instanceof Tt)throw new Ie(204,!1);if(i instanceof Function)return function Hv(i){const o=i.length;if(o>0)throw function hc(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Ie(204,!1);const a=function vr(i){return i&&(i[Er]||i[lr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ie(204,!1)}function hf(i,o,a){let l;if(Cc(i)){const d=Be(i);return Js(d)||g_(d)}if(kd(i))l=()=>Be(i.useValue);else if(function dg(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Vn(i.deps||[]));else if(function cg(i){return!(!i||!i.useExisting)}(i))l=()=>Et(Be(i.useExisting));else{const d=Be(i&&(i.useClass||i.provide));if(!function ff(i){return!!i.deps}(i))return Js(d)||g_(d);l=()=>new d(...Vn(i.deps))}return l}function Ld(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function __(i,o){for(const a of i)Array.isArray(a)?__(a,o):a&&ct(a)?__(a.\u0275providers,o):o(a)}const Mw=new Tt("AppId",{providedIn:"root",factory:()=>Cl}),Cl="ng",Nw=new Tt("Platform Initializer"),ws=new Tt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ow=new Tt("CSP nonce",{providedIn:"root",factory:()=>function Ao(){if(void 0!==_i)return _i;if(typeof document<"u")return document;throw new Ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Vd=(i,o,a)=>null;function Ud(i,o,a=!1){return Vd(i,o,a)}class bl{}class Wv{}class Kv{resolveComponentFactory(o){throw function Bw(i){const o=Error(`No component factory found for ${le(i)}.`);return o.ngComponent=i,o}(o)}}let _f=(()=>{class i{static#e=this.NULL=new Kv}return i})();function Yv(){return Ac(si(),ke())}function Ac(i,o){return new _g(pi(i,o))}let _g=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=Yv}return i})();function GA(i){return i instanceof _g?i.nativeElement:i}class ai{}let Sn=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function jw(){const i=ke(),a=Yn(si().index,i);return(gr(a)?a:i)[Bt]}()}return i})(),Hw=(()=>{class i{static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>null})}return i})();class yg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Qv=new yg("16.2.12"),Jv={};function eE(i,o=null,a=null,l){const d=tE(i,o,a,l);return d.resolveInjectorInitializers(),d}function tE(i,o=null,a=null,l,d=new Set){const f=[a||dt,UA(i)];return l=l||("object"==typeof i?void 0:le(i)),new yi(f,o||df(),l||null,d)}let Fa=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=qr;static#t=this.NULL=new Uv;static create(a,l){if(Array.isArray(a))return eE({name:""},l,a,"");{const d=a.name??"";return eE({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=Ut({token:i,providedIn:"any",factory:()=>Et(bw)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function nE(i){return i.ngOriginalError}class Du{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&nE(o);for(;a&&nE(a);)a=nE(a);return a||null}}function Ig(i){return o=>{setTimeout(i,void 0,o)}}const Va=class ui extends D.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const S=o;d=S.next?.bind(S),f=S.error?.bind(S),y=S.complete?.bind(S)}this.__isAsync&&(f=Ig(f),d&&(d=Ig(d)),y&&(y=Ig(y)));const T=super.subscribe({next:d,error:f,complete:y});return o instanceof p.w0&&o.add(T),T}};function vf(...i){}class Si{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Va(!1),this.onMicrotaskEmpty=new Va(!1),this.onStable=new Va(!1),this.onError=new Va(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Au(){const i="function"==typeof wn.requestAnimationFrame;let o=wn[i?"requestAnimationFrame":"setTimeout"],a=wn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Kw(i){const o=()=>{!function Zw(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(wn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,rE(i),i.isCheckStableRunning=!0,P_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),rE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,T)=>{if(function oE(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(T))return a.invokeTask(d,f,y,T);try{return Yw(i),a.invokeTask(d,f,y,T)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),Ef(i)}},onInvoke:(a,l,d,f,y,T,S)=>{try{return Yw(i),a.invoke(d,f,y,T,S)}finally{i.shouldCoalesceRunChangeDetection&&o(),Ef(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,rE(i),P_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Si.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Si.isInAngularZone())throw new Ie(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,wg,vf,vf);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const wg={};function P_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function rE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Yw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Ef(i){i._nesting--,P_(i)}class iE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Va,this.onMicrotaskEmpty=new Va,this.onStable=new Va,this.onError=new Va}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Qw=new Tt("",{providedIn:"root",factory:sE});function sE(){const i=Mt(Si);let o=!0;const a=new K.y(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new K.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Si.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Si.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ie.T)(a,l.pipe((0,Ee.B)()))}function Sl(i){return i instanceof Function?i():i}let x_=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function bo(i){for(;i;){i[jt]|=64;const o=ra(i);if(ql(i)&&!o)return i;i=o}return null}const lE=new Tt("",{providedIn:"root",factory:()=>!1});let Cg=null;function Dg(i,o){return i[o]??hE()}function Df(i,o){const a=hE();a.producerNode?.length&&(i[o]=Cg,a.lView=i,Cg=rT())}const $d={...nu,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{bo(i.lView)},lView:null};function rT(){return Object.create($d)}function hE(){return Cg??=rT(),Cg}const on={};function iT(i){sT(Ot(),ke(),Jt()+i,!1)}function sT(i,o,a,l){if(!l)if(3==(3&o[jt])){const f=i.preOrderCheckHooks;null!==f&&cl(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Jo(o,f,0,a)}kt(a)}function bu(i,o=Pt.Default){const a=ke();return null===a?Et(i,o):qm(si(),a,Be(i),o)}function Rc(){throw new Error("invalid")}function Ag(i,o,a,l,d,f,y,T,S,O,V){const Z=o.blueprint.slice();return Z[$n]=d,Z[jt]=140|l,(null!==O||i&&2048&i[jt])&&(Z[jt]|=2048),nl(Z),Z[fn]=Z[us]=i,Z[kn]=a,Z[Br]=y||i&&i[Br],Z[Bt]=T||i&&i[Bt],Z[as]=S||i&&i[as]||null,Z[Gn]=f,Z[ks]=function we(){return nt++}(),Z[ds]=V,Z[Ls]=O,Z[dr]=2==o.type?i[dr]:Z,Z}function Gd(i,o,a,l,d){let f=i.data[o];if(null===f)f=function N_(i,o,a,l,d){const f=Tp(),y=Qo(),S=i.data[o]=function xg(i,o,a,l,d,f){let y=o?o.injectorIndex:-1,T=0;return function Ca(){return null!==Vt.skipHydrationRootTNode}()&&(T|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=S),null!==f&&(y?null==f.child&&null!==S.parent&&(f.child=S):null===f.next&&(f.next=S,S.prev=f)),S}(i,o,a,l,d),function hd(){return Vt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Yo(){const i=Vt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Us(f,!0),f}function bg(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function O_(i,o,a,l,d){const f=Dg(o,jr),y=Jt(),T=2&l;try{kt(-1),T&&o.length>Zt&&sT(i,o,Zt,!1),xr(T?2:0,d);const O=T?f:null,V=Ia(O);try{null!==O&&(O.dirty=!1),a(l,d)}finally{Qu(O,V)}}finally{T&&null===o[jr]&&Df(o,jr),kt(y),xr(T?3:1,d)}}function Sg(i,o,a){if(_a(o)){const l=Cr(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const T=i.data[y];T.contentQueries&&T.contentQueries(1,a[y],y)}}finally{Cr(l)}}}function k_(i,o,a){wh()&&(function XA(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;Pi(a)&&function nb(i,o,a){const l=pi(o,i),d=L_(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const T=Nc(i,Ag(i,d,null,y,l,o,null,i[Br].rendererFactory.createRenderer(l,a),null,null,null));i[o.index]=T}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||pu(a,o),Ai(l,o);const y=a.initialInputs;for(let T=d;T<f;T++){const S=i.data[T],O=To(o,i,T,a);Ai(O,o),null!==y&&rb(0,T-d,O,S,0,y),zi(S)&&(Yn(a.index,o)[kn]=To(o,i,T,a))}}(i,o,a,pi(a,o)),64==(64&a.flags)&&Zd(i,o,a))}function Rg(i,o,a=pi){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],T=-1===y?a(o,i):i[y];i[d++]=T}}}function L_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=F_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function F_(i,o,a,l,d,f,y,T,S,O,V){const Z=Zt+l,re=Z+d,de=function V_(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:on);return a}(Z,re),Le="function"==typeof O?O():O;return de[it]={type:i,blueprint:de,template:a,queries:null,viewQuery:T,declTNode:o,data:de.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:S,consts:Le,incompleteFirstPass:!1,ssrId:V}}let Pg=i=>null;function zd(i,o,a,l){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===l?pE(a,o,d,f):l.hasOwnProperty(d)&&pE(a,o,l[d],f)}return a}function pE(i,o,a,l){i.hasOwnProperty(a)?i[a].push(o,l):i[a]=[o,l]}function lo(i,o,a,l,d,f,y,T){const S=pi(o,a);let V,O=o.inputs;!T&&null!=O&&(V=O[l])?(Mg(i,a,V,l,d),Pi(o)&&function U_(i,o){const a=Yn(o,i);16&a[jt]||(a[jt]|=64)}(a,o.index)):3&o.type&&(l=function Ts(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,o.value||"",l):d,f.setProperty(S,l,d))}function Su(i,o,a,l){if(wh()){const d=null===l?null:{"":-1},f=function xc(i,o){const a=i.directiveRegistry;let l=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(wr(o,y.selectors,!1))if(l||(l=[]),zi(y))if(null!==y.findHostDirectiveDefs){const T=[];d=d||new Map,y.findHostDirectiveDefs(y,T,d),l.unshift(...T,y),j_(i,o,T.length)}else l.unshift(y),j_(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(i,a);let y,T;null===f?y=T=null:[y,T]=f,null!==y&&qd(i,o,a,y,d,T),d&&function eb(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ie(-301,!1);l.push(o[d],f)}}}(a,l,d)}a.mergedAttrs=pa(a.mergedAttrs,a.attrs)}function qd(i,o,a,l,d,f){for(let O=0;O<l.length;O++)Nh(pu(a,o),i,l[O].type);!function tb(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let O=0;O<l.length;O++){const V=l[O];V.providersResolver&&V.providersResolver(V)}let y=!1,T=!1,S=bg(i,o,l.length,null);for(let O=0;O<l.length;O++){const V=l[O];a.mergedAttrs=pa(a.mergedAttrs,V.hostAttrs),dT(i,a,o,S,V),cT(S,V,d),null!==V.contentQueries&&(a.flags|=4),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(a.flags|=64);const Z=V.type.prototype;!y&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!T&&(Z.ngOnChanges||Z.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),T=!0),S++}!function aT(i,o,a){const d=o.directiveEnd,f=i.data,y=o.attrs,T=[];let S=null,O=null;for(let V=o.directiveStart;V<d;V++){const Z=f[V],re=a?a.get(Z):null,Le=re?re.outputs:null;S=zd(Z.inputs,V,S,re?re.inputs:null),O=zd(Z.outputs,V,O,Le);const Ye=null===S||null===y||Fo(o)?null:ib(S,V,y);T.push(Ye)}null!==S&&(S.hasOwnProperty("class")&&(o.flags|=8),S.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=T,o.inputs=S,o.outputs=O}(i,a,f)}function Zd(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Jl(){return Vt.lFrame.currentDirectiveIndex}();try{kt(f);for(let T=l;T<d;T++){const S=i.data[T],O=o[T];fd(T),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&lT(S,O)}}finally{kt(-1),fd(y)}}function lT(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function j_(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function cT(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;zi(o)&&(a[""]=i)}}function dT(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Js(d.type)),y=new tc(f,zi(d),bu);i.blueprint[l]=y,a[l]=y,function uT(i,o,a,l,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const T=~o.index;(function Wd(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=T&&y.push(T),y.push(a,l,f)}}(i,o,l,bg(i,a,d.hostVars,on),d)}function So(i,o,a,l,d,f){const y=pi(i,o);!function H_(i,o,a,l,d,f,y){if(null==f)i.removeAttribute(o,d,a);else{const T=null==y?pe(f):y(f,l||"",d);i.setAttribute(o,d,T,a)}}(o[Bt],y,f,i.value,a,l,d)}function rb(i,o,a,l,d,f){const y=f[o];if(null!==y)for(let T=0;T<y.length;)gE(l,a,y[T++],y[T++],y[T++])}function gE(i,o,a,l,d){const f=Cr(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(d=y[l].call(o,d)),null!==i.setInput?i.setInput(o,d,a,l):o[l]=d}finally{Cr(f)}}function ib(i,o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===l&&(l=[]);const y=i[f];for(let T=0;T<y.length;T+=2)if(y[T]===o){l.push(f,y[T+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function mE(i,o,a,l){return[i,!0,!1,o,null,0,l,a,null,null,null]}function Mc(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const f=a[l+1];if(-1!==f){const y=i.data[f];w(a[l]),y.contentQueries(2,o[f],f)}}}function Nc(i,o){return i[Zs]?i[Qa][Kr]=o:i[Zs]=o,i[Qa]=o,o}function $_(i,o,a){w(0);const l=Cr(null);try{o(i,a)}finally{Cr(l)}}function hT(i){return i[Yr]||(i[Yr]=[])}function _E(i){return i.cleanup||(i.cleanup=[])}function pT(i,o){const a=i[as],l=a?a.get(Du,null):null;l&&l.handleError(o)}function Mg(i,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],T=a[f++];gE(i.data[y],o[y],l,T,d)}}function ob(i,o){const a=Yn(o,i),l=a[it];!function ab(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(l,a);const d=a[$n];null!==d&&null===a[ds]&&(a[ds]=Ud(d,a[as])),yE(l,a,a[kn])}function yE(i,o,a){R(o);try{const l=i.viewQuery;null!==l&&$_(1,l,a);const d=i.template;null!==d&&O_(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Mc(i,o),i.staticViewQueries&&$_(2,i.viewQuery,a);const f=i.components;null!==f&&function ub(i,o){for(let a=0;a<o.length;a++)ob(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[jt]&=-5,me()}}let G_=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,l,d){const f=typeof Zone>"u"?null:Zone.current,y=function Se(i,o,a){const l=Object.create(rn);a&&(l.consumerAllowSignalWrites=!0),l.fn=i,l.schedule=o;const d=y=>{l.cleanupFn=y};return l.ref={notify:()=>zo(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Ju(l))return;l.hasRun=!0;const y=Ia(l);try{l.cleanupFn(),l.cleanupFn=It,l.fn(d)}finally{Qu(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(a,O=>{this.all.has(O)&&this.queue.set(O,f)},d);let T;this.all.add(y),y.notify();const S=()=>{y.cleanup(),T?.(),this.all.delete(y),this.queue.delete(y)};return T=l?.onDestroy(S),{destroy:S}}flush(){if(0!==this.queue.size)for(const[a,l]of this.queue)this.queue.delete(a),l?l.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function Kd(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const T=o[y];"number"==typeof T?f=T:1==f?d=Pe(d,T):2==f&&(l=Pe(l,T+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function Oc(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];null!==f&&l.push(Bn(f)),Ln(f)&&gT(f,l);const y=a.type;if(8&y)Oc(i,o,a.child,l);else if(32&y){const T=jn(a,o);let S;for(;S=T();)l.push(S)}else if(16&y){const T=fw(o,a);if(Array.isArray(T))l.push(...T);else{const S=ra(o[dr]);Oc(S[it],S,T,l,!0)}}a=d?a.projectionNext:a.next}return l}function gT(i,o){for(let a=tr;a<i.length;a++){const l=i[a],d=l[it].firstChild;null!==d&&Oc(l[it],l,d,o)}i[hs]!==i[$n]&&o.push(i[hs])}function Ng(i,o,a,l=!0){const d=o[Br],f=d.rendererFactory,y=d.afterRenderEventManager;f.begin?.(),y?.begin();try{bf(i,o,i.template,a)}catch(S){throw l&&pT(o,S),S}finally{f.end?.(),d.effectManager?.flush(),y?.end()}}function bf(i,o,a,l){const d=o[jt];if(256!=(256&d)){o[Br].effectManager?.flush(),R(o);try{nl(o),function Ql(i){return Vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&O_(i,o,a,2,l);const y=3==(3&d);if(y){const O=i.preOrderCheckHooks;null!==O&&cl(o,O,null)}else{const O=i.preOrderHooks;null!==O&&Jo(o,O,0,null),cu(o,0)}if(function EE(i){for(let o=v(i);null!==o;o=h(o)){if(!o[Fs])continue;const a=o[Qs];for(let l=0;l<a.length;l++){rl(a[l])}}}(o),Og(o,2),null!==i.contentQueries&&Mc(i,o),y){const O=i.contentCheckHooks;null!==O&&cl(o,O)}else{const O=i.contentHooks;null!==O&&Jo(o,O,1),cu(o,1)}!function Pc(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const l=Dg(o,Ja);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)kt(~f);else{const y=f,T=a[++d],S=a[++d];ul(T,y),l.dirty=!1;const O=Ia(l);try{S(2,o[y])}finally{Qu(l,O)}}}}finally{null===o[Ja]&&Df(o,Ja),kt(-1)}}(i,o);const T=i.components;null!==T&&wE(o,T,0);const S=i.viewQuery;if(null!==S&&$_(2,S,l),y){const O=i.viewCheckHooks;null!==O&&cl(o,O)}else{const O=i.viewHooks;null!==O&&Jo(o,O,2),cu(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[jt]&=-73,Ih(o)}finally{me()}}}function Og(i,o){for(let a=v(i);null!==a;a=h(a))for(let l=tr;l<a.length;l++)_T(a[l],o)}function IE(i,o,a){_T(Yn(o,i),a)}function _T(i,o){if(!function Yl(i){return 128==(128&i[jt])}(i))return;const a=i[it],l=i[jt];if(80&l&&0===o||1024&l||2===o)bf(a,i,a.template,i[kn]);else if(i[Ho]>0){Og(i,1);const d=a.components;null!==d&&wE(i,d,1)}}function wE(i,o,a){for(let l=0;l<o.length;l++)IE(i,o[l],a)}class kg{get rootNodes(){const o=this._lView,a=o[it];return Oc(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(o){this._lView[kn]=o}get destroyed(){return 256==(256&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[fn];if(Ln(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Sd(o,l),jh(a,l))}this._attachedToViewContainer=!1}xa(this._lView[it],this._lView)}onDestroy(o){!function il(i,o){if(256==(256&i[jt]))throw new Ie(911,!1);null===i[cs]&&(i[cs]=[]),i[cs].push(o)}(this._lView,o)}markForCheck(){bo(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-129}reattach(){this._lView[jt]|=128}detectChanges(){Ng(this._lView[it],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ft(i,o){rg(i,o,o[Bt],2,null,null)}(this._lView[it],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class yT extends kg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ng(o[it],o,o[kn],!1)}checkNoChanges(){}get context(){return null}}class TE extends _f{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=an(o);return new Lg(a,this.ngModule)}}function z_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class vT{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=Ht(l);const d=this.injector.get(o,Jv,l);return d!==Jv||a===Jv?d:this.parentInjector.get(o,a,l)}}class Lg extends Wv{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=z_(o.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return z_(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function $i(i){return i.map($u).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof js?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new vT(o,f):o,T=y.get(ai,null);if(null===T)throw new Ie(407,!1);const Z={rendererFactory:T,sanitizer:y.get(Hw,null),effectManager:y.get(G_,null),afterRenderEventManager:y.get(x_,null)},re=T.createRenderer(null,this.componentDef),de=this.componentDef.selectors[0][0]||"div",Le=l?function YA(i,o,a,l){const f=l.get(lE,!1)||a===pt.ShadowDom,y=i.selectRootElement(o,f);return function fE(i){Pg(i)}(y),y}(re,l,this.componentDef.encapsulation,y):ce(re,de,function cb(i){const o=i.toLowerCase();return"svg"===o?Wi:"math"===o?"math":null}(de)),Nt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ze=null;null!==Le&&(Ze=Ud(Le,y,!0));const Yt=F_(0,null,null,1,0,null,null,null,null,null,null),pn=Ag(null,Yt,null,Nt,null,null,Z,re,y,null,Ze);let Xn,No;R(pn);try{const Vl=this.componentDef;let up,x0=null;Vl.findHostDirectiveDefs?(up=[],x0=new Map,Vl.findHostDirectiveDefs(Vl,up,x0),up.push(Vl)):up=[Vl];const LR=function db(i,o){const a=i[it],l=Zt;return i[l]=o,Gd(a,l,2,"#host",null)}(pn,Le),FR=function Sf(i,o,a,l,d,f,y){const T=d[it];!function Rf(i,o,a,l){for(const d of i)o.mergedAttrs=pa(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Kd(o,o.mergedAttrs,!0),null!==a&&_w(l,a,o))}(l,i,o,y);let S=null;null!==o&&(S=Ud(o,d[as]));const O=f.rendererFactory.createRenderer(o,a);let V=16;a.signals?V=4096:a.onPush&&(V=64);const Z=Ag(d,L_(a),null,V,d[i.index],i,f,O,null,null,S);return T.firstCreatePass&&j_(T,i,l.length-1),Nc(d,Z),d[i.index]=Z}(LR,Le,Vl,up,pn,Z,re);No=Kl(Yt,Zt),Le&&function q_(i,o,a,l){if(l)ko(i,a,["ng-version",Qv.full]);else{const{attrs:d,classes:f}=function hh(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!ri(d))break;d=f}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&ko(i,a,d),f&&f.length>0&&mw(i,a,f.join(" "))}}(re,Vl,Le,l),void 0!==a&&function IT(i,o,a){const l=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];l.push(null!=f?Array.from(f):null)}}(No,this.ngContentSelectors,a),Xn=function CE(i,o,a,l,d,f){const y=si(),T=d[it],S=pi(y,d);qd(T,d,y,a,null,l);for(let V=0;V<a.length;V++)Ai(To(d,T,y.directiveStart+V,y),d);Zd(T,d,y),S&&Ai(S,d);const O=To(d,T,y.directiveStart+y.componentOffset,y);if(i[kn]=d[kn]=O,null!==f)for(const V of f)V(O,o);return Sg(T,y,i),O}(FR,Vl,up,x0,pn,[wT]),yE(Yt,pn,null)}finally{me()}return new ET(this.componentType,Xn,Ac(No,pn),pn,No)}}class ET extends bl{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new yT(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;Mg(f[it],f,d,o,a),this.previousInputValues.set(o,a),bo(Yn(this._tNode.index,f))}}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function wT(){const i=si();lu(ke()[it],i)}function AE(i){let o=function DE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(zi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=W_(i.inputs),y.inputTransforms=W_(i.inputTransforms),y.declaredInputs=W_(i.declaredInputs),y.outputs=W_(i.outputs);const T=d.hostBindings;T&&CT(i,T);const S=d.viewQuery,O=d.contentQueries;if(S&&SE(i,S),O&&TT(i,O),ne(i.inputs,d.inputs),ne(i.declaredInputs,d.declaredInputs),ne(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ne(y.inputTransforms,d.inputTransforms)),zi(d)&&d.data.animation){const V=i.data;V.animation=(V.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const T=f[y];T&&T.ngInherit&&T(i),T===AE&&(a=!1)}}o=Object.getPrototypeOf(o)}!function bE(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=pa(d.hostAttrs,a=pa(a,d.hostAttrs))}}(l)}function W_(i){return i===bt?{}:i===dt?[]:i}function SE(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function TT(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function CT(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function xE(i){const o=i.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(a[l]=d[2])}i.inputTransforms=a}function Pf(i){return!!Vi(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Vi(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ua(i,o,a){return i[o]=a}function vi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function NE(i,o,a,l){const d=ke();return vi(d,no(),o)&&(Ot(),So(Tn(),d,i,o,a,l)),NE}function Mf(i,o,a,l){return vi(i,no(),a)?o+pe(a)+l:on}function iy(i,o,a,l,d,f,y,T){const S=ke(),O=Ot(),V=i+Zt,Z=O.firstCreatePass?function $E(i,o,a,l,d,f,y,T,S){const O=o.consts,V=Gd(o,i,4,y||null,wo(O,T));Su(o,a,V,wo(O,S)),lu(o,V);const Z=V.tView=F_(2,V,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,O,null);return null!==o.queries&&(o.queries.template(o,V),Z.queries=o.queries.embeddedTView(V)),V}(V,O,S,o,a,l,d,f,y):O.data[V];Us(Z,!1);const re=sy(O,S,Z,i);uu()&&tg(O,S,re,Z),Ai(re,S),Nc(S,S[V]=mE(re,S,re,Z)),fi(Z)&&k_(O,S,Z),null!=y&&Rg(S,Z,T)}let sy=function oy(i,o,a,l){return oo(!0),o[Bt].createComment("")};function ay(i){return eo(function Cp(){return Vt.lFrame.contextLView}(),Zt+i)}function zE(i,o,a){const l=ke();return vi(l,no(),o)&&lo(Ot(),Tn(),l,i,o,l[Bt],a,!1),zE}function uy(i,o,a,l,d){const y=d?"class":"style";Mg(i,a,o.inputs[y],y,l)}function Gg(i,o,a,l){const d=ke(),f=Ot(),y=Zt+i,T=d[Bt],S=f.firstCreatePass?function wb(i,o,a,l,d,f){const y=o.consts,S=Gd(o,i,2,l,wo(y,d));return Su(o,a,S,wo(y,f)),null!==S.attrs&&Kd(S,S.attrs,!1),null!==S.mergedAttrs&&Kd(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,f,d,o,a,l):f.data[y],O=qE(f,d,S,T,o,i);d[y]=O;const V=fi(S);return Us(S,!0),_w(T,O,S),32!=(32&S.flags)&&uu()&&tg(f,d,O,S),0===function Zi(){return Vt.lFrame.elementDepthCount}()&&Ai(O,d),function $m(){Vt.lFrame.elementDepthCount++}(),V&&(k_(f,d,S),Sg(f,S,d)),null!==l&&Rg(d,S),Gg}function zg(){let i=si();Qo()?function ou(){Vt.lFrame.isParent=!1}():(i=i.parent,Us(i,!1));const o=i;(function Da(i){return Vt.skipHydrationRootTNode===i})(o)&&function ol(){Vt.skipHydrationRootTNode=null}(),function Ko(){Vt.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(lu(a,i),_a(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Sh(i){return 0!=(8&i.flags)}(o)&&uy(a,o,ke(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Rh(i){return 0!=(16&i.flags)}(o)&&uy(a,o,ke(),o.stylesWithoutHost,!1),zg}function ly(i,o,a,l){return Gg(i,o,a,l),zg(),ly}let qE=(i,o,a,l,d,f)=>(oo(!0),ce(l,d,function gd(){return Vt.lFrame.currentNamespace}()));function kT(){return ke()}function Wg(i){return!!i&&"function"==typeof i.then}function KE(i){return!!i&&"function"==typeof i.subscribe}function Zg(i,o,a,l){const d=ke(),f=Ot(),y=si();return function hy(i,o,a,l,d,f,y){const T=fi(l),O=i.firstCreatePass&&_E(i),V=o[kn],Z=hT(o);let re=!0;if(3&l.type||y){const Ye=pi(l,o),ut=y?y(Ye):Ye,Nt=Z.length,Ze=y?pn=>y(Bn(pn[l.index])):l.index;let Yt=null;if(!y&&T&&(Yt=function bb(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const T=o[Yr],S=d[f+2];return T.length>S?T[S]:null}"string"==typeof y&&(f+=2)}return null}(i,o,d,l.index)),null!==Yt)(Yt.__ngLastListenerFn__||Yt).__ngNextListenerFn__=f,Yt.__ngLastListenerFn__=f,re=!1;else{f=fy(l,o,V,f,!1);const pn=a.listen(ut,d,f);Z.push(f,pn),O&&O.push(d,Ze,Nt,Nt+1)}}else f=fy(l,o,V,f,!1);const de=l.outputs;let Le;if(re&&null!==de&&(Le=de[d])){const Ye=Le.length;if(Ye)for(let ut=0;ut<Ye;ut+=2){const Xn=o[Le[ut]][Le[ut+1]].subscribe(f),No=Z.length;Z.push(f,Xn),O&&O.push(d,l.index,No,-(No+1))}}}(f,d,d[Bt],y,i,o,l),Zg}function LT(i,o,a,l){try{return xr(6,o,a),!1!==a(l)}catch(d){return pT(i,d),!1}finally{xr(7,o,a)}}function fy(i,o,a,l,d){return function f(y){if(y===Function)return l;bo(i.componentOffset>-1?Yn(i.index,o):o);let S=LT(o,a,l,y),O=f.__ngNextListenerFn__;for(;O;)S=LT(o,a,O,y)&&S,O=O.__ngNextListenerFn__;return d&&!1===S&&y.preventDefault(),S}}function FT(i=1){return function at(i){return(Vt.lFrame.contextLView=function $t(i,o){for(;i>0;)o=o[us],i--;return o}(i,Vt.lFrame.contextLView))[kn]}(i)}function Kg(i,o,a){return Yg(i,"",o,"",a),Kg}function Yg(i,o,a,l,d){const f=ke(),y=Mf(f,o,a,l);return y!==on&&lo(Ot(),Tn(),f,i,y,f[Bt],d,!1),Yg}function jf(i,o){return i<<17|o<<2}function Uc(i){return i>>17&32767}function tI(i){return 2|i}function Ml(i){return(131068&i)>>2}function nI(i,o){return-131069&i|o<<2}function iI(i){return 1|i}function HT(i,o,a,l,d){const f=i[a+1],y=null===o;let T=l?Uc(f):Ml(f),S=!1;for(;0!==T&&(!1===S||y);){const V=i[T+1];xb(i[T],o)&&(S=!0,i[T+1]=l?iI(V):tI(V)),T=l?Uc(V):Ml(V)}S&&(i[a+1]=l?tI(f):iI(f))}function xb(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ta(i,o)>=0}function lI(i,o){return function aa(i,o,a,l){const d=ke(),f=Ot(),y=function gs(i){const o=Vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function Qg(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[Jt()],y=function vy(i,o){return o>=i.expandoStartIndex}(i,a);(function JT(i,o){return 0!=(i.flags&(o?8:16))})(f,l)&&null===o&&!y&&(o=!1),o=function hI(i,o,a,l){const d=function pd(i){const o=Vt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=zf(a=Jg(null,i,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=Jg(d,i,o,a,l),null===f){let S=function ZT(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ml(l))return i[Uc(l)]}(i,o,l);void 0!==S&&Array.isArray(S)&&(S=Jg(null,i,o,S[1],l),S=zf(S,o.attrs,l),function Gf(i,o,a,l){i[Uc(a?o.classBindings:o.styleBindings)]=l}(i,o,l,S))}else f=function KT(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=zf(l,i[f].hostAttrs,a);return zf(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function sI(i,o,a,l,d,f){let y=f?o.classBindings:o.styleBindings,T=Uc(y),S=Ml(y);i[l]=a;let V,O=!1;if(Array.isArray(a)?(V=a[1],(null===V||ta(a,V)>0)&&(O=!0)):V=a,d)if(0!==S){const re=Uc(i[T+1]);i[l+1]=jf(re,T),0!==re&&(i[re+1]=nI(i[re+1],l)),i[T+1]=function eI(i,o){return 131071&i|o<<17}(i[T+1],l)}else i[l+1]=jf(T,0),0!==T&&(i[T+1]=nI(i[T+1],l)),T=l;else i[l+1]=jf(S,0),0===T?T=l:i[S+1]=nI(i[S+1],l),S=l;O&&(i[l+1]=tI(i[l+1])),HT(i,V,l,!0),HT(i,V,l,!1),function jT(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ta(f,o)>=0&&(a[l+1]=iI(a[l+1]))}(o,V,i,l,f),y=jf(T,S),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,l)}}(f,i,y,l),o!==on&&vi(d,y,o)&&function YT(i,o,a,l,d,f,y,T){if(!(3&o.type))return;const S=i.data,O=S[T+1],V=function rI(i){return 1==(1&i)}(O)?fI(S,o,a,d,Ml(O),y):void 0;Iy(V)||(Iy(f)||function Rb(i){return 2==(2&i)}(O)&&(f=fI(S,null,a,d,T,y)),function MA(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:sr.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=sr.Important),i.setStyle(a,l,d,f))}}(l,y,el(Jt(),a),d,f))}(f,f.data[Jt()],d,d[Bt],i,d[y+1]=function QT(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=le(Ec(i)))),i}(o,a),l,y)}(i,o,null,!0),lI}function Jg(i,o,a,l,d){let f=null;const y=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<y&&(f=o[T],l=zf(l,f.hostAttrs,d),f!==i);)T++;return null!==i&&(a.directiveStylingLast=T),l}function zf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),gi(i,y,!!a||o[++f]))}return void 0===i?null:i}function fI(i,o,a,l,d,f){const y=null===o;let T;for(;d>0;){const S=i[d],O=Array.isArray(S),V=O?S[1]:S,Z=null===V;let re=a[d+1];re===on&&(re=Z?dt:void 0);let de=Z?$h(re,l):V===l?re:void 0;if(O&&!Iy(de)&&(de=$h(S,l)),Iy(de)&&(T=de,y))return T;const Le=i[d+1];d=y?Uc(Le):Ml(Le)}if(null!==o){let S=f?o.residualClasses:o.residualStyles;null!=S&&(T=$h(S,l))}return T}function Iy(i){return void 0!==i}function XT(i,o=""){const a=ke(),l=Ot(),d=i+Zt,f=l.firstCreatePass?Gd(l,d,1,o,null):l.data[d],y=eC(l,a,f,o,i);a[d]=y,uu()&&tg(l,a,y,f),Us(f,!1)}let eC=(i,o,a,l,d)=>(oo(!0),function M(i,o){return i.createText(o)}(o[Bt],l));function pI(i){return Xg("",i,""),pI}function Xg(i,o,a){const l=ke(),d=Mf(l,i,o,a);return d!==on&&function mr(i,o,a){const l=el(o,i);!function U(i,o,a){i.setValue(o,a)}(i[Bt],l,a)}(l,Jt(),d),Xg}const Jd=void 0;var nm=["en",[["a","p"],["AM","PM"],Jd],[["AM","PM"],Jd,Jd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jd,"{1} 'at' {0}",Jd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Wf={};function Ha(i){const o=function hC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=rm(o);if(a)return a;const l=o.split("-")[0];if(a=rm(l),a)return a;if("en"===l)return nm;throw new Ie(701,!1)}function Hc(i){return Ha(i)[Zf.PluralCase]}function rm(i){return i in Wf||(Wf[i]=wn.ng&&wn.ng.common&&wn.ng.common.locales&&wn.ng.common.locales[i]),Wf[i]}var Zf=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Zf||{});const Kf="en-US";let gC=Kf;function PC(i,o,a,l,d){if(i=Be(i),Array.isArray(i))for(let f=0;f<i.length;f++)PC(i[f],o,a,l,d);else{const f=Ot(),y=ke(),T=si();let S=Cc(i)?i:Be(i.provide);const O=hf(i),V=1048575&T.providerIndexes,Z=T.directiveStart,re=T.providerIndexes>>20;if(Cc(i)||!i.multi){const de=new tc(O,d,bu),Le=Ou(S,o,d?V:V+re,Z);-1===Le?(Nh(pu(T,y),f,S),kI(f,i,o.length),o.push(S),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(de),y.push(de)):(a[Le]=de,y[Le]=de)}else{const de=Ou(S,o,V+re,Z),Le=Ou(S,o,V,V+re),ut=Le>=0&&a[Le];if(d&&!ut||!d&&!(de>=0&&a[de])){Nh(pu(T,y),f,S);const Nt=function hS(i,o,a,l,d){const f=new tc(i,a,bu);return f.multi=[],f.index=o,f.componentProviders=0,LI(f,d,l&&!a),f}(d?dS:cS,a.length,d,l,O);!d&&ut&&(a[Le].providerFactory=Nt),kI(f,i,o.length,0),o.push(S),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Nt),y.push(Nt)}else kI(f,i,de>-1?de:Le,LI(a[d?Le:de],O,!d&&l));!d&&l&&ut&&a[Le].componentProviders++}}}function kI(i,o,a,l){const d=Cc(o),f=function Pw(i){return!!i.useClass}(o);if(d||f){const S=(f?Be(o.useClass):o).prototype.ngOnDestroy;if(S){const O=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const V=O.indexOf(a);-1===V?O.push(a,[l,S]):O[V+1].push(l,S)}else O.push(a,S)}}}function LI(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ou(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function cS(i,o,a,l){return FI(this.multi,[])}function dS(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,T=To(a,a[it],this.providerFactory.index,l);f=T.slice(0,y),FI(d,f);for(let S=y;S<T.length;S++)f.push(T[S])}else f=[],FI(d,f);return f}function FI(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function xC(i,o=[]){return a=>{a.providersResolver=(l,d)=>function lS(i,o,a){const l=Ot();if(l.firstCreatePass){const d=zi(i);PC(a,l.data,l.blueprint,d,!0),PC(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class ih{}class MC{}function gx(i,o){return new Ny(i,o??null,[])}class Ny extends ih{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new TE(this);const d=Ur(o);this._bootstrapComponents=Sl(d.bootstrap),this._r3Injector=tE(o,a,[{provide:ih,useValue:this},{provide:_f,useValue:this.componentFactoryResolver},...l],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class VI extends MC{constructor(o){super(),this.moduleType=o}create(o){return new Ny(this.moduleType,o,[])}}class fS extends ih{constructor(o){super(),this.componentFactoryResolver=new TE(this),this.instance=null;const a=new yi([...o.providers,{provide:ih,useValue:this},{provide:_f,useValue:this.componentFactoryResolver}],o.parent||df(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function pS(i,o,a=null){return new fS({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let _x=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=jv(0,a.type),d=l.length>0?pS([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ut({token:i,providedIn:"environment",factory:()=>new i(Et(js))})}return i})();function UI(i){i.getStandaloneInjector=o=>o.get(_x).getOrCreateStandaloneInjector(i)}function Cs(i,o){const a=i[o];return a===on?void 0:a}function FC(i,o,a,l,d,f,y){const T=o+a;return function Rl(i,o,a,l){const d=vi(i,o,a);return vi(i,o+1,l)||d}(i,T,d,f)?Ua(i,T+2,y?l.call(y,d,f):l(d,f)):Cs(i,T+2)}function jC(i,o){const a=Ot();let l;const d=i+Zt;a.firstCreatePass?(l=function wx(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks??=[]).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=Js(l.type)),T=Dn(bu);try{const S=xh(!1),O=f();return xh(S),function GE(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,ke(),d,O),O}finally{Dn(T)}}function fm(i,o,a){const l=i+Zt,d=ke(),f=eo(d,l);return qc(d,l)?function CS(i,o,a,l,d,f){const y=o+a;return vi(i,y,d)?Ua(i,y+1,f?l.call(f,d):l(d)):Cs(i,y+1)}(d,Hr(),o,f.transform,a,f):f.transform(a)}function Xf(i,o,a,l){const d=i+Zt,f=ke(),y=eo(f,d);return qc(f,d)?FC(f,Hr(),o,y.transform,a,l,y):y.transform(a,l)}function qc(i,o){return i[it].data[o].pure}function AS(){return this._results[Symbol.iterator]()}class Wc{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Va)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wc.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=AS)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function ms(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Bh(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ly(i,o,a,l=!0){const d=o[it];if(function ae(i,o,a,l){const d=tr+l,f=a.length;l>0&&(a[d-1][Kr]=o),l<f-tr?(o[Kr]=a[d],Np(a,tr+l,o)):(a.push(o),o[Kr]=null),o[fn]=a;const y=o[vo];null!==y&&a!==y&&function ys(i,o){const a=i[Qs];o[dr]!==o[fn][fn][dr]&&(i[Fs]=!0),null===a?i[Qs]=[o]:a.push(o)}(y,o);const T=o[Os];null!==T&&T.insertView(i),o[jt]|=128}(d,o,i,a),l){const f=Sv(a,i),y=o[Bt],T=Xp(y,i[hs]);null!==T&&function ot(i,o,a,l,d,f){l[$n]=d,l[Gn]=o,rg(i,l,a,1,d,f)}(d,i[Gn],y,o,T,f)}}let gm=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=bx}return i})();const sh=gm,$C=class extends sh{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,l){const d=function HC(i,o,a,l){const d=o.tView,T=Ag(i,d,a,4096&i[jt]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);T[vo]=i[o.index];const O=i[Os];return null!==O&&(T[Os]=O.createEmbeddedView(d)),yE(d,T,a),T}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:l});return new kg(d)}};function bx(){return kr(si(),ke())}function kr(i,o){return 4&i.type?new $C(o,i,Ac(i,o)):null}let Fl=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=ep}return i})();function ep(){return _m(si(),ke())}const mm=Fl,qC=class extends mm{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){const o=sc(this._hostTNode,this._hostLView);if(dl(o)){const a=Xo(o,this._hostLView),l=hl(o);return new ki(a[it].data[l+8],a)}return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=WC(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const T=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(T,d,false),T}createComponent(o,a,l,d,f){const y=o&&!function dc(i){return"function"==typeof i}(o);let T;if(y)T=a;else{const Ye=a||{};T=Ye.index,l=Ye.injector,d=Ye.projectableNodes,f=Ye.environmentInjector||Ye.ngModuleRef}const S=y?o:new Lg(an(o)),O=l||this.parentInjector;if(!f&&null==S.ngModule){const ut=(y?O:this.parentInjector).get(js,null);ut&&(f=ut)}an(S.componentType??{});const de=S.create(O,d,null,f);return this.insertImpl(de.hostView,T,false),de}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,l){const d=o._lView;if(function tl(i){return Ln(i[fn])}(d)){const S=this.indexOf(o);if(-1!==S)this.detach(S);else{const O=d[fn],V=new qC(O,O[Gn],O[fn]);V.detach(V.indexOf(o))}}const y=this._adjustIndex(a),T=this._lContainer;return Ly(T,d,y,!l),o.attachToViewContainerRef(),Np(qI(T),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=WC(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Sd(this._lContainer,a);l&&(jh(qI(this._lContainer),a),xa(l[it],l))}detach(o){const a=this._adjustIndex(o,-1),l=Sd(this._lContainer,a);return l&&null!=jh(qI(this._lContainer),a)?new kg(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function WC(i){return i[8]}function qI(i){return i[8]||(i[8]=[])}function _m(i,o){let a;const l=o[i.index];return Ln(l)?a=l:(a=mE(l,o,null,i),o[i.index]=a,Nc(o,a)),ZC(a,o,i,l),new qC(a,i,o)}let ZC=function WI(i,o,a,l){if(i[hs])return;let d;d=8&a.type?Bn(l):function NS(i,o){const a=i[Bt],l=a.createComment(""),d=pi(o,i);return Na(a,Xp(a,d),l,function Es(i,o){return i.nextSibling(o)}(a,d),!1),l}(o,a),i[hs]=d};class KI{constructor(o){this.queryList=o,this.matches=null}clone(){return new KI(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Fy(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Gy(o,a).matches&&this.queries[a].setDirty()}}class YI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class QI{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new QI(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class JI{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new JI(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,YC(a,f)),this.matchTNodeWithReadOption(o,a,gl(a,o,f,!1,!1))}else l===gm?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,gl(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===_g||d===Fl||d===gm&&4&a.type)this.addMatch(a.index,-2);else{const f=gl(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function YC(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function OS(i,o,a,l){return-1===a?function XI(i,o){return 11&i.type?Ac(i,o):4&i.type?kr(i,o):null}(o,i):-2===a?function e0(i,o,a){return a===_g?Ac(o,i):a===gm?kr(o,i):a===Fl?_m(o,i):void 0}(i,o,l):To(i,i[it],a,o)}function Vy(i,o,a,l){const d=o[Os].queries[l];if(null===d.matches){const f=i.data,y=a.matches,T=[];for(let S=0;S<y.length;S+=2){const O=y[S];T.push(O<0?null:OS(o,f[O],y[S+1],a.metadata.read))}d.matches=T}return d.matches}function ym(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=Vy(i,o,d,a);for(let T=0;T<f.length;T+=2){const S=f[T];if(S>0)l.push(y[T/2]);else{const O=f[T+1],V=o[-S];for(let Z=tr;Z<V.length;Z++){const re=V[Z];re[vo]===re[fn]&&ym(re[it],re,O,l)}if(null!==V[Qs]){const Z=V[Qs];for(let re=0;re<Z.length;re++){const de=Z[re];ym(de[it],de,O,l)}}}}}return l}function Uy(i){const o=ke(),a=Ot(),l=Ch();w(l+1);const d=Gy(a,l);if(i.dirty&&function Ip(i){return 4==(4&i[jt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?ym(a,o,l,[]):Vy(a,o,d,l);i.reset(f,GA),i.notifyOnChanges()}return!0}return!1}function By(i,o,a,l){const d=Ot();if(d.firstCreatePass){const f=si();(function Hy(i,o,a){null===i.queries&&(i.queries=new QI),i.queries.track(new JI(o,a))})(d,new YI(o,a,l),f.index),function $y(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function QC(i,o,a){const l=new Wc(4==(4&a));(function Af(i,o,a,l){const d=hT(o);d.push(a),i.firstCreatePass&&_E(i).push(l,d.length-1)})(i,o,l,l.destroy),null===o[Os]&&(o[Os]=new Fy),o[Os].queries.push(new KI(l))}(d,ke(),a)}function jy(){return function vm(i,o){return i[Os].queries[o].queryList}(ke(),Ch())}function Gy(i,o){return i.queries.getByIndex(o)}function tp(i,o){return kr(i,o)}function Em(i){return!!Ur(i)}const hD=new Tt("Application Initializer");let d0=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=Mt(hD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(Wg(f))a.push(f);else if(KE(f)){const y=new Promise((T,S)=>{f.subscribe({complete:T,error:S})});a.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Ky=new Tt("LocaleId",{providedIn:"root",factory:()=>Mt(Ky,Pt.Optional|Pt.SkipSelf)||function $S(){return typeof $localize<"u"&&$localize.locale||Kf}()}),$x=new Tt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let pD=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ue.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class zS{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let gD=(()=>{class i{compileModuleSync(a){return new VI(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Sl(Ur(a).declarations).reduce((y,T)=>{const S=an(T);return S&&y.push(new Lg(S)),y},[]);return new zS(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ID=new Tt(""),wD=new Tt("");let bm,rR=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bm||(function TD(i){bm=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Si.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||i)(Et(Si),Et(Am),Et(wD))};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac})}return i})(),Am=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return bm?.findTestabilityInTree(this,a,l)??null}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Lu=null;const Fu=new Tt("AllowMultipleToken"),Qy=new Tt("PlatformDestroyListeners"),Yc=new Tt("appBootstrapListener");class sR{constructor(o,a){this.name=o,this.token=a}}function AD(i,o,a=[]){const l=`Platform: ${o}`,d=new Tt(l);return(f=[])=>{let y=Rm();if(!y||y.injector.get(Fu,!1)){const T=[...a,...f,{provide:d,useValue:!0}];i?i(T):function oR(i){if(Lu&&!Lu.get(Fu,!1))throw new Ie(400,!1);(function Sm(){!function vh(i){ad=i}(()=>{throw new Ie(600,!1)})})(),Lu=i;const o=i.get(Jy);(function DD(i){i.get(Nw,null)?.forEach(a=>a())})(i)}(function bD(i=[],o){return Fa.create({name:o,providers:[{provide:ka,useValue:"platform"},{provide:Qy,useValue:new Set([()=>Lu=null])},...i]})}(T,l))}return function uR(i){const o=Rm();if(!o)throw new Ie(401,!1);return o}()}}function Rm(){return Lu?.get(Jy)??null}let Jy=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function lR(i="zone.js",o){return"noop"===i?new iE:"zone.js"===i?new Si(o):i}(l?.ngZone,function m0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function mx(i,o,a){return new Ny(i,o,a)}(a.moduleType,this.injector,function E0(i){return[{provide:Si,useFactory:i},{provide:lf,multi:!0,useFactory:()=>{const o=Mt(cR,{optional:!0});return()=>o.initialize()}},{provide:$a,useFactory:v0},{provide:Qw,useFactory:sE}]}(()=>d)),y=f.injector.get(Du,null);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:S=>{y.handleError(S)}});f.onDestroy(()=>{Xy(this._modules,f),T.unsubscribe()})}),function _0(i,o,a){try{const l=a();return Wg(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(y,d,()=>{const T=f.injector.get(d0);return T.runInitializers(),T.donePromise.then(()=>(function mC(i){_t(i,"Expected localeId to be defined"),"string"==typeof i&&(gC=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Ky,Kf)||Kf),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,l=[]){const d=y0({},l);return function CD(i,o,a){const l=new VI(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(op);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ie(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Qy,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||i)(Et(Fa))};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function y0(i,o){return Array.isArray(o)?o.reduce(y0,i):{...i,...o}}let op=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mt($a),this.zoneIsStable=Mt(Qw),this.componentTypes=[],this.components=[],this.isStable=Mt(pD).hasPendingTasks.pipe((0,$e.w)(a=>a?(0,oe.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Ee.B)()),this._injector=Mt(js)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Wv;if(!this._injector.get(d0).done)throw!d&&xs(a),new Ie(405,!1);let y;y=d?a:this._injector.get(_f).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const T=function iR(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ih),O=y.create(Fa.NULL,[],l||y.selector,T),V=O.location.nativeElement,Z=O.injector.get(ID,null);return Z?.registerApplication(V),O.onDestroy(()=>{this.detachView(O.hostView),Xy(this.components,O),Z?.unregisterApplication(V)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Xy(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(Yc,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Xy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Xy(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const $a=new Tt("",{providedIn:"root",factory:()=>Mt(Du).handleError.bind(void 0)});function v0(){const i=Mt(Si),o=Mt(Du);return a=>i.runOutsideAngular(()=>o.handleError(a))}let cR=(()=>{class i{constructor(){this.zone=Mt(Si),this.applicationRef=Mt(op)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function zs(){return!1}let hR=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=PD}return i})();function PD(i){return function fR(i,o,a){if(Pi(i)&&!a){const l=Yn(i.index,o);return new kg(l,l)}return 47&i.type?new kg(o[dr],o):null}(si(),ke(),16==(16&i))}class Pm{constructor(){}supports(o){return Pf(o)}create(o){return new vR(o)}}const D0=(i,o)=>o;class vR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||D0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<LD(l,d,f)?a:l,T=LD(y,d,f),S=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const O=T-d,V=S-d;if(O!=V){for(let re=0;re<O;re++){const de=re<f.length?f[re]:f[re]=0,Le=de+re;V<=Le&&Le<O&&(f[re]=de+1)}f[y.previousIndex]=V-O}}T!==S&&o(y,T,S)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Pf(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let T=0;T<this.length;T++)f=o[T],y=this._trackByFn(T,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,T)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,T),l=!0),a=a._next}else d=0,function pb(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,T=>{y=this._trackByFn(d,T),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,T,y,d)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new ER(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new kD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ER{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class kD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new OD,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LD(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class As{constructor(){}supports(o){return o instanceof Map||Vi(o)}create(){return new A0}}class A0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Vi(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new IR(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class IR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uh(){return new iv([new Pm])}let iv=(()=>{class i{static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:uh});constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||uh()),deps:[[i,new wd,new na]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ie(901,!1)}}return i})();function FD(){return new Mo([new As])}let Mo=(()=>{class i{static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:FD});constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||FD()),deps:[[i,new wd,new na]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ie(901,!1)}}return i})();const VD=AD(null,"core",[]);let lh=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(l){return new(l||i)(Et(op))};static#t=this.\u0275mod=Bo({type:i});static#n=this.\u0275inj=Kn({})}return i})();function iM(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ZD(i){const o=an(i);if(!o)return null;const a=new Lg(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},6593:(yt,be,B)=>{B.d(be,{Dx:()=>On,b2:()=>In,q6:()=>Ut});var D=B(5879),p=B(6814);class K extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends K{static makeCurrent(){(0,p.HT)(new ie)}onAndCancel(z,H,q){return z.addEventListener(H,q),()=>{z.removeEventListener(H,q)}}dispatchEvent(z,H){z.dispatchEvent(H)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,H){return(H=H||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,H){return"window"===H?window:"document"===H?z:"body"===H?z.body:null}getBaseHref(z){const H=function oe(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==H?null:function $e($){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",$);const z=Ee.pathname;return"/"===z.charAt(0)?z:`/${z}`}(H)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,p.Mx)(document.cookie,z)}}let Ee,ue=null,X=(()=>{class ${build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(q){return new(q||$)};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const ne=new D.OlP("EventManagerPlugins");let le=(()=>{class ${constructor(H,q){this._zone=q,this._eventNameToPlugin=new Map,H.forEach(se=>{se.manager=this}),this._plugins=H.slice().reverse()}addEventListener(H,q,se){return this._findPluginFor(q).addEventListener(H,q,se)}getZone(){return this._zone}_findPluginFor(H){let q=this._eventNameToPlugin.get(H);if(q)return q;if(q=this._plugins.find(je=>je.supports(H)),!q)throw new D.vHH(5101,!1);return this._eventNameToPlugin.set(H,q),q}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(ne),D.LFG(D.R0b))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();class Pe{constructor(z){this._doc=z}}const He="ng-app-id";let Je=(()=>{class ${constructor(H,q,se,je={}){this.doc=H,this.appId=q,this.nonce=se,this.platformId=je,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,p.PM)(je),this.resetHostNodes()}addStyles(H){for(const q of H)1===this.changeUsageCount(q,1)&&this.onStyleAdded(q)}removeStyles(H){for(const q of H)this.changeUsageCount(q,-1)<=0&&this.onStyleRemoved(q)}ngOnDestroy(){const H=this.styleNodesInDOM;H&&(H.forEach(q=>q.remove()),H.clear());for(const q of this.getAllStyles())this.onStyleRemoved(q);this.resetHostNodes()}addHost(H){this.hostNodes.add(H);for(const q of this.getAllStyles())this.addStyleToHost(H,q)}removeHost(H){this.hostNodes.delete(H)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(H){for(const q of this.hostNodes)this.addStyleToHost(q,H)}onStyleRemoved(H){const q=this.styleRef;q.get(H)?.elements?.forEach(se=>se.remove()),q.delete(H)}collectServerRenderedStyles(){const H=this.doc.head?.querySelectorAll(`style[${He}="${this.appId}"]`);if(H?.length){const q=new Map;return H.forEach(se=>{null!=se.textContent&&q.set(se.textContent,se)}),q}return null}changeUsageCount(H,q){const se=this.styleRef;if(se.has(H)){const je=se.get(H);return je.usage+=q,je.usage}return se.set(H,{usage:q,elements:[]}),q}getStyleElement(H,q){const se=this.styleNodesInDOM,je=se?.get(q);if(je?.parentNode===H)return se.delete(q),je.removeAttribute(He),je;{const tt=this.doc.createElement("style");return this.nonce&&tt.setAttribute("nonce",this.nonce),tt.textContent=q,this.platformIsServer&&tt.setAttribute(He,this.appId),tt}}addStyleToHost(H,q){const se=this.getStyleElement(H,q);H.appendChild(se);const je=this.styleRef,tt=je.get(q)?.elements;tt?tt.push(se):je.set(q,{elements:[se],usage:1})}resetHostNodes(){const H=this.hostNodes;H.clear(),H.add(this.doc.head)}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(p.K0),D.LFG(D.AFp),D.LFG(D.Ojb,8),D.LFG(D.Lbi))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const Be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,Fe=new D.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ke($,z){return z.map(H=>H.replace(rt,$))}let Xe=(()=>{class ${constructor(H,q,se,je,tt,Et,xt,Mt=null){this.eventManager=H,this.sharedStylesHost=q,this.appId=se,this.removeStylesOnCompDestroy=je,this.doc=tt,this.platformId=Et,this.ngZone=xt,this.nonce=Mt,this.rendererByCompId=new Map,this.platformIsServer=(0,p.PM)(Et),this.defaultRenderer=new Te(H,tt,xt,this.platformIsServer)}createRenderer(H,q){if(!H||!q)return this.defaultRenderer;this.platformIsServer&&q.encapsulation===D.ifc.ShadowDom&&(q={...q,encapsulation:D.ifc.Emulated});const se=this.getOrCreateRenderer(H,q);return se instanceof Mn?se.applyToHost(H):se instanceof ur&&se.applyStyles(),se}getOrCreateRenderer(H,q){const se=this.rendererByCompId;let je=se.get(q.id);if(!je){const tt=this.doc,Et=this.ngZone,xt=this.eventManager,Mt=this.sharedStylesHost,Ht=this.removeStylesOnCompDestroy,Vn=this.platformIsServer;switch(q.encapsulation){case D.ifc.Emulated:je=new Mn(xt,Mt,q,this.appId,Ht,tt,Et,Vn);break;case D.ifc.ShadowDom:return new ln(xt,Mt,H,q,tt,Et,this.nonce,Vn);default:je=new ur(xt,Mt,q,Ht,tt,Et,Vn)}se.set(q.id,je)}return je}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(le),D.LFG(Je),D.LFG(D.AFp),D.LFG(Fe),D.LFG(p.K0),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(D.Ojb))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();class Te{constructor(z,H,q,se){this.eventManager=z,this.doc=H,this.ngZone=q,this.platformIsServer=se,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,H){return H?this.doc.createElementNS(Be[H]||H,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,H){(Wn(z)?z.content:z).appendChild(H)}insertBefore(z,H,q){z&&(Wn(z)?z.content:z).insertBefore(H,q)}removeChild(z,H){z&&z.removeChild(H)}selectRootElement(z,H){let q="string"==typeof z?this.doc.querySelector(z):z;if(!q)throw new D.vHH(-5104,!1);return H||(q.textContent=""),q}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,H,q,se){if(se){H=se+":"+H;const je=Be[se];je?z.setAttributeNS(je,H,q):z.setAttribute(H,q)}else z.setAttribute(H,q)}removeAttribute(z,H,q){if(q){const se=Be[q];se?z.removeAttributeNS(se,H):z.removeAttribute(`${q}:${H}`)}else z.removeAttribute(H)}addClass(z,H){z.classList.add(H)}removeClass(z,H){z.classList.remove(H)}setStyle(z,H,q,se){se&(D.JOm.DashCase|D.JOm.Important)?z.style.setProperty(H,q,se&D.JOm.Important?"important":""):z.style[H]=q}removeStyle(z,H,q){q&D.JOm.DashCase?z.style.removeProperty(H):z.style[H]=""}setProperty(z,H,q){z[H]=q}setValue(z,H){z.nodeValue=H}listen(z,H,q){if("string"==typeof z&&!(z=(0,p.q)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${H}`);return this.eventManager.addEventListener(z,H,this.decoratePreventDefault(q))}decoratePreventDefault(z){return H=>{if("__ngUnwrap__"===H)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(H)):z(H))&&H.preventDefault()}}}function Wn($){return"TEMPLATE"===$.tagName&&void 0!==$.content}class ln extends Te{constructor(z,H,q,se,je,tt,Et,xt){super(z,je,tt,xt),this.sharedStylesHost=H,this.hostEl=q,this.shadowRoot=q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Mt=Ke(se.id,se.styles);for(const Ht of Mt){const Vn=document.createElement("style");Et&&Vn.setAttribute("nonce",Et),Vn.textContent=Ht,this.shadowRoot.appendChild(Vn)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,H){return super.appendChild(this.nodeOrShadowRoot(z),H)}insertBefore(z,H,q){return super.insertBefore(this.nodeOrShadowRoot(z),H,q)}removeChild(z,H){return super.removeChild(this.nodeOrShadowRoot(z),H)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ur extends Te{constructor(z,H,q,se,je,tt,Et,xt){super(z,je,tt,Et),this.sharedStylesHost=H,this.removeStylesOnCompDestroy=se,this.styles=xt?Ke(xt,q.styles):q.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Mn extends ur{constructor(z,H,q,se,je,tt,Et,xt){const Mt=se+"-"+q.id;super(z,H,q,je,tt,Et,xt,Mt),this.contentAttr=function pe($){return"_ngcontent-%COMP%".replace(rt,$)}(Mt),this.hostAttr=function ze($){return"_nghost-%COMP%".replace(rt,$)}(Mt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,H){const q=super.createElement(z,H);return super.setAttribute(q,this.contentAttr,""),q}}let Rs=(()=>{class $ extends Pe{constructor(H){super(H)}supports(H){return!0}addEventListener(H,q,se){return H.addEventListener(q,se,!1),()=>this.removeEventListener(H,q,se)}removeEventListener(H,q,se){return H.removeEventListener(q,se)}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(p.K0))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const Rr=["alt","control","meta","shift"],ge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ye={alt:$=>$.altKey,control:$=>$.ctrlKey,meta:$=>$.metaKey,shift:$=>$.shiftKey};let xe=(()=>{class $ extends Pe{constructor(H){super(H)}supports(H){return null!=$.parseEventName(H)}addEventListener(H,q,se){const je=$.parseEventName(q),tt=$.eventCallback(je.fullKey,se,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(H,je.domEventName,tt))}static parseEventName(H){const q=H.toLowerCase().split("."),se=q.shift();if(0===q.length||"keydown"!==se&&"keyup"!==se)return null;const je=$._normalizeKey(q.pop());let tt="",Et=q.indexOf("code");if(Et>-1&&(q.splice(Et,1),tt="code."),Rr.forEach(Mt=>{const Ht=q.indexOf(Mt);Ht>-1&&(q.splice(Ht,1),tt+=Mt+".")}),tt+=je,0!=q.length||0===je.length)return null;const xt={};return xt.domEventName=se,xt.fullKey=tt,xt}static matchEventFullKeyCode(H,q){let se=ge[H.key]||H.key,je="";return q.indexOf("code.")>-1&&(se=H.code,je="code."),!(null==se||!se)&&(se=se.toLowerCase()," "===se?se="space":"."===se&&(se="dot"),Rr.forEach(tt=>{tt!==se&&(0,ye[tt])(H)&&(je+=tt+".")}),je+=se,je===q)}static eventCallback(H,q,se){return je=>{$.matchEventFullKeyCode(je,H)&&se.runGuarded(()=>q(je))}}static _normalizeKey(H){return"esc"===H?"escape":H}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(p.K0))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const Ut=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:p.bD},{provide:D.g9A,useValue:function et(){ie.makeCurrent()},multi:!0},{provide:p.K0,useFactory:function At(){return(0,D.RDi)(document),document},deps:[]}]),Nn=new D.OlP(""),Kn=[{provide:D.rWj,useClass:class De{addToWindow(z){D.dqk.getAngularTestability=(q,se=!0)=>{const je=z.findTestabilityInTree(q,se);if(null==je)throw new D.vHH(5103,!1);return je},D.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(q=>{const se=D.dqk.getAllAngularTestabilities();let je=se.length,tt=!1;const Et=function(xt){tt=tt||xt,je--,0==je&&q(tt)};se.forEach(xt=>{xt.whenStable(Et)})})}findTestabilityInTree(z,H,q){return null==H?null:z.getTestability(H)??(q?(0,p.q)().isShadowRoot(H)?this.findTestabilityInTree(z,H.host,!0):this.findTestabilityInTree(z,H.parentElement,!0):null)}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],Rn=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function Zn(){return new D.qLn},deps:[]},{provide:ne,useClass:Rs,multi:!0,deps:[p.K0,D.R0b,D.Lbi]},{provide:ne,useClass:xe,multi:!0,deps:[p.K0]},Xe,Je,le,{provide:D.FYo,useExisting:Xe},{provide:p.JF,useClass:X,deps:[]},[]];let In=(()=>{class ${constructor(H){}static withServerTransition(H){return{ngModule:$,providers:[{provide:D.AFp,useValue:H.appId}]}}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(Nn,12))};static#t=this.\u0275mod=D.oAB({type:$});static#n=this.\u0275inj=D.cJS({providers:[...Rn,...Kn],imports:[p.ez,D.hGG]})}return $})(),On=(()=>{class ${constructor(H){this._doc=H}getTitle(){return this._doc.title}setTitle(H){this._doc.title=H||""}static#e=this.\u0275fac=function(q){return new(q||$)(D.LFG(p.K0))};static#t=this.\u0275prov=D.Yz7({token:$,factory:function(q){let se=null;return se=q?new q:function Er(){return new On((0,D.LFG)(p.K0))}(),se},providedIn:"root"})}return $})();typeof window<"u"&&window},9692:(yt,be,B)=>{B.d(be,{gz:()=>fn,F0:()=>Yn,Od:()=>wo,Bz:()=>au,lC:()=>Zs});var D=B(5879),p=B(5592),K=B(4674),ue=B(2459),oe=B(2096),Ee=B(5619),$e=B(7453),De=B(2737),X=B(7400),ne=B(9940),le=B(2714),Pe=B(8251),He=B(7103);function Je(...w){const b=(0,ne.yG)(w),I=(0,ne.jO)(w),{args:R,keys:N}=(0,$e.D)(w);if(0===R.length)return(0,ue.D)([],b);const j=new p.y(function Be(w,b,I=De.y){return R=>{rt(b,()=>{const{length:N}=w,j=new Array(N);let Y=N,_e=N;for(let me=0;me<N;me++)rt(b,()=>{const at=(0,ue.D)(w[me],b);let $t=!1;at.subscribe((0,Pe.x)(R,Jt=>{j[me]=Jt,$t||($t=!0,_e--),_e||R.next(I(j.slice()))},()=>{--Y||R.complete()}))},R)},R)}}(R,b,N?Y=>(0,le.n)(N,Y):De.y));return I?j.pipe((0,X.Z)(I)):j}function rt(w,b,I){w?(0,He.f)(I,w,b):b()}var ct=B(6973),en=B(5211),un=B(4829);function Ie(w){return new p.y(b=>{(0,un.Xf)(w()).subscribe(b)})}var Fe=B(8407);function pe(w,b){const I=(0,K.m)(w)?w:()=>w,R=N=>N.error(I());return new p.y(b?N=>b.schedule(R,0,N):R)}var ze=B(6232),Ke=B(7394),Xe=B(9360);function Te(){return(0,Xe.e)((w,b)=>{let I=null;w._refCount++;const R=(0,Pe.x)(b,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(I=null);const N=w._connection,j=I;I=null,N&&(!j||N===j)&&N.unsubscribe(),b.unsubscribe()});w.subscribe(R),R.closed||(I=w.connect())})}class Lt extends p.y{constructor(b,I){super(),this.source=b,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Xe.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new Ke.w0;const I=this.getSubject();b.add(this.source.subscribe((0,Pe.x)(I,void 0,()=>{this._teardown(),I.complete()},R=>{this._teardown(),I.error(R)},()=>this._teardown()))),b.closed&&(this._connection=null,b=Ke.w0.EMPTY)}return b}refCount(){return Te()(this)}}var zt=B(8645),Wn=B(6814),ln=B(7398),ur=B(4664),Mn=B(8180),Rs=B(7921),Rr=B(2181),ge=B(1631),ye=B(1374);function xe(w,b){return(0,K.m)(b)?(0,ge.z)(w,b,1):(0,ge.z)(w,1)}var Ce=B(9397);function Oe(w){return(0,Xe.e)((b,I)=>{let j,R=null,N=!1;R=b.subscribe((0,Pe.x)(I,void 0,void 0,Y=>{j=(0,un.Xf)(w(Y,Oe(w)(b))),R?(R.unsubscribe(),R=null,j.subscribe(I)):N=!0})),N&&(R.unsubscribe(),R=null,j.subscribe(I))})}var Ue=B(6699),_t=B(3572);function et(w){return w<=0?()=>ze.E:(0,Xe.e)((b,I)=>{let R=[];b.subscribe((0,Pe.x)(I,N=>{R.push(N),w<R.length&&R.shift()},()=>{for(const N of R)I.next(N);I.complete()},void 0,()=>{R=null}))})}var Zn=B(3026);function Ut(w){return(0,Xe.e)((b,I)=>{try{b.subscribe(I)}finally{I.add(w)}})}var Nn=B(2420),Rn=B(7537),In=B(6593);const wt="primary",vr=Symbol("RouteTitle");class rs{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I[0]:I}return null}getAll(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Er(w){return new rs(w)}function On(w,b,I){const R=I.path.split("/");if(R.length>w.length||"full"===I.pathMatch&&(b.hasChildren()||R.length<w.length))return null;const N={};for(let j=0;j<R.length;j++){const Y=R[j],_e=w[j];if(Y.startsWith(":"))N[Y.substring(1)]=_e;else if(Y!==_e.path)return null}return{consumed:w.slice(0,R.length),posParams:N}}function Hn(w,b){const I=w?Object.keys(w):void 0,R=b?Object.keys(b):void 0;if(!I||!R||I.length!=R.length)return!1;let N;for(let j=0;j<I.length;j++)if(N=I[j],!Pt(w[N],b[N]))return!1;return!0}function Pt(w,b){if(Array.isArray(w)&&Array.isArray(b)){if(w.length!==b.length)return!1;const I=[...w].sort(),R=[...b].sort();return I.every((N,j)=>R[j]===N)}return w===b}function tn(w){return w.length>0?w[w.length-1]:null}function St(w){return function ie(w){return!!w&&(w instanceof p.y||(0,K.m)(w.lift)&&(0,K.m)(w.subscribe))}(w)?w:(0,D.QGY)(w)?(0,ue.D)(Promise.resolve(w)):(0,oe.of)(w)}const Dn={exact:function er(w,b,I){if(!Ei(w.segments,b.segments)||!qt(w.segments,b.segments,I)||w.numberOfChildren!==b.numberOfChildren)return!1;for(const R in b.children)if(!w.children[R]||!er(w.children[R],b.children[R],I))return!1;return!0},subset:Tt},zr={exact:function wn(w,b){return Hn(w,b)},subset:function po(w,b){return Object.keys(b).length<=Object.keys(w).length&&Object.keys(b).every(I=>Pt(w[I],b[I]))},ignored:()=>!0};function fr(w,b,I){return Dn[I.paths](w.root,b.root,I.matrixParams)&&zr[I.queryParams](w.queryParams,b.queryParams)&&!("exact"===I.fragment&&w.fragment!==b.fragment)}function Tt(w,b,I){return is(w,b,b.segments,I)}function is(w,b,I,R){if(w.segments.length>I.length){const N=w.segments.slice(0,I.length);return!(!Ei(N,I)||b.hasChildren()||!qt(N,I,R))}if(w.segments.length===I.length){if(!Ei(w.segments,I)||!qt(w.segments,I,R))return!1;for(const N in b.children)if(!w.children[N]||!Tt(w.children[N],b.children[N],R))return!1;return!0}{const N=I.slice(0,w.segments.length),j=I.slice(w.segments.length);return!!(Ei(w.segments,N)&&qt(w.segments,N,R)&&w.children[wt])&&is(w.children[wt],b,j,R)}}function qt(w,b,I){return b.every((R,N)=>zr[I](w[N].parameters,R.parameters))}class Ir{constructor(b=new Qt([],{}),I={},R=null){this.root=b,this.queryParams=I,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return go.serialize(this)}}class Qt{constructor(b,I){this.segments=b,this.children=I,this.parent=null,Object.values(I).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qr(this)}}class ss{constructor(b,I){this.path=b,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Er(this.parameters)),this._parameterMap}toString(){return se(this)}}function Ei(w,b){return w.length===b.length&&w.every((I,R)=>I.path===b[R].path)}let di=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return new Ri},providedIn:"root"})}return w})();class Ri{parse(b){const I=new Ae(b);return new Ir(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(b){const I=`/${Wr(b.root,!0)}`,R=function tt(w){const b=Object.keys(w).map(I=>{const R=w[I];return Array.isArray(R)?R.map(N=>`${te(I)}=${te(N)}`).join("&"):`${te(I)}=${te(R)}`}).filter(I=>!!I);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${I}${R}${"string"==typeof b.fragment?`#${function $(w){return encodeURI(w)}(b.fragment)}`:""}`}}const go=new Ri;function qr(w){return w.segments.map(b=>se(b)).join("/")}function Wr(w,b){if(!w.hasChildren())return qr(w);if(b){const I=w.children[wt]?Wr(w.children[wt],!1):"",R=[];return Object.entries(w.children).forEach(([N,j])=>{N!==wt&&R.push(`${N}:${Wr(j,!1)}`)}),R.length>0?`${I}(${R.join("//")})`:I}{const I=function Ii(w,b){let I=[];return Object.entries(w.children).forEach(([R,N])=>{R===wt&&(I=I.concat(b(N,R)))}),Object.entries(w.children).forEach(([R,N])=>{R!==wt&&(I=I.concat(b(N,R)))}),I}(w,(R,N)=>N===wt?[Wr(w.children[wt],!1)]:[`${N}:${Wr(R,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[wt]?`${qr(w)}/${I[0]}`:`${qr(w)}/(${I.join("//")})`}}function ti(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function te(w){return ti(w).replace(/%3B/gi,";")}function z(w){return ti(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H(w){return decodeURIComponent(w)}function q(w){return H(w.replace(/\+/g,"%20"))}function se(w){return`${z(w.path)}${function je(w){return Object.keys(w).map(b=>`;${z(b)}=${z(w[b])}`).join("")}(w.parameters)}`}const Et=/^[^\/()?;#]+/;function xt(w){const b=w.match(Et);return b?b[0]:""}const Mt=/^[^\/()?;=#]+/,Vn=/^[^=?&#]+/,wi=/^[^&#]+/;class Ae{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(b.length>0||Object.keys(I).length>0)&&(R[wt]=new Qt(b,I)),R}parseSegment(){const b=xt(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new D.vHH(4009,!1);return this.capture(b),new ss(H(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const I=function Ht(w){const b=w.match(Mt);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const N=xt(this.remaining);N&&(R=N,this.capture(R))}b[H(I)]=H(R)}parseQueryParam(b){const I=function hi(w){const b=w.match(Vn);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const Y=function Bi(w){const b=w.match(wi);return b?b[0]:""}(this.remaining);Y&&(R=Y,this.capture(R))}const N=q(I),j=q(R);if(b.hasOwnProperty(N)){let Y=b[N];Array.isArray(Y)||(Y=[Y],b[N]=Y),Y.push(j)}else b[N]=j}parseParens(b){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=xt(this.remaining),N=this.remaining[R.length];if("/"!==N&&")"!==N&&";"!==N)throw new D.vHH(4010,!1);let j;R.indexOf(":")>-1?(j=R.slice(0,R.indexOf(":")),this.capture(j),this.capture(":")):b&&(j=wt);const Y=this.parseChildren();I[j]=1===Object.keys(Y).length?Y[wt]:new Qt([],Y),this.consumeOptional("//")}return I}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new D.vHH(4011,!1)}}function fe(w){return w.segments.length>0?new Qt([],{[wt]:w}):w}function Ge(w){const b={};for(const R of Object.keys(w.children)){const j=Ge(w.children[R]);if(R===wt&&0===j.segments.length&&j.hasChildren())for(const[Y,_e]of Object.entries(j.children))b[Y]=_e;else(j.segments.length>0||j.hasChildren())&&(b[R]=j)}return function pt(w){if(1===w.numberOfChildren&&w.children[wt]){const b=w.children[wt];return new Qt(w.segments.concat(b.segments),b.children)}return w}(new Qt(w.segments,b))}function bt(w){return w instanceof Ir}function nn(w){let b;const N=fe(function I(j){const Y={};for(const me of j.children){const at=I(me);Y[me.outlet]=at}const _e=new Qt(j.url,Y);return j===w&&(b=_e),_e}(w.root));return b??N}function pr(w,b,I,R){let N=w;for(;N.parent;)N=N.parent;if(0===b.length)return ni(N,N,N,I,R);const j=function td(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new qa(!0,0,w);let b=0,I=!1;const R=w.reduce((N,j,Y)=>{if("object"==typeof j&&null!=j){if(j.outlets){const _e={};return Object.entries(j.outlets).forEach(([me,at])=>{_e[me]="string"==typeof at?at.split("/"):at}),[...N,{outlets:_e}]}if(j.segmentPath)return[...N,j.segmentPath]}return"string"!=typeof j?[...N,j]:0===Y?(j.split("/").forEach((_e,me)=>{0==me&&"."===_e||(0==me&&""===_e?I=!0:".."===_e?b++:""!=_e&&N.push(_e))}),N):[...N,j]},[]);return new qa(I,b,R)}(b);if(j.toRoot())return ni(N,N,new Qt([],{}),I,R);const Y=function An(w,b,I){if(w.isAbsolute)return new ko(b,!0,0);if(!I)return new ko(b,!1,NaN);if(null===I.parent)return new ko(I,!0,0);const R=Un(w.commands[0])?0:1;return function $l(w,b,I){let R=w,N=b,j=I;for(;j>N;){if(j-=N,R=R.parent,!R)throw new D.vHH(4005,!1);N=R.segments.length}return new ko(R,!1,N-j)}(I,I.segments.length-1+R,w.numberOfDoubleDots)}(j,N,w),_e=Y.processChildren?Lo(Y.segmentGroup,Y.index,j.commands):Ws(Y.segmentGroup,Y.index,j.commands);return ni(N,Y.segmentGroup,_e,I,R)}function Un(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Ti(w){return"object"==typeof w&&null!=w&&w.outlets}function ni(w,b,I,R,N){let Y,j={};R&&Object.entries(R).forEach(([me,at])=>{j[me]=Array.isArray(at)?at.map($t=>`${$t}`):`${at}`}),Y=w===b?I:ji(w,b,I);const _e=fe(Ge(Y));return new Ir(_e,j,N)}function ji(w,b,I){const R={};return Object.entries(w.children).forEach(([N,j])=>{R[N]=j===b?I:ji(j,b,I)}),new Qt(w.segments,R)}class qa{constructor(b,I,R){if(this.isAbsolute=b,this.numberOfDoubleDots=I,this.commands=R,b&&R.length>0&&Un(R[0]))throw new D.vHH(4003,!1);const N=R.find(Ti);if(N&&N!==tn(R))throw new D.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ko{constructor(b,I,R){this.segmentGroup=b,this.processChildren=I,this.index=R}}function Ws(w,b,I){if(w||(w=new Qt([],{})),0===w.segments.length&&w.hasChildren())return Lo(w,b,I);const R=function Hu(w,b,I){let R=0,N=b;const j={match:!1,pathIndex:0,commandIndex:0};for(;N<w.segments.length;){if(R>=I.length)return j;const Y=w.segments[N],_e=I[R];if(Ti(_e))break;const me=`${_e}`,at=R<I.length-1?I[R+1]:null;if(N>0&&void 0===me)break;if(me&&at&&"object"==typeof at&&void 0===at.outlets){if(!ri(me,at,Y))return j;R+=2}else{if(!ri(me,{},Y))return j;R++}N++}return{match:!0,pathIndex:N,commandIndex:R}}(w,b,I),N=I.slice(R.commandIndex);if(R.match&&R.pathIndex<w.segments.length){const j=new Qt(w.segments.slice(0,R.pathIndex),{});return j.children[wt]=new Qt(w.segments.slice(R.pathIndex),w.children),Lo(j,0,N)}return R.match&&0===N.length?new Qt(w.segments,{}):R.match&&!w.hasChildren()?Fo(w,b,I):R.match?Lo(w,0,N):Fo(w,b,I)}function Lo(w,b,I){if(0===I.length)return new Qt(w.segments,{});{const R=function pa(w){return Ti(w[0])?w[0].outlets:{[wt]:w}}(I),N={};if(Object.keys(R).some(j=>j!==wt)&&w.children[wt]&&1===w.numberOfChildren&&0===w.children[wt].segments.length){const j=Lo(w.children[wt],b,I);return new Qt(w.segments,j.children)}return Object.entries(R).forEach(([j,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(N[j]=Ws(w.children[j],b,Y))}),Object.entries(w.children).forEach(([j,Y])=>{void 0===R[j]&&(N[j]=Y)}),new Qt(w.segments,N)}}function Fo(w,b,I){const R=w.segments.slice(0,b);let N=0;for(;N<I.length;){const j=I[N];if(Ti(j)){const me=Gl(j.outlets);return new Qt(R,me)}if(0===N&&Un(I[0])){R.push(new ss(w.segments[b].path,Wa(I[0]))),N++;continue}const Y=Ti(j)?j.outlets[wt]:`${j}`,_e=N<I.length-1?I[N+1]:null;Y&&_e&&Un(_e)?(R.push(new ss(Y,Wa(_e))),N+=2):(R.push(new ss(Y,{})),N++)}return new Qt(R,{})}function Gl(w){const b={};return Object.entries(w).forEach(([I,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(b[I]=Fo(new Qt([],{}),0,R))}),b}function Wa(w){const b={};return Object.entries(w).forEach(([I,R])=>b[I]=`${R}`),b}function ri(w,b,I){return w==I.path&&Hn(b,I.parameters)}const Hi="imperative";class wr{constructor(b,I){this.id=b,this.url=I}}class Vo extends wr{constructor(b,I,R="imperative",N=null){super(b,I),this.type=0,this.navigationTrigger=R,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class os extends wr{constructor(b,I,R){super(b,I),this.urlAfterRedirects=R,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mo extends wr{constructor(b,I,R,N){super(b,I),this.reason=R,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Za extends wr{constructor(b,I,R,N){super(b,I),this.reason=R,this.code=N,this.type=16}}class Ka extends wr{constructor(b,I,R,N){super(b,I),this.error=R,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $u extends wr{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $i extends wr{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hh extends wr{constructor(b,I,R,N,j){super(b,I),this.urlAfterRedirects=R,this.state=N,this.shouldActivate=j,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zl extends wr{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fh extends wr{constructor(b,I,R,N){super(b,I),this.urlAfterRedirects=R,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uo{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gu{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bo{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zu{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _o{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jo{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ga{constructor(b,I,R){this.routerEvent=b,this.position=I,this.anchor=R,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class an{}class cr{constructor(b){this.url=b}}class xs{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ur,this.attachRef=null}}let Ur=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(I,R){const N=this.getOrCreateContext(I);N.outlet=R,this.contexts.set(I,N)}onChildOutletDestroyed(I){const R=this.getContext(I);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let R=this.getContext(I);return R||(R=new xs,this.contexts.set(I,R)),R}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class yo{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const I=this.pathFromRoot(b);return I.length>1?I[I.length-2]:null}children(b){const I=Ya(b,this._root);return I?I.children.map(R=>R.value):[]}firstChild(b){const I=Ya(b,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(b){const I=Ms(b,this._root);return I.length<2?[]:I[I.length-2].children.map(N=>N.value).filter(N=>N!==b)}pathFromRoot(b){return Ms(b,this._root).map(I=>I.value)}}function Ya(w,b){if(w===b.value)return b;for(const I of b.children){const R=Ya(w,I);if(R)return R}return null}function Ms(w,b){if(w===b.value)return[b];for(const I of b.children){const R=Ms(w,I);if(R.length)return R.unshift(b),R}return[]}class Gi{constructor(b,I){this.value=b,this.children=I}toString(){return`TreeNode(${this.value})`}}function Ns(w){const b={};return w&&w.children.forEach(I=>b[I.value.outlet]=I),b}class $n extends yo{constructor(b,I){super(b),this.snapshot=I,kn(this,b)}toString(){return this.snapshot.toString()}}function it(w,b){const I=function jt(w,b){const Y=new Gn([],{},{},"",{},wt,b,null,{});return new Yr("",new Gi(Y,[]))}(0,b),R=new Ee.X([new ss("",{})]),N=new Ee.X({}),j=new Ee.X({}),Y=new Ee.X({}),_e=new Ee.X(""),me=new fn(R,N,Y,_e,j,wt,b,I.root);return me.snapshot=I.root,new $n(new Gi(me,[]),I)}class fn{constructor(b,I,R,N,j,Y,_e,me){this.urlSubject=b,this.paramsSubject=I,this.queryParamsSubject=R,this.fragmentSubject=N,this.dataSubject=j,this.outlet=Y,this.component=_e,this._futureSnapshot=me,this.title=this.dataSubject?.pipe((0,ln.U)(at=>at[vr]))??(0,oe.of)(void 0),this.url=b,this.params=I,this.queryParams=R,this.fragment=N,this.data=j}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ln.U)(b=>Er(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ln.U)(b=>Er(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kr(w,b="emptyOnly"){const I=w.pathFromRoot;let R=0;if("always"!==b)for(R=I.length-1;R>=1;){const N=I[R],j=I[R-1];if(N.routeConfig&&""===N.routeConfig.path)R--;else{if(j.component)break;R--}}return function Ho(w){return w.reduce((b,I)=>({params:{...b.params,...I.params},data:{...b.data,...I.data},resolve:{...I.data,...b.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(R))}class Gn{get title(){return this.data?.[vr]}constructor(b,I,R,N,j,Y,_e,me,at){this.url=b,this.params=I,this.queryParams=R,this.fragment=N,this.data=j,this.outlet=Y,this.component=_e,this.routeConfig=me,this._resolve=at}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yr extends yo{constructor(b,I){super(I),this.url=b,kn(this,I)}toString(){return as(this._root)}}function kn(w,b){b.value._routerState=w,b.children.forEach(I=>kn(w,I))}function as(w){const b=w.children.length>0?` { ${w.children.map(as).join(", ")} } `:"";return`${w.value}${b}`}function Br(w){if(w.snapshot){const b=w.snapshot,I=w._futureSnapshot;w.snapshot=I,Hn(b.queryParams,I.queryParams)||w.queryParamsSubject.next(I.queryParams),b.fragment!==I.fragment&&w.fragmentSubject.next(I.fragment),Hn(b.params,I.params)||w.paramsSubject.next(I.params),function lr(w,b){if(w.length!==b.length)return!1;for(let I=0;I<w.length;++I)if(!Hn(w[I],b[I]))return!1;return!0}(b.url,I.url)||w.urlSubject.next(I.url),Hn(b.data,I.data)||w.dataSubject.next(I.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function Bt(w,b){const I=Hn(w.params,b.params)&&function Ps(w,b){return Ei(w,b)&&w.every((I,R)=>Hn(I.parameters,b[R].parameters))}(w.url,b.url);return I&&!(!w.parent!=!b.parent)&&(!w.parent||Bt(w.parent,b.parent))}let Zs=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=wt,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.parentContexts=(0,D.f3M)(Ur),this.location=(0,D.f3M)(D.s_b),this.changeDetector=(0,D.f3M)(D.sBO),this.environmentInjector=(0,D.f3M)(D.lqb),this.inputBinder=(0,D.f3M)(us,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:R,previousValue:N}=I.name;if(R)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,R){this.activated=I,this._activatedRoute=R,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,R){if(this.isActivated)throw new D.vHH(4013,!1);this._activatedRoute=I;const N=this.location,Y=I.snapshot.component,_e=this.parentContexts.getOrCreateContext(this.name).children,me=new Qa(I,_e,N.injector);this.activated=N.createComponent(Y,{index:N.length,injector:me,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[D.TTD]})}return w})();class Qa{constructor(b,I,R){this.route=b,this.childContexts=I,this.parent=R}get(b,I){return b===fn?this.route:b===Ur?this.childContexts:this.parent.get(b,I)}}const us=new D.OlP("");let dr=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:R}=I,N=Je([R.queryParams,R.params,R.data]).pipe((0,ur.w)(([j,Y,_e],me)=>(_e={...j,...Y,..._e},0===me?(0,oe.of)(_e):Promise.resolve(_e)))).subscribe(j=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(I);const Y=(0,D.qFp)(R.component);if(Y)for(const{templateName:_e}of Y.inputs)I.activatedComponentRef.setInput(_e,j[_e]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,N)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function ls(w,b,I){if(I&&w.shouldReuseRoute(b.value,I.value.snapshot)){const R=I.value;R._futureSnapshot=b.value;const N=function Os(w,b,I){return b.children.map(R=>{for(const N of I.children)if(w.shouldReuseRoute(R.value,N.value.snapshot))return ls(w,R,N);return ls(w,R)})}(w,b,I);return new Gi(R,N)}{if(w.shouldAttach(b.value)){const j=w.retrieve(b.value);if(null!==j){const Y=j.route;return Y.value._futureSnapshot=b.value,Y.children=b.children.map(_e=>ls(w,_e)),Y}}const R=function ks(w){return new fn(new Ee.X(w.url),new Ee.X(w.params),new Ee.X(w.queryParams),new Ee.X(w.fragment),new Ee.X(w.data),w.outlet,w.component,w)}(b.value),N=b.children.map(j=>ls(w,j));return new Gi(R,N)}}const Ls="ngNavigationCancelingError";function cs(w,b){const{redirectTo:I,navigationBehaviorOptions:R}=bt(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,N=ds(!1,0,b);return N.url=I,N.navigationBehaviorOptions=R,N}function ds(w,b,I){const R=new Error("NavigationCancelingError: "+(w||""));return R[Ls]=!0,R.cancellationCode=b,I&&(R.url=I),R}function Ja(w){return w&&w[Ls]}let Zt=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275cmp=D.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[D.jDz],decls:1,vars:0,template:function(R,N){1&R&&D._UZ(0,"router-outlet")},dependencies:[Zs],encapsulation:2})}return w})();function gr(w){const b=w.children&&w.children.map(gr),I=b?{...w,children:b}:{...w};return!I.component&&!I.loadComponent&&(b||I.loadChildren)&&I.outlet&&I.outlet!==wt&&(I.component=Zt),I}function Ln(w){return w.outlet||wt}function Pi(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let b=w.parent;b;b=b.parent){const I=b.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class ql{constructor(b,I,R,N,j){this.routeReuseStrategy=b,this.futureState=I,this.currState=R,this.forwardEvent=N,this.inputBindingEnabled=j}activate(b){const I=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,R,b),Br(this.futureState.root),this.activateChildRoutes(I,R,b)}deactivateChildRoutes(b,I,R){const N=Ns(I);b.children.forEach(j=>{const Y=j.value.outlet;this.deactivateRoutes(j,N[Y],R),delete N[Y]}),Object.values(N).forEach(j=>{this.deactivateRouteAndItsChildren(j,R)})}deactivateRoutes(b,I,R){const N=b.value,j=I?I.value:null;if(N===j)if(N.component){const Y=R.getContext(N.outlet);Y&&this.deactivateChildRoutes(b,I,Y.children)}else this.deactivateChildRoutes(b,I,R);else j&&this.deactivateRouteAndItsChildren(I,R)}deactivateRouteAndItsChildren(b,I){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,I):this.deactivateRouteAndOutlet(b,I)}detachAndStoreRouteSubtree(b,I){const R=I.getContext(b.value.outlet),N=R&&b.value.component?R.children:I,j=Ns(b);for(const Y of Object.keys(j))this.deactivateRouteAndItsChildren(j[Y],N);if(R&&R.outlet){const Y=R.outlet.detach(),_e=R.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:Y,route:b,contexts:_e})}}deactivateRouteAndOutlet(b,I){const R=I.getContext(b.value.outlet),N=R&&b.value.component?R.children:I,j=Ns(b);for(const Y of Object.keys(j))this.deactivateRouteAndItsChildren(j[Y],N);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(b,I,R){const N=Ns(I);b.children.forEach(j=>{this.activateRoutes(j,N[j.value.outlet],R),this.forwardEvent(new jo(j.value.snapshot))}),b.children.length&&this.forwardEvent(new zu(b.value.snapshot))}activateRoutes(b,I,R){const N=b.value,j=I?I.value:null;if(Br(N),N===j)if(N.component){const Y=R.getOrCreateContext(N.outlet);this.activateChildRoutes(b,I,Y.children)}else this.activateChildRoutes(b,I,R);else if(N.component){const Y=R.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const _e=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),Y.children.onOutletReAttached(_e.contexts),Y.attachRef=_e.componentRef,Y.route=_e.route.value,Y.outlet&&Y.outlet.attach(_e.componentRef,_e.route.value),Br(_e.route.value),this.activateChildRoutes(b,null,Y.children)}else{const _e=Pi(N.snapshot);Y.attachRef=null,Y.route=N,Y.injector=_e,Y.outlet&&Y.outlet.activateWith(N,Y.injector),this.activateChildRoutes(b,null,Y.children)}}else this.activateChildRoutes(b,null,R)}}class qu{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class Eo{constructor(b,I){this.component=b,this.route=I}}function ph(w,b,I){const R=w._root;return va(R,b?b._root:null,I,[R.value])}function ya(w,b){const I=Symbol(),R=b.get(w,I);return R===I?"function"!=typeof w||(0,D.Z0I)(w)?b.get(w):w:R}function va(w,b,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=Ns(b);return w.children.forEach(Y=>{(function gh(w,b,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=w.value,Y=b?b.value:null,_e=I?I.getContext(w.value.outlet):null;if(Y&&j.routeConfig===Y.routeConfig){const me=function mh(w,b,I){if("function"==typeof I)return I(w,b);switch(I){case"pathParamsChange":return!Ei(w.url,b.url);case"pathParamsOrQueryParamsChange":return!Ei(w.url,b.url)||!Hn(w.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bt(w,b)||!Hn(w.queryParams,b.queryParams);default:return!Bt(w,b)}}(Y,j,j.routeConfig.runGuardsAndResolvers);me?N.canActivateChecks.push(new qu(R)):(j.data=Y.data,j._resolvedData=Y._resolvedData),va(w,b,j.component?_e?_e.children:null:I,R,N),me&&_e&&_e.outlet&&_e.outlet.isActivated&&N.canDeactivateChecks.push(new Eo(_e.outlet.component,Y))}else Y&&Pn(b,_e,N),N.canActivateChecks.push(new qu(R)),va(w,null,j.component?_e?_e.children:null:I,R,N)})(Y,j[Y.value.outlet],I,R.concat([Y.value]),N),delete j[Y.value.outlet]}),Object.entries(j).forEach(([Y,_e])=>Pn(_e,I.getContext(Y),N)),N}function Pn(w,b,I){const R=Ns(w),N=w.value;Object.entries(R).forEach(([j,Y])=>{Pn(Y,N.component?b?b.children.getContext(j):null:b,I)}),I.canDeactivateChecks.push(new Eo(N.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,N))}function eu(w){return"function"==typeof w}function Yu(w){return w instanceof ct.K||"EmptyError"===w?.name}const tu=Symbol("INITIAL_VALUE");function $o(){return(0,ur.w)(w=>Je(w.map(b=>b.pipe((0,Mn.q)(1),(0,Rs.O)(tu)))).pipe((0,ln.U)(b=>{for(const I of b)if(!0!==I){if(I===tu)return tu;if(!1===I||I instanceof Ir)return I}return!0}),(0,Rr.h)(b=>b!==tu),(0,Mn.q)(1)))}function Io(w){return(0,Fe.z)((0,Ce.b)(b=>{if(bt(b))throw cs(0,b)}),(0,ln.U)(b=>!0===b))}class Go{constructor(b){this.segmentGroup=b||null}}class Ea{constructor(b){this.urlTree=b}}function zo(w){return pe(new Go(w))}function Ia(w){return pe(new Ea(w))}class Me{constructor(b,I){this.urlSerializer=b,this.urlTree=I}noMatchError(b){return new D.vHH(4002,!1)}lineralizeSegments(b,I){let R=[],N=I.root;for(;;){if(R=R.concat(N.segments),0===N.numberOfChildren)return(0,oe.of)(R);if(N.numberOfChildren>1||!N.children[wt])return pe(new D.vHH(4e3,!1));N=N.children[wt]}}applyRedirectCommands(b,I,R){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),b,R)}applyRedirectCreateUrlTree(b,I,R,N){const j=this.createSegmentGroup(b,I.root,R,N);return new Ir(j,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(b,I){const R={};return Object.entries(b).forEach(([N,j])=>{if("string"==typeof j&&j.startsWith(":")){const _e=j.substring(1);R[N]=I[_e]}else R[N]=j}),R}createSegmentGroup(b,I,R,N){const j=this.createSegments(b,I.segments,R,N);let Y={};return Object.entries(I.children).forEach(([_e,me])=>{Y[_e]=this.createSegmentGroup(b,me,R,N)}),new Qt(j,Y)}createSegments(b,I,R,N){return I.map(j=>j.path.startsWith(":")?this.findPosParam(b,j,N):this.findOrReturn(j,R))}findPosParam(b,I,R){const N=R[I.path.substring(1)];if(!N)throw new D.vHH(4001,!1);return N}findOrReturn(b,I){let R=0;for(const N of I){if(N.path===b.path)return I.splice(R),N;R++}return b}}const Pr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ci(w,b,I,R,N){const j=hr(w,b,I);return j.matched?(R=function Ks(w,b){return w.providers&&!w._injector&&(w._injector=(0,D.MMx)(w.providers,b,`Route: ${w.path}`)),w._injector??b}(b,R),function ru(w,b,I,R){const N=b.canMatch;if(!N||0===N.length)return(0,oe.of)(!0);const j=N.map(Y=>{const _e=ya(Y,w);return St(function id(w){return w&&eu(w.canMatch)}(_e)?_e.canMatch(b,I):w.runInContext(()=>_e(b,I)))});return(0,oe.of)(j).pipe($o(),Io())}(R,b,I).pipe((0,ln.U)(Y=>!0===Y?j:{...Pr}))):(0,oe.of)(j)}function hr(w,b,I){if(""===b.path)return"full"===b.pathMatch&&(w.hasChildren()||I.length>0)?{...Pr}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const N=(b.matcher||On)(I,w,b);if(!N)return{...Pr};const j={};Object.entries(N.posParams??{}).forEach(([_e,me])=>{j[_e]=me.path});const Y=N.consumed.length>0?{...j,...N.consumed[N.consumed.length-1].parameters}:j;return{matched:!0,consumedSegments:N.consumed,remainingSegments:I.slice(N.consumed.length),parameters:Y,positionalParamSegments:N.posParams??{}}}function W(w,b,I,R){return I.length>0&&function lt(w,b,I){return I.some(R=>Ft(w,b,R)&&Ln(R)!==wt)}(w,I,R)?{segmentGroup:new Qt(b,Ni(R,new Qt(I,w.children))),slicedSegments:[]}:0===I.length&&function od(w,b,I){return I.some(R=>Ft(w,b,R))}(w,I,R)?{segmentGroup:new Qt(w.segments,Zl(w,0,I,R,w.children)),slicedSegments:I}:{segmentGroup:new Qt(w.segments,w.children),slicedSegments:I}}function Zl(w,b,I,R,N){const j={};for(const Y of R)if(Ft(w,I,Y)&&!N[Ln(Y)]){const _e=new Qt([],{});j[Ln(Y)]=_e}return{...N,...j}}function Ni(w,b){const I={};I[wt]=b;for(const R of w)if(""===R.path&&Ln(R)!==wt){const N=new Qt([],{});I[Ln(R)]=N}return I}function Ft(w,b,I){return(!(w.hasChildren()||b.length>0)||"full"!==I.pathMatch)&&""===I.path}class qo{constructor(b,I,R,N,j,Y,_e){this.injector=b,this.configLoader=I,this.rootComponentType=R,this.config=N,this.urlTree=j,this.paramsInheritanceStrategy=Y,this.urlSerializer=_e,this.allowRedirects=!0,this.applyRedirects=new Me(this.urlSerializer,this.urlTree)}noMatchError(b){return new D.vHH(4002,!1)}recognize(){const b=W(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,wt).pipe(Oe(I=>{if(I instanceof Ea)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof Go?this.noMatchError(I):I}),(0,ln.U)(I=>{const R=new Gn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wt,this.rootComponentType,null,{}),N=new Gi(R,I),j=new Yr("",N),Y=function dt(w,b,I=null,R=null){return pr(nn(w),b,I,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return Y.queryParams=this.urlTree.queryParams,j.url=this.urlSerializer.serialize(Y),this.inheritParamsAndData(j._root),{state:j,tree:Y}}))}match(b){return this.processSegmentGroup(this.injector,this.config,b.root,wt).pipe(Oe(R=>{throw R instanceof Go?this.noMatchError(R):R}))}inheritParamsAndData(b){const I=b.value,R=Kr(I,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data),b.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(b,I,R,N){return 0===R.segments.length&&R.hasChildren()?this.processChildren(b,I,R):this.processSegment(b,I,R,R.segments,N,!0)}processChildren(b,I,R){const N=[];for(const j of Object.keys(R.children))"primary"===j?N.unshift(j):N.push(j);return(0,ue.D)(N).pipe(xe(j=>{const Y=R.children[j],_e=function _a(w,b){const I=w.filter(R=>Ln(R)===b);return I.push(...w.filter(R=>Ln(R)!==b)),I}(I,j);return this.processSegmentGroup(b,_e,Y,j)}),(0,Ue.R)((j,Y)=>(j.push(...Y),j)),(0,_t.d)(null),function At(w,b){const I=arguments.length>=2;return R=>R.pipe(w?(0,Rr.h)((N,j)=>w(N,j,R)):De.y,et(1),I?(0,_t.d)(b):(0,Zn.T)(()=>new ct.K))}(),(0,ge.z)(j=>{if(null===j)return zo(R);const Y=Eh(j);return function vh(w){w.sort((b,I)=>b.value.outlet===wt?-1:I.value.outlet===wt?1:b.value.outlet.localeCompare(I.value.outlet))}(Y),(0,oe.of)(Y)}))}processSegment(b,I,R,N,j,Y){return(0,ue.D)(I).pipe(xe(_e=>this.processSegmentAgainstRoute(_e._injector??b,I,_e,R,N,j,Y).pipe(Oe(me=>{if(me instanceof Go)return(0,oe.of)(null);throw me}))),(0,ye.P)(_e=>!!_e),Oe(_e=>{if(Yu(_e))return function wa(w,b,I){return 0===b.length&&!w.children[I]}(R,N,j)?(0,oe.of)([]):zo(R);throw _e}))}processSegmentAgainstRoute(b,I,R,N,j,Y,_e){return function Xu(w,b,I,R){return!!(Ln(w)===R||R!==wt&&Ft(b,I,w))&&("**"===w.path||hr(b,w,I).matched)}(R,N,j,Y)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(b,N,R,j,Y,_e):_e&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,N,I,R,j,Y):zo(N):zo(N)}expandSegmentAgainstRouteUsingRedirect(b,I,R,N,j,Y){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,R,N,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(b,I,R,N,j,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,I,R,N){const j=this.applyRedirects.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?Ia(j):this.applyRedirects.lineralizeSegments(R,j).pipe((0,ge.z)(Y=>{const _e=new Qt(Y,{});return this.processSegment(b,I,_e,Y,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,I,R,N,j,Y){const{matched:_e,consumedSegments:me,remainingSegments:at,positionalParamSegments:$t}=hr(I,N,j);if(!_e)return zo(I);const Jt=this.applyRedirects.applyRedirectCommands(me,N.redirectTo,$t);return N.redirectTo.startsWith("/")?Ia(Jt):this.applyRedirects.lineralizeSegments(N,Jt).pipe((0,ge.z)(kt=>this.processSegment(b,R,I,kt.concat(at),Y,!1)))}matchSegmentAgainstRoute(b,I,R,N,j,Y){let _e;if("**"===R.path){const me=N.length>0?tn(N).parameters:{},at=new Gn(N,me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,su(R),Ln(R),R.component??R._loadedComponent??null,R,A(R));_e=(0,oe.of)({snapshot:at,consumedSegments:[],remainingSegments:[]}),I.children={}}else _e=Ci(I,R,N,b).pipe((0,ln.U)(({matched:me,consumedSegments:at,remainingSegments:$t,parameters:Jt})=>me?{snapshot:new Gn(at,Jt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,su(R),Ln(R),R.component??R._loadedComponent??null,R,A(R)),consumedSegments:at,remainingSegments:$t}:null));return _e.pipe((0,ur.w)(me=>null===me?zo(I):this.getChildConfig(b=R._injector??b,R,N).pipe((0,ur.w)(({routes:at})=>{const $t=R._loadedInjector??b,{snapshot:Jt,consumedSegments:kt,remainingSegments:Tn}=me,{segmentGroup:ro,slicedSegments:io}=W(I,kt,Tn,at);if(0===io.length&&ro.hasChildren())return this.processChildren($t,at,ro).pipe((0,ln.U)(so=>null===so?null:[new Gi(Jt,so)]));if(0===at.length&&0===io.length)return(0,oe.of)([new Gi(Jt,[])]);const ll=Ln(R)===j;return this.processSegment($t,at,ro,io,ll?wt:j,!0).pipe((0,ln.U)(so=>[new Gi(Jt,so)]))}))))}getChildConfig(b,I,R){return I.children?(0,oe.of)({routes:I.children,injector:b}):I.loadChildren?void 0!==I._loadedRoutes?(0,oe.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function nu(w,b,I,R){const N=b.canLoad;if(void 0===N||0===N.length)return(0,oe.of)(!0);const j=N.map(Y=>{const _e=ya(Y,w);return St(function rd(w){return w&&eu(w.canLoad)}(_e)?_e.canLoad(b,I):w.runInContext(()=>_e(b,I)))});return(0,oe.of)(j).pipe($o(),Io())}(b,I,R).pipe((0,ge.z)(N=>N?this.configLoader.loadChildren(b,I).pipe((0,Ce.b)(j=>{I._loadedRoutes=j.routes,I._loadedInjector=j.injector})):function Ju(w){return pe(ds(!1,3))}())):(0,oe.of)({routes:[],injector:b})}}function iu(w){const b=w.value.routeConfig;return b&&""===b.path}function Eh(w){const b=[],I=new Set;for(const R of w){if(!iu(R)){b.push(R);continue}const N=b.find(j=>R.value.routeConfig===j.value.routeConfig);void 0!==N?(N.children.push(...R.children),I.add(N)):b.push(R)}for(const R of I){const N=Eh(R.children);b.push(new Gi(R.value,N))}return b.filter(R=>!I.has(R))}function su(w){return w.data||{}}function A(w){return w.resolve||{}}function It(w){return"string"==typeof w.title||null===w.title}function rn(w){return(0,ur.w)(b=>{const I=w(b);return I?(0,ue.D)(I).pipe((0,ln.U)(()=>b)):(0,oe.of)(b)})}const dn=new D.OlP("ROUTES");let Kt=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,D.f3M)(D.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,oe.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const R=St(I.loadComponent()).pipe((0,ln.U)(xn),(0,Ce.b)(j=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=j}),Ut(()=>{this.componentLoaders.delete(I)})),N=new Lt(R,()=>new zt.x).pipe(Te());return this.componentLoaders.set(I,N),N}loadChildren(I,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,oe.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const j=function Wt(w,b,I,R){return St(w.loadChildren()).pipe((0,ln.U)(xn),(0,ge.z)(N=>N instanceof D.YKP||Array.isArray(N)?(0,oe.of)(N):(0,ue.D)(b.compileModuleAsync(N))),(0,ln.U)(N=>{R&&R(w);let j,Y,_e=!1;return Array.isArray(N)?(Y=N,!0):(j=N.create(I).injector,Y=j.get(dn,[],{optional:!0,self:!0}).flat()),{routes:Y.map(gr),injector:j}}))}(R,this.compiler,I,this.onLoadEndListener).pipe(Ut(()=>{this.childrenLoaders.delete(R)})),Y=new Lt(j,()=>new zt.x).pipe(Te());return this.childrenLoaders.set(R,Y),Y}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function xn(w){return function nr(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let Fn=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zt.x,this.transitionAbortSubject=new zt.x,this.configLoader=(0,D.f3M)(Kt),this.environmentInjector=(0,D.f3M)(D.lqb),this.urlSerializer=(0,D.f3M)(di),this.rootContexts=(0,D.f3M)(Ur),this.inputBindingEnabled=null!==(0,D.f3M)(us,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,oe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new Gu(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new Uo(N))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:R})}setupNavigations(I,R,N){return this.transitions=new Ee.X({id:0,currentUrlTree:R,currentRawUrl:R,currentBrowserUrl:R,extractedUrl:I.urlHandlingStrategy.extract(R),urlAfterRedirects:I.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hi,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Rr.h)(j=>0!==j.id),(0,ln.U)(j=>({...j,extractedUrl:I.urlHandlingStrategy.extract(j.rawUrl)})),(0,ur.w)(j=>{this.currentTransition=j;let Y=!1,_e=!1;return(0,oe.of)(j).pipe((0,Ce.b)(me=>{this.currentNavigation={id:me.id,initialUrl:me.rawUrl,extractedUrl:me.extractedUrl,trigger:me.source,extras:me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ur.w)(me=>{const at=me.currentBrowserUrl.toString(),$t=!I.navigated||me.extractedUrl.toString()!==at||at!==me.currentUrlTree.toString();if(!$t&&"reload"!==(me.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const kt="";return this.events.next(new Za(me.id,this.urlSerializer.serialize(me.rawUrl),kt,0)),me.resolve(null),ze.E}if(I.urlHandlingStrategy.shouldProcessUrl(me.rawUrl))return(0,oe.of)(me).pipe((0,ur.w)(kt=>{const Tn=this.transitions?.getValue();return this.events.next(new Vo(kt.id,this.urlSerializer.serialize(kt.extractedUrl),kt.source,kt.restoredState)),Tn!==this.transitions?.getValue()?ze.E:Promise.resolve(kt)}),function F(w,b,I,R,N,j){return(0,ge.z)(Y=>function ad(w,b,I,R,N,j,Y="emptyOnly"){return new qo(w,b,I,R,N,Y,j).recognize()}(w,b,I,R,Y.extractedUrl,N,j).pipe((0,ln.U)(({state:_e,tree:me})=>({...Y,targetSnapshot:_e,urlAfterRedirects:me}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Ce.b)(kt=>{j.targetSnapshot=kt.targetSnapshot,j.urlAfterRedirects=kt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:kt.urlAfterRedirects};const Tn=new $u(kt.id,this.urlSerializer.serialize(kt.extractedUrl),this.urlSerializer.serialize(kt.urlAfterRedirects),kt.targetSnapshot);this.events.next(Tn)}));if($t&&I.urlHandlingStrategy.shouldProcessUrl(me.currentRawUrl)){const{id:kt,extractedUrl:Tn,source:ro,restoredState:io,extras:ll}=me,so=new Vo(kt,this.urlSerializer.serialize(Tn),ro,io);this.events.next(so);const gd=it(0,this.rootComponentType).snapshot;return this.currentTransition=j={...me,targetSnapshot:gd,urlAfterRedirects:Tn,extras:{...ll,skipLocationChange:!1,replaceUrl:!1}},(0,oe.of)(j)}{const kt="";return this.events.next(new Za(me.id,this.urlSerializer.serialize(me.extractedUrl),kt,1)),me.resolve(null),ze.E}}),(0,Ce.b)(me=>{const at=new $i(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects),me.targetSnapshot);this.events.next(at)}),(0,ln.U)(me=>(this.currentTransition=j={...me,guards:ph(me.targetSnapshot,me.currentSnapshot,this.rootContexts)},j)),function Wl(w,b){return(0,ge.z)(I=>{const{targetSnapshot:R,currentSnapshot:N,guards:{canActivateChecks:j,canDeactivateChecks:Y}}=I;return 0===Y.length&&0===j.length?(0,oe.of)({...I,guardsResult:!0}):function Js(w,b,I,R){return(0,ue.D)(w).pipe((0,ge.z)(N=>function Cr(w,b,I,R,N){const j=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,oe.of)(!0);const Y=j.map(_e=>{const me=Pi(b)??N,at=ya(_e,me);return St(function Zu(w){return w&&eu(w.canDeactivate)}(at)?at.canDeactivate(w,b,I,R):me.runInContext(()=>at(w,b,I,R))).pipe((0,ye.P)())});return(0,oe.of)(Y).pipe($o())}(N.component,N.route,I,b,R)),(0,ye.P)(N=>!0!==N,!0))}(Y,R,N,w).pipe((0,ge.z)(_e=>_e&&function _h(w){return"boolean"==typeof w}(_e)?function Mi(w,b,I,R){return(0,ue.D)(b).pipe(xe(N=>(0,en.z)(function sd(w,b){return null!==w&&b&&b(new Bo(w)),(0,oe.of)(!0)}(N.route.parent,R),function qi(w,b){return null!==w&&b&&b(new _o(w)),(0,oe.of)(!0)}(N.route,R),function fs(w,b,I){const R=b[b.length-1],j=b.slice(0,b.length-1).reverse().map(Y=>function nd(w){const b=w.routeConfig?w.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:w,guards:b}:null}(Y)).filter(Y=>null!==Y).map(Y=>Ie(()=>{const _e=Y.guards.map(me=>{const at=Pi(Y.node)??I,$t=ya(me,at);return St(function Wu(w){return w&&eu(w.canActivateChild)}($t)?$t.canActivateChild(R,w):at.runInContext(()=>$t(R,w))).pipe((0,ye.P)())});return(0,oe.of)(_e).pipe($o())}));return(0,oe.of)(j).pipe($o())}(w,N.path,I),function Tr(w,b,I){const R=b.routeConfig?b.routeConfig.canActivate:null;if(!R||0===R.length)return(0,oe.of)(!0);const N=R.map(j=>Ie(()=>{const Y=Pi(b)??I,_e=ya(j,Y);return St(function xi(w){return w&&eu(w.canActivate)}(_e)?_e.canActivate(b,w):Y.runInContext(()=>_e(b,w))).pipe((0,ye.P)())}));return(0,oe.of)(N).pipe($o())}(w,N.route,I))),(0,ye.P)(N=>!0!==N,!0))}(R,j,w,b):(0,oe.of)(_e)),(0,ln.U)(_e=>({...I,guardsResult:_e})))})}(this.environmentInjector,me=>this.events.next(me)),(0,Ce.b)(me=>{if(j.guardsResult=me.guardsResult,bt(me.guardsResult))throw cs(0,me.guardsResult);const at=new hh(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects),me.targetSnapshot,!!me.guardsResult);this.events.next(at)}),(0,Rr.h)(me=>!!me.guardsResult||(this.cancelNavigationTransition(me,"",3),!1)),rn(me=>{if(me.guards.canActivateChecks.length)return(0,oe.of)(me).pipe((0,Ce.b)(at=>{const $t=new zl(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next($t)}),(0,ur.w)(at=>{let $t=!1;return(0,oe.of)(at).pipe(function x(w,b){return(0,ge.z)(I=>{const{targetSnapshot:R,guards:{canActivateChecks:N}}=I;if(!N.length)return(0,oe.of)(I);let j=0;return(0,ue.D)(N).pipe(xe(Y=>function L(w,b,I,R){const N=w.routeConfig,j=w._resolve;return void 0!==N?.title&&!It(N)&&(j[vr]=N.title),function Q(w,b,I,R){const N=function ve(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===N.length)return(0,oe.of)({});const j={};return(0,ue.D)(N).pipe((0,ge.z)(Y=>function Se(w,b,I,R){const N=Pi(b)??R,j=ya(w,N);return St(j.resolve?j.resolve(b,I):N.runInContext(()=>j(b,I)))}(w[Y],b,I,R).pipe((0,ye.P)(),(0,Ce.b)(_e=>{j[Y]=_e}))),et(1),function cn(w){return(0,ln.U)(()=>w)}(j),Oe(Y=>Yu(Y)?ze.E:pe(Y)))}(j,w,b,R).pipe((0,ln.U)(Y=>(w._resolvedData=Y,w.data=Kr(w,I).resolve,N&&It(N)&&(w.data[vr]=N.title),null)))}(Y.route,R,w,b)),(0,Ce.b)(()=>j++),et(1),(0,ge.z)(Y=>j===N.length?(0,oe.of)(I):ze.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Ce.b)({next:()=>$t=!0,complete:()=>{$t||this.cancelNavigationTransition(at,"",2)}}))}),(0,Ce.b)(at=>{const $t=new fh(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next($t)}))}),rn(me=>{const at=$t=>{const Jt=[];$t.routeConfig?.loadComponent&&!$t.routeConfig._loadedComponent&&Jt.push(this.configLoader.loadComponent($t.routeConfig).pipe((0,Ce.b)(kt=>{$t.component=kt}),(0,ln.U)(()=>{})));for(const kt of $t.children)Jt.push(...at(kt));return Jt};return Je(at(me.targetSnapshot.root)).pipe((0,_t.d)(),(0,Mn.q)(1))}),rn(()=>this.afterPreactivation()),(0,ln.U)(me=>{const at=function vo(w,b,I){const R=ls(w,b._root,I?I._root:void 0);return new $n(R,b)}(I.routeReuseStrategy,me.targetSnapshot,me.currentRouterState);return this.currentTransition=j={...me,targetRouterState:at},j}),(0,Ce.b)(()=>{this.events.next(new an)}),((w,b,I,R)=>(0,ln.U)(N=>(new ql(b,N.targetRouterState,N.currentRouterState,I,R).activate(w),N)))(this.rootContexts,I.routeReuseStrategy,me=>this.events.next(me),this.inputBindingEnabled),(0,Mn.q)(1),(0,Ce.b)({next:me=>{Y=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new os(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects))),I.titleStrategy?.updateTitle(me.targetRouterState.snapshot),me.resolve(!0)},complete:()=>{Y=!0}}),function Kn(w){return(0,Xe.e)((b,I)=>{(0,un.Xf)(w).subscribe((0,Pe.x)(I,()=>I.complete(),Nn.Z)),!I.closed&&b.subscribe(I)})}(this.transitionAbortSubject.pipe((0,Ce.b)(me=>{throw me}))),Ut(()=>{Y||_e||this.cancelNavigationTransition(j,"",1),this.currentNavigation?.id===j.id&&(this.currentNavigation=null)}),Oe(me=>{if(_e=!0,Ja(me))this.events.next(new mo(j.id,this.urlSerializer.serialize(j.extractedUrl),me.message,me.cancellationCode)),function jr(w){return Ja(w)&&bt(w.url)}(me)?this.events.next(new cr(me.url)):j.resolve(!1);else{this.events.next(new Ka(j.id,this.urlSerializer.serialize(j.extractedUrl),me,j.targetSnapshot??void 0));try{j.resolve(I.errorHandler(me))}catch(at){j.reject(at)}}return ze.E}))}))}cancelNavigationTransition(I,R,N){const j=new mo(I.id,this.urlSerializer.serialize(I.extractedUrl),R,N);this.events.next(j),I.resolve(!1)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function ps(w){return w!==Hi}let Oi=(()=>{class w{buildTitle(I){let R,N=I.root;for(;void 0!==N;)R=this.getResolvedTitleForRoute(N)??R,N=N.children.find(j=>j.outlet===wt);return R}getResolvedTitleForRoute(I){return I.data[vr]}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Wo)},providedIn:"root"})}return w})(),Wo=(()=>{class w extends Oi{constructor(I){super(),this.title=I}updateTitle(I){const R=this.buildTitle(I);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(In.Dx))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),ii=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(xr)},providedIn:"root"})}return w})();class Xs{shouldDetach(b){return!1}store(b,I){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,I){return b.routeConfig===I.routeConfig}}let xr=(()=>{class w extends Xs{static#e=this.\u0275fac=function(){let I;return function(N){return(I||(I=D.n5z(w)))(N||w)}}();static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Wi=new D.OlP("",{providedIn:"root",factory:()=>({})});let ud=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Bn)},providedIn:"root"})}return w})(),Bn=(()=>{class w{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,R){return I}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var Zo=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(Zo||{});function el(w,b){w.events.pipe((0,Rr.h)(I=>I instanceof os||I instanceof mo||I instanceof Ka||I instanceof Za),(0,ln.U)(I=>I instanceof os||I instanceof Za?Zo.COMPLETE:I instanceof mo&&(0===I.code||1===I.code)?Zo.REDIRECTING:Zo.FAILED),(0,Rr.h)(I=>I!==Zo.REDIRECTING),(0,Mn.q)(1)).subscribe(()=>{b()})}function pi(w){throw w}function Vs(w,b,I){return b.parse("/")}const Kl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yn=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,D.f3M)(D.c2e),this.isNgZoneEnabled=!1,this._events=new zt.x,this.options=(0,D.f3M)(Wi,{optional:!0})||{},this.pendingTasks=(0,D.f3M)(D.HDt),this.errorHandler=this.options.errorHandler||pi,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Vs,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,D.f3M)(ud),this.routeReuseStrategy=(0,D.f3M)(ii),this.titleStrategy=(0,D.f3M)(Oi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,D.f3M)(dn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,D.f3M)(Fn),this.urlSerializer=(0,D.f3M)(di),this.location=(0,D.f3M)(Wn.Ye),this.componentInputBindingEnabled=!!(0,D.f3M)(us,{optional:!0}),this.eventsSubscription=new Ke.w0,this.isNgZoneEnabled=(0,D.f3M)(D.R0b)instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ir,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=it(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(R=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(Yl(R)&&this._events.next(R));if(R instanceof Vo)ps(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(R instanceof Za)this.rawUrlTree=N.rawUrl;else if(R instanceof $u){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(j,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(R instanceof an)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(R instanceof mo)0!==R.code&&1!==R.code&&(this.navigated=!0),(3===R.code||2===R.code)&&this.restoreHistory(N);else if(R instanceof cr){const j=this.urlHandlingStrategy.merge(R.url,N.currentRawUrl),Y={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ps(N.source)};this.scheduleNavigation(j,Hi,null,Y,{resolve:N.resolve,reject:N.reject,promise:N.promise})}R instanceof Ka&&this.restoreHistory(N,!0),R instanceof os&&(this.navigated=!0),Yl(R)&&this._events.next(R)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hi,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const R="popstate"===I.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,R,I.state)},0)}))}navigateToSyncWithBrowser(I,R,N){const j={replaceUrl:!0},Y=N?.navigationId?N:null;if(N){const me={...N};delete me.navigationId,delete me.\u0275routerPageId,0!==Object.keys(me).length&&(j.state=me)}const _e=this.parseUrl(I);this.scheduleNavigation(_e,R,Y,j)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(gr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,R={}){const{relativeTo:N,queryParams:j,fragment:Y,queryParamsHandling:_e,preserveFragment:me}=R,at=me?this.currentUrlTree.fragment:Y;let Jt,$t=null;switch(_e){case"merge":$t={...this.currentUrlTree.queryParams,...j};break;case"preserve":$t=this.currentUrlTree.queryParams;break;default:$t=j||null}null!==$t&&($t=this.removeEmptyProps($t));try{Jt=nn(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Jt=this.currentUrlTree.root}return pr(Jt,I,$t,at??null)}navigateByUrl(I,R={skipLocationChange:!1}){const N=bt(I)?I:this.parseUrl(I),j=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(j,Hi,null,R)}navigate(I,R={skipLocationChange:!1}){return function Ip(w){for(let b=0;b<w.length;b++)if(null==w[b])throw new D.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,R),R)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let R;try{R=this.urlSerializer.parse(I)}catch(N){R=this.malformedUriErrorHandler(N,this.urlSerializer,I)}return R}isActive(I,R){let N;if(N=!0===R?{...Kl}:!1===R?{...eo}:R,bt(I))return fr(this.currentUrlTree,I,N);const j=this.parseUrl(I);return fr(this.currentUrlTree,j,N)}removeEmptyProps(I){return Object.keys(I).reduce((R,N)=>{const j=I[N];return null!=j&&(R[N]=j),R},{})}scheduleNavigation(I,R,N,j,Y){if(this.disposed)return Promise.resolve(!1);let _e,me,at;Y?(_e=Y.resolve,me=Y.reject,at=Y.promise):at=new Promise((Jt,kt)=>{_e=Jt,me=kt});const $t=this.pendingTasks.add();return el(this,()=>{queueMicrotask(()=>this.pendingTasks.remove($t))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:j,resolve:_e,reject:me,promise:at,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),at.catch(Jt=>Promise.reject(Jt))}setBrowserUrl(I,R){const N=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(N)||R.extras.replaceUrl){const Y={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState(N,"",Y)}else{const j={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go(N,"",j)}}restoreHistory(I,R=!1){if("computed"===this.canceledNavigationResolution){const j=this.currentPageId-this.browserPageId;0!==j?this.location.historyGo(j):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===j&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,R){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:R}:{navigationId:I}}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Yl(w){return!(w instanceof an||w instanceof cr)}let tl=(()=>{class w{constructor(I,R,N,j,Y,_e){this.router=I,this.route=R,this.tabIndexAttribute=N,this.renderer=j,this.el=Y,this.locationStrategy=_e,this.href=null,this.commands=null,this.onChanges=new zt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const me=Y.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===me||"area"===me,this.isAnchorElement?this.subscription=I.events.subscribe(at=>{at instanceof os&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,R,N,j,Y){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||R||N||j||Y||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,D.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,R){const N=this.renderer,j=this.el.nativeElement;null!==R?N.setAttribute(j,I,R):N.removeAttribute(j,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||w)(D.Y36(Yn),D.Y36(fn),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(Wn.S$))};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,N){1&R&&D.NdJ("click",function(Y){return N.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&R&&D.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",D.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",D.VuI],replaceUrl:["replaceUrl","replaceUrl",D.VuI],routerLink:"routerLink"},standalone:!0,features:[D.Xq5,D.TTD]})}return w})(),wo=(()=>{class w{get isActive(){return this._isActive}constructor(I,R,N,j,Y){this.router=I,this.element=R,this.renderer=N,this.cdr=j,this.link=Y,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new D.vpe,this.routerEventsSubscription=I.events.subscribe(_e=>{_e instanceof os&&this.update()})}ngAfterContentInit(){(0,oe.of)(this.links.changes,(0,oe.of)(null)).pipe((0,Rn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),this.link].filter(R=>!!R).map(R=>R.onChanges);this.linkInputChangesSubscription=(0,ue.D)(I).pipe((0,Rn.J)()).subscribe(R=>{this._isActive!==this.isLinkActive(this.router)(R)&&this.update()})}set routerLinkActive(I){const R=Array.isArray(I)?I:I.split(" ");this.classes=R.filter(N=>!!N)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const I=this.hasActiveLinks();this._isActive!==I&&(this._isActive=I,this.cdr.markForCheck(),this.classes.forEach(R=>{I?this.renderer.addClass(this.element.nativeElement,R):this.renderer.removeClass(this.element.nativeElement,R)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const R=function nl(w){return!!w.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&I.isActive(N.urlTree,R)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.links.some(I)}static#e=this.\u0275fac=function(R){return new(R||w)(D.Y36(Yn),D.Y36(D.SBq),D.Y36(D.Qsj),D.Y36(D.sBO),D.Y36(tl,8))};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["","routerLinkActive",""]],contentQueries:function(R,N,j){if(1&R&&D.Suo(j,tl,5),2&R){let Y;D.iGM(Y=D.CRH())&&(N.links=Y)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[D.TTD]})}return w})();class rl{}let il=(()=>{class w{constructor(I,R,N,j,Y){this.router=I,this.injector=N,this.preloadingStrategy=j,this.loader=Y}setUpPreloading(){this.subscription=this.router.events.pipe((0,Rr.h)(I=>I instanceof os),xe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,R){const N=[];for(const j of R){j.providers&&!j._injector&&(j._injector=(0,D.MMx)(j.providers,I,`Route: ${j.path}`));const Y=j._injector??I,_e=j._loadedInjector??Y;(j.loadChildren&&!j._loadedRoutes&&void 0===j.canLoad||j.loadComponent&&!j._loadedComponent)&&N.push(this.preloadConfig(Y,j)),(j.children||j._loadedRoutes)&&N.push(this.processRoutes(_e,j.children??j._loadedRoutes))}return(0,ue.D)(N).pipe((0,Rn.J)())}preloadConfig(I,R){return this.preloadingStrategy.preload(R,()=>{let N;N=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(I,R):(0,oe.of)(null);const j=N.pipe((0,ge.z)(Y=>null===Y?(0,oe.of)(void 0):(R._loadedRoutes=Y.routes,R._loadedInjector=Y.injector,this.processRoutes(Y.injector??I,Y.routes))));if(R.loadComponent&&!R._loadedComponent){const Y=this.loader.loadComponent(R);return(0,ue.D)([j,Y]).pipe((0,Rn.J)())}return j})}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(Yn),D.LFG(D.Sil),D.LFG(D.lqb),D.LFG(rl),D.LFG(Kt))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const sl=new D.OlP("");let Vt=(()=>{class w{constructor(I,R,N,j,Y={}){this.urlSerializer=I,this.transitions=R,this.viewportScroller=N,this.zone=j,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Vo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof os?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof Za&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof ga&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,R){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ga(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){D.$Z()};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function Zi(w,b){return{\u0275kind:w,\u0275providers:b}}function Da(){const w=(0,D.f3M)(D.zs3);return b=>{const I=w.get(D.z2F);if(b!==I.components[0])return;const R=w.get(Yn),N=w.get(Th);1===w.get(rr)&&R.initialNavigation(),w.get(Ot,null,D.XFs.Optional)?.setUpPreloading(),w.get(sl,null,D.XFs.Optional)?.init(),R.resetRootComponentType(I.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const Th=new D.OlP("",{factory:()=>new zt.x}),rr=new D.OlP("",{providedIn:"root",factory:()=>1}),Ot=new D.OlP("");function al(w){return Zi(0,[{provide:Ot,useExisting:il},{provide:rl,useExisting:w}])}const Qo=new D.OlP("ROUTER_FORROOT_GUARD"),ou=[Wn.Ye,{provide:di,useClass:Ri},Yn,Ur,{provide:fn,useFactory:function wp(w){return w.routerState.root},deps:[Yn]},Kt,[]];function Cp(){return new D.PXZ("Router",Yn)}let au=(()=>{class w{constructor(I){}static forRoot(I,R){return{ngModule:w,providers:[ou,[],{provide:dn,multi:!0,useValue:I},{provide:Qo,useFactory:Ql,deps:[[Yn,new D.FiY,new D.tp0]]},{provide:Wi,useValue:R||{}},R?.useHash?{provide:Wn.S$,useClass:Wn.Do}:{provide:Wn.S$,useClass:Wn.b0},{provide:sl,useFactory:()=>{const w=(0,D.f3M)(Wn.EM),b=(0,D.f3M)(D.R0b),I=(0,D.f3M)(Wi),R=(0,D.f3M)(Fn),N=(0,D.f3M)(di);return I.scrollOffset&&w.setOffset(I.scrollOffset),new Vt(N,R,w,b,I)}},R?.preloadingStrategy?al(R.preloadingStrategy).\u0275providers:[],{provide:D.PXZ,multi:!0,useFactory:Cp},R?.initialNavigation?no(R):[],R?.bindToComponentInputs?Zi(8,[dr,{provide:us,useExisting:dr}]).\u0275providers:[],[{provide:gs,useFactory:Da},{provide:D.tb,multi:!0,useExisting:gs}]]}}static forChild(I){return{ngModule:w,providers:[{provide:dn,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(Qo,8))};static#t=this.\u0275mod=D.oAB({type:w});static#n=this.\u0275inj=D.cJS({})}return w})();function Ql(w){return"guarded"}function no(w){return["disabled"===w.initialNavigation?Zi(3,[{provide:D.ip1,multi:!0,useFactory:()=>{const b=(0,D.f3M)(Yn);return()=>{b.setUpLocationChangeListener()}}},{provide:rr,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?Zi(2,[{provide:rr,useValue:0},{provide:D.ip1,multi:!0,deps:[D.zs3],useFactory:b=>{const I=b.get(Wn.V_,Promise.resolve());return()=>I.then(()=>new Promise(R=>{const N=b.get(Yn),j=b.get(Th);el(N,()=>{R(!0)}),b.get(Fn).afterPreactivation=()=>(R(!0),j.closed?(0,oe.of)(void 0):j),N.initialNavigation()}))}}]).\u0275providers:[]]}const gs=new D.OlP("")},3106:(yt,be,B)=>{B.d(be,{Z:()=>Je});var D=B(9058),p=B(4537),K=B(534),ie=B(7879);class ue{constructor(rt,ct){this._delegate=rt,this.firebase=ct,(0,K._addComponent)(rt,new p.wA("app-compat",()=>this,"PUBLIC")),this.container=rt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this._delegate.automaticDataCollectionEnabled=rt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(rt=>{this._delegate.checkDestroyed(),rt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(rt,ct=K._DEFAULT_ENTRY_NAME){var en;this._delegate.checkDestroyed();const un=this._delegate.container.getProvider(rt);return!un.isInitialized()&&"EXPLICIT"===(null===(en=un.getComponent())||void 0===en?void 0:en.instantiationMode)&&un.initialize(),un.getImmediate({identifier:ct})}_removeServiceInstance(rt,ct=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(rt).clearInstance(ct)}_addComponent(rt){(0,K._addComponent)(this._delegate,rt)}_addOrOverwriteComponent(rt){(0,K._addOrOverwriteComponent)(this._delegate,rt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function De(){const Be=function $e(Be){const rt={},ct={__esModule:!0,initializeApp:function Ie(Ke,Xe={}){const Te=K.initializeApp(Ke,Xe);if((0,D.r3)(rt,Te.name))return rt[Te.name];const Lt=new Be(Te,ct);return rt[Te.name]=Lt,Lt},app:un,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ke){const Xe=Ke.name,Te=Xe.replace("-compat","");if(K._registerComponent(Ke)&&"PUBLIC"===Ke.type){const Lt=(zt=un())=>{if("function"!=typeof zt[Te])throw Ee.create("invalid-app-argument",{appName:Xe});return zt[Te]()};void 0!==Ke.serviceProps&&(0,D.ZB)(Lt,Ke.serviceProps),ct[Te]=Lt,Be.prototype[Te]=function(...zt){return this._getService.bind(this,Xe).apply(this,Ke.multipleInstances?zt:[])}}return"PUBLIC"===Ke.type?ct[Te]:null},removeApp:function en(Ke){delete rt[Ke]},useAsService:function ze(Ke,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:K}};function un(Ke){if(!(0,D.r3)(rt,Ke=Ke||K._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Ke});return rt[Ke]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function Fe(){return Object.keys(rt).map(Ke=>rt[Ke])}}),un.App=Be,ct}(ue);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function rt(ct){(0,D.ZB)(Be,ct)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Be}(),ne=new ie.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=X;!function He(Be){(0,K.registerVersion)("@firebase/app-compat","0.2.22",Be)}()},534:(yt,be,B)=>{B.r(be),B.d(be,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Qt,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>zr,_addOrOverwriteComponent:()=>fr,_apps:()=>St,_clearComponents:()=>Tt,_components:()=>Dn,_getProvider:()=>er,_registerComponent:()=>wn,_removeServiceInstance:()=>po,deleteApp:()=>Ii,getApp:()=>Ps,getApps:()=>Ei,initializeApp:()=>ss,onLog:()=>go,registerVersion:()=>Ri,setLogLevel:()=>qr});var D=B(5861),p=B(4537),K=B(7879),ie=B(9058);const ue=(Ae,fe)=>fe.some(Ge=>Ae instanceof Ge);let oe,Ee;const X=new WeakMap,ne=new WeakMap,le=new WeakMap,Pe=new WeakMap,He=new WeakMap;let rt={get(Ae,fe,Ge){if(Ae instanceof IDBTransaction){if("done"===fe)return ne.get(Ae);if("objectStoreNames"===fe)return Ae.objectStoreNames||le.get(Ae);if("store"===fe)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return Ie(Ae[fe])},set:(Ae,fe,Ge)=>(Ae[fe]=Ge,!0),has:(Ae,fe)=>Ae instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in Ae};function un(Ae){return"function"==typeof Ae?function en(Ae){return Ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ae)?function(...fe){return Ae.apply(Fe(this),fe),Ie(X.get(this))}:function(...fe){return Ie(Ae.apply(Fe(this),fe))}:function(fe,...Ge){const pt=Ae.call(Fe(this),fe,...Ge);return le.set(pt,fe.sort?fe.sort():[fe]),Ie(pt)}}(Ae):(Ae instanceof IDBTransaction&&function Be(Ae){if(ne.has(Ae))return;const fe=new Promise((Ge,pt)=>{const bt=()=>{Ae.removeEventListener("complete",dt),Ae.removeEventListener("error",nn),Ae.removeEventListener("abort",nn)},dt=()=>{Ge(),bt()},nn=()=>{pt(Ae.error||new DOMException("AbortError","AbortError")),bt()};Ae.addEventListener("complete",dt),Ae.addEventListener("error",nn),Ae.addEventListener("abort",nn)});ne.set(Ae,fe)}(Ae),ue(Ae,function $e(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ae,rt):Ae)}function Ie(Ae){if(Ae instanceof IDBRequest)return function Je(Ae){const fe=new Promise((Ge,pt)=>{const bt=()=>{Ae.removeEventListener("success",dt),Ae.removeEventListener("error",nn)},dt=()=>{Ge(Ie(Ae.result)),bt()},nn=()=>{pt(Ae.error),bt()};Ae.addEventListener("success",dt),Ae.addEventListener("error",nn)});return fe.then(Ge=>{Ge instanceof IDBCursor&&X.set(Ge,Ae)}).catch(()=>{}),He.set(fe,Ae),fe}(Ae);if(Pe.has(Ae))return Pe.get(Ae);const fe=un(Ae);return fe!==Ae&&(Pe.set(Ae,fe),He.set(fe,Ae)),fe}const Fe=Ae=>He.get(Ae),Ke=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],Te=new Map;function Lt(Ae,fe){if(!(Ae instanceof IDBDatabase)||fe in Ae||"string"!=typeof fe)return;if(Te.get(fe))return Te.get(fe);const Ge=fe.replace(/FromIndex$/,""),pt=fe!==Ge,bt=Xe.includes(Ge);if(!(Ge in(pt?IDBIndex:IDBObjectStore).prototype)||!bt&&!Ke.includes(Ge))return;const dt=function(){var nn=(0,D.Z)(function*(pr,...Un){const Ti=this.transaction(pr,bt?"readwrite":"readonly");let ni=Ti.store;return pt&&(ni=ni.index(Un.shift())),(yield Promise.all([ni[Ge](...Un),bt&&Ti.done]))[0]});return function(Un){return nn.apply(this,arguments)}}();return Te.set(fe,dt),dt}!function ct(Ae){rt=Ae(rt)}(Ae=>({...Ae,get:(fe,Ge,pt)=>Lt(fe,Ge)||Ae.get(fe,Ge,pt),has:(fe,Ge)=>!!Lt(fe,Ge)||Ae.has(fe,Ge)}));class zt{constructor(fe){this.container=fe}getPlatformInfoString(){return this.container.getProviders().map(Ge=>{if(function Wn(Ae){const fe=Ae.getComponent();return"VERSION"===fe?.type}(Ge)){const pt=Ge.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Ge=>Ge).join(" ")}}const ln="@firebase/app",Mn=new K.Yd("@firebase/app"),Pt="[DEFAULT]",tn={[ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,Dn=new Map;function zr(Ae,fe){try{Ae.container.addComponent(fe)}catch(Ge){Mn.debug(`Component ${fe.name} failed to register with FirebaseApp ${Ae.name}`,Ge)}}function fr(Ae,fe){Ae.container.addOrOverwriteComponent(fe)}function wn(Ae){const fe=Ae.name;if(Dn.has(fe))return Mn.debug(`There were multiple attempts to register component ${fe}.`),!1;Dn.set(fe,Ae);for(const Ge of St.values())zr(Ge,Ae);return!0}function er(Ae,fe){const Ge=Ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Ge&&Ge.triggerHeartbeat(),Ae.container.getProvider(fe)}function po(Ae,fe,Ge=Pt){er(Ae,fe).clearInstance(Ge)}function Tt(){Dn.clear()}const qt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ir{constructor(fe,Ge,pt){this._isDeleted=!1,this._options=Object.assign({},fe),this._config=Object.assign({},Ge),this._name=Ge.name,this._automaticDataCollectionEnabled=Ge.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new p.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(fe){this._isDeleted=fe}checkDestroyed(){if(this.isDeleted)throw qt.create("app-deleted",{appName:this._name})}}const Qt="10.5.2";function ss(Ae,fe={}){let Ge=Ae;"object"!=typeof fe&&(fe={name:fe});const pt=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},fe),bt=pt.name;if("string"!=typeof bt||!bt)throw qt.create("bad-app-name",{appName:String(bt)});if(Ge||(Ge=(0,ie.aH)()),!Ge)throw qt.create("no-options");const dt=St.get(bt);if(dt){if((0,ie.vZ)(Ge,dt.options)&&(0,ie.vZ)(pt,dt.config))return dt;throw qt.create("duplicate-app",{appName:bt})}const nn=new p.H0(bt);for(const Un of Dn.values())nn.addComponent(Un);const pr=new Ir(Ge,pt,nn);return St.set(bt,pr),pr}function Ps(Ae=Pt){const fe=St.get(Ae);if(!fe&&Ae===Pt&&(0,ie.aH)())return ss();if(!fe)throw qt.create("no-app",{appName:Ae});return fe}function Ei(){return Array.from(St.values())}function Ii(Ae){return di.apply(this,arguments)}function di(){return(di=(0,D.Z)(function*(Ae){const fe=Ae.name;St.has(fe)&&(St.delete(fe),yield Promise.all(Ae.container.getProviders().map(Ge=>Ge.delete())),Ae.isDeleted=!0)})).apply(this,arguments)}function Ri(Ae,fe,Ge){var pt;let bt=null!==(pt=tn[Ae])&&void 0!==pt?pt:Ae;Ge&&(bt+=`-${Ge}`);const dt=bt.match(/\s|\//),nn=fe.match(/\s|\//);if(dt||nn){const pr=[`Unable to register library "${bt}" with version "${fe}":`];return dt&&pr.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),dt&&nn&&pr.push("and"),nn&&pr.push(`version name "${fe}" contains illegal characters (whitespace or "/")`),void Mn.warn(pr.join(" "))}wn(new p.wA(`${bt}-version`,()=>({library:bt,version:fe}),"VERSION"))}function go(Ae,fe){if(null!==Ae&&"function"!=typeof Ae)throw qt.create("invalid-log-argument");(0,K.Am)(Ae,fe)}function qr(Ae){(0,K.Ub)(Ae)}const Wr="firebase-heartbeat-database",ti=1,te="firebase-heartbeat-store";let $=null;function z(){return $||($=function pe(Ae,fe,{blocked:Ge,upgrade:pt,blocking:bt,terminated:dt}={}){const nn=indexedDB.open(Ae,fe),pr=Ie(nn);return pt&&nn.addEventListener("upgradeneeded",Un=>{pt(Ie(nn.result),Un.oldVersion,Un.newVersion,Ie(nn.transaction),Un)}),Ge&&nn.addEventListener("blocked",Un=>Ge(Un.oldVersion,Un.newVersion,Un)),pr.then(Un=>{dt&&Un.addEventListener("close",()=>dt()),bt&&Un.addEventListener("versionchange",Ti=>bt(Ti.oldVersion,Ti.newVersion,Ti))}).catch(()=>{}),pr}(Wr,ti,{upgrade:(Ae,fe)=>{0===fe&&Ae.createObjectStore(te)}}).catch(Ae=>{throw qt.create("idb-open",{originalErrorMessage:Ae.message})})),$}function q(){return(q=(0,D.Z)(function*(Ae){try{return yield(yield z()).transaction(te).objectStore(te).get(tt(Ae))}catch(fe){if(fe instanceof ie.ZR)Mn.warn(fe.message);else{const Ge=qt.create("idb-get",{originalErrorMessage:fe?.message});Mn.warn(Ge.message)}}})).apply(this,arguments)}function se(Ae,fe){return je.apply(this,arguments)}function je(){return(je=(0,D.Z)(function*(Ae,fe){try{const pt=(yield z()).transaction(te,"readwrite");yield pt.objectStore(te).put(fe,tt(Ae)),yield pt.done}catch(Ge){if(Ge instanceof ie.ZR)Mn.warn(Ge.message);else{const pt=qt.create("idb-set",{originalErrorMessage:Ge?.message});Mn.warn(pt.message)}}})).apply(this,arguments)}function tt(Ae){return`${Ae.name}!${Ae.options.appId}`}class Mt{constructor(fe){this.container=fe,this._heartbeatsCache=null;const Ge=this.container.getProvider("app").getImmediate();this._storage=new hi(Ge),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var fe=this;return(0,D.Z)(function*(){const pt=fe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=Ht();if(null===fe._heartbeatsCache&&(fe._heartbeatsCache=yield fe._heartbeatsCachePromise),fe._heartbeatsCache.lastSentHeartbeatDate!==bt&&!fe._heartbeatsCache.heartbeats.some(dt=>dt.date===bt))return fe._heartbeatsCache.heartbeats.push({date:bt,agent:pt}),fe._heartbeatsCache.heartbeats=fe._heartbeatsCache.heartbeats.filter(dt=>{const nn=new Date(dt.date).valueOf();return Date.now()-nn<=2592e6}),fe._storage.overwrite(fe._heartbeatsCache)})()}getHeartbeatsHeader(){var fe=this;return(0,D.Z)(function*(){if(null===fe._heartbeatsCache&&(yield fe._heartbeatsCachePromise),null===fe._heartbeatsCache||0===fe._heartbeatsCache.heartbeats.length)return"";const Ge=Ht(),{heartbeatsToSend:pt,unsentEntries:bt}=function Vn(Ae,fe=1024){const Ge=[];let pt=Ae.slice();for(const bt of Ae){const dt=Ge.find(nn=>nn.agent===bt.agent);if(dt){if(dt.dates.push(bt.date),wi(Ge)>fe){dt.dates.pop();break}}else if(Ge.push({agent:bt.agent,dates:[bt.date]}),wi(Ge)>fe){Ge.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Ge,unsentEntries:pt}}(fe._heartbeatsCache.heartbeats),dt=(0,ie.L)(JSON.stringify({version:2,heartbeats:pt}));return fe._heartbeatsCache.lastSentHeartbeatDate=Ge,bt.length>0?(fe._heartbeatsCache.heartbeats=bt,yield fe._storage.overwrite(fe._heartbeatsCache)):(fe._heartbeatsCache.heartbeats=[],fe._storage.overwrite(fe._heartbeatsCache)),dt})()}}function Ht(){return(new Date).toISOString().substring(0,10)}class hi{constructor(fe){this.app=fe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var fe=this;return(0,D.Z)(function*(){return(yield fe._canUseIndexedDBPromise)&&(yield function H(Ae){return q.apply(this,arguments)}(fe.app))||{heartbeats:[]}})()}overwrite(fe){var Ge=this;return(0,D.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const dt=yield Ge.read();return se(Ge.app,{lastSentHeartbeatDate:null!==(pt=fe.lastSentHeartbeatDate)&&void 0!==pt?pt:dt.lastSentHeartbeatDate,heartbeats:fe.heartbeats})}})()}add(fe){var Ge=this;return(0,D.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const dt=yield Ge.read();return se(Ge.app,{lastSentHeartbeatDate:null!==(pt=fe.lastSentHeartbeatDate)&&void 0!==pt?pt:dt.lastSentHeartbeatDate,heartbeats:[...dt.heartbeats,...fe.heartbeats]})}})()}}function wi(Ae){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Ae})).length}!function Bi(Ae){wn(new p.wA("platform-logger",fe=>new zt(fe),"PRIVATE")),wn(new p.wA("heartbeat",fe=>new Mt(fe),"PRIVATE")),Ri(ln,"0.9.22",Ae),Ri(ln,"0.9.22","esm2017"),Ri("fire-js","")}("")},4537:(yt,be,B)=>{B.d(be,{H0:()=>$e,wA:()=>K,zt:()=>ue});var D=B(5861),p=B(9058);class K{constructor(X,ne,le){this.name=X,this.instanceFactory=ne,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const ie="[DEFAULT]";class ue{constructor(X,ne){this.name=X,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const ne=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(ne)){const le=new p.BH;if(this.instancesDeferred.set(ne,le),this.isInitialized(ne)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:ne});Pe&&le.resolve(Pe)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(X){var ne;const le=this.normalizeInstanceIdentifier(X?.identifier),Pe=null!==(ne=X?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch(He){if(Pe)return null;throw He}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function Ee(De){return"EAGER"===De.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[ne,le]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(ne);try{const He=this.getOrInitializeService({instanceIdentifier:Pe});le.resolve(He)}catch{}}}}clearInstance(X=ie){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,D.Z)(function*(){const ne=Array.from(X.instances.values());yield Promise.all([...ne.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...ne.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=ie){return this.instances.has(X)}getOptions(X=ie){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:ne={}}=X,le=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:le,options:ne});for(const[He,Je]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier(He)&&Je.resolve(Pe);return Pe}onInit(X,ne){var le;const Pe=this.normalizeInstanceIdentifier(ne),He=null!==(le=this.onInitCallbacks.get(Pe))&&void 0!==le?le:new Set;He.add(X),this.onInitCallbacks.set(Pe,He);const Je=this.instances.get(Pe);return Je&&X(Je,Pe),()=>{He.delete(X)}}invokeOnInitCallbacks(X,ne){const le=this.onInitCallbacks.get(ne);if(le)for(const Pe of le)try{Pe(X,ne)}catch{}}getOrInitializeService({instanceIdentifier:X,options:ne={}}){let le=this.instances.get(X);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(De=X,De===ie?void 0:De),options:ne}),this.instances.set(X,le),this.instancesOptions.set(X,ne),this.invokeOnInitCallbacks(le,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,le)}catch{}var De;return le||null}normalizeInstanceIdentifier(X=ie){return this.component?this.component.multipleInstances?X:ie:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $e{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const ne=this.getProvider(X.name);if(ne.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);ne.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const ne=new ue(X,this);return this.providers.set(X,ne),ne}getProviders(){return Array.from(this.providers.values())}}},7879:(yt,be,B)=>{B.d(be,{Am:()=>De,Ub:()=>$e,Yd:()=>Ee,in:()=>p});const D=[];var p=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(p||{});const K={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},ie=p.INFO,ue={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},oe=(X,ne,...le)=>{if(ne<X.logLevel)return;const Pe=(new Date).toISOString(),He=ue[ne];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[He](`[${Pe}]  ${X.name}:`,...le)};class Ee{constructor(ne){this.name=ne,this._logLevel=ie,this._logHandler=oe,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in p))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?K[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...ne),this._logHandler(this,p.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...ne),this._logHandler(this,p.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,p.INFO,...ne),this._logHandler(this,p.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,p.WARN,...ne),this._logHandler(this,p.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...ne),this._logHandler(this,p.ERROR,...ne)}}function $e(X){D.forEach(ne=>{ne.setLogLevel(X)})}function De(X,ne){for(const le of D){let Pe=null;ne&&ne.level&&(Pe=K[ne.level]),le.userLogHandler=null===X?null:(He,Je,...Be)=>{const rt=Be.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");Je>=(Pe??He.logLevel)&&X({level:p[Je].toLowerCase(),message:rt,args:Be,type:He.name})}}}},8290:(yt,be,B)=>{B.r(be);var D=B(5861),p=B(3106),K=B(9058),ie=B(534),ue=B(7879),oe=B(7582),Ee=B(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Je=function Pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Be=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),en=new ue.Yd("@firebase/auth");function Ie(v,...h){en.logLevel<=ue.in.ERROR&&en.error(`Auth (${ie.SDK_VERSION}): ${v}`,...h)}function Fe(v,...h){throw Xe(v,...h)}function pe(v,...h){return Xe(v,...h)}function ze(v,h,g){const E=Object.assign(Object.assign({},Be()),{[h]:g});return new K.LL("auth","Firebase",E).create(h,{appName:v.name})}function Ke(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Fe(v,"argument-error"),ze(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(v,...h){if("string"!=typeof v){const g=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(g,...E)}return rt.create(v,...h)}function Te(v,h,...g){if(!v)throw Xe(h,...g)}function Lt(v){const h="INTERNAL ASSERTION FAILED: "+v;throw Ie(h),new Error(h)}function zt(v,h){v||Lt(h)}function Wn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ln(){return"http:"===ur()||"https:"===ur()}function ur(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Rr{constructor(h,g){this.shortDelay=h,this.longDelay=g,zt(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function Mn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ln()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(v,h){zt(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class ye{static initialize(h,g,E){this.fetchImpl=h,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new Rr(3e4,6e4);function Oe(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Ue(v,h,g,E){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.Z)(function*(v,h,g,E,M={}){return et(v,M,(0,D.Z)(function*(){let U={},ee={};E&&("GET"===h?ee=E:U={body:JSON.stringify(E)});const ce=(0,K.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),Ve=yield v._getAdditionalHeaders();return Ve["Content-Type"]="application/json",v.languageCode&&(Ve["X-Firebase-Locale"]=v.languageCode),ye.fetch()(Ut(v,v.config.apiHost,g,ce),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function et(v,h,g){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,D.Z)(function*(v,h,g){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},xe),h);try{const M=new Kn(v),U=yield Promise.race([g(),M.promise]);M.clearNetworkTimeout();const ee=yield U.json();if("needConfirmation"in ee)throw Rn(v,"account-exists-with-different-credential",ee);if(U.ok&&!("errorMessage"in ee))return ee;{const ce=U.ok?ee.errorMessage:ee.error.message,[Ve,ot]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Rn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Ve)throw Rn(v,"email-already-in-use",ee);if("USER_DISABLED"===Ve)throw Rn(v,"user-disabled",ee);const ft=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw ze(v,ft,ot);Fe(v,ft)}}catch(M){if(M instanceof K.ZR)throw M;Fe(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function At(v,h,g,E){return cn.apply(this,arguments)}function cn(){return(cn=(0,D.Z)(function*(v,h,g,E,M={}){const U=yield Ue(v,h,g,E,M);return"mfaPendingCredential"in U&&Fe(v,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function Ut(v,h,g,E){const M=`${h}${g}?${E}`;return v.config.emulator?ge(v.config,M):`${v.config.apiScheme}://${M}`}function Nn(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(pe(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(v,h,g){const E={appName:v.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const M=pe(v,h,E);return M.customData._tokenResponse=g,M}function In(v){return void 0!==v&&void 0!==v.getResponse}function wt(v){return void 0!==v&&void 0!==v.enterprise}class vr{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const g of this.recaptchaEnforcementState)if(g.provider&&g.provider===h)return Nn(g.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Er(){return(Er=(0,D.Z)(function*(v){return(yield Ue(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function On(v,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,D.Z)(function*(v,h){return Ue(v,"GET","/v2/recaptchaConfig",Oe(v,h))})).apply(this,arguments)}function Pt(){return(Pt=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function St(){return(St=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zr(){return(zr=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function fr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function po(){return(po=(0,D.Z)(function*(v,h=!1){const g=(0,K.m9)(v),E=yield g.getIdToken(h),M=is(E);Te(M&&M.exp&&M.auth_time&&M.iat,g.auth,"internal-error");const U="object"==typeof M.firebase?M.firebase:void 0,ee=U?.sign_in_provider;return{claims:M,token:E,authTime:fr(Tt(M.auth_time)),issuedAtTime:fr(Tt(M.iat)),expirationTime:fr(Tt(M.exp)),signInProvider:ee||null,signInSecondFactor:U?.sign_in_second_factor||null}})).apply(this,arguments)}function Tt(v){return 1e3*Number(v)}function is(v){const[h,g,E]=v.split(".");if(void 0===h||void 0===g||void 0===E)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,K.tV)(g);return M?JSON.parse(M):(Ie("Failed to decode base64 JWT payload"),null)}catch(M){return Ie("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Ir(v,h){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,D.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(E){throw E instanceof K.ZR&&function ss({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Ps{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,D.Z)(function*(){yield g.iteration()}),E)}iteration(){var h=this;return(0,D.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class Ei{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ii(v){return di.apply(this,arguments)}function di(){return di=(0,D.Z)(function*(v){var h;const g=v.auth,E=yield v.getIdToken(),M=yield Ir(v,function Dn(v,h){return zr.apply(this,arguments)}(g,{idToken:E}));Te(M?.users.length,g,"internal-error");const U=M.users[0];v._notifyReloadListener(U);const ee=null!==(h=U.providerUserInfo)&&void 0!==h&&h.length?function Wr(v){return v.map(h=>{var{providerId:g}=h,E=(0,oe._T)(h,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(U.providerUserInfo):[],ce=function qr(v,h){return[...v.filter(E=>!h.some(M=>M.providerId===E.providerId)),...h]}(v.providerData,ee),ft=!!v.isAnonymous&&!(v.email&&U.passwordHash||ce?.length),vt={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:ce,metadata:new Ei(U.createdAt,U.lastLoginAt),isAnonymous:ft};Object.assign(v,vt)}),di.apply(this,arguments)}function go(){return(go=(0,D.Z)(function*(v){const h=(0,K.m9)(v);yield Ii(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function te(){return(te=(0,D.Z)(function*(v,h){const g=yield et(v,{},(0,D.Z)(function*(){const E=(0,K.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:M,apiKey:U}=v.config,ee=Ut(v,M,"/v1/token",`key=${U}`),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",ye.fetch()(ee,{method:"POST",headers:ce,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Te(h.idToken,"internal-error"),Te(typeof h.idToken<"u","internal-error"),Te(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function qt(v){const h=is(v);return Te(h,"internal-error"),Te(typeof h.exp<"u","internal-error"),Te(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var E=this;return(0,D.Z)(function*(){return Te(!E.accessToken||E.refreshToken,h,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var E=this;return(0,D.Z)(function*(){const{accessToken:M,refreshToken:U,expiresIn:ee}=yield function ti(v,h){return te.apply(this,arguments)}(h,g);E.updateTokensAndExpiration(M,U,Number(ee))})()}updateTokensAndExpiration(h,g,E){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,g){const{refreshToken:E,accessToken:M,expirationTime:U}=g,ee=new $;return E&&(Te("string"==typeof E,"internal-error",{appName:h}),ee.refreshToken=E),M&&(Te("string"==typeof M,"internal-error",{appName:h}),ee.accessToken=M),U&&(Te("number"==typeof U,"internal-error",{appName:h}),ee.expirationTime=U),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return Lt("not implemented")}}function z(v,h){Te("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class H{constructor(h){var{uid:g,auth:E,stsTokenManager:M}=h,U=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ps(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new Ei(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,D.Z)(function*(){const E=yield Ir(g,g.stsTokenManager.getToken(g.auth,h));return Te(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(h){return function er(v){return po.apply(this,arguments)}(this,h)}reload(){return function Ri(v){return go.apply(this,arguments)}(this)}_assign(h){this!==h&&(Te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new H(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var E=this;return(0,D.Z)(function*(){let M=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),M=!0),g&&(yield Ii(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,D.Z)(function*(){const g=yield h.getIdToken();return yield Ir(h,function Hn(v,h){return Pt.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var E,M,U,ee,ce,Ve,ot,ft;const vt=null!==(E=g.displayName)&&void 0!==E?E:void 0,ae=null!==(M=g.email)&&void 0!==M?M:void 0,ys=null!==(U=g.phoneNumber)&&void 0!==U?U:void 0,es=null!==(ee=g.photoURL)&&void 0!==ee?ee:void 0,Sd=null!==(ce=g.tenantId)&&void 0!==ce?ce:void 0,xa=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,Do=null!==(ot=g.createdAt)&&void 0!==ot?ot:void 0,e_=null!==(ft=g.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:Ma,emailVerified:Rd,isAnonymous:Pd,providerData:Na,stsTokenManager:Jp}=g;Te(Ma&&Jp,h,"internal-error");const vs=$.fromJSON(this.name,Jp);Te("string"==typeof Ma,h,"internal-error"),z(vt,h.name),z(ae,h.name),Te("boolean"==typeof Rd,h,"internal-error"),Te("boolean"==typeof Pd,h,"internal-error"),z(ys,h.name),z(es,h.name),z(Sd,h.name),z(xa,h.name),z(Do,h.name),z(e_,h.name);const wl=new H({uid:Ma,auth:h,email:ae,emailVerified:Rd,displayName:vt,isAnonymous:Pd,photoURL:es,phoneNumber:ys,tenantId:Sd,stsTokenManager:vs,createdAt:Do,lastLoginAt:e_});return Na&&Array.isArray(Na)&&(wl.providerData=Na.map(ef=>Object.assign({},ef))),xa&&(wl._redirectEventId=xa),wl}static _fromIdTokenResponse(h,g,E=!1){return(0,D.Z)(function*(){const M=new $;M.updateFromServerResponse(g);const U=new H({uid:g.localId,auth:h,stsTokenManager:M,isAnonymous:E});return yield Ii(U),U})()}}const q=new Map;function se(v){zt(v instanceof Function,"Expected a class definition");let h=q.get(v);return h?(zt(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,q.set(v,h),h)}const tt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(g,E){var M=this;return(0,D.Z)(function*(){M.storage[g]=E})()}_get(g){var E=this;return(0,D.Z)(function*(){const M=E.storage[g];return void 0===M?null:M})()}_remove(g){var E=this;return(0,D.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return v.type="NONE",v})();function Et(v,h,g){return`firebase:${v}:${h}:${g}`}class xt{constructor(h,g,E){this.persistence=h,this.auth=g,this.userKey=E;const{config:M,name:U}=this.auth;this.fullUserKey=Et(this.userKey,M.apiKey,U),this.fullPersistenceKey=Et("persistence",M.apiKey,U),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,D.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?H._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,D.Z)(function*(){if(g.persistence===h)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,E="authUser"){return(0,D.Z)(function*(){if(!g.length)return new xt(se(tt),h,E);const M=(yield Promise.all(g.map(function(){var ot=(0,D.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let U=M[0]||se(tt);const ee=Et(E,h.config.apiKey,h.name);let ce=null;for(const ot of g)try{const ft=yield ot._get(ee);if(ft){const vt=H._fromJSON(h,ft);ot!==U&&(ce=vt),U=ot;break}}catch{}const Ve=M.filter(ot=>ot._shouldAllowMigration);return U._shouldAllowMigration&&Ve.length?(U=Ve[0],ce&&(yield U._set(ee,ce.toJSON())),yield Promise.all(g.map(function(){var ot=(0,D.Z)(function*(ft){if(ft!==U)try{yield ft._remove(ee)}catch{}});return function(ft){return ot.apply(this,arguments)}}())),new xt(U,h,E)):new xt(U,h,E)})()}}function Mt(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(wi(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ht(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ae(h))return"Blackberry";if(fe(h))return"Webos";if(Vn(h))return"Safari";if((h.includes("chrome/")||hi(h))&&!h.includes("edge/"))return"Chrome";if(Bi(h))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ht(v=(0,K.z$)()){return/firefox\//i.test(v)}function Vn(v=(0,K.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function hi(v=(0,K.z$)()){return/crios\//i.test(v)}function wi(v=(0,K.z$)()){return/iemobile/i.test(v)}function Bi(v=(0,K.z$)()){return/android/i.test(v)}function Ae(v=(0,K.z$)()){return/blackberry/i.test(v)}function fe(v=(0,K.z$)()){return/webos/i.test(v)}function Ge(v=(0,K.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function nn(v=(0,K.z$)()){return Ge(v)||Bi(v)||fe(v)||Ae(v)||/windows phone/i.test(v)||wi(v)}function Un(v,h=[]){let g;switch(v){case"Browser":g=Mt((0,K.z$)());break;case"Worker":g=`${Mt((0,K.z$)())}-${v}`;break;default:g=v}const E=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ie.SDK_VERSION}/${E}`}class Ti{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const E=U=>new Promise((ee,ce)=>{try{ee(h(U))}catch(Ve){ce(Ve)}});E.onAbort=g,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,D.Z)(function*(){if(g.auth.currentUser===h)return;const E=[];try{for(const M of g.queue)yield M(h),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const U of E)try{U()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function ji(){return(ji=(0,D.Z)(function*(v,h={}){return Ue(v,"GET","/v2/passwordPolicy",Oe(v,h))})).apply(this,arguments)}class td{constructor(h){var g,E,M,U;const ee=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(g=ee.minPasswordLength)&&void 0!==g?g:6,ee.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ee.maxPasswordLength),void 0!==ee.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ee.containsLowercaseCharacter),void 0!==ee.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ee.containsUppercaseCharacter),void 0!==ee.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ee.containsNumericCharacter),void 0!==ee.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ee.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(E=h.allowedNonAlphanumericCharacters)||void 0===E?void 0:E.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(U=h.forceUpgradeOnSignin)&&void 0!==U&&U,this.schemaVersion=h.schemaVersion}validatePassword(h){var g,E,M,U,ee,ce;const Ve={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Ve),this.validatePasswordCharacterOptions(h,Ve),Ve.isValid&&(Ve.isValid=null===(g=Ve.meetsMinPasswordLength)||void 0===g||g),Ve.isValid&&(Ve.isValid=null===(E=Ve.meetsMaxPasswordLength)||void 0===E||E),Ve.isValid&&(Ve.isValid=null===(M=Ve.containsLowercaseLetter)||void 0===M||M),Ve.isValid&&(Ve.isValid=null===(U=Ve.containsUppercaseLetter)||void 0===U||U),Ve.isValid&&(Ve.isValid=null===(ee=Ve.containsNumericCharacter)||void 0===ee||ee),Ve.isValid&&(Ve.isValid=null===(ce=Ve.containsNonAlphanumericCharacter)||void 0===ce||ce),Ve}validatePasswordLengthOptions(h,g){const E=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;E&&(g.meetsMinPasswordLength=h.length>=E),M&&(g.meetsMaxPasswordLength=h.length<=M)}validatePasswordCharacterOptions(h,g){let E;this.updatePasswordCharacterOptionsStatuses(g,!1,!1,!1,!1);for(let M=0;M<h.length;M++)E=h.charAt(M),this.updatePasswordCharacterOptionsStatuses(g,E>="a"&&E<="z",E>="A"&&E<="Z",E>="0"&&E<="9",this.allowedNonAlphanumericCharacters.includes(E))}updatePasswordCharacterOptionsStatuses(h,g,E,M,U){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=g)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=E)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=U))}}class ko{constructor(h,g,E,M){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $l(this),this.idTokenSubscription=new $l(this),this.beforeStateQueue=new Ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(h,g){var E=this;return g&&(this._popupRedirectResolver=se(g)),this._initializationPromise=this.queue((0,D.Z)(function*(){var M,U;if(!E._deleted&&(E.persistenceManager=yield xt.create(E,h),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(U=E.currentUser)||void 0===U?void 0:U.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,D.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,D.Z)(function*(){var E;const M=yield g.assertedPersistence.getCurrentUser();let U=M,ee=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ce=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Ve=U?._redirectEventId,ot=yield g.tryRedirectSignIn(h);(!ce||ce===Ve)&&ot?.user&&(U=ot.user,ee=!0)}if(!U)return g.directlySetCurrentUser(null);if(!U._redirectEventId){if(ee)try{yield g.beforeStateQueue.runMiddleware(U)}catch(ce){U=M,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ce))}return U?g.reloadAndSetCurrentUserOrClear(U):g.directlySetCurrentUser(null)}return Te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===U._redirectEventId?g.directlySetCurrentUser(U):g.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(h){var g=this;return(0,D.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,D.Z)(function*(){try{yield Ii(h)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Rs(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,D.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,D.Z)(function*(){const E=h?(0,K.m9)(h):null;return E&&Te(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(h,g=!1){var E=this;return(0,D.Z)(function*(){if(!E._deleted)return h&&Te(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,D.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,D.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,D.Z)(function*(){yield g.assertedPersistence.setPersistence(se(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var g=this;return(0,D.Z)(function*(){g._getPasswordPolicyInternal()||(yield g._updatePasswordPolicy());const E=g._getPasswordPolicyInternal();return E.schemaVersion!==g.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(g._errorFactory.create("unsupported-password-policy-schema-version",{})):E.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,D.Z)(function*(){const g=yield function ni(v){return ji.apply(this,arguments)}(h),E=new td(g);null===h.tenantId?h._projectPasswordPolicy=E:h._tenantPasswordPolicies[h.tenantId]=E})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new K.LL("auth","Firebase",h())}onAuthStateChanged(h,g,E){return this.registerStateListener(this.authStateSubscription,h,g,E)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,E){return this.registerStateListener(this.idTokenSubscription,h,g,E)}authStateReady(){return new Promise((h,g)=>{if(this.currentUser)h();else{const E=this.onAuthStateChanged(()=>{E(),h()},g)}})}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var E=this;return(0,D.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(g);return null===h?M.removeCurrentUser():M.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,D.Z)(function*(){if(!g.redirectPersistenceManager){const E=h&&se(h)||g._popupRedirectResolver;Te(E,g,"argument-error"),g.redirectPersistenceManager=yield xt.create(g,[se(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,D.Z)(function*(){var E,M;return g._isInitialized&&(yield g.queue((0,D.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===h?g._currentUser:(null===(M=g.redirectUser)||void 0===M?void 0:M._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,D.Z)(function*(){if(h===g.currentUser)return g.queue((0,D.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,E,M){if(this._deleted)return()=>{};const U="function"==typeof g?g:g.next.bind(g);let ee=!1;const ce=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(ce,this,"internal-error"),ce.then(()=>{ee||U(this.currentUser)}),"function"==typeof g){const Ve=h.addObserver(g,E,M);return()=>{ee=!0,Ve()}}{const Ve=h.addObserver(g);return()=>{ee=!0,Ve()}}}directlySetCurrentUser(h){var g=this;return(0,D.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,D.Z)(function*(){var g;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const M=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();M&&(E["X-Firebase-Client"]=M);const U=yield h._getAppCheckToken();return U&&(E["X-Firebase-AppCheck"]=U),E})()}_getAppCheckToken(){var h=this;return(0,D.Z)(function*(){var g;const E=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function un(v,...h){en.logLevel<=ue.in.WARN&&en.warn(`Auth (${ie.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function An(v){return(0,K.m9)(v)}class $l{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,K.ne)(g=>this.observer=g)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ws(v){return new Promise((h,g)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=h,E.onerror=M=>{const U=pe("internal-error");U.customData=M,g(U)},E.type="text/javascript",E.charset="UTF-8",function pa(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(E)})}function Lo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Wa{constructor(h){this.type="recaptcha-enterprise",this.auth=An(h)}verify(h="verify",g=!1){var E=this;return(0,D.Z)(function*(){function U(){return U=(0,D.Z)(function*(ce){if(!g){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var Ve=(0,D.Z)(function*(ot,ft){On(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vt=>{if(void 0!==vt.recaptchaKey){const ae=new vr(vt);return null==ce.tenantId?ce._agentRecaptchaConfig=ae:ce._tenantRecaptchaConfigs[ce.tenantId]=ae,ot(ae.siteKey)}ft(new Error("recaptcha Enterprise site key undefined"))}).catch(vt=>{ft(vt)})});return function(ot,ft){return Ve.apply(this,arguments)}}())}),U.apply(this,arguments)}function ee(ce,Ve,ot){const ft=window.grecaptcha;wt(ft)?ft.enterprise.ready(()=>{ft.enterprise.execute(ce,{action:h}).then(vt=>{Ve(vt)}).catch(()=>{Ve("NO_RECAPTCHA")})}):ot(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,Ve)=>{(function M(ce){return U.apply(this,arguments)})(E.auth).then(ot=>{if(!g&&wt(window.grecaptcha))ee(ot,ce,Ve);else{if(typeof window>"u")return void Ve(new Error("RecaptchaVerifier is only supported in browser"));Ws("https://www.google.com/recaptcha/enterprise.js?render="+ot).then(()=>{ee(ot,ce,Ve)}).catch(ft=>{Ve(ft)})}}).catch(ot=>{Ve(ot)})})})()}}function ri(v,h,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,D.Z)(function*(v,h,g,E=!1){const M=new Wa(v);let U;try{U=yield M.verify(g)}catch{U=yield M.verify(g,!0)}const ee=Object.assign({},h);return Object.assign(ee,E?{captchaResp:U}:{captchaResponse:U}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}function wr(v,h,g,E){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,D.Z)(function*(v,h,g,E){var M;if(null!==(M=v._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const U=yield ri(v,h,g,"getOobCode"===g);return E(v,U)}return E(v,h).catch(function(){var U=(0,D.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log(`${g} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ce=yield ri(v,h,g,"getOobCode"===g);return E(v,ce)}return Promise.reject(ee)});return function(ee){return U.apply(this,arguments)}}())}),Vo.apply(this,arguments)}function $i(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function zl(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Uo{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return Lt("not implemented")}_getIdTokenResponse(h){return Lt("not implemented")}_linkToIdToken(h,g){return Lt("not implemented")}_getReauthenticationResolver(h){return Lt("not implemented")}}function Gu(v,h){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:resetPassword",Oe(v,h))})).apply(this,arguments)}function zu(v,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ga(){return(ga=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",Oe(v,h))})).apply(this,arguments)}function an(v,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithPassword",Oe(v,h))})).apply(this,arguments)}function Zr(v,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:sendOobCode",Oe(v,h))})).apply(this,arguments)}function yo(){return(yo=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function Ya(v,h){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function Gi(v,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function it(){return(it=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function fn(){return(fn=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithEmailLink",Oe(v,h))})).apply(this,arguments)}function Ho(){return(Ho=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithEmailLink",Oe(v,h))})).apply(this,arguments)}class Gn extends Uo{constructor(h,g,E,M=null){super("password",E),this._email=h,this._password=g,this._tenantId=M}static _fromEmailAndPassword(h,g){return new Gn(h,g,"password")}static _fromEmailAndCode(h,g,E=null){return new Gn(h,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,D.Z)(function*(){switch(g.signInMethod){case"password":return wr(h,{returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",an);case"emailLink":return function jt(v,h){return fn.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Fe(h,"internal-error")}})()}_linkToIdToken(h,g){var E=this;return(0,D.Z)(function*(){switch(E.signInMethod){case"password":return zu(h,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Kr(v,h){return Ho.apply(this,arguments)}(h,{idToken:g,email:E._email,oobCode:E._password});default:Fe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Yr(v,h){return kn.apply(this,arguments)}function kn(){return(kn=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithIdp",Oe(v,h))})).apply(this,arguments)}class Br extends Uo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Br(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Fe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:M}=g,U=(0,oe._T)(g,["providerId","signInMethod"]);if(!E||!M)return null;const ee=new Br(E,M);return ee.idToken=U.idToken||void 0,ee.accessToken=U.accessToken||void 0,ee.secret=U.secret,ee.nonce=U.nonce,ee.pendingToken=U.pendingToken||null,ee}_getIdTokenResponse(h){return Yr(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,Yr(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Yr(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,K.xO)(g)}return h}}function Zs(){return(Zs=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:sendVerificationCode",Oe(v,h))})).apply(this,arguments)}function us(){return(us=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithPhoneNumber",Oe(v,h))})).apply(this,arguments)}function vo(){return(vo=(0,D.Z)(function*(v,h){const g=yield At(v,"POST","/v1/accounts:signInWithPhoneNumber",Oe(v,h));if(g.temporaryProof)throw Rn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ls={USER_NOT_FOUND:"user-not-found"};function ks(){return(ks=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithPhoneNumber",Oe(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ls)})).apply(this,arguments)}class Ls extends Uo{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Ls({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Ls({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Qa(v,h){return us.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function dr(v,h){return vo.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Os(v,h){return ks.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:E,verificationCode:M}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:E,code:M}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:E,phoneNumber:M,temporaryProof:U}=h;return E||g||M||U?new Ls({verificationId:g,verificationCode:E,phoneNumber:M,temporaryProof:U}):null}}class jr{constructor(h){var g,E,M,U,ee,ce;const Ve=(0,K.zd)((0,K.pd)(h)),ot=null!==(g=Ve.apiKey)&&void 0!==g?g:null,ft=null!==(E=Ve.oobCode)&&void 0!==E?E:null,vt=function cs(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ve.mode)&&void 0!==M?M:null);Te(ot&&ft&&vt,"argument-error"),this.apiKey=ot,this.operation=vt,this.code=ft,this.continueUrl=null!==(U=Ve.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(ee=Ve.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(ce=Ve.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const g=function ds(v){const h=(0,K.zd)((0,K.pd)(v)).link,g=h?(0,K.zd)((0,K.pd)(h)).deep_link_id:null,E=(0,K.zd)((0,K.pd)(v)).deep_link_id;return(E?(0,K.zd)((0,K.pd)(E)).link:null)||E||g||h||v}(h);try{return new jr(g)}catch{return null}}}let Zt=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,E){return Gn._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const M=jr.parseLink(E);return Te(M,"argument-error"),Gn._fromEmailAndCode(g,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ks{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ys extends Ks{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Fs extends Ys{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return Te("providerId"in g&&"signInMethod"in g,"argument-error"),Br._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Te(h.idToken||h.accessToken,"argument-error"),Br._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Fs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Fs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:U,nonce:ee,providerId:ce}=h;if(!E&&!M&&!g&&!U||!ce)return null;try{return new Fs(ce)._credential({idToken:g,accessToken:E,nonce:ee,pendingToken:U})}catch{return null}}}let hs=(()=>{class v extends Ys{constructor(){super("facebook.com")}static credential(g){return Br._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ma=(()=>{class v extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Br._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:M}=g;if(!E&&!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Qs=(()=>{class v extends Ys{constructor(){super("github.com")}static credential(g){return Br._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class tr extends Uo{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Yr(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,Yr(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Yr(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:M,pendingToken:U}=g;return E&&M&&U&&E===M?new tr(E,U):null}static _create(h,g){return new tr(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gr extends Ks{constructor(h){Te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return gr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return gr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=tr.fromJSON(h);return Te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:E}=h;if(!g||!E)return null;try{return tr._create(E,g)}catch{return null}}}let Ln=(()=>{class v extends Ys{constructor(){super("twitter.com")}static credential(g,E){return Br._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=g;if(!E||!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function _a(v,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signUp",Oe(v,h))})).apply(this,arguments)}class fi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,E,M=!1){return(0,D.Z)(function*(){const U=yield H._fromIdTokenResponse(h,E,M),ee=zi(E);return new fi({user:U,providerId:ee,_tokenResponse:E,operationType:g})})()}static _forOperation(h,g,E){return(0,D.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const M=zi(E);return new fi({user:h,providerId:M,_tokenResponse:E,operationType:g})})()}}function zi(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function qu(){return(qu=(0,D.Z)(function*(v){var h;const g=An(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new fi({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield _a(g,{returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class Eo extends K.ZR{constructor(h,g,E,M){var U;super(g.code,g.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Eo.prototype),this.customData={appName:h.name,tenantId:null!==(U=h.tenantId)&&void 0!==U?U:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,g,E,M){return new Eo(h,g,E,M)}}function ph(v,h,g,E){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?Eo._fromErrorAndOperation(v,U,h,E):U})}function nd(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function va(){return va=(0,D.Z)(function*(v,h){const g=(0,K.m9)(v);yield Pn(!0,g,h);const{providerUserInfo:E}=yield function tn(v,h){return St.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),M=nd(E||[]);return g.providerData=g.providerData.filter(U=>M.has(U.providerId)),M.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),va.apply(this,arguments)}function gh(v,h){return mh.apply(this,arguments)}function mh(){return(mh=(0,D.Z)(function*(v,h,g=!1){const E=yield Ir(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return fi._forOperation(v,"link",E)})).apply(this,arguments)}function Pn(v,h,g){return eu.apply(this,arguments)}function eu(){return(eu=(0,D.Z)(function*(v,h,g){yield Ii(h);const M=!1===v?"provider-already-linked":"no-such-provider";Te(nd(h.providerData).has(g)===v,h.auth,M)})).apply(this,arguments)}function _h(v,h){return rd.apply(this,arguments)}function rd(){return(rd=(0,D.Z)(function*(v,h,g=!1){const{auth:E}=v,M="reauthenticate";try{const U=yield Ir(v,ph(E,M,h,v),g);Te(U.idToken,E,"internal-error");const ee=is(U.idToken);Te(ee,E,"internal-error");const{sub:ce}=ee;return Te(v.uid===ce,E,"user-mismatch"),fi._forOperation(v,M,U)}catch(U){throw"auth/user-not-found"===U?.code&&Fe(E,"user-mismatch"),U}})).apply(this,arguments)}function xi(v,h){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,D.Z)(function*(v,h,g=!1){const E="signIn",M=yield ph(v,E,h),U=yield fi._fromIdTokenResponse(v,E,M);return g||(yield v._updateCurrentUser(U.user)),U})).apply(this,arguments)}function Zu(v,h){return id.apply(this,arguments)}function id(){return(id=(0,D.Z)(function*(v,h){return xi(An(v),h)})).apply(this,arguments)}function yh(v,h){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,D.Z)(function*(v,h){const g=(0,K.m9)(v);return yield Pn(!1,g,h.providerId),gh(g,h)})).apply(this,arguments)}function Yu(v,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,D.Z)(function*(v,h){return _h((0,K.m9)(v),h)})).apply(this,arguments)}function Wl(){return(Wl=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithCustomToken",Oe(v,h))})).apply(this,arguments)}function Mi(){return Mi=(0,D.Z)(function*(v,h){const g=An(v),E=yield function $o(v,h){return Wl.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(M.user),M}),Mi.apply(this,arguments)}class qi{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?sd._fromServerResponse(h,g):"totpInfo"in g?Tr._fromServerResponse(h,g):Fe(h,"internal-error")}}class sd extends qi{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new sd(g)}}class Tr extends qi{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new Tr(g)}}function fs(v,h,g){var E;Te((null===(E=g.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Te(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Te(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(Te(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Cr(v){return nu.apply(this,arguments)}function nu(){return(nu=(0,D.Z)(function*(v){const h=An(v);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ru(){return(ru=(0,D.Z)(function*(v,h,g){const E=An(v),M={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};g&&fs(E,M,g),yield wr(E,M,"getOobCode",Ya)})).apply(this,arguments)}function Ea(){return Ea=(0,D.Z)(function*(v,h,g){yield Gu((0,K.m9)(v),{oobCode:h,newPassword:g}).catch(function(){var E=(0,D.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Cr(v),M});return function(M){return E.apply(this,arguments)}}())}),Ea.apply(this,arguments)}function Ia(){return Ia=(0,D.Z)(function*(v,h){yield function jo(v,h){return ga.apply(this,arguments)}((0,K.m9)(v),{oobCode:h})}),Ia.apply(this,arguments)}function Qu(v,h){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,D.Z)(function*(v,h){const g=(0,K.m9)(v),E=yield Gu(g,{oobCode:h}),M=E.requestType;switch(Te(M,g,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(E.mfaInfo,g,"internal-error");default:Te(E.email,g,"internal-error")}let U=null;return E.mfaInfo&&(U=qi._fromServerResponse(An(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:U},operation:M}})).apply(this,arguments)}function Pr(){return(Pr=(0,D.Z)(function*(v,h){const{data:g}=yield Qu((0,K.m9)(v),h);return g.email})).apply(this,arguments)}function hr(){return(hr=(0,D.Z)(function*(v,h,g){const E=An(v),ee=yield wr(E,{returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_a).catch(Ve=>{throw"auth/password-does-not-meet-requirements"===Ve.code&&Cr(v),Ve}),ce=yield fi._fromIdTokenResponse(E,"signIn",ee);return yield E._updateCurrentUser(ce.user),ce})).apply(this,arguments)}function Ni(){return(Ni=(0,D.Z)(function*(v,h,g){const E=An(v),M={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function U(ee,ce){Te(ce.handleCodeInApp,E,"argument-error"),ce&&fs(E,ee,ce)})(M,g),yield wr(E,M,"getOobCode",Gi)})).apply(this,arguments)}function Ft(){return(Ft=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v),M=Zt.credentialWithLink(h,g||Wn());return Te(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Zu(E,M)})).apply(this,arguments)}function wa(){return(wa=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:createAuthUri",Oe(v,h))})).apply(this,arguments)}function qo(){return qo=(0,D.Z)(function*(v,h){const E={identifier:h,continueUri:ln()?Wn():"http://localhost"},{signinMethods:M}=yield function Xu(v,h){return wa.apply(this,arguments)}((0,K.m9)(v),E);return M||[]}),qo.apply(this,arguments)}function iu(){return iu=(0,D.Z)(function*(v,h){const g=(0,K.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&fs(g.auth,M,h);const{email:U}=yield function Ur(v,h){return yo.apply(this,arguments)}(g.auth,M);U!==v.email&&(yield v.reload())}),iu.apply(this,arguments)}function Dr(){return Dr=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&fs(E.auth,U,g);const{email:ee}=yield function $n(v,h){return it.apply(this,arguments)}(E.auth,U);ee!==v.email&&(yield v.reload())}),Dr.apply(this,arguments)}function A(){return(A=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function x(){return x=(0,D.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const E=(0,K.m9)(v),U={idToken:yield E.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},ee=yield Ir(E,function su(v,h){return A.apply(this,arguments)}(E.auth,U));E.displayName=ee.displayName||null,E.photoURL=ee.photoUrl||null;const ce=E.providerData.find(({providerId:Ve})=>"password"===Ve);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ee)}),x.apply(this,arguments)}function ve(v,h,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,D.Z)(function*(v,h,g){const{auth:E}=v,U={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(U.email=h),g&&(U.password=g);const ee=yield Ir(v,zu(E,U));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class rn{constructor(h,g,E={}){this.isNewUser=h,this.providerId=g,this.profile=E}}class dn extends rn{constructor(h,g,E,M){super(h,g,E),this.username=M}}class Kt extends rn{constructor(h,g){super(h,"facebook.com",g)}}class Wt extends dn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class nr extends rn{constructor(h,g){super(h,"google.com",g)}}class xn extends dn{constructor(h,g,E){super(h,"twitter.com",g,E)}}function Fn(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function It(v){var h,g;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},U=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ee=null===(g=null===(h=is(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(ee)return new rn(U,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!E)return null;switch(E){case"facebook.com":return new Kt(U,M);case"github.com":return new Wt(U,M);case"google.com":return new nr(U,M);case"twitter.com":return new xn(U,M,v.screenName||null);case"custom":case"anonymous":return new rn(U,null);default:return new rn(U,E,M)}}(g)}class Vs{constructor(h,g,E){this.type=h,this.credential=g,this.user=E}static _fromIdtoken(h,g){return new Vs("enroll",h,g)}static _fromMfaPendingCredential(h){return new Vs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,E;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Vs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(E=h.multiFactorSession)&&void 0!==E&&E.idToken)return Vs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Kl{constructor(h,g,E){this.session=h,this.hints=g,this.signInResolver=E}static _fromError(h,g){const E=An(h),M=g.customData._serverResponse,U=(M.mfaInfo||[]).map(ce=>qi._fromServerResponse(E,ce));Te(M.mfaPendingCredential,E,"internal-error");const ee=Vs._fromMfaPendingCredential(M.mfaPendingCredential);return new Kl(ee,U,function(){var ce=(0,D.Z)(function*(Ve){const ot=yield Ve._process(E,ee);delete M.mfaInfo,delete M.mfaPendingCredential;const ft=Object.assign(Object.assign({},M),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(g.operationType){case"signIn":const vt=yield fi._fromIdTokenResponse(E,g.operationType,ft);return yield E._updateCurrentUser(vt.user),vt;case"reauthenticate":return Te(g.user,E,"internal-error"),fi._forOperation(g.user,g.operationType,ft);default:Fe(E,"internal-error")}});return function(Ve){return ce.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,D.Z)(function*(){return g.signInResolver(h)})()}}class nl{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>qi._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new nl(h)}getSession(){var h=this;return(0,D.Z)(function*(){return Vs._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,g){var E=this;return(0,D.Z)(function*(){const M=h,U=yield E.getSession(),ee=yield Ir(E.user,M._process(E.user.auth,U,g));return yield E.user._updateTokensIfNecessary(ee),E.user.reload()})()}unenroll(h){var g=this;return(0,D.Z)(function*(){const E="string"==typeof h?h:h.uid,M=yield g.user.getIdToken();try{const U=yield Ir(g.user,function wo(v,h){return Ue(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Oe(v,h))}(g.user.auth,{idToken:M,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ee})=>ee!==E),yield g.user._updateTokensIfNecessary(U),yield g.user.reload()}catch(U){throw U}})()}}const rl=new WeakMap,Ta="__sak";class il{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ta,"1"),this.storage.removeItem(Ta),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zi=(()=>{class v extends il{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sl(){const v=(0,K.z$)();return Vn(v)||Ge(v)}()&&function pr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=nn(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),U=this.localCache[E];M!==U&&g(E,U,M)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((ce,Ve,ot)=>{this.notifyListeners(ce,ot)});const M=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(g.newValue!==ce)null!==g.newValue?this.storage.setItem(M,g.newValue):this.storage.removeItem(M);else if(this.localCache[M]===g.newValue&&!E)return}const U=()=>{const ce=this.storage.getItem(M);!E&&this.localCache[M]===ce||this.notifyListeners(M,ce)},ee=this.storage.getItem(M);!function dt(){return(0,K.w1)()&&10===document.documentMode}()||ee===g.newValue||g.newValue===g.oldValue?U():setTimeout(U,10)}notifyListeners(g,E){this.localCache[g]=E;const M=this.listeners[g];if(M)for(const U of Array.from(M))U(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var M=()=>super._set,U=this;return(0,D.Z)(function*(){yield M().call(U,g,E),U.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,M=this;return(0,D.Z)(function*(){const U=yield E().call(M,g);return M.localCache[g]=JSON.stringify(U),U})()}_remove(g){var E=()=>super._remove,M=this;return(0,D.Z)(function*(){yield E().call(M,g),delete M.localCache[g]})()}}return v.type="LOCAL",v})(),Ko=(()=>{class v extends il{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return v.type="SESSION",v})();let Ca=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(U=>U.isListeningto(g));if(E)return E;const M=new v(g);return this.receivers.push(M),M}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,D.Z)(function*(){const M=g,{eventId:U,eventType:ee,data:ce}=M.data,Ve=E.handlersMap[ee];if(!Ve?.size)return;M.ports[0].postMessage({status:"ack",eventId:U,eventType:ee});const ot=Array.from(Ve).map(function(){var vt=(0,D.Z)(function*(ae){return ae(M.origin,ce)});return function(ae){return vt.apply(this,arguments)}}()),ft=yield function wh(v){return Promise.all(v.map(function(){var h=(0,D.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return h.apply(this,arguments)}}()))}(ot);M.ports[0].postMessage({status:"done",eventId:U,eventType:ee,response:ft})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Da(v="",h=10){let g="";for(let E=0;E<h;E++)g+=Math.floor(10*Math.random());return v+g}class Th{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,E=50){var M=this;return(0,D.Z)(function*(){const U=typeof MessageChannel<"u"?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let ee,ce;return new Promise((Ve,ot)=>{const ft=Da("",20);U.port1.start();const vt=setTimeout(()=>{ot(new Error("unsupported_event"))},E);ce={messageChannel:U,onMessage(ae){const ys=ae;if(ys.data.eventId===ft)switch(ys.data.status){case"ack":clearTimeout(vt),ee=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Ve(ys.data.response);break;default:clearTimeout(vt),clearTimeout(ee),ot(new Error("invalid_response"))}}},M.handlers.add(ce),U.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:h,eventId:ft,data:g},[U.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function rr(){return window}function ol(){return typeof rr().WorkerGlobalScope<"u"&&"function"==typeof rr().importScripts}function Ot(){return(Ot=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const si="firebaseLocalStorageDb",Yo="firebaseLocalStorage",Us="fbase_key";class Qo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ou(v,h){return v.transaction([Yo],h?"readwrite":"readonly").objectStore(Yo)}function au(){const v=indexedDB.open(si,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Yo,{keyPath:Us})}catch(M){g(M)}}),v.addEventListener("success",(0,D.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Yo)?h(E):(E.close(),yield function Cp(){const v=indexedDB.deleteDatabase(si);return new Qo(v).toPromise()}(),h(yield au()))}))})}function Aa(v,h,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,D.Z)(function*(v,h,g){const E=ou(v,!0).put({[Us]:h,value:g});return new Qo(E).toPromise()})).apply(this,arguments)}function Ql(){return(Ql=(0,D.Z)(function*(v,h){const g=ou(v,!1).get(h),E=yield new Qo(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function no(v,h){const g=ou(v,!0).delete(h);return new Qo(g).toPromise()}const ul=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,D.Z)(function*(){return g.db||(g.db=yield au()),g.db})()}_withRetries(g){var E=this;return(0,D.Z)(function*(){let M=0;for(;;)try{const U=yield E._openDb();return yield g(U)}catch(U){if(M++>3)throw U;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,D.Z)(function*(){return ol()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,D.Z)(function*(){g.receiver=Ca._getInstance(function dd(){return ol()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,D.Z)(function*(M,U){return{keyProcessed:(yield g._poll()).includes(U.key)}});return function(M,U){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,D.Z)(function*(M,U){return["keyChanged"]});return function(M,U){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,D.Z)(function*(){var E,M;if(g.activeServiceWorker=yield function ke(){return Ot.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Th(g.activeServiceWorker);const U=yield g.sender._send("ping",{},800);U&&null!==(E=U[0])&&void 0!==E&&E.fulfilled&&null!==(M=U[0])&&void 0!==M&&M.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,D.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function al(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const g=yield au();return yield Aa(g,Ta,"1"),yield no(g,Ta),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,D.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var M=this;return(0,D.Z)(function*(){return M._withPendingWrite((0,D.Z)(function*(){return yield M._withRetries(U=>Aa(U,g,E)),M.localCache[g]=E,M.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,D.Z)(function*(){const M=yield E._withRetries(U=>function to(v,h){return Ql.apply(this,arguments)}(U,g));return E.localCache[g]=M,M})()}_remove(g){var E=this;return(0,D.Z)(function*(){return E._withPendingWrite((0,D.Z)(function*(){return yield E._withRetries(M=>no(M,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,D.Z)(function*(){const E=yield g._withRetries(ee=>{const ce=ou(ee,!1).getAll();return new Qo(ce).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const M=[],U=new Set;for(const{fbase_key:ee,value:ce}of E)U.add(ee),JSON.stringify(g.localCache[ee])!==JSON.stringify(ce)&&(g.notifyListeners(ee,ce),M.push(ee));for(const ee of Object.keys(g.localCache))g.localCache[ee]&&!U.has(ee)&&(g.notifyListeners(ee,null),M.push(ee));return M})()}notifyListeners(g,E){this.localCache[g]=E;const M=this.listeners[g];if(M)for(const U of Array.from(M))U(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),b=1e12;class I{constructor(h){this.auth=h,this.counter=b,this._widgets=new Map}render(h,g){const E=this.counter;return this._widgets.set(E,new R(h,this.auth.name,g||{})),this.counter++,E}reset(h){var g;const E=h||b;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(h){var g;return(null===(g=this._widgets.get(h||b))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,D.Z)(function*(){var E;return null===(E=g._widgets.get(h||b))||void 0===E||E.execute(),""})()}}class R{constructor(h,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof h?document.getElementById(h):h;Te(M,"argument-error",{appName:g}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function N(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const j=Lo("rcb"),Y=new Rr(3e4,6e4);class me{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=rr().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return Te(function at(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&In(rr().grecaptcha)?Promise.resolve(rr().grecaptcha):new Promise((E,M)=>{const U=rr().setTimeout(()=>{M(pe(h,"network-request-failed"))},Y.get());rr()[j]=()=>{rr().clearTimeout(U),delete rr()[j];const ce=rr().grecaptcha;if(!ce||!In(ce))return void M(pe(h,"internal-error"));const Ve=ce.render;ce.render=(ot,ft)=>{const vt=Ve(ot,ft);return this.counter++,vt},this.hostLanguage=g,E(ce)},Ws(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:j,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(U),M(pe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=rr().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $t{load(h){return(0,D.Z)(function*(){return new I(h)})()}clearedOneInstance(){}}const Jt="recaptcha",kt={theme:"light",type:"image"};class Tn{constructor(h,g,E=Object.assign({},kt)){this.parameters=E,this.type=Jt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=An(h),this.isInvisible="invisible"===this.parameters.size,Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;Te(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $t:new me,this.validateStartingState()}verify(){var h=this;return(0,D.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(g)||new Promise(U=>{const ee=ce=>{ce&&(h.tokenChangeListeners.delete(ee),U(ce))};h.tokenChangeListeners.add(ee),h.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof h)h(g);else if("string"==typeof h){const E=rr()[h];"function"==typeof E&&E(g)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,D.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,D.Z)(function*(){Te(ln()&&!ol(),h.auth,"internal-error"),yield function ro(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function rs(v){return Er.apply(this,arguments)}(h.auth);Te(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class io{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Ls._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function so(){return(so=(0,D.Z)(function*(v,h,g){const E=An(v),M=yield Xl(E,h,(0,K.m9)(g));return new io(M,U=>Zu(E,U))})).apply(this,arguments)}function md(){return(md=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v);yield Pn(!1,E,"phone");const M=yield Xl(E.auth,h,(0,K.m9)(g));return new io(M,U=>yh(E,U))})).apply(this,arguments)}function oo(){return(oo=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v),M=yield Xl(E.auth,h,(0,K.m9)(g));return new io(M,U=>Yu(E,U))})).apply(this,arguments)}function Xl(v,h,g){return lu.apply(this,arguments)}function lu(){return lu=(0,D.Z)(function*(v,h,g){var E;const M=yield g.verify();try{let U;if(Te("string"==typeof M,v,"argument-error"),Te(g.type===Jt,v,"argument-error"),U="string"==typeof h?{phoneNumber:h}:h,"session"in U){const ee=U.session;if("phoneNumber"in U)return Te("enroll"===ee.type,v,"internal-error"),(yield function Yn(v,h){return Ue(v,"POST","/v2/accounts/mfaEnrollment:start",Oe(v,h))}(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Te("signin"===ee.type,v,"internal-error");const ce=(null===(E=U.multiFactorHint)||void 0===E?void 0:E.uid)||U.multiFactorUid;return Te(ce,v,"missing-multi-factor-info"),(yield function Jl(v,h){return Ue(v,"POST","/v2/accounts/mfaSignIn:start",Oe(v,h))}(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Bt(v,h){return Zs.apply(this,arguments)}(v,{phoneNumber:U.phoneNumber,recaptchaToken:M});return ee}}finally{g._reset()}}),lu.apply(this,arguments)}function Jo(){return(Jo=(0,D.Z)(function*(v,h){yield gh((0,K.m9)(v),h)})).apply(this,arguments)}let cu=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=An(g)}verifyPhoneNumber(g,E){return Xl(this.auth,g,(0,K.m9)(E))}static credential(g,E){return Ls._fromVerification(g,E)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:M}=g;return E&&M?Ls._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function du(v,h){return h?se(h):(Te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ec extends Uo{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Yr(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Yr(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Yr(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Dh(v){return xi(v.auth,new ec(v),v.bypassAuthState)}function hu(v){const{auth:h,user:g}=v;return Te(g,h,"internal-error"),_h(g,new ec(v),v.bypassAuthState)}function tc(v){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,D.Z)(function*(v){const{auth:h,user:g}=v;return Te(g,h,"internal-error"),gh(g,new ec(v),v.bypassAuthState)})).apply(this,arguments)}class Gm{constructor(h,g,E,M,U=!1){this.auth=h,this.resolver=E,this.user=M,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,D.Z)(function*(E,M){h.pendingPromise={resolve:E,reject:M};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(U){h.reject(U)}});return function(E,M){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,D.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:U,tenantId:ee,error:ce,type:Ve}=h;if(ce)return void g.reject(ce);const ot={auth:g.auth,requestUri:E,sessionId:M,tenantId:ee||void 0,postBody:U||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(ot))}catch(ft){g.reject(ft)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Dh;case"linkViaPopup":case"linkViaRedirect":return tc;case"reauthViaPopup":case"reauthViaRedirect":return hu;default:Fe(this.auth,"internal-error")}}resolve(h){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ap=new Rr(2e3,1e4);function Sh(){return(Sh=(0,D.Z)(function*(v,h,g){const E=An(v);Ke(v,h,Ks);const M=du(E,g);return new hl(E,"signInViaPopup",h,M).executeNotNull()})).apply(this,arguments)}function nc(){return(nc=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v);Ke(E.auth,h,Ks);const M=du(E.auth,g);return new hl(E.auth,"reauthViaPopup",h,M,E).executeNotNull()})).apply(this,arguments)}function dl(){return(dl=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v);Ke(E.auth,h,Ks);const M=du(E.auth,g);return new hl(E.auth,"linkViaPopup",h,M,E).executeNotNull()})).apply(this,arguments)}let hl=(()=>{class v extends Gm{constructor(g,E,M,U,ee){super(g,E,U,ee),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,D.Z)(function*(){const E=yield g.execute();return Te(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,D.Z)(function*(){zt(1===g.filter.length,"Popup operations only handle one event");const E=Da();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(M=>{g.reject(M)}),g.resolver._isIframeWebStorageSupported(g.auth,M=>{M||g.reject(pe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Ap.get())};g()}}return v.currentPopupAction=null,v})();const _v="pendingRedirect",Xo=new Map;class Ph extends Gm{constructor(h,g,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,D.Z)(function*(){let E=Xo.get(g.auth._key());if(!E){try{const U=(yield function xh(v,h){return fu.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;E=()=>Promise.resolve(U)}catch(M){E=()=>Promise.reject(M)}Xo.set(g.auth._key(),E)}return g.bypassAuthState||Xo.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,E=this;return(0,D.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(E,h);if("unknown"!==h.type){if(h.eventId){const M=yield E.auth._redirectUserForId(h.eventId);if(M)return E.user=M,g().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function fu(){return(fu=(0,D.Z)(function*(v,h){const g=pu(h),E=ir(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(g));return yield E._remove(g),M})).apply(this,arguments)}function ao(v,h){return fl.apply(this,arguments)}function fl(){return(fl=(0,D.Z)(function*(v,h){return ir(v)._set(pu(h),"true")})).apply(this,arguments)}function Bs(v,h){Xo.set(v._key(),h)}function ir(v){return se(v._redirectPersistence)}function pu(v){return Et(_v,v.config.apiKey,v.name)}function pl(v,h,g){return function ic(v,h,g){return sc.apply(this,arguments)}(v,h,g)}function sc(){return(sc=(0,D.Z)(function*(v,h,g){const E=An(v);Ke(v,h,Ks),yield E._initializationPromise;const M=du(E,g);return yield ao(M,E),M._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Nh(v,h,g){return function yv(v,h,g){return Oh.apply(this,arguments)}(v,h,g)}function Oh(){return(Oh=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v);Ke(E.auth,h,Ks),yield E.auth._initializationPromise;const M=du(E.auth,g);yield ao(M,E.auth);const U=yield _u(E);return M._openRedirect(E.auth,h,"reauthViaRedirect",U)})).apply(this,arguments)}function zm(v,h,g){return function qm(v,h,g){return gu.apply(this,arguments)}(v,h,g)}function gu(){return(gu=(0,D.Z)(function*(v,h,g){const E=(0,K.m9)(v);Ke(E.auth,h,Ks),yield E.auth._initializationPromise;const M=du(E.auth,g);yield Pn(!1,E,h.providerId),yield ao(M,E.auth);const U=yield _u(E);return M._openRedirect(E.auth,h,"linkViaRedirect",U)})).apply(this,arguments)}function gl(){return(gl=(0,D.Z)(function*(v,h){return yield An(v)._initializationPromise,To(v,h,!1)})).apply(this,arguments)}function To(v,h){return kh.apply(this,arguments)}function kh(){return(kh=(0,D.Z)(function*(v,h,g=!1){const E=An(v),M=du(E,h),ee=yield new Ph(E,M,g).execute();return ee&&!g&&(delete ee.user._redirectEventId,yield E._persistUserIfCurrent(ee.user),yield E._setRedirectUser(null,h)),ee})).apply(this,arguments)}function _u(v){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,D.Z)(function*(v){const h=Da(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class bp{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(g=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Rp(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sp(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var E;if(h.error&&!Sp(h)){const M=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(pe(this.auth,M))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const E=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ki(h))}saveEventToCache(h){this.cachedEventUids.add(ki(h)),this.lastProcessedEventTime=Date.now()}}function ki(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Sp({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function oc(v){return yd.apply(this,arguments)}function yd(){return(yd=(0,D.Z)(function*(v,h={}){return Ue(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Pp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fh=/^https?/;function yu(){return(yu=(0,D.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield oc(v);for(const g of h)try{if(uc(g))return}catch{}Fe(v,"unauthorized-domain")})).apply(this,arguments)}function uc(v){const h=Wn(),{protocol:g,hostname:E}=new URL(h);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===E?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&ee.hostname===E}if(!Fh.test(g))return!1;if(Pp.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const Wm=new Rr(3e4,6e4);function ml(){const v=rr().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let lc=null;const vv=new Rr(5e3,15e3),Vh="__/auth/iframe",Uh="emulator/auth/iframe",uw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$r=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ev(v){const h=v.config;Te(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?ge(h,Uh):`https://${v.config.authDomain}/${Vh}`,E={apiKey:h.apiKey,appName:v.name,v:ie.SDK_VERSION},M=$r.get(v.config.apiHost);M&&(E.eid=M);const U=v._getFrameworks();return U.length&&(E.fw=U.join(",")),`${g}?${(0,K.xO)(E).slice(1)}`}function Mp(){return Mp=(0,D.Z)(function*(v){const h=yield function xp(v){return lc=lc||function ea(v){return new Promise((h,g)=>{var E,M,U;function ee(){ml(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ml(),g(pe(v,"network-request-failed"))},timeout:Wm.get()})}if(null!==(M=null===(E=rr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)h(gapi.iframes.getContext());else{if(null===(U=rr().gapi)||void 0===U||!U.load){const ce=Lo("iframefcb");return rr()[ce]=()=>{gapi.load?ee():g(pe(v,"network-request-failed"))},Ws(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Ve=>g(Ve))}ee()}}).catch(h=>{throw lc=null,h})}(v),lc}(v),g=rr().gapi;return Te(g,v,"internal-error"),h.open({where:document.body,url:Ev(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uw,dontclear:!0},E=>new Promise(function(){var M=(0,D.Z)(function*(U,ee){yield E.restyle({setHideOnLeave:!1});const ce=pe(v,"network-request-failed"),Ve=rr().setTimeout(()=>{ee(ce)},vv.get());function ot(){rr().clearTimeout(Ve),U(E)}E.ping(ot).then(ot,()=>{ee(ce)})});return function(U,ee){return M.apply(this,arguments)}}()))}),Mp.apply(this,arguments)}const Iv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ms{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jh="__/auth/handler",hc="emulator/auth/handler",Op=encodeURIComponent("fac");function fc(v,h,g,E,M,U){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,D.Z)(function*(v,h,g,E,M,U){Te(v.config.authDomain,v,"auth-domain-config-required"),Te(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:E,v:ie.SDK_VERSION,eventId:M};if(h instanceof Ks){h.setDefaultLanguage(v.languageCode),ee.providerId=h.providerId||"",(0,K.xb)(h.getCustomParameters())||(ee.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ft,vt]of Object.entries(U||{}))ee[ft]=vt}if(h instanceof Ys){const ft=h.getScopes().filter(vt=>""!==vt);ft.length>0&&(ee.scopes=ft.join(","))}v.tenantId&&(ee.tid=v.tenantId);const ce=ee;for(const ft of Object.keys(ce))void 0===ce[ft]&&delete ce[ft];const Ve=yield v._getAppCheckToken(),ot=Ve?`#${Op}=${encodeURIComponent(Ve)}`:"";return`${function Km({config:v}){return v.emulator?ge(v,hc):`https://${v.authDomain}/${jh}`}(v)}?${(0,K.xO)(ce).slice(1)}${ot}`})).apply(this,arguments)}const gi="webStorageSupport",ta=class $h{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ko,this._completeRedirectFn=To,this._overrideRedirectResult=Bs}_openPopup(h,g,E,M){var U=this;return(0,D.Z)(function*(){var ee;zt(null===(ee=U.eventManagers[h._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const ce=yield fc(h,g,E,Wn(),M);return function Ki(v,h,g,E=500,M=600){const U=Math.max((window.screen.availHeight-M)/2,0).toString(),ee=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const Ve=Object.assign(Object.assign({},Iv),{width:E.toString(),height:M.toString(),top:U,left:ee}),ot=(0,K.z$)().toLowerCase();g&&(ce=hi(ot)?"_blank":g),Ht(ot)&&(h=h||"http://localhost",Ve.scrollbars="yes");const ft=Object.entries(Ve).reduce((ae,[ys,es])=>`${ae}${ys}=${es},`,"");if(function bt(v=(0,K.z$)()){var h;return Ge(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(ot)&&"_self"!==ce)return function Np(v,h){const g=document.createElement("a");g.href=v,g.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(h||"",ce),new ms(null);const vt=window.open(h||"",ce,ft);Te(vt,v,"popup-blocked");try{vt.focus()}catch{}return new ms(vt)}(h,ce,Da())})()}_openRedirect(h,g,E,M){var U=this;return(0,D.Z)(function*(){return yield U._originValidation(h),function cd(v){rr().location.href=v}(yield fc(h,g,E,Wn(),M)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:M,promise:U}=this.eventManagers[g];return M?Promise.resolve(M):(zt(U,"If manager is not set, promise should be"),U)}const E=this.initAndGetManager(h);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(h){var g=this;return(0,D.Z)(function*(){const E=yield function cc(v){return Mp.apply(this,arguments)}(h),M=new bp(h);return E.register("authEvent",U=>(Te(U?.authEvent,h,"invalid-auth-event"),{status:M.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:M},g.iframes[h._key()]=E,M})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(gi,{type:gi},M=>{var U;const ee=null===(U=M?.[0])||void 0===U?void 0:U[gi];void 0!==ee&&g(!!ee),Fe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ac(v){return yu.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return nn()||Vn()||Ge()}};class lw{constructor(h){this.factorId=h}_process(h,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,E);case"signin":return this._finalizeSignIn(h,g.credential);default:return Lt("unexpected MultiFactorSessionType")}}}class vd extends lw{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new vd(h)}_finalizeEnroll(h,g,E){return function Ip(v,h){return Ue(v,"POST","/v2/accounts/mfaEnrollment:finalize",Oe(v,h))}(h,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function fd(v,h){return Ue(v,"POST","/v2/accounts/mfaSignIn:finalize",Oe(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ed=(()=>{class v{constructor(){}static assertion(g){return vd._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var kp="@firebase/auth";class Id{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,D.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(E=>{h(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Mr(){return window}(0,K.Pz)("authIdTokenMaxAge"),function na(v){(0,ie._registerComponent)(new Ee.wA("auth",(h,{options:g})=>{const E=h.getProvider("app").getImmediate(),M=h.getProvider("heartbeat"),U=h.getProvider("app-check-internal"),{apiKey:ee,authDomain:ce}=E.options;Te(ee&&!ee.includes(":"),"invalid-api-key",{appName:E.name});const Ve={apiKey:ee,authDomain:ce,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(v)},ot=new ko(E,M,U,Ve);return function Ka(v,h){const g=h?.persistence||[],E=(Array.isArray(g)?g:[g]).map(se);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(E,h?.popupRedirectResolver)}(ot,g),ot},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,E)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new Ee.wA("auth-internal",h=>{const g=An(h.getProvider("auth").getImmediate());return new Id(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(kp,"1.3.2",function Ym(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ie.registerVersion)(kp,"1.3.2","esm2017")}("Browser");function vu(){return vu=(0,D.Z)(function*(v,h,g){var E;const{BuildInfo:M}=Mr();zt(h.sessionId,"AuthEvent did not contain a session ID");const U=yield function ba(v){return Wh.apply(this,arguments)}(h.sessionId),ee={};return Ge()?ee.ibi=M.packageName:Bi()?ee.apn=M.packageName:Fe(v,"operation-not-supported-in-this-environment"),M.displayName&&(ee.appDisplayName=M.displayName),ee.sessionId=U,fc(v,g,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,ee)}),vu.apply(this,arguments)}function Di(){return(Di=(0,D.Z)(function*(v){const{BuildInfo:h}=Mr(),g={};Ge()?g.iosBundleId=h.packageName:Bi()?g.androidPackageName=h.packageName:Fe(v,"operation-not-supported-in-this-environment"),yield oc(v,g)})).apply(this,arguments)}function qh(){return(qh=(0,D.Z)(function*(v,h,g){const{cordova:E}=Mr();let M=()=>{};try{yield new Promise((U,ee)=>{let ce=null;function Ve(){var vt;U();const ae=null===(vt=E.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof ae&&ae(),"function"==typeof g?.close&&g.close()}function ot(){ce||(ce=window.setTimeout(()=>{ee(pe(v,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===document?.visibilityState&&ot()}h.addPassiveListener(Ve),document.addEventListener("resume",ot,!1),Bi()&&document.addEventListener("visibilitychange",ft,!1),M=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",ft,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function Wh(){return(Wh=(0,D.Z)(function*(v){const h=function jp(v){if(zt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),g=new Uint8Array(h);for(let E=0;E<v.length;E++)g[E]=v.charCodeAt(E);return g}(v),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class _c extends bp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,D.Z)(function*(){yield h.initPromise})()}}function _s(v){return mi.apply(this,arguments)}function mi(){return(mi=(0,D.Z)(function*(v){const h=yield yl()._get(yc(v));return h&&(yield yl()._remove(yc(v))),h})).apply(this,arguments)}function $p(){const v=[];for(let g=0;g<20;g++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function yl(){return se(Zi)}function yc(v){return Et("authEvent",v.config.apiKey,v.name)}function Gp(v){if(!v?.includes("?"))return{};const[h,...g]=v.split("?");return(0,K.zd)(g.join("?"))}const cw=class Xm{constructor(){this._redirectPersistence=Ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=To,this._overrideRedirectResult=Bs}_initialize(h){var g=this;return(0,D.Z)(function*(){const E=h._key();let M=g.eventManagers.get(E);return M||(M=new _c(h),g.eventManagers.set(E,M),g.attachCallbackListeners(h,M)),M})()}_openPopup(h){Fe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,E,M){var U=this;return(0,D.Z)(function*(){!function Bp(v){var h,g,E,M,U,ee,ce,Ve,ot,ft;const vt=Mr();Te("function"==typeof(null===(h=vt?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(typeof(null===(g=vt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(U=null===(M=null===(E=vt?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===U?void 0:U.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Ve=null===(ce=null===(ee=vt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Ve?void 0:Ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(ft=null===(ot=vt?.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===ft?void 0:ft.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const ee=yield U._initialize(h);yield ee.initialized(),ee.resetRedirect(),function Mh(){Xo.clear()}(),yield U._originValidation(h);const ce=function Hp(v,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:$p(),postBody:null,tenantId:v.tenantId,error:pe(v,"no-auth-event")}}(h,E,M);yield function Sa(v,h){return yl()._set(yc(v),h)}(h,ce);const Ve=yield function Jm(v,h,g){return vu.apply(this,arguments)}(h,ce,g),ot=yield function Up(v){const{cordova:h}=Mr();return new Promise(g=>{h.plugins.browsertab.isAvailable(E=>{let M=null;E?h.plugins.browsertab.openUrl(v):M=h.InAppBrowser.open(v,function pt(v=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(M)})})}(Ve);return function zn(v,h,g){return qh.apply(this,arguments)}(h,ee,ot)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function gc(v){return Di.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:E,handleOpenURL:M,BuildInfo:U}=Mr(),ee=setTimeout((0,D.Z)(function*(){yield _s(h),g.onEvent(Tv())}),500),ce=function(){var ft=(0,D.Z)(function*(vt){clearTimeout(ee);const ae=yield _s(h);let ys=null;ae&&vt?.url&&(ys=function Cd(v,h){var g,E;const M=function Dd(v){const h=Gp(v),g=h.link?decodeURIComponent(h.link):void 0,E=Gp(g).link,M=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Gp(M).link||M||E||g||v}(h);if(M.includes("/__/auth/callback")){const U=Gp(M),ee=U.firebaseError?function Zh(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(U.firebaseError)):null,ce=null===(E=null===(g=ee?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Ve=ce?pe(ce):null;return Ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(ae,vt.url)),g.onEvent(ys||Tv())});return function(ae){return ft.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const Ve=M,ot=`${U.packageName.toLowerCase()}://`;Mr().handleOpenURL=function(){var ft=(0,D.Z)(function*(vt){if(vt.toLowerCase().startsWith(ot)&&ce({url:vt}),"function"==typeof Ve)try{Ve(vt)}catch(ae){console.error(ae)}});return function(vt){return ft.apply(this,arguments)}}()}};function Tv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function Eu(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Qh(v=(0,K.z$)()){return!("file:"!==Eu()&&"ionic:"!==Eu()&&"capacitor:"!==Eu()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ad(){try{const v=self.localStorage,h=Da();if(v)return v.setItem(h,"1"),v.removeItem(h),!function El(v=(0,K.z$)()){return function Co(){return(0,K.w1)()&&11===document?.documentMode}()||function Ra(v=(0,K.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,K.hl)()}catch{return qe()&&(0,K.hl)()}return!1}function qe(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sr(){return(function vl(){return"http:"===Eu()||"https:"===Eu()}()||(0,K.ru)()||Qh())&&!function oi(){return(0,K.b$)()||(0,K.UG)()}()&&Ad()&&!qe()}function Yi(){return Qh()&&typeof document<"u"}function gt(){return(gt=(0,D.Z)(function*(){return!!Yi()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},nt=Te,we="persistence";function Nr(v){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,D.Z)(function*(v){yield v._initializationPromise;const h=Ji(),g=Et(we,v.config.apiKey,v.name);h&&h.setItem(g,v._getPersistence())})).apply(this,arguments)}function Ji(){var v;try{return(null===(v=function Rt(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Wp=Te;class Pa{constructor(){this.browserResolver=se(ta),this.cordovaResolver=se(cw),this.underlyingResolver=null,this._redirectPersistence=Ko,this._completeRedirectFn=To,this._overrideRedirectResult=Bs}_initialize(h){var g=this;return(0,D.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,E,M){var U=this;return(0,D.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openPopup(h,g,E,M)})()}_openRedirect(h,g,E,M){var U=this;return(0,D.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openRedirect(h,g,E,M)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Yi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,D.Z)(function*(){if(h.underlyingResolver)return;const g=yield function qp(){return gt.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Xh(v){return v.unwrap()}function bd(v){return Zp(v)}function Zp(v){const{_tokenResponse:h}=v instanceof K.ZR?v.customData:v;if(!h)return null;if(!(v instanceof K.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return cu.credentialFromResult(v);const g=h.providerId;if(!g||g===De.PASSWORD)return null;let E;switch(g){case De.GOOGLE:E=ma;break;case De.FACEBOOK:E=hs;break;case De.GITHUB:E=Qs;break;case De.TWITTER:E=Ln;break;default:const{oauthIdToken:M,oauthAccessToken:U,oauthTokenSecret:ee,pendingToken:ce,nonce:Ve}=h;return U||ee||M||ce?ce?g.startsWith("saml.")?tr._create(g,ce):Br._fromParams({providerId:g,signInMethod:g,pendingToken:ce,idToken:M,accessToken:U}):new Fs(g).credential({idToken:M,accessToken:U,rawNonce:Ve}):null}return v instanceof K.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Xi(v,h){return h.catch(g=>{throw g instanceof K.ZR&&function Av(v,h){var g;const E=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Kp(v,function eo(v,h){var g;const E=(0,K.m9)(v),M=h;return Te(h.customData.operationType,E,"argument-error"),Te(null===(g=M.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Kl._fromError(E,M)}(v,h));else if(E){const M=Zp(h),U=h;M&&(U.credential=M,U.tenantId=E.tenantId||void 0,U.email=E.email||void 0,U.phoneNumber=E.phoneNumber||void 0)}}(v,g),g}).then(g=>{const M=g.user;return{operationType:g.operationType,credential:bd(g),additionalUserInfo:Fn(g),user:bn.getOrCreate(M)}})}function Gt(v,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,D.Z)(function*(v,h){const g=yield h;return{verificationId:g.verificationId,confirm:E=>Xi(v,g.confirm(E))}})).apply(this,arguments)}class Kp{constructor(h,g){this.resolver=g,this.auth=function Ai(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Xi(Xh(this.auth),this.resolver.resolveSignIn(h))}}class bn{constructor(h){this._delegate=h,this.multiFactor=function Ih(v){const h=(0,K.m9)(v);return rl.has(h)||rl.set(h,nl._fromUser(h)),rl.get(h)}(h)}static getOrCreate(h){return bn.USER_MAP.has(h)||bn.USER_MAP.set(h,new bn(h)),bn.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,D.Z)(function*(){return Xi(g.auth,yh(g._delegate,h))})()}linkWithPhoneNumber(h,g){var E=this;return(0,D.Z)(function*(){return Gt(E.auth,function gd(v,h,g){return md.apply(this,arguments)}(E._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,D.Z)(function*(){return Xi(g.auth,function rc(v,h,g){return dl.apply(this,arguments)}(g._delegate,h,Pa))})()}linkWithRedirect(h){var g=this;return(0,D.Z)(function*(){return yield Nr(An(g.auth)),zm(g._delegate,h,Pa)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,D.Z)(function*(){return Xi(g.auth,Yu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Gt(this.auth,function uu(v,h,g){return oo.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Xi(this.auth,function Rh(v,h,g){return nc.apply(this,arguments)}(this._delegate,h,Pa))}reauthenticateWithRedirect(h){var g=this;return(0,D.Z)(function*(){return yield Nr(An(g.auth)),Nh(g._delegate,h,Pa)})()}sendEmailVerification(h){return function vh(v,h){return iu.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,D.Z)(function*(){return yield function ya(v,h){return va.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function L(v,h){return ve((0,K.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function Q(v,h){return ve((0,K.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function cl(v,h){return Jo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function F(v,h){return x.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Eh(v,h,g){return Dr.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const Dt=Te;let vc=(()=>{class v{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=g.options;Dt(M,"invalid-api-key",{appName:g.name}),Dt(M,"invalid-api-key",{appName:g.name});const U=typeof window<"u"?Pa:void 0;this._delegate=E.initialize({options:{persistence:Yp(M,g.name),popupRedirectResolver:U}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function $u(v,h,g){const E=An(v);Te(E._canInitEmulator,E,"emulator-config-failed"),Te(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const M=!!g?.disableWarnings,U=$i(h),{host:ee,port:ce}=function hh(v){const h=$i(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const U=M[1];return{host:U,port:zl(E.substr(U.length+1))}}{const[U,ee]=E.split(":");return{host:U,port:zl(ee)}}}(h);E.config.emulator={url:`${U}//${ee}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ee,port:ce,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function fh(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,E)}applyActionCode(g){return function zo(v,h){return Ia.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Qu(this._delegate,g)}confirmPasswordReset(g,E){return function Go(v,h,g){return Ea.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var M=this;return(0,D.Z)(function*(){return Xi(M._delegate,function Ci(v,h,g){return hr.apply(this,arguments)}(M._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ad(v,h){return qo.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function lt(v,h){const g=jr.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,D.Z)(function*(){Dt(sr(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function mu(v,h){return gl.apply(this,arguments)}(g._delegate,Pa);return E?Xi(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Cv(v,h){An(v)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,E,M){const{next:U,error:ee,complete:ce}=mn(g,E,M);return this._delegate.onAuthStateChanged(U,ee,ce)}onIdTokenChanged(g,E,M){const{next:U,error:ee,complete:ce}=mn(g,E,M);return this._delegate.onIdTokenChanged(U,ee,ce)}sendSignInLinkToEmail(g,E){return function Zl(v,h,g){return Ni.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Io(v,h,g){return ru.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,D.Z)(function*(){let M;switch(function We(v,h){nt(Object.values(Qi).includes(h),v,"invalid-persistence-type"),(0,K.b$)()?nt(h!==Qi.SESSION,v,"unsupported-persistence-type"):(0,K.UG)()?nt(h===Qi.NONE,v,"unsupported-persistence-type"):qe()?nt(h===Qi.NONE||h===Qi.LOCAL&&(0,K.hl)(),v,"unsupported-persistence-type"):nt(h===Qi.NONE||Ad(),v,"unsupported-persistence-type")}(E._delegate,g),g){case Qi.SESSION:M=Ko;break;case Qi.LOCAL:M=(yield se(ul)._isAvailable())?ul:Zi;break;case Qi.NONE:M=tt;break;default:return Fe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Xi(this._delegate,function ql(v){return qu.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Xi(this._delegate,Zu(this._delegate,g))}signInWithCustomToken(g){return Xi(this._delegate,function Js(v,h){return Mi.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Xi(this._delegate,function W(v,h,g){return Zu((0,K.m9)(v),Zt.credential(h,g)).catch(function(){var E=(0,D.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Cr(v),M});return function(M){return E.apply(this,arguments)}}())}(this._delegate,g,E))}signInWithEmailLink(g,E){return Xi(this._delegate,function od(v,h,g){return Ft.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return Gt(this._delegate,function ll(v,h,g){return so.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,D.Z)(function*(){return Dt(sr(),E._delegate,"operation-not-supported-in-this-environment"),Xi(E._delegate,function bh(v,h,g){return Sh.apply(this,arguments)}(E._delegate,g,Pa))})()}signInWithRedirect(g){var E=this;return(0,D.Z)(function*(){return Dt(sr(),E._delegate,"operation-not-supported-in-this-environment"),yield Nr(E._delegate),pl(E._delegate,g,Pa)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Me(v,h){return Pr.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Qi,v})();function mn(v,h,g){let E=v;"function"!=typeof v&&({next:E,error:h,complete:g}=v);const M=E;return{next:ee=>M(ee&&bn.getOrCreate(ee)),error:h,complete:g}}function Yp(v,h){const g=function Dv(v,h){const g=Ji();if(!g)return[];const E=Et(we,v,h);switch(g.getItem(E)){case Qi.NONE:return[tt];case Qi.LOCAL:return[ul,Ko];case Qi.SESSION:return[Ko];default:return[]}}(v,h);if(typeof self<"u"&&!g.includes(ul)&&g.push(ul),typeof window<"u")for(const E of[Zi,Ko])g.includes(E)||g.push(E);return g.includes(tt)||g.push(tt),g}class jn{constructor(){this.providerId="phone",this._delegate=new cu(Xh(p.Z.auth()))}static credential(h,g){return cu.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}jn.PHONE_SIGN_IN_METHOD=cu.PHONE_SIGN_IN_METHOD,jn.PROVIDER_ID=cu.PROVIDER_ID;const st=Te;class ra{constructor(h,g,E=p.Z.app()){var M;st(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Tn(E.auth(),h,g),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Il(v){v.INTERNAL.registerComponent(new Ee.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new vc(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zt,FacebookAuthProvider:hs,GithubAuthProvider:Qs,GoogleAuthProvider:ma,OAuthProvider:Fs,SAMLAuthProvider:gr,PhoneAuthProvider:jn,PhoneMultiFactorGenerator:Ed,RecaptchaVerifier:ra,TwitterAuthProvider:Ln,Auth:vc,AuthCredential:Uo,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.8")}(p.Z)},5861:(yt,be,B)=>{function D(K,ie,ue,oe,Ee,$e,De){try{var X=K[$e](De),ne=X.value}catch(le){return void ue(le)}X.done?ie(ne):Promise.resolve(ne).then(oe,Ee)}function p(K){return function(){var ie=this,ue=arguments;return new Promise(function(oe,Ee){var $e=K.apply(ie,ue);function De(ne){D($e,oe,Ee,De,X,"next",ne)}function X(ne){D($e,oe,Ee,De,X,"throw",ne)}De(void 0)})}}B.d(be,{Z:()=>p})},7582:(yt,be,B)=>{function ie(ge,ye){var xe={};for(var Ce in ge)Object.prototype.hasOwnProperty.call(ge,Ce)&&ye.indexOf(Ce)<0&&(xe[Ce]=ge[Ce]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ce=Object.getOwnPropertySymbols(ge);Oe<Ce.length;Oe++)ye.indexOf(Ce[Oe])<0&&Object.prototype.propertyIsEnumerable.call(ge,Ce[Oe])&&(xe[Ce[Oe]]=ge[Ce[Oe]])}return xe}function le(ge,ye,xe,Ce){return new(xe||(xe=Promise))(function(Ue,_t){function et(cn){try{At(Ce.next(cn))}catch(Ut){_t(Ut)}}function Zn(cn){try{At(Ce.throw(cn))}catch(Ut){_t(Ut)}}function At(cn){cn.done?Ue(cn.value):function Oe(Ue){return Ue instanceof xe?Ue:new xe(function(_t){_t(Ue)})}(cn.value).then(et,Zn)}At((Ce=Ce.apply(ge,ye||[])).next())})}function Ie(ge){return this instanceof Ie?(this.v=ge,this):new Ie(ge)}function Fe(ge,ye,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ce=xe.apply(ge,ye||[]),Ue=[];return Oe={},_t("next"),_t("throw"),_t("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function _t(Nn){Ce[Nn]&&(Oe[Nn]=function(Kn){return new Promise(function(Rn,In){Ue.push([Nn,Kn,Rn,In])>1||et(Nn,Kn)})})}function et(Nn,Kn){try{!function Zn(Nn){Nn.value instanceof Ie?Promise.resolve(Nn.value.v).then(At,cn):Ut(Ue[0][2],Nn)}(Ce[Nn](Kn))}catch(Rn){Ut(Ue[0][3],Rn)}}function At(Nn){et("next",Nn)}function cn(Nn){et("throw",Nn)}function Ut(Nn,Kn){Nn(Kn),Ue.shift(),Ue.length&&et(Ue[0][0],Ue[0][1])}}function ze(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,ye=ge[Symbol.asyncIterator];return ye?ye.call(ge):(ge=function Be(ge){var ye="function"==typeof Symbol&&Symbol.iterator,xe=ye&&ge[ye],Ce=0;if(xe)return xe.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Ce>=ge.length&&(ge=void 0),{value:ge&&ge[Ce++],done:!ge}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),xe={},Ce("next"),Ce("throw"),Ce("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function Ce(Ue){xe[Ue]=ge[Ue]&&function(_t){return new Promise(function(et,Zn){!function Oe(Ue,_t,et,Zn){Promise.resolve(Zn).then(function(At){Ue({value:At,done:et})},_t)}(et,Zn,(_t=ge[Ue](_t)).done,_t.value)})}}}B.d(be,{FC:()=>Fe,KL:()=>ze,_T:()=>ie,mG:()=>le,qq:()=>Ie}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=2650)}]);