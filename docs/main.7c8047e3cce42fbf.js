"use strict";(self.webpackChunkAngular_e_commerce_site=self.webpackChunkAngular_e_commerce_site||[]).push([[179],{9058:(yt,be,B)=>{B.d(be,{BH:()=>pe,DV:()=>wt,Dv:()=>mo,G6:()=>Sr,GJ:()=>Rn,L:()=>De,LL:()=>Ue,Pz:()=>Fe,Sg:()=>We,UG:()=>Te,UI:()=>ns,US:()=>oe,Wj:()=>Wt,Wl:()=>At,Yr:()=>bs,ZB:()=>le,ZR:()=>Oe,aH:()=>Ie,b$:()=>qn,cI:()=>Zn,dS:()=>Qt,eu:()=>ve,g5:()=>K,gK:()=>Tt,gQ:()=>St,h$:()=>He,hl:()=>ge,hu:()=>g,jU:()=>Lt,lb:()=>Er,m9:()=>ti,ne:()=>Dn,p$:()=>ne,pd:()=>tn,r3:()=>In,ru:()=>zt,tV:()=>X,uI:()=>Xe,ug:()=>is,vZ:()=>vr,w1:()=>ur,w9:()=>Kn,xO:()=>Hn,xb:()=>yr,z$:()=>Ke,zd:()=>Pt});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},g=function(te,$){if(!te)throw K($)},K=function(te){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+te)},ie=function(te){const $=[];let z=0;for(let H=0;H<te.length;H++){let W=te.charCodeAt(H);W<128?$[z++]=W:W<2048?($[z++]=W>>6|192,$[z++]=63&W|128):55296==(64512&W)&&H+1<te.length&&56320==(64512&te.charCodeAt(H+1))?(W=65536+((1023&W)<<10)+(1023&te.charCodeAt(++H)),$[z++]=W>>18|240,$[z++]=W>>12&63|128,$[z++]=W>>6&63|128,$[z++]=63&W|128):($[z++]=W>>12|224,$[z++]=W>>6&63|128,$[z++]=63&W|128)}return $},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(te,$){if(!Array.isArray(te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let W=0;W<te.length;W+=3){const se=te[W],je=W+1<te.length,tt=je?te[W+1]:0,Et=W+2<te.length,xt=Et?te[W+2]:0;let Vn=(15&tt)<<2|xt>>6,hi=63&xt;Et||(hi=64,je||(Vn=64)),H.push(z[se>>2],z[(3&se)<<4|tt>>4],z[Vn],z[hi])}return H.join("")},encodeString(te,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(te):this.encodeByteArray(ie(te),$)},decodeString(te,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(te):function(te){const $=[];let z=0,H=0;for(;z<te.length;){const W=te[z++];if(W<128)$[H++]=String.fromCharCode(W);else if(W>191&&W<224){const se=te[z++];$[H++]=String.fromCharCode((31&W)<<6|63&se)}else if(W>239&&W<365){const Et=((7&W)<<18|(63&te[z++])<<12|(63&te[z++])<<6|63&te[z++])-65536;$[H++]=String.fromCharCode(55296+(Et>>10)),$[H++]=String.fromCharCode(56320+(1023&Et))}else{const se=te[z++],je=te[z++];$[H++]=String.fromCharCode((15&W)<<12|(63&se)<<6|63&je)}}return $.join("")}(this.decodeStringToByteArray(te,$))},decodeStringToByteArray(te,$){this.init_();const z=$?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let W=0;W<te.length;){const se=z[te.charAt(W++)],tt=W<te.length?z[te.charAt(W)]:0;++W;const xt=W<te.length?z[te.charAt(W)]:64;++W;const Ht=W<te.length?z[te.charAt(W)]:64;if(++W,null==se||null==tt||null==xt||null==Ht)throw new _e;H.push(se<<2|tt>>4),64!==xt&&(H.push(tt<<4&240|xt>>2),64!==Ht&&H.push(xt<<6&192|Ht))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let te=0;te<this.ENCODED_VALS.length;te++)this.byteToCharMap_[te]=this.ENCODED_VALS.charAt(te),this.charToByteMap_[this.byteToCharMap_[te]]=te,this.byteToCharMapWebSafe_[te]=this.ENCODED_VALS_WEBSAFE.charAt(te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[te]]=te,te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(te)]=te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(te)]=te)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function(te){const $=ie(te);return oe.encodeByteArray($,!0)},De=function(te){return He(te).replace(/\./g,"")},X=function(te){try{return oe.decodeString(te,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function ne(te){return le(void 0,te)}function le(te,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===te&&(te={});break;case Array:te=[];break;default:return $}for(const z in $)!$.hasOwnProperty(z)||!Pe(z)||(te[z]=le(te[z],$[z]));return te}function Pe(te){return"__proto__"!==te}const lt=()=>{try{return function $e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const te=process.env.__FIREBASE_DEFAULTS__;return te?JSON.parse(te):void 0})()||(()=>{if(typeof document>"u")return;let te;try{te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=te&&X(te[1]);return $&&JSON.parse($)})()}catch(te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${te}`)}},Ie=()=>{var te;return null===(te=lt())||void 0===te?void 0:te.config},Fe=te=>{var $;return null===($=lt())||void 0===$?void 0:$[`_${te}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,z)=>{this.resolve=$,this.reject=z})}wrapCallback($){return(z,H)=>{z?this.reject(z):this.resolve(H),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(z):$(z,H))}}}function We(te,$){if(te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=$||"demo-project",W=te.iat||0,se=te.sub||te.user_id;if(!se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const je=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:W,exp:W+3600,auth_time:W,sub:se,user_id:se,firebase:{sign_in_provider:"custom",identities:{}}},te);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(je)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Te(){var te;const $=null===(te=lt())||void 0===te?void 0:te.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Lt(){return"object"==typeof self&&self.self===self}function zt(){const te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof te&&void 0!==te.id}function qn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ur(){const te=Ke();return te.indexOf("MSIE ")>=0||te.indexOf("Trident/")>=0}function bs(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function Sr(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ge(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise((te,$)=>{try{let z=!0;const H="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(H);W.onsuccess=()=>{W.result.close(),z||self.indexedDB.deleteDatabase(H),te(!0)},W.onupgradeneeded=()=>{z=!1},W.onerror=()=>{var se;$((null===(se=W.error)||void 0===se?void 0:se.message)||"")}}catch(z){$(z)}})}class Oe extends Error{constructor($,z,H){super(z),this.code=$,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ue.prototype.create)}}class Ue{constructor($,z,H){this.service=$,this.serviceName=z,this.errors=H}create($,...z){const H=z[0]||{},W=`${this.service}/${$}`,se=this.errors[$],je=se?function _t(te,$){return te.replace(et,(z,H)=>{const W=$[H];return null!=W?String(W):`<${H}?>`})}(se,H):"Error";return new Oe(W,`${this.serviceName}: ${je} (${W}).`,H)}}const et=/\{\$([^}]+)}/g;function Zn(te){return JSON.parse(te)}function At(te){return JSON.stringify(te)}const cn=function(te){let $={},z={},H={},W="";try{const se=te.split(".");$=Zn(X(se[0])||""),z=Zn(X(se[1])||""),W=se[2],H=z.d||{},delete z.d}catch{}return{header:$,claims:z,data:H,signature:W}},Kn=function(te){const z=cn(te).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Rn=function(te){const $=cn(te).claims;return"object"==typeof $&&!0===$.admin};function In(te,$){return Object.prototype.hasOwnProperty.call(te,$)}function wt(te,$){if(Object.prototype.hasOwnProperty.call(te,$))return te[$]}function yr(te){for(const $ in te)if(Object.prototype.hasOwnProperty.call(te,$))return!1;return!0}function ns(te,$,z){const H={};for(const W in te)Object.prototype.hasOwnProperty.call(te,W)&&(H[W]=$.call(z,te[W],W,te));return H}function vr(te,$){if(te===$)return!0;const z=Object.keys(te),H=Object.keys($);for(const W of z){if(!H.includes(W))return!1;const se=te[W],je=$[W];if(On(se)&&On(je)){if(!vr(se,je))return!1}else if(se!==je)return!1}for(const W of H)if(!z.includes(W))return!1;return!0}function On(te){return null!==te&&"object"==typeof te}function Hn(te){const $=[];for(const[z,H]of Object.entries(te))Array.isArray(H)?H.forEach(W=>{$.push(encodeURIComponent(z)+"="+encodeURIComponent(W))}):$.push(encodeURIComponent(z)+"="+encodeURIComponent(H));return $.length?"&"+$.join("&"):""}function Pt(te){const $={};return te.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[W,se]=H.split("=");$[decodeURIComponent(W)]=decodeURIComponent(se)}}),$}function tn(te){const $=te.indexOf("?");if(!$)return"";const z=te.indexOf("#",$);return te.substring($,z>0?z:void 0)}class St{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,z){z||(z=0);const H=this.W_;if("string"==typeof $)for(let Ht=0;Ht<16;Ht++)H[Ht]=$.charCodeAt(z)<<24|$.charCodeAt(z+1)<<16|$.charCodeAt(z+2)<<8|$.charCodeAt(z+3),z+=4;else for(let Ht=0;Ht<16;Ht++)H[Ht]=$[z]<<24|$[z+1]<<16|$[z+2]<<8|$[z+3],z+=4;for(let Ht=16;Ht<80;Ht++){const Vn=H[Ht-3]^H[Ht-8]^H[Ht-14]^H[Ht-16];H[Ht]=4294967295&(Vn<<1|Vn>>>31)}let xt,Mt,W=this.chain_[0],se=this.chain_[1],je=this.chain_[2],tt=this.chain_[3],Et=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(xt=tt^se&(je^tt),Mt=1518500249):(xt=se^je^tt,Mt=1859775393):Ht<60?(xt=se&je|tt&(se|je),Mt=2400959708):(xt=se^je^tt,Mt=3395469782);const Vn=(W<<5|W>>>27)+xt+Et+Mt+H[Ht]&4294967295;Et=tt,tt=je,je=4294967295&(se<<30|se>>>2),se=W,W=Vn}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+se&4294967295,this.chain_[2]=this.chain_[2]+je&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+Et&4294967295}update($,z){if(null==$)return;void 0===z&&(z=$.length);const H=z-this.blockSize;let W=0;const se=this.buf_;let je=this.inbuf_;for(;W<z;){if(0===je)for(;W<=H;)this.compress_($,W),W+=this.blockSize;if("string"==typeof $){for(;W<z;)if(se[je]=$.charCodeAt(W),++je,++W,je===this.blockSize){this.compress_(se),je=0;break}}else for(;W<z;)if(se[je]=$[W],++je,++W,je===this.blockSize){this.compress_(se),je=0;break}}this.inbuf_=je,this.total_+=z}digest(){const $=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&z,z/=256;this.compress_(this.buf_);let H=0;for(let W=0;W<5;W++)for(let se=24;se>=0;se-=8)$[H]=this.chain_[W]>>se&255,++H;return $}}function Dn(te,$){const z=new zr(te,$);return z.subscribe.bind(z)}class zr{constructor($,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{$(this)}).catch(H=>{this.error(H)})}next($){this.forEachObserver(z=>{z.next($)})}error($){this.forEachObserver(z=>{z.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,z,H){let W;if(void 0===$&&void 0===z&&void 0===H)throw new Error("Missing Observer.");W=function wn(te,$){if("object"!=typeof te||null===te)return!1;for(const z of $)if(z in te&&"function"==typeof te[z])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:z,complete:H},void 0===W.next&&(W.next=er),void 0===W.error&&(W.error=er),void 0===W.complete&&(W.complete=er);const se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),se}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,$)}sendOne($,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{z(this.observers[$])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function er(){}const mo=function(te,$,z,H){let W;if(H<$?W="at least "+$:H>z&&(W=0===z?"none":"no more than "+z),W)throw new Error(te+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+W+".")};function Tt(te,$){return`${te} failed: ${$} argument `}function Wt(te,$,z,H){if((!H||z)&&"function"!=typeof z)throw new Error(Tt(te,$)+"must be a valid function.")}function Er(te,$,z,H){if((!H||z)&&("object"!=typeof z||null===z))throw new Error(Tt(te,$)+"must be a valid context object.")}const Qt=function(te){const $=[];let z=0;for(let H=0;H<te.length;H++){let W=te.charCodeAt(H);if(W>=55296&&W<=56319){const se=W-55296;H++,g(H<te.length,"Surrogate pair missing trail surrogate."),W=65536+(se<<10)+(te.charCodeAt(H)-56320)}W<128?$[z++]=W:W<2048?($[z++]=W>>6|192,$[z++]=63&W|128):W<65536?($[z++]=W>>12|224,$[z++]=W>>6&63|128,$[z++]=63&W|128):($[z++]=W>>18|240,$[z++]=W>>12&63|128,$[z++]=W>>6&63|128,$[z++]=63&W|128)}return $},is=function(te){let $=0;for(let z=0;z<te.length;z++){const H=te.charCodeAt(z);H<128?$++:H<2048?$+=2:H>=55296&&H<=56319?($+=4,z++):$+=3}return $};function ti(te){return te&&te._delegate?te._delegate:te}},4817:(yt,be,B)=>{B.d(be,{N:()=>K});var D=B(5619),g=B(5879);let K=(()=>{class ie{constructor(){this.cartItems=[],this.cartItemsSubject=new D.X(this.cartItems)}getCartItems(){return this.cartItemsSubject.asObservable()}addToCart(oe){const _e=this.cartItems.find(He=>He.id===oe.id);_e?(_e.quantity++,_e.totalPrice=_e.price*_e.quantity):(oe.quantity=1,oe.totalPrice=oe.price,this.cartItems.push(oe))}removeFromCart(oe){const _e=this.cartItems.findIndex(He=>He.id===oe.id);-1!==_e&&(this.cartItems.splice(_e,1),this.cartItemsSubject.next(this.cartItems))}clearCart(){this.cartItems=[],this.cartItemsSubject.next(this.cartItems)}static#e=this.\u0275fac=function(_e){return new(_e||ie)};static#t=this.\u0275prov=g.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},701:(yt,be,B)=>{B.d(be,{M:()=>ie});var D=B(5619),g=B(2096),K=B(5879);let ie=(()=>{class ue{constructor(){this.productdetail=[],this.productSubject=new D.X(this.productdetail),this.shirts=[{id:"s1",name:"Shirt 1",price:500,image:"././assets/shirt/shirt1.jpeg",quantity:1,totalPrice:0},{id:"s2",name:"Shirt 2",price:750,image:"././assets/shirt/shirt2.jpeg",quantity:1,totalPrice:0},{id:"s3",name:"Shirt 3",price:500,image:"././assets/shirt/shirt3.jpeg",quantity:1,totalPrice:0},{id:"s4",name:"Shirt 4",price:750,image:"././assets/shirt/shirt4.jpeg",quantity:1,totalPrice:0},{id:"s5",name:"Shirt 5",price:500,image:"././assets/shirt/shirt5.jpeg",quantity:1,totalPrice:0},{id:"s6",name:"Shirt 6",price:750,image:"././assets/shirt/shirt6.jpeg",quantity:1,totalPrice:0},{id:"s7",name:"Shirt 7",price:500,image:"././assets/shirt/shirt7.jpeg",quantity:1,totalPrice:0},{id:"s8",name:"Shirt 8",price:750,image:"././assets/shirt/shirt8.jpeg",quantity:1,totalPrice:0},{id:"s9",name:"Shirt 9",price:500,image:"././assets/shirt/shirt9.jpeg",quantity:1,totalPrice:0},{id:"s10",name:"Shirt 10",price:750,image:"././assets/shirt/shirt10.jpeg",quantity:1,totalPrice:0}],this.mobiles=[{id:"m1",name:"Mobile 1",price:500,image:"././assets/mobile/mobile1.webp",quantity:1,totalPrice:0},{id:"m2",name:"Mobile 2",price:750,image:"././assets/mobile/mobile2.jpg",quantity:1,totalPrice:0},{id:"m3",name:"Mobile 3",price:500,image:"././assets/mobile/mobile3.png",quantity:1,totalPrice:0},{id:"m4",name:"Mobile 4",price:750,image:"././assets/mobile/mobile4.webp",quantity:1,totalPrice:0},{id:"m5",name:"Mobile 5",price:500,image:"././assets/mobile/mobile5.jpeg",quantity:1,totalPrice:0},{id:"m6",name:"Mobile 6",price:750,image:"././assets/mobile/mobile1.webp",quantity:1,totalPrice:0},{id:"m7",name:"Mobile 7",price:500,image:"././assets/mobile/mobile2.jpg",quantity:1,totalPrice:0},{id:"m8",name:"Mobile 8",price:750,image:"././assets/mobile/mobile3.png",quantity:1,totalPrice:0},{id:"m9",name:"Mobile 9",price:500,image:"././assets/mobile/mobile4.webp",quantity:1,totalPrice:0},{id:"m10",name:"Mobile 10",price:750,image:"././assets/mobile/mobile5.jpeg",quantity:1,totalPrice:0}],this.laptop=[{id:"l1",name:"HP Laptop 39.6 cm 15s-eq2212AU",price:34199,image:"././assets/laptop/laptop1.png",quantity:1,totalPrice:0},{id:"l2",name:'HP Laptop Stream 14-ax040wm 14"',price:21343.88,image:"././assets/laptop/laptop2.png",quantity:1,totalPrice:0},{id:"l3",name:'HP Laptop 14 Series 14" 14-dq0050nr',price:72900,image:"././assets/laptop/laptop3.png",quantity:1,totalPrice:0},{id:"l4",name:"HP Laptop Pavilion 15-eg2009TU - Silver",price:68999,image:"././assets/laptop/laptop4.png",quantity:1,totalPrice:0},{id:"l5",name:"Lenovo Laptop Legion 5i Pro",price:144990,image:"././assets/laptop/laptop5.png",quantity:1,totalPrice:0}]}productDetail(_e){const He=this.productdetail.find(De=>De.id===_e.id);console.log(He)}getDetail(){return this.productSubject.asObservable()}getShirts(){return(0,g.of)(this.shirts)}getMobiles(){return(0,g.of)(this.mobiles)}getLaptop(){return(0,g.of)(this.laptop)}searchProduct(_e){const De=[...this.shirts,...this.mobiles,...this.laptop].filter(X=>X.name.toLowerCase().includes(_e.toLowerCase()));return(0,g.of)(De)}static#e=this.\u0275fac=function(He){return new(He||ue)};static#t=this.\u0275prov=K.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"root"})}return ue})()},5569:(yt,be,B)=>{var D=B(6593),g=B(5879),K=B(6814),ie=B(2459),ue=B(5592),oe=B(7453),_e=B(4829),He=B(9940),De=B(8251),X=B(7400),ne=B(2714),Pe=B(7398);let $e=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.Qsj),g.Y36(g.SBq))};static#t=this.\u0275dir=g.lG2({type:n})}return n})(),Je=(()=>{class n extends $e{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=g.n5z(n)))(s||n)}}();static#t=this.\u0275dir=g.lG2({type:n,features:[g.qOj]})}return n})();const Be=new g.OlP("NgValueAccessor"),en={provide:Be,useExisting:(0,g.Gpc)(()=>Fe),multi:!0},Ie=new g.OlP("CompositionEventMode");let Fe=(()=>{class n extends $e{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function un(){const n=(0,K.q)()?(0,K.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Ie,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&g.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[g._Bn([en]),g.qOj]})}return n})();const Ke=new g.OlP("NgValidators"),Xe=new g.OlP("NgAsyncValidators");function xe(n){return null!=n}function Ce(n){return(0,g.QGY)(n)?(0,ie.D)(n):n}function Oe(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ue(n,e){return e.map(t=>t(n))}function et(n){return n.map(e=>function _t(n){return!n.validate}(e)?e:t=>e.validate(t))}function At(n){return null!=n?function Zn(n){if(!n)return null;const e=n.filter(xe);return 0==e.length?null:function(t){return Oe(Ue(t,e))}}(et(n)):null}function Ut(n){return null!=n?function cn(n){if(!n)return null;const e=n.filter(xe);return 0==e.length?null:function(t){return function le(...n){const e=(0,He.jO)(n),{args:t,keys:r}=(0,oe.D)(n),s=new ue.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let _=c,C=c;for(let P=0;P<c;P++){let k=!1;(0,_e.Xf)(t[P]).subscribe((0,De.x)(u,G=>{k||(k=!0,C--),m[P]=G},()=>_--,void 0,()=>{(!_||!k)&&(C||u.next(r?(0,ne.n)(r,m):m),u.complete())}))}});return e?s.pipe((0,X.Z)(e)):s}(Ue(t,e).map(Ce)).pipe((0,Pe.U)(Oe))}}(et(n)):null}function Nn(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function In(n){return n?Array.isArray(n)?n:[n]:[]}function wt(n,e){return Array.isArray(n)?n.includes(e):n===e}function yr(n,e){const t=In(e);return In(n).forEach(s=>{wt(t,s)||t.push(s)}),t}function ns(n,e){return In(e).filter(t=>!wt(n,t))}class vr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=At(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ut(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class On extends vr{get formDirective(){return null}get path(){return null}}class lr extends vr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hn{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let St=(()=>{class n extends Hn{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(lr,2))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&g.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[g.qOj]})}return n})(),Dn=(()=>{class n extends Hn{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(On,10))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&g.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[g.qOj]})}return n})();const Wr="VALID",qr="INVALID",ti="PENDING",te="DISABLED";function $(n){return(se(n)?n.validators:n)||null}function H(n,e){return(se(e)?e.asyncValidators:n)||null}function se(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Et{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wr}get invalid(){return this.status===qr}get pending(){return this.status==ti}get disabled(){return this.status===te}get enabled(){return this.status!==te}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ns(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ns(e,this._rawAsyncValidators))}hasValidator(e){return wt(this._rawValidators,e)}hasAsyncValidator(e){return wt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ti,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=te,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wr,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wr||this.status===ti)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?te:Wr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ti,this._hasOwnPendingAsyncValidator=!0;const t=Ce(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?te:this.errors?qr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ti)?ti:this._anyControlsHaveStatus(qr)?qr:Wr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){se(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function z(n){return Array.isArray(n)?At(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function W(n){return Array.isArray(n)?Ut(n):n||null}(this._rawAsyncValidators)}}class xt extends Et{constructor(e,t,r){super($(t),H(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function tt(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function je(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e?e[s]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ti=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Bi}),Bi="always";function fe(n,e,t=Bi){ct(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pr(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ci(n,e)})}(n,e),function ni(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Un(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ci(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function bt(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pt(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ct(n,e){const t=function Kn(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Nn(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Rn(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Nn(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();pt(e._rawValidators,s),pt(e._rawAsyncValidators,s)}function Ci(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const ri={provide:On,useExisting:(0,g.Gpc)(()=>Ir)},Hi=(()=>Promise.resolve())();let Ir=(()=>{class n extends On{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new xt({},At(t),Ut(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Hi.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fe(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Hi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Hi.then(()=>{const r=this._findContainer(t.path),s=new xt({});(function ji(n,e){ct(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Hi.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Hi.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Hu(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Ke,10),g.Y36(Xe,10),g.Y36(Ti,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&g.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([ri]),g.qOj]})}return n})();function Lo(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ss(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yo=class extends Et{constructor(e=null,t,r){super($(t),H(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),se(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ss(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lo(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lo(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ss(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Vo={provide:lr,useExisting:(0,g.Gpc)(()=>vo)},zu=(()=>Promise.resolve())();let vo=(()=>{class n extends lr{constructor(t,r,s,u,c,m){super(),this._changeDetectorRef=c,this.callSetDisabledState=m,this.control=new yo,this._registered=!1,this.name="",this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function ko(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Fe?t=u:function Oo(n){return Object.getPrototypeOf(n.constructor)===Je}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ws(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zu.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,g.VuI)(r);zu.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Ae(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(On,9),g.Y36(Ke,10),g.Y36(Xe,10),g.Y36(Be,10),g.Y36(g.sBO,8),g.Y36(Ti,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Vo]),g.qOj,g.TTD]})}return n})(),Uo=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),Rs=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})();const Gi=new g.OlP("NgModelWithFormControlWarning");let Io=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[Rs]})}return n})(),vh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ti,useValue:t.callSetDisabledState??Bi}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[Io]})}return n})(),rd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gi,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ti,useValue:t.callSetDisabledState??Bi}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[Io]})}return n})();var pi=B(9692),eu=B(4817),_a=B(701);function id(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",12)(1,"div",13),g._UZ(2,"img",14),g.TgZ(3,"div",15),g._uU(4),g._UZ(5,"br"),g._uU(6),g.ALo(7,"currency"),g._UZ(8,"br"),g.TgZ(9,"button",16),g.NdJ("click",function(){g.CHM(t);const s=g.oxw().$implicit,u=g.oxw();return g.KtG(u.addToCart(s))}),g._uU(10," Add to Cart "),g.qZA()()()()}if(2&n){const t=g.oxw().$implicit;g.xp6(2),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(2),g.hij(" ",t.name,""),g.xp6(2),g.hij(" ",g.xi3(7,4,t.price,"INR"),"")}}function Eh(n,e){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,id,11,7,"div",11),g.qZA()),2&n){const t=e.index;g.xp6(1),g.Q6J("ngIf",t<4)}}function qu(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",12)(1,"div",13),g._UZ(2,"img",14),g.TgZ(3,"div",15),g._uU(4),g._UZ(5,"br"),g._uU(6),g.ALo(7,"currency"),g._UZ(8,"br"),g.TgZ(9,"button",17),g.NdJ("click",function(){g.CHM(t);const s=g.oxw().$implicit,u=g.oxw();return g.KtG(u.addToCart(s))}),g._uU(10," Add to Cart "),g.qZA()()()()}if(2&n){const t=g.oxw().$implicit;g.xp6(2),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(2),g.hij(" ",t.name,""),g.xp6(2),g.hij(" ",g.xi3(7,4,t.price,"INR"),"")}}function Zu(n,e){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,qu,11,7,"div",11),g.qZA()),2&n){const t=e.index;g.xp6(1),g.Q6J("ngIf",t<4)}}function tu(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",12)(1,"div",13),g._UZ(2,"img",14),g.TgZ(3,"div",15),g._uU(4),g._UZ(5,"br"),g._uU(6),g.ALo(7,"currency"),g._UZ(8,"br"),g.TgZ(9,"button",17),g.NdJ("click",function(){g.CHM(t);const s=g.oxw().$implicit,u=g.oxw();return g.KtG(u.addToCart(s))}),g._uU(10," Add to Cart "),g.qZA()()()()}if(2&n){const t=g.oxw().$implicit;g.xp6(2),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(2),g.hij(" ",t.name,""),g.xp6(2),g.hij(" ",g.xi3(7,4,t.price,"INR"),"")}}function Ho(n,e){if(1&n&&(g.TgZ(0,"div"),g.YNc(1,tu,11,7,"div",11),g.qZA()),2&n){const t=e.index;g.xp6(1),g.Q6J("ngIf",t<4)}}let Wl=(()=>{class n{constructor(t,r,s){this.router=t,this.cartService=r,this.productService=s,this.shirts=[],this.mobiles=[],this.laptop=[],this.productService.getShirts().subscribe(u=>{this.shirts=u}),this.productService.getMobiles().subscribe(u=>{this.mobiles=u}),this.productService.getLaptop().subscribe(u=>{this.laptop=u})}addToCart(t){localStorage.getItem("IsAuthorized")?(this.cartService.addToCart(t),alert("Item added to Cart..")):(alert("Login to continue ..."),this.router.navigate(["/login"]))}navigateToProductDetails(t){this.productService.productDetail(t),this.router.navigate(["/dashboard/details"])}navigateToShirt(){this.router.navigate(["dashboard/products/shirt"])}navigateToMobile(){this.router.navigate(["dashboard/products/mobile"])}navigateToLaptop(){this.router.navigate(["dashboard/products/laptop"])}ViewDetails(){this.productService.getDetail()}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(pi.F0),g.Y36(eu.N),g.Y36(_a.M))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-product-list"]],decls:28,vars:3,consts:[[1,"m-1"],[1,"w-screen","h-screen"],[1,"w-full","bg-slate-400","h-fit","mt-1"],[1,"flex","justify-between","w-full","h-10","p-6","mx-3","my-auto"],[1,"font-serif","text-3xl"],[1,"mr-10","text-blue-600",3,"click"],[1,"flex","flex-wrap","items-stretch","justify-start","w-full","gap-5","p-5","mx-10","h-fit"],[4,"ngFor","ngForOf"],[1,"bg-white","h-1","min-w-full"],[1,"w-full","bg-slate-400","h-fit"],[1,"w-full","bg-slate-400","h-fit","mt-5"],["class","product-card",4,"ngIf"],[1,"product-card"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700","mt-2",3,"click"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),g._uU(5,"SHIRTS"),g.qZA(),g.TgZ(6,"button",5),g.NdJ("click",function(){return s.navigateToShirt()}),g._uU(7,"Show more >"),g.qZA()(),g.TgZ(8,"div",6),g.YNc(9,Eh,2,1,"div",7),g.qZA(),g._UZ(10,"div",8),g.TgZ(11,"div",9)(12,"div",3)(13,"h2",4),g._uU(14,"MOBILES"),g.qZA(),g.TgZ(15,"button",5),g.NdJ("click",function(){return s.navigateToMobile()}),g._uU(16,"Show more >"),g.qZA()(),g.TgZ(17,"div",6),g.YNc(18,Zu,2,1,"div",7),g.qZA(),g._UZ(19,"div",8),g.TgZ(20,"div",10)(21,"div",3)(22,"h2",4),g._uU(23,"LAPTOPS"),g.qZA(),g.TgZ(24,"button",5),g.NdJ("click",function(){return s.navigateToLaptop()}),g._uU(25,"Show more >"),g.qZA()(),g.TgZ(26,"div",6),g.YNc(27,Ho,2,1,"div",7),g.qZA()()()()()()),2&r&&(g.xp6(9),g.Q6J("ngForOf",s.shirts),g.xp6(9),g.Q6J("ngForOf",s.mobiles),g.xp6(9),g.Q6J("ngForOf",s.laptop))},dependencies:[K.sg,K.O5,K.H9]})}return n})();var Qs=B(7394);class Mi extends Qs.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Wi={setInterval(n,e,...t){const{delegate:r}=Wi;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Wi;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var sd=B(9039);class wr extends Mi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return Wi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Wi.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,sd.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const hs={now:()=>(hs.delegate||Date).now(),delegate:void 0};class Tr{constructor(e,t=Tr.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Tr.now=hs.now;class nu extends Tr{constructor(e,t=Tr.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const wo=new nu(wr),ru=wo;var $o=B(671);let Ku=(()=>{class n{constructor(){this.currentImageIndex=0,this.totalImages=5,this.imageChangeSubscription=new Qs.w0}ngOnInit(){this.imageChangeSubscription=function va(n=0,e=wo){return n<0&&(n=0),function Go(n=0,e,t=ru){let r=-1;return null!=e&&((0,$o.K)(e)?t=e:r=e),new ue.y(s=>{let u=function ya(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let c=0;return t.schedule(function(){s.closed||(s.next(c++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,n,e)}(3e3).subscribe(()=>{this.nextImage()})}nextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.totalImages}prevImage(){this.currentImageIndex=(this.currentImageIndex-1+this.totalImages)%this.totalImages}ngOnDestroy(){this.imageChangeSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-carousel"]],decls:15,vars:10,consts:[[1,"m-1"],[1,"absolute","flex","w-full","h-fit","sm:h-80"],[1,"flex","justify-between","w-full","mx-3","my-auto"],[1,"text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75"],["stroke-linecap","round","stroke-linejoin","round","d","M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"],["id","slider",1,"w-full","mx-px","my-px","bg-blue-600","h-fit","sm:h-80"],["src","././assets/banner/banner1.jpg",1,"w-full","h-72","sm:h-full"],["src","././assets/banner/banner2.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","././assets/banner/banner3.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","././assets/banner/banner4.jpg",1,"hidden","w-full","h-72","sm:h-full"],["src","././assets/banner/banner5.jpg",1,"hidden","w-full","h-72","sm:h-full"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g.NdJ("click",function(){return s.prevImage()}),g.O4$(),g.TgZ(4,"svg",4),g._UZ(5,"path",5),g.qZA()(),g.kcU(),g.TgZ(6,"button",3),g.NdJ("click",function(){return s.nextImage()}),g.O4$(),g.TgZ(7,"svg",4),g._UZ(8,"path",6),g.qZA()()()(),g.kcU(),g.TgZ(9,"div",7),g._UZ(10,"img",8)(11,"img",9)(12,"img",10)(13,"img",11)(14,"img",12),g.qZA()()),2&r&&(g.xp6(10),g.ekj("hidden",0!==s.currentImageIndex),g.xp6(1),g.ekj("hidden",1!==s.currentImageIndex),g.xp6(1),g.ekj("hidden",2!==s.currentImageIndex),g.xp6(1),g.ekj("hidden",3!==s.currentImageIndex),g.xp6(1),g.ekj("hidden",4!==s.currentImageIndex))}})}return n})(),Yu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:4,vars:0,consts:[[1,"h-fit","mt-3"],[1,"relative","h-32","w-32","..."]],template:function(r,s){1&r&&(g._UZ(0,"app-carousel"),g.TgZ(1,"div",0),g._UZ(2,"app-product-list"),g.qZA(),g._UZ(3,"div",1))},dependencies:[Wl,Ku]})}return n})();var ut,Me=B(5861),Rr=B(534),Di=B(4537),hr=B(7879),q=B(9058),ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ni={},od=od||{},Ft=ql||self;function Qu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ea(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zo="closure_uid_"+(1e9*Math.random()>>>0),Ih=0;function iu(n,e,t){return n.call.apply(n.bind,arguments)}function wh(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Cr(n,e,t){return(Cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?iu:wh).apply(null,arguments)}function su(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function A(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[s].apply(r,c)}}function F(){this.s=this.s,this.o=this.o}F.prototype.s=!1,F.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ad(n){Object.prototype.hasOwnProperty.call(n,zo)&&n[zo]||(n[zo]=++Ih)}(this)},F.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const L=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Q(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ee(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Qu(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let c=0;c<u;c++)n[s+c]=r[c]}else n.push(r)}}function Se(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var It=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",()=>{},e),Ft.removeEventListener("test",()=>{},e)}catch{}return n}();function rn(n){return/^[\s\xa0]*$/.test(n)}function dn(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Kt(n){return-1!=dn().indexOf(n)}function qt(n){return qt[" "](n),n}qt[" "]=function(){};var Pr,n,xn=Kt("Opera"),Fn=Kt("Trident")||Kt("MSIE"),fs=Kt("Edge"),Oi=fs||Fn,Wo=Kt("Gecko")&&!(-1!=dn().toLowerCase().indexOf("webkit")&&!Kt("Edge"))&&!(Kt("Trident")||Kt("MSIE"))&&!Kt("Edge"),ii=-1!=dn().toLowerCase().indexOf("webkit")&&!Kt("Edge");function Js(){var n=Ft.document;return n?n.documentMode:void 0}e:{var qi="",ud=(n=dn(),Wo?/rv:([^\);]+)(\)|;)/.exec(n):fs?/Edge\/([\d\.]+)/.exec(n):Fn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ii?/WebKit\/(\S+)/.exec(n):xn?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ud&&(qi=ud?ud[1]:""),Fn){var Bn=Js();if(null!=Bn&&Bn>parseFloat(qi)){Pr=String(Bn);break e}}Pr=qi}var gi=Ft.document&&Fn&&(Js()||parseInt(Pr,10))||void 0;function Ls(n,e){if(Se.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Wo){e:{try{qt(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Zl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ls.$.h.call(this)}}A(Ls,Se);var Zl={2:"touch",3:"pen",4:"mouse"};Ls.prototype.h=function(){Ls.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xs="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function wp(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Yn,this.fa=this.ia=!1}function Kl(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Xu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function el(n){const e={};for(const t in n)e[t]=n[t];return e}const tl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Th(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<tl.length;u++)t=tl[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ia(n){this.src=n,this.g={},this.h=0}function nl(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=L(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Kl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rl(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Ia.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=rl(n,e,r,s);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new wp(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Vt="closure_lm_"+(1e6*Math.random()|0),ld={};function Tp(n,e,t,r,s){if(r&&r.once)return Zo(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Tp(n,e[u],t,r,s);return null}return t=il(t),n&&n[Xs]?n.O(e,t,Ea(r)?!!r.capture:!!r,s):Zi(n,e,t,!1,r,s)}function Zi(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=Ea(s)?!!s.capture:!!s,m=rr(n);if(m||(n[Vt]=m=new Ia(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function Gm(){const e=Dh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)It||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Ta(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Zo(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Zo(n,e[u],t,r,s);return null}return t=il(t),n&&n[Xs]?n.P(e,t,Ea(r)?!!r.capture:!!r,s):Zi(n,e,t,!0,r,s)}function Ch(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ch(n,e[u],t,r,s);else r=Ea(r)?!!r.capture:!!r,t=il(t),n&&n[Xs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rl(u=n.g[e],t,r,s))&&(Kl(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=rr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rl(e,t,r,s)),(t=-1<n?e[n]:null)&&wa(t))}function wa(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Xs])nl(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ta(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rr(e))?(nl(t,n),0==t.h&&(t.src=null,e[Vt]=null)):Kl(n)}}}function Ta(n){return n in ld?ld[n]:ld[n]="on"+n}function Dh(n,e){if(n.fa)n=!0;else{e=new Ls(e,this);var t=n.listener,r=n.la||n.src;n.ia&&wa(n),n=t.call(r,e)}return n}function rr(n){return(n=n[Vt])instanceof Ia?n:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function il(n){return"function"==typeof n?n:(n[cd]||(n[cd]=function(e){return n.handleEvent(e)}),n[cd])}function ke(){F.call(this),this.i=new Ia(this),this.S=this,this.J=null}function Ot(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Se(e,n);else if(e instanceof Se)e.target=e.target||n;else{var s=e;Th(e=new Se(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=sl(c,r,!0,e)&&s}if(s=sl(c=e.g=n,r,!0,e)&&s,s=sl(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=sl(c=e.g=t[u],r,!1,e)&&s}function sl(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var m=c.listener,_=c.la||c.src;c.ia&&nl(n.i,c),s=!1!==m.call(_,r)&&s}}return s&&!r.defaultPrevented}A(ke,F),ke.prototype[Xs]=!0,ke.prototype.removeEventListener=function(n,e,t,r){Ch(this,n,e,t,r)},ke.prototype.N=function(){if(ke.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Kl(t[r]);delete n.g[e],n.h--}}this.J=null},ke.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ke.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var dd=Ft.JSON.stringify;function Cp(){var n=jr;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Fs=new class si{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Yo,n=>n.reset());class Yo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ou(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Dp(n){Ft.setTimeout(()=>{throw n},0)}let au,Ca=!1,jr=new class Ko{constructor(){this.h=this.g=null}add(e,t){const r=Fs.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},eo=()=>{const n=Ft.Promise.resolve(void 0);au=()=>{n.then(Yl)}};var Yl=()=>{for(var n;n=Cp();){try{n.h.call(n.g)}catch(t){Dp(t)}var e=Fs;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ca=!1};function to(n,e){ke.call(this),this.h=n||1,this.g=e||Ft,this.j=Cr(this.qb,this),this.l=Date.now()}function ps(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function hd(n,e,t){if("function"==typeof n)t&&(n=Cr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Cr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function Ap(n){n.g=hd(()=>{n.g=null,n.i&&(n.i=!1,Ap(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}A(to,ke),(ut=to.prototype).ga=!1,ut.T=null,ut.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ot(this,"tick"),this.ga&&(ps(this),this.start()))}},ut.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.N=function(){to.$.N.call(this),ps(this),delete this.g};class ol extends F{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ap(this)}N(){super.N(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ql(n){F.call(this),this.h=n,this.g={}}A(Ql,F);var fd=[];function pd(n,e,t,r){Array.isArray(t)||(t&&(fd[0]=t.toString()),t=fd);for(var s=0;s<t.length;s++){var u=Tp(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ah(n){Xu(n.g,function(e,t){this.g.hasOwnProperty(t)&&wa(e)},n),n.g={}}function w(){this.g=!0}function R(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function j(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return dd(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ql.prototype.N=function(){Ql.$.N.call(this),Ah(this)},Ql.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},w.prototype.Ea=function(){this.g=!1},w.prototype.info=function(){};var Y={},ye=null;function me(){return ye=ye||new ke}function at(n){Se.call(this,Y.Ta,n)}function $t(n){const e=me();Ot(e,new at(e))}function Jt(n,e){Se.call(this,Y.STAT_EVENT,n),this.stat=e}function kt(n){const e=me();Ot(e,new Jt(e,n))}function Tn(n,e){Se.call(this,Y.Ua,n),this.size=e}function no(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Y.Ta="serverreachability",A(at,Se),Y.STAT_EVENT="statevent",A(Jt,Se),Y.Ua="timingevent",A(Tn,Se);var ro={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},al={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function io(){}function md(){}io.prototype.h=null;var lu,uu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function so(){Se.call(this,"d")}function Jl(){Se.call(this,"c")}function ul(){}function Qo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ql(this),this.P=du,this.V=new to(n=Oi?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}A(so,Se),A(Jl,Se),A(ul,io),ul.prototype.g=function(){return new XMLHttpRequest},ul.prototype.i=function(){return{}},lu=new ul;var du=45e3,Xl={},bh={};function hu(n,e,t){n.L=1,n.v=pu(oo(e)),n.s=t,n.S=!0,ec(n,null)}function ec(n,e){n.G=Date.now(),Rh(n),n.A=oo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Fh(t.i,"t",r),n.C=0,t=n.l.J,n.h=new cu,n.g=Fp(n.l,t?e:null,!n.s),0<n.O&&(n.M=new ol(Cr(n.Pa,n,n.g),n.O)),pd(n.U,n.g,"readystatechange",n.nb),e=n.I?el(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),$t(),function S(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),_=0;_<m.length;_++){var C=m[_].split("=");if(1<C.length){var P=C[0];C=C[1];var k=P.split("_");c=2<=k.length&&"type"==k[1]?c+(P+"=")+C+"&":c+(P+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Sh(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function zm(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=bp(n,t),s==bh){4==e&&(n.o=4,kt(14),r=!1),R(n.j,n.m,null,"[Incomplete Response]");break}if(s==Xl){n.o=4,kt(15),R(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}R(n.j,n.m,s,null),ll(n,s)}Sh(n)&&s!=bh&&s!=Xl&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,kt(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),fc(e),e.M=!0,kt(11))):(R(n.j,n.m,t,"[Invalid Chunked Response]"),nc(n),tc(n))}function bp(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bh:(t=Number(e.substring(t,r)),isNaN(t)?Xl:(r+=1)+t>e.length?bh:(e=e.slice(r,r+t),n.C=r+t,e))}function Rh(n){n.Y=Date.now()+n.P,Ph(n,n.P)}function Ph(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=no(Cr(n.lb,n),e)}function xh(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function tc(n){0==n.l.H||n.J||Id(n.l,n)}function nc(n){xh(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,ps(n.V),Ah(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ll(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||sc(t.i,n)))if(!n.K&&sc(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;gl(t),mi(t)}qh(t),kt(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=no(Cr(t.ib,t),6e3));if(1>=Pp(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ta(t,11)}else if((n.K||t.g==n)&&gl(t),!rn(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let C=s[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const P=C[3];null!=P&&(t.ra=P,t.l.info("VER="+t.ra));const k=C[4];null!=k&&(t.Ga=k,t.l.info("SVER="+t.Ga));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.L=r=1.5*G,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const he=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var u=r.i;u.g||-1==he.indexOf("spdy")&&-1==he.indexOf("quic")&&-1==he.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(yd(u,u.h),u.h=null))}if(r.F){const Re=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.Da=Re,ir(r.I,r.F,Re))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=wd(r,r.J?r.pa:null,r.Y),c.K){xp(r.i,c);var m=c,_=r.L;_&&m.setTimeout(_),m.B&&(xh(m),Rh(m)),r.g=c}else Wh(r);0<t.j.length&&ea(t)}else"stop"!=C[0]&&"close"!=C[0]||ta(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ta(t,7):Ym(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}$t()}catch{}}function Jo(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qu(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function vv(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Qu(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function cl(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Qu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=Qo.prototype).setTimeout=function(n){this.P=n},ut.nb=function(n){n=n.target;const e=this.M;e&&3==Ki(n)?e.l():this.Pa(n)},ut.Pa=function(n){try{if(n==this.g)e:{const P=Ki(this.g);var e=this.g.Ia();if(this.g.da(),!(3>P)&&(3!=P||Oi||this.g&&(this.h.h||this.g.ja()||Op(this.g)))){this.J||4!=P||7==e||$t(),xh(this);var t=this.g.da();this.ca=t;t:if(Sh(this)){var r=Op(this.g);n="";var s=r.length,u=4==Ki(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nc(this),tc(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function I(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,P,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,_=this.g;if((m=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rn(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,kt(12),nc(this),tc(this);break e}R(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ll(this,t)}this.S?(zm(this,P,c),Oi&&this.i&&3==P&&(pd(this.U,this.V,"tick",this.mb),this.V.start())):(R(this.j,this.m,c,null),ll(this,c)),4==P&&nc(this),this.i&&!this.J&&(4==P?Id(this.l,this):(this.i=!1,Rh(this)))}else(function $h(n){const e={};n=(n.g&&2<=Ki(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(rn(n[r]))continue;var t=ou(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function To(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,kt(12)):(this.o=0,kt(13)),nc(this),tc(this)}}}catch{}},ut.mb=function(){if(this.g){var n=Ki(this.g),e=this.g.ja();this.C<e.length&&(xh(this),zm(this,n,e),this.i&&4!=n&&Rh(this))}},ut.cancel=function(){this.J=!0,nc(this)},ut.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function N(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($t(),kt(17)),nc(this),this.o=2,tc(this)):Ph(this,this.Y-n)};var Mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fu){this.h=n.h,dl(this,n.j),this.s=n.s,this.g=n.g,Oh(this,n.m),this.l=n.l;var e=n.i,t=new gu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Vs(this,t),this.o=n.o}else n&&(e=String(n).match(Mh))?(this.h=!1,dl(this,e[1]||"",!0),this.s=hl(e[2]||""),this.g=hl(e[3]||"",!0),Oh(this,e[4]),this.l=hl(e[5]||"",!0),Vs(this,e[6]||"",!0),this.o=hl(e[7]||"")):(this.h=!1,this.i=new gu(null,this.h))}function oo(n){return new fu(n)}function dl(n,e,t){n.j=t?hl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Oh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Vs(n,e,t){e instanceof gu?(n.i=e,function Vh(n,e){e&&!n.j&&(mu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(fl(this,r),Fh(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=rc(e,Wm)),n.i=new gu(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function pu(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function hl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ic),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ic(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rc(e,kh,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(rc(e,kh,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(rc(t,"/"==t.charAt(0)?Lh:Ev,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rc(t,qm)),n.join("")};var kh=/[#\/\?@]/g,Ev=/[#\?:]/g,Lh=/[#\?]/g,Wm=/[#\?@]/g,qm=/#/g;function gu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function mu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Nh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fl(n,e){mu(n),e=_u(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Co(n,e){return mu(n),e=_u(n,e),n.g.has(e)}function Fh(n,e,t){fl(n,e),0<t.length&&(n.i=null,n.g.set(_u(n,e),Q(t)),n.h+=t.length)}function _u(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Sp(n){this.l=n||ki,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ka&&Ft.g.Ka()&&Ft.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=gu.prototype).add=function(n,e){mu(this),this.i=null,n=_u(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){mu(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ut.ta=function(){mu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ut.Z=function(n){mu(this);let e=[];if("string"==typeof n)Co(this,n)&&(e=e.concat(this.g.get(_u(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return mu(this),this.i=null,Co(this,n=_u(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var s=u;""!==c[r]&&(s+="="+encodeURIComponent(String(c[r]))),n.push(s)}}return this.i=n.join("&")};var ki=10;function Rp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pp(n){return n.h?1:n.g?n.g.size:0}function sc(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yd(n,e){n.g?n.g.add(e):n.h=e}function xp(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Uh(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Q(n.i)}Sp.prototype.cancel=function(){if(this.i=Uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var oc=class{stringify(n){return Ft.JSON.stringify(n,void 0)}parse(n){return Ft.JSON.parse(n,void 0)}};function yu(){this.g=new oc}function ac(n,e,t){const r=t||"";try{Jo(n,function(s,u){let c=s;Ea(s)&&(c=dd(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function pl(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Xo(n){this.l=n.ec||null,this.j=n.ob||!1}function uc(n,e){ke.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Mp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}A(Xo,io),Xo.prototype.g=function(){return new uc(this.l,this.j)},Xo.prototype.i=function(n){return function(){return n}}({}),A(uc,ke);var Mp=0;function Iv(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Bh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jh(n)}function jh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=uc.prototype).open=function(n,e){if(this.readyState!=Mp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jh(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bh(this)),this.readyState=Mp},ut.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jh(this)),this.g&&(this.readyState=3,jh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Iv(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ut.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bh(this):jh(this),3==this.readyState&&Iv(this)}},ut.Za=function(n){this.g&&(this.response=this.responseText=n,Bh(this))},ut.Ya=function(n){this.g&&(this.response=n,Bh(this))},ut.ka=function(){this.g&&Bh(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var aw=Ft.JSON.parse;function Hr(n){ke.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wv,this.L=this.M=!1}A(Hr,ke);var wv="",lc=/^https?$/i,Np=["POST","PUT"];function Qr(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Km(n),Hh(n)}function Km(n){n.F||(n.F=!0,Ot(n,"complete"),Ot(n,"error"))}function cc(n){if(n.h&&typeof od<"u"&&(!n.C[1]||4!=Ki(n)||2!=n.da()))if(n.v&&4==Ki(n))hd(n.La,0,n);else if(Ot(n,"readystatechange"),4==Ki(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var s=String(n.I).match(Mh)[1]||null;!s&&Ft.self&&Ft.self.location&&(s=Ft.self.location.protocol.slice(0,-1)),r=!lc.test(s?s.toLowerCase():"")}t=r}if(t)Ot(n,"complete"),Ot(n,"success");else{n.m=6;try{var u=2<Ki(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Km(n)}}finally{Hh(n)}}}function Hh(n,e){if(n.g){gs(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ot(n,"ready");try{t.onreadystatechange=r}catch{}}}function gs(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Ki(n){return n.g?n.g.readyState:0}function Op(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case wv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dc(n){let e="";return Xu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function kp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dc(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function hc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gh(n){this.Ga=0,this.j=[],this.l=new w,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=hc("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=hc("baseRetryDelayMs",5e3,n),this.hb=hc("retryDelaySeedMs",1e4,n),this.eb=hc("forwardChannelMaxRetries",2,n),this.xa=hc("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Sp(n&&n.concurrentRequestLimit),this.Ja=new yu,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ym(n){if(zh(n),3==n.H){var e=n.W++,t=oo(n.I);if(ir(t,"SID",n.K),ir(t,"RID",e),ir(t,"TYPE","terminate"),Ed(n,t),(e=new Qo(n,n.l,e)).L=2,e.v=pu(oo(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon)try{t=Ft.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=Fp(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Rh(e)}Jm(n)}function mi(n){n.g&&(fc(n),n.g.cancel(),n.g=null)}function zh(n){mi(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),gl(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function ea(n){if(!Rp(n.i)&&!n.m){n.m=!0;var e=n.Na;au||eo(),Ca||(au(),Ca=!0),jr.add(e,n),n.C=0}}function vd(n,e){var t;t=e?e.m:n.W++;const r=oo(n.I);ir(r,"SID",n.K),ir(r,"RID",t),ir(r,"AID",n.V),Ed(n,r),n.o&&n.s&&kp(r,n.o,n.s),t=new Qo(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Cv(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yd(n.i,t),hu(t,r,e)}function Ed(n,e){n.na&&Xu(n.na,function(t,r){ir(e,r,t)}),n.h&&Jo({},function(t,r){ir(e,r,t)})}function Cv(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Cr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let _=0;_<t;_++){let C=s[_].g;const P=s[_].map;if(C-=u,0>C)u=Math.max(0,s[_].g-100),m=!1;else try{ac(P,c,"req"+C+"_")}catch{r&&r(P)}}if(m){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Wh(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;au||eo(),Ca||(au(),Ca=!0),jr.add(e,n),n.A=0}}function qh(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=no(Cr(n.Ma,n),Qm(n,n.A)),n.A++,0))}function fc(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Lp(n){n.g=new Qo(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=oo(n.wa);ir(e,"RID","rpc"),ir(e,"SID",n.K),ir(e,"AID",n.V),ir(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ir(e,"TO",n.qa),ir(e,"TYPE","xmlhttp"),Ed(n,e),n.o&&n.s&&kp(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=pu(oo(e)),t.s=null,t.S=!0,ec(t,n)}function gl(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Id(n,e){var t=null;if(n.g==e){gl(n),fc(n),n.g=null;var r=2}else{if(!sc(n.i,e))return;t=e.F,xp(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;Ot(r=me(),new Tn(r,t)),ea(n)}else Wh(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function uw(n,e){return!(Pp(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=no(Cr(n.Na,n,e),Qm(n,n.C)),n.C++,0)))}(n,e)||2==r&&qh(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:ta(n,5);break;case 4:ta(n,10);break;case 3:ta(n,6);break;default:ta(n,2)}}function Qm(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ta(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Cr(n.pb,n);t||(t=new fu("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||dl(t,"https"),pu(t)),function Zm(n,e){const t=new w;if(Ft.Image){const r=new Image;r.onload=su(pl,t,r,"TestLoadImage: loaded",!0,e),r.onerror=su(pl,t,r,"TestLoadImage: error",!1,e),r.onabort=su(pl,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=su(pl,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else kt(2);n.H=0,n.h&&n.h.za(e),Jm(n),zh(n)}function Jm(n){if(n.H=0,n.ma=[],n.h){const e=Uh(n.i);(0!=e.length||0!=n.j.length)&&(Ee(n.ma,e),Ee(n.ma,n.j),n.i.i.length=0,Q(n.j),n.j.length=0),n.h.ya()}}function wd(n,e,t){var r=t instanceof fu?oo(t):new fu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Oh(r,r.m);else{var s=Ft.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new fu(null);r&&dl(u,r),e&&(u.g=e),s&&Oh(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&ir(r,t,e),ir(r,"VER",n.ra),Ed(n,r),r}function Fp(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Hr(t&&n.Ha&&!n.va?new Xo({ob:!0}):n.va)).Oa(n.J),e}function Vp(){}function Td(){if(Fn&&!(10<=Number(gi)))throw Error("Environmental error: no available transport.")}function xr(n,e){ke.call(this),this.g=new Gh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!rn(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rn(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new vu(this)}function Up(n){so.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Xm(){Jl.call(this),this.status=1}function vu(n){this.g=n}function Ai(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bp(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((s=u+((c=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function zn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(ut=Hr.prototype).Oa=function(n){this.M=n},ut.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():lu.g(),this.C=function gd(n){return n.h||(n.h=n.i())}(this.u?this.u:lu),this.g.onreadystatechange=Cr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Qr(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ft.FormData&&n instanceof Ft.FormData,!(0<=L(Np,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gs(this),0<this.B&&((this.L=function Tv(n){return Fn&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cr(this.ua,this)):this.A=hd(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Qr(this,u)}},ut.ua=function(){typeof od<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ot(this,"complete"),Ot(this,"abort"),Hh(this))},ut.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hh(this,!0)),Hr.$.N.call(this)},ut.La=function(){this.s||(this.G||this.v||this.l?cc(this):this.kb())},ut.kb=function(){cc(this)},ut.isActive=function(){return!!this.g},ut.da=function(){try{return 2<Ki(this)?this.g.status:-1}catch{return-1}},ut.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),aw(e)}},ut.Ia=function(){return this.m},ut.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=Gh.prototype).ra=8,ut.H=1,ut.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Qo(this,this.l,n);let u=this.s;if(this.U&&(u?(u=el(u),Th(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cv(this,s,e),ir(t=oo(this.I),"RID",n),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),Ed(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(dc(u)))+"&"+e:this.o&&kp(t,this.o,u)),yd(this.i,s),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),s.aa=!0,hu(s,t,null)):hu(s,t,e),this.H=2}}else 3==this.H&&(n?vd(this,n):0==this.j.length||Rp(this.i)||vd(this))},ut.Ma=function(){if(this.u=null,Lp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=no(Cr(this.jb,this),n)}},ut.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),mi(this),Lp(this))},ut.ib=function(){null!=this.v&&(this.v=null,mi(this),qh(this),kt(19))},ut.pb=function(n){n?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))},ut.isActive=function(){return!!this.h&&this.h.isActive(this)},(ut=Vp.prototype).Ba=function(){},ut.Aa=function(){},ut.za=function(){},ut.ya=function(){},ut.isActive=function(){return!0},ut.Va=function(){},Td.prototype.g=function(n,e){return new xr(n,e)},A(xr,ke),xr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;kt(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=wd(n,null,n.Y),ea(n)},xr.prototype.close=function(){Ym(this.g)},xr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=dd(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ea(e)},xr.prototype.N=function(){this.g.h=null,delete this.j,Ym(this.g),delete this.g,xr.$.N.call(this)},A(Up,so),A(Xm,Jl),A(vu,Vp),vu.prototype.Ba=function(){Ot(this.g,"a")},vu.prototype.Aa=function(n){Ot(this.g,new Up(n))},vu.prototype.za=function(n){Ot(this.g,new Xm)},vu.prototype.ya=function(){Ot(this.g,"b")},A(Ai,function pc(){this.blockSize=-1}),Ai.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ai.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Bp(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Bp(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Bp(this,r),s=0;break}}this.h=s,this.i+=e},Ai.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Zh={};function jp(n){return-128<=n&&128>n?function nr(n,e){var t=Zh;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new zn([0|e],0>e?-1:0)}):new zn([0|n],0>n?-1:0)}function Da(n){if(isNaN(n)||!isFinite(n))return gc;if(0>n)return _i(Da(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Hp;return new zn(e,0)}var Hp=4294967296,gc=jp(0),mc=jp(1),$p=jp(16777216);function Aa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ms(n){return-1==n.h}function _i(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new zn(t,~n.h).add(mc)}function Cd(n,e){return n.add(_i(e))}function Gp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ml(n,e){this.g=n,this.h=e}function _c(n,e){if(Aa(e))throw Error("division by zero");if(Aa(n))return new ml(gc,gc);if(ms(n))return e=_c(_i(n),e),new ml(_i(e.g),_i(e.h));if(ms(e))return e=_c(n,_i(e)),new ml(_i(e.g),e.h);if(30<n.g.length){if(ms(n)||ms(e))throw Error("slowDivide_ only works with positive integers.");for(var t=mc,r=e;0>=r.X(n);)t=Yh(t),r=Yh(r);var s=Dd(t,1),u=Dd(r,1);for(r=Dd(r,2),t=Dd(t,2);!Aa(r);){var c=u.add(r);0>=c.X(n)&&(s=s.add(t),u=c),r=Dd(r,1),t=Dd(t,1)}return e=Cd(n,s.R(e)),new ml(s,e)}for(s=gc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=Da(t)).R(e);ms(c)||0<c.X(n);)c=(u=Da(t-=r)).R(e);Aa(u)&&(u=mc),s=s.add(u),n=Cd(n,c)}return new ml(s,n)}function Yh(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new zn(t,n.h)}function Dd(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new zn(s,n.h)}(ut=zn.prototype).ea=function(){if(ms(this))return-_i(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Hp+r)*e,e*=Hp}return n},ut.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Aa(this))return"0";if(ms(this))return"-"+_i(this).toString(n);for(var e=Da(Math.pow(n,6)),t=this,r="";;){var s=_c(t,e).g,u=((0<(t=Cd(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Aa(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},ut.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ut.X=function(n){return ms(n=Cd(this,n))?-1:Aa(n)?0:1},ut.abs=function(){return ms(this)?_i(this):this},ut.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),c=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=c>>>16,t[s]=(c&=65535)<<16|(u&=65535)}return new zn(t,-2147483648&t[t.length-1]?-1:0)},ut.R=function(n){if(Aa(this)||Aa(n))return gc;if(ms(this))return ms(n)?_i(this).R(_i(n)):_i(_i(this).R(n));if(ms(n))return _i(this.R(_i(n)));if(0>this.X($p)&&0>n.X($p))return Da(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,c=65535&this.D(r),m=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=c*_,Gp(t,2*r+2*s),t[2*r+2*s+1]+=u*_,Gp(t,2*r+2*s+1),t[2*r+2*s+1]+=c*m,Gp(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,Gp(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new zn(t,0)},ut.gb=function(n){return _c(this,n).h},ut.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new zn(t,this.h&n.h)},ut.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new zn(t,this.h|n.h)},ut.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new zn(t,this.h^n.h)},Td.prototype.createWebChannel=Td.prototype.g,xr.prototype.send=xr.prototype.u,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,ro.NO_ERROR=0,ro.TIMEOUT=8,ro.HTTP_ERROR=6,al.COMPLETE="complete",md.EventType=uu,uu.OPEN="a",uu.CLOSE="b",uu.ERROR="c",uu.MESSAGE="d",ke.prototype.listen=ke.prototype.O,Hr.prototype.listenOnce=Hr.prototype.P,Hr.prototype.getLastError=Hr.prototype.Sa,Hr.prototype.getLastErrorCode=Hr.prototype.Ia,Hr.prototype.getStatus=Hr.prototype.da,Hr.prototype.getResponseJson=Hr.prototype.Wa,Hr.prototype.getResponseText=Hr.prototype.ja,Hr.prototype.send=Hr.prototype.ha,Hr.prototype.setWithCredentials=Hr.prototype.Oa,Ai.prototype.digest=Ai.prototype.l,Ai.prototype.reset=Ai.prototype.reset,Ai.prototype.update=Ai.prototype.j,zn.prototype.add=zn.prototype.add,zn.prototype.multiply=zn.prototype.R,zn.prototype.modulo=zn.prototype.gb,zn.prototype.compare=zn.prototype.X,zn.prototype.toNumber=zn.prototype.ea,zn.prototype.toString=zn.prototype.toString,zn.prototype.getBits=zn.prototype.D,zn.fromNumber=Da,zn.fromString=function Kh(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return _i(Kh(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Da(Math.pow(e,8)),r=gc,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),c=parseInt(n.substring(s,s+u),e);8>u?(u=Da(Math.pow(e,u)),r=r.R(u).add(Da(c))):r=(r=r.R(t)).add(Da(c))}return r};var zp=Ni.createWebChannelTransport=function(){return new Td},Wp=Ni.getStatEventTarget=function(){return me()},e_=Ni.ErrorCode=ro,lw=Ni.EventType=al,Dv=Ni.Event=Y,Av=Ni.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cw=Ni.FetchXmlHttpFactory=Xo,Qh=Ni.WebChannel=md,Jh=Ni.XhrIo=Hr,Eu=Ni.Md5=Ai,_l=Ni.Integer=zn;const Xh="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Do="10.5.2";const ba=new hr.Yd("@firebase/firestore");function yl(){return ba.logLevel}function qe(n,...e){if(ba.logLevel<=hr.in.DEBUG){const t=e.map(qp);ba.debug(`Firestore (${Do}): ${n}`,...t)}}function sr(n,...e){if(ba.logLevel<=hr.in.ERROR){const t=e.map(qp);ba.error(`Firestore (${Do}): ${n}`,...t)}}function Yi(n,...e){if(ba.logLevel<=hr.in.WARN){const t=e.map(qp);ba.warn(`Firestore (${Do}): ${n}`,...t)}}function qp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Rt(n,e){n||gt()}function nt(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ef{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class Ji{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zp{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=C=>this.i!==s?(s=this.i,t(C)):Promise.resolve();let c=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Mr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=c;e.enqueueRetryable((0,Me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},_=C=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Mr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new ef(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new oi(e)}}class Sa{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tf{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Sa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=u=>{null!=u.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.R;return this.R=u.token,qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?s(u):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.R=t.token,new bi(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Xi{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=Kp(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Iu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Yp(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ze(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new bn(0,0))}static max(){return new Dt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yc{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===yc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends yc{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ze(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const Qp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends yc{construct(e,t,r){return new jn(e,t,r)}static isValidIdentifier(e){return Qp.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ze(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ze(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ze(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===m?(c=!c,s++):"."!==m||c?(r+=m,s++):(u(),s++)}if(u(),c)throw new Ze(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class st{constructor(e){this.path=e}static fromPath(e){return new st(mn.fromString(e))}static fromName(e){return new st(mn.fromString(e).popFirst(5))}static empty(){return new st(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new mn(e.slice()))}}class na{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Jp(n){return n.fields.find(e=>2===e.kind)}function vl(n){return n.fields.filter(e=>2!==e.kind)}na.UNKNOWN_ID=-1;class h{constructor(e,t){this.fieldPath=e,this.kind=t}}class E{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new E(0,ee.min())}}function M(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Dt.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new ee(s,st.empty(),e)}function U(n){return new ee(n.readTime,n.key,-1)}class ee{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ee(Dt.min(),st.empty(),-1)}static max(){return new ee(Dt.max(),st.empty(),-1)}}function ce(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=st.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const Ve="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ot{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ft(n){return vt.apply(this,arguments)}function vt(){return vt=(0,Me.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==Ve)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),vt.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let s=0,u=0,c=!1;e.forEach(m=>{++s,m.next(()=>{++u,c&&u===s&&t()},_=>r(_))}),c=!0,u===s&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(s=>s?ae.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,s)=>{const u=e.length,c=new Array(u);let m=0;for(let _=0;_<u;_++){const C=_;t(e[C]).next(P=>{c[C]=P,++m,m===u&&r(c)},P=>s(P))}})}static doWhile(e,t){return new ae((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class _s{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ra(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Pd(r.target.error);this.V.reject(new Ra(e,s))}}static open(e,t,r,s){try{return new _s(t,e.transaction(s,r))}catch(u){throw new Ra(t,u)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new t_(t)}}class es{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===es.S((0,q.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),Pa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,q.hl)())return!1;if(es.C())return!0;const e=(0,q.z$)(),t=es.S(e),r=0<t&&t<10,s=es.v(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,Me.Z)(function*(){return t.db||(qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new Ra(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;s("VersionError"===m.name?new Ze(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ze(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ra(e,m))},u.onupgradeneeded=c=>{qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.p.N(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Me.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.O(e);const _=_s.open(u.db,e,c?"readonly":"readwrite",r),C=s(_).next(P=>(_.g(),P)).catch(P=>(_.abort(P),ae.reject(P))).toPromise();return C.catch(()=>{}),yield _.m,C}catch(_){const C=_,P="FirebaseError"!==C.name&&m<3;if(qe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",P),u.close(),!P)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Sd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Pa(this.k.delete())}}class Ra extends Ze{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ao(n){return"IndexedDbTransactionError"===n.name}class t_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pa(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),Pa(this.store.add(e))}get(e){return Pa(this.store.get(e)).next(t=>(void 0===t&&(t=null),qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),Pa(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),Pa(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.G(s,(c,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ae((u,c)=>{s.onerror=m=>{c(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}H(e,t){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const s=this.cursor(r);return this.G(s,(u,c,m)=>m.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Z(e){const t=this.cursor({});return new ae((r,s)=>{t.onerror=u=>{const c=Pd(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}G(e,t){const r=[];return new ae((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void s();const _=new Sd(m),C=t(m.primaryKey,m.value,_);if(C instanceof ae){const P=C.catch(k=>(_.done(),ae.reject(k)));r.push(P)}_.isDone?s():null===_.$?m.continue():m.continue(_.$)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pa(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Pd(r.target.error);t(s)}})}let Rd=!1;function Pd(n){const e=es.S((0,q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rd||(Rd=!0,setTimeout(()=>{throw r},0)),r}}return n}class xa{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Me.Z)(function*(){t.task=null;try{qe("IndexBackiller",`Documents written: ${yield t.X.te()}`)}catch(r){Ao(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ft(r)}yield t.ee(6e4)}))}}class Xp{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let s=t,u=!0;return ae.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return qe("IndexBackiller",`Processing collection: ${c}`),this.re(e,c,s).next(m=>{s-=m,r.add(c)});u=!1})).next(()=>t-s)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ie(s,u)).next(m=>(qe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}ie(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=U(u);ce(c,r)>0&&(r=c)}),new ee(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ys=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.se(s),this.oe=s=>r.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function El(n){return null==n}function nf(n){return 0===n&&1/n==-1/0}function eg(n){return"number"==typeof n&&Number.isInteger(n)&&!nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Rv(e)),e=dw(n.get(t),e);return Rv(e)}function dw(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Rv(n){return n+"\x01\x01"}function Ma(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&gt(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let _;0===s.length?_=m:(s+=m,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:gt()}u=c+2}return new mn(r)}const n_=["userId","batchId"];function tg(n,e){return[n,vs(e)]}function ng(n,e,t){return[n,vs(e),t]}const rg={},hw=["prefixPath","collectionGroup","readTime","documentId"],Pv=["prefixPath","collectionGroup","documentId"],r_=["collectionGroup","readTime","prefixPath","documentId"],fw=["canonicalId","targetId"],xv=["targetId","path"],ig=["path","targetId"],LA=["collectionId","parent"],pw=["indexId","uid"],FA=["uid","sequenceNumber"],VA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UA=["indexId","uid","orderedDocumentKey"],gw=["userId","collectionPath","documentId"],mw=["userId","collectionPath","largestBatchId"],i_=["userId","collectionGroup","largestBatchId"],s_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rf=[...s_,"documentOverlays"],_w=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yw=_w,JP=[...yw,"indexConfiguration","indexState","indexEntries"];class Mv extends ot{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function yi(n,e){const t=nt(n);return es.M(t.ae,e)}function vw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class or{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new og(this.root,e,this.comparator,!1)}getReverseIterator(){return new og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new og(this.root,e,this.comparator,!0)}}class og{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Li{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Li.RED,this.left=s??Li.EMPTY,this.right=u??Li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Li(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Li.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1,Li.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,t,r,s,u){return this}insert(e,t,r){return new Li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(e){return new Nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qn(this.comparator);return t.data=e,t}}class Nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sf(n){return n.hasNext()?n.getNext():void 0}class ao{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new ao([])}unionWith(e){let t=new Qn(jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Iu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ew extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Ew("Invalid base64 string: "+u):u}}(e);return new Si(t)}static fromUint8Array(e){const t=function(s){let u="";for(let c=0;c<s.length;++c)u+=String.fromCharCode(s[c]);return u}(e);return new Si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=vc.exec(n);if(Rt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jr(n.seconds),nanos:Jr(n.nanos)}}function Jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ec(n){return"string"==typeof n?Si.fromBase64String(n):Si.fromUint8Array(n)}function Ov(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kv(n){const e=n.mapValue.fields.__previous_value__;return Ov(e)?kv(e):e}function o_(n){const e=ra(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}class XP{constructor(e,t,r,s,u,c,m,_,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=C}}class Il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}const Ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},a_={nullValue:"NULL_VALUE"};function wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ov(n)?4:Fv(n)?9007199254740991:10:gt()}function wu(n,e){if(n===e)return!0;const t=wc(n);if(t!==wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return o_(n).isEqual(o_(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const c=ra(s.timestampValue),m=ra(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,Ec(n.bytesValue).isEqual(Ec(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return Jr(s.geoPointValue.latitude)===Jr(u.geoPointValue.latitude)&&Jr(s.geoPointValue.longitude)===Jr(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return Jr(s.integerValue)===Jr(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const c=Jr(s.doubleValue),m=Jr(u.doubleValue);return c===m?nf(c)===nf(m):isNaN(c)&&isNaN(m)}return!1}(n,e);case 9:return Iu(n.arrayValue.values||[],e.arrayValue.values||[],wu);case 10:return function(s,u){const c=s.mapValue.fields||{},m=u.mapValue.fields||{};if(vw(c)!==vw(m))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===m[_]||!wu(c[_],m[_])))return!1;return!0}(n,e);default:return gt()}var u}function xd(n,e){return void 0!==(n.values||[]).find(t=>wu(t,e))}function Es(n,e){if(n===e)return 0;const t=wc(n),r=wc(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(u,c){const m=Jr(u.integerValue||u.doubleValue),_=Jr(c.integerValue||c.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(n,e);case 3:return af(n.timestampValue,e.timestampValue);case 4:return af(o_(n),o_(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(u,c){const m=Ec(u),_=Ec(c);return m.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(u,c){const m=u.split("/"),_=c.split("/");for(let C=0;C<m.length&&C<_.length;C++){const P=Gt(m[C],_[C]);if(0!==P)return P}return Gt(m.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,c){const m=Gt(Jr(u.latitude),Jr(c.latitude));return 0!==m?m:Gt(Jr(u.longitude),Jr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,c){const m=u.values||[],_=c.values||[];for(let C=0;C<m.length&&C<_.length;++C){const P=Es(m[C],_[C]);if(P)return P}return Gt(m.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,c){if(u===Ic.mapValue&&c===Ic.mapValue)return 0;if(u===Ic.mapValue)return 1;if(c===Ic.mapValue)return-1;const m=u.fields||{},_=Object.keys(m),C=c.fields||{},P=Object.keys(C);_.sort(),P.sort();for(let k=0;k<_.length&&k<P.length;++k){const G=Gt(_[k],P[k]);if(0!==G)return G;const J=Es(m[_[k]],C[P[k]]);if(0!==J)return J}return Gt(_.length,P.length)}(n.mapValue,e.mapValue);default:throw gt()}}function af(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=ra(n),r=ra(e),s=Gt(t.seconds,r.seconds);return 0!==s?s:Gt(t.nanos,r.nanos)}function Md(n){return u_(n)}function u_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ra(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ec(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const u of t.values||[])s?s=!1:r+=",",r+=u_(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",u=!0;for(const c of r)u?u=!1:s+=",",s+=`${c}:${u_(t.fields[c])}`;return s+"}"}(n.mapValue):gt()}function uf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Iw(n){return!!n&&"integerValue"in n}function l_(n){return!!n&&"arrayValue"in n}function c_(n){return!!n&&"nullValue"in n}function d_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lv(n){return!!n&&"mapValue"in n}function h_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=h_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=h_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Fv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function jA(n){return"nullValue"in n?a_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?uf(Il.empty(),st.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function HA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?uf(Il.empty(),st.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ic:gt()}function ww(n,e){const t=Es(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Tw(n,e){const t=Es(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fi{constructor(e){this.value=e}static empty(){return new Fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=h_(t)}setAll(e){let t=jn.emptyPath(),r={},s=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=m.popLast()}c?r[m.lastSegment()]=h_(c):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Lv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Lv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){bo(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Fi(h_(this.value))}}function ug(n){const e=[];return bo(n.fields,(t,r)=>{const s=new jn([t]);if(Lv(r)){const u=ug(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new ao(e)}class Dr{constructor(e,t,r,s,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Dr(e,0,Dt.min(),Dt.min(),Dt.min(),Fi.empty(),0)}static newFoundDocument(e,t,r,s){return new Dr(e,1,t,Dt.min(),r,s,0)}static newNoDocument(e,t){return new Dr(e,2,t,Dt.min(),Dt.min(),Fi.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,Dt.min(),Dt.min(),Fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tu{constructor(e,t){this.position=e,this.inclusive=t}}function Cw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?st.comparator(st.fromName(c.referenceValue),t.key):Es(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Nd(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wu(n.position[t],e.position[t]))return!1;return!0}class lg{constructor(e,t="asc"){this.field=e,this.dir=t}}function $A(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class f_{}class _n extends f_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Aw(e,t,r):"array-contains"===t?new zA(e,r):"in"===t?new $v(e,r):"not-in"===t?new Sw(e,r):"array-contains-any"===t?new p_(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new bw(e,r):new jv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Es(t,this.value)):null!==t&&wc(this.value)===wc(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends f_{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Jn(e,t)}matches(e){return lf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function lf(n){return"and"===n.op}function Vv(n){return"or"===n.op}function Uv(n){return Bv(n)&&lf(n)}function Bv(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function Dw(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+Md(n.value);if(Uv(n))return n.filters.map(e=>Dw(e)).join(",");{const e=n.filters.map(t=>Dw(t)).join(",");return`${n.op}(${e})`}}function GA(n,e){return n instanceof _n?(r=n,(s=e)instanceof _n&&r.op===s.op&&r.field.isEqual(s.field)&&wu(r.value,s.value)):n instanceof Jn?function(r,s){return s instanceof Jn&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((u,c,m)=>u&&GA(c,s.filters[m]),!0)}(n,e):void gt();var r,s}function cf(n,e){const t=n.filters.concat(e);return Jn.create(t,n.op)}function df(n){return n instanceof _n?`${(t=n).field.canonicalString()} ${t.op} ${Md(t.value)}`:n instanceof Jn?function(t){return t.op.toString()+" {"+t.getFilters().map(df).join(" ,")+"}"}(n):"Filter";var t}class Aw extends _n{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class bw extends _n{constructor(e,t){super(e,"in",t),this.keys=Hv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jv extends _n{constructor(e,t){super(e,"not-in",t),this.keys=Hv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>st.fromName(r.referenceValue))}class zA extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return l_(t)&&xd(t.arrayValue,this.value)}}class $v extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xd(this.value.arrayValue,t)}}class Sw extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xd(this.value.arrayValue,t)}}class p_ extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!l_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}}class ex{constructor(e,t=null,r=[],s=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=m,this.ce=null}}function cg(n,e=null,t=[],r=[],s=null,u=null,c=null){return new ex(n,e,t,r,s,u,c)}function Od(n){const e=nt(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(u=r).field.canonicalString()+u.dir;var u}).join(","),El(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Md(r)).join(",")),e.ce=t}return e.ce}function kd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$A(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nd(n.startAt,e.startAt)&&Nd(n.endAt,e.endAt)}function dg(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function hg(n,e){return n.filters.filter(t=>t instanceof _n&&t.field.isEqual(e))}function Tc(n,e,t){let r=a_,s=!0;for(const u of hg(n,e)){let c=a_,m=!0;switch(u.op){case"<":case"<=":c=jA(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=a_}ww({value:r,inclusive:s},{value:c,inclusive:m})<0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];ww({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Rw(n,e,t){let r=Ic,s=!0;for(const u of hg(n,e)){let c=Ic,m=!0;switch(u.op){case">=":case">":c=HA(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Ic}Tw({value:r,inclusive:s},{value:c,inclusive:m})>0&&(r=c,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Tw({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Na{constructor(e,t=null,r=[],s=[],u=null,c="F",m=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=_,this.le=null,this.he=null,this.Pe=null}}function fg(n,e,t,r,s,u,c,m){return new Na(n,e,t,r,s,u,c,m)}function hf(n){return new Na(n)}function g_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ff(n){return null!==n.collectionGroup}function Us(n){const e=nt(n);if(null===e.le){e.le=[];const t=new Set;for(const u of e.explicitOrderBy)e.le.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Qn(jn.comparator);return c.filters.forEach(_=>{_.getFlattenedFilters().forEach(C=>{C.isInequality()&&(m=m.add(C.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.le.push(new lg(u,r))}),t.has(jn.keyField().canonicalString())||e.le.push(new lg(jn.keyField(),r))}return e.le}function vi(n){const e=nt(n);return e.he||(e.he=function m_(n,e){if("F"===n.limitType)return cg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new lg(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new Tu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Tu(n.startAt.position,n.startAt.inclusive):null;return cg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Us(n))),e.he}function Gv(n,e){const t=n.filters.concat([e]);return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function __(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pf(n,e){return kd(vi(n),vi(e))&&n.limitType===e.limitType}function Ld(n){return`${Od(vi(n))}|lt:${n.limitType}`}function gf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>df(s)).join(", ")}]`),El(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(c=s).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Md(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Md(s)).join(",")),`Target(${r})`}(vi(n))}; limitType=${n.limitType})`}function pg(n,e){return e.isFoundDocument()&&function(r,s){const u=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):st.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,e)&&function(r,s){for(const u of Us(r))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(r,s){for(const u of r.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(c,m,_){const C=Cw(c,m,_);return c.inclusive?C<=0:C<0}(r.startAt,Us(r),s)||r.endAt&&!function(c,m,_){const C=Cw(c,m,_);return c.inclusive?C>=0:C>0}(r.endAt,Us(r),s)));var r,s}function Pw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y_(n){return(e,t)=>{let r=!1;for(const s of Us(n)){const u=xw(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function xw(n,e,t){const r=n.field.isKeyField()?st.comparator(e.key,t.key):function(u,c,m){const _=c.data.field(u),C=m.data.field(u);return null!==_&&null!==C?Es(_,C):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}class wl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return sg(this.inner)}size(){return this.innerSize}}const Mw=new or(st.comparator);function Is(){return Mw}const WA=new or(st.comparator);function v_(...n){let e=WA;for(const t of n)e=e.insert(t.key,t);return e}function Nw(n){let e=WA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cu(){return E_()}function qA(){return E_()}function E_(){return new wl(n=>n.toString(),(n,e)=>n.isEqual(e))}const I_=new or(st.comparator),ZA=new Qn(st.comparator);function sn(...n){let e=ZA;for(const t of n)e=e.add(t);return e}const zv=new Qn(Gt);function Cc(){return zv}function w_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function T_(n){return{integerValue:""+n}}function mf(n,e){return eg(e)?T_(e):w_(n,e)}class Fd{constructor(){this._=void 0}}function _f(n,e,t){return n instanceof Tl?function(s,u){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&Ov(u)&&(u=kv(u)),u&&(c.fields.__previous_value__=u),{mapValue:c}}(t,e):n instanceof yf?D_(n,e):n instanceof Oa?Ow(n,e):function(s,u){const c=C_(s,u),m=kw(c)+kw(s.Ie);return Iw(c)&&Iw(s.Ie)?T_(m):w_(s.serializer,m)}(n,e)}function Wv(n,e,t){return n instanceof yf?D_(n,e):n instanceof Oa?Ow(n,e):t}function C_(n,e){return n instanceof Vd?Iw(r=e)||(u=r)&&"doubleValue"in u?e:{integerValue:0}:null;var r,u}class Tl extends Fd{}class yf extends Fd{constructor(e){super(),this.elements=e}}function D_(n,e){const t=Lw(e);for(const r of n.elements)t.some(s=>wu(s,r))||t.push(r);return{arrayValue:{values:t}}}class Oa extends Fd{constructor(e){super(),this.elements=e}}function Ow(n,e){let t=Lw(e);for(const r of n.elements)t=t.filter(s=>!wu(s,r));return{arrayValue:{values:t}}}class Vd extends Fd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function kw(n){return Jr(n.integerValue||n.doubleValue)}function Lw(n){return l_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ud{constructor(e,t){this.field=e,this.transform=t}}class KA{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class A_{}function gg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new _g(n.key,Nr.none()):new Cl(n.key,n.data,Nr.none());{const t=n.data,r=Fi.empty();let s=new Qn(jn.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new Dl(n.key,r,new ao(s.toArray()),Nr.none())}}function Zv(n,e,t){n instanceof Cl?function(s,u,c){const m=s.value.clone(),_=Uw(s.fieldTransforms,u,c.transformResults);m.setAll(_),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):n instanceof Dl?function(s,u,c){if(!qv(s.precondition,u))return void u.convertToUnknownDocument(c.version);const m=Uw(s.fieldTransforms,u,c.transformResults),_=u.data;_.setAll(Kv(s)),_.setAll(m),u.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mg(n,e,t,r){return n instanceof Cl?function(u,c,m,_){if(!qv(u.precondition,c))return m;const C=u.value.clone(),P=Yv(u.fieldTransforms,_,c);return C.setAll(P),c.convertToFoundDocument(c.version,C).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dl?function(u,c,m,_){if(!qv(u.precondition,c))return m;const C=Yv(u.fieldTransforms,_,c),P=c.data;return P.setAll(Kv(u)),P.setAll(C),c.convertToFoundDocument(c.version,P).setHasLocalMutations(),null===m?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(k=>k.field))}(n,e,t,r):(m=t,qv(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m);var c,m}function Vw(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=C_(r.transform,s||null);null!=u&&(null===t&&(t=Fi.empty()),t.set(r.field,u))}return t||null}function b_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&Iu(r,s,(u,c)=>function Fw(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof yf&&s instanceof yf||r instanceof Oa&&s instanceof Oa?Iu(r.elements,s.elements,wu):r instanceof Vd&&s instanceof Vd?wu(r.Ie,s.Ie):r instanceof Tl&&s instanceof Tl);var r,s}(u,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class Cl extends A_{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dl extends A_{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Kv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Uw(n,e,t){const r=new Map;Rt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,m=e.data.field(u.field);r.set(u.field,Wv(c,m,t[s]))}return r}function Yv(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,_f(u,c,e))}return r}class _g extends A_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qv extends A_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vf{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Zv(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=mg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=mg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qA();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(s.key)?null:m;const _=gg(c,m);null!==_&&r.set(s.key,_),c.isValidDocument()||c.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&Iu(this.mutations,e.mutations,(t,r)=>b_(t,r))&&Iu(this.baseMutations,e.baseMutations,(t,r)=>b_(t,r))}}class Jv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Rt(e.mutations.length===r.length);let s=I_;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new Jv(e,t,r,s)}}class Dc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class YA{constructor(e,t){this.count=e,this.unchangedNames=t}}var ai,Sn;function Bw(n){switch(n){default:return gt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function jw(n){if(void 0===n)return sr("GRPC error has no .code"),we.UNKNOWN;switch(n){case ai.OK:return we.OK;case ai.CANCELLED:return we.CANCELLED;case ai.UNKNOWN:return we.UNKNOWN;case ai.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case ai.INTERNAL:return we.INTERNAL;case ai.UNAVAILABLE:return we.UNAVAILABLE;case ai.UNAUTHENTICATED:return we.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case ai.NOT_FOUND:return we.NOT_FOUND;case ai.ALREADY_EXISTS:return we.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return we.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case ai.ABORTED:return we.ABORTED;case ai.OUT_OF_RANGE:return we.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return we.UNIMPLEMENTED;case ai.DATA_LOSS:return we.DATA_LOSS;default:return gt()}}(Sn=ai||(ai={}))[Sn.OK=0]="OK",Sn[Sn.CANCELLED=1]="CANCELLED",Sn[Sn.UNKNOWN=2]="UNKNOWN",Sn[Sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sn[Sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sn[Sn.NOT_FOUND=5]="NOT_FOUND",Sn[Sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sn[Sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sn[Sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sn[Sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sn[Sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sn[Sn.ABORTED=10]="ABORTED",Sn[Sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sn[Sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sn[Sn.INTERNAL=13]="INTERNAL",Sn[Sn.UNAVAILABLE=14]="UNAVAILABLE",Sn[Sn.DATA_LOSS=15]="DATA_LOSS";function Xv(){return new TextEncoder}const eE=new _l([4294967295,4294967295],0);function QA(n){const e=Xv().encode(n),t=new Eu;return t.update(e),new Uint8Array(t.digest())}function S_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new _l([t,r],0),new _l([s,u],0)]}class R_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Eg(`Invalid padding: ${t}`);if(r<0)throw new Eg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Eg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Eg(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=_l.fromNumber(this.Te)}de(e,t,r){let s=e.add(t.multiply(_l.fromNumber(r)));return 1===s.compare(eE)&&(s=new _l([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=QA(e),[r,s]=S_(t);for(let u=0;u<this.hashCount;u++){const c=this.de(r,s,u);if(!this.Ae(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new R_(u,s,t);return r.forEach(m=>c.insert(m)),c}insert(e){if(0===this.Te)return;const t=QA(e),[r,s]=S_(t);for(let u=0;u<this.hashCount;u++){const c=this.de(r,s,u);this.Re(c)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Eg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ig{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ef.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ig(Dt.min(),s,new or(Gt),Is(),sn())}}class Ef{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ef(r,t,sn(),sn(),sn())}}class P_{constructor(e,t,r,s){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=s}}class tE{constructor(e,t){this.targetId=e,this.fe=t}}class Hw{constructor(e,t,r=Si.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class $w{constructor(){this.ge=0,this.pe=rE(),this.ye=Si.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=sn(),t=sn(),r=sn();return this.pe.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:gt()}}),new Ef(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=rE()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class tx{constructor(e){this.Le=e,this.ke=new Map,this.qe=Is(),this.Qe=nE(),this.Ke=new or(Gt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.fe.count,s=this.Ye(t);if(s){const u=s.target;if(dg(u))if(0===r){const c=new st(u.path);this.We(t,c,Dr.newNoDocument(c,Dt.min()))}else Rt(1===r);else{const c=this.Ze(t);if(c!==r){const m=this.Xe(e),_=m?this.et(m,e,c):1;0!==_&&(this.He(t),this.Ke=this.Ke.insert(t,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:u=0}=t;let c,m;try{c=Ec(r).toUint8Array()}catch(_){if(_ instanceof Ew)return Yi("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new R_(c,s,u)}catch(_){return Yi(_ instanceof Eg?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return 0===m.Te?null:m}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(u=>{const c=this.Le.nt(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.We(t,u,null),s++)}),s}it(e){const t=new Map;this.ke.forEach((u,c)=>{const m=this.Ye(c);if(m){if(u.current&&dg(m.target)){const _=new st(m.target.path);null!==this.qe.get(_)||this.st(c,_)||this.We(c,_,Dr.newNoDocument(_,e))}u.De&&(t.set(c,u.ve()),u.Fe())}});let r=sn();this.Qe.forEach((u,c)=>{let m=!0;c.forEachWhile(_=>{const C=this.Ye(_);return!C||"TargetPurposeLimboResolution"===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.qe.forEach((u,c)=>c.setReadTime(e));const s=new Ig(e,t,this.Ke,this.qe,r);return this.qe=Is(),this.Qe=nE(),this.Ke=new or(Gt),s}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,t)?s.Me(t,1):s.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new $w,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Qn(Gt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new $w),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nE(){return new or(st.comparator)}function rE(){return new or(st.comparator)}const ka={asc:"ASCENDING",desc:"DESCENDING"},Gw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nx={and:"AND",or:"OR"};class iE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Du(n,e){return n.useProto3Json||El(e)?e:{value:e}}function Ac(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rx(n,e){return Ac(n,e.toTimestamp())}function ui(n){return Rt(!!n),Dt.fromTimestamp(function(t){const r=ra(t);return new bn(r.seconds,r.nanos)}(n))}function wg(n,e){return(r=n,new mn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function La(n){const e=mn.fromString(n);return Rt(M_(e)),e}function If(n,e){return wg(n.databaseId,e.path)}function Au(n,e){const t=La(e);if(t.get(1)!==n.databaseId.projectId)throw new Ze(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ze(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(x_(t))}function Ww(n,e){return wg(n.databaseId,e)}function Ri(n){const e=La(n);return 4===e.length?mn.emptyPath():x_(e)}function Tg(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function x_(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qw(n,e,t){return{name:If(n,e),fields:t.value.mapValue.fields}}function Zw(n,e,t){const r=Au(n,e.name),s=ui(e.updateTime),u=e.createTime?ui(e.createTime):Dt.min(),c=new Fi({mapValue:{fields:e.fields}}),m=Dr.newFoundDocument(r,s,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function wf(n,e){let t;if(e instanceof Cl)t={update:qw(n,e.key,e.value)};else if(e instanceof _g)t={delete:If(n,e.key)};else if(e instanceof Dl)t={update:qw(n,e.key,e.data),updateMask:Jw(e.fieldMask)};else{if(!(e instanceof Qv))return gt();t={verify:If(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const m=c.transform;if(m instanceof Tl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof yf)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Oa)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Vd)return{fieldPath:c.field.canonicalString(),increment:m.Ie};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:rx(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:gt()),t;var u}function oE(n,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Nr.updateTime(ui(u.updateTime)):void 0!==u.exists?Nr.exists(u.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(c,m){let _=null;"setToServerValue"in m?(Rt("REQUEST_TIME"===m.setToServerValue),_=new Tl):"appendMissingElements"in m?_=new yf(m.appendMissingElements.values||[]):"removeAllFromArray"in m?_=new Oa(m.removeAllFromArray.values||[]):"increment"in m?_=new Vd(c,m.increment):gt();const C=jn.fromServerFormat(m.fieldPath);return new Ud(C,_)}(n,s)):[];var u;if(e.update){const s=Au(n,e.update.name),u=new Fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ao((e.updateMask.fieldPaths||[]).map(P=>jn.fromServerFormat(P)));return new Dl(s,u,c,t,r)}return new Cl(s,u,t,r)}if(e.delete){const s=Au(n,e.delete);return new _g(s,t)}if(e.verify){const s=Au(n,e.verify);return new Qv(s,t)}return gt()}function aE(n,e){return{documents:[Ww(n,e.path)]}}function uE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ww(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ww(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return cE(Jn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(C=>{return{field:bc((k=C).field),direction:Tf(k.dir)};var k})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=Du(n,e.limit);return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),t;var _}function Qw(n){let e=Ri(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Rt(1===r);const P=t.from[0];P.allDescendants?s=P.collectionId:e=e.child(P.collectionId)}let u=[];t.where&&(u=function(k){const G=lE(k);return G instanceof Jn&&Uv(G)?G.getFilters():[G]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(G=>{return new lg(Df((he=G).field),function(Ne){switch(Ne){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(he.direction));var he}));let m=null;t.limit&&(m=function(k){let G;return G="object"==typeof k?k.value:k,El(G)?null:G}(t.limit));let _=null;var k;t.startAt&&(_=new Tu((k=t.startAt).values||[],!!k.before));let C=null;return t.endAt&&(C=function(k){return new Tu(k.values||[],!k.before)}(t.endAt)),fg(e,s,c,u,m,"F",_,C)}function lE(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Df(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Df(t.unaryFilter.field);return _n.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Df(t.unaryFilter.field);return _n.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Df(t.unaryFilter.field);return _n.create(c,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?_n.create(Df((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jn.create(t.compositeFilter.filters.map(r=>lE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return gt()}}(t.compositeFilter.op))}(n):gt();var t}function Tf(n){return ka[n]}function Al(n){return Gw[n]}function Cf(n){return nx[n]}function bc(n){return{fieldPath:n.canonicalString()}}function Df(n){return jn.fromServerFormat(n.fieldPath)}function cE(n){return n instanceof _n?function(t){if("=="===t.op){if(d_(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NAN"}};if(c_(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(d_(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NAN"}};if(c_(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(t.field),op:Al(t.op),value:t.value}}}(n):n instanceof Jn?function(t){const r=t.getFilters().map(s=>cE(s));return 1===r.length?r[0]:{compositeFilter:{op:Cf(t.op),filters:r}}}(n):gt()}function Jw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function M_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class So{constructor(e,t,r,s,u=Dt.min(),c=Dt.min(),m=Si.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Cg{constructor(e){this.ut=e}}function dE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:N_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:If(u=n.ut,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:Ac(u,c.version.toTimestamp()),createTime:Ac(u,c.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bd(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Bd(e.version)}}var u,c;return r}function N_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(n){const e=new bn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Hd(n,e){const t=(e.baseMutations||[]).map(u=>oE(n.ut,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>oE(n.ut,u)),s=bn.fromMillis(e.localWriteTimeMs);return new vf(e.batchId,s,t,r)}function Af(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):Dt.min();let r;return r=void 0!==n.query.documents?(Rt(1===(u=n.query).documents.length),vi(hf(Ri(u.documents[0])))):function(u){return vi(Qw(u))}(n.query),new So(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Si.fromBase64String(n.resumeToken));var u}function XA(n,e){const t=Bd(e.snapshotVersion),r=Bd(e.lastLimboFreeSnapshotVersion);let s;s=dg(e.target)?aE(n.ut,e.target):uE(n.ut,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Od(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function hE(n){const e=Qw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?__(e,e.limit,"L"):e}function eT(n,e){return new Dc(e.largestBatchId,oE(n.ut,e.overlayMutation))}function eb(n,e){const t=e.path.lastSegment();return[n,vs(e.path.popLast()),t]}function fE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bd(r.readTime),documentKey:vs(r.documentKey.path),largestBatchId:r.largestBatchId}}class tT{getBundleMetadata(e,t){return tb(e).get(t).next(r=>{if(r)return{id:(u=r).bundleId,createTime:jd(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return tb(e).put({bundleId:(s=t).id,createTime:Bd(ui(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Dg(e).get(t).next(r=>{if(r)return{name:(u=r).name,query:hE(u.bundledQuery),readTime:jd(u.readTime)};var u})}saveNamedQuery(e,t){return Dg(e).put({name:(s=t).name,readTime:Bd(ui(s.readTime)),bundledQuery:s.bundledQuery});var s}}function tb(n){return yi(n,"bundles")}function Dg(n){return yi(n,"namedQueries")}class Ag{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){return new Ag(e,t.uid||"")}getOverlay(e,t){return bf(e).get(eb(this.userId,t)).next(r=>r?eT(this.serializer,r):null)}getOverlays(e,t){const r=Cu();return ae.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const m=new Dc(t,c);s.push(this.lt(e,m))}),ae.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(vs(c.getCollectionPath())));const u=[];return s.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(bf(e).H("collectionPathOverlayIndex",m))}),ae.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Cu(),u=vs(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return bf(e).W("collectionPathOverlayIndex",c).next(m=>{for(const _ of m){const C=eT(this.serializer,_);s.set(C.getKey(),C)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Cu();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bf(e).Y({index:"collectionGroupOverlayIndex",range:m},(_,C,P)=>{const k=eT(this.serializer,C);u.size()<s||k.largestBatchId===c?(u.set(k.getKey(),k),c=k.largestBatchId):P.done()}).next(()=>u)}lt(e,t){return bf(e).put(function(s,u,c){const[m,_,C]=eb(u,c.mutation.key);return{userId:u,collectionPath:_,documentId:C,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:wf(s.ut,c.mutation)}}(this.serializer,this.userId,t))}}function bf(n){return yi(n,"documentOverlays")}class $d{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Jr(e.integerValue));else if("doubleValue"in e){const r=Jr(e.doubleValue);isNaN(r)?this.Tt(t,13):(this.Tt(t,15),nf(r)?t.Et(0):t.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt(`${r.seconds||""}`),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Ec(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(t,45),t.Et(r.latitude||0),t.Et(r.longitude||0)}else"mapValue"in e?Fv(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):gt()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const r=e.fields||{};this.Tt(t,55);for(const s of Object.keys(r))this.At(s,t),this.Pt(r[s],t)}yt(e,t){const r=e.values||[];this.Tt(t,50);for(const s of r)this.Pt(s,t)}ft(e,t){this.Tt(t,37),st.fromName(e).path.forEach(r=>{this.Tt(t,60),this.wt(r,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function nT(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function pE(n){const e=64-function(r){let s=0;for(let u=0;u<8;++u){const c=nT(255&r[u]);if(s+=c,8!==c)break}return s}(n);return Math.ceil(e/8)}$d.St=new $d;class on{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Dt(r.value),r=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const s=t.codePointAt(0);this.Dt(240|s>>>18),this.Dt(128|63&s>>>12),this.Dt(128|63&s>>>6),this.Dt(128|63&s)}}this.Ct()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=t.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Nt(e){const t=this.Bt(e),r=pE(t);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}kt(e){const t=this.Bt(e),r=pE(t);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class rT{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class iT{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class bu{constructor(){this.Wt=new on,this.Gt=new rT(this.Wt),this.zt=new iT(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Sc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Sc(this.indexId,this.documentKey,this.arrayValue,r)}}function Rc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bg(n.arrayValue,e.arrayValue),0!==t?t:(t=bg(n.directionalValue,e.directionalValue),0!==t?t:st.comparator(n.documentKey,e.documentKey)))}function bg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Gd{constructor(e){this.Jt=new Qn((t,r)=>jn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Rt(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=Jp(e);if(void 0!==t&&!this.tn(t))return!1;const r=vl(e);let s=new Set,u=0,c=0;for(;u<r.length&&this.tn(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.Jt.size>0){const m=this.Jt.getIterator().getNext();if(!s.has(m.field.canonicalString())){const _=r[u];if(!this.nn(m,_)||!this.rn(this.Yt[c++],_))return!1}++u}for(;u<r.length;++u)if(c>=this.Yt.length||!this.rn(this.Yt[c++],r[u]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Qn(jn.comparator);const t=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new h(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new h(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new h(r.field,"asc"===r.dir?0:1)));return new na(na.UNKNOWN_ID,this.collectionId,t,E.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function O_(n){var e,t;if(Rt(n instanceof _n||n instanceof Jn),n instanceof _n){if(n instanceof $v){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>_n.create(n.field,"==",u)))||[];return Jn.create(s,"or")}return n}const r=n.filters.map(s=>O_(s));return Jn.create(r,n.op)}function Sg(n){if(0===n.getFilters().length)return[];const e=Pg(O_(n));return Rt(L_(e)),k_(e)||Rg(e)?[e]:e.getFilters()}function k_(n){return n instanceof _n}function Rg(n){return n instanceof Jn&&Uv(n)}function L_(n){return k_(n)||Rg(n)||function(t){if(t instanceof Jn&&Vv(t)){for(const r of t.getFilters())if(!k_(r)&&!Rg(r))return!1;return!0}return!1}(n)}function Pg(n){if(Rt(n instanceof _n||n instanceof Jn),n instanceof _n)return n;if(1===n.filters.length)return Pg(n.filters[0]);const e=n.filters.map(r=>Pg(r));let t=Jn.create(e,n.op);return t=U_(t),L_(t)?t:(Rt(t instanceof Jn),Rt(lf(t)),Rt(t.filters.length>1),t.filters.reduce((r,s)=>F_(r,s)))}function F_(n,e){let t;return Rt(n instanceof _n||n instanceof Jn),Rt(e instanceof _n||e instanceof Jn),t=n instanceof _n?e instanceof _n?Jn.create([n,e],"and"):V_(n,e):e instanceof _n?V_(e,n):function(s,u){if(Rt(s.filters.length>0&&u.filters.length>0),lf(s)&&lf(u))return cf(s,u.getFilters());const c=Vv(s)?s:u,m=Vv(s)?u:s,_=c.filters.map(C=>F_(C,m));return Jn.create(_,"or")}(n,e),U_(t)}function V_(n,e){if(lf(e))return cf(e,n.getFilters());{const t=e.filters.map(r=>F_(n,r));return Jn.create(t,"or")}}function U_(n){if(Rt(n instanceof _n||n instanceof Jn),n instanceof _n)return n;const e=n.getFilters();if(1===e.length)return U_(e[0]);if(Bv(n))return n;const t=e.map(s=>U_(s)),r=[];return t.forEach(s=>{s instanceof _n?r.push(s):s instanceof Jn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Jn.create(r,n.op)}class nb{constructor(){this.on=new gE}addToCollectionParentIndex(e,t){return this.on.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(ee.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(ee.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class gE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Qn(mn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qn(mn.comparator)).toArray()}}const xg=new Uint8Array(0);class rb{constructor(e,t){this.user=e,this.databaseId=t,this._n=new gE,this.an=new wl(r=>Od(r),(r,s)=>kd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});const u={collectionId:r,parent:vs(s)};return sT(e).put(u)}return ae.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Yp(t),""],!1,!0);return sT(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ma(c.parent))}return r})}addFieldIndex(e,t){const r=Mg(e),s={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(_=>[_.fieldPath.canonicalString(),_.kind])};var m;delete s.indexId;const u=r.add(s);if(t.indexState){const c=zd(e);return u.next(m=>{c.put(fE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Mg(e),s=zd(e),u=Sf(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Mg(e),r=Sf(e),s=zd(e);return t.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,t){return ae.forEach(this.un(t),r=>this.getIndexType(e,r).next(s=>{if(0===s||1===s){const u=new Gd(r).sn();if(null!=u)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=Sf(e);let s=!0;const u=new Map;return ae.forEach(this.un(t),c=>this.cn(e,c).next(m=>{s&&(s=!!m),u.set(c,m)})).next(()=>{if(s){let c=sn();const m=[];return ae.forEach(u,(_,C)=>{var Qe;qe("IndexedDbIndexManager",`Using index ${Qe=_,`id=${Qe.indexId}|cg=${Qe.collectionGroup}|f=${Qe.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${Od(t)}`);const P=function(Qe,Ct){const Xt=Jp(Ct);if(void 0===Xt)return null;for(const En of hg(Qe,Xt.fieldPath))switch(En.op){case"array-contains-any":return En.value.arrayValue.values||[];case"array-contains":return[En.value]}return null}(C,_),k=function(Qe,Ct){const Xt=new Map;for(const En of vl(Ct))for(const ei of hg(Qe,En.fieldPath))switch(ei.op){case"==":case"in":Xt.set(En.fieldPath.canonicalString(),ei.value);break;case"not-in":case"!=":return Xt.set(En.fieldPath.canonicalString(),ei.value),Array.from(Xt.values())}return null}(C,_),G=function(Qe,Ct){const Xt=[];let En=!0;for(const ei of vl(Ct)){const go=0===ei.kind?Tc(Qe,ei.fieldPath,Qe.startAt):Rw(Qe,ei.fieldPath,Qe.startAt);Xt.push(go.value),En&&(En=go.inclusive)}return new Tu(Xt,En)}(C,_),J=function(Qe,Ct){const Xt=[];let En=!0;for(const ei of vl(Ct)){const go=0===ei.kind?Rw(Qe,ei.fieldPath,Qe.endAt):Tc(Qe,ei.fieldPath,Qe.endAt);Xt.push(go.value),En&&(En=go.inclusive)}return new Tu(Xt,En)}(C,_),he=this.ln(_,C,G),Re=this.ln(_,C,J),Ne=this.hn(_,C,k),ht=this.Pn(_.indexId,P,he,G.inclusive,Re,J.inclusive,Ne);return ae.forEach(ht,mt=>r.j(mt,t.limit).next(Qe=>{Qe.forEach(Ct=>{const Xt=st.fromSegments(Ct.documentKey);c.has(Xt)||(c=c.add(Xt),m.push(Xt))})}))}).next(()=>m)}return ae.resolve(null)})}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Sg(Jn.create(e.filters,"and")).map(r=>cg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,r,s,u,c,m){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),C=_/(null!=t?t.length:1),P=[];for(let k=0;k<_;++k){const G=t?this.In(t[k/C]):xg,J=this.Tn(e,G,r[k%C],s),he=this.En(e,G,u[k%C],c),Re=m.map(Ne=>this.Tn(e,G,Ne,!0));P.push(...this.createRange(J,he,Re))}return P}Tn(e,t,r,s){const u=new Sc(e,st.empty(),t,r);return s?u:u.Ht()}En(e,t,r,s){const u=new Sc(e,st.empty(),t,r);return s?u.Ht():u}cn(e,t){const r=new Gd(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const m of u)r.en(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;const s=this.un(t);return ae.forEach(s,u=>this.cn(e,u).next(c=>{c?0!==r&&c.fields.length<function(_){let C=new Qn(jn.comparator),P=!1;for(const k of _.filters)for(const G of k.getFlattenedFilters())G.field.isKeyField()||("array-contains"===G.op||"array-contains-any"===G.op?P=!0:C=C.add(G.field));for(const k of _.orderBy)k.field.isKeyField()||(C=C.add(k.field));return C.size+(P?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}dn(e,t){const r=new bu;for(const s of vl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.jt(s.kind);$d.St.ht(u,c)}return r.Ut()}In(e){const t=new bu;return $d.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const r=new bu;return $d.St.ht(uf(this.databaseId,t),r.jt(function(u){const c=vl(u);return 0===c.length?0:c[c.length-1].kind}(e))),r.Ut()}hn(e,t,r){if(null===r)return[];let s=[];s.push(new bu);let u=0;for(const c of vl(e)){const m=r[u++];for(const _ of s)if(this.Rn(t,c.fieldPath)&&l_(m))s=this.Vn(s,c,m);else{const C=_.jt(c.kind);$d.St.ht(m,C)}}return this.mn(s)}ln(e,t,r){return this.hn(e,t,r.position)}mn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ut();return t}Vn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of s){const _=new bu;_.seed(m.Ut()),$d.St.ht(c,_.jt(t.kind)),u.push(_)}return u}Rn(e,t){return!!e.filters.find(r=>r instanceof _n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Mg(e),s=zd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return ae.forEach(u,m=>s.get([m.indexId,this.uid]).next(_=>{c.push(function(P,k){const G=k?new E(k.sequenceNumber,new ee(jd(k.readTime),new st(Ma(k.documentKey)),k.largestBatchId)):E.empty(),J=P.fields.map(([he,Re])=>new h(jn.fromServerFormat(he),Re));return new na(P.indexId,P.collectionGroup,J,G)}(m,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Mg(e),u=zd(e);return this.fn(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ae.forEach(m,_=>u.put(fE(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ae.forEach(m,_=>this.gn(e,s,_).next(C=>{const P=this.pn(u,_);return C.isEqual(P)?ae.resolve():this.yn(e,u,_,C,P)}))))})}wn(e,t,r,s){return Sf(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.An(r,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,r,s){return Sf(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.An(r,t.key),t.key.path.toArray()])}gn(e,t,r){const s=Sf(e);let u=new Qn(Rc);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,t)])},(c,m)=>{u=u.add(new Sc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}pn(e,t){let r=new Qn(Rc);const s=this.dn(t,e);if(null==s)return r;const u=Jp(t);if(null!=u){const c=e.data.field(u.fieldPath);if(l_(c))for(const m of c.arrayValue.values||[])r=r.add(new Sc(t.indexId,e.key,this.In(m),s))}else r=r.add(new Sc(t.indexId,e.key,xg,s));return r}yn(e,t,r,s,u){qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(_,C,P,k,G){const J=_.getIterator(),he=C.getIterator();let Re=sf(J),Ne=sf(he);for(;Re||Ne;){let ht=!1,mt=!1;if(Re&&Ne){const Qe=P(Re,Ne);Qe<0?mt=!0:Qe>0&&(ht=!0)}else null!=Re?mt=!0:ht=!0;ht?(k(Ne),Ne=sf(he)):mt?(G(Re),Re=sf(J)):(Re=sf(J),Ne=sf(he))}}(s,u,Rc,m=>{c.push(this.wn(e,t,r,m))},m=>{c.push(this.Sn(e,t,r,m))}),ae.waitFor(c)}fn(e){let t=1;return zd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Rc(c,m)).filter((c,m,_)=>!m||0!==Rc(c,_[m-1]));const s=[];s.push(e);for(const c of r){const m=Rc(c,e),_=Rc(c,t);if(0===m)s[0]=e.Ht();else if(m>0&&_<0)s.push(c),s.push(c.Ht());else if(_>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2){if(this.bn(s[c],s[c+1]))return[];u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,xg,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,xg,[]]))}return u}bn(e,t){return Rc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mE)}getMinOffset(e,t){return ae.mapArray(this.un(t),r=>this.cn(e,r).next(s=>s||gt())).next(mE)}}function sT(n){return yi(n,"collectionParents")}function Sf(n){return yi(n,"indexEntries")}function Mg(n){return yi(n,"indexConfiguration")}function zd(n){return yi(n,"indexState")}function mE(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;ce(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ee(e.readTime,e.documentKey,t)}const oT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uo(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const _=r.Y({range:c},(P,k,G)=>(m++,G.delete()));u.push(_.next(()=>{Rt(1===m)}));const C=[];for(const P of t.mutations){const k=ng(e,P.key.path,t.batchId);u.push(s.delete(k)),C.push(P.key)}return ae.waitFor(u).next(()=>C)}function B_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(41943040,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);class j_{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Dn={}}static ct(e,t,r,s){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new j_(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).Y({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Wd(e),c=Su(e);return c.add({}).next(m=>{Rt("number"==typeof m);const _=new vf(m,t,r,s),C=function(J,he,Re){const Ne=Re.baseMutations.map(mt=>wf(J.ut,mt)),ht=Re.mutations.map(mt=>wf(J.ut,mt));return{userId:he,batchId:Re.batchId,localWriteTimeMs:Re.localWriteTime.toMillis(),baseMutations:Ne,mutations:ht}}(this.serializer,this.userId,_),P=[];let k=new Qn((G,J)=>Gt(G.canonicalString(),J.canonicalString()));for(const G of s){const J=ng(this.userId,G.key.path,m);k=k.add(G.key.path.popLast()),P.push(c.put(C)),P.push(u.put(J,rg))}return k.forEach(G=>{P.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.Dn[m]=_.keys()}),ae.waitFor(P).next(()=>_)})}lookupMutationBatch(e,t){return Su(e).get(t).next(r=>r?(Rt(r.userId===this.userId),Hd(this.serializer,r)):null)}Cn(e,t){return this.Dn[t]?ae.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Dn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Su(e).Y({index:"userMutationsIndex",range:s},(c,m,_)=>{m.userId===this.userId&&(Rt(m.batchId>=r),u=Hd(this.serializer,m)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Su(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Su(e).W("userMutationsIndex",t).next(r=>r.map(s=>Hd(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tg(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Wd(e).Y({range:s},(c,m,_)=>{const[C,P,k]=c,G=Ma(P);if(C===this.userId&&t.path.isEqual(G))return Su(e).get(k).next(J=>{if(!J)throw gt();Rt(J.userId===this.userId),u.push(Hd(this.serializer,J))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Gt);const s=[];return t.forEach(u=>{const c=tg(this.userId,u.path),m=IDBKeyRange.lowerBound(c),_=Wd(e).Y({range:m},(C,P,k)=>{const[G,J,he]=C,Re=Ma(J);G===this.userId&&u.path.isEqual(Re)?r=r.add(he):k.done()});s.push(_)}),ae.waitFor(s).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=tg(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Qn(Gt);return Wd(e).Y({range:c},(_,C,P)=>{const[k,G,J]=_,he=Ma(G);k===this.userId&&r.isPrefixOf(he)?he.length===s&&(m=m.add(J)):P.done()}).next(()=>this.vn(e,m))}vn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Su(e).get(u).next(c=>{if(null===c)throw gt();Rt(c.userId===this.userId),r.push(Hd(this.serializer,c))}))}),ae.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return uo(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),ae.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Wd(e).Y({range:r},(u,c,m)=>{if(u[0]===this.userId){const _=Ma(u[1]);s.push(_)}else m.done()}).next(()=>{Rt(0===s.length)})})}containsKey(e,t){return ib(e,this.userId,t)}Mn(e){return aT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ib(n,e,t){const r=tg(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Wd(n).Y({range:u,J:!0},(m,_,C)=>{const[P,k,G]=m;P===e&&k===s&&(c=!0),C.done()}).next(()=>c)}function Su(n){return yi(n,"mutations")}function Wd(n){return yi(n,"documentMutations")}function aT(n){return yi(n,"mutationQueues")}class qd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new qd(0)}static Nn(){return new qd(-1)}}class sb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new qd(t.highestTargetId);return t.highestTargetId=r.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Dt.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Ln(e,s)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(t,r),this.Ln(e,r))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Zd(e).Y((c,m)=>{const _=Af(m);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Zd(e).Y((r,s)=>{const u=Af(s);t(u)})}Bn(e){return uT(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Ln(e,t){return uT(e).put("targetGlobalKey",t)}kn(e,t){return Zd(e).put(XA(this.serializer,t))}qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Od(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Zd(e).Y({range:s,index:"queryTargetsIndex"},(c,m,_)=>{const C=Af(m);kd(t,C.target)&&(u=C,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Pc(e);return t.forEach(c=>{const m=vs(c.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(s)}removeMatchingKeys(e,t,r){const s=Pc(e);return ae.forEach(t,u=>{const c=vs(u.path);return ae.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Pc(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Pc(e);let u=sn();return s.Y({range:r,J:!0},(c,m,_)=>{const C=Ma(c[1]),P=new st(C);u=u.add(P)}).next(()=>u)}containsKey(e,t){const r=vs(t.path),s=IDBKeyRange.bound([r],[Yp(r)],!1,!0);let u=0;return Pc(e).Y({index:"documentTargetsIndex",J:!0,range:s},([c,m],_,C)=>{0!==c&&(u++,C.done())}).next(()=>u>0)}_t(e,t){return Zd(e).get(t).next(r=>r?Af(r):null)}}function Zd(n){return yi(n,"targets")}function uT(n){return yi(n,"targetGlobal")}function Pc(n){return yi(n,"targetDocuments")}function H_([n,e],[t,r]){const s=Gt(n,t);return 0===s?Gt(e,r):s}class ob{constructor(e){this.Qn=e,this.buffer=new Qn(H_),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();H_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var t=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Me.Z)(function*(){t.Wn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ao(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ft(r)}yield t.Gn(3e5)}))}}class ab{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(ys._e);const r=new ob(t);return this.zn.forEachTarget(e,s=>r.Un(s.sequenceNumber)).next(()=>this.zn.Hn(e,s=>r.Un(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(oT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oT):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let r,s,u,c,m,_,C;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),s=this.params.maximumSequenceNumbersToCollect):s=k,c=Date.now(),this.nthSequenceNumber(e,s))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),yl()<=hr.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-P}ms\n\tDetermined least recently used ${s} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(_-m)+`ms\n\tRemoved ${k} documents in `+(C-_)+`ms\nTotal Duration: ${C-P}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:k})))}}class ub{constructor(e,t){this.db=e,this.garbageCollector=function cT(n,e){return new ab(n,e)}(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Yn(e){let t=0;return this.Hn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(r,s)=>t(s))}addReference(e,t,r){return Ro(e,r)}removeReference(e,t,r){return Ro(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ro(e,t)}Xn(e,t){return function(s,u){let c=!1;return aT(s).Z(m=>ib(s,m,u).next(_=>(_&&(c=!0),ae.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Zn(e,(c,m)=>{if(m<=t){const _=this.Xn(e,c).next(C=>{if(!C)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Dt.min()),Pc(e).delete([0,vs(c.path)])))});s.push(_)}}).next(()=>ae.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ro(e,t)}Zn(e,t){const r=Pc(e);let s,u=ys._e;return r.Y({index:"documentTargetsIndex"},([c,m],{path:_,sequenceNumber:C})=>{0===c?(u!==ys._e&&t(new st(Ma(s)),u),u=C,s=_):u=ys._e}).next(()=>{u!==ys._e&&t(new st(Ma(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ro(n,e){return Pc(n).put((s=n.currentSequenceNumber,{targetId:0,path:vs(e.path),sequenceNumber:s}));var s}class $_{constructor(){this.changes=new wl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xc(e).put(r)}removeEntry(e,t,r){return xc(e).delete(function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],N_(c),m[m.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.er(e,r)))}getEntry(e,t){let r=Dr.newInvalidDocument(t);return xc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Mc(t))},(s,u)=>{r=this.tr(t,u)}).next(()=>r)}nr(e,t){let r={size:0,document:Dr.newInvalidDocument(t)};return xc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Mc(t))},(s,u)=>{r={document:this.tr(t,u),size:B_(u)}}).next(()=>r)}getEntries(e,t){let r=Is();return this.rr(e,t,(s,u)=>{const c=this.tr(s,u);r=r.insert(s,c)}).next(()=>r)}ir(e,t){let r=Is(),s=new or(st.comparator);return this.rr(e,t,(u,c)=>{const m=this.tr(u,c);r=r.insert(u,m),s=s.insert(u,B_(c))}).next(()=>({documents:r,sr:s}))}rr(e,t,r){if(t.isEmpty())return ae.resolve();let s=new Qn(db);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Mc(s.first()),Mc(s.last())),c=s.getIterator();let m=c.getNext();return xc(e).Y({index:"documentKeyIndex",range:u},(_,C,P)=>{const k=st.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&db(m,k)<0;)r(m,null),m=c.getNext();m&&m.isEqual(k)&&(r(m,C),m=c.hasNext()?c.getNext():null),m?P.U(Mc(m)):P.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),N_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],_=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xc(e).W(IDBKeyRange.bound(m,_,!0)).next(C=>{u?.incrementDocumentReadCount(C.length);let P=Is();for(const k of C){const G=this.tr(st.fromSegments(k.prefixPath.concat(k.collectionGroup,k.documentId)),k);G.isFoundDocument()&&(pg(t,G)||s.has(G.key))&&(P=P.insert(G.key,G))}return P})}getAllFromCollectionGroup(e,t,r,s){let u=Is();const c=G_(t,r),m=G_(t,ee.max());return xc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(_,C,P)=>{const k=this.tr(st.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===s&&P.done()}).next(()=>u)}newChangeBuffer(e){return new cb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return yE(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}er(e,t){return yE(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const r=function Xw(n,e){let t;if(e.document)t=Zw(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=st.fromSegments(e.noDocument.path),s=jd(e.noDocument.readTime);t=Dr.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=st.fromSegments(e.unknownDocument.path),s=jd(e.unknownDocument.version);t=Dr.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const u=new bn(s[0],s[1]);return Dt.fromTimestamp(u)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Dr.newInvalidDocument(e)}}function _E(n){return new lb(n)}class cb extends $_{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new wl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Qn((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.ar.get(u);if(t.push(this._r.removeEntry(e,u,m.readTime)),c.isValidDocument()){const _=dE(this._r.serializer,c);s=s.add(u.path.popLast());const C=B_(_);r+=C-m.size,t.push(this._r.addEntry(e,u,_))}else if(r-=m.size,this.trackRemovals){const _=dE(this._r.serializer,c.convertToNoDocument(Dt.min()));t.push(this._r.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,u))}),t.push(this._r.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(r=>(this.ar.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:r,sr:s})=>(s.forEach((u,c)=>{this.ar.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function yE(n){return yi(n,"remoteDocumentGlobal")}function xc(n){return yi(n,"remoteDocumentsV14")}function Mc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function G_(n,e){const t=e.documentKey.path.toArray();return[n,N_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function db(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Gt(t[u],r[u]),s)return s;return s=Gt(t.length,r.length),s||(s=Gt(t[t.length-2],r[r.length-2]),s||Gt(t[t.length-1],r[r.length-1]))}class dT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vE{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&mg(r.mutation,s,ao.empty(),bn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sn()){const s=Cu();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=v_();return u.forEach((m,_)=>{c=c.insert(m,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Cu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sn()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,s){let u=Is();const c=E_(),m=E_();return t.forEach((_,C)=>{const P=r.get(C.key);s.has(C.key)&&(void 0===P||P.mutation instanceof Dl)?u=u.insert(C.key,C):void 0!==P?(c.set(C.key,P.mutation.getFieldMask()),mg(P.mutation,C,P.mutation.getFieldMask(),bn.now())):c.set(C.key,ao.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((C,P)=>c.set(C,P)),t.forEach((C,P)=>{var k;return m.set(C,new dT(P,null!==(k=c.get(C))&&void 0!==k?k:null))}),m))}recalculateAndSaveOverlays(e,t){const r=E_();let s=new or((c,m)=>c-m),u=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(_=>{const C=t.get(_);if(null===C)return;let P=r.get(_)||ao.empty();P=m.applyToLocalView(C,P),r.set(_,P);const k=(s.get(m.batchId)||sn()).add(_);s=s.insert(m.batchId,k)})}).next(()=>{const c=[],m=s.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),C=_.key,P=_.value,k=qA();P.forEach(G=>{if(!u.has(G)){const J=gg(t.get(G),r.get(G));null!==J&&k.set(G,J),u=u.add(G)}}),c.push(this.documentOverlayCache.saveOverlays(e,C,k))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return st.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ff(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var c}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ae.resolve(Cu());let m=-1,_=u;return c.next(C=>ae.forEach(C,(P,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(P)?ae.resolve():this.remoteDocumentCache.getEntry(e,P).next(G=>{_=_.insert(P,G)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,_,C,sn())).next(P=>({batchId:m,changes:Nw(P)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next(r=>{let s=v_();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const u=t.collectionGroup;let c=v_();return this.indexManager.getCollectionParents(e,u).next(m=>ae.forEach(m,_=>{const C=(k=t,G=_.child(u),new Na(G,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt));var k,G;return this.getDocumentsMatchingCollectionQuery(e,C,r,s).next(P=>{P.forEach((k,G)=>{c=c.insert(k,G)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,s))).next(c=>{u.forEach((_,C)=>{const P=C.getKey();null===c.get(P)&&(c=c.insert(P,Dr.newInvalidDocument(P)))});let m=v_();return c.forEach((_,C)=>{const P=u.get(_);void 0!==P&&mg(P.mutation,C,ao.empty(),bn.now()),pg(t,C)&&(m=m.insert(_,C))}),m})}}class hT{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return ae.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,{id:(s=t).id,version:s.version,createTime:ui(s.createTime)}),ae.resolve();var s}getNamedQuery(e,t){return ae.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,{name:(s=t).name,query:hE(s.bundledQuery),readTime:ui(s.readTime)}),ae.resolve();var s}}class fT{constructor(){this.overlays=new or(st.comparator),this.lr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cu();return ae.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.lt(e,t,u)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.lr.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.lr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const s=Cu(),u=t.length+1,c=new st(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const _=m.getNext().value,C=_.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new or((C,P)=>C-P);const c=this.overlays.getIterator();for(;c.hasNext();){const C=c.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let P=u.get(C.largestBatchId);null===P&&(P=Cu(),u=u.insert(C.largestBatchId,P)),P.set(C.getKey(),C)}}const m=Cu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((C,P)=>m.set(C,P)),!(m.size()>=s)););return ae.resolve(m)}lt(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Dc(t,r));let u=this.lr.get(t);void 0===u&&(u=sn(),this.lr.set(t,u)),this.lr.set(t,u.add(r.key))}}class Ng{constructor(){this.hr=new Qn(mr.Pr),this.Ir=new Qn(mr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const r=new mr(e,t);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.dr(new mr(e,t))}Ar(e,t){e.forEach(r=>this.removeReference(r,t))}Rr(e){const t=new st(new mn([])),r=new mr(t,e),s=new mr(t,e+1),u=[];return this.Ir.forEachInRange([r,s],c=>{this.dr(c),u.push(c.key)}),u}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new st(new mn([])),r=new mr(t,e),s=new mr(t,e+1);let u=sn();return this.Ir.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new mr(e,0),r=this.hr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mr{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return st.comparator(e.key,t.key)||Gt(e.gr,t.gr)}static Tr(e,t){return Gt(e.gr,t.gr)||st.comparator(e.key,t.key)}}class hb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Qn(mr.Pr)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.pr;this.pr++;const c=new vf(u,t,r,s);this.mutationQueue.push(c);for(const m of s)this.yr=this.yr.add(new mr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Sr(t+1),u=s<0?0:s;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mr(t,0),s=new mr(t,Number.POSITIVE_INFINITY),u=[];return this.yr.forEachInRange([r,s],c=>{const m=this.wr(c.gr);u.push(m)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qn(Gt);return t.forEach(s=>{const u=new mr(s,0),c=new mr(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([u,c],m=>{r=r.add(m.gr)})}),ae.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;st.isDocumentKey(u)||(u=u.child(""));const c=new mr(new st(u),0);let m=new Qn(Gt);return this.yr.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===s&&(m=m.add(_.gr)),!0)},c),ae.resolve(this.br(m))}br(e){const t=[];return e.forEach(r=>{const s=this.wr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Rt(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return ae.forEach(t.mutations,s=>{const u=new mr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,t){const r=new mr(t,0),s=this.yr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ae.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fb{constructor(e){this.Cr=e,this.docs=new or(st.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Cr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let r=Is();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Dr.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Is();const c=t.path,m=new st(c.child("")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:C,value:{document:P}}=_.getNext();if(!c.isPrefixOf(C.path))break;C.path.length>c.length+1||ce(U(P),r)<=0||(s.has(P.key)||pg(t,P))&&(u=u.insert(P.key,P.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,t,r,s){gt()}vr(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EE(this)}getSize(e){return ae.resolve(this.size)}}class EE extends $_{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this._r.addEntry(e,s)):this._r.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class pb{constructor(e){this.persistence=e,this.Fr=new wl(t=>Od(t),kd),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ng,this.targetCount=0,this.Nr=qd.On()}forEachTarget(e,t){return this.Fr.forEach((r,s)=>t(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Mr&&(this.Mr=t),ae.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new qd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.kn(t),ae.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Fr.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fr.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ae.waitFor(u).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fr.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Or.Er(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Or.Ar(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Or.mr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Or.containsKey(t))}}class z_{constructor(e,t){this.Br={},this.overlays={},this.Lr=new ys(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new pb(this),this.indexManager=new nb,this.remoteDocumentCache=new fb(r=>this.referenceDelegate.Qr(r)),this.serializer=new Cg(t),this.Kr=new hT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new hb(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const s=new gb(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(u=>this.referenceDelegate.Ur(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Wr(e,t){return ae.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class gb extends ot{constructor(e){super(),this.currentSequenceNumber=e}}class Kd{constructor(e){this.persistence=e,this.Gr=new Ng,this.zr=null}static jr(e){return new Kd(e)}get Hr(){if(this.zr)return this.zr;throw gt()}addReference(e,t,r){return this.Gr.addReference(r,t),this.Hr.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Gr.removeReference(r,t),this.Hr.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Hr.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Hr,r=>{const s=st.fromPath(r);return this.Jr(e,s).next(u=>{u||t.removeEntry(s,Dt.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(r=>{r?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return ae.or([()=>ae.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class pT{constructor(e){this.serializer=e}N(e,t,r,s){const u=new _s("createOrUpgrade",t);var _;r<1&&s>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n_,{unique:!0}),_.createObjectStore("documentMutations"),Og(e),function(_){_.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&s>=3&&(0!==r&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),Og(e)),c=c.next(()=>function(_){const C=_.store("targetGlobal"),P={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return C.put("targetGlobalKey",P)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(_,C){return C.store("mutations").W().next(P=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",n_,{unique:!0});const k=C.store("mutations"),G=P.map(J=>k.put(J));return ae.waitFor(G)})}(e,u))),c=c.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Zr(u))),r<6&&s>=6&&(c=c.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(u)))),r<7&&s>=7&&(c=c.next(()=>this.ei(u))),r<8&&s>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.ni(u))),r<11&&s>=11&&(c=c.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(_){const C=_.createObjectStore("documentOverlays",{keyPath:gw});C.createIndex("collectionPathOverlayIndex",mw,{unique:!1}),C.createIndex("collectionGroupOverlayIndex",i_,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(_){const C=_.createObjectStore("remoteDocumentsV14",{keyPath:hw});C.createIndex("documentKeyIndex",Pv),C.createIndex("collectionGroupIndex",r_)}(e)).next(()=>this.ri(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.ii(e,u))),r<15&&s>=15&&(c=c.next(()=>function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:pw}).createIndex("sequenceNumberIndex",FA,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:VA}).createIndex("documentKeyIndex",UA,{unique:!1})}(e))),c}Xr(e){let t=0;return e.store("remoteDocuments").Y((r,s)=>{t+=B_(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>ae.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(m=>ae.forEach(m,_=>{Rt(_.userId===u.userId);const C=Hd(this.serializer,_);return uo(e,u.userId,C).next(()=>{})}))}))}ei(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Y((c,m)=>{const _=new mn(c),C=[0,vs(_)];u.push(t.get(C).next(P=>P?ae.resolve():t.put({targetId:0,path:vs(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ae.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:LA});const r=t.store("collectionParents"),s=new gE,u=c=>{if(s.add(c)){const m=c.lastSegment(),_=c.popLast();return r.put({collectionId:m,parent:vs(_)})}};return t.store("remoteDocuments").Y({J:!0},(c,m)=>{const _=new mn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([c,m,_],C)=>{const P=Ma(m);return u(P.popLast())}))}ni(e){const t=e.store("targets");return t.Y((r,s)=>{const u=Af(s),c=XA(this.serializer,u);return t.put(c)})}ri(e,t){const r=t.store("remoteDocuments"),s=[];return r.Y((u,c)=>{const m=t.store("remoteDocumentsV14"),_=(k=c,k.document?new st(mn.fromString(k.document.name).popFirst(5)):k.noDocument?st.fromSegments(k.noDocument.path):k.unknownDocument?st.fromSegments(k.unknownDocument.path):gt()).path.toArray(),C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};var k;s.push(m.put(C))}).next(()=>ae.waitFor(s))}ii(e,t){const r=t.store("mutations"),s=_E(this.serializer),u=new z_(Kd.jr,this.serializer.ut);return r.W().next(c=>{const m=new Map;return c.forEach(_=>{var C;let P=null!==(C=m.get(_.userId))&&void 0!==C?C:sn();Hd(this.serializer,_).keys().forEach(k=>P=P.add(k)),m.set(_.userId,P)}),ae.forEach(m,(_,C)=>{const P=new oi(C),k=Ag.ct(this.serializer,P),G=u.getIndexManager(P),J=j_.ct(P,this.serializer,G,u.referenceDelegate);return new vE(s,J,k,G).recalculateAndSaveOverlaysForDocumentKeys(new Mv(t,ys._e),_).next()})})}}function Og(n){n.createObjectStore("targetDocuments",{keyPath:xv}).createIndex("documentTargetsIndex",ig,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fw,{unique:!0}),n.createObjectStore("targetGlobal")}const gT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class IE{constructor(e,t,r,s,u,c,m,_,C,P,k=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=u,this.window=c,this.document=m,this.oi=C,this._i=P,this.ai=k,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=G=>Promise.resolve(),!IE.D())throw new Ze(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ub(this,s),this.Ii=t+"main",this.serializer=new Cg(_),this.Ti=new es(this.Ii,this.ai,new pT(this.serializer)),this.qr=new sb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_E(this.serializer),this.Kr=new tT,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===P&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ze(we.FAILED_PRECONDITION,gT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new ys(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var t=this;return this.Pi=function(){var r=(0,Me.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var t=(0,Me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Me.Z)(function*(){t.started&&(yield t.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(Ao(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Rf(e).get("owner").next(t=>ae.resolve(this.wi(t)))}Si(e){return kg(e).delete(this.clientId)}bi(){var e=this;return(0,Me.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=yi(r,"clientMetadata");return s.W().next(u=>{const c=e.Ci(u,18e5),m=u.filter(_=>-1===c.indexOf(_));return ae.forEach(m,_=>s.delete(_.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Ei)for(const r of t)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?ae.resolve(!0):Rf(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Ze(we.FAILED_PRECONDITION,gT);return!1}}return!(!this.networkEnabled||!this.inForeground)||kg(e).W().next(r=>void 0===this.Ci(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Me.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Mv(t,ys._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,t){return e.filter(r=>this.Di(r.updateTimeMs,t)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>kg(e).W().next(t=>this.Ci(t,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return j_.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rb(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ag.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,r){qe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(_=this.ai)?JP:14===_?yw:13===_?_w:12===_?rf:11===_?s_:void gt();var _;let c;return this.Ti.runTransaction(e,s,u,m=>(c=new Mv(m,this.Lr?this.Lr.next():ys._e),"readwrite-primary"===t?this.fi(c).next(_=>!!_||this.gi(c)).next(_=>{if(!_)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Ze(we.FAILED_PRECONDITION,Ve);return r(c)}).next(_=>this.yi(c).next(()=>_)):this.Li(c).next(()=>r(c)))).then(m=>(c.raiseOnCommittedEvent(),m))}Li(e){return Rf(e).get("owner").next(t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ze(we.FAILED_PRECONDITION,gT)})}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rf(e).put("owner",t)}static D(){return es.D()}pi(e){const t=Rf(e);return t.get("owner").next(r=>this.wi(r)?(qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Di(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const t=/(?:Version|Mobile)\/1[456]/;(0,q.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const r=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rf(n){return yi(n,"owner")}function kg(n){return yi(n,"clientMetadata")}function wE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class TE{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ki=r,this.qi=s}static Qi(e,t){let r=sn(),s=sn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new TE(e,t.fromCache,r,s)}}class mT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class CE{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,r,s){const u={result:null};return this.zi(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.ji(e,t,s,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new mT;return this.Hi(e,t,c).next(m=>{if(u.result=m,this.$i)return this.Ji(e,t,c,m.size)})}).next(()=>u.result)}Ji(e,t,r,s){return r.documentReadCount<this.Ui?(yl()<=hr.in.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",gf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),ae.resolve()):(yl()<=hr.in.DEBUG&&qe("QueryEngine","Query:",gf(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(yl()<=hr.in.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",gf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(t))):ae.resolve())}zi(e,t){if(g_(t))return ae.resolve(null);let r=vi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=__(t,null,"F"),r=vi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=sn(...u);return this.Gi.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(_=>{const C=this.Yi(t,m);return this.Zi(t,C,c,_.readTime)?this.zi(e,__(t,null,"F")):this.Xi(e,C,t,_)}))})))}ji(e,t,r,s){return g_(t)||s.isEqual(Dt.min())?ae.resolve(null):this.Gi.getDocuments(e,r).next(u=>{const c=this.Yi(t,u);return this.Zi(t,c,r,s)?ae.resolve(null):(yl()<=hr.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gf(t)),this.Xi(e,c,t,M(s,-1)).next(m=>m))})}Yi(e,t){let r=new Qn(y_(e));return t.forEach((s,u)=>{pg(e,u)&&(r=r.add(u))}),r}Zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Hi(e,t,r){return yl()<=hr.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",gf(t)),this.Gi.getDocumentsMatchingQuery(e,t,ee.min(),r)}Xi(e,t,r,s){return this.Gi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class Lg{constructor(e,t,r,s){this.persistence=e,this.es=t,this.serializer=s,this.ts=new or(Gt),this.ns=new wl(u=>Od(u),kd),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vE(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function _T(n,e,t,r){return new Lg(n,e,t,r)}function DE(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,Me.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.os(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let _=sn();for(const C of s){c.push(C.batchId);for(const P of C.mutations)_=_.add(P.key)}for(const C of u){m.push(C.batchId);for(const P of C.mutations)_=_.add(P.key)}return t.localDocuments.getDocuments(r,_).next(C=>({_s:C,removedBatchIds:c,addedBatchIds:m}))})})}),W_.apply(this,arguments)}function yT(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function vT(n,e,t){let r=sn(),s=sn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Is();return t.forEach((m,_)=>{const C=u.get(m);_.isFoundDocument()!==C.isFoundDocument()&&(s=s.add(m)),_.isNoDocument()&&_.version.isEqual(Dt.min())?(e.removeEntry(m,_.readTime),c=c.insert(m,_)):!C.isValidDocument()||_.version.compareTo(C.version)>0||0===_.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(_),c=c.insert(m,_)):qe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",_.version)}),{us:c,cs:s}})}function _b(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pf(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.qr.getTargetData(r,e).next(u=>u?(s=u,ae.resolve(s)):t.qr.allocateTargetId(r).next(c=>(s=new So(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ts.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ts=t.ts.insert(r.targetId,r),t.ns.set(e,r.targetId)),r})}function xf(n,e,t){return AE.apply(this,arguments)}function AE(){return AE=(0,Me.Z)(function*(n,e,t){const r=nt(n),s=r.ts.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ao(c))throw c;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ts=r.ts.remove(e),r.ns.delete(s.target)}),AE.apply(this,arguments)}function q_(n,e,t){const r=nt(n);let s=Dt.min(),u=sn();return r.persistence.runTransaction("Execute query","readwrite",c=>function(_,C,P){const k=nt(_),G=k.ns.get(P);return void 0!==G?ae.resolve(k.ts.get(G)):k.qr.getTargetData(C,P)}(r,c,vi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(c,m.targetId).next(_=>{u=_})}).next(()=>r.es.getDocumentsMatchingQuery(c,e,t?s:Dt.min(),t?u:sn())).next(m=>(bE(r,Pw(e),m),{documents:m,ls:u})))}function ET(n,e){const t=nt(n),r=nt(t.qr),s=t.ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r._t(u,e).next(c=>c?c.target:null))}function IT(n,e){const t=nt(n),r=t.rs.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ss.getAllFromCollectionGroup(s,e,M(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(bE(t,e,s),s))}function bE(n,e,t){let r=n.rs.get(e)||Dt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.rs.set(e,r)}function RE(){return RE=(0,Me.Z)(function*(n,e,t,r){const s=nt(n);let u=sn(),c=Is();for(const C of t){const P=e.hs(C.metadata.name);C.document&&(u=u.add(P));const k=e.Ps(C);k.setReadTime(e.Is(C.metadata.readTime)),c=c.insert(P,k)}const m=s.ss.newChangeBuffer({trackRemovals:!0}),_=yield Pf(s,(P=r,vi(hf(mn.fromString(`__bundle__/docs/${P}`)))));var P;return s.persistence.runTransaction("Apply bundle documents","readwrite",C=>vT(C,m,c).next(P=>(m.apply(C),P)).next(P=>s.qr.removeMatchingKeysForTargetId(C,_.targetId).next(()=>s.qr.addMatchingKeys(C,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(C,P.us,P.cs)).next(()=>P.us)))}),RE.apply(this,arguments)}function Z_(n,e){return PE.apply(this,arguments)}function PE(){return PE=(0,Me.Z)(function*(n,e,t=sn()){const r=yield Pf(n,vi(hE(e.bundledQuery))),s=nt(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=ui(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(u,e);const m=r.withResumeToken(Si.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(m.targetId,m),s.qr.updateTargetData(u,m).next(()=>s.qr.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.qr.addMatchingKeys(u,t,r.targetId)).next(()=>s.Kr.saveNamedQuery(u,e))})}),PE.apply(this,arguments)}function wT(n,e){return`firestore_clients_${n}_${e}`}function TT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xE(n,e){return`firestore_targets_${n}_${e}`}class K_{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ts(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Ze(s.error.code,s.error.message))),c?new K_(e,t,s.state,u):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ts(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ze(r.error.code,r.error.message))),u?new Vg(e,r.state,s):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Y_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Cc();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=eg(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new Y_(e,u):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Q_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Q_(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class J_{constructor(){this.activeTargetIds=Cc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ME{constructor(e,t,r,s,u){this.window=e,this.si=t,this.persistenceKey=r,this.Rs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new or(Gt),this.started=!1,this.ps=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ys=wT(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new J_),this.Ss=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Me.Z)(function*(){const t=yield e.syncEngine.Bi();for(const s of t){if(s===e.Rs)continue;const u=e.getItem(wT(e.persistenceKey,s));if(u){const c=Y_.Ts(s,u);c&&(e.gs=e.gs.insert(c.clientId,c))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const s=e.Ms(r);s&&e.xs(s)}for(const s of e.ps)e.fs(s);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,r){this.Ns(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xE(this.persistenceKey,e));if(r){const s=Vg.Ts(e,r);s&&(t=s.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xE(this.persistenceKey,e))}updateQueryState(e,t,r){this.ks(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qe("SharedClientState","READ",e,t),t}setItem(e,t){qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ss.test(r.key)){if(null==r.newValue){const s=t.Ks(r.key);return t.$s(s,null)}{const s=t.Us(r.key,r.newValue);if(s)return t.$s(s.clientId,s)}}else if(t.bs.test(r.key)){if(null!==r.newValue){const s=t.Ws(r.key,r.newValue);if(s)return t.Gs(s)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const s=t.zs(r.key,r.newValue);if(s)return t.js(s)}}else if(r.key===t.Cs){if(null!==r.newValue){const s=t.Ms(r.newValue);if(s)return t.xs(s)}}else if(r.key===t.ws){const s=function(c){let m=ys._e;if(null!=c)try{const _=JSON.parse(c);Rt("number"==typeof _),m=_}catch(_){sr("SharedClientState","Failed to read sequence number from WebStorage",_)}return m}(r.newValue);s!==ys._e&&t.sequenceNumberHandler(s)}else if(r.key===t.vs){const s=t.Hs(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Js(u)))}}else t.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,r){const s=new K_(this.currentUser,e,t,r),u=TT(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Es())}Bs(e){const t=TT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,t,r){const s=xE(this.persistenceKey,e),u=new Vg(e,t,r);this.setItem(s,u.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const r=this.Ks(e);return Y_.Ts(r,t)}Ws(e,t){const r=this.bs.exec(e),s=Number(r[1]);return K_.Ts(new oi(void 0!==r[2]?r[2]:null),s,t)}zs(e,t){const r=this.Ds.exec(e),s=Number(r[1]);return Vg.Ts(s,t)}Ms(e){return Q_.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var t=this;return(0,Me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Ys(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const r=t?this.gs.insert(e,t):this.gs.remove(e),s=this.Os(this.gs),u=this.Os(r),c=[],m=[];return u.forEach(_=>{s.has(_)||c.push(_)}),s.forEach(_=>{u.has(_)||m.push(_)}),this.syncEngine.Xs(c,m).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Cc();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class yb{constructor(){this.eo=new J_,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,r){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new J_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CT{ro(e){}shutdown(){}}class NE{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OE=null;function Mf(){return null===OE?OE=268435456+Math.round(2147483648*Math.random()):OE++,"0x"+OE.toString(16)}const vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Eb{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Vi="WebChannelConnection";class Ib extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+t.host,this.fo=`projects/${s}/databases/${u}`,this.po="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${u}`}get yo(){return!1}wo(t,r,s,u,c){const m=Mf(),_=this.So(t,r);qe("RestConnection",`Sending RPC '${t}' ${m}:`,_,s);const C={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(C,u,c),this.Do(t,_,C,s).then(P=>(qe("RestConnection",`Received RPC '${t}' ${m}: `,P),P),P=>{throw Yi("RestConnection",`RPC '${t}' ${m} failed with error: `,P,"url: ",_,"request:",s),P})}Co(t,r,s,u,c,m){return this.wo(t,r,s,u,c)}bo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Do,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,c)=>t[c]=u),s&&s.headers.forEach((u,c)=>t[c]=u)}So(t,r){return`${this.mo}/v1/${r}:${vb[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,r,s){const u=Mf();return new Promise((c,m)=>{const _=new Jh;_.setWithCredentials(!0),_.listenOnce(lw.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case e_.NO_ERROR:const P=_.getResponseJson();qe(Vi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(P)),c(P);break;case e_.TIMEOUT:qe(Vi,`RPC '${e}' ${u} timed out`),m(new Ze(we.DEADLINE_EXCEEDED,"Request time out"));break;case e_.HTTP_ERROR:const k=_.getStatus();if(qe(Vi,`RPC '${e}' ${u} failed with status:`,k,"response text:",_.getResponseText()),k>0){let G=_.getResponseJson();Array.isArray(G)&&(G=G[0]);const J=G?.error;if(J&&J.status&&J.message){const he=function(Ne){const ht=Ne.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(ht)>=0?ht:we.UNKNOWN}(J.status);m(new Ze(he,J.message))}else m(new Ze(we.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new Ze(we.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{qe(Vi,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(s);qe(Vi,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",C,r,15)})}vo(e,t,r){const s=Mf(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zp(),m=Wp(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(_.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(_.xmlHttpFactory=new cw({})),this.bo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const P=u.join("");qe(Vi,`Creating RPC '${e}' stream ${s}: ${P}`,_);const k=c.createWebChannel(P,_);let G=!1,J=!1;const he=new Eb({co:Ne=>{J?qe(Vi,`Not sending because RPC '${e}' stream ${s} is closed:`,Ne):(G||(qe(Vi,`Opening RPC '${e}' stream ${s} transport.`),k.open(),G=!0),qe(Vi,`RPC '${e}' stream ${s} sending:`,Ne),k.send(Ne))},lo:()=>k.close()}),Re=(Ne,ht,mt)=>{Ne.listen(ht,Qe=>{try{mt(Qe)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return Re(k,Qh.EventType.OPEN,()=>{J||qe(Vi,`RPC '${e}' stream ${s} transport opened.`)}),Re(k,Qh.EventType.CLOSE,()=>{J||(J=!0,qe(Vi,`RPC '${e}' stream ${s} transport closed`),he.Ro())}),Re(k,Qh.EventType.ERROR,Ne=>{J||(J=!0,Yi(Vi,`RPC '${e}' stream ${s} transport errored:`,Ne),he.Ro(new Ze(we.UNAVAILABLE,"The operation could not be completed")))}),Re(k,Qh.EventType.MESSAGE,Ne=>{var ht;if(!J){const mt=Ne.data[0];Rt(!!mt);const Ct=mt.error||(null===(ht=mt[0])||void 0===ht?void 0:ht.error);if(Ct){qe(Vi,`RPC '${e}' stream ${s} received error:`,Ct);const Xt=Ct.status;let En=function(ow){const S1=ai[ow];if(void 0!==S1)return jw(S1)}(Xt),ei=Ct.message;void 0===En&&(En=we.INTERNAL,ei="Unknown error status: "+Xt+" with message "+Ct.message),J=!0,he.Ro(new Ze(En,ei)),k.close()}else qe(Vi,`RPC '${e}' stream ${s} received:`,mt),he.Vo(mt)}}),Re(m,Dv.STAT_EVENT,Ne=>{Ne.stat===Av.PROXY?qe(Vi,`RPC '${e}' stream ${s} detected buffering proxy`):Ne.stat===Av.NOPROXY&&qe(Vi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{he.Ao()},0),he}}function Fa(){return typeof window<"u"?window:null}function Oc(){return typeof document<"u"?document:null}function Ei(n){return new iE(n,!0)}class bl{constructor(e,t,r=1e3,s=1.5,u=6e4){this.si=e,this.timerId=t,this.Fo=r,this.Mo=s,this.xo=u,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,t-r);s>0&&qe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Ug{constructor(e,t,r,s,u,c,m,_){this.si=e,this.Ko=r,this.$o=s,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new bl(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Me.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Me.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){var r=this;return(0,Me.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(t)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===t&&this.s_(r,s)},r=>{e(()=>{const s=new Ze(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(e,t){const r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Me.Z)(function*(){e.state=0,e.start()}))}o_(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ia extends Ug{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=u}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function Kw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(C=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:gt(),s=e.targetChange.targetIds||[],u=function(C,P){return C.useProto3Json?(Rt(void 0===P||"string"==typeof P),Si.fromBase64String(P||"")):(Rt(void 0===P||P instanceof Uint8Array),Si.fromUint8Array(P||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(C){const P=void 0===C.code?we.UNKNOWN:jw(C.code);return new Ze(P,C.message||"")}(c);t=new Hw(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Au(n,r.document.name),u=ui(r.document.updateTime),c=r.document.createTime?ui(r.document.createTime):Dt.min(),m=new Fi({mapValue:{fields:r.document.fields}}),_=Dr.newFoundDocument(s,u,c,m);t=new P_(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=Au(n,r.document),u=r.readTime?ui(r.readTime):Dt.min(),c=Dr.newNoDocument(s,u);t=new P_([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=Au(n,r.document);t=new P_([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return gt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,c=new YA(s,u);t=new tE(r.targetId,c)}}var C;return t}(this.serializer,e),r=function(u){if(!("targetChange"in u))return Dt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Dt.min():c.readTime?ui(c.readTime):Dt.min()}(e);return this.listener.a_(t,r)}u_(e){const t={};t.database=Tg(this.serializer),t.addTarget=function(u,c){let m;const _=c.target;if(m=dg(_)?{documents:aE(u,_)}:{query:uE(u,_)},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=zw(u,c.resumeToken);const C=Du(u,c.expectedCount);null!==C&&(m.expectedCount=C)}else if(c.snapshotVersion.compareTo(Dt.min())>0){m.readTime=Ac(u,c.snapshotVersion.toTimestamp());const C=Du(u,c.expectedCount);null!==C&&(m.expectedCount=C)}return m}(this.serializer,e);const r=function JA(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.e_(t)}c_(e){const t={};t.database=Tg(this.serializer),t.removeTarget=e,this.e_(t)}}class kE extends Ug{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=u,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function Yw(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(s,u){let c=ui(s.updateTime?s.updateTime:u);return c.isEqual(Dt.min())&&(c=ui(u)),new KA(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.I_(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Tg(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wf(this.serializer,r))};this.e_(t)}}class Nf extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new Ze(we.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.wo(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(we.UNKNOWN,s.toString())})}Co(e,t,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Co(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(we.UNKNOWN,u.toString())})}terminate(){this.d_=!0}}class kf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(sr(t),this.f_=!1):qe("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Lf{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=u,this.F_.ro(m=>{r.enqueueAndForget((0,Me.Z)(function*(){var _;Sl(c)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Me.Z)(function*(P){const k=nt(P);k.C_.add(4),yield Va(k),k.M_.set("Unknown"),k.C_.delete(4),yield Ru(k)}),function C(P){return _.apply(this,arguments)})(c))}))}),this.M_=new kf(r,s)}}function Ru(n){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,Me.Z)(function*(n){if(Sl(n))for(const e of n.v_)yield e(!0)}),Lc.apply(this,arguments)}function Va(n){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,Me.Z)(function*(n){for(const e of n.v_)yield e(!1)}),Fc.apply(this,arguments)}function Bg(n,e){const t=nt(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),ty(t)?ey(t):Rl(t).Ho()&&X_(t,e))}function Ff(n,e){const t=nt(n),r=Rl(t);t.D_.delete(e),r.Ho()&&LE(t,e),0===t.D_.size&&(r.Ho()?r.Zo():Sl(t)&&t.M_.set("Unknown"))}function X_(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(n).u_(e)}function LE(n,e){n.x_.Oe(e),Rl(n).c_(e)}function ey(n){n.x_=new tx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Rl(n).start(),n.M_.g_()}function ty(n){return Sl(n)&&!Rl(n).jo()&&n.D_.size>0}function Sl(n){return 0===nt(n).C_.size}function FE(n){n.x_=void 0}function DT(n){return jg.apply(this,arguments)}function jg(){return jg=(0,Me.Z)(function*(n){n.D_.forEach((e,t)=>{X_(n,e)})}),jg.apply(this,arguments)}function wb(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,Me.Z)(function*(n,e){FE(n),ty(n)?(n.M_.w_(e),ey(n)):n.M_.set("Unknown")}),AT.apply(this,arguments)}function ix(n,e,t){return VE.apply(this,arguments)}function VE(){return VE=(0,Me.Z)(function*(n,e,t){if(n.M_.set("Online"),e instanceof Hw&&2===e.state&&e.cause)try{yield(r=(0,Me.Z)(function*(u,c){const m=c.cause;for(const _ of c.targetIds)u.D_.has(_)&&(yield u.remoteSyncer.rejectListen(_,m),u.D_.delete(_),u.x_.removeTarget(_))}),function s(u,c){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ny(n,r)}else if(e instanceof P_?n.x_.$e(e):e instanceof tE?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(Dt.min()))try{const r=yield yT(n.localStore);t.compareTo(r)>=0&&(yield function(u,c){const m=u.x_.it(c);return m.targetChanges.forEach((_,C)=>{if(_.resumeToken.approximateByteSize()>0){const P=u.D_.get(C);P&&u.D_.set(C,P.withResumeToken(_.resumeToken,c))}}),m.targetMismatches.forEach((_,C)=>{const P=u.D_.get(_);if(!P)return;u.D_.set(_,P.withResumeToken(Si.EMPTY_BYTE_STRING,P.snapshotVersion)),LE(u,_);const k=new So(P.target,_,C,P.sequenceNumber);X_(u,k)}),u.remoteSyncer.applyRemoteEvent(m)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield ny(n,r)}var r}),VE.apply(this,arguments)}function ny(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,Me.Z)(function*(n,e,t){if(!Ao(e))throw e;n.C_.add(1),yield Va(n),n.M_.set("Offline"),t||(t=()=>yT(n.localStore)),n.asyncQueue.enqueueRetryable((0,Me.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Ru(n)}))}),bT.apply(this,arguments)}function ST(n,e){return e().catch(t=>ny(n,t,e))}function Hg(n){return UE.apply(this,arguments)}function UE(){return UE=(0,Me.Z)(function*(n){const e=nt(n),t=Ua(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Tb(e);)try{const s=yield _b(e.localStore,r);if(null===s){0===e.b_.length&&t.Zo();break}r=s.batchId,Cb(e,s)}catch(s){yield ny(e,s)}ry(e)&&Vf(e)}),UE.apply(this,arguments)}function Tb(n){return Sl(n)&&n.b_.length<10}function Cb(n,e){n.b_.push(e);const t=Ua(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function ry(n){return Sl(n)&&!Ua(n).jo()&&n.b_.length>0}function Vf(n){Ua(n).start()}function BE(n){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Me.Z)(function*(n){Ua(n).E_()}),Uf.apply(this,arguments)}function RT(n){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Me.Z)(function*(n){const e=Ua(n);for(const t of n.b_)e.P_(t.mutations)}),Yd.apply(this,arguments)}function PT(n,e,t){return jE.apply(this,arguments)}function jE(){return jE=(0,Me.Z)(function*(n,e,t){const r=n.b_.shift(),s=Jv.from(r,e,t);yield ST(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Hg(n)}),jE.apply(this,arguments)}function $g(n,e){return HE.apply(this,arguments)}function HE(){return HE=(0,Me.Z)(function*(n,e){var t;e&&Ua(n).h_&&(yield(t=(0,Me.Z)(function*(s,u){if(Bw(m=u.code)&&m!==we.ABORTED){const c=s.b_.shift();Ua(s).Yo(),yield ST(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,u)),yield Hg(s)}var m}),function r(s,u){return t.apply(this,arguments)})(n,e)),ry(n)&&Vf(n)}),HE.apply(this,arguments)}function xT(n,e){return $E.apply(this,arguments)}function $E(){return $E=(0,Me.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=Sl(t);t.C_.add(3),yield Va(t),r&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Ru(t)}),$E.apply(this,arguments)}function GE(n,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,Me.Z)(function*(n,e){const t=nt(n);e?(t.C_.delete(2),yield Ru(t)):e||(t.C_.add(2),yield Va(t),t.M_.set("Unknown"))}),Gg.apply(this,arguments)}function Rl(n){return n.O_||(n.O_=function(t,r,s){const u=nt(t);return u.A_(),new ia(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{ho:DT.bind(null,n),Io:wb.bind(null,n),a_:ix.bind(null,n)}),n.v_.push(function(){var e=(0,Me.Z)(function*(t){t?(n.O_.Yo(),ty(n)?ey(n):n.M_.set("Unknown")):(yield n.O_.stop(),FE(n))});return function(t){return e.apply(this,arguments)}}())),n.O_}function Ua(n){return n.N_||(n.N_=function(t,r,s){const u=nt(t);return u.A_(),new kE(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{ho:BE.bind(null,n),Io:$g.bind(null,n),T_:RT.bind(null,n),I_:PT.bind(null,n)}),n.v_.push(function(){var e=(0,Me.Z)(function*(t){t?(n.N_.Yo(),yield Hg(n)):(yield n.N_.stop(),n.b_.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))});return function(t){return e.apply(this,arguments)}}())),n.N_}class MT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,m=new MT(e,t,c,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ze(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bf(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Ao(n))return new Ze(we.UNAVAILABLE,`${e}: ${n}`);throw n}class jf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=v_(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new jf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class iy{constructor(){this.B_=new or(st.comparator)}track(e){const t=e.doc.key,r=this.B_.get(t);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(t):1===e.type&&2===r.type?this.B_=this.B_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):gt():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hf{constructor(e,t,r,s,u,c,m,_,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,s,u){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new Hf(e,t,jf.emptySet(t),c,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class NT{constructor(){this.k_=void 0,this.listeners=[]}}class Db{constructor(){this.queries=new wl(e=>Ld(e),pf),this.onlineState="Unknown",this.q_=new Set}}function zE(n,e){return sy.apply(this,arguments)}function sy(){return sy=(0,Me.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new NT),s)try{u.k_=yield t.onListen(r)}catch(c){const m=Bf(c,`Initialization of query '${gf(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Q_(t.onlineState),u.k_&&e.K_(u.k_)&&WE(t)}),sy.apply(this,arguments)}function oy(n,e){return ay.apply(this,arguments)}function ay(){return ay=(0,Me.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),ay.apply(this,arguments)}function Ab(n,e){const t=nt(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const m of c.listeners)m.K_(s)&&(r=!0);c.k_=s}}r&&WE(t)}function bb(n,e,t){const r=nt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function WE(n){n.q_.forEach(e=>{e.next()})}class uy{constructor(e,t,r){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Hf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){return!e.fromCache||(!this.options.J_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Hf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class qE{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class ly{constructor(e){this.serializer=e}hs(e){return Au(this.serializer,e)}Ps(e){return e.metadata.exists?Zw(this.serializer,e.document,!1):Dr.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ui(e)}}class Sb{constructor(e,t,r){this.X_=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zg(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const r=mn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,r=new ly(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.hs(s.metadata.name);for(const c of s.metadata.queries){const m=(t.get(c)||sn()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,Me.Z)(function*(){const t=yield function SE(n,e,t,r){return RE.apply(this,arguments)}(e.localStore,new ly(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const s of e.queries)yield Z_(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:t}})()}}function zg(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Wg{constructor(e){this.key=e}}class cy{constructor(e){this.key=e}}class ZE{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=sn(),this.mutatedKeys=sn(),this._a=y_(e),this.aa=new jf(this._a)}get ua(){return this.ia}ca(e,t){const r=t?t.la:new iy,s=t?t.aa:this.aa;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,m=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,C="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((P,k)=>{const G=s.get(P),J=pg(this.query,k)?k:null,he=!!G&&this.mutatedKeys.has(G.key),Re=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Ne=!1;G&&J?G.data.isEqual(J.data)?he!==Re&&(r.track({type:3,doc:J}),Ne=!0):this.ha(G,J)||(r.track({type:2,doc:J}),Ne=!0,(_&&this._a(J,_)>0||C&&this._a(J,C)<0)&&(m=!0)):!G&&J?(r.track({type:0,doc:J}),Ne=!0):G&&!J&&(r.track({type:1,doc:G}),Ne=!0,(_||C)&&(m=!0)),Ne&&(J?(c=c.add(J),u=Re?u.add(P):u.delete(P)):(c=c.delete(P),u=u.delete(P)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const P="F"===this.query.limitType?c.last():c.first();c=c.delete(P.key),u=u.delete(P.key),r.track({type:1,doc:P})}return{aa:c,la:r,Zi:m,mutatedKeys:u}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const u=e.la.L_();u.sort((C,P)=>function(G,J){const he=Re=>{switch(Re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return he(G)-he(J)}(C.type,P.type)||this._a(C.doc,P.doc)),this.Pa(r);const c=t?this.Ia():[],m=0===this.oa.size&&this.current?1:0,_=m!==this.sa;return this.sa=m,0!==u.length||_?{snapshot:new Hf(this.query,e.aa,s,u,e.mutatedKeys,0===m,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:c}:{Ta:c}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new iy,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=sn(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const t=[];return e.forEach(r=>{this.oa.has(r)||t.push(new cy(r))}),this.oa.forEach(r=>{e.has(r)||t.push(new Wg(r))}),t}da(e){this.ia=e.ls,this.oa=sn();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Hf.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Rb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Pb{constructor(e){this.key=e,this.Ra=!1}}class xb{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Va={},this.ma=new wl(m=>Ld(m),pf),this.fa=new Map,this.ga=new Set,this.pa=new or(st.comparator),this.ya=new Map,this.wa=new Ng,this.Sa={},this.ba=new Map,this.Da=qd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function KE(n,e){return qg.apply(this,arguments)}function qg(){return qg=(0,Me.Z)(function*(n,e){const t=lI(n);let r,s;const u=t.ma.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Aa();else{const c=yield Pf(t.localStore,vi(e)),m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield dy(t,e,r,"current"===m,c.resumeToken),t.isPrimaryClient&&Bg(t.remoteStore,c)}return s}),qg.apply(this,arguments)}function dy(n,e,t,r,s){return hy.apply(this,arguments)}function hy(){return hy=(0,Me.Z)(function*(n,e,t,r,s){n.va=(k,G,J)=>{return(he=(0,Me.Z)(function*(Ne,ht,mt,Qe){let Ct=ht.view.ca(mt);Ct.Zi&&(Ct=yield q_(Ne.localStore,ht.query,!1).then(({documents:ei})=>ht.view.ca(ei,Ct)));const Xt=Qe&&Qe.targetChanges.get(ht.targetId),En=ht.view.applyChanges(Ct,Ne.isPrimaryClient,Xt);return gy(Ne,ht.targetId,En.Ta),En.snapshot}),function Re(Ne,ht,mt,Qe){return he.apply(this,arguments)})(n,k,G,J);var he};const u=yield q_(n.localStore,e,!0),c=new ZE(e,u.ls),m=c.ca(u.documents),_=Ef.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),C=c.applyChanges(m,n.isPrimaryClient,_);gy(n,t,C.Ta);const P=new Rb(e,t,c);return n.ma.set(e,P),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),C.snapshot}),hy.apply(this,arguments)}function Mb(n,e){return YE.apply(this,arguments)}function YE(){return YE=(0,Me.Z)(function*(n,e){const t=nt(n),r=t.ma.get(e),s=t.fa.get(r.targetId);if(s.length>1)return t.fa.set(r.targetId,s.filter(u=>!pf(u,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ff(t.remoteStore,r.targetId),Qd(t,r.targetId)}).catch(ft))):(Qd(t,r.targetId),yield xf(t.localStore,r.targetId,!0))}),YE.apply(this,arguments)}function Zg(){return Zg=(0,Me.Z)(function*(n,e,t){const r=yy(n);try{const s=yield function(c,m){const _=nt(c),C=bn.now(),P=m.reduce((J,he)=>J.add(he.key),sn());let k,G;return _.persistence.runTransaction("Locally write mutations","readwrite",J=>{let he=Is(),Re=sn();return _.ss.getEntries(J,P).next(Ne=>{he=Ne,he.forEach((ht,mt)=>{mt.isValidDocument()||(Re=Re.add(ht))})}).next(()=>_.localDocuments.getOverlayedDocuments(J,he)).next(Ne=>{k=Ne;const ht=[];for(const mt of m){const Qe=Vw(mt,k.get(mt.key).overlayedDocument);null!=Qe&&ht.push(new Dl(mt.key,Qe,ug(Qe.value.mapValue),Nr.exists(!0)))}return _.mutationQueue.addMutationBatch(J,C,ht,m)}).next(Ne=>{G=Ne;const ht=Ne.applyToLocalDocumentSet(k,Re);return _.documentOverlayCache.saveOverlays(J,Ne.batchId,ht)})}).then(()=>({batchId:G.batchId,changes:Nw(k)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,m,_){let C=c.Sa[c.currentUser.toKey()];C||(C=new or(Gt)),C=C.insert(m,_),c.Sa[c.currentUser.toKey()]=C}(r,s.batchId,t),yield Pu(r,s.changes),yield Hg(r.remoteStore)}catch(s){const u=Bf(s,"Failed to persist write");t.reject(u)}}),Zg.apply(this,arguments)}function QE(n,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,Me.Z)(function*(n,e){const t=nt(n);try{const r=yield function Fg(n,e){const t=nt(n),r=e.snapshotVersion;let s=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ss.newChangeBuffer({trackRemovals:!0});s=t.ts;const m=[];e.targetChanges.forEach((P,k)=>{const G=s.get(k);if(!G)return;m.push(t.qr.removeMatchingKeys(u,P.removedDocuments,k).next(()=>t.qr.addMatchingKeys(u,P.addedDocuments,k)));let J=G.withSequenceNumber(u.currentSequenceNumber);var Re,Ne,ht;null!==e.targetMismatches.get(k)?J=J.withResumeToken(Si.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):P.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(P.resumeToken,r)),s=s.insert(k,J),Ne=J,ht=P,(0===(Re=G).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-Re.snapshotVersion.toMicroseconds()>=3e8||ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0)&&m.push(t.qr.updateTargetData(u,J))});let _=Is(),C=sn();if(e.documentUpdates.forEach(P=>{e.resolvedLimboDocuments.has(P)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,P))}),m.push(vT(u,c,e.documentUpdates).next(P=>{_=P.us,C=P.cs})),!r.isEqual(Dt.min())){const P=t.qr.getLastRemoteSnapshotVersion(u).next(k=>t.qr.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(P)}return ae.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,C)).next(()=>_)}).then(u=>(t.ts=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.ya.get(u);c&&(Rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ra=!0:s.modifiedDocuments.size>0?Rt(c.Ra):s.removedDocuments.size>0&&(Rt(c.Ra),c.Ra=!1))}),yield Pu(t,r,e)}catch(r){yield ft(r)}}),Kg.apply(this,arguments)}function JE(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ma.forEach((u,c)=>{const m=c.view.Q_(e);m.snapshot&&s.push(m.snapshot)}),function(c,m){const _=nt(c);_.onlineState=m;let C=!1;_.queries.forEach((P,k)=>{for(const G of k.listeners)G.Q_(m)&&(C=!0)}),C&&WE(_)}(r.eventManager,e),s.length&&r.Va.a_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Nb(n,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,Me.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ya.get(e),u=s&&s.key;if(u){let c=new or(st.comparator);c=c.insert(u,Dr.newNoDocument(u,Dt.min()));const m=sn().add(u),_=new Ig(Dt.min(),new Map,new or(Gt),c,m);yield QE(r,_),r.pa=r.pa.remove(u),r.ya.delete(e),my(r)}else yield xf(r.localStore,e,!1).then(()=>Qd(r,e,t)).catch(ft)}),fy.apply(this,arguments)}function kT(n,e){return py.apply(this,arguments)}function py(){return py=(0,Me.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const s=yield function mb(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.ss.newChangeBuffer({trackRemovals:!0});return function(m,_,C,P){const k=C.batch,G=k.keys();let J=ae.resolve();return G.forEach(he=>{J=J.next(()=>P.getEntry(_,he)).next(Re=>{const Ne=C.docVersions.get(he);Rt(null!==Ne),Re.version.compareTo(Ne)<0&&(k.applyToRemoteDocument(Re,C),Re.isValidDocument()&&(Re.setReadTime(C.commitVersion),P.addEntry(Re)))})}),J.next(()=>m.mutationQueue.removeMutationBatch(_,k))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let _=sn();for(let C=0;C<m.mutationResults.length;++C)m.mutationResults[C].transformResults.length>0&&(_=_.add(m.batch.mutations[C].key));return _}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);Qg(t,r,null),Yg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pu(t,s)}catch(s){yield ft(s)}}),py.apply(this,arguments)}function LT(n,e,t){return XE.apply(this,arguments)}function XE(){return XE=(0,Me.Z)(function*(n,e,t){const r=nt(n);try{const s=yield function(c,m){const _=nt(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let P;return _.mutationQueue.lookupMutationBatch(C,m).next(k=>(Rt(null!==k),P=k.keys(),_.mutationQueue.removeMutationBatch(C,k))).next(()=>_.mutationQueue.performConsistencyCheck(C)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(C,P,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(C,P)).next(()=>_.localDocuments.getDocuments(C,P))})}(r.localStore,e);Qg(r,e,t),Yg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pu(r,s)}catch(s){yield ft(s)}}),XE.apply(this,arguments)}function eI(){return eI=(0,Me.Z)(function*(n,e){const t=nt(n);Sl(t.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const m=nt(c);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>m.mutationQueue.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const s=t.ba.get(r)||[];s.push(e),t.ba.set(r,s)}catch(r){const s=Bf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),eI.apply(this,arguments)}function Yg(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function Qg(n,e,t){const r=nt(n);let s=r.Sa[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Sa[r.currentUser.toKey()]=s}}function Qd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.fa.get(e))n.ma.delete(r),t&&n.Va.Fa(r,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(r=>{n.wa.containsKey(r)||tI(n,r)})}function tI(n,e){n.ga.delete(e.path.canonicalString());const t=n.pa.get(e);null!==t&&(Ff(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),my(n))}function gy(n,e,t){for(const r of t)r instanceof Wg?(n.wa.addReference(r.key,e),FT(n,r)):r instanceof cy?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.wa.removeReference(r.key,e),n.wa.containsKey(r.key)||tI(n,r.key)):gt()}function FT(n,e){const t=e.key,r=t.path.canonicalString();n.pa.get(t)||n.ga.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.ga.add(r),my(n))}function my(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){const e=n.ga.values().next().value;n.ga.delete(e);const t=new st(mn.fromString(e)),r=n.Da.next();n.ya.set(r,new Pb(t)),n.pa=n.pa.insert(t,r),Bg(n.remoteStore,new So(vi(hf(t.path)),r,"TargetPurposeLimboResolution",ys._e))}}function Pu(n,e,t){return _y.apply(this,arguments)}function _y(){return _y=(0,Me.Z)(function*(n,e,t){const r=nt(n),s=[],u=[],c=[];var m;r.ma.isEmpty()||(r.ma.forEach((m,_)=>{c.push(r.va(_,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C?.fromCache?"not-current":"current"),C){s.push(C);const P=TE.Qi(_.targetId,C);u.push(P)}}))}),yield Promise.all(c),r.Va.a_(s),yield(m=(0,Me.Z)(function*(C,P){const k=nt(C);try{yield k.persistence.runTransaction("notifyLocalViewChanges","readwrite",G=>ae.forEach(P,J=>ae.forEach(J.ki,he=>k.persistence.referenceDelegate.addReference(G,J.targetId,he)).next(()=>ae.forEach(J.qi,he=>k.persistence.referenceDelegate.removeReference(G,J.targetId,he)))))}catch(G){if(!Ao(G))throw G;qe("LocalStore","Failed to update sequence numbers: "+G)}for(const G of P){const J=G.targetId;if(!G.fromCache){const he=k.ts.get(J),Ne=he.withLastLimboFreeSnapshotVersion(he.snapshotVersion);k.ts=k.ts.insert(J,Ne)}}}),function _(C,P){return m.apply(this,arguments)})(r.localStore,u))}),_y.apply(this,arguments)}function VT(n,e){return $f.apply(this,arguments)}function $f(){return $f=(0,Me.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield DE(t.localStore,e);t.currentUser=e,(u=t).ba.forEach(m=>{m.forEach(_=>{_.reject(new Ze(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pu(t,r._s)}var u}),$f.apply(this,arguments)}function Vc(n,e){const t=nt(n),r=t.ya.get(e);if(r&&r.Ra)return sn().add(r.key);{let s=sn();const u=t.fa.get(e);if(!u)return s;for(const c of u){const m=t.ma.get(c);s=s.unionWith(m.view.ua)}return s}}function kb(n,e){return nI.apply(this,arguments)}function nI(){return nI=(0,Me.Z)(function*(n,e){const t=nt(n),r=yield q_(t.localStore,e.query,!0),s=e.view.da(r);return t.isPrimaryClient&&gy(t,e.targetId,s.Ta),s}),nI.apply(this,arguments)}function rI(n,e){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,Me.Z)(function*(n,e){const t=nt(n);return IT(t.localStore,e).then(r=>Pu(t,r))}),Pl.apply(this,arguments)}function iI(n,e,t,r){return sI.apply(this,arguments)}function sI(){return sI=(0,Me.Z)(function*(n,e,t,r){const s=nt(n),u=yield function(m,_){const C=nt(m),P=nt(C.mutationQueue);return C.persistence.runTransaction("Lookup mutation documents","readonly",k=>P.Cn(k,_).next(G=>G?C.localDocuments.getDocuments(k,G):ae.resolve(null)))}(s.localStore,e);var _;null!==u?("pending"===t?yield Hg(s.remoteStore):"acknowledged"===t||"rejected"===t?(Qg(s,e,r||null),Yg(s,e),_=e,nt(nt(s.localStore).mutationQueue).Fn(_)):gt(),yield Pu(s,u)):qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),sI.apply(this,arguments)}function UT(){return UT=(0,Me.Z)(function*(n,e){const t=nt(n);if(lI(t),yy(t),!0===e&&!0!==t.Ca){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield Lb(t,r.toArray());t.Ca=!0,yield GE(t.remoteStore,!0);for(const u of s)Bg(t.remoteStore,u)}else if(!1===e&&!1!==t.Ca){const r=[];let s=Promise.resolve();t.fa.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(Qd(t,c),xf(t.localStore,c,!0))),Ff(t.remoteStore,c)}),yield s,yield Lb(t,r),function(c){const m=nt(c);m.ya.forEach((_,C)=>{Ff(m.remoteStore,C)}),m.wa.Vr(),m.ya=new Map,m.pa=new or(st.comparator)}(t),t.Ca=!1,yield GE(t.remoteStore,!1)}}),UT.apply(this,arguments)}function Lb(n,e,t){return aI.apply(this,arguments)}function aI(){return aI=(0,Me.Z)(function*(n,e,t){const r=nt(n),s=[],u=[];for(const c of e){let m;const _=r.fa.get(c);if(_&&0!==_.length){m=yield Pf(r.localStore,vi(_[0]));for(const C of _){const P=r.ma.get(C),k=yield kb(r,P);k.snapshot&&u.push(k.snapshot)}}else{const C=yield ET(r.localStore,c);m=yield Pf(r.localStore,C),yield dy(r,BT(C),c,!1,m.resumeToken)}s.push(m)}return r.Va.a_(u),s}),aI.apply(this,arguments)}function BT(n){return fg(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jT(n){return t=nt(n).localStore,nt(nt(t).persistence).Bi();var t}function Fb(n,e,t,r){return li.apply(this,arguments)}function li(){return li=(0,Me.Z)(function*(n,e,t,r){const s=nt(n);if(s.Ca)return void qe("SyncEngine","Ignoring unexpected query state notification.");const u=s.fa.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield IT(s.localStore,Pw(u[0])),m=Ig.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Si.EMPTY_BYTE_STRING);yield Pu(s,c,m);break}case"rejected":yield xf(s.localStore,e,!0),Qd(s,e,r);break;default:gt()}}),li.apply(this,arguments)}function HT(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,Me.Z)(function*(n,e,t){const r=lI(n);if(r.Ca){for(const s of e){if(r.fa.has(s)){qe("SyncEngine","Adding an already active target "+s);continue}const u=yield ET(r.localStore,s),c=yield Pf(r.localStore,u);yield dy(r,BT(u),c.targetId,!1,c.resumeToken),Bg(r.remoteStore,c)}for(const s of t)r.fa.has(s)&&(yield xf(r.localStore,s,!1).then(()=>{Ff(r.remoteStore,s),Qd(r,s)}).catch(ft))}}),uI.apply(this,arguments)}function lI(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nb.bind(null,e),e.Va.a_=Ab.bind(null,e.eventManager),e.Va.Fa=bb.bind(null,e.eventManager),e}function yy(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LT.bind(null,e),e}class Gf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Me.Z)(function*(){t.serializer=Ei(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _T(this.persistence,new CE,e.initialUser,this.serializer)}createPersistence(e){return new z_(Kd.jr,this.serializer)}createSharedClientState(e){return new yb}terminate(){var e=this;return(0,Me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Uc extends Gf{constructor(e,t,r){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Me.Z)(function*(){yield t().call(r,e),yield r.xa.initialize(r,e),yield yy(r.xa.syncEngine),yield Hg(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _T(this.persistence,new CE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new lT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Xp(t,this.persistence);return new xa(e.asyncQueue,r)}createPersistence(e){const t=wE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new IE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Fa(),Oc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new yb}}class GT extends Uc{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Me.Z)(function*(){yield t().call(r,e);const s=r.xa.syncEngine;r.sharedClientState instanceof ME&&(r.sharedClientState.syncEngine={Ys:iI.bind(null,s),Zs:Fb.bind(null,s),Xs:HT.bind(null,s),Bi:jT.bind(null,s),Js:rI.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var u=(0,Me.Z)(function*(c){yield function oI(n,e){return UT.apply(this,arguments)}(r.xa.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Fa();if(!ME.D(t))throw new Ze(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ME(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zf{initialize(e,t){var r=this;return(0,Me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>JE(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=VT.bind(null,r.syncEngine),yield GE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Db}createDatastore(e){const t=Ei(e.databaseInfo.databaseId),r=new Ib(e.databaseInfo);return new Nf(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,u=e.asyncQueue,c=t=>JE(this.syncEngine,t,0),m=NE.D()?new NE:new CT,new Lf(r,s,u,c,m);var r,s,u,c,m}createSyncEngine(e,t){return function(s,u,c,m,_,C,P){const k=new xb(s,u,c,m,_,C);return P&&(k.Ca=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Me.Z)(function*(r){const s=nt(r);qe("RemoteStore","RemoteStore shutting down."),s.C_.add(5),yield Va(s),s.F_.shutdown(),s.M_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function cI(n,e=10240){let t=0;return{read:()=>(0,Me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zT{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Me.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Me.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Me.Z)(function*(){const t=yield e.qa();if(null===t)return null;const r=e.La.decode(t),s=Number(r);isNaN(s)&&e.Qa(`length string (${r}) is not valid number`);const u=yield e.Ka(s);return new qE(JSON.parse(u),t.length+s)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Me.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const t=e.$a();t<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ka(e){var t=this;return(0,Me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ua())&&t.Qa("Reached the end of bundle when more is expected.");const r=t.La.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Me.Z)(function*(){const t=yield e.Ba.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ze(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Me.Z)(function*(c,m){const _=nt(c),C=Tg(_.serializer)+"/documents",P={documents:m.map(he=>If(_.serializer,he))},k=yield _.Co("BatchGetDocuments",C,P,m.length),G=new Map;k.forEach(he=>{const Re=function sE(n,e){return"found"in e?function(r,s){Rt(!!s.found);const u=Au(r,s.found.name),c=ui(s.found.updateTime),m=s.found.createTime?ui(s.found.createTime):Dt.min(),_=new Fi({mapValue:{fields:s.found.fields}});return Dr.newFoundDocument(u,c,m,_)}(n,e):"missing"in e?function(r,s){Rt(!!s.missing),Rt(!!s.readTime);const u=Au(r,s.missing),c=ui(s.readTime);return Dr.newNoDocument(u,c)}(n,e):gt()}(_.serializer,he);G.set(Re.key.toString(),Re)});const J=[];return m.forEach(he=>{const Re=G.get(he.toString());Rt(!!Re),J.push(Re)}),J}),function u(c,m){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _g(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=st.fromPath(s);e.mutations.push(new Qv(u,e.precondition(u)))}),yield(r=(0,Me.Z)(function*(u,c){const m=nt(u),_=Tg(m.serializer)+"/documents",C={writes:c.map(P=>wf(m.serializer,P))};yield m.wo("Commit",_,C)}),function s(u,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ze(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Nr.exists(!1):Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Ze(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WT{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Wa=r.maxAttempts,this.zo=new bl(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Me.Z)(function*(){const t=new sx(e.datastore),r=e.za(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.ja(u)}))}).catch(s=>{e.ja(s)})}))}za(e){try{const t=this.updateFunction(e);return!El(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Bw(t)}return!1}}class dI{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=oi.UNAUTHENTICATED,this.clientId=Xi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Me.Z)(function*(m){qe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ze(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Bf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Po(n,e){return hI.apply(this,arguments)}function hI(){return hI=(0,Me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Me.Z)(function*(u){r.isEqual(u)||(yield DE(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),hI.apply(this,arguments)}function fI(n,e){return sa.apply(this,arguments)}function sa(){return sa=(0,Me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xo(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>xT(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>xT(e.remoteStore,u)),n._onlineComponents=e}),sa.apply(this,arguments)}function oa(n){return"FirebaseError"===n.name?n.code===we.FAILED_PRECONDITION||n.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function xo(n){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,Me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Po(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oa(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),yield Po(n,new Gf)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),yield Po(n,new Gf);return n._offlineComponents}),Ey.apply(this,arguments)}function Jg(n){return pI.apply(this,arguments)}function pI(){return pI=(0,Me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield fI(n,n._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),yield fI(n,new zf))),n._onlineComponents}),pI.apply(this,arguments)}function qT(n){return xo(n).then(e=>e.persistence)}function Wf(n){return xo(n).then(e=>e.localStore)}function ZT(n){return Jg(n).then(e=>e.remoteStore)}function Xg(n){return Jg(n).then(e=>e.syncEngine)}function Zf(n){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,Me.Z)(function*(n){const e=yield Jg(n),t=e.eventManager;return t.onListen=KE.bind(null,e.syncEngine),t.onUnlisten=Mb.bind(null,e.syncEngine),t}),Iy.apply(this,arguments)}function gI(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(u,c,m,_,C){const P=new vy({next:G=>{c.enqueueAndForget(()=>oy(u,k));const J=G.docs.has(m);!J&&G.fromCache?C.reject(new Ze(we.UNAVAILABLE,"Failed to get document because the client is offline.")):J&&G.fromCache&&_&&"server"===_.source?C.reject(new Ze(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(G)},error:G=>C.reject(G)}),k=new uy(hf(m.path),P,{includeMetadataChanges:!0,J_:!0});return zE(u,k)}(yield Zf(n),n.asyncQueue,e,t,r)})),r.promise}function YT(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(u,c,m,_,C){const P=new vy({next:G=>{c.enqueueAndForget(()=>oy(u,k)),G.fromCache&&"server"===_.source?C.reject(new Ze(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(G)},error:G=>C.reject(G)}),k=new uy(m,P,{includeMetadataChanges:!0,J_:!0});return zE(u,k)}(yield Zf(n),n.asyncQueue,e,t,r)})),r.promise}function em(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const _I=new Map;function Ty(n,e,t){if(!t)throw new Ze(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yI(n,e,t,r){if(!0===e&&!0===r)throw new Ze(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vI(n){if(!st.isDocumentKey(n))throw new Ze(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EI(n){if(st.isDocumentKey(n))throw new Ze(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":gt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ze(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tm(n);throw new Ze(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function II(n,e){if(e<=0)throw new Ze(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class eC{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ze(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ze(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=em(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new Ze(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ze(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ze(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ze(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ze(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eC(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new bv;switch(r.type){case"firstParty":return new tf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ze(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=_I.get(t);r&&(qe("ComponentProvider","Removing Datastore"),_I.delete(t),r.terminate())}(this),Promise.resolve()}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class xu extends ts{constructor(e,t,r){super(e,t,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new st(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function Cy(n,e,...t){if(n=(0,q.m9)(n),Ty("collection","path",e),n instanceof nm){const r=mn.fromString(e,...t);return EI(r),new xu(n,null,r)}{if(!(n instanceof Ar||n instanceof xu))throw new Ze(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return EI(r),new xu(n.firestore,null,r)}}function Bc(n,e,...t){if(n=(0,q.m9)(n),1===arguments.length&&(e=Xi.newId()),Ty("doc","path",e),n instanceof nm){const r=mn.fromString(e,...t);return vI(r),new Ar(n,null,new st(r))}{if(!(n instanceof Ar||n instanceof xu))throw new Ze(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return vI(r),new Ar(n.firestore,n instanceof xu?n.converter:null,new st(r))}}function nC(n,e){return n=(0,q.m9)(n),e=(0,q.m9)(e),(n instanceof Ar||n instanceof xu)&&(e instanceof Ar||e instanceof xu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wI(n,e){return n=(0,q.m9)(n),e=(0,q.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&pf(n._query,e._query)&&n.converter===e.converter}class Gb{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new bl(this,"async_queue_retry"),this.iu=()=>{const t=Oc();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const e=Oc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Oc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const t=new Mr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Me.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(t){if(!Ao(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const t=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,sr("INTERNAL UNHANDLED ERROR: ",function(c){let m=c.message||"";return c.stack&&(m=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),m}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=t,t}enqueueAfterDelay(e,t,r){this.su(),this.ru.indexOf(e)>-1&&(t=0);const s=MT.createAndSchedule(this,e,t,r,u=>this.au(u));return this.Xa.push(s),s}su(){this.eu&&gt()}verifyOperationInProgress(){}uu(){var e=this;return(0,Me.Z)(function*(){let t;do{t=e.Ja,yield t}while(t!==e.Ja)})()}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function TI(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class zb{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends nm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Gb,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CI(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||CI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CI(n){var e,t,r;const s=n._freezeSettings(),u=(_=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new XP(n._databaseId,_,n._persistenceKey,(P=s).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,em(P.experimentalLongPollingOptions),P.useFetchStreams));var _,P;n._firestoreClient=new dI(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function DI(n,e,t){const r=new Mr;return n.asyncQueue.enqueue((0,Me.Z)(function*(){try{yield Po(n,t),yield fI(n,e),r.resolve()}catch(s){const u=s;if(!oa(u))throw u;Yi("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function cC(n){if(n._initialized||n._terminated)throw new Ze(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xl(Si.fromBase64String(e))}catch(t){throw new Ze(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xl(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ba{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ze(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jc{constructor(e){this._methodName=e}}class im{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const ux=/^__.*__$/;class Yf{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class dC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Dy{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Pu(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Dy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Au(e),s}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ry(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(hC(this.Iu)&&ux.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Qf{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ei(e)}pu(e,t,r,s=!1){return new Dy({Iu:e,methodName:t,gu:r,path:jn.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(n){const e=n._freezeSettings(),t=Ei(n._databaseId);return new Qf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eh(n,e,t,r,s,u={}){const c=n.pu(u.merge||u.mergeFields?2:0,e,t,s);bI("Data must be an object, but it was:",c,r);const m=mC(r,c);let _,C;if(u.merge)_=new ao(c.fieldMask),C=c.fieldTransforms;else if(u.mergeFields){const P=[];for(const k of u.mergeFields){const G=Ml(e,k,t);if(!c.contains(G))throw new Ze(we.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);sm(P,G)||P.push(G)}_=new ao(P),C=c.fieldTransforms.filter(k=>_.covers(k.field))}else _=null,C=c.fieldTransforms;return new Yf(new Fi(m),_,C)}class Hc extends jc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hc}}function Bs(n,e,t){return new Dy({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fC extends jc{_toFieldTransform(e){return new Ud(e.path,new Tl)}isEqual(e){return e instanceof fC}}class pC extends jc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Bs(this,e,!0),r=this.yu.map(u=>$c(u,t)),s=new yf(r);return new Ud(e.path,s)}isEqual(e){return this===e}}class gC extends jc{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Bs(this,e,!0),r=this.yu.map(u=>$c(u,t)),s=new Oa(r);return new Ud(e.path,s)}isEqual(e){return this===e}}class Zb extends jc{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Vd(e.serializer,mf(e.serializer,this.wu));return new Ud(e.path,t)}isEqual(e){return this===e}}function Ay(n,e,t,r){const s=n.pu(1,e,t);bI("Data must be an object, but it was:",s,r);const u=[],c=Fi.empty();bo(r,(_,C)=>{const P=Sy(e,_,t);C=(0,q.m9)(C);const k=s.Ru(P);if(C instanceof Hc)u.push(P);else{const G=$c(C,k);null!=G&&(u.push(P),c.set(P,G))}});const m=new ao(u);return new dC(c,m,s.fieldTransforms)}function by(n,e,t,r,s,u){const c=n.pu(1,e,t),m=[Ml(e,r,t)],_=[s];if(u.length%2!=0)throw new Ze(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)m.push(Ml(e,u[G])),_.push(u[G+1]);const C=[],P=Fi.empty();for(let G=m.length-1;G>=0;--G)if(!sm(C,m[G])){const J=m[G];let he=_[G];he=(0,q.m9)(he);const Re=c.Ru(J);if(he instanceof Hc)C.push(J);else{const Ne=$c(he,Re);null!=Ne&&(C.push(J),P.set(J,Ne))}}const k=new ao(C);return new dC(P,k,c.fieldTransforms)}function AI(n,e,t,r=!1){return $c(t,n.pu(r?4:3,e))}function $c(n,e){if(_C(n=(0,q.m9)(n)))return bI("Unsupported field value:",e,n),mC(n,e);if(n instanceof jc)return function(r,s){if(!hC(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,s){const u=[];let c=0;for(const m of r){let _=$c(m,s.Vu(c));null==_&&(_={nullValue:"NULL_VALUE"}),u.push(_),c++}return{arrayValue:{values:u}}}(n,e)}return function(r,s){if(null===(r=(0,q.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return mf(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=bn.fromDate(r);return{timestampValue:Ac(s.serializer,u)}}if(r instanceof bn){const u=new bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ac(s.serializer,u)}}if(r instanceof im)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xl)return{bytesValue:zw(s.serializer,r._byteString)};if(r instanceof Ar){const u=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw s.mu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:wg(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${tm(r)}`)}(n,e)}function mC(n,e){const t={};return sg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(n,(r,s)=>{const u=$c(s,e.Eu(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function _C(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof im||n instanceof xl||n instanceof Ar||n instanceof jc)}function bI(n,e,t){if(!_C(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=tm(t);throw e.mu("an object"===r?n+" a custom object":n+" "+r)}var s}function Ml(n,e,t){if((e=(0,q.m9)(e))instanceof Ba)return e._internalPath;if("string"==typeof e)return Sy(n,e);throw Ry("Field path arguments must be of type string or ",n,!1,void 0,t)}const Kb=new RegExp("[~\\*/\\[\\]]");function Sy(n,e,t){if(e.search(Kb)>=0)throw Ry(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ba(...e.split("."))._internalPath}catch{throw Ry(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ry(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${s}`),_+=")"),new Ze(we.INVALID_ARGUMENT,m+n+_)}function sm(n,e){return n.some(t=>t.isEqual(e))}class Jf{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(om("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yC extends Jf{data(){return super.data()}}function om(n,e){return"string"==typeof e?Sy(n,e):e instanceof Ba?e._internalPath:e._delegate._internalPath}function vC(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ze(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class th{}class Nl extends th{}function Gc(n,e,...t){let r=[];e instanceof th&&r.push(e),r=r.concat(t),function(u){const c=u.filter(_=>_ instanceof nh).length,m=u.filter(_=>_ instanceof am).length;if(c>1||c>0&&m>0)throw new Ze(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class am extends Nl{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new am(e,t,r)}_apply(e){const t=this._parse(e);return wC(e._query,t),new ts(e.firestore,e.converter,Gv(e._query,t))}_parse(e){const t=Xd(e.firestore);return function(u,c,m,_,C,P,k){let G;if(C.isKeyField()){if("array-contains"===P||"array-contains-any"===P)throw new Ze(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if("in"===P||"not-in"===P){Xf(k,P);const J=[];for(const he of k)J.push(PI(_,u,he));G={arrayValue:{values:J}}}else G=PI(_,u,k)}else"in"!==P&&"not-in"!==P&&"array-contains-any"!==P||Xf(k,P),G=AI(m,"where",k,"in"===P||"not-in"===P);return _n.create(C,P,G)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class nh extends th{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let c=s;const m=u.getFlattenedFilters();for(const _ of m)wC(c,_),c=Gv(c,_)}(e._query,t),new ts(e.firestore,e.converter,Gv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class SI extends Nl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new SI(e,t)}_apply(e){const t=function(s,u,c){if(null!==s.startAt)throw new Ze(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ze(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lg(u,c)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(s,u){const c=s.explicitOrderBy.concat([u]);return new Na(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Py extends Nl{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Py(e,t,r)}_apply(e){return new ts(e.firestore,e.converter,__(e._query,this._limit,this._limitType))}}class RI extends Nl{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new RI(e,t,r)}_apply(e){const t=IC(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(u=t,new Na((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class um extends Nl{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new um(e,t,r)}_apply(e){const t=IC(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(u=t,new Na((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function IC(n,e,t,r){if(t[0]=(0,q.m9)(t[0]),t[0]instanceof Jf)return function(u,c,m,_,C){if(!_)throw new Ze(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const P=[];for(const k of Us(u))if(k.field.isKeyField())P.push(uf(c,_.key));else{const G=_.data.field(k.field);if(Ov(G))throw new Ze(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+k.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===G){const J=k.field.canonicalString();throw new Ze(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${J}' (used as the orderBy) does not exist.`)}P.push(G)}return new Tu(P,C)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Xd(n.firestore);return function(c,m,_,C,P,k){const G=c.explicitOrderBy;if(P.length>G.length)throw new Ze(we.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const J=[];for(let he=0;he<P.length;he++){const Re=P[he];if(G[he].field.isKeyField()){if("string"!=typeof Re)throw new Ze(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof Re}`);if(!ff(c)&&-1!==Re.indexOf("/"))throw new Ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${C}() must be a plain document ID, but '${Re}' contains a slash.`);const Ne=c.path.child(mn.fromString(Re));if(!st.isDocumentKey(Ne))throw new Ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${C}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const ht=new st(Ne);J.push(uf(m,ht))}else{const Ne=AI(_,C,Re);J.push(Ne)}}return new Tu(J,k)}(n._query,n.firestore._databaseId,s,e,t,r)}}function PI(n,e,t){if("string"==typeof(t=(0,q.m9)(t))){if(""===t)throw new Ze(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ff(e)&&-1!==t.indexOf("/"))throw new Ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!st.isDocumentKey(r))throw new Ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uf(n,new st(r))}if(t instanceof Ar)return uf(n,t._key);throw new Ze(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(t)}.`)}function Xf(n,e){if(!Array.isArray(n)||0===n.length)throw new Ze(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wC(n,e){const t=function(s,u){for(const c of s)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ze(we.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xI{convertValue(e,t="none"){switch(wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bo(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new im(Jr(e.latitude),Jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(o_(e));default:return null}}convertTimestamp(e){const t=ra(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);Rt(M_(r));const s=new Il(r.get(1),r.get(3)),u=new st(r.popFirst(5));return s.isEqual(t)||sr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function My(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hx extends xI{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}class rh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mu extends Jf{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(om("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lm extends Mu{data(e={}){return super.data(e)}}class Ol{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new rh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lm(this._firestore,this._userDataWriter,r.key,r,new rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(m=>({type:"added",doc:new lm(s._firestore,s._userDataWriter,m.doc.key,m.doc,new rh(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const _=new lm(s._firestore,s._userDataWriter,m.doc.key,m.doc,new rh(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let C=-1,P=-1;return 0!==m.type&&(C=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),1!==m.type&&(c=c.add(m.doc),P=c.indexOf(m.doc.key)),{type:rS(m.type),doc:_,oldIndex:C,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function MI(n,e){return n instanceof Mu&&e instanceof Mu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ol&&e instanceof Ol&&n._firestore===e._firestore&&wI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nu extends xI{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,t)}}function NI(n,e,t){n=gn(n,Ar);const r=gn(n.firestore,_r),s=My(n.converter,e,t);return ep(r,[eh(Xd(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Nr.none())])}function cm(n,e,t,...r){n=gn(n,Ar);const s=gn(n.firestore,_r),u=Xd(s);let c;return c="string"==typeof(e=(0,q.m9)(e))||e instanceof Ba?by(u,"updateDoc",n._key,e,t,r):Ay(u,"updateDoc",n._key,e),ep(s,[c.toMutation(n._key,Nr.exists(!0))])}function AC(n){return ep(gn(n.firestore,_r),[new _g(n._key,Nr.none())])}function OI(n,e){const t=gn(n.firestore,_r),r=Bc(n),s=My(n.converter,e);return ep(t,[eh(Xd(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}function kI(n,...e){var t,r,s;n=(0,q.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||TI(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(TI(e[c])){const k=e[c];e[c]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[c+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[c+2]=null===(s=k.complete)||void 0===s?void 0:s.bind(k)}let _,C,P;if(n instanceof Ar)C=gn(n.firestore,_r),P=hf(n._key.path),_={next:k=>{e[c]&&e[c](LI(C,n,k))},error:e[c+1],complete:e[c+2]};else{const k=gn(n,ts);C=gn(k.firestore,_r),P=k._query;const G=new Nu(C);_={next:J=>{e[c]&&e[c](new Ol(C,G,k,J))},error:e[c+1],complete:e[c+2]},vC(n._query)}return function(G,J,he,Re){const Ne=new vy(Re),ht=new uy(J,Ne,he);return G.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return zE(yield Zf(G),ht)})),()=>{Ne.Na(),G.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return oy(yield Zf(G),ht)}))}}($r(C),P,m,_)}function ep(n,e){return function(r,s){const u=new Mr;return r.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function OT(n,e,t){return Zg.apply(this,arguments)}(yield Xg(r),s,u)})),u.promise}($r(n),e)}function LI(n,e,t){const r=t.docs.get(e._key),s=new Nu(n);return new Mu(n,s,e._key,r,new rh(t.hasPendingWrites,t.fromCache),e.converter)}const FI={maxAttempts:5};class VI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xd(e)}set(e,t,r){this._verifyNotCommitted();const s=Ou(e,this._firestore),u=My(s.converter,t,r),c=eh(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Nr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ou(e,this._firestore);let c;return c="string"==typeof(t=(0,q.m9)(t))||t instanceof Ba?by(this._dataReader,"WriteBatch.update",u._key,t,r,s):Ay(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ou(e,this._firestore);return this._mutations=this._mutations.concat(new _g(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ou(n,e){if((n=(0,q.m9)(n)).firestore!==e)throw new Ze(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mS extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Xd(t)}get(t){const r=Ou(t,this._firestore),s=new hx(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return gt();const c=u[0];if(c.isFoundDocument())return new Jf(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new Jf(this._firestore,s,r._key,null,r.converter);throw gt()})}set(t,r,s){const u=Ou(t,this._firestore),c=My(u.converter,r,s),m=eh(this._dataReader,"Transaction.set",u._key,c,null!==u.converter,s);return this._transaction.set(u._key,m),this}update(t,r,s,...u){const c=Ou(t,this._firestore);let m;return m="string"==typeof(r=(0,q.m9)(r))||r instanceof Ba?by(this._dataReader,"Transaction.update",c._key,r,s,u):Ay(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,m),this}delete(t){const r=Ou(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ou(e,this._firestore),r=new Nu(this._firestore);return super.get(e).then(s=>new Mu(this._firestore,r,t._key,s._document,new rh(!1,!1),t.converter))}}!function(e,t=!0){Do=Rr.SDK_VERSION,(0,Rr._registerComponent)(new Di.wA("firestore",(r,{instanceIdentifier:s,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new _r(new Zp(r.getProvider("auth-internal")),new bd(r.getProvider("app-check-internal")),function(C,P){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new Ze(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(C.options.projectId,P)}(c,s),c);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),(0,Rr.registerVersion)(Xh,"4.3.2",e),(0,Rr.registerVersion)(Xh,"4.3.2","esm2017")}();var hm=function(){return hm=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e},hm.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var wS={includeMetadataChanges:!1};function $I(n,e){return void 0===e&&(e=wS),new ue.y(function(t){return{unsubscribe:kI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}function CS(n,e){var t;void 0===e&&(e={});var r=n.data(e);return n.exists()&&"object"==typeof r&&null!==r&&e.idField?hm(hm({},r),((t={})[e.idField]=n.id,t)):r}function kC(n,e){return void 0===e&&(e={}),function SS(n){return $I(n,{includeMetadataChanges:!0}).pipe((0,Pe.U)(function(e){return e.docs}))}(n).pipe((0,Pe.U)(function(t){return t.map(function(r){return CS(r,e)})}))}var ku=B(2096),Ts=B(4664);B(8290),(0,Rr.registerVersion)("firebase","10.5.2","app");const BC=new class UC extends nu{}(class VC extends wr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var bx=B(9397),fm=B(3093),pm=B(5137);const tp=new g.GfV("ANGULARFIRE2_VERSION");class zc{constructor(){return((n,e)=>{const t=(0,Rr.getApps)(),r=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r})(MS)}}const MS="app-check";function Wc(){}class jC{zone;delegate;constructor(e,t=BC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const s=this.zone;return this.delegate.schedule(function(c){s.runGuarded(()=>{e.apply(this,[c])})},t,r)}}class Px{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wc,{},Wc,Wc)),t.pipe((0,bx.b)({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fy=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new jC(Zone.current)),this.insideAngular=t.run(()=>new jC(Zone.current,wo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(g.LFG(g.R0b))};static \u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gm(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function HC(n){return n.pipe((0,fm.Q)(gm().outsideAngular))}function Or(n){return function $C(n){return function(t){return(t=t.lift(new Px(n.ngZone))).pipe((0,pm.R)(n.outsideAngular),(0,fm.Q)(n.insideAngular))}}(gm())(n)}var js=B(3106);js.Z.registerVersion("firebase","10.5.2","app-compat");const GC=["ngOnDestroy"];class qI{constructor(e){return e}}const kl=new g.OlP("angularfire2.app.options"),np=new g.OlP("angularfire2.app.name");function _m(n,e,t){const s="object"==typeof t&&t||{};s.name=s.name||"string"==typeof t&&t||"[DEFAULT]";const c=js.Z.apps.filter(m=>m&&m.name===s.name)[0]||e.runOutsideAngular(()=>js.Z.initializeApp(n,s));try{if(JSON.stringify(n)!==JSON.stringify(c.options)){const m=!!module.hot;zC("error",`${c.name} Firebase App already initialized with different options${m?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new qI(c)}const zC=(n,...e)=>{(0,g.X6Q)()&&typeof console<"u"&&console[n](...e)},WC={provide:qI,useFactory:_m,deps:[kl,g.R0b,[new g.FiY,np]]};let ZI=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:kl,useValue:t},{provide:np,useValue:r}]}}constructor(t){js.Z.registerVersion("angularfire",tp.full,"core"),js.Z.registerVersion("angularfire",tp.full,"app-compat"),js.Z.registerVersion("angular",g.q4F.full,t.toString())}static \u0275fac=function(r){return new(r||n)(g.LFG(g.Lbi))};static \u0275mod=g.oAB({type:n});static \u0275inj=g.cJS({providers:[WC]})}return n})();function ym(n,e,t,r,s){const[,u,c]=globalThis.\u0275AngularfireInstanceCache.find(m=>m[0]===n)||[];if(u)return function US(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(s,c)||(KI("error",`${e} was already initialized on the ${t} Firebase App with different settings.${qC?" You may need to reload as Firebase is not HMR aware.":""}`),KI("warn",{is:s,was:c})),u;{const m=r();return globalThis.\u0275AngularfireInstanceCache.push([n,m,s]),m}}const qC=typeof module<"u"&&!!module.hot,KI=(n,...e)=>{(0,g.X6Q)()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ZC=B(8645),YI=B(3019);class QI extends ZC.x{constructor(e=1/0,t=1/0,r=hs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let m=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)m=_;m&&r.splice(0,m+1)}}}var Vy=B(3020);function JI(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,Vy.B)({connector:()=>new QI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var XI=B(1374),e0=B(4674);function KC(n,e){return(0,e0.m)(e)?(0,Ts.w)(()=>n,e):(0,Ts.w)(()=>n)}var t0=B(2181);const n0=new g.OlP("angularfire2.auth.use-emulator"),Uy=new g.OlP("angularfire2.auth.settings"),vm=new g.OlP("angularfire2.auth.tenant-id"),By=new g.OlP("angularfire2.auth.langugage-code"),r0=new g.OlP("angularfire2.auth.use-device-language"),jy=new g.OlP("angularfire.auth.persistence"),Hy=(n,e,t,r,s,u,c,m)=>ym(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),c)for(const[C,P]of Object.entries(c))_.settings[C]=P;return m&&_.setPersistence(m),_},[t,r,s,u,c,m]);let Em=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,s,u,c,m,_,C,P,k,G,J){const he=new ZC.x,Re=(0,ku.of)(void 0).pipe((0,fm.Q)(c.outsideAngular),(0,Ts.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8290)))),(0,Pe.U)(()=>_m(t,u,r)),(0,Pe.U)(Ne=>Hy(Ne,u,m,C,P,k,_,G)),JI({bufferSize:1,refCount:!1}));if((0,K.PM)(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ku.of)(null);else{Re.pipe((0,XI.P)()).subscribe();const Ne=Re.pipe((0,Ts.w)(Qe=>Qe.getRedirectResult().then(Ct=>Ct,()=>null)),Or,JI({bufferSize:1,refCount:!1})),ht=Re.pipe((0,Ts.w)(Qe=>new ue.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Qe.onAuthStateChanged(Xt=>Ct.next(Xt),Xt=>Ct.error(Xt),()=>Ct.complete()))})))),mt=Re.pipe((0,Ts.w)(Qe=>new ue.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>Qe.onIdTokenChanged(Xt=>Ct.next(Xt),Xt=>Ct.error(Xt),()=>Ct.complete()))}))));this.authState=Ne.pipe(KC(ht),(0,pm.R)(c.outsideAngular),(0,fm.Q)(c.insideAngular)),this.user=Ne.pipe(KC(mt),(0,pm.R)(c.outsideAngular),(0,fm.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Ts.w)(Qe=>Qe?(0,ie.D)(Qe.getIdToken()):(0,ku.of)(null))),this.idTokenResult=this.user.pipe((0,Ts.w)(Qe=>Qe?(0,ie.D)(Qe.getIdTokenResult()):(0,ku.of)(null))),this.credential=(0,YI.T)(Ne,he,this.authState.pipe((0,t0.h)(Qe=>!Qe))).pipe((0,Pe.U)(Qe=>Qe?.user?Qe:null),(0,pm.R)(c.outsideAngular),(0,fm.Q)(c.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(s,u)=>t.runOutsideAngular(()=>{if(n[u])return r?.spy?.get&&r.spy.get(u,n[u]),n[u];if(GC.indexOf(u)>-1)return()=>{};const c=e.toPromise().then(m=>{const _=m?.[u];return"function"==typeof _?_.bind(m):_?.then?_.then(C=>t.run(()=>C)):t.run(()=>_)});return new Proxy(()=>{},{get:(m,_)=>c[_],apply:(m,_,C)=>c.then(P=>{const k=P?.(...C);return r?.spy?.apply&&r.spy.apply(u,C,k),k})})})}))(this,Re,u,{spy:{apply:(Ne,ht,mt)=>{(Ne.startsWith("signIn")||Ne.startsWith("createUser"))&&mt.then(Qe=>he.next(Qe))}}})}static \u0275fac=function(r){return new(r||n)(g.LFG(kl),g.LFG(np,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fy),g.LFG(n0,8),g.LFG(Uy,8),g.LFG(vm,8),g.LFG(By,8),g.LFG(r0,8),g.LFG(jy,8),g.LFG(zc,8))};static \u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),YC=(()=>{class n{constructor(){js.Z.registerVersion("angularfire",tp.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=g.oAB({type:n});static \u0275inj=g.cJS({providers:[Em]})}return n})();var $y=B(7921),Gy=B(9360);function zy(){return(0,Gy.e)((n,e)=>{let t,r=!1;n.subscribe((0,De.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var rp=B(6699),Cs=B(3997);function s0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ze("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function HS(){if(typeof Uint8Array>"u")throw new Ze("unimplemented","Uint8Arrays are not available in this environment.")}function $S(){if(!function BA(){return typeof atob<"u"}())throw new Ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}class sp{constructor(e){this._delegate=e}static fromBase64String(e){return $S(),new sp(xl.fromBase64String(e))}static fromUint8Array(e){return HS(),new sp(xl.fromUint8Array(e))}toBase64(){return $S(),this._delegate.toBase64()}toUint8Array(){return HS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Im(n){return function Mx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Nx{enableIndexedDbPersistence(e,t){return function rC(n,e){cC(n=gn(n,_r));const t=$r(n);if(t._uninitializedComponentsProvider)throw new Ze(we.FAILED_PRECONDITION,"SDK cache is already specified.");Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new zf;return DI(t,s,new Uc(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function iC(n){cC(n=gn(n,_r));const e=$r(n);if(e._uninitializedComponentsProvider)throw new Ze(we.FAILED_PRECONDITION,"SDK cache is already specified.");Yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new zf;return DI(e,r,new GT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sC(n){if(n._initialized&&!n._terminated)throw new Ze(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{yield(t=(0,Me.Z)(function*(s){if(!es.D())return Promise.resolve();const u=s+"main";yield es.delete(u)}),function r(s){return t.apply(this,arguments)})(wE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class GS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Il||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tC(n,e,t,r={}){var s;const u=(n=gn(n,nm))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let m,_;if("string"==typeof r.mockUserToken)m=r.mockUserToken,_=oi.MOCK_USER;else{m=(0,q.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new Ze(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new oi(C)}n._authCredentials=new Ji(new ef(m,_))}}(this._delegate,e,t,r)}enableNetwork(){return function aC(n){return function Ub(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield qT(n),t=yield ZT(n);return e.setNetworkEnabled(!0),function(s){const u=nt(s);return u.C_.delete(0),Ru(u)}(t)}))}($r(n=gn(n,_r)))}(this._delegate)}disableNetwork(){return function uC(n){return function Bb(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const e=yield qT(n),t=yield ZT(n);return e.setNetworkEnabled(!1),(r=(0,Me.Z)(function*(u){const c=nt(u);c.C_.add(0),yield Va(c),c.M_.set("Offline")}),function s(u){return r.apply(this,arguments)})(t);var r}))}($r(n=gn(n,_r)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function oC(n){return function(t){const r=new Mr;return t.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function Ob(n,e){return eI.apply(this,arguments)}(yield Xg(t),r)})),r.promise}($r(n=gn(n,_r)))}(this._delegate)}onSnapshotsInSync(e){return function uS(n,e){return function QT(n,e){const t=new vy(e);return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return s=yield Zf(n),u=t,nt(s).q_.add(u),void u.next();var s,u})),()=>{t.Na(),n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return s=yield Zf(n),u=t,void nt(s).q_.delete(u);var s,u}))}}($r(n=gn(n,_r)),TI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oh(this,Cy(this._delegate,e))}catch(t){throw Hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new aa(this,Bc(this._delegate,e))}catch(t){throw Hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,function $b(n,e){if(n=gn(n,nm),Ty("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ze(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(r=e,new Na(mn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _S(n,e,t){n=gn(n,_r);const r=Object.assign(Object.assign({},FI),t);return function(u){if(u.maxAttempts<1)throw new Ze(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,c,m){const _=new Mr;return u.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){const C=yield function qf(n){return Jg(n).then(e=>e.datastore)}(u);new WT(u.asyncQueue,C,m,c,_).run()})),_.promise}($r(n),s=>e(new mS(n,s)),r)}(this._delegate,t=>e(new Wy(this,t)))}batch(){return $r(this._delegate),new QC(new VI(this._delegate,e=>ep(this._delegate,e)))}loadBundle(e){return function lC(n,e){const t=$r(n=gn(n,_r)),r=new zb;return function JT(n,e,t,r){const s=function(c,m){let _;return _="string"==typeof c?Xv().encode(c):c,P=function(P,k){if(P instanceof Uint8Array)return cI(P,k);if(P instanceof ArrayBuffer)return cI(new Uint8Array(P),k);if(P instanceof ReadableStream)return P.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new zT(P,m);var P}(t,Ei(e));n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){!function Vb(n,e,t){const r=nt(n);var s;(s=(0,Me.Z)(function*(c,m,_){try{const C=yield m.getMetadata();if(yield function(he,Re){const Ne=nt(he),ht=ui(Re.createTime);return Ne.persistence.runTransaction("hasNewerBundle","readonly",mt=>Ne.Kr.getBundleMetadata(mt,Re.id)).then(mt=>!!mt&&mt.createTime.compareTo(ht)>=0)}(c.localStore,C))return yield m.close(),_._completeWith({taskState:"Success",documentsLoaded:(he=C).totalDocuments,bytesLoaded:he.totalBytes,totalDocuments:he.totalDocuments,totalBytes:he.totalBytes}),Promise.resolve(new Set);_._updateProgress(zg(C));const P=new Sb(C,c.localStore,m.serializer);let k=yield m.Ma();for(;k;){const J=yield P.ea(k);J&&_._updateProgress(J),k=yield m.Ma()}const G=yield P.complete();return yield Pu(c,G.ra,void 0),yield function(he,Re){const Ne=nt(he);return Ne.persistence.runTransaction("Save bundle","readwrite",ht=>Ne.Kr.saveBundleMetadata(ht,Re))}(c.localStore,C),_._completeWith(G.progress),Promise.resolve(G.na)}catch(C){return Yi("SyncEngine",`Loading bundle failed with ${C}`),_._failWith(C),Promise.resolve(new Set)}var he}),function u(c,m,_){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield Xg(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Jd(n,e){return function XT(n,e){return n.asyncQueue.enqueue((0,Me.Z)(function*(){return function(r,s){const u=nt(r);return u.persistence.runTransaction("Get named query","readonly",c=>u.Kr.getNamedQuery(c,s))}(yield Wf(n),e)}))}($r(n=gn(n,_r)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ui(this,t):null)}}class qc extends xI{constructor(e){super(),this.firestore=e}convertBytes(e){return new sp(new xl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return aa.forKey(t,this.firestore,null)}}class Wy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qc(e)}get(e){const t=ah(e);return this._delegate.get(t).then(r=>new op(this._firestore,new Mu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ah(e);return r?(s0("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ah(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ah(e);return this._delegate.delete(t),this}}class QC{constructor(e){this._delegate=e}set(e,t,r){const s=ah(e);return r?(s0("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ah(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ah(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wm(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zc.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Zc(e,new qc(e),t),s.set(t,u)),u}}Zc.INSTANCES=new WeakMap;class aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qc(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new aa(t,new Ar(t._delegate,r,new st(e)))}static forKey(e,t,r){return new aa(t,new Ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oh(this.firestore,Cy(this._delegate,e))}catch(t){throw Hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,q.m9)(e))instanceof Ar&&nC(this._delegate,e)}set(e,t){t=s0("DocumentReference.set",t);try{return t?NI(this._delegate,e,t):NI(this._delegate,e)}catch(r){throw Hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cm(this._delegate,e):cm(this._delegate,e,t,...r)}catch(s){throw Hs(s,"updateDoc()","DocumentReference.update()")}}delete(){return AC(this._delegate)}onSnapshot(...e){const t=JC(e),r=qy(e,s=>new op(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return kI(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function sS(n){n=gn(n,Ar);const e=gn(n.firestore,_r),t=$r(e),r=new Nu(e);return function KT(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(r=(0,Me.Z)(function*(u,c,m){try{const _=yield function(P,k){const G=nt(P);return G.persistence.runTransaction("read document","readonly",J=>G.localDocuments.getDocument(J,k))}(u,c);_.isFoundDocument()?m.resolve(_):_.isNoDocument()?m.resolve(null):m.reject(new Ze(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const C=Bf(_,`Failed to get document '${c} from cache`);m.reject(C)}}),function s(u,c,m){return r.apply(this,arguments)})(yield Wf(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Mu(e,r,n._key,s,new rh(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function CC(n){n=gn(n,Ar);const e=gn(n.firestore,_r);return gI($r(e),n._key,{source:"server"}).then(t=>LI(e,n,t))}(this._delegate):function iS(n){n=gn(n,Ar);const e=gn(n.firestore,_r);return gI($r(e),n._key).then(t=>LI(e,n,t))}(this._delegate),t.then(r=>new op(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new aa(this.firestore,this._delegate.withConverter(e?Zc.getInstance(this.firestore,e):null))}}function Hs(n,e,t){return n.message=n.message.replace(e,t),n}function JC(n){for(const e of n)if("object"==typeof e&&!Im(e))return e;return{}}function qy(n,e){var t,r;let s;return s=Im(n[0])?n[0]:Im(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class op{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return MI(this._delegate,e._delegate)}}class wm extends op{data(e){const t=this._delegate.data(e);return function Qi(n,e){n||gt()}(void 0!==t),t}}class Ui{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qc(e)}where(e,t,r){try{return new Ui(this.firestore,Gc(this._delegate,function Yb(n,e,t){const r=e,s=om("where",n);return am._create(s,r,t)}(e,t,r)))}catch(s){throw Hs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ui(this.firestore,Gc(this._delegate,function EC(n,e="asc"){const t=e,r=om("orderBy",n);return SI._create(r,t)}(e,t)))}catch(r){throw Hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ui(this.firestore,Gc(this._delegate,function Xb(n){return II("limit",n),Py._create("limit",n,"F")}(e)))}catch(t){throw Hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ui(this.firestore,Gc(this._delegate,function lx(n){return II("limitToLast",n),Py._create("limitToLast",n,"L")}(e)))}catch(t){throw Hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ui(this.firestore,Gc(this._delegate,function cx(...n){return RI._create("startAt",n,!0)}(...e)))}catch(t){throw Hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ui(this.firestore,Gc(this._delegate,function dx(...n){return RI._create("startAfter",n,!1)}(...e)))}catch(t){throw Hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ui(this.firestore,Gc(this._delegate,function xy(...n){return um._create("endBefore",n,!1)}(...e)))}catch(t){throw Hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ui(this.firestore,Gc(this._delegate,function eS(...n){return um._create("endAt",n,!0)}(...e)))}catch(t){throw Hs(t,"endAt()","Query.endAt()")}}isEqual(e){return wI(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function oS(n){n=gn(n,ts);const e=gn(n.firestore,_r),t=$r(e),r=new Nu(e);return function wy(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(r=(0,Me.Z)(function*(u,c,m){try{const _=yield q_(u,c,!0),C=new ZE(c,_.ls),P=C.ca(_.documents),k=C.applyChanges(P,!1);m.resolve(k.snapshot)}catch(_){const C=Bf(_,`Failed to execute query '${c} against cache`);m.reject(C)}}),function s(u,c,m){return r.apply(this,arguments)})(yield Wf(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ol(e,r,n,s))}(this._delegate):"server"===e?.source?function aS(n){n=gn(n,ts);const e=gn(n.firestore,_r),t=$r(e),r=new Nu(e);return YT(t,n._query,{source:"server"}).then(s=>new Ol(e,r,n,s))}(this._delegate):function DC(n){n=gn(n,ts);const e=gn(n.firestore,_r),t=$r(e),r=new Nu(e);return vC(n._query),YT(t,n._query).then(s=>new Ol(e,r,n,s))}(this._delegate),t.then(r=>new XC(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JC(e),r=qy(e,s=>new XC(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return kI(this._delegate,t,r)}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?Zc.getInstance(this.firestore,e):null))}}class o0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class XC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new o0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new wm(this._firestore,r))})}isEqual(e){return MI(this._delegate,e._delegate)}}class oh extends Ui{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new aa(this.firestore,e):null}doc(e){try{return new aa(this.firestore,void 0===e?Bc(this._delegate):Bc(this._delegate,e))}catch(t){throw Hs(t,"doc()","CollectionReference.doc()")}}add(e){return OI(this._delegate,e).then(t=>new aa(this.firestore,t))}isEqual(e){return nC(this._delegate,e._delegate)}withConverter(e){return new oh(this.firestore,this._delegate.withConverter(e?Zc.getInstance(this.firestore,e):null))}}function ah(n){return gn(n,Ar)}class Zy{constructor(...e){this._delegate=new Ba(...e)}static documentId(){return new Zy(jn.keyField().canonicalString())}isEqual(e){return(e=(0,q.m9)(e))instanceof Ba&&this._delegate._internalPath.isEqual(e._internalPath)}}class ua{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yS(){return new fC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ua(e)}static delete(){const e=function UI(){return new Hc("deleteField")}();return e._methodName="FieldValue.delete",new ua(e)}static arrayUnion(...e){const t=function PC(...n){return new pC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ua(t)}static arrayRemove(...e){const t=function ih(...n){return new gC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ua(t)}static increment(e){const t=function xC(n){return new Zb("increment",n)}(e);return t._methodName="FieldValue.increment",new ua(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const WS={Firestore:GS,GeoPoint:im,Timestamp:bn,Blob:sp,Transaction:Wy,WriteBatch:QC,DocumentReference:aa,DocumentSnapshot:op,Query:Ui,QueryDocumentSnapshot:wm,QuerySnapshot:XC,CollectionReference:oh,FieldPath:Zy,FieldValue:ua,setLogLevel:function zS(n){!function Ad(n){ba.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function tD(n,e){return function Ox(n,e=wo){return new ue.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function u0(n,e){return tD(n,e).pipe((0,Pe.U)(t=>({payload:t,type:"query"})))}!function a0(n){(function eD(n,e){n.INTERNAL.registerComponent(new Di.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},WS)))})(n,(e,t)=>new GS(e,t,new Nx)),n.registerVersion("@firebase/firestore-compat","0.3.21")}(js.Z);class nD{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=h0(r,t);return new sD(s,u,this.afs)}snapshotChanges(){return function kx(n,e){return tD(n,e).pipe((0,$y.O)(void 0),zy(),(0,Pe.U)(t=>{const[r,s]=t;return s.exists?r?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Or)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pe.U)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return(0,ie.D)(this.ref.get(e)).pipe(Or)}}function Ky(n,e){return u0(n,e).pipe((0,$y.O)(void 0),zy(),(0,Pe.U)(t=>{const[r,s]=t,u=s.payload.docChanges(),c=u.map(m=>({type:m.type,payload:m}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((m,_)=>{const C=u.find(k=>k.doc.ref.isEqual(m.ref)),P=r?.payload.docs.find(k=>k.ref.isEqual(m.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(m.metadata)||!C&&P&&JSON.stringify(P.metadata)===JSON.stringify(m.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:m}})}),c}))}function l0(n,e,t){return Ky(n,t).pipe((0,rp.R)((r,s)=>function rD(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function iD(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return c0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return c0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return c0(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,Cs.x)(),(0,Pe.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function c0(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function d0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class sD{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ky(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pe.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe((0,$y.O)(void 0),zy(),(0,t0.h)(([r,s])=>s.length>0||!r),(0,Pe.U)(([,r])=>r),Or)}auditTrail(e){return this.stateChanges(e).pipe((0,rp.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d0(e);return l0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Or)}valueChanges(e={}){return u0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Or)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Or)}add(e){return this.ref.add(e)}doc(e){return new nD(this.ref.doc(e),this.afs)}}class qS{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,t0.h)(t=>t.length>0),Or):Ky(this.query,this.afs.schedulers.outsideAngular).pipe(Or)}auditTrail(e){return this.stateChanges(e).pipe((0,rp.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=d0(e);return l0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Or)}valueChanges(e={}){return u0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(r=>r.payload.docs.map(s=>e.idField?{[e.idField]:s.id,...s.data()}:s.data())),Or)}get(e){return(0,ie.D)(this.query.get(e)).pipe(Or)}}const oD=new g.OlP("angularfire2.enableFirestorePersistence"),ZS=new g.OlP("angularfire2.firestore.persistenceSettings"),aD=new g.OlP("angularfire2.firestore.settings"),uD=new g.OlP("angularfire2.firestore.use-emulator");function h0(n,e=(t=>t)){return{query:e(n),ref:n}}let lD=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,s,u,c,m,_,C,P,k,G,J,he,Re,Ne,ht,mt){this.schedulers=_;const Qe=_m(t,m,r),Ct=P;k&&Hy(Qe,m,G,he,Re,Ne,J,ht),[this.firestore,this.persistenceEnabled$]=ym(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Xt=m.runOutsideAngular(()=>Qe.firestore());if(u&&Xt.settings(u),Ct&&Xt.useEmulator(...Ct),s&&!(0,K.PM)(c)){const En=()=>{try{return(0,ie.D)(Xt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ei){return typeof console<"u"&&console.warn(ei),(0,ku.of)(!1)}};return[Xt,m.runOutsideAngular(En)]}return[Xt,(0,ku.of)(!1)]},[u,Ct,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=h0(s,r),m=this.schedulers.ngZone.run(()=>u);return new sD(m,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new qS(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new nD(s,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(g.LFG(kl),g.LFG(np,8),g.LFG(oD,8),g.LFG(aD,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fy),g.LFG(ZS,8),g.LFG(uD,8),g.LFG(Em,8),g.LFG(n0,8),g.LFG(Uy,8),g.LFG(vm,8),g.LFG(By,8),g.LFG(r0,8),g.LFG(jy,8),g.LFG(zc,8))};static \u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Tm=(()=>{class n{get currentUserProfile$(){return(0,ie.D)(this.angularfireauth.currentUser).pipe((0,Ts.w)(t=>t&&"object"==typeof t&&"uid"in t?function MC(n,e){return void 0===e&&(e={}),function TS(n){return $I(n,{includeMetadataChanges:!0})}(n).pipe((0,Pe.U)(function(t){return CS(t,e)}))}(Bc(this.angularfirestore.firestore,"users",t.uid)):(0,ku.of)(null)))}constructor(t,r,s){this.angularfireauth=t,this.angularfirestore=r,this.router=s,this.isLoggedIn=!1}signin(t,r){var s=this;return(0,Me.Z)(function*(){yield s.angularfireauth.signInWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(u.user))})})()}signup(t,r){var s=this;return(0,Me.Z)(function*(){return s.angularfireauth.createUserWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("IsAuthorized","true"),s.router.navigate(["/dashboard/home"]),localStorage.setItem("user",JSON.stringify(u.user))}).catch(u=>{alert("Invalid Data"),console.log(u)})})()}logout(){this.angularfireauth.signOut(),localStorage.removeItem("user")}forgotPassword(t){this.angularfireauth.sendPasswordResetEmail(t)}saveData(t){OI(Cy(this.angularfirestore.firestore,"users"),t.value).then(s=>{console.log(s),this.userId=s.id,console.log("data saved successfully")}).catch(s=>{console.log(s)})}getDatas(){const t=Cy(this.angularfirestore.firestore,"users");kC(t,{idField:"id"}).subscribe(r=>{console.log(r),localStorage.setItem("users",JSON.stringify(r))}),this.userData=kC(t,{idField:"id"})}addUser(t){const r=Bc(this.angularfirestore.firestore,"users",t?.uid);return(0,ie.D)(NI(r,t))}updateData(t){const r=Bc(this.angularfirestore.firestore,"users",t?.uid);return(0,ie.D)(cm(r,{...t}))}deleteData(t){const r=Bc(this.angularfirestore.firestore,"users",t?.uid);return(0,ie.D)(AC(r).then(()=>{alert("Data Deleted !")}))}static#e=this.\u0275fac=function(r){return new(r||n)(g.LFG(Em),g.LFG(lD),g.LFG(pi.F0))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fx(n,e){if(1&n){const t=g.EpF();g.O4$(),g.TgZ(0,"svg",20),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.showPassword())}),g._UZ(1,"path",21)(2,"path",22),g.qZA()}}function cD(n,e){if(1&n){const t=g.EpF();g.O4$(),g.TgZ(0,"svg",20),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.showPassword())}),g._UZ(1,"path",23),g.qZA()}}let Vx=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.email="",this.password="",this.changetype=!0,this.viewIcon=!0}register(){this.router.navigate(["/register"])}login(t,r){var s=this;return(0,Me.Z)(function*(){yield s.userinfo.signin(t,r),s.userinfo.isLoggedIn?(localStorage.setItem("IsAuthorized","true"),s.router.navigate(["/dashboard/home"])):alert("Invalid Data")})()}ForgotPassword(t){t?(this.userinfo.forgotPassword(t),window.location.reload()):alert("Fill Email Field !")}showPassword(){this.changetype=!this.changetype,this.viewIcon=!this.viewIcon}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(pi.F0),g.Y36(Tm))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-user-login"]],decls:29,vars:5,consts:[[1,"flex","w-full","h-screen"],[1,"mx-auto","mt-20"],[1,"border-4","border-golden","h-96","w-96","rounded-3xl"],["src","././assets/img/navlogo.png",1,"p-6","rounded-full"],[1,"flex","flex-col","items-center","justify-center","mt-2"],[1,"mx-auto","my-3"],["for","email",1,"text-gray-800"],["type","email","id","email","name","email",1,"ml-2","border-2","border-golden","outline-none","hover:border-amber-400","rounded-md",3,"ngModel","ngModelChange"],[1,"mx-auto","my-3","flex","flex-row"],["for","password",1,"text-gray-800"],[1,"flex","flex-row","ml-2","border-2","border-golden","rounded-md"],["id","password",1,"border-golden","outline-none",3,"type","ngModel","ngModelChange"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","w-6 h-6 text-golden",3,"click",4,"ngIf"],[1,"flex","justify-between","w-full","h-fit","mt-2"],[1,"mx-10","text-blue-600"],[1,"cursor-pointer","hover:underline",3,"click"],[1,"mx-10"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-center","text-white","rounded-lg","bg-golden","hover:bg-golden","focus:ring-4","focus:outline-none","focus:ring-amber-300",3,"click"],[1,"text-center","w-full","mt-4"],[1,"text-blue-600","bg-golden","w-64","mx-5","rounded-lg","font-bold","py-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-golden",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),g._UZ(4,"img",3),g.qZA(),g.TgZ(5,"div",4)(6,"div",5)(7,"label",6),g._uU(8,"Email :"),g.qZA(),g.TgZ(9,"input",7),g.NdJ("ngModelChange",function(c){return s.email=c}),g.qZA()(),g.TgZ(10,"div",8)(11,"label",9),g._uU(12,"Password :"),g.qZA(),g.TgZ(13,"div",10)(14,"div")(15,"input",11),g.NdJ("ngModelChange",function(c){return s.password=c}),g.qZA()(),g.TgZ(16,"div"),g.YNc(17,Fx,3,0,"svg",12),g.YNc(18,cD,2,0,"svg",12),g.qZA()()(),g.TgZ(19,"div",13)(20,"div",14)(21,"label",15),g.NdJ("click",function(){return s.ForgotPassword(s.email)}),g._uU(22,"Forgot Password?"),g.qZA()(),g.TgZ(23,"div",16)(24,"button",17),g.NdJ("click",function(){return s.login(s.email,s.password)}),g._uU(25,"LOGIN"),g.qZA()()()(),g.TgZ(26,"div",18)(27,"button",19),g.NdJ("click",function(){return s.register()}),g._uU(28,"Create Account"),g.qZA()()()()()),2&r&&(g.xp6(9),g.Q6J("ngModel",s.email),g.xp6(6),g.Q6J("type",s.changetype?"password":"text")("ngModel",s.password),g.xp6(2),g.Q6J("ngIf",1==s.viewIcon),g.xp6(1),g.Q6J("ngIf",0==s.viewIcon))},dependencies:[K.O5,Fe,St,vo]})}return n})();function Ux(n,e){if(1&n){const t=g.EpF();g.O4$(),g.TgZ(0,"svg",20),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.showPassword())}),g._UZ(1,"path",21)(2,"path",22),g.qZA()}}function Bx(n,e){if(1&n){const t=g.EpF();g.O4$(),g.TgZ(0,"svg",20),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.showPassword())}),g._UZ(1,"path",23),g.qZA()}}let jx=(()=>{class n{constructor(t,r){this.router=t,this.userinfo=r,this.changetype=!0,this.viewIcon=!0}register(t){var r=this;return(0,Me.Z)(function*(){console.log(t.value),console.log(t.value.email,t.value.password),r.userinfo.signup(t.value.email,t.value.password),r.userinfo.saveData(t)})()}login(){this.router.navigate(["/login"])}showPassword(){this.changetype=!this.changetype,this.viewIcon=!this.viewIcon}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(pi.F0),g.Y36(Tm))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-user-registration"]],decls:28,vars:3,consts:[[1,"flex","w-full","h-screen"],[1,"mx-auto","mt-20"],[1,"border-4","border-golden","max-h-fit","w-96","rounded-3xl"],["src","././assets/img/navlogo.png",1,"p-6","rounded-full"],[3,"ngSubmit"],["form","ngForm"],[1,"flex","flex-col","items-center","justify-center","mt-2"],[1,"mx-auto","my-2"],["for","email",1,"text-gray-800"],["type","email","id","email","name","email","ngModel","",1,"ml-2","border-2","rounded-md","border-golden","hover:border-amber-400","outline-none"],[1,"flex","flex-row","mx-auto","my-3"],["for","password",1,"text-gray-800"],[1,"flex","flex-row","ml-2","border-2","rounded-md","border-golden"],["id","password","name","password","ngModel","",1,"outline-none",3,"type"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","w-6 h-6 text-golden",3,"click",4,"ngIf"],[1,"flex","flex-row","w-full","my-5","h-fit"],[1,"w-full","ml-4","text-blue-600","basis-9/12"],[1,"cursor-pointer",3,"click"],[1,"mx-10"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-center","text-white","rounded-lg","bg-golden","focus:ring-amber-300","basis-3/12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-golden",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(r,s){if(1&r){const u=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),g._UZ(4,"img",3),g.qZA(),g.TgZ(5,"form",4,5),g.NdJ("ngSubmit",function(){g.CHM(u);const m=g.MAs(6);return g.KtG(s.register(m))}),g.TgZ(7,"div",6)(8,"div",7)(9,"label",8),g._uU(10,"Email :"),g.qZA(),g._UZ(11,"input",9),g.qZA(),g.TgZ(12,"div",10)(13,"label",11),g._uU(14,"Password :"),g.qZA(),g.TgZ(15,"div",12)(16,"div"),g._UZ(17,"input",13),g.qZA(),g.TgZ(18,"div"),g.YNc(19,Ux,3,0,"svg",14),g.YNc(20,Bx,2,0,"svg",14),g.qZA()()(),g.TgZ(21,"div",15)(22,"div",16)(23,"label",17),g.NdJ("click",function(){return s.login()}),g._uU(24,"Already have an account?"),g.qZA()(),g.TgZ(25,"div",18)(26,"button",19),g._uU(27,"register"),g.qZA()()()()()()()()}2&r&&(g.xp6(17),g.Q6J("type",s.changetype?"password":"text"),g.xp6(2),g.Q6J("ngIf",1==s.viewIcon),g.xp6(1),g.Q6J("ngIf",0==s.viewIcon))},dependencies:[K.O5,Uo,Fe,St,Dn,vo,Ir]})}return n})();function Hx(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"div",17),g._UZ(2,"img",18),g.TgZ(3,"div",19)(4,"h3"),g._uU(5),g.qZA(),g.TgZ(6,"p"),g._uU(7),g.ALo(8,"currency"),g.qZA(),g.TgZ(9,"div",20)(10,"button",21),g.NdJ("click",function(){const u=g.CHM(t).index,c=g.oxw(2);return g.KtG(c.decreaseQuantity(u))}),g._uU(11,"-"),g.qZA(),g.TgZ(12,"span",22),g._uU(13),g.qZA(),g.TgZ(14,"button",21),g.NdJ("click",function(){const u=g.CHM(t).index,c=g.oxw(2);return g.KtG(c.increaseQuantity(u))}),g._uU(15,"+"),g.qZA()(),g.TgZ(16,"div",23)(17,"button",24),g.NdJ("click",function(){const u=g.CHM(t).$implicit,c=g.oxw(2);return g.KtG(c.removeItemFromCart(u))}),g._uU(18,"Remove"),g.qZA()()()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(3),g.Oqu(t.name),g.xp6(2),g.hij("Price: ",g.xi3(8,5,t.totalPrice,"INR"),""),g.xp6(6),g.Oqu(t.quantity)}}function $x(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"div",4)(2,"h2",5),g._uU(3,"Your Cart"),g.qZA()(),g.TgZ(4,"div",6)(5,"div",7),g.YNc(6,Hx,19,8,"div",8),g.qZA(),g.TgZ(7,"div",9)(8,"div",10)(9,"h2",11),g._uU(10,"Summary"),g.qZA(),g.TgZ(11,"div",12)(12,"span"),g._uU(13,"Subtotal"),g.qZA(),g.TgZ(14,"span"),g._uU(15),g.ALo(16,"currency"),g.qZA()(),g.TgZ(17,"div",12)(18,"span"),g._uU(19,"Taxes (10%)"),g.qZA(),g.TgZ(20,"span"),g._uU(21),g.ALo(22,"currency"),g.qZA()(),g.TgZ(23,"div",12)(24,"span"),g._uU(25,"Shipping Charges"),g.qZA(),g.TgZ(26,"span"),g._uU(27),g.ALo(28,"currency"),g.qZA()(),g._UZ(29,"hr",13),g.TgZ(30,"div",12)(31,"span",14),g._uU(32,"Total"),g.qZA(),g.TgZ(33,"span",14),g._uU(34),g.ALo(35,"currency"),g.qZA()(),g.TgZ(36,"button",15),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.Checkout())}),g._uU(37,"Checkout"),g.qZA(),g.TgZ(38,"button",16),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.clearCart())}),g._uU(39,"Clear Cart"),g.qZA()()()(),g._UZ(40,"div"),g.qZA()}if(2&n){const t=g.oxw();g.xp6(6),g.Q6J("ngForOf",t.cartItems),g.xp6(9),g.Oqu(g.xi3(16,5,(t.overallTotal-20)/1.1,"INR")),g.xp6(6),g.Oqu(g.xi3(22,8,(t.overallTotal-20)/11,"INR")),g.xp6(6),g.Oqu(g.xi3(28,11,20,"INR")),g.xp6(7),g.Oqu(g.xi3(35,14,t.overallTotal,"INR"))}}function Gx(n,e){1&n&&(g.TgZ(0,"div",25)(1,"div",26)(2,"h1",27),g._uU(3,"Your cart is empty."),g.qZA(),g.TgZ(4,"div",28)(5,"a",29),g._uU(6,"Go to home page"),g.qZA()()()())}let zx=(()=>{class n{constructor(t,r){this.cartService=t,this.router=r,this.cartItems=[],this.overallTotal=0}ngOnInit(){this.cartService.getCartItems().subscribe(t=>{this.cartItems=t}),this.calculateOverallTotal()}increaseQuantity(t){this.cartItems[t].quantity++,this.cartItems[t].totalPrice=this.cartItems[t].quantity*this.cartItems[t].price,this.calculateOverallTotal()}decreaseQuantity(t){this.cartItems[t].quantity>1&&(this.cartItems[t].quantity--,this.cartItems[t].totalPrice=this.cartItems[t].quantity*this.cartItems[t].price,this.calculateOverallTotal())}removeItemFromCart(t){this.cartService.removeFromCart(t),this.calculateOverallTotal()}clearCart(){this.cartService.clearCart(),this.cartItems=[]}calculateOverallTotal(){const t=this.cartItems.reduce((u,c)=>u+c.price*c.quantity,0);this.overallTotal=t+.1*t+20}Checkout(){this.router.navigate(["/checkout"])}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(eu.N),g.Y36(pi.F0))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-cart"]],decls:5,vars:2,consts:[[1,"w-screen","h-screen","bg-gray-400","bg-opacity-50"],[1,"w-full","bg-slate-400","h-fit"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"flex","justify-between","w-full","h-10","p-6","mx-3","my-auto"],[1,"font-serif","text-3xl"],[1,"flex","items-start","justify-start","w-full"],[1,"flex","flex-wrap","items-start","justify-start","w-3/5","gap-5","p-5","mx-auto","h-fit"],[4,"ngFor","ngForOf"],[1,"md:w-1/4","m-5"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"my-2"],[1,"font-semibold"],[1,"bg-blue-500","text-white","py-2","px-4","rounded-lg","mt-4","w-full",3,"click"],[1,"w-full","h-8","mt-2","text-white","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"flex","justify-center","items-center"],[1,"w-8","h-8","bg-blue-600","text-white","rounded-xl",3,"click"],[1,"mx-2"],[1,"mt-2"],[1,"w-full","h-8","text-white","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"],[1,"h-screen","bg-slate-300"],[1,"p-10","text-center","py-48"],[1,"font-bold","text-3xl"],[1,"pt-10"],["href","#",1,"text-blue-700","text-xl"]],template:function(r,s){if(1&r&&(g.TgZ(0,"div",0)(1,"div",1),g.YNc(2,$x,41,17,"div",2),g.qZA()(),g.YNc(3,Gx,7,0,"ng-template",null,3,g.W1O)),2&r){const u=g.MAs(4);g.xp6(2),g.Q6J("ngIf",s.cartItems.length>0)("ngIfElse",u)}},dependencies:[K.sg,K.O5,K.H9]})}return n})();function Wx(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",10)(1,"button",17),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.Login())}),g._uU(2,"LOGIN"),g.qZA()()}}function dD(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",18)(1,"button",19),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.menu())}),g.O4$(),g.TgZ(2,"svg",20),g._UZ(3,"path",21),g.qZA()(),g.kcU(),g.TgZ(4,"div",22)(5,"div",23)(6,"button",24),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.profile())}),g._uU(7,"PROFILE"),g.qZA(),g.TgZ(8,"button",24),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.Logout())}),g._uU(9,"LOGOUT"),g.qZA()()()()}if(2&n){const t=g.oxw();g.xp6(4),g.Q6J("hidden",t.visible)}}let f0=(()=>{class n{constructor(t,r,s){this.router=t,this.userinfo=r,this.product=s,this.isLogout=new g.vpe,this.isAuthorized="true"===localStorage.getItem("IsAuthorized"),this.visible=!0}Login(){this.router.navigate(["/login"])}profile(){this.router.navigate(["/dashboard/profile"]),this.visible=!this.visible}logout(){localStorage.removeItem("IsAuthorized"),localStorage.removeItem("IsAdmin"),window.location.reload(),this.router.navigate(["/dashboard/home"])}cart(){localStorage.getItem("IsAuthorized")?this.router.navigate(["/cart"]):(alert("Login to continue ..."),this.router.navigate(["/login"]))}menu(){this.visible=!this.visible}Logout(){this.userinfo.logout(),localStorage.removeItem("IsAuthorized"),localStorage.removeItem("IsAdmin"),window.location.reload(),this.router.navigate(["/dashboard/home"])}searchSubmit(t){this.router.navigate(["/dashboard/search/",`${t}`]),this.product.searchProduct(t)}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(pi.F0),g.Y36(Tm),g.Y36(_a.M))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:21,vars:2,consts:[[1,"flex","flex-row","h-16","gap-2","py-2","mx-2","mt-2","bg-gray-500"],["href","#","routerLinkActive","dashboard"],["src","./assets/img/navlogo.png","alt","logo",1,"h-full","max-w-full","mx-1"],[1,"w-full","h-10"],[1,"h-10","flex","flex-row-reverse"],[1,"absolute","mt-2","mr-3",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-h-6","h-6","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","search","placeholder","Search products ...",1,"block","w-full","pl-2","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500","outline-none"],["searchInput",""],[1,"mt-2"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-8","h-8","mx-3","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"],[1,"mx-1"],["class","mt-2",4,"ngIf"],["class","mx-2 mt-2",4,"ngIf"],["type","button",1,"px-4","py-2","mr-3","text-sm","font-medium","text-center","text-white","bg-blue-700","rounded-lg","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","md:mr-0","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"mx-2","mt-2"],["type","button",1,"px-4","py-2","mr-3","text-sm","font-medium","text-center","md:mr-0",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],[1,"absolute","h-fit","w-fit","top-6","right-28",3,"hidden"],[1,"absolute","w-20","bg-white","border-2","border-black","rounded-md"],[1,"w-20","h-10","border-2","border-black","rounded-sm",3,"click"]],template:function(r,s){if(1&r){const u=g.EpF();g.TgZ(0,"nav")(1,"div",0)(2,"div")(3,"a",1),g._UZ(4,"img",2),g.qZA()(),g.TgZ(5,"div",3)(6,"div",4)(7,"button",5),g.NdJ("click",function(){g.CHM(u);const m=g.MAs(11);return g.KtG(s.searchSubmit(m.value))}),g.O4$(),g.TgZ(8,"svg",6),g._UZ(9,"path",7),g.qZA()(),g.kcU(),g._UZ(10,"input",8,9),g.qZA()(),g.TgZ(12,"div",10)(13,"button",11),g.NdJ("click",function(){return s.cart()}),g.O4$(),g.TgZ(14,"svg",12),g._UZ(15,"path",13),g.qZA()()(),g.kcU(),g.TgZ(16,"div",14)(17,"div"),g.YNc(18,Wx,3,0,"div",15),g.qZA(),g.TgZ(19,"div"),g.YNc(20,dD,10,1,"div",16),g.qZA()()()()}2&r&&(g.xp6(18),g.Q6J("ngIf",!s.isAuthorized),g.xp6(2),g.Q6J("ngIf",s.isAuthorized))},dependencies:[K.O5,pi.Od]})}return n})(),hD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-dashboard"]],decls:5,vars:0,consts:[[1,"h-[100vh]"],[1,"h-full","pt-1"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0)(1,"div"),g._UZ(2,"app-header"),g.qZA(),g.TgZ(3,"div",1),g._UZ(4,"router-outlet"),g.qZA()())},dependencies:[pi.lC,f0]})}return n})(),KS=(()=>{class n{constructor(t,r){this.cartService=t,this.router=r,this.cartItems=[],this.overallTotal=0}ngOnInit(){this.cartService.getCartItems().subscribe(t=>{this.cartItems=t}),this.calculateOverallTotal()}calculateOverallTotal(){const t=this.cartItems.reduce((u,c)=>u+c.price*c.quantity,0);this.overallTotal=t+.1*t+20}clearCart(){this.cartService.clearCart(),this.cartItems=[]}placeOrder(){this.router.navigate(["dashboard/home"]),this.clearCart()}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(eu.N),g.Y36(pi.F0))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-checkout"]],decls:91,vars:20,consts:[[1,"bg-slate-600","w-full","min-h-screen","bg-opacity-70"],[1,"text-center","text-3xl","pt-2","font-bold"],[1,"text-5xl"],[1,"flex","h-fit","p-10"],[1,"w-full","flex","flex-wrap","items-start","justify-between"],[1,"w-full","md:w-1/2","h-fit"],[1,"p-3","w-full"],[1,"text-xl","font-semibold"],[1,"m-5"],[1,"bg-white","w-fit","rounded-lg","shadow-md","p-6"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","justify-between","mb-2"],[1,"my-2"],[1,"font-semibold"],[1,"w-full","p-3"],[1,"m-3","flex","w-full"],[1,"w-full"],["for","name",1,"mt-3","ml-2","text-xl","w-full","font-medium"],["type","text","id","name","name","name","required","",1,"ml-10","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","address",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","address","name","address","rows","1","required","",1,"ml-5","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","city",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","city","name","city","required","",1,"ml-14","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","pincode",1,"mt-3","ml-2","text-xl","font-medium"],["type","text","id","pincode","name","pincode","required","",1,"ml-3","mt-3","w-fit","border-2","rounded-lg","border-black"],["for","email",1,"mt-3","ml-2","text-xl","font-medium"],["type","email","id","email","name","email","required","",1,"ml-10","mt-3","w-fit","border-2","rounded-lg","border-black"],[1,"w-full","h-fit"],[1,"p-4","h-48","w-80","bg-green-700","m-2","rounded-xl","border-2","border-black"],[1,"mt-2","w-full"],["for","cardnumber"],["type","number","id","cardnumber","name","cardnumber","maxlength","16","required","",1,"ml-2","w-40","border-2","border-black","rounded-lg"],[1,"mt-2"],["for","expdate"],["type","number","id","expdate","name","expmonth","maxlength","2","required","",1,"w-8","ml-2","border-2","border-black","rounded-lg"],["type","number","name","expyear","id","expdate","maxlength","4","required","",1,"w-16","ml-2","border-2","border-black","rounded-lg"],["for","cvv"],["type","text","id","cvv","name","cvv","required","",1,"ml-2","w-16","border-2","border-black","rounded-lg"],[1,"flex","ml-5","my-12","w-full"],[1,"font-semibold","ml-3"],[1,"ml-10","bg-blue-500","text-white","px-4","py-3","rounded-lg","w-40","h-12",3,"click"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"h1",2),g._uU(4,"CHECKOUT"),g.qZA()(),g.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h2",7),g._uU(10,"Order Summary"),g.qZA(),g.TgZ(11,"div")(12,"div",8)(13,"div",9)(14,"h2",10),g._uU(15,"Summary"),g.qZA(),g.TgZ(16,"div",11)(17,"span"),g._uU(18,"Subtotal"),g.qZA(),g.TgZ(19,"span"),g._uU(20),g.ALo(21,"currency"),g.qZA()(),g.TgZ(22,"div",11)(23,"span"),g._uU(24,"Taxes (10%)"),g.qZA(),g.TgZ(25,"span"),g._uU(26),g.ALo(27,"currency"),g.qZA()(),g.TgZ(28,"div",11)(29,"span"),g._uU(30,"Shipping Charges"),g.qZA(),g.TgZ(31,"span"),g._uU(32),g.ALo(33,"currency"),g.qZA()(),g._UZ(34,"hr",12),g.TgZ(35,"div",11)(36,"span",13),g._uU(37,"Total"),g.qZA(),g.TgZ(38,"span",13),g._uU(39),g.ALo(40,"currency"),g.qZA()()()()()()(),g.TgZ(41,"div",5)(42,"div",14)(43,"h2",7),g._uU(44,"Shipping Information"),g.qZA(),g.TgZ(45,"form",15)(46,"div",16)(47,"div")(48,"label",17),g._uU(49,"Name :"),g.qZA(),g._UZ(50,"input",18),g.qZA(),g.TgZ(51,"div")(52,"label",19),g._uU(53,"Address :"),g.qZA(),g._UZ(54,"textarea",20),g.qZA(),g.TgZ(55,"div")(56,"label",21),g._uU(57,"City :"),g.qZA(),g._UZ(58,"input",22),g.qZA(),g.TgZ(59,"div")(60,"label",23),g._uU(61,"PIN Code :"),g.qZA(),g._UZ(62,"input",24),g.qZA(),g.TgZ(63,"div")(64,"label",25),g._uU(65,"Email :"),g.qZA(),g._UZ(66,"input",26),g.qZA()()()()(),g.TgZ(67,"div",27)(68,"form",28)(69,"div",29)(70,"label",30),g._uU(71,"Card Number :"),g.qZA(),g._UZ(72,"input",31),g.qZA(),g.TgZ(73,"div",32)(74,"label",33),g._uU(75,"Expiration Date :"),g.qZA(),g._UZ(76,"input",34),g._uU(77," / "),g._UZ(78,"input",35),g.qZA(),g.TgZ(79,"div",32)(80,"label",36),g._uU(81,"CVV :"),g.qZA(),g._UZ(82,"input",37),g.qZA()(),g.TgZ(83,"div",38)(84,"h4",13),g._uU(85,"Total :"),g.qZA(),g.TgZ(86,"h4",39),g._uU(87),g.ALo(88,"currency"),g.qZA(),g.TgZ(89,"button",40),g.NdJ("click",function(){return s.placeOrder()}),g._uU(90,"Place Order"),g.qZA()()()()()()()),2&r&&(g.xp6(20),g.Oqu(g.xi3(21,5,(s.overallTotal-20)/1.1,"INR")),g.xp6(6),g.Oqu(g.xi3(27,8,(s.overallTotal-20)/11,"INR")),g.xp6(6),g.Oqu(g.xi3(33,11,20,"INR")),g.xp6(7),g.Oqu(g.xi3(40,14,s.overallTotal,"INR")),g.xp6(48),g.Oqu(g.xi3(88,17,s.overallTotal,"INR")))},dependencies:[Uo,Dn,Ir,K.H9]})}return n})();function Yy(n,e){if(1&n&&(g.TgZ(0,"div")(1,"div",2),g._UZ(2,"img",3),g.qZA(),g.TgZ(3,"div",4)(4,"h2"),g._uU(5),g.qZA(),g._uU(6," Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque rem expedita aut quisquam odit dolore officiis quis laborum alias, quidem suscipit sint, ipsum rerum excepturi eius cum quia nihil dolor! "),g.TgZ(7,"p"),g._uU(8),g.qZA(),g.TgZ(9,"button",5),g._uU(10,"Add to Cart"),g.qZA()()()),2&n){const t=e.$implicit;g.xp6(2),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(3),g.Oqu(t.name),g.xp6(3),g.hij("Price: \u20b9",t.price,"")}}let YS=(()=>{class n{constructor(t,r){this.route=t,this.productService=r,this.products=[],this.productService.getDetail().subscribe(s=>{this.products=s})}ngOnInit(){this.products=this.route.snapshot.data.product}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(pi.gz),g.Y36(_a.M))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"flex","w-full","mt-5"],[4,"ngFor","ngForOf"],[1,"p-10"],[3,"src","alt"],[1,"p-2","w-96","mt-12"],[1,"w-56","mt-10","h-8","text-gray-70","0","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0),g.YNc(1,Yy,11,4,"div",1),g.qZA()),2&r&&(g.xp6(1),g.Q6J("ngForOf",s.products))},dependencies:[K.sg]})}return n})(),qx=(()=>{class n{onSubmit(){throw new Error("Method not implemented.")}constructor(t){this.userInfo=t,this.firstName="jacob",this.lastName="jabakumar S",this.Email="jacobjabakumar2002@gmail.com",this.phoneNumber="7305283377",this.Address="55/12, chinna colony, vanagram road,athipet",this.profileForm=new xt({}),this.userId="",this.NAME="Jacob",this.isDisabled=!0,this.enable=!0}ngOnInit(){this.getUser(),this.user=localStorage.getItem("users")}getUser(){this.userInfo.currentUserProfile$.subscribe(t=>{})}updateUser(t,r){this.userInfo.updateData(t)}deleteUser(t){this.userInfo.deleteData(t)}enableButton(){this.isDisabled=!this.isDisabled}enableSave(){this.enable=this.enable}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(Tm))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-profile"]],decls:37,vars:21,consts:[[1,"h-[100vh]","flex","w-full","bg-gray-600","bg-opacity-30"],[1,"h-fit","p-4","w-fit","bg-white","border-slate-700","rounded-3xl","items-stretch","justify-between","mx-auto","border-4","mt-28"],[1,"h-20","w-fit","flex","mt-8","mx-32"],["for","profile_image","src","../../assets/img/sample.png","alt","profile_image",1,"absolute","h-28","w-28","rounded-full","border-4","border-zinc-600","mx-auto"],["type","file","id","profile_image",1,"absolute","pt-20","pl-2","h-28","opacity-70","w-28","border-4","rounded-full","border-zinc-600"],[1,"w-full","h-fit","flex","flex-row","mt-5","p-5"],[1,"w-full","h-fit",3,"ngSubmit"],[1,"w-full","flex","flex-row","items-stretch","justify-between"],[1,"my-2","font-sans","font-bold","w-fit"],["type","text",1,"mx-2","my-2","font-sans","font-bold",3,"disabled","value"],[1,"my-2","font-sans","font-bold"],[1,"h-10","w-full","flex","items-stretch","justify-between"],[1,"mx-auto","py-2","px-2","bg-blue-500","rounded-lg","font-semibold","text-lg","text-white",3,"click"],[1,"mx-auto","py-2","px-2","bg-blue-500","rounded-lg","font-semibold","text-lg","text-white","cursor-not-allowed",3,"disabled"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g._UZ(3,"img",3)(4,"input",4),g.qZA(),g.TgZ(5,"div",5)(6,"form",6),g.NdJ("ngSubmit",function(){return s.onSubmit()}),g.TgZ(7,"div",7)(8,"h5",8),g._uU(9,"FirstName :"),g.qZA(),g._UZ(10,"input",9),g.ALo(11,"uppercase"),g.qZA(),g.TgZ(12,"div",7)(13,"h5",10),g._uU(14,"LastName :"),g.qZA(),g._UZ(15,"input",9),g.ALo(16,"uppercase"),g.qZA(),g.TgZ(17,"div",7)(18,"h5",10),g._uU(19,"Email :"),g.qZA(),g._UZ(20,"input",9),g.ALo(21,"lowercase"),g.qZA(),g.TgZ(22,"div",7)(23,"h5",10),g._uU(24,"PhoneNumber :"),g.qZA(),g._UZ(25,"input",9),g.ALo(26,"uppercase"),g.qZA(),g.TgZ(27,"div",7)(28,"h5",10),g._uU(29,"Address :"),g.qZA(),g._UZ(30,"input",9),g.ALo(31,"lowercase"),g.qZA()()(),g.TgZ(32,"div",11)(33,"button",12),g.NdJ("click",function(){return s.enableButton()}),g._uU(34,"EDIT PROFILE"),g.qZA(),g.TgZ(35,"button",13),g._uU(36,"SAVE"),g.qZA()()()()),2&r&&(g.xp6(10),g.s9C("value",g.lcZ(11,11,s.firstName)),g.Q6J("disabled",s.isDisabled),g.xp6(5),g.s9C("value",g.lcZ(16,13,s.lastName)),g.Q6J("disabled",s.isDisabled),g.xp6(5),g.s9C("value",g.lcZ(21,15,s.Email)),g.Q6J("disabled",s.isDisabled),g.xp6(5),g.s9C("value",g.lcZ(26,17,s.phoneNumber)),g.Q6J("disabled",s.isDisabled),g.xp6(5),g.s9C("value",g.lcZ(31,19,s.Address)),g.Q6J("disabled",s.isDisabled),g.xp6(5),g.Q6J("disabled",!0))},dependencies:[Uo,Dn,Ir,K.gd,K.i8]})}return n})();function Zx(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"div",2)(2,"div",3),g._UZ(3,"img",4),g.TgZ(4,"div",5),g._uU(5),g._UZ(6,"br"),g._uU(7),g.ALo(8,"currency"),g._UZ(9,"br"),g.TgZ(10,"button",6),g.NdJ("click",function(){const u=g.CHM(t).$implicit,c=g.oxw();return g.KtG(c.addToCart(u))}),g._uU(11," Add to Cart "),g.qZA()()()()()}if(2&n){const t=e.$implicit;g.xp6(3),g.s9C("alt",t.name),g.Q6J("src",t.image,g.LSH),g.xp6(2),g.hij(" ",t.name,""),g.xp6(2),g.hij(" ",g.xi3(8,4,t.price,"INR"),"")}}const fD=[{path:"dashboard",component:hD,children:[{path:"home",component:Yu},{path:"search/:query",component:(()=>{class n{constructor(t,r,s,u){this.router=t,this.cartService=r,this.productService=s,this.activeRoute=u,this.shirts=[],this.mobiles=[],this.laptop=[]}addToCart(t){localStorage.getItem("IsAuthorized")?(this.cartService.addToCart(t),alert("Item added to Cart..")):(alert("Login to continue ..."),this.router.navigate(["/login"]))}ngOnInit(){let t=this.activeRoute.snapshot.paramMap.get("query");t&&this.productService.searchProduct(t).subscribe(r=>{this.searchResult=r,console.warn(r)})}static#e=this.\u0275fac=function(r){return new(r||n)(g.Y36(pi.F0),g.Y36(eu.N),g.Y36(_a.M),g.Y36(pi.gz))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-search"]],decls:2,vars:1,consts:[[1,"flex","flex-wrap","items-stretch","justify-start","w-full","gap-5","p-5","mx-10","h-fit"],[4,"ngFor","ngForOf"],[1,"product-card"],[1,"p-3","bg-white","rounded-2xl"],[1,"rounded-lg","w-52","h-60",3,"src","alt"],[1,"mt-2","text-center"],[1,"w-full","h-8","text-gray-700","bg-blue-600","rounded-lg","hover:text-blue-600","hover:bg-gray-700",3,"click"]],template:function(r,s){1&r&&(g.TgZ(0,"div",0),g.YNc(1,Zx,12,7,"div",1),g.qZA()),2&r&&(g.xp6(1),g.Q6J("ngForOf",s.searchResult))},dependencies:[K.sg,K.H9]})}return n})()},{path:"",redirectTo:"home",pathMatch:"full"},{path:"details",component:YS},{path:"profile",component:qx},{path:"products",loadChildren:()=>B.e(864).then(B.bind(B,864)).then(n=>n.ProductsModule)}]},{path:"login",component:Vx},{path:"register",component:jx},{path:"cart",component:zx},{path:"checkout",component:KS},{path:"",redirectTo:"dashboard",pathMatch:"full"}];let QS=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[pi.Bz.forRoot(fD),pi.Bz]})}return n})(),JS=(()=>{class n{constructor(){this.title="Angular-e-commerce-site"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){1&r&&g._UZ(0,"router-outlet")},dependencies:[pi.lC]})}return n})();const eR="firebasestorage.googleapis.com",pD="storageBucket";class Gr extends q.ZR{constructor(e,t,r=0){super(p0(e),`Firebase Storage: ${t} (${p0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return p0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var kr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(kr||{});function p0(n){return"storage/"+n}function g0(){return new Gr(kr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function gD(){return new Gr(kr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mD(){return new Gr(kr.CANCELED,"User canceled the upload/download.")}function _D(){return new Gr(kr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kc(n){return new Gr(kr.INVALID_ARGUMENT,n)}function vD(){return new Gr(kr.APP_DELETED,"The Firebase app was deleted.")}function ED(n){return new Gr(kr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ap(n,e){return new Gr(kr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function up(n){throw new Gr(kr.INTERNAL_ERROR,"Internal error: "+n)}class $s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$s.makeFromUrl(e,t)}catch{return new $s(e,"")}if(""===r.path)return r;throw function aR(n){return new Gr(kr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function C(Ct){Ct.path_=decodeURIComponent(Ct.path)}const k=t.replace(/[.]/g,"\\."),Qe=[{regex:m,indices:{bucket:1,path:3},postModify:function u(Ct){"/"===Ct.path.charAt(Ct.path.length-1)&&(Ct.path_=Ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${k}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===eR?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let Ct=0;Ct<Qe.length;Ct++){const Xt=Qe[Ct],En=Xt.regex.exec(e);if(En){let go=En[Xt.indices.path];go||(go=""),r=new $s(En[Xt.indices.bucket],go),Xt.postModify(r);break}}if(null==r)throw function oR(n){return new Gr(kr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class lo{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lp(n){return"string"==typeof n||n instanceof String}function Ll(n){return Jy()&&n instanceof Blob}function Jy(){return typeof Blob<"u"&&!(0,q.UG)()}function Dm(n,e,t,r){if(r<e)throw Kc(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Kc(`Invalid value for '${n}'. Expected ${t} or less.`)}function ja(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function CD(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Am=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Am||{});function _0(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class fR{constructor(e,t,r,s,u,c,m,_,C,P,k,G=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=_,this.timeout_=C,this.progressCallback_=P,this.connectionFactory_=k,this.retry=G,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((J,he)=>{this.resolve_=J,this.reject_=he,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(m,m.getResponse());!function dR(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==m){const _=g0();_.serverResponse=m.getErrorText(),c(this.errorCallback_?this.errorCallback_(m,_):_)}else c(s.canceled?this.appDelete_?vD():mD():gD())};this.canceled_?t(0,new Xy(!1,null,!0)):this.backoffId_=function ID(n,e,t){let r=1,s=null,u=null,c=!1,m=0;function _(){return 2===m}let C=!1;function P(...Ne){C||(C=!0,e.apply(null,Ne))}function k(Ne){s=setTimeout(()=>{s=null,n(J,_())},Ne)}function G(){u&&clearTimeout(u)}function J(Ne,...ht){if(C)return void G();if(Ne)return G(),void P.call(null,Ne,...ht);if(_()||c)return G(),void P.call(null,Ne,...ht);let Qe;r<64&&(r*=2),1===m?(m=2,Qe=0):Qe=1e3*(r+Math.random()),k(Qe)}let he=!1;function Re(Ne){he||(he=!0,G(),!C&&(null!==s?(Ne||(m=2),clearTimeout(s),k(0)):Ne||(m=1)))}return k(0),u=setTimeout(()=>{c=!0,Re(!0)},t),Re}((r,s)=>{if(s)return void r(!1,new Xy(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===Am.NO_ERROR,_=u.getStatus();if(!m||_0(_,this.additionalRetryCodes_)&&this.retry){const P=u.getErrorCode()===Am.ABORT;return void r(!1,new Xy(!1,null,P))}const C=-1!==this.successCodes_.indexOf(_);r(!0,new Xy(C,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wD(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Xy{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function bD(...n){const e=function mR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Jy())return new Blob(n);throw new Gr(kr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const co={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ev{constructor(e,t){this.data=e,this.contentType=t||null}}function v0(n,e){switch(n){case co.RAW:return new ev(E0(e));case co.BASE64:case co.BASE64URL:return new ev(uh(n,e));case co.DATA_URL:return new ev(function RD(n){const e=new bm(n);return e.base64?uh(co.BASE64,e.rest):function SD(n){let e;try{e=decodeURIComponent(n)}catch{throw ap(co.DATA_URL,"Malformed data URL.")}return E0(e)}(e.rest)}(e),function PD(n){return new bm(n).contentType}(e))}throw g0()}function E0(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function uh(n,e){switch(n){case co.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw ap(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case co.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw ap(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function y0(n){if(typeof atob>"u")throw function yD(n){return new Gr(kr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:ap(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class bm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ap(co.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function _R(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Lu{constructor(e,t){let r=0,s="";Ll(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ll(this.data_)){const s=function Qx(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Lu(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Lu(r,!0)}}static getBlob(...e){if(Jy()){const t=e.map(r=>r instanceof Lu?r.data_:r);return new Lu(bD.apply(null,t))}{const t=e.map(c=>lp(c)?v0(co.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)s[u++]=c[m]}),new Lu(s,!0)}}uploadData(){return this.data_}}function xD(n){let e;try{e=JSON.parse(n)}catch{return null}return function hR(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function ND(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Jx(n,e){return e}class ho{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Jx}}let I0=null;function Sm(){if(I0)return I0;const n=[];n.push(new ho("bucket")),n.push(new ho("generation")),n.push(new ho("metageneration")),n.push(new ho("name","fullPath",!0));const t=new ho("name");t.xform=function e(u,c){return function OD(n){return!lp(n)||n.length<2?n:ND(n)}(c)},n.push(t);const s=new ho("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new ho("timeCreated")),n.push(new ho("updated")),n.push(new ho("md5Hash",null,!0)),n.push(new ho("cacheControl",null,!0)),n.push(new ho("contentDisposition",null,!0)),n.push(new ho("contentEncoding",null,!0)),n.push(new ho("contentLanguage",null,!0)),n.push(new ho("contentType",null,!0)),n.push(new ho("metadata","customMetadata",!0)),I0=n,I0}function IR(n,e,t){const r=xD(e);return null===r?null:function ER(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function vR(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new $s(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function kD(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const wR="prefixes",TR="items";class Fu{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vu(n){if(!n)throw g0()}function Rm(n,e){return function t(r,s){const u=IR(n,s,e);return Vu(null!==u),u}}function Yc(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function iR(){return new Gr(kr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function rR(){return new Gr(kr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function m0(n){return new Gr(kr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function sR(n){return new Gr(kr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function ch(n){const e=Yc(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function nR(n){return new Gr(kr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function FD(n,e,t){const s=ja(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new Fu(s,"GET",Rm(n,t),c);return m.errorHandler=ch(e),m}function w0(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=ja(e.bucketOnlyServerUrl(),n.host,n._protocol),C=n.maxOperationRetryTime,P=new Fu(m,"GET",function lh(n,e){return function t(r,s){const u=function tv(n,e,t){const r=xD(t);return null===r?null:function CR(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[wR])for(const s of t[wR]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new $s(e,u));r.prefixes.push(c)}if(t[TR])for(const s of t[TR]){const u=n._makeStorageReference(new $s(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return Vu(null!==u),u}}(n,e.bucket),C);return P.urlParams=u,P.errorHandler=Yc(e),P}function T0(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function nM(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class iv{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function C0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Vu(!1)}return Vu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const AR={STATE_CHANGED:"state_changed"},Gs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sv(n){switch(n){case"running":case"pausing":case"canceling":return Gs.RUNNING;case"paused":return Gs.PAUSED;case"success":return Gs.SUCCESS;case"canceled":return Gs.CANCELED;default:return Gs.ERROR}}class A0{constructor(e,t,r){if(function TD(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Pm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let b0=null;class S0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Am.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Am.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Am.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw up("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw up("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw up("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw up("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw up("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class bR extends S0{initXhr(){this.xhr_.responseType="text"}}function Ha(){return b0?b0():new bR}class jD{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Sm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(kr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(_0(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=gD()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(kr.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function DR(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=T0(e,r,s),m={name:c.fullPath},_=ja(u,n.host,n._protocol),P={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},k=kD(c,t),he=new Fu(_,"POST",function J(Re){let Ne;C0(Re);try{Ne=Re.getResponseHeader("X-Goog-Upload-URL")}catch{Vu(!1)}return Vu(lp(Ne)),Ne},n.maxUploadRetryTime);return he.urlParams=m,he.headers=P,he.body=k,he.errorHandler=Yc(e),he}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ha,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function UD(n,e,t,r){const _=new Fu(t,"POST",function u(C){const P=C0(C,["active","final"]);let k=null;try{k=C.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vu(!1)}k||Vu(!1);const G=Number(k);return Vu(!isNaN(G)),new iv(G,r.size(),"final"===P)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Yc(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Ha,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new iv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function BD(n,e,t,r,s,u,c,m){const _=new iv(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function lR(){return new Gr(kr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const C=_.total-_.current;let P=C;s>0&&(P=Math.min(P,s));const k=_.current;let J="";J=0===P?"finalize":C===P?"upload, finalize":"upload";const he={"X-Goog-Upload-Command":J,"X-Goog-Upload-Offset":`${_.current}`},Re=r.slice(k,k+P);if(null===Re)throw _D();const Qe=new Fu(t,"POST",function Ne(Ct,Xt){const En=C0(Ct,["active","final"]),ei=_.current+P,go=r.size();let ow;return ow="final"===En?Rm(e,u)(Ct,Xt):null,new iv(ei,go,"final"===En,ow)},e.maxUploadRetryTime);return Qe.headers=he,Qe.body=Re.uploadData(),Qe.progressCallback=m||null,Qe.errorHandler=Yc(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const m=this._ref.storage._makeRequest(c,Ha,s,u,!1);this._request=m,m.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=FD(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ha,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function VD(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function m(){let Qe="";for(let Ct=0;Ct<2;Ct++)Qe+=Math.random().toString().slice(2);return Qe}();c["Content-Type"]="multipart/related; boundary="+_;const C=T0(e,r,s),P=kD(C,t),J=Lu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+P+"\r\n--"+_+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===J)throw _D();const he={name:C.fullPath},Re=ja(u,n.host,n._protocol),ht=n.maxUploadRetryTime,mt=new Fu(Re,"POST",Rm(n,t),ht);return mt.urlParams=he,mt.headers=c,mt.body=J.uploadData(),mt.errorHandler=Yc(e),mt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ha,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mD(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=sv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new A0(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(sv(this._state)){case Gs.SUCCESS:Pm(this._resolve.bind(null,this.snapshot))();break;case Gs.CANCELED:case Gs.ERROR:Pm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(sv(this._state)){case Gs.RUNNING:case Gs.PAUSED:e.next&&Pm(e.next.bind(e,this.snapshot))();break;case Gs.SUCCESS:e.complete&&Pm(e.complete.bind(e))();break;default:e.error&&Pm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class dh{constructor(e,t){this._service=e,this._location=t instanceof $s?t:$s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dh(e,t)}get root(){const e=new $s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ND(this._location.path)}get storage(){return this._service}get parent(){const e=function MD(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new $s(this._location.bucket,e);return new dh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw ED(e)}}function qD(n,e,t){return xm.apply(this,arguments)}function xm(){return xm=(0,Me.Z)(function*(n,e,t){const s=yield R0(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield qD(n,e,s.nextPageToken))}),xm.apply(this,arguments)}function R0(n,e){null!=e&&"number"==typeof e.maxResults&&Dm("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=w0(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ha)}function ov(n){n._throwIfRoot("getDownloadURL");const e=function rv(n,e,t){const s=ja(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new Fu(s,"GET",function LD(n,e){return function t(r,s){const u=IR(n,s,e);return Vu(null!==u),function Xx(n,e,t,r){const s=xD(e);if(null===s||!lp(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(C=>{const k=n.fullPath;return ja("/b/"+c(n.bucket)+"/o/"+c(k),t,r)+CD({alt:"media",token:C})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return m.errorHandler=ch(e),m}(n.storage,n._location,Sm());return n.storage.makeRequestWithTokens(e,Ha).then(t=>{if(null===t)throw function cR(){return new Gr(kr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function KD(n,e){const t=function yR(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new $s(n._location.bucket,t);return new dh(n.storage,r)}function MR(n,e){if(n instanceof JD){const t=n;if(null==t._bucket)throw function uR(){return new Gr(kr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pD+"' property when initializing the app?")}();const r=new dh(t,t._bucket);return null!=e?MR(r,e):r}return void 0!==e?KD(n,e):n}function NR(n,e){if(e&&function YD(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof JD)return function QD(n,e){return new dh(n,e)}(n,e);throw Kc("To use ref(service, url), the first argument must be a Storage instance.")}return MR(n,e)}function OR(n,e){const t=e?.[pD];return null==t?null:$s.makeFromBucketSpec(t,n)}class JD{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=eR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?$s.makeFromBucketSpec(s,this._host):OR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?$s.makeFromBucketSpec(this._url,e):OR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dh(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new lo(vD());{const c=function AD(n,e,t,r,s,u,c=!0){const m=CD(n.urlParams),_=n.url+m,C=Object.assign({},n.headers);return function DD(n,e){e&&(n["X-Firebase-GMPID"]=e)}(C,e),function pR(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(C,t),function gR(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(C,u),function Yx(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(C,r),new fR(_,n.method,C,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Me.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const LR="@firebase/storage";function VR(n,e){return NR(n=(0,q.m9)(n),e)}function l(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new JD(t,r,s,e,Rr.SDK_VERSION)}!function d(){(0,Rr._registerComponent)(new Di.wA("storage",l,"PUBLIC").setMultipleInstances(!0)),(0,Rr.registerVersion)(LR,"0.11.2",""),(0,Rr.registerVersion)(LR,"0.11.2","esm2017")}();class f{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class y{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new f(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new f(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new f(c,this,this._ref)):{next:t.next?c=>t.next(new f(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class T{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new b(e,this._service))}get items(){return this._delegate.items.map(e=>new b(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class b{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function UR(n,e){return KD(n,e)}(this._delegate,e);return new b(t,this.storage)}get root(){return new b(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new b(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new y(function oM(n,e,t){return function zD(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new jD(n,new Lu(e),t)}(n=(0,q.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=co.RAW,r){this._throwIfRoot("putString");const s=v0(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new y(new jD(this._delegate,new Lu(s.data,!0),u),this)}listAll(){return function lM(n){return function sM(n){const e={prefixes:[],items:[]};return qD(n,e).then(()=>e)}(n=(0,q.m9)(n))}(this._delegate).then(e=>new T(e,this.storage))}list(e){return function uM(n,e){return R0(n=(0,q.m9)(n),e)}(this._delegate,e||void 0).then(t=>new T(t,this.storage))}getMetadata(){return function aM(n){return function ZD(n){n._throwIfRoot("getMetadata");const e=FD(n.storage,n._location,Sm());return n.storage.makeRequestWithTokens(e,Ha)}(n=(0,q.m9)(n))}(this._delegate)}updateMetadata(e){return function FR(n,e){return function PR(n,e){n._throwIfRoot("updateMetadata");const t=function eM(n,e,t,r){const u=ja(e.fullServerUrl(),n.host,n._protocol),m=kD(t,r),C=n.maxOperationRetryTime,P=new Fu(u,"PATCH",Rm(n,r),C);return P.headers={"Content-Type":"application/json; charset=utf-8"},P.body=m,P.errorHandler=ch(e),P}(n.storage,n._location,e,Sm());return n.storage.makeRequestWithTokens(t,Ha)}(n=(0,q.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function cM(n){return ov(n=(0,q.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function dM(n){return function xR(n){n._throwIfRoot("deleteObject");const e=function tM(n,e){const r=ja(e.fullServerUrl(),n.host,n._protocol),m=new Fu(r,"DELETE",function c(_,C){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=ch(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ha)}(n=(0,q.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw ED(e)}}class O{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(V(e))throw Kc("ref() expected a child path but got a URL, use refFromURL instead.");return new b(VR(this._delegate,e),this)}refFromURL(e){if(!V(e))throw Kc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$s.makeFromUrl(e,this._delegate.host)}catch{throw Kc("refFromUrl() expected a valid full URL but got an invalid one.")}return new b(VR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function i(n,e,t,r={}){!function kR(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,q.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function V(n){return/^[A-Za-z]+:\/\//.test(n)}function Le(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new O(t,r)}function Nt(n){const e=function dt(n){return new ue.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function XS(n,e=wo){return(0,Gy.e)((t,r)=>{let s=null,u=null,c=null;const m=()=>{if(s){s.unsubscribe(),s=null;const C=u;u=null,r.next(C)}};function _(){const C=c+n,P=e.now();if(P<C)return s=this.schedule(void 0,C-P),void r.add(s);m()}t.subscribe((0,De.x)(r,C=>{u=C,c=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Pe.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ze(n){return{getDownloadURL:()=>(0,ku.of)(void 0).pipe(HC,(0,Ts.w)(()=>n.getDownloadURL()),Or),getMetadata:()=>(0,ku.of)(void 0).pipe(HC,(0,Ts.w)(()=>n.getMetadata()),Or),delete:()=>(0,ie.D)(n.delete()),child:e=>ze(n.child(e)),updateMetadata:e=>(0,ie.D)(n.updateMetadata(e)),put:(e,t)=>Nt(n.put(e,t)),putString:(e,t,r)=>Nt(n.putString(e,t,r)),list:e=>(0,ie.D)(n.list(e)),listAll:()=>(0,ie.D)(n.listAll())}}!function Ye(n){const e={TaskState:Gs,TaskEvent:AR,StringFormat:co,Storage:O,Reference:b};n.INTERNAL.registerComponent(new Di.wA("storage-compat",Le,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(js.Z);const Yt=new g.OlP("angularfire2.storageBucket"),pn=new g.OlP("angularfire2.storage.maxUploadRetryTime"),Xn=new g.OlP("angularfire2.storage.maxOperationRetryTime"),fo=new g.OlP("angularfire2.storage.use-emulator");let Fl=(()=>{class n{storage;constructor(t,r,s,u,c,m,_,C,P,k){const G=_m(t,c,r);this.storage=ym(`${G.name}.storage.${s}`,"AngularFireStorage",G.name,()=>{const J=c.runOutsideAngular(()=>G.storage(s||void 0)),he=P;return he&&J.useEmulator(...he),_&&J.setMaxUploadRetryTime(_),C&&J.setMaxOperationRetryTime(C),J},[_,C])}ref(t){return ze(this.storage.ref(t))}refFromURL(t){return ze(this.storage.refFromURL(t))}upload(t,r,s){return ze(this.storage.ref(t)).put(r,s)}static \u0275fac=function(r){return new(r||n)(g.LFG(kl),g.LFG(np,8),g.LFG(Yt,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fy),g.LFG(pn,8),g.LFG(Xn,8),g.LFG(fo,8),g.LFG(zc,8))};static \u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),P0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=g.oAB({type:n});static \u0275inj=g.cJS({})}return n})(),BR=(()=>{class n{constructor(){js.Z.registerVersion("angularfire",tp.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=g.oAB({type:n});static \u0275inj=g.cJS({providers:[Fl],imports:[P0]})}return n})();var jR=B(2737),k1=B(2420);const hM="@firebase/database";let HR="";function $R(n){HR=n}class V1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,q.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,q.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class U1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,q.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const pM=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new V1(e)}}catch{}return new U1},Nm=pM("localStorage"),GR=pM("sessionStorage"),av=new hr.Yd("@firebase/database"),gM=function(){let n=1;return function(){return n++}}(),mM=function(n){const e=(0,q.dS)(n),t=new q.gQ;t.update(e);const r=t.digest();return q.US.encodeByteArray(r)},x0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=x0.apply(null,r):e+="object"==typeof r?(0,q.Wl)(r):r,e+=" "}return e};let Om=null,_M=!0;const yM=function(n,e){(0,q.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(av.logLevel=hr.in.VERBOSE,Om=av.log.bind(av),e&&GR.set("logging_enabled",!0)):"function"==typeof n?Om=n:(Om=null,GR.remove("logging_enabled"))},Ds=function(...n){if(!0===_M&&(_M=!1,null===Om&&!0===GR.get("logging_enabled")&&yM(!0)),Om){const e=x0.apply(null,n);Om(e)}},M0=function(n){return function(...e){Ds(n,...e)}},zR=function(...n){const e="FIREBASE INTERNAL ERROR: "+x0(...n);av.error(e)},Qc=function(...n){const e=`FIREBASE FATAL ERROR: ${x0(...n)}`;throw av.error(e),new Error(e)},po=function(...n){const e="FIREBASE WARNING: "+x0(...n);av.warn(e)},tA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},cp="[MIN_NAME]",hh="[MAX_NAME]",km=function(n,e){if(n===e)return 0;if(n===cp||e===hh)return-1;if(e===cp||n===hh)return 1;{const t=IM(n),r=IM(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},H1=function(n,e){return n===e?0:n<e?-1:1},N0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,q.Wl)(e))},WR=function(n){if("object"!=typeof n||null===n)return(0,q.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,q.Wl)(e[r]),t+=":",t+=WR(n[e[r]]);return t+="}",t},vM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)r.push(n.substring(s,s+e>t?t:s+e));return r};function As(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const EM=function(n){(0,q.hu)(!tA(n),"Invalid JSON number");const r=1023;let s,u,c,m,_;0===n?(u=0,c=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=m+r,c=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(_=52;_;_-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)C.push(u%2?1:0),u=Math.floor(u/2);C.push(s?1:0),C.reverse();const P=C.join("");let k="";for(_=0;_<64;_+=8){let G=parseInt(P.substr(_,8),2).toString(16);1===G.length&&(G="0"+G),k+=G}return k.toLowerCase()},W1=new RegExp("^-?(0*)\\d{1,10}$"),IM=function(n){if(W1.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},uv=function(n){try{n()}catch(e){setTimeout(()=>{throw po("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},O0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Y1{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){po(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Q1{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ds("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',po(e)}}let k0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const AM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RM="websocket",PM="long_polling";class ZR{constructor(e,t,r,s,u=!1,c="",m=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Nm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function xM(n,e,t){let r;if((0,q.hu)("string"==typeof e,"typeof type must == string"),(0,q.hu)("object"==typeof t,"typeof params must == object"),e===RM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==PM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function J1(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return As(t,(u,c)=>{s.push(u+"="+c)}),r+s.join("&")}class X1{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,q.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,q.p$)(this.counters_)}}const KR={},YR={};function QR(n){const e=n.toString();return KR[e]||(KR[e]=new X1),KR[e]}class tO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&uv(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class dp{constructor(e,t,r,s,u,c,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.transportSessionId=c,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=M0(e),this.stats_=QR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),xM(t,PM,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new tO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,q.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JR((...u)=>{const[c,m,_,C,P]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=m,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&AM.test(location.hostname)&&(r.r="f");const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dp.forceAllow_=!0}static forceDisallow(){dp.forceDisallow_=!0}static isAvailable(){return!((0,q.Yr)()||!dp.forceAllow_&&(dp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,q.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,q.h$)(t),s=vM(r,1840);for(let u=0;u<s.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,q.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class JR{constructor(e,t,r,s){if(this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,q.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=JR.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(m){Ds("frame writing exception"),m.stack&&Ds(m.stack),Ds(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ds("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+s+"="+c.seg+"&ts"+s+"="+c.ts+"&d"+s+"="+c.d,s++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),r()})}addTag(e,t){(0,q.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||"loaded"===s||"complete"===s)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ds("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let rA=null;typeof MozWebSocket<"u"?rA=MozWebSocket:typeof WebSocket<"u"&&(rA=WebSocket);let lv=(()=>{class n{constructor(t,r,s,u,c,m,_){this.connId=t,this.applicationId=s,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=M0(this.connId),this.stats_=QR(r),this.connURL=n.connectionURL_(r,m,_,u,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,s,u,c){const m={v:"5"};return!(0,q.Yr)()&&typeof location<"u"&&location.hostname&&AM.test(location.hostname)&&(m.r="f"),r&&(m.s=r),s&&(m.ls=s),u&&(m.ac=u),c&&(m.p=c),xM(t,RM,m)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nm.set("previous_websocket_failure",!0);try{let s;if((0,q.Yr)()){s={headers:{"User-Agent":`Firebase/5/${HR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,m=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;m&&(s.proxy={origin:m})}this.mySock=new rA(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const u=s.message||s.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==rA&&!n.forceDisallow_}static previouslyFailed(){return Nm.isInMemoryStorage||!0===Nm.get("previous_websocket_failure")}markConnectionHealthy(){Nm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=(0,q.cI)(r);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,q.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const r=(0,q.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=vM(r,16384);s.length>1&&this.sendString_(String(s.length));for(let u=0;u<s.length;u++)this.sendString_(s[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),VM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[dp,lv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=lv&&lv.isAvailable();let s=r&&!lv.previouslyFailed();if(t.webSocketOnly&&(r||po("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[lv];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class zM{constructor(e,t,r,s,u,c,m,_,C,P){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=u,this.onMessage_=c,this.onReady_=m,this.onDisconnect_=_,this.onKill_=C,this.lastSessionId=P,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=M0("c:"+this.id+":"),this.transportManager_=new VM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=O0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=N0("t",e),r=N0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=N0("t",e),r=N0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=N0("t",e);if("d"in e){const r=e.d;if("h"===t){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?zR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&po("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),O0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):O0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class WM{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class qM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,q.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let u=0;u<s.length;u++)if(s[u].callback===t&&(!r||r===s[u].context))return void s.splice(u,1)}validateEventType_(e){(0,q.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class iA extends qM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new iA}getInitialEvent(e){return(0,q.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ar{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Wn(){return new ar("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hp(n){return n.pieces_.length-n.pieceNum_}function br(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ar(n.pieces_,e)}function eP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function L0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function YM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ar(e,0)}function Xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ar)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new ar(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function Mo(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return Mo(br(n),br(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function TO(n,e){const t=L0(n,0),r=L0(e,0);for(let s=0;s<t.length&&s<r.length;s++){const u=km(t[s],r[s]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function tP(n,e){if(hp(n)!==hp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Uu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(hp(n)>hp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class CO{constructor(e,t){this.errorPrefix_=t,this.parts_=L0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,q.ug)(this.parts_[r]);QM(this)}}function QM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Lm(n))}function Lm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nP extends qM{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nP}getInitialEvent(e){return(0,q.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const F0=1e3;let oA,Fm=(()=>{class n extends WM{constructor(t,r,s,u,c,m,_,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=m,this.appCheckTokenProvider_=_,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=M0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=F0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&iA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,s){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,q.Wl)(c)),(0,q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[u]=s)}get(t){this.initConnection_();const r=new q.BH,u={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:m=>{const _=m.d;"ok"===m.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(u),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,s,u){this.initConnection_();const c=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+c),this.listens.has(m)||this.listens.set(m,new Map),(0,q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,q.hu)(!this.listens.get(m).has(c),"listen() called twice for same path/queryId.");const _={onComplete:u,hashFn:r,query:t,tag:s};this.listens.get(m).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(t){const r=t.query,s=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+s+" for "+u);const c={p:s};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const C=_.d,P=_.s;n.warnOnListenWarnings_(C,r),(this.listens.get(s)&&this.listens.get(s).get(u))===t&&(this.log_("listen response",_),"ok"!==P&&this.removeListen_(s,u),t.onComplete&&t.onComplete(P,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,q.r3)(t,"w")){const s=(0,q.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();po(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,q.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,q.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(r,s,u=>{const c=u.s,m=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,s=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(t,r){const s=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+u),(0,q.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,u)&&this.connected_&&this.sendUnlisten_(s,u,t._queryObject,r)}sendUnlisten_(t,r,s,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=s,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:s})}onDisconnectMerge(t,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:s})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,s,u){const c={p:r,d:s};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,m=>{u&&setTimeout(()=>{u(m.s,m.d)},Math.floor(0))})}put(t,r,s,u){this.putInternal("p",t,r,s,u)}merge(t,r,s,u){this.putInternal("m",t,r,s,u)}putInternal(t,r,s,u,c){this.initConnection_();const m={p:r,d:s};void 0!==c&&(m.h=c),this.outstandingPuts_.push({action:t,request:m,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,s,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,q.Wl)(t));const r=t.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):zR("Unrecognized action received from server: "+(0,q.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=F0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let _=!1,C=null;const P=function(){C?C.close():(_=!0,u())};t.realtime_={close:P,sendRequest:function(J){(0,q.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(J)}};const G=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[J,he]=yield Promise.all([t.authTokenProvider_.getToken(G),t.appCheckTokenProvider_.getToken(G)]);_?Ds("getToken() completed but was canceled"):(Ds("getToken() completed. Creating connection."),t.authToken_=J&&J.accessToken,t.appCheckToken_=he&&he.token,C=new zM(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,s,u,Re=>{po(Re+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(J){t.log_("Failed to get token: "+J),_||(t.repoInfo_.nodeAdmin&&po(J),P())}}})()}interrupt(t){Ds("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ds("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=F0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let s;s=r?r.map(c=>WR(c)).join("$"):"default";const u=this.removeListen_(t,s);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const s=new ar(t).toString();let u;if(this.listens.has(s)){const c=this.listens.get(s);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(s)}else u=void 0;return u}onAuthRevoked_(t,r){Ds("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ds("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+HR.replace(/\./g,"-")]=1,(0,q.uI)()?t["framework.cordova"]=1:(0,q.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=iA.getInstance().currentlyOnline();return(0,q.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Cn(e,t)}}class sA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Cn(cp,e),s=new Cn(cp,t);return 0!==this.compare(r,s)}minPost(){return Cn.MIN}}class eN extends sA{static get __EMPTY_NODE(){return oA}static set __EMPTY_NODE(e){oA=e}compare(e,t){return km(e.name,t.name)}isDefinedOn(e){throw(0,q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Cn.MIN}maxPost(){return new Cn(hh,oA)}makePost(e,t){return(0,q.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Cn(e,oA)}toString(){return".key"}}const Jc=new eN;class aA{constructor(e,t,r,s,u=null){this.isReverse_=s,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,s&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let iP,Vl=(()=>{class n{constructor(t,r,s,u,c){this.key=t,this.value=r,this.color=s??n.RED,this.left=u??la.EMPTY_NODE,this.right=c??la.EMPTY_NODE}copy(t,r,s,u,c){return new n(t??this.key,r??this.value,s??this.color,u??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let u=this;const c=s(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,s),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,s)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return la.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let s,u;if(s=this,r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===r(t,s.key)){if(s.right.isEmpty())return la.EMPTY_NODE;u=s.right.min_(),s=s.copy(u.key,u.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class la{constructor(e,t=la.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new la(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Vl.BLACK,null,null))}remove(e){return new la(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(s=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new aA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new aA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new aA(this.root_,null,this.comparator_,!0,e)}}function MO(n,e){return km(n.name,e.name)}function rP(n,e){return km(n,e)}la.EMPTY_NODE=new class xO{copy(e,t,r,s,u){return this}insert(e,t,r){return new Vl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tN=function(n){return"number"==typeof n?"number:"+EM(n):"string:"+n},nN=function(n){if(n.isLeafNode()){const e=n.val();(0,q.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,q.r3)(e,".sv"),"Priority must be a string or number.")}else(0,q.hu)(n===iP||n.isEmpty(),"priority of unexpected type.");(0,q.hu)(n===iP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rN,iN,sN,cv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nN(this.priorityNode_)}static set __childrenNodeConstructor(t){rN=t}static get __childrenNodeConstructor(){return rN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const s=yn(t);return null===s?r:r.isEmpty()&&".priority"!==s?this:((0,q.hu)(".priority"!==s||1===hp(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(br(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?EM(this.value_):this.value_,this.lazyHash_=mM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,q.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,s=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(s);return(0,q.hu)(u>=0,"Unknown leaf type: "+r),(0,q.hu)(c>=0,"Unknown leaf type: "+s),u===c?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Lr=new class LO extends sA{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),u=r.compareTo(s);return 0===u?km(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Cn.MIN}maxPost(){return new Cn(hh,new cv("[PRIORITY-POST]",sN))}makePost(e,t){const r=iN(e);return new Cn(t,new cv("[PRIORITY-POST]",r))}toString(){return".priority"}},FO=Math.log(2);class VO{constructor(e){this.count=parseInt(Math.log(e+1)/FO,10),this.current_=this.count-1;const s=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uA=function(n,e,t,r){n.sort(e);const s=function(_,C){const P=C-_;let k,G;if(0===P)return null;if(1===P)return k=n[_],G=t?t(k):k,new Vl(G,k.node,Vl.BLACK,null,null);{const J=parseInt(P/2,10)+_,he=s(_,J),Re=s(J+1,C);return k=n[J],G=t?t(k):k,new Vl(G,k.node,Vl.BLACK,he,Re)}},m=function(_){let C=null,P=null,k=n.length;const G=function(he,Re){const Ne=k-he,ht=k;k-=he;const mt=s(Ne+1,ht),Qe=n[Ne],Ct=t?t(Qe):Qe;J(new Vl(Ct,Qe.node,Re,null,mt))},J=function(he){C?(C.left=he,C=he):(P=he,C=he)};for(let he=0;he<_.count;++he){const Re=_.nextBitIsOne(),Ne=Math.pow(2,_.count-(he+1));Re?G(Ne,Vl.BLACK):(G(Ne,Vl.BLACK),G(Ne,Vl.RED))}return P}(new VO(n.length));return new la(r||e,m)};let sP;const dv={};class fh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,q.hu)(dv&&Lr,"ChildrenNode.ts has not been loaded"),sP=sP||new fh({".priority":dv},{".priority":Lr}),sP}get(e){const t=(0,q.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof la?t:null}hasIndex(e){return(0,q.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,q.hu)(e!==Jc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const u=t.getIterator(Cn.Wrap);let m,c=u.getNext();for(;c;)s=s||e.isDefinedOn(c.node),r.push(c),c=u.getNext();m=s?uA(r,e.getCompare()):dv;const _=e.toString(),C=Object.assign({},this.indexSet_);C[_]=e;const P=Object.assign({},this.indexes_);return P[_]=m,new fh(P,C)}addToIndexes(e,t){const r=(0,q.UI)(this.indexes_,(s,u)=>{const c=(0,q.DV)(this.indexSet_,u);if((0,q.hu)(c,"Missing index implementation for "+u),s===dv){if(c.isDefinedOn(e.node)){const m=[],_=t.getIterator(Cn.Wrap);let C=_.getNext();for(;C;)C.name!==e.name&&m.push(C),C=_.getNext();return m.push(e),uA(m,c.getCompare())}return dv}{const m=t.get(e.name);let _=s;return m&&(_=_.remove(new Cn(e.name,m))),_.insert(e,e.node)}});return new fh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,q.UI)(this.indexes_,s=>{if(s===dv)return s;{const u=t.get(e.name);return u?s.remove(new Cn(e.name,u)):s}});return new fh(r,this.indexSet_)}}let V0,hn=(()=>{class n{constructor(t,r,s){this.children_=t,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&nN(this.priorityNode_),this.children_.isEmpty()&&(0,q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return V0||(V0=new n(new la(rP),null,fh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||V0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?V0:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(br(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,q.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const s=new Cn(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(s,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(s,this.children_));const m=u.isEmpty()?V0:this.priorityNode_;return new n(u,m,c)}}updateChild(t,r){const s=yn(t);if(null===s)return r;{(0,q.hu)(".priority"!==yn(t)||1===hp(t),".priority must be the last token in a path");const u=this.getImmediateChild(s).updateChild(br(t),r);return this.updateImmediateChild(s,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let s=0,u=0,c=!0;if(this.forEachChild(Lr,(m,_)=>{r[m]=_.val(t),s++,c&&n.INTEGER_REGEXP_.test(m)?u=Math.max(u,Number(m)):c=!1}),!t&&c&&u<2*s){const m=[];for(const _ in r)m[_]=r[_];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tN(this.getPriority().val())+":"),this.forEachChild(Lr,(r,s)=>{const u=s.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":mM(t)}return this.lazyHash_}getPredecessorChildName(t,r,s){const u=this.resolveIndex_(s);if(u){const c=u.getPredecessorKey(new Cn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const s=r.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Cn(r,this.children_.get(r)):null}forEachChild(t,r){const s=this.resolveIndex_(t);return s?s.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Cn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Cn.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===U0?-1:0}withIndex(t){if(t===Jc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Jc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const s=this.getIterator(Lr),u=r.getIterator(Lr);let c=s.getNext(),m=u.getNext();for(;c&&m;){if(c.name!==m.name||!c.node.equals(m.node))return!1;c=s.getNext(),m=u.getNext()}return null===c&&null===m}return!1}return!1}}resolveIndex_(t){return t===Jc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const U0=new class UO extends hn{constructor(){super(new la(rP),hn.EMPTY_NODE,fh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return hn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Cn,{MIN:{value:new Cn(cp,hn.EMPTY_NODE)},MAX:{value:new Cn(hh,U0)}}),eN.__EMPTY_NODE=hn.EMPTY_NODE,cv.__childrenNodeConstructor=hn,function NO(n){iP=n}(U0),function kO(n){sN=n}(U0);const BO=!0;function ci(n,e=null){if(null===n)return hn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,q.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new cv(n,ci(e));if(n instanceof Array||!BO){let t=hn.EMPTY_NODE;return As(n,(r,s)=>{if((0,q.r3)(n,r)&&"."!==r.substring(0,1)){const u=ci(s);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(ci(e))}{const t=[];let r=!1;if(As(n,(c,m)=>{if("."!==c.substring(0,1)){const _=ci(m);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Cn(c,_)))}}),0===t.length)return hn.EMPTY_NODE;const u=uA(t,MO,c=>c.name,rP);if(r){const c=uA(t,Lr.getCompare());return new hn(u,ci(e),new fh({".priority":c},{".priority":Lr}))}return new hn(u,ci(e),fh.Default)}}!function OO(n){iN=n}(ci);class oP extends sA{constructor(e){super(),this.indexPath_=e,(0,q.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),u=r.compareTo(s);return 0===u?km(e.name,t.name):u}makePost(e,t){const r=ci(e),s=hn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Cn(t,s)}maxPost(){const e=hn.EMPTY_NODE.updateChild(this.indexPath_,U0);return new Cn(hh,e)}toString(){return L0(this.indexPath_,0).join("/")}}const aP=new class jO extends sA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?km(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Cn.MIN}maxPost(){return Cn.MAX}makePost(e,t){const r=ci(e);return new Cn(t,r)}toString(){return".value"}};function oN(n){return{type:"value",snapshotNode:n}}function hv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function B0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function j0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class uP{constructor(e){this.index_=e}updateChild(e,t,r,s,u,c){(0,q.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(s).equals(r.getChild(s))&&m.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(B0(t,m)):(0,q.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?c.trackChildChange(hv(t,r)):c.trackChildChange(j0(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Lr,(s,u)=>{t.hasChild(s)||r.trackChildChange(B0(s,u))}),t.isLeafNode()||t.forEachChild(Lr,(s,u)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(u)||r.trackChildChange(j0(s,u,c))}else r.trackChildChange(hv(s,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?hn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class H0{constructor(e){this.indexedFilter_=new uP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=H0.getStartPost_(e),this.endPost_=H0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,s,u,c){return this.matches(new Cn(t,r))||(r=hn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=hn.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(hn.EMPTY_NODE);const u=this;return t.forEachChild(Lr,(c,m)=>{u.matches(new Cn(c,m))||(s=s.updateImmediateChild(c,hn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class $O{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new H0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,s,u,c){return this.rangedFilter_.matches(new Cn(t,r))||(r=hn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=hn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;s=hn.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m)){if(!this.withinDirectionalEnd(m))break;s=s.updateImmediateChild(m.name,m.node),c++}}}else{let u;s=t.withIndex(this.index_),s=s.updatePriority(hn.EMPTY_NODE),u=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let c=0;for(;u.hasNext();){const m=u.getNext();c<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?c++:s=s.updateImmediateChild(m.name,hn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,u){let c;if(this.reverse_){const k=this.index_.getCompare();c=(G,J)=>k(J,G)}else c=this.index_.getCompare();const m=e;(0,q.hu)(m.numChildren()===this.limit_,"");const _=new Cn(t,r),C=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),P=this.rangedFilter_.matches(_);if(m.hasChild(t)){const k=m.getImmediateChild(t);let G=s.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=G&&(G.name===t||m.hasChild(G.name));)G=s.getChildAfterChild(this.index_,G,this.reverse_);const J=null==G?1:c(G,_);if(P&&!r.isEmpty()&&J>=0)return u?.trackChildChange(j0(t,r,k)),m.updateImmediateChild(t,r);{u?.trackChildChange(B0(t,k));const Re=m.updateImmediateChild(t,hn.EMPTY_NODE);return null!=G&&this.rangedFilter_.matches(G)?(u?.trackChildChange(hv(G.name,G.node)),Re.updateImmediateChild(G.name,G.node)):Re}}return r.isEmpty()?e:P&&c(C,_)>=0?(null!=u&&(u.trackChildChange(B0(C.name,C.node)),u.trackChildChange(hv(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(C.name,hn.EMPTY_NODE)):e}}class lA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lr}copy(){const e=new lA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function cP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function cA(n,e){const t=n.copy();return t.index_=e,t}function aN(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Lr?t="$priority":n.index_===aP?t="$value":n.index_===Jc?t="$key":((0,q.hu)(n.index_ instanceof oP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,q.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,q.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,q.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,q.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,q.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Lr&&(e.i=n.index_.toString()),e}class dA extends WM{constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=M0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,q.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,s){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=dA.getListenId_(e,r),m={};this.listens_[c]=m;const _=aN(e._queryParams);this.restRequest_(u+".json",_,(C,P)=>{let k=P;if(404===C&&(k=null,C=null),null===C&&this.onDataUpdate_(u,k,!1,r),(0,q.DV)(this.listens_,c)===m){let G;G=C?401===C?"permission_denied":"rest_error:"+C:"ok",s(G,null)}})}unlisten(e,t){const r=dA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=aN(e._queryParams),r=e._path.toString(),s=new q.BH;return this.restRequest_(r+".json",t,(u,c)=>{let m=c;404===u&&(m=null,u=null),null===u?(this.onDataUpdate_(r,m,!1,null),s.resolve(m)):s.reject(new Error(m))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,u])=>{s&&s.accessToken&&(t.auth=s.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,q.xO)(t);this.log_("Sending REST request for "+c);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+c+" received. status:",m.status,"response:",m.responseText);let _=null;if(m.status>=200&&m.status<300){try{_=(0,q.cI)(m.responseText)}catch{po("Failed to parse JSON response for "+c+": "+m.responseText)}r(null,_)}else 401!==m.status&&404!==m.status&&po("Got unsuccessful REST response for "+c+" Status: "+m.status),r(m.status);r=null}},m.open("GET",c,!0),m.send()})}}class KO{constructor(){this.rootNode_=hn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function hA(){return{value:null,children:new Map}}function fv(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,hA()),fv(n.children.get(r),e=br(e),t)}}function dP(n,e){if(vn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Lr,(r,s)=>{fv(n,new ar(r),s)}),dP(n,e)}}if(n.children.size>0){const t=yn(e);return e=br(e),n.children.has(t)&&dP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function hP(n,e,t){null!==n.value?t(e,n.value):function YO(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,s)=>{hP(s,new ar(e.toString()+"/"+r),t)})}class QO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&As(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}class ek{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new QO(e);const r=1e4+2e4*Math.random();O0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;As(e,(s,u)=>{u>0&&(0,q.r3)(this.statsToReport_,s)&&(t[s]=u,r=!0)}),r&&this.server_.reportStats(t),O0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Xc||{});function gP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Xc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ar(e));return new fA(Wn(),t,this.revert)}}return(0,q.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new fA(br(this.path),this.affectedTree,this.revert)}}class $0{constructor(e,t){this.source=e,this.path=t,this.type=Xc.LISTEN_COMPLETE}operationForChild(e){return vn(this.path)?new $0(this.source,Wn()):new $0(this.source,br(this.path))}}class Vm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Xc.OVERWRITE}operationForChild(e){return vn(this.path)?new Vm(this.source,Wn(),this.snap.getImmediateChild(e)):new Vm(this.source,br(this.path),this.snap)}}class pv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Xc.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new ar(e));return t.isEmpty()?null:t.value?new Vm(this.source,Wn(),t.value):new pv(this.source,Wn(),t)}return(0,q.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pv(this.source,br(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function G0(n,e,t,r,s,u){const c=r.filter(m=>m.type===t);c.sort((m,_)=>function ik(n,e,t){if(null==e.childName||null==t.childName)throw(0,q.g5)("Should only compare child_ events.");const r=new Cn(e.childName,e.snapshotNode),s=new Cn(t.childName,t.snapshotNode);return n.index_.compare(r,s)}(n,m,_)),c.forEach(m=>{const _=function rk(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,u);s.forEach(C=>{C.respondsTo(m.type)&&e.push(C.createEvent(_,n.query_))})})}function pA(n,e){return{eventCache:n,serverCache:e}}function z0(n,e,t,r){return pA(new fp(e,t,r),n.serverCache)}function cN(n,e,t,r){return pA(n.eventCache,new fp(e,t,r))}function gA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Um(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mP;class Fr{constructor(e,t=(()=>(mP||(mP=new la(H1)),mP))()){this.value=e,this.children=t}static fromObject(e){let t=new Fr(null);return As(e,(r,s)=>{t=t.set(new ar(r),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Wn(),value:this.value};if(vn(e))return null;{const r=yn(e),s=this.children.get(r);if(null!==s){const u=s.findRootMostMatchingPathAndValue(br(e),t);return null!=u?{path:Xr(new ar(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(br(e)):new Fr(null)}}set(e,t){if(vn(e))return new Fr(t,this.children);{const r=yn(e),u=(this.children.get(r)||new Fr(null)).set(br(e),t),c=this.children.insert(r,u);return new Fr(this.value,c)}}remove(e){if(vn(e))return this.children.isEmpty()?new Fr(null):new Fr(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const s=r.remove(br(e));let u;return u=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&u.isEmpty()?new Fr(null):new Fr(this.value,u)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(br(e)):null}}setTree(e,t){if(vn(e))return t;{const r=yn(e),u=(this.children.get(r)||new Fr(null)).setTree(br(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Fr(this.value,c)}}fold(e){return this.fold_(Wn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,u)=>{r[s]=u.fold_(Xr(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Wn(),t)}findOnPath_(e,t,r){const s=!!this.value&&r(t,this.value);if(s)return s;if(vn(e))return null;{const u=yn(e),c=this.children.get(u);return c?c.findOnPath_(br(e),Xr(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Wn(),t)}foreachOnPath_(e,t,r){if(vn(e))return this;{this.value&&r(t,this.value);const s=yn(e),u=this.children.get(s);return u?u.foreachOnPath_(br(e),Xr(t,s),r):new Fr(null)}}foreach(e){this.foreach_(Wn(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ul{constructor(e){this.writeTree_=e}static empty(){return new Ul(new Fr(null))}}function W0(n,e,t){if(vn(e))return new Ul(new Fr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const s=r.path;let u=r.value;const c=Mo(s,e);return u=u.updateChild(c,t),new Ul(n.writeTree_.set(s,u))}{const s=new Fr(t),u=n.writeTree_.setTree(e,s);return new Ul(u)}}}function _P(n,e,t){let r=n;return As(t,(s,u)=>{r=W0(r,Xr(e,s),u)}),r}function dN(n,e){if(vn(e))return Ul.empty();{const t=n.writeTree_.setTree(e,new Fr(null));return new Ul(t)}}function yP(n,e){return null!=Bm(n,e)}function Bm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Mo(t.path,e)):null}function hN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Lr,(r,s)=>{e.push(new Cn(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{null!=s.value&&e.push(new Cn(r,s.value))}),e}function pp(n,e){if(vn(e))return n;{const t=Bm(n,e);return new Ul(null!=t?new Fr(t):n.writeTree_.subtree(e))}}function vP(n){return n.writeTree_.isEmpty()}function gv(n,e){return fN(Wn(),n.writeTree_,e)}function fN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,u)=>{".priority"===s?((0,q.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=fN(Xr(n,s),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Xr(n,".priority"),r)),t}}function mA(n,e){return yN(e,n)}function ck(n,e){if(n.snap)return Uu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Uu(Xr(n.path,t),e))return!0;return!1}function hk(n){return n.visible}function pN(n,e,t){let r=Ul.empty();for(let s=0;s<n.length;++s){const u=n[s];if(e(u)){const c=u.path;let m;if(u.snap)Uu(t,c)?(m=Mo(t,c),r=W0(r,m,u.snap)):Uu(c,t)&&(m=Mo(c,t),r=W0(r,Wn(),u.snap.getChild(m)));else{if(!u.children)throw(0,q.g5)("WriteRecord should have .snap or .children");if(Uu(t,c))m=Mo(t,c),r=_P(r,m,u.children);else if(Uu(c,t))if(m=Mo(c,t),vn(m))r=_P(r,Wn(),u.children);else{const _=(0,q.DV)(u.children,yn(m));if(_){const C=_.getChild(br(m));r=W0(r,Wn(),C)}}}}}return r}function gN(n,e,t,r,s){if(r||s){const u=pp(n.visibleWrites,e);return!s&&vP(u)?t:s||null!=t||yP(u,Wn())?gv(pN(n.allWrites,function(C){return(C.visible||s)&&(!r||!~r.indexOf(C.writeId))&&(Uu(C.path,e)||Uu(e,C.path))},e),t||hn.EMPTY_NODE):null}{const u=Bm(n.visibleWrites,e);if(null!=u)return u;{const c=pp(n.visibleWrites,e);return vP(c)?t:null!=t||yP(c,Wn())?gv(c,t||hn.EMPTY_NODE):null}}}function _A(n,e,t,r){return gN(n.writeTree,n.treePath,e,t,r)}function EP(n,e){return function fk(n,e,t){let r=hn.EMPTY_NODE;const s=Bm(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Lr,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=pp(n.visibleWrites,e);return t.forEachChild(Lr,(c,m)=>{const _=gv(pp(u,new ar(c)),m);r=r.updateImmediateChild(c,_)}),hN(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return hN(pp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function mN(n,e,t,r){return function pk(n,e,t,r,s){(0,q.hu)(r||s,"Either existingEventSnap or existingServerSnap must exist");const u=Xr(e,t);if(yP(n.visibleWrites,u))return null;{const c=pp(n.visibleWrites,u);return vP(c)?s.getChild(t):gv(c,s.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function yA(n,e){return function mk(n,e){return Bm(n.visibleWrites,e)}(n.writeTree,Xr(n.treePath,e))}function IP(n,e,t){return function gk(n,e,t,r){const s=Xr(e,t),u=Bm(n.visibleWrites,s);return null!=u?u:r.isCompleteForChild(t)?gv(pp(n.visibleWrites,s),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function _N(n,e){return yN(Xr(n.treePath,e),n.writeTree)}function yN(n,e){return{treePath:n,writeTree:e}}class Ek{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,q.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const u=s.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,j0(r,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,B0(r,s.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,hv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,q.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(r,j0(r,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const vN=new class Ik{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class wP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new fp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return IP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Um(this.viewCache_),u=function vk(n,e,t,r,s,u){return function _k(n,e,t,r,s,u,c){let m;const _=pp(n.visibleWrites,e),C=Bm(_,Wn());if(null!=C)m=C;else{if(null==t)return[];m=gv(_,t)}if(m=m.withIndex(c),m.isEmpty()||m.isLeafNode())return[];{const P=[],k=c.getCompare(),G=u?m.getReverseIteratorFrom(r,c):m.getIteratorFrom(r,c);let J=G.getNext();for(;J&&P.length<s;)0!==k(J,r)&&P.push(J),J=G.getNext();return P}}(n.writeTree,n.treePath,e,t,r,s,u)}(this.writes_,s,t,1,r,e);return 0===u.length?null:u[0]}}function EN(n,e,t,r,s,u){const c=e.eventCache;if(null!=yA(r,t))return e;{let m,_;if(vn(t))if((0,q.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Um(e),k=EP(r,C instanceof hn?C:hn.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),k,u)}else{const C=_A(r,Um(e));m=n.filter.updateFullNode(e.eventCache.getNode(),C,u)}else{const C=yn(t);if(".priority"===C){(0,q.hu)(1===hp(t),"Can't have a priority with additional path components");const P=c.getNode();_=e.serverCache.getNode();const k=mN(r,t,P,_);m=null!=k?n.filter.updatePriority(P,k):c.getNode()}else{const P=br(t);let k;if(c.isCompleteForChild(C)){_=e.serverCache.getNode();const G=mN(r,t,c.getNode(),_);k=null!=G?c.getNode().getImmediateChild(C).updateChild(P,G):c.getNode().getImmediateChild(C)}else k=IP(r,C,e.serverCache);m=null!=k?n.filter.updateChild(c.getNode(),C,k,P,s,u):c.getNode()}}return z0(e,m,c.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function vA(n,e,t,r,s,u,c,m){const _=e.serverCache;let C;const P=c?n.filter:n.filter.getIndexedFilter();if(vn(t))C=P.updateFullNode(_.getNode(),r,null);else if(P.filtersNodes()&&!_.isFiltered()){const J=_.getNode().updateChild(t,r);C=P.updateFullNode(_.getNode(),J,null)}else{const J=yn(t);if(!_.isCompleteForPath(t)&&hp(t)>1)return e;const he=br(t),Ne=_.getNode().getImmediateChild(J).updateChild(he,r);C=".priority"===J?P.updatePriority(_.getNode(),Ne):P.updateChild(_.getNode(),J,Ne,he,vN,null)}const k=cN(e,C,_.isFullyInitialized()||vn(t),P.filtersNodes());return EN(n,k,t,s,new wP(s,k,u),m)}function TP(n,e,t,r,s,u,c){const m=e.eventCache;let _,C;const P=new wP(s,e,u);if(vn(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=z0(e,C,!0,n.filter.filtersNodes());else{const k=yn(t);if(".priority"===k)C=n.filter.updatePriority(e.eventCache.getNode(),r),_=z0(e,C,m.isFullyInitialized(),m.isFiltered());else{const G=br(t),J=m.getNode().getImmediateChild(k);let he;if(vn(G))he=r;else{const Re=P.getCompleteChild(k);he=null!=Re?".priority"===eP(G)&&Re.getChild(YM(G)).isEmpty()?Re:Re.updateChild(G,r):hn.EMPTY_NODE}_=J.equals(he)?e:z0(e,n.filter.updateChild(m.getNode(),k,he,G,P,c),m.isFullyInitialized(),n.filter.filtersNodes())}}return _}function IN(n,e){return n.eventCache.isCompleteForChild(e)}function wN(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function CP(n,e,t,r,s,u,c,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,_=e;C=vn(t)?r:new Fr(null).setTree(t,r);const P=e.serverCache.getNode();return C.children.inorderTraversal((k,G)=>{if(P.hasChild(k)){const he=wN(0,e.serverCache.getNode().getImmediateChild(k),G);_=vA(n,_,new ar(k),he,s,u,c,m)}}),C.children.inorderTraversal((k,G)=>{const J=!e.serverCache.isCompleteForChild(k)&&null===G.value;if(!P.hasChild(k)&&!J){const Re=wN(0,e.serverCache.getNode().getImmediateChild(k),G);_=vA(n,_,new ar(k),Re,s,u,c,m)}}),_}class Pk{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new uP(r.getIndex()),u=function GO(n){return n.loadsAllData()?new uP(n.getIndex()):n.hasLimit()?new $O(n):new H0(n)}(r);this.processor_=function wk(n){return{filter:n}}(u);const c=t.serverCache,m=t.eventCache,_=s.updateFullNode(hn.EMPTY_NODE,c.getNode(),null),C=u.updateFullNode(hn.EMPTY_NODE,m.getNode(),null),P=new fp(_,c.isFullyInitialized(),s.filtersNodes()),k=new fp(C,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=pA(k,P),this.eventGenerator_=new tk(this.query_)}get query(){return this.query_}}function Nk(n,e){const t=Um(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function TN(n){return 0===n.eventRegistrations_.length}function CN(n,e,t){const r=[];if(t){(0,q.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,s);c&&r.push(c)})}if(e){let s=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(u+1));break}}else s.push(c)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function DN(n,e,t,r){e.type===Xc.MERGE&&null!==e.source.queryId&&((0,q.hu)(Um(n.viewCache_),"We should always have a full cache before handling merges"),(0,q.hu)(gA(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,u=function Ck(n,e,t,r,s){const u=new Ek;let c,m;if(t.type===Xc.OVERWRITE){const C=t;C.source.fromUser?c=TP(n,e,C.path,C.snap,r,s,u):((0,q.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||e.serverCache.isFiltered()&&!vn(C.path),c=vA(n,e,C.path,C.snap,r,s,m,u))}else if(t.type===Xc.MERGE){const C=t;C.source.fromUser?c=function Ak(n,e,t,r,s,u,c){let m=e;return r.foreach((_,C)=>{const P=Xr(t,_);IN(e,yn(P))&&(m=TP(n,m,P,C,s,u,c))}),r.foreach((_,C)=>{const P=Xr(t,_);IN(e,yn(P))||(m=TP(n,m,P,C,s,u,c))}),m}(n,e,C.path,C.children,r,s,u):((0,q.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||e.serverCache.isFiltered(),c=CP(n,e,C.path,C.children,r,s,m,u))}else if(t.type===Xc.ACK_USER_WRITE){const C=t;c=C.revert?function Rk(n,e,t,r,s,u){let c;if(null!=yA(r,t))return e;{const m=new wP(r,e,s),_=e.eventCache.getNode();let C;if(vn(t)||".priority"===yn(t)){let P;if(e.serverCache.isFullyInitialized())P=_A(r,Um(e));else{const k=e.serverCache.getNode();(0,q.hu)(k instanceof hn,"serverChildren would be complete if leaf node"),P=EP(r,k)}C=n.filter.updateFullNode(_,P,u)}else{const P=yn(t);let k=IP(r,P,e.serverCache);null==k&&e.serverCache.isCompleteForChild(P)&&(k=_.getImmediateChild(P)),C=null!=k?n.filter.updateChild(_,P,k,br(t),m,u):e.eventCache.getNode().hasChild(P)?n.filter.updateChild(_,P,hn.EMPTY_NODE,br(t),m,u):_,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=_A(r,Um(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=yA(r,Wn()),z0(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,s,u):function bk(n,e,t,r,s,u,c){if(null!=yA(s,t))return e;const m=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(vn(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return vA(n,e,t,_.getNode().getChild(t),s,u,m,c);if(vn(t)){let C=new Fr(null);return _.getNode().forEachChild(Jc,(P,k)=>{C=C.set(new ar(P),k)}),CP(n,e,t,C,s,u,m,c)}return e}{let C=new Fr(null);return r.foreach((P,k)=>{const G=Xr(t,P);_.isCompleteForPath(G)&&(C=C.set(P,_.getNode().getChild(G)))}),CP(n,e,t,C,s,u,m,c)}}(n,e,C.path,C.affectedTree,r,s,u)}else{if(t.type!==Xc.LISTEN_COMPLETE)throw(0,q.g5)("Unknown operation type: "+t.type);c=function Sk(n,e,t,r,s){const u=e.serverCache;return EN(n,cN(e,u.getNode(),u.isFullyInitialized()||vn(t),u.isFiltered()),t,r,vN,s)}(n,e,t.path,r,u)}const _=u.getChanges();return function Dk(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=gA(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(oN(gA(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,s,e,t,r);return function Tk(n,e){(0,q.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,q.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,q.hu)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,AN(n,u.changes,u.viewCache.eventCache.getNode(),null)}function AN(n,e,t,r){return function nk(n,e,t,r){const s=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function HO(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),G0(n,s,"child_removed",e,r,t),G0(n,s,"child_added",e,r,t),G0(n,s,"child_moved",u,r,t),G0(n,s,"child_changed",e,r,t),G0(n,s,"value",e,r,t),s}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let EA,wA;class bN{constructor(){this.views=new Map}}function DP(n,e,t,r){const s=e.source.queryId;if(null!==s){const u=n.views.get(s);return(0,q.hu)(null!=u,"SyncTree gave us an op for an invalid query."),DN(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(DN(c,e,t,r));return u}}function SN(n,e,t,r,s){const c=n.views.get(e._queryIdentifier);if(!c){let m=_A(t,s?r:null),_=!1;m?_=!0:r instanceof hn?(m=EP(t,r),_=!1):(m=hn.EMPTY_NODE,_=!1);const C=pA(new fp(m,_,!1),new fp(r,s,!1));return new Pk(e,C)}return c}function RN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function gp(n,e){let t=null;for(const r of n.views.values())t=t||Nk(r,e);return t}function PN(n,e){return e._queryParams.loadsAllData()?IA(n):n.views.get(e._queryIdentifier)}function xN(n,e){return null!=PN(n,e)}function mp(n){return null!=IA(n)}function IA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let $k=1;class MN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fr(null),this.pendingWriteTree_=function yk(){return{visibleWrites:Ul.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function AP(n,e,t,r,s){return function ok(n,e,t,r,s){(0,q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=W0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,s),s?mv(n,new Vm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function _p(n,e,t=!1){const r=function uk(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function lk(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,q.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,u=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const m=n.allWrites[c];m.visible&&(c>=t&&ck(m,r.path)?s=!1:Uu(r.path,m.path)&&(u=!0)),c--}return!!s&&(u?(function dk(n){n.visibleWrites=pN(n.allWrites,hk,Wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=dN(n.visibleWrites,r.path):As(r.children,_=>{n.visibleWrites=dN(n.visibleWrites,Xr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let u=new Fr(null);return null!=r.snap?u=u.set(Wn(),!0):As(r.children,c=>{u=u.set(new ar(c),!0)}),mv(n,new fA(r.path,u,t))}return[]}function q0(n,e,t){return mv(n,new Vm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function TA(n,e,t,r,s=!1){const u=e._path,c=n.syncPointTree_.get(u);let m=[];if(c&&("default"===e._queryIdentifier||xN(c,e))){const _=function Bk(n,e,t,r){const s=e._queryIdentifier,u=[];let c=[];const m=mp(n);if("default"===s)for(const[_,C]of n.views.entries())c=c.concat(CN(C,t,r)),TN(C)&&(n.views.delete(_),C.query._queryParams.loadsAllData()||u.push(C.query));else{const _=n.views.get(s);_&&(c=c.concat(CN(_,t,r)),TN(_)&&(n.views.delete(s),_.query._queryParams.loadsAllData()||u.push(_.query)))}return m&&!mp(n)&&u.push(new(function Fk(){return(0,q.hu)(EA,"Reference.ts has not been loaded"),EA}())(e._repo,e._path)),{removed:u,events:c}}(c,e,t,r);(function Vk(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(u));const C=_.removed;if(m=_.events,!s){const P=-1!==C.findIndex(G=>G._queryParams.loadsAllData()),k=n.syncPointTree_.findOnPath(u,(G,J)=>mp(J));if(P&&!k){const G=n.syncPointTree_.subtree(u);if(!G.isEmpty()){const J=function Yk(n){return n.fold((e,t,r)=>{if(t&&mp(t))return[IA(t)];{let s=[];return t&&(s=RN(t)),As(r,(u,c)=>{s=s.concat(c)}),s}})}(G);for(let he=0;he<J.length;++he){const Re=J[he],Ne=Re.query,ht=LN(n,Re);n.listenProvider_.startListening(K0(Ne),Z0(n,Ne),ht.hashFn,ht.onComplete)}}}!k&&C.length>0&&!r&&(P?n.listenProvider_.stopListening(K0(e),null):C.forEach(G=>{const J=n.queryToTagMap.get(DA(G));n.listenProvider_.stopListening(K0(G),J)}))}!function Qk(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=DA(r),u=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(u)}}}(n,C)}return m}function NN(n,e,t,r){const s=SP(n,r);if(null!=s){const u=RP(s),c=u.path,m=u.queryId,_=Mo(c,e);return PP(n,c,new Vm(gP(m),_,t))}return[]}function bP(n,e,t,r=!1){const s=e._path;let u=null,c=!1;n.syncPointTree_.foreachOnPath(s,(G,J)=>{const he=Mo(G,s);u=u||gp(J,he),c=c||mp(J)});let _,m=n.syncPointTree_.get(s);m?(c=c||mp(m),u=u||gp(m,Wn())):(m=new bN,n.syncPointTree_=n.syncPointTree_.set(s,m)),null!=u?_=!0:(_=!1,u=hn.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((J,he)=>{const Re=gp(he,Wn());Re&&(u=u.updateImmediateChild(J,Re))}));const C=xN(m,e);if(!C&&!e._queryParams.loadsAllData()){const G=DA(e);(0,q.hu)(!n.queryToTagMap.has(G),"View does not exist, but we have a tag");const J=function Jk(){return $k++}();n.queryToTagMap.set(G,J),n.tagToQueryMap.set(J,G)}let k=function Uk(n,e,t,r,s,u){const c=SN(n,e,r,s,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Ok(n,e){n.eventRegistrations_.push(e)}(c,t),function kk(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Lr,(u,c)=>{r.push(hv(u,c))}),t.isFullyInitialized()&&r.push(oN(t.getNode())),AN(n,r,t.getNode(),e)}(c,t)}(m,e,t,mA(n.pendingWriteTree_,s),u,_);if(!C&&!c&&!r){const G=PN(m,e);k=k.concat(function Xk(n,e,t){const r=e._path,s=Z0(n,e),u=LN(n,t),c=n.listenProvider_.startListening(K0(e),s,u.hashFn,u.onComplete),m=n.syncPointTree_.subtree(r);if(s)(0,q.hu)(!mp(m.value),"If we're adding a query, it shouldn't be shadowed");else{const _=m.fold((C,P,k)=>{if(!vn(C)&&P&&mp(P))return[IA(P).query];{let G=[];return P&&(G=G.concat(RN(P).map(J=>J.query))),As(k,(J,he)=>{G=G.concat(he)}),G}});for(let C=0;C<_.length;++C){const P=_[C];n.listenProvider_.stopListening(K0(P),Z0(n,P))}}return c}(n,e,G))}return k}function CA(n,e,t){const s=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,m)=>{const C=gp(m,Mo(c,e));if(C)return C});return gN(s,e,u,t,!0)}function mv(n,e){return ON(e,n.syncPointTree_,null,mA(n.pendingWriteTree_,Wn()))}function ON(n,e,t,r){if(vn(n.path))return kN(n,e,t,r);{const s=e.get(Wn());null==t&&null!=s&&(t=gp(s,Wn()));let u=[];const c=yn(n.path),m=n.operationForChild(c),_=e.children.get(c);if(_&&m){const C=t?t.getImmediateChild(c):null,P=_N(r,c);u=u.concat(ON(m,_,C,P))}return s&&(u=u.concat(DP(s,n,r,t))),u}}function kN(n,e,t,r){const s=e.get(Wn());null==t&&null!=s&&(t=gp(s,Wn()));let u=[];return e.children.inorderTraversal((c,m)=>{const _=t?t.getImmediateChild(c):null,C=_N(r,c),P=n.operationForChild(c);P&&(u=u.concat(kN(P,m,_,C)))}),s&&(u=u.concat(DP(s,n,r,t))),u}function LN(n,e){const t=e.query,r=Z0(n,t);return{hashFn:()=>(function xk(n){return n.viewCache_.serverCache.getNode()}(e)||hn.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return r?function qk(n,e,t){const r=SP(n,t);if(r){const s=RP(r),u=s.path,c=s.queryId,m=Mo(u,e);return PP(n,u,new $0(gP(c),m))}return[]}(n,t._path,r):function Wk(n,e){return mv(n,new $0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function z1(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(s,t);return TA(n,t,null,u)}}}}function Z0(n,e){const t=DA(e);return n.queryToTagMap.get(t)}function DA(n){return n._path.toString()+"$"+n._queryIdentifier}function SP(n,e){return n.tagToQueryMap.get(e)}function RP(n){const e=n.indexOf("$");return(0,q.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ar(n.substr(0,e))}}function PP(n,e,t){const r=n.syncPointTree_.get(e);return(0,q.hu)(r,"Missing sync point for query tag that we're tracking"),DP(r,t,mA(n.pendingWriteTree_,e),null)}function K0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Hk(){return(0,q.hu)(wA,"Reference.ts has not been loaded"),wA}())(n._repo,n._path):n}class xP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new xP(t)}node(){return this.node_}}class MP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Xr(this.path_,e);return new MP(this.syncTree_,t)}node(){return CA(this.syncTree_,this.path_)}}const eL=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},FN=function(n,e,t){return n&&"object"==typeof n?((0,q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?tL(n[".sv"],e,t):"object"==typeof n[".sv"]?nL(n[".sv"],e):void(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},tL=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,q.hu)(!1,"Unexpected server value: "+n)},nL=function(n,e,t){n.hasOwnProperty("increment")||(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,q.hu)(!1,"Unexpected increment value: "+r);const s=e.node();if((0,q.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const c=s.getValue();return"number"!=typeof c?r:c+r},VN=function(n,e,t,r){return OP(e,new MP(t,n),r)},NP=function(n,e,t){return OP(n,new xP(e),t)};function OP(n,e,t){const r=n.getPriority().val(),s=FN(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,m=FN(c.getValue(),e,t);return m!==c.getValue()||s!==c.getPriority().val()?new cv(m,ci(s)):n}{const c=n;return u=c,s!==c.getPriority().val()&&(u=u.updatePriority(new cv(s))),c.forEachChild(Lr,(m,_)=>{const C=OP(_,e.getImmediateChild(m),t);C!==_&&(u=u.updateImmediateChild(m,C))}),u}}class kP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function AA(n,e){let t=e instanceof ar?e:new ar(e),r=n,s=yn(t);for(;null!==s;){const u=(0,q.DV)(r.node.children,s)||{children:{},childCount:0};r=new kP(s,r,u),t=br(t),s=yn(t)}return r}function jm(n){return n.node.value}function LP(n,e){n.node.value=e,FP(n)}function UN(n){return n.node.childCount>0}function bA(n,e){As(n.node.children,(t,r)=>{e(new kP(t,n,r))})}function BN(n,e,t,r){t&&!r&&e(n),bA(n,s=>{BN(s,e,!0,r)}),t&&r&&e(n)}function Y0(n){return new ar(null===n.parent?n.name:Y0(n.parent)+"/"+n.name)}function FP(n){null!==n.parent&&function sL(n,e,t){const r=function rL(n){return void 0===jm(n)&&!UN(n)}(t),s=(0,q.r3)(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,FP(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,FP(n))}(n.parent,n.name,n)}const oL=/[\[\].#$\/\u0000-\u001F\u007F]/,aL=/[\[\].#$\u0000-\u001F\u007F]/,VP=10485760,SA=function(n){return"string"==typeof n&&0!==n.length&&!oL.test(n)},jN=function(n){return"string"==typeof n&&0!==n.length&&!aL.test(n)},Q0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!tA(n)||n&&"object"==typeof n&&(0,q.r3)(n,".sv")},ed=function(n,e,t,r){r&&void 0===e||J0((0,q.gK)(n,"value"),e,t)},J0=function(n,e,t){const r=t instanceof ar?new CO(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Lm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Lm(r)+" with contents = "+e.toString());if(tA(e))throw new Error(n+"contains "+e.toString()+" "+Lm(r));if("string"==typeof e&&e.length>VP/3&&(0,q.ug)(e)>VP)throw new Error(n+"contains a string greater than "+VP+" utf8 bytes "+Lm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,u=!1;if(As(e,(c,m)=>{if(".value"===c)s=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!SA(c)))throw new Error(n+" contains an invalid key ("+c+") "+Lm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function DO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,q.ug)(e),QM(n)})(r,c),J0(n,m,r),function AO(n){const e=n.parts_.pop();n.byteLength_-=(0,q.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),s&&u)throw new Error(n+' contains ".value" child '+Lm(r)+" in addition to actual children.")}},HN=function(n,e,t,r){if(r&&void 0===e)return;const s=(0,q.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const u=[];As(e,(c,m)=>{const _=new ar(c);if(J0(s,m,Xr(t,_)),".priority"===eP(_)&&!Q0(m))throw new Error(s+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=L0(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!SA(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(TO);let s=null;for(t=0;t<e.length;t++){if(r=e[t],null!==s&&Uu(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,u)},UP=function(n,e,t){if(!t||void 0!==e){if(tA(e))throw new Error((0,q.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Q0(e))throw new Error((0,q.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},X0=function(n,e,t,r){if(!(r&&void 0===t||SA(t)))throw new Error((0,q.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ew=function(n,e,t,r){if(!(r&&void 0===t||jN(t)))throw new Error((0,q.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cL=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ew(n,e,t,r)},Bu=function(n,e){if(".info"===yn(e))throw new Error(n+" failed = Can't modify data under /.info/")},$N=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!SA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jN(n)}(t))throw new Error((0,q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class dL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function RA(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],u=s.getPath();null!==t&&!tP(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(s)}t&&n.eventLists_.push(t)}function GN(n,e,t){RA(n,t),zN(n,r=>tP(r,e))}function $a(n,e,t){RA(n,t),zN(n,r=>Uu(r,e)||Uu(e,r))}function zN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];s&&(e(s.path)?(hL(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function hL(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Om&&Ds("event: "+t.toString()),uv(r)}}}const WN="repo_interrupt",fL=25;class pL{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hA(),this.transactionQueueTree_=new kP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qN(n){const t=n.infoData_.getNode(new ar(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function tw(n){return eL({timestamp:qN(n)})}function ZN(n,e,t,r,s){n.dataUpdateCount++;const u=new ar(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(r){const _=(0,q.UI)(t,C=>ci(C));c=function Zk(n,e,t,r){const s=SP(n,r);if(s){const u=RP(s),c=u.path,m=u.queryId,_=Mo(c,e),C=Fr.fromObject(t);return PP(n,c,new pv(gP(m),_,C))}return[]}(n.serverSyncTree_,u,_,s)}else{const _=ci(t);c=NN(n.serverSyncTree_,u,_,s)}else if(r){const _=(0,q.UI)(t,C=>ci(C));c=function zk(n,e,t){const r=Fr.fromObject(t);return mv(n,new pv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,_)}else{const _=ci(t);c=q0(n.serverSyncTree_,u,_)}let m=u;c.length>0&&(m=yv(n,u)),$a(n.eventQueue_,m,c)}function KN(n,e){BP(n,"connected",e),!1===e&&function vL(n){_v(n,"onDisconnectEvents");const e=tw(n),t=hA();hP(n.onDisconnect_,Wn(),(s,u)=>{const c=VN(s,u,n.serverSyncTree_,e);fv(t,s,c)});let r=[];hP(t,Wn(),(s,u)=>{r=r.concat(q0(n.serverSyncTree_,s,u));const c=GP(n,s);yv(n,c)}),n.onDisconnect_=hA(),$a(n.eventQueue_,Wn(),r)}(n)}function BP(n,e,t){const r=new ar("/.info/"+e),s=ci(t);n.infoData_.updateSnapshot(r,s);const u=q0(n.infoSyncTree_,r,s);$a(n.eventQueue_,r,u)}function PA(n){return n.nextWriteId_++}function jP(n,e,t,r,s){_v(n,"set",{path:e.toString(),value:t,priority:r});const u=tw(n),c=ci(t,r),m=CA(n.serverSyncTree_,e),_=NP(c,m,u),C=PA(n),P=AP(n.serverSyncTree_,e,_,C,!0);RA(n.eventQueue_,P),n.server_.put(e.toString(),c.val(!0),(G,J)=>{const he="ok"===G;he||po("set at "+e+" failed: "+G);const Re=_p(n.serverSyncTree_,C,!he);$a(n.eventQueue_,e,Re),yp(0,s,G,J)});const k=GP(n,e);yv(n,k),$a(n.eventQueue_,k,[])}function EL(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{"ok"===r&&dP(n.onDisconnect_,e),yp(0,t,r,s)})}function YN(n,e,t,r){const s=ci(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,c)=>{"ok"===u&&fv(n.onDisconnect_,e,s),yp(0,r,u,c)})}function HP(n,e,t){let r;r=".info"===yn(e._path)?TA(n.infoSyncTree_,e,t):TA(n.serverSyncTree_,e,t),GN(n.eventQueue_,e._path,r)}function QN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(WN)}function _v(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ds(t,...e)}function yp(n,e,t,r){e&&uv(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let u=s;r&&(u+=": "+r);const c=new Error(u);c.code=s,e(c)}})}function $P(n,e,t){return CA(n.serverSyncTree_,e,t)||hn.EMPTY_NODE}function xA(n,e=n.transactionQueueTree_){if(e||MA(n,e),jm(e)){const t=XN(n,e);(0,q.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function AL(n,e,t){const r=t.map(C=>C.currentWriteId),s=$P(n,e,r);let u=s;const c=s.hash();for(let C=0;C<t.length;C++){const P=t[C];(0,q.hu)(0===P.status,"tryToSendTransactionQueue_: items in queue should all be run."),P.status=1,P.retryCount++;const k=Mo(e,P.path);u=u.updateChild(k,P.currentOutputSnapshotRaw)}const m=u.val(!0),_=e;n.server_.put(_.toString(),m,C=>{_v(n,"transaction put response",{path:_.toString(),status:C});let P=[];if("ok"===C){const k=[];for(let G=0;G<t.length;G++)t[G].status=2,P=P.concat(_p(n.serverSyncTree_,t[G].currentWriteId)),t[G].onComplete&&k.push(()=>t[G].onComplete(null,!0,t[G].currentOutputSnapshotResolved)),t[G].unwatcher();MA(n,AA(n.transactionQueueTree_,e)),xA(n,n.transactionQueueTree_),$a(n.eventQueue_,e,P);for(let G=0;G<k.length;G++)uv(k[G])}else{if("datastale"===C)for(let k=0;k<t.length;k++)t[k].status=3===t[k].status?4:0;else{po("transaction at "+_.toString()+" failed: "+C);for(let k=0;k<t.length;k++)t[k].status=4,t[k].abortReason=C}yv(n,e)}},c)}(n,Y0(e),t)}else UN(e)&&bA(e,t=>{xA(n,t)})}function yv(n,e){const t=JN(n,e),r=Y0(t);return function bL(n,e,t){if(0===e.length)return;const r=[];let s=[];const c=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const _=e[m],C=Mo(t,_.path);let k,P=!1;if((0,q.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)P=!0,k=_.abortReason,s=s.concat(_p(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=fL)P=!0,k="maxretry",s=s.concat(_p(n.serverSyncTree_,_.currentWriteId,!0));else{const G=$P(n,_.path,c);_.currentInputSnapshot=G;const J=e[m].update(G.val());if(void 0!==J){J0("transaction failed: Data returned ",J,_.path);let he=ci(J);"object"==typeof J&&null!=J&&(0,q.r3)(J,".priority")||(he=he.updatePriority(G.getPriority()));const Ne=_.currentWriteId,ht=tw(n),mt=NP(he,G,ht);_.currentOutputSnapshotRaw=he,_.currentOutputSnapshotResolved=mt,_.currentWriteId=PA(n),c.splice(c.indexOf(Ne),1),s=s.concat(AP(n.serverSyncTree_,_.path,mt,_.currentWriteId,_.applyLocally)),s=s.concat(_p(n.serverSyncTree_,Ne,!0))}else P=!0,k="nodata",s=s.concat(_p(n.serverSyncTree_,_.currentWriteId,!0))}$a(n.eventQueue_,t,s),s=[],P&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===k?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(k),!1,null)))}MA(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)uv(r[m]);xA(n,n.transactionQueueTree_)}(n,XN(n,t),r),r}function JN(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===jm(r);)r=AA(r,t),t=yn(e=br(e));return r}function XN(n,e){const t=[];return e1(n,e,t),t.sort((r,s)=>r.order-s.order),t}function e1(n,e,t){const r=jm(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);bA(e,s=>{e1(n,s,t)})}function MA(n,e){const t=jm(e);if(t){let r=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[r]=t[s],r++);t.length=r,LP(e,t.length>0?t:void 0)}bA(e,r=>{MA(n,r)})}function GP(n,e){const t=Y0(JN(n,e)),r=AA(n.transactionQueueTree_,e);return function iL(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,s=>{zP(n,s)}),zP(n,r),BN(r,s=>{zP(n,s)}),t}function zP(n,e){const t=jm(e);if(t){const r=[];let s=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,q.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,q.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(_p(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?LP(e,void 0):t.length=u+1,$a(n.eventQueue_,Y0(e),s);for(let c=0;c<r.length;c++)uv(r[c])}}const WP=function(n,e){const t=PL(n),r=t.namespace;return"firebase.com"===t.domain&&Qc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Qc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&po("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ZR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ar(t.pathString)}},PL=function(n){let e="",t="",r="",s="",u="",c=!0,m="https",_=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(m=n.substring(0,C-1),n=n.substring(C+2));let P=n.indexOf("/");-1===P&&(P=n.length);let k=n.indexOf("?");-1===k&&(k=n.length),e=n.substring(0,Math.min(P,k)),P<k&&(s=function SL(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(P,k)));const G=function RL(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):po(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,k)));C=e.indexOf(":"),C>=0?(c="https"===m||"wss"===m,_=parseInt(e.substring(C+1),10)):C=e.length;const J=e.slice(0,C);if("localhost"===J.toLowerCase())t="localhost";else if(J.split(".").length<=2)t=J;else{const he=e.indexOf(".");r=e.substring(0,he).toLowerCase(),t=e.substring(he+1),u=r}"ns"in G&&(u=G.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:m,pathString:s,namespace:u}},t1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xL=function(){let n=0;const e=[];return function(t){const r=t===n;let s;n=t;const u=new Array(8);for(s=7;s>=0;s--)u[s]=t1.charAt(t%64),t=Math.floor(t/64);(0,q.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)c+=t1.charAt(e[s]);return(0,q.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class n1{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,q.Wl)(this.snapshot.exportVal())}}class r1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class i1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new q.BH;return EL(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bu("OnDisconnect.remove",this._path);const e=new q.BH;return YN(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bu("OnDisconnect.set",this._path),ed("OnDisconnect.set",e,this._path,!1);const t=new q.BH;return YN(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Bu("OnDisconnect.setWithPriority",this._path),ed("OnDisconnect.setWithPriority",e,this._path,!1),UP("OnDisconnect.setWithPriority",t,!1);const r=new q.BH;return function IL(n,e,t,r,s){const u=ci(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,m)=>{"ok"===c&&fv(n.onDisconnect_,e,u),yp(0,s,c,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Bu("OnDisconnect.update",this._path),HN("OnDisconnect.update",e,this._path,!1);const t=new q.BH;return function wL(n,e,t,r){if((0,q.xb)(t))return Ds("onDisconnect().update() called with empty data.  Don't do anything."),void yp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,u)=>{"ok"===s&&As(t,(c,m)=>{const _=ci(m);fv(n.onDisconnect_,Xr(e,c),_)}),yp(0,r,s,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ca{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return vn(this._path)?null:eP(this._path)}get ref(){return new ju(this._repo,this._path)}get _queryIdentifier(){const e=uN(this._queryParams),t=WR(e);return"{}"===t?"default":t}get _queryObject(){return uN(this._queryParams)}isEqual(e){if(!((e=(0,q.m9)(e))instanceof ca))return!1;const t=this._repo===e._repo,r=tP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function wO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function NA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function vp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Jc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==cp)throw new Error(r);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==hh)throw new Error(r);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===Lr){if(null!=e&&!Q0(e)||null!=t&&!Q0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,q.hu)(n.getIndex()instanceof oP||n.getIndex()===aP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ju extends ca{constructor(e,t){super(e,t,new lA,!1)}get parent(){const e=YM(this._path);return null===e?null:new ju(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Hm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ar(e),r=$m(this.ref,e);return new Hm(this._node.getChild(t),r,Lr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,s)=>e(new Hm(s,$m(this.ref,r),Lr)))}hasChild(e){const t=new ar(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function s1(n,e){return(n=(0,q.m9)(n))._checkNotDeleted("ref"),void 0!==e?$m(n._root,e):n._root}function o1(n,e){(n=(0,q.m9)(n))._checkNotDeleted("refFromURL");const t=WP(e,n._repo.repoInfo_.nodeAdmin);$N("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Qc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),s1(n,t.path.toString())}function $m(n,e){return null===yn((n=(0,q.m9)(n))._path)?cL("child","path",e,!1):ew("child","path",e,!1),new ju(n._repo,Xr(n._path,e))}function ZP(n,e){n=(0,q.m9)(n),Bu("set",n._path),ed("set",e,n._path,!1);const t=new q.BH;return jP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function LL(n,e){HN("update",e,n._path,!1);const t=new q.BH;return function yL(n,e,t,r){_v(n,"update",{path:e.toString(),value:t});let s=!0;const u=tw(n),c={};if(As(t,(m,_)=>{s=!1,c[m]=VN(Xr(e,m),ci(_),n.serverSyncTree_,u)}),s)Ds("update() called with empty data.  Don't do anything."),yp(0,r,"ok",void 0);else{const m=PA(n),_=function Gk(n,e,t,r){!function ak(n,e,t,r){(0,q.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=_P(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const s=Fr.fromObject(t);return mv(n,new pv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,c,m);RA(n.eventQueue_,_),n.server_.merge(e.toString(),t,(C,P)=>{const k="ok"===C;k||po("update at "+e+" failed: "+C);const G=_p(n.serverSyncTree_,m,!k),J=G.length>0?yv(n,e):e;$a(n.eventQueue_,J,G),yp(0,r,C,P)}),As(t,C=>{const P=GP(n,Xr(e,C));yv(n,P)}),$a(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function FL(n){n=(0,q.m9)(n);const e=new qP(()=>{}),t=new nw(e);return function _L(n,e,t){const r=function Kk(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,P)=>{const k=Mo(C,t);r=r||gp(P,k)});let s=n.syncPointTree_.get(t);s?r=r||gp(s,Wn()):(s=new bN,n.syncPointTree_=n.syncPointTree_.set(t,s));const u=null!=r,c=u?new fp(r,!0,!1):null;return function Mk(n){return gA(n.viewCache_)}(SN(s,e,mA(n.pendingWriteTree_,e._path),u?c.getNode():hn.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(s=>{const u=ci(s).withIndex(e._queryParams.getIndex());let c;if(bP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=q0(n.serverSyncTree_,e._path,u);else{const m=Z0(n.serverSyncTree_,e);c=NN(n.serverSyncTree_,e._path,u,m)}return $a(n.eventQueue_,e._path,c),TA(n.serverSyncTree_,e,t,null,!0),u},s=>(_v(n,"get for query "+(0,q.Wl)(e)+" failed: "+s),Promise.reject(new Error(s))))}(n._repo,n,t).then(r=>new Hm(r,new ju(n._repo,n._path),n._queryParams.getIndex()))}class nw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new n1("value",this,new Hm(e.snapshotNode,new ju(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new r1(this,e,t):null}matches(e){return e instanceof nw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new r1(this,e,t):null}createEvent(e,t){(0,q.hu)(null!=e.childName,"Child events should have a childName.");const r=$m(new ju(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new n1(e.type,this,new Hm(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function rw(n,e,t,r,s){let u;if("object"==typeof r&&(u=void 0,s=r),"function"==typeof r&&(u=r),s&&s.onlyOnce){const _=t,C=(P,k)=>{HP(n._repo,n,m),_(P,k)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new qP(t,u||void 0),m="value"===e?new nw(c):new kA(e,c);return function TL(n,e,t){let r;r=".info"===yn(e._path)?bP(n.infoSyncTree_,e,t):bP(n.serverSyncTree_,e,t),GN(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>HP(n._repo,n,m)}function KP(n,e,t,r){return rw(n,"value",e,t,r)}function a1(n,e,t,r){return rw(n,"child_added",e,t,r)}function u1(n,e,t,r){return rw(n,"child_changed",e,t,r)}function l1(n,e,t,r){return rw(n,"child_moved",e,t,r)}function c1(n,e,t,r){return rw(n,"child_removed",e,t,r)}function d1(n,e,t){let r=null;const s=t?new qP(t):null;"value"===e?r=new nw(s):e&&(r=new kA(e,s)),HP(n._repo,n,r)}class Bl{}class h1 extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("endAt",this._value,e._path,!0);const t=cP(e._queryParams,this._value,this._key);if(OA(t),vp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class UL extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("endBefore",this._value,e._path,!1);const t=function ZO(n,e,t){let r;return r=cP(n,e,n.index_===Jc||t?t:cp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(OA(t),vp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class f1 extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("startAt",this._value,e._path,!0);const t=lP(e._queryParams,this._value,this._key);if(OA(t),vp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class HL extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ed("startAfter",this._value,e._path,!1);const t=function qO(n,e,t){let r;return r=lP(n,e,n.index_===Jc||t?t:hh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(OA(t),vp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class GL extends Bl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ca(e._repo,e._path,function zO(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class WL extends Bl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ca(e._repo,e._path,function WO(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ZL extends Bl{constructor(e){super(),this._path=e}_apply(e){NA(e,"orderByChild");const t=new ar(this._path);if(vn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new oP(t),s=cA(e._queryParams,r);return vp(s),new ca(e._repo,e._path,s,!0)}}class YL extends Bl{_apply(e){NA(e,"orderByKey");const t=cA(e._queryParams,Jc);return vp(t),new ca(e._repo,e._path,t,!0)}}class JL extends Bl{_apply(e){NA(e,"orderByPriority");const t=cA(e._queryParams,Lr);return vp(t),new ca(e._repo,e._path,t,!0)}}class eF extends Bl{_apply(e){NA(e,"orderByValue");const t=cA(e._queryParams,aP);return vp(t),new ca(e._repo,e._path,t,!0)}}class nF extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ed("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new h1(this._value,this._key)._apply(new f1(this._value,this._key)._apply(e))}}function jl(n,...e){let t=(0,q.m9)(n);for(const r of e)t=r._apply(t);return t}(function Lk(n){(0,q.hu)(!EA,"__referenceConstructor has already been defined"),EA=n})(ju),function jk(n){(0,q.hu)(!wA,"__referenceConstructor has already been defined"),wA=n}(ju);const YP={};function QP(n,e,t,r,s){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||Qc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ds("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,C,c=WP(u,s),m=c.repoInfo;typeof process<"u"&&process.env&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(_=!0,u=`http://${C}?ns=${m.namespace}`,c=WP(u,s),m=c.repoInfo):_=!c.repoInfo.secure;const P=s&&_?new k0(k0.OWNER):new Q1(n.name,n.options,e);$N("Invalid Firebase Database URL",c),vn(c.path)||Qc("Database URL must point to the root of a Firebase Database (not including a child path).");const k=function aF(n,e,t,r){let s=YP[e.name];s||(s={},YP[e.name]=s);let u=s[n.toURLString()];return u&&Qc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new pL(n,false,t,r),s[n.toURLString()]=u,u}(m,n,P,new Y1(n.name,t));return new lF(k,n)}class lF{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gL(n,e,t){if(n.stats_=QR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new dA(n.repoInfo_,(r,s,u,c)=>{ZN(n,r,s,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>KN(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,q.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fm(n.repoInfo_,e,(r,s,u,c)=>{ZN(n,r,s,u,c)},r=>{KN(n,r)},r=>{!function mL(n,e){As(e,(t,r)=>{BP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function eO(n,e){const t=n.toString();return YR[t]||(YR[t]=e()),YR[t]}(n.repoInfo_,()=>new ek(n.stats_,n.server_)),n.infoData_=new KO,n.infoSyncTree_=new MN({startListening:(r,s,u,c)=>{let m=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(m=q0(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),m},stopListening:()=>{}}),BP(n,"connected",!1),n.serverSyncTree_=new MN({startListening:(r,s,u,c)=>(n.server_.listen(r,u,s,(m,_)=>{const C=c(m,_);$a(n.eventQueue_,r._path,C)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ju(this._repo,Wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function oF(n,e){const t=YP[e];(!t||t[n.key]!==n)&&Qc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),QN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Qc("Cannot call "+e+" on a deleted database.")}}function g1(){VM.IS_TRANSPORT_INITIALIZED&&po("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function cF(){g1(),dp.forceDisallow()}function dF(){g1(),lv.forceDisallow(),dp.forceAllow()}function pF(n,e){yM(n,e)}const mF={".sv":"timestamp"};class vF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Fm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function gF(n){$R(Rr.SDK_VERSION),(0,Rr._registerComponent)(new Di.wA("database",(e,{instanceIdentifier:t})=>QP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Rr.registerVersion)(hM,"1.0.1",n),(0,Rr.registerVersion)(hM,"1.0.1","esm2017")}();const TF=new hr.Yd("@firebase/database-compat"),_1=function(n){TF.warn("FIREBASE WARNING: "+n)};class AF{constructor(e){this._delegate=e}cancel(e){(0,q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,q.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,q.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,q.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,q.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const s=this._delegate.setWithPriority(e,t);return r&&s.then(()=>r(null),u=>r(u)),s}update(e,t){if((0,q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let u=0;u<e.length;++u)s[""+u]=e[u];e=s,_1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,q.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),s=>t(s)),r}}class bF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ep{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,q.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),ew("DataSnapshot.child","path",e,!1),new Ep(this._database,this._delegate.child(e))}hasChild(e){return(0,q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ew("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,q.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ep(this._database,t)))}hasChildren(){return(0,q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,q.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ga(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class zs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,s){var u;(0,q.Dv)("Query.on",2,4,arguments.length),(0,q.Wj)("Query.on","callback",t,!1);const c=zs.getCancelAndContextArgs_("Query.on",r,s),m=(C,P)=>{t.call(c.context,new Ep(this.database,C),P)};m.userCallback=t,m.context=c.context;const _=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return KP(this._delegate,m,_),t;case"child_added":return a1(this._delegate,m,_),t;case"child_removed":return c1(this._delegate,m,_),t;case"child_changed":return u1(this._delegate,m,_),t;case"child_moved":return l1(this._delegate,m,_),t;default:throw new Error((0,q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,q.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,q.Wj)("Query.off","callback",t,!0),(0,q.lb)("Query.off","context",r,!0),t){const s=()=>{};s.userCallback=t,s.context=r,d1(this._delegate,e,s)}else d1(this._delegate,e)}get(){return FL(this._delegate).then(e=>new Ep(this.database,e))}once(e,t,r,s){(0,q.Dv)("Query.once",1,4,arguments.length),(0,q.Wj)("Query.once","callback",t,!0);const u=zs.getCancelAndContextArgs_("Query.once",r,s),c=new q.BH,m=(C,P)=>{const k=new Ep(this.database,C);t&&t.call(u.context,k,P),c.resolve(k)};m.userCallback=t,m.context=u.context;const _=C=>{u.cancel&&u.cancel.call(u.context,C),c.reject(C)};switch(e){case"value":KP(this._delegate,m,_,{onlyOnce:!0});break;case"child_added":a1(this._delegate,m,_,{onlyOnce:!0});break;case"child_removed":c1(this._delegate,m,_,{onlyOnce:!0});break;case"child_changed":u1(this._delegate,m,_,{onlyOnce:!0});break;case"child_moved":l1(this._delegate,m,_,{onlyOnce:!0});break;default:throw new Error((0,q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,q.Dv)("Query.limitToFirst",1,1,arguments.length),new zs(this.database,jl(this._delegate,function zL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new GL(n)}(e)))}limitToLast(e){return(0,q.Dv)("Query.limitToLast",1,1,arguments.length),new zs(this.database,jl(this._delegate,function qL(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new WL(n)}(e)))}orderByChild(e){return(0,q.Dv)("Query.orderByChild",1,1,arguments.length),new zs(this.database,jl(this._delegate,function KL(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ew("orderByChild","path",n,!1),new ZL(n)}(e)))}orderByKey(){return(0,q.Dv)("Query.orderByKey",0,0,arguments.length),new zs(this.database,jl(this._delegate,function QL(){return new YL}()))}orderByPriority(){return(0,q.Dv)("Query.orderByPriority",0,0,arguments.length),new zs(this.database,jl(this._delegate,function XL(){return new JL}()))}orderByValue(){return(0,q.Dv)("Query.orderByValue",0,0,arguments.length),new zs(this.database,jl(this._delegate,function tF(){return new eF}()))}startAt(e=null,t){return(0,q.Dv)("Query.startAt",0,2,arguments.length),new zs(this.database,jl(this._delegate,function jL(n=null,e){return X0("startAt","key",e,!0),new f1(n,e)}(e,t)))}startAfter(e=null,t){return(0,q.Dv)("Query.startAfter",0,2,arguments.length),new zs(this.database,jl(this._delegate,function $L(n,e){return X0("startAfter","key",e,!0),new HL(n,e)}(e,t)))}endAt(e=null,t){return(0,q.Dv)("Query.endAt",0,2,arguments.length),new zs(this.database,jl(this._delegate,function VL(n,e){return X0("endAt","key",e,!0),new h1(n,e)}(e,t)))}endBefore(e=null,t){return(0,q.Dv)("Query.endBefore",0,2,arguments.length),new zs(this.database,jl(this._delegate,function BL(n,e){return X0("endBefore","key",e,!0),new UL(n,e)}(e,t)))}equalTo(e,t){return(0,q.Dv)("Query.equalTo",1,2,arguments.length),new zs(this.database,jl(this._delegate,function rF(n,e){return X0("equalTo","key",e,!0),new nF(n,e)}(e,t)))}toString(){return(0,q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,q.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof zs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const s={cancel:void 0,context:void 0};if(t&&r)s.cancel=t,(0,q.Wj)(e,"cancel",s.cancel,!0),s.context=r,(0,q.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,q.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new Ga(this.database,new ju(this._delegate._repo,this._delegate._path))}}class Ga extends zs{constructor(e,t){super(e,new ca(t._repo,t._path,new lA,!1)),this.database=e,this._delegate=t}getKey(){return(0,q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ga(this.database,$m(this._delegate,e))}getParent(){(0,q.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ga(this.database,e):null}getRoot(){return(0,q.Dv)("Reference.root",0,0,arguments.length),new Ga(this.database,this._delegate.root)}set(e,t){(0,q.Dv)("Reference.set",1,2,arguments.length),(0,q.Wj)("Reference.set","onComplete",t,!0);const r=ZP(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,t){if((0,q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let u=0;u<e.length;++u)s[""+u]=e[u];e=s,_1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bu("Reference.update",this._delegate._path),(0,q.Wj)("Reference.update","onComplete",t,!0);const r=LL(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}setWithPriority(e,t,r){(0,q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,q.Wj)("Reference.setWithPriority","onComplete",r,!0);const s=function kL(n,e,t){if(Bu("setWithPriority",n._path),ed("setWithPriority",e,n._path,!1),UP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new q.BH;return jP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&s.then(()=>r(null),u=>r(u)),s}remove(e){(0,q.Dv)("Reference.remove",0,1,arguments.length),(0,q.Wj)("Reference.remove","onComplete",e,!0);const t=function NL(n){return Bu("remove",n._path),ZP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,q.Dv)("Reference.transaction",1,3,arguments.length),(0,q.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,q.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const s=function EF(n,e,t){var r;if(n=(0,q.m9)(n),Bu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(r=t?.applyLocally)||void 0===r||r,u=new q.BH,m=KP(n,()=>{});return function DL(n,e,t,r,s,u){_v(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:gM(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=$P(n,e,void 0);c.currentInputSnapshot=m;const _=c.update(m.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{J0("transaction failed: Data returned ",_,c.path),c.status=0;const C=AA(n.transactionQueueTree_,e),P=jm(C)||[];let k;P.push(c),LP(C,P),"object"==typeof _&&null!==_&&(0,q.r3)(_,".priority")?(k=(0,q.DV)(_,".priority"),(0,q.hu)(Q0(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=(CA(n.serverSyncTree_,e)||hn.EMPTY_NODE).getPriority().val();const G=tw(n),J=ci(_,k),he=NP(J,m,G);c.currentOutputSnapshotRaw=J,c.currentOutputSnapshotResolved=he,c.currentWriteId=PA(n);const Re=AP(n.serverSyncTree_,e,he,c.currentWriteId,c.applyLocally);$a(n.eventQueue_,e,Re),xA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,C,P)=>{let k=null;_?u.reject(_):(k=new Hm(P,new ju(n._repo,n._path),Lr),u.resolve(new vF(C,k)))},m,s),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new bF(u.committed,new Ep(this.database,u.snapshot)));return t&&s.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),s}setPriority(e,t){(0,q.Dv)("Reference.setPriority",1,2,arguments.length),(0,q.Wj)("Reference.setPriority","onComplete",t,!0);const r=function OL(n,e){n=(0,q.m9)(n),Bu("setPriority",n._path),UP("setPriority",e,!1);const t=new q.BH;return jP(n._repo,Xr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),s=>t(s)),r}push(e,t){(0,q.Dv)("Reference.push",0,2,arguments.length),(0,q.Wj)("Reference.push","onComplete",t,!0);const r=function ML(n,e){n=(0,q.m9)(n),Bu("push",n._path),ed("push",e,n._path,!0);const t=qN(n._repo),r=xL(t),s=$m(n,r),u=$m(n,r);let c;return c=null!=e?ZP(u,e).then(()=>u):Promise.resolve(u),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}(this._delegate,e),s=r.then(c=>new Ga(this.database,c));t&&s.then(()=>t(null),c=>t(c));const u=new Ga(this.database,r);return u.then=s.then.bind(s),u.catch=s.catch.bind(s,void 0),u}onDisconnect(){return Bu("Reference.onDisconnect",this._delegate._path),new AF(new i1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class iw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:cF,forceLongPolling:dF}}useEmulator(e,t,r={}){!function m1(n,e,t,r={}){(n=(0,q.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Qc("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let u;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new k0(k0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,q.Sg)(r.mockUserToken,n.app.options.projectId);u=new k0(c)}!function sF(n,e,t,r){n.repoInfo_=new ZR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(s,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,q.Dv)("database.ref",0,1,arguments.length),e instanceof Ga){const t=o1(this._delegate,e.toString());return new Ga(this,t)}{const t=s1(this._delegate,e);return new Ga(this,t)}}refFromURL(e){(0,q.Dv)("database.refFromURL",1,1,arguments.length);const r=o1(this._delegate,e);return new Ga(this,r)}goOffline(){return(0,q.Dv)("database.goOffline",0,0,arguments.length),function hF(n){(n=(0,q.m9)(n))._checkNotDeleted("goOffline"),QN(n._repo)}(this._delegate)}goOnline(){return(0,q.Dv)("database.goOnline",0,0,arguments.length),function fF(n){(n=(0,q.m9)(n))._checkNotDeleted("goOnline"),function CL(n){n.persistentConnection_&&n.persistentConnection_.resume(WN)}(n._repo)}(this._delegate)}}iw.ServerValue={TIMESTAMP:function _F(){return mF}(),increment:n=>function yF(n){return{".sv":{increment:n}}}(n)};var RF=Object.freeze({__proto__:null,initStandalone:function SF({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:s,namespace:u,nodeAdmin:c=!1}){$R(t);const m=new Di.H0("database-standalone"),_=new Di.zt("auth-internal",m);let C;return _.setComponent(new Di.wA("auth-internal",()=>r,"PRIVATE")),s&&(C=new Di.zt("app-check-internal",m),C.setComponent(new Di.wA("app-check-internal",()=>s,"PRIVATE"))),{instance:new iw(QP(n,_,C,e,c),n),namespace:u}}});const PF=iw.ServerValue;function sw(n,e,t="on",r=wo){return new ue.y(s=>{let u=null;return u=n[t](e,(c,m)=>{r.schedule(()=>{s.next({snapshot:c,prevKey:m})}),"once"===t&&r.schedule(()=>s.complete())},c=>{r.schedule(()=>s.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,Pe.U)(s=>{const{snapshot:u,prevKey:c}=s;let m=null;return u.exists()&&(m=u.key),{type:e,payload:u,prevKey:c,key:m}}),(0,Vy.B)())}function y1(n){return null==n}function v1(n){return"function"==typeof n.set}function E1(n,e){return v1(e)?e:n.ref(e)}function I1(n,e){if(function MF(n){return"string"==typeof n}(n))return e.stringCase();if(v1(n))return e.firebaseCase();if(function NF(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function w1(n){return(y1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function T1(n,e,t){const r=(e=w1(e)).map(s=>sw(n,s,"on",t));return(0,YI.T)(...r)}function C1(n,e){return function(r,s){return I1(r,{stringCase:()=>n.child(r)[e](s),firebaseCase:()=>r[e](s),snapshotCase:()=>r.ref[e](s)})}}function FF(n){return function(t){return t?I1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function D1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function BF(n,e){const{payload:t,prevKey:r,key:s}=e,u=D1(n,s),c=function UF(n,e){if(y1(e))return 0;{const t=D1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let m=null;e.payload.forEach(_=>{const C={payload:_,type:"value",prevKey:m,key:_.key};return m=_.key,n=[...n,C],!1})}return n;case"child_added":if(u>-1)(n[u-1]?.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===s?e:m);case"child_moved":if(u>-1){const m=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,m),n}return n;default:return n}}function A1(n,e,t){return function VF(n,e,t){return sw(n,"value","once",t).pipe((0,Ts.w)(r=>{const s=[(0,ku.of)(r)];return e.forEach(u=>s.push(sw(n,u,"on",t))),(0,YI.T)(...s).pipe((0,rp.R)(BF,[]))}),(0,Cs.x)())}(n,e=w1(e),t)}function b1(n,e){return function(){return sw(n,"value","on",e)}}!function xF(n){n.INTERNAL.registerComponent(new Di.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new iw(s,r)},"PUBLIC").setServiceProps({Reference:Ga,Query:zs,Database:iw,DataSnapshot:Ep,enableLogging:pF,INTERNAL:RF,ServerValue:PF}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.1")}(js.Z);const $F=new g.OlP("angularfire2.realtimeDatabaseURL"),GF=new g.OlP("angularfire2.database.use-emulator");let zF=(()=>{class n{schedulers;database;constructor(t,r,s,u,c,m,_,C,P,k,G,J,he,Re,Ne){this.schedulers=m;const ht=_,mt=_m(t,c,r);C&&Hy(mt,c,P,G,J,he,k,Re),this.database=ym(`${mt.name}.database.${s}`,"AngularFireDatabase",mt.name,()=>{const Qe=c.runOutsideAngular(()=>mt.database(s||void 0));return ht&&Qe.useEmulator(...ht),Qe},[ht])}list(t,r){const s=this.schedulers.ngZone.runOutsideAngular(()=>E1(this.database,t));let u=s;return r&&(u=r(s)),function jF(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:C1(r,"update"),set:C1(r,"set"),push:s=>r.push(s),remove:FF(r),snapshotChanges:s=>A1(n,s,t).pipe(Or),stateChanges:s=>T1(n,s,t).pipe(Or),auditTrail:s=>function OF(n,e,t){return function LF(n,e,t){return function kF(n,e){return sw(n,"value","on",e).pipe((0,Pe.U)(t=>{let r;return t.payload.forEach(s=>(r=s.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function L1(...n){const e=(0,He.jO)(n);return(0,Gy.e)((t,r)=>{const s=n.length,u=new Array(s);let c=n.map(()=>!1),m=!1;for(let _=0;_<s;_++)(0,_e.Xf)(n[_]).subscribe((0,De.x)(r,C=>{u[_]=C,!m&&!c[_]&&(c[_]=!0,(m=c.every(jR.y))&&(c=null))},k1.Z));t.subscribe((0,De.x)(r,_=>{if(m){const C=[_,...u];r.next(e?e(...C):C)}}))})}(e),(0,Pe.U)(([s,u])=>{const c=s.lastKeyToLoad,m=u.map(_=>_.key);return{actions:u,lastKeyToLoad:c,loadedKeys:m}}),function F1(n){return(0,Gy.e)((e,t)=>{let r=!1,s=0;e.subscribe((0,De.x)(t,u=>(r||(r=!n(u,s++)))&&t.next(u)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Pe.U)(s=>s.actions))}(n,T1(n,e).pipe((0,rp.R)((s,u)=>[...s,u],[])),t)}(n,s,t).pipe(Or),valueChanges:(s,u)=>A1(n,s,t).pipe((0,Pe.U)(m=>m.map(_=>u&&u.idField?{..._.payload.val(),[u.idField]:_.key}:_.payload.val())),Or)}}(u,this)}object(t){return function HF(n,e){return{query:n,snapshotChanges:()=>b1(n,e.schedulers.outsideAngular)().pipe(Or),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>b1(n,e.schedulers.outsideAngular)().pipe(Or,(0,Pe.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>E1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(g.LFG(kl),g.LFG(np,8),g.LFG($F,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fy),g.LFG(GF,8),g.LFG(Em,8),g.LFG(n0,8),g.LFG(Uy,8),g.LFG(vm,8),g.LFG(By,8),g.LFG(r0,8),g.LFG(jy,8),g.LFG(zc,8))};static \u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),WF=(()=>{class n{constructor(){js.Z.registerVersion("angularfire",tp.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=g.oAB({type:n});static \u0275inj=g.cJS({providers:[zF]})}return n})();const qF={apiKey:"AIzaSyAskkATVU4YWFvF119TREfLHQ9tPhb27cs",authDomain:"j-s-cart-43e4d.firebaseapp.com",projectId:"j-s-cart-43e4d",storageBucket:"j-s-cart-43e4d.appspot.com",messagingSenderId:"1083234590925",appId:"1:1083234590925:web:dbc61fb26b945f6a288984"};let ZF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=g.oAB({type:n,bootstrap:[JS]});static#n=this.\u0275inj=g.cJS({providers:[Tm],imports:[D.b2,QS,vh,rd,ZI.initializeApp(qF),YC,BR,WF]})}return n})();D.q6().bootstrapModule(ZF).catch(n=>console.error(n))},5619:(yt,be,B)=>{B.d(be,{X:()=>g});var D=B(8645);class g extends D.x{constructor(ie){super(),this._value=ie}get value(){return this.getValue()}_subscribe(ie){const ue=super._subscribe(ie);return!ue.closed&&ie.next(this._value),ue}getValue(){const{hasError:ie,thrownError:ue,_value:oe}=this;if(ie)throw ue;return this._throwIfClosed(),oe}next(ie){super.next(this._value=ie)}}},5592:(yt,be,B)=>{B.d(be,{y:()=>He});var D=B(305),g=B(7394),K=B(4850),ie=B(8407),ue=B(2653),oe=B(4674),_e=B(1441);let He=(()=>{class le{constructor($e){$e&&(this._subscribe=$e)}lift($e){const Je=new le;return Je.source=this,Je.operator=$e,Je}subscribe($e,Je,Be){const rt=function ne(le){return le&&le instanceof D.Lv||function X(le){return le&&(0,oe.m)(le.next)&&(0,oe.m)(le.error)&&(0,oe.m)(le.complete)}(le)&&(0,g.Nn)(le)}($e)?$e:new D.Hp($e,Je,Be);return(0,_e.x)(()=>{const{operator:lt,source:en}=this;rt.add(lt?lt.call(rt,en):en?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe($e){try{return this._subscribe($e)}catch(Je){$e.error(Je)}}forEach($e,Je){return new(Je=De(Je))((Be,rt)=>{const lt=new D.Hp({next:en=>{try{$e(en)}catch(un){rt(un),lt.unsubscribe()}},error:rt,complete:Be});this.subscribe(lt)})}_subscribe($e){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe($e)}[K.L](){return this}pipe(...$e){return(0,ie.U)($e)(this)}toPromise($e){return new($e=De($e))((Je,Be)=>{let rt;this.subscribe(lt=>rt=lt,lt=>Be(lt),()=>Je(rt))})}}return le.create=Pe=>new le(Pe),le})();function De(le){var Pe;return null!==(Pe=le??ue.config.Promise)&&void 0!==Pe?Pe:Promise}},8645:(yt,be,B)=>{B.d(be,{x:()=>_e});var D=B(5592),g=B(7394);const ie=(0,B(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=B(9039),oe=B(1441);let _e=(()=>{class De extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const le=new He(this,this);return le.operator=ne,le}_throwIfClosed(){if(this.closed)throw new ie}next(ne){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const le of this.currentObservers)le.next(ne)}})}error(ne){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:le}=this;for(;le.length;)le.shift().error(ne)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:le,isStopped:Pe,observers:$e}=this;return le||Pe?g.Lc:(this.currentObservers=null,$e.push(ne),new g.w0(()=>{this.currentObservers=null,(0,ue.P)($e,ne)}))}_checkFinalizedStatuses(ne){const{hasError:le,thrownError:Pe,isStopped:$e}=this;le?ne.error(Pe):$e&&ne.complete()}asObservable(){const ne=new D.y;return ne.source=this,ne}}return De.create=(X,ne)=>new He(X,ne),De})();class He extends _e{constructor(X,ne){super(),this.destination=X,this.source=ne}next(X){var ne,le;null===(le=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===le||le.call(ne,X)}error(X){var ne,le;null===(le=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===le||le.call(ne,X)}complete(){var X,ne;null===(ne=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===ne||ne.call(X)}_subscribe(X){var ne,le;return null!==(le=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(X))&&void 0!==le?le:g.Lc}}},305:(yt,be,B)=>{B.d(be,{Hp:()=>Be,Lv:()=>le});var D=B(4674),g=B(7394),K=B(2653),ie=B(3894),ue=B(2420);const oe=De("C",void 0,void 0);function De(Ie,Fe,pe){return{kind:Ie,value:Fe,error:pe}}var X=B(7599),ne=B(1441);class le extends g.w0{constructor(Fe){super(),this.isStopped=!1,Fe?(this.destination=Fe,(0,g.Nn)(Fe)&&Fe.add(this)):this.destination=un}static create(Fe,pe,We){return new Be(Fe,pe,We)}next(Fe){this.isStopped?en(function He(Ie){return De("N",Ie,void 0)}(Fe),this):this._next(Fe)}error(Fe){this.isStopped?en(function _e(Ie){return De("E",void 0,Ie)}(Fe),this):(this.isStopped=!0,this._error(Fe))}complete(){this.isStopped?en(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Fe){this.destination.next(Fe)}_error(Fe){try{this.destination.error(Fe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function $e(Ie,Fe){return Pe.call(Ie,Fe)}class Je{constructor(Fe){this.partialObserver=Fe}next(Fe){const{partialObserver:pe}=this;if(pe.next)try{pe.next(Fe)}catch(We){rt(We)}}error(Fe){const{partialObserver:pe}=this;if(pe.error)try{pe.error(Fe)}catch(We){rt(We)}else rt(Fe)}complete(){const{partialObserver:Fe}=this;if(Fe.complete)try{Fe.complete()}catch(pe){rt(pe)}}}class Be extends le{constructor(Fe,pe,We){let Ke;if(super(),(0,D.m)(Fe)||!Fe)Ke={next:Fe??void 0,error:pe??void 0,complete:We??void 0};else{let Xe;this&&K.config.useDeprecatedNextContext?(Xe=Object.create(Fe),Xe.unsubscribe=()=>this.unsubscribe(),Ke={next:Fe.next&&$e(Fe.next,Xe),error:Fe.error&&$e(Fe.error,Xe),complete:Fe.complete&&$e(Fe.complete,Xe)}):Ke=Fe}this.destination=new Je(Ke)}}function rt(Ie){K.config.useDeprecatedSynchronousErrorHandling?(0,ne.O)(Ie):(0,ie.h)(Ie)}function en(Ie,Fe){const{onStoppedNotification:pe}=K.config;pe&&X.z.setTimeout(()=>pe(Ie,Fe))}const un={closed:!0,next:ue.Z,error:function lt(Ie){throw Ie},complete:ue.Z}},7394:(yt,be,B)=>{B.d(be,{Lc:()=>oe,w0:()=>ue,Nn:()=>_e});var D=B(4674);const K=(0,B(2306).d)(De=>function(ne){De(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((le,Pe)=>`${Pe+1}) ${le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var ie=B(9039);class ue{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const $e of ne)$e.remove(this);else ne.remove(this);const{initialTeardown:le}=this;if((0,D.m)(le))try{le()}catch($e){X=$e instanceof K?$e.errors:[$e]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const $e of Pe)try{He($e)}catch(Je){X=X??[],Je instanceof K?X=[...X,...Je.errors]:X.push(Je)}}if(X)throw new K(X)}}add(X){var ne;if(X&&X!==this)if(this.closed)He(X);else{if(X instanceof ue){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(X)}}_hasParent(X){const{_parentage:ne}=this;return ne===X||Array.isArray(ne)&&ne.includes(X)}_addParent(X){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(X),ne):ne?[ne,X]:X}_removeParent(X){const{_parentage:ne}=this;ne===X?this._parentage=null:Array.isArray(ne)&&(0,ie.P)(ne,X)}remove(X){const{_finalizers:ne}=this;ne&&(0,ie.P)(ne,X),X instanceof ue&&X._removeParent(this)}}ue.EMPTY=(()=>{const De=new ue;return De.closed=!0,De})();const oe=ue.EMPTY;function _e(De){return De instanceof ue||De&&"closed"in De&&(0,D.m)(De.remove)&&(0,D.m)(De.add)&&(0,D.m)(De.unsubscribe)}function He(De){(0,D.m)(De)?De():De.unsubscribe()}},2653:(yt,be,B)=>{B.d(be,{config:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(yt,be,B)=>{B.d(be,{z:()=>ue});var D=B(7537),K=B(9940),ie=B(2459);function ue(...oe){return function g(){return(0,D.J)(1)}()((0,ie.D)(oe,(0,K.yG)(oe)))}},6232:(yt,be,B)=>{B.d(be,{E:()=>g});const g=new(B(5592).y)(ue=>ue.complete())},2459:(yt,be,B)=>{B.d(be,{D:()=>Fe});var D=B(4829),g=B(3093),K=B(5137),oe=B(5592),He=B(4971),De=B(4674),X=B(7103);function le(pe,We){if(!pe)throw new Error("Iterable cannot be null");return new oe.y(Ke=>{(0,X.f)(Ke,We,()=>{const Xe=pe[Symbol.asyncIterator]();(0,X.f)(Ke,We,()=>{Xe.next().then(Te=>{Te.done?Ke.complete():Ke.next(Te.value)})},0,!0)})})}var Pe=B(8382),$e=B(4026),Je=B(4266),Be=B(3664),rt=B(5726),lt=B(9853),en=B(541);function Fe(pe,We){return We?function Ie(pe,We){if(null!=pe){if((0,Pe.c)(pe))return function ie(pe,We){return(0,D.Xf)(pe).pipe((0,K.R)(We),(0,g.Q)(We))}(pe,We);if((0,Je.z)(pe))return function _e(pe,We){return new oe.y(Ke=>{let Xe=0;return We.schedule(function(){Xe===pe.length?Ke.complete():(Ke.next(pe[Xe++]),Ke.closed||this.schedule())})})}(pe,We);if((0,$e.t)(pe))return function ue(pe,We){return(0,D.Xf)(pe).pipe((0,K.R)(We),(0,g.Q)(We))}(pe,We);if((0,rt.D)(pe))return le(pe,We);if((0,Be.T)(pe))return function ne(pe,We){return new oe.y(Ke=>{let Xe;return(0,X.f)(Ke,We,()=>{Xe=pe[He.h](),(0,X.f)(Ke,We,()=>{let Te,Lt;try{({value:Te,done:Lt}=Xe.next())}catch(zt){return void Ke.error(zt)}Lt?Ke.complete():Ke.next(Te)},0,!0)}),()=>(0,De.m)(Xe?.return)&&Xe.return()})}(pe,We);if((0,en.L)(pe))return function un(pe,We){return le((0,en.Q)(pe),We)}(pe,We)}throw(0,lt.z)(pe)}(pe,We):(0,D.Xf)(pe)}},4829:(yt,be,B)=>{B.d(be,{Xf:()=>Pe});var D=B(7582),g=B(4266),K=B(4026),ie=B(5592),ue=B(8382),oe=B(5726),_e=B(9853),He=B(3664),De=B(541),X=B(4674),ne=B(3894),le=B(4850);function Pe(Ie){if(Ie instanceof ie.y)return Ie;if(null!=Ie){if((0,ue.c)(Ie))return function $e(Ie){return new ie.y(Fe=>{const pe=Ie[le.L]();if((0,X.m)(pe.subscribe))return pe.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,g.z)(Ie))return function Je(Ie){return new ie.y(Fe=>{for(let pe=0;pe<Ie.length&&!Fe.closed;pe++)Fe.next(Ie[pe]);Fe.complete()})}(Ie);if((0,K.t)(Ie))return function Be(Ie){return new ie.y(Fe=>{Ie.then(pe=>{Fe.closed||(Fe.next(pe),Fe.complete())},pe=>Fe.error(pe)).then(null,ne.h)})}(Ie);if((0,oe.D)(Ie))return lt(Ie);if((0,He.T)(Ie))return function rt(Ie){return new ie.y(Fe=>{for(const pe of Ie)if(Fe.next(pe),Fe.closed)return;Fe.complete()})}(Ie);if((0,De.L)(Ie))return function en(Ie){return lt((0,De.Q)(Ie))}(Ie)}throw(0,_e.z)(Ie)}function lt(Ie){return new ie.y(Fe=>{(function un(Ie,Fe){var pe,We,Ke,Xe;return(0,D.mG)(this,void 0,void 0,function*(){try{for(pe=(0,D.KL)(Ie);!(We=yield pe.next()).done;)if(Fe.next(We.value),Fe.closed)return}catch(Te){Ke={error:Te}}finally{try{We&&!We.done&&(Xe=pe.return)&&(yield Xe.call(pe))}finally{if(Ke)throw Ke.error}}Fe.complete()})})(Ie,Fe).catch(pe=>Fe.error(pe))})}},3019:(yt,be,B)=>{B.d(be,{T:()=>oe});var D=B(7537),g=B(4829),K=B(6232),ie=B(9940),ue=B(2459);function oe(..._e){const He=(0,ie.yG)(_e),De=(0,ie._6)(_e,1/0),X=_e;return X.length?1===X.length?(0,g.Xf)(X[0]):(0,D.J)(De)((0,ue.D)(X,He)):K.E}},2096:(yt,be,B)=>{B.d(be,{of:()=>K});var D=B(9940),g=B(2459);function K(...ie){const ue=(0,D.yG)(ie);return(0,g.D)(ie,ue)}},8251:(yt,be,B)=>{B.d(be,{x:()=>g});var D=B(305);function g(ie,ue,oe,_e,He){return new K(ie,ue,oe,_e,He)}class K extends D.Lv{constructor(ue,oe,_e,He,De,X){super(ue),this.onFinalize=De,this.shouldUnsubscribe=X,this._next=oe?function(ne){try{oe(ne)}catch(le){ue.error(le)}}:super._next,this._error=He?function(ne){try{He(ne)}catch(le){ue.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(ne){ue.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},3572:(yt,be,B)=>{B.d(be,{d:()=>K});var D=B(9360),g=B(8251);function K(ie){return(0,D.e)((ue,oe)=>{let _e=!1;ue.subscribe((0,g.x)(oe,He=>{_e=!0,oe.next(He)},()=>{_e||oe.next(ie),oe.complete()}))})}},3997:(yt,be,B)=>{B.d(be,{x:()=>ie});var D=B(2737),g=B(9360),K=B(8251);function ie(oe,_e=D.y){return oe=oe??ue,(0,g.e)((He,De)=>{let X,ne=!0;He.subscribe((0,K.x)(De,le=>{const Pe=_e(le);(ne||!oe(X,Pe))&&(ne=!1,X=Pe,De.next(le))}))})}function ue(oe,_e){return oe===_e}},2181:(yt,be,B)=>{B.d(be,{h:()=>K});var D=B(9360),g=B(8251);function K(ie,ue){return(0,D.e)((oe,_e)=>{let He=0;oe.subscribe((0,g.x)(_e,De=>ie.call(ue,De,He++)&&_e.next(De)))})}},1374:(yt,be,B)=>{B.d(be,{P:()=>_e});var D=B(6973),g=B(2181),K=B(8180),ie=B(3572),ue=B(3026),oe=B(2737);function _e(He,De){const X=arguments.length>=2;return ne=>ne.pipe(He?(0,g.h)((le,Pe)=>He(le,Pe,ne)):oe.y,(0,K.q)(1),X?(0,ie.d)(De):(0,ue.T)(()=>new D.K))}},7398:(yt,be,B)=>{B.d(be,{U:()=>K});var D=B(9360),g=B(8251);function K(ie,ue){return(0,D.e)((oe,_e)=>{let He=0;oe.subscribe((0,g.x)(_e,De=>{_e.next(ie.call(ue,De,He++))}))})}},7537:(yt,be,B)=>{B.d(be,{J:()=>K});var D=B(1631),g=B(2737);function K(ie=1/0){return(0,D.z)(g.y,ie)}},1631:(yt,be,B)=>{B.d(be,{z:()=>He});var D=B(7398),g=B(4829),K=B(9360),ie=B(7103),ue=B(8251),_e=B(4674);function He(De,X,ne=1/0){return(0,_e.m)(X)?He((le,Pe)=>(0,D.U)(($e,Je)=>X(le,$e,Pe,Je))((0,g.Xf)(De(le,Pe))),ne):("number"==typeof X&&(ne=X),(0,K.e)((le,Pe)=>function oe(De,X,ne,le,Pe,$e,Je,Be){const rt=[];let lt=0,en=0,un=!1;const Ie=()=>{un&&!rt.length&&!lt&&X.complete()},Fe=We=>lt<le?pe(We):rt.push(We),pe=We=>{$e&&X.next(We),lt++;let Ke=!1;(0,g.Xf)(ne(We,en++)).subscribe((0,ue.x)(X,Xe=>{Pe?.(Xe),$e?Fe(Xe):X.next(Xe)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(lt--;rt.length&&lt<le;){const Xe=rt.shift();Je?(0,ie.f)(X,Je,()=>pe(Xe)):pe(Xe)}Ie()}catch(Xe){X.error(Xe)}}))};return De.subscribe((0,ue.x)(X,Fe,()=>{un=!0,Ie()})),()=>{Be?.()}}(le,Pe,De,ne)))}},3093:(yt,be,B)=>{B.d(be,{Q:()=>ie});var D=B(7103),g=B(9360),K=B(8251);function ie(ue,oe=0){return(0,g.e)((_e,He)=>{_e.subscribe((0,K.x)(He,De=>(0,D.f)(He,ue,()=>He.next(De),oe),()=>(0,D.f)(He,ue,()=>He.complete(),oe),De=>(0,D.f)(He,ue,()=>He.error(De),oe)))})}},6699:(yt,be,B)=>{B.d(be,{R:()=>ie});var D=B(9360),g=B(8251);function ie(ue,oe){return(0,D.e)(function K(ue,oe,_e,He,De){return(X,ne)=>{let le=_e,Pe=oe,$e=0;X.subscribe((0,g.x)(ne,Je=>{const Be=$e++;Pe=le?ue(Pe,Je,Be):(le=!0,Je),He&&ne.next(Pe)},De&&(()=>{le&&ne.next(Pe),ne.complete()})))}}(ue,oe,arguments.length>=2,!0))}},3020:(yt,be,B)=>{B.d(be,{B:()=>ue});var D=B(4829),g=B(8645),K=B(305),ie=B(9360);function ue(_e={}){const{connector:He=(()=>new g.x),resetOnError:De=!0,resetOnComplete:X=!0,resetOnRefCountZero:ne=!0}=_e;return le=>{let Pe,$e,Je,Be=0,rt=!1,lt=!1;const en=()=>{$e?.unsubscribe(),$e=void 0},un=()=>{en(),Pe=Je=void 0,rt=lt=!1},Ie=()=>{const Fe=Pe;un(),Fe?.unsubscribe()};return(0,ie.e)((Fe,pe)=>{Be++,!lt&&!rt&&en();const We=Je=Je??He();pe.add(()=>{Be--,0===Be&&!lt&&!rt&&($e=oe(Ie,ne))}),We.subscribe(pe),!Pe&&Be>0&&(Pe=new K.Hp({next:Ke=>We.next(Ke),error:Ke=>{lt=!0,en(),$e=oe(un,De,Ke),We.error(Ke)},complete:()=>{rt=!0,en(),$e=oe(un,X),We.complete()}}),(0,D.Xf)(Fe).subscribe(Pe))})(le)}}function oe(_e,He,...De){if(!0===He)return void _e();if(!1===He)return;const X=new K.Hp({next:()=>{X.unsubscribe(),_e()}});return(0,D.Xf)(He(...De)).subscribe(X)}},7921:(yt,be,B)=>{B.d(be,{O:()=>ie});var D=B(5211),g=B(9940),K=B(9360);function ie(...ue){const oe=(0,g.yG)(ue);return(0,K.e)((_e,He)=>{(oe?(0,D.z)(ue,_e,oe):(0,D.z)(ue,_e)).subscribe(He)})}},5137:(yt,be,B)=>{B.d(be,{R:()=>g});var D=B(9360);function g(K,ie=0){return(0,D.e)((ue,oe)=>{oe.add(K.schedule(()=>ue.subscribe(oe),ie))})}},4664:(yt,be,B)=>{B.d(be,{w:()=>ie});var D=B(4829),g=B(9360),K=B(8251);function ie(ue,oe){return(0,g.e)((_e,He)=>{let De=null,X=0,ne=!1;const le=()=>ne&&!De&&He.complete();_e.subscribe((0,K.x)(He,Pe=>{De?.unsubscribe();let $e=0;const Je=X++;(0,D.Xf)(ue(Pe,Je)).subscribe(De=(0,K.x)(He,Be=>He.next(oe?oe(Pe,Be,Je,$e++):Be),()=>{De=null,le()}))},()=>{ne=!0,le()}))})}},8180:(yt,be,B)=>{B.d(be,{q:()=>ie});var D=B(6232),g=B(9360),K=B(8251);function ie(ue){return ue<=0?()=>D.E:(0,g.e)((oe,_e)=>{let He=0;oe.subscribe((0,K.x)(_e,De=>{++He<=ue&&(_e.next(De),ue<=He&&_e.complete())}))})}},9397:(yt,be,B)=>{B.d(be,{b:()=>ue});var D=B(4674),g=B(9360),K=B(8251),ie=B(2737);function ue(oe,_e,He){const De=(0,D.m)(oe)||_e||He?{next:oe,error:_e,complete:He}:oe;return De?(0,g.e)((X,ne)=>{var le;null===(le=De.subscribe)||void 0===le||le.call(De);let Pe=!0;X.subscribe((0,K.x)(ne,$e=>{var Je;null===(Je=De.next)||void 0===Je||Je.call(De,$e),ne.next($e)},()=>{var $e;Pe=!1,null===($e=De.complete)||void 0===$e||$e.call(De),ne.complete()},$e=>{var Je;Pe=!1,null===(Je=De.error)||void 0===Je||Je.call(De,$e),ne.error($e)},()=>{var $e,Je;Pe&&(null===($e=De.unsubscribe)||void 0===$e||$e.call(De)),null===(Je=De.finalize)||void 0===Je||Je.call(De)}))}):ie.y}},3026:(yt,be,B)=>{B.d(be,{T:()=>ie});var D=B(6973),g=B(9360),K=B(8251);function ie(oe=ue){return(0,g.e)((_e,He)=>{let De=!1;_e.subscribe((0,K.x)(He,X=>{De=!0,He.next(X)},()=>De?He.complete():He.error(oe())))})}function ue(){return new D.K}},7599:(yt,be,B)=>{B.d(be,{z:()=>D});const D={setTimeout(g,K,...ie){const{delegate:ue}=D;return ue?.setTimeout?ue.setTimeout(g,K,...ie):setTimeout(g,K,...ie)},clearTimeout(g){const{delegate:K}=D;return(K?.clearTimeout||clearTimeout)(g)},delegate:void 0}},4971:(yt,be,B)=>{B.d(be,{h:()=>g});const g=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(yt,be,B)=>{B.d(be,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(yt,be,B)=>{B.d(be,{K:()=>g});const g=(0,B(2306).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(yt,be,B)=>{B.d(be,{_6:()=>oe,jO:()=>ie,yG:()=>ue});var D=B(4674),g=B(671);function K(_e){return _e[_e.length-1]}function ie(_e){return(0,D.m)(K(_e))?_e.pop():void 0}function ue(_e){return(0,g.K)(K(_e))?_e.pop():void 0}function oe(_e,He){return"number"==typeof K(_e)?_e.pop():He}},7453:(yt,be,B)=>{B.d(be,{D:()=>ue});const{isArray:D}=Array,{getPrototypeOf:g,prototype:K,keys:ie}=Object;function ue(_e){if(1===_e.length){const He=_e[0];if(D(He))return{args:He,keys:null};if(function oe(_e){return _e&&"object"==typeof _e&&g(_e)===K}(He)){const De=ie(He);return{args:De.map(X=>He[X]),keys:De}}}return{args:_e,keys:null}}},9039:(yt,be,B)=>{function D(g,K){if(g){const ie=g.indexOf(K);0<=ie&&g.splice(ie,1)}}B.d(be,{P:()=>D})},2306:(yt,be,B)=>{function D(g){const ie=g(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}B.d(be,{d:()=>D})},2714:(yt,be,B)=>{function D(g,K){return g.reduce((ie,ue,oe)=>(ie[ue]=K[oe],ie),{})}B.d(be,{n:()=>D})},1441:(yt,be,B)=>{B.d(be,{O:()=>ie,x:()=>K});var D=B(2653);let g=null;function K(ue){if(D.config.useDeprecatedSynchronousErrorHandling){const oe=!g;if(oe&&(g={errorThrown:!1,error:null}),ue(),oe){const{errorThrown:_e,error:He}=g;if(g=null,_e)throw He}}else ue()}function ie(ue){D.config.useDeprecatedSynchronousErrorHandling&&g&&(g.errorThrown=!0,g.error=ue)}},7103:(yt,be,B)=>{function D(g,K,ie,ue=0,oe=!1){const _e=K.schedule(function(){ie(),oe?g.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(g.add(_e),!oe)return _e}B.d(be,{f:()=>D})},2737:(yt,be,B)=>{function D(g){return g}B.d(be,{y:()=>D})},4266:(yt,be,B)=>{B.d(be,{z:()=>D});const D=g=>g&&"number"==typeof g.length&&"function"!=typeof g},5726:(yt,be,B)=>{B.d(be,{D:()=>g});var D=B(4674);function g(K){return Symbol.asyncIterator&&(0,D.m)(K?.[Symbol.asyncIterator])}},4674:(yt,be,B)=>{function D(g){return"function"==typeof g}B.d(be,{m:()=>D})},8382:(yt,be,B)=>{B.d(be,{c:()=>K});var D=B(4850),g=B(4674);function K(ie){return(0,g.m)(ie[D.L])}},3664:(yt,be,B)=>{B.d(be,{T:()=>K});var D=B(4971),g=B(4674);function K(ie){return(0,g.m)(ie?.[D.h])}},4026:(yt,be,B)=>{B.d(be,{t:()=>g});var D=B(4674);function g(K){return(0,D.m)(K?.then)}},541:(yt,be,B)=>{B.d(be,{L:()=>ie,Q:()=>K});var D=B(7582),g=B(4674);function K(ue){return(0,D.FC)(this,arguments,function*(){const _e=ue.getReader();try{for(;;){const{value:He,done:De}=yield(0,D.qq)(_e.read());if(De)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(He)}}finally{_e.releaseLock()}})}function ie(ue){return(0,g.m)(ue?.getReader)}},671:(yt,be,B)=>{B.d(be,{K:()=>g});var D=B(4674);function g(K){return K&&(0,D.m)(K.schedule)}},9360:(yt,be,B)=>{B.d(be,{A:()=>g,e:()=>K});var D=B(4674);function g(ie){return(0,D.m)(ie?.lift)}function K(ie){return ue=>{if(g(ue))return ue.lift(function(oe){try{return ie(oe,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(yt,be,B)=>{B.d(be,{Z:()=>ie});var D=B(7398);const{isArray:g}=Array;function ie(ue){return(0,D.U)(oe=>function K(ue,oe){return g(oe)?ue(...oe):ue(oe)}(ue,oe))}},2420:(yt,be,B)=>{function D(){}B.d(be,{Z:()=>D})},8407:(yt,be,B)=>{B.d(be,{U:()=>K,z:()=>g});var D=B(2737);function g(...ie){return K(ie)}function K(ie){return 0===ie.length?D.y:1===ie.length?ie[0]:function(oe){return ie.reduce((_e,He)=>He(_e),oe)}}},3894:(yt,be,B)=>{B.d(be,{h:()=>K});var D=B(2653),g=B(7599);function K(ie){g.z.setTimeout(()=>{const{onUnhandledError:ue}=D.config;if(!ue)throw ie;ue(ie)})}},9853:(yt,be,B)=>{function D(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(be,{z:()=>D})},6814:(yt,be,B)=>{B.d(be,{Do:()=>Be,EM:()=>us,H9:()=>jt,HT:()=>ie,JF:()=>ls,K0:()=>oe,Mx:()=>ni,O5:()=>Hu,PM:()=>Ya,S$:()=>Pe,V_:()=>He,Ye:()=>rt,b0:()=>Je,bD:()=>kn,ez:()=>Yr,gd:()=>Uo,i8:()=>Vo,q:()=>K,sg:()=>da,w_:()=>ue});var D=B(5879);let g=null;function K(){return g}function ie(A){g||(g=A)}class ue{}const oe=new D.OlP("DocumentToken");let _e=(()=>{class A{historyGo(x){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return(0,D.f3M)(De)},providedIn:"platform"})}return A})();const He=new D.OlP("Location Initialized");let De=(()=>{class A extends _e{constructor(){super(),this._doc=(0,D.f3M)(oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(x){const L=K().getGlobalEventTarget(this._doc,"window");return L.addEventListener("popstate",x,!1),()=>L.removeEventListener("popstate",x)}onHashChange(x){const L=K().getGlobalEventTarget(this._doc,"window");return L.addEventListener("hashchange",x,!1),()=>L.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,L,Q){this._history.pushState(x,L,Q)}replaceState(x,L,Q){this._history.replaceState(x,L,Q)}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return new A},providedIn:"platform"})}return A})();function X(A,F){if(0==A.length)return F;if(0==F.length)return A;let x=0;return A.endsWith("/")&&x++,F.startsWith("/")&&x++,2==x?A+F.substring(1):1==x?A+F:A+"/"+F}function ne(A){const F=A.match(/#|\?|$/),x=F&&F.index||A.length;return A.slice(0,x-("/"===A[x-1]?1:0))+A.slice(x)}function le(A){return A&&"?"!==A[0]?"?"+A:A}let Pe=(()=>{class A{historyGo(x){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275prov=D.Yz7({token:A,factory:function(){return(0,D.f3M)(Je)},providedIn:"root"})}return A})();const $e=new D.OlP("appBaseHref");let Je=(()=>{class A extends Pe{constructor(x,L){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=L??this._platformLocation.getBaseHrefFromDOM()??(0,D.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return X(this._baseHref,x)}path(x=!1){const L=this._platformLocation.pathname+le(this._platformLocation.search),Q=this._platformLocation.hash;return Q&&x?`${L}${Q}`:L}pushState(x,L,Q,Ee){const Se=this.prepareExternalUrl(Q+le(Ee));this._platformLocation.pushState(x,L,Se)}replaceState(x,L,Q,Ee){const Se=this.prepareExternalUrl(Q+le(Ee));this._platformLocation.replaceState(x,L,Se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(L){return new(L||A)(D.LFG(_e),D.LFG($e,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Be=(()=>{class A extends Pe{constructor(x,L){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=L&&(this._baseHref=L)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){let L=this._platformLocation.hash;return null==L&&(L="#"),L.length>0?L.substring(1):L}prepareExternalUrl(x){const L=X(this._baseHref,x);return L.length>0?"#"+L:L}pushState(x,L,Q,Ee){let Se=this.prepareExternalUrl(Q+le(Ee));0==Se.length&&(Se=this._platformLocation.pathname),this._platformLocation.pushState(x,L,Se)}replaceState(x,L,Q,Ee){let Se=this.prepareExternalUrl(Q+le(Ee));0==Se.length&&(Se=this._platformLocation.pathname),this._platformLocation.replaceState(x,L,Se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(L){return new(L||A)(D.LFG(_e),D.LFG($e,8))};static#t=this.\u0275prov=D.Yz7({token:A,factory:A.\u0275fac})}return A})(),rt=(()=>{class A{constructor(x){this._subject=new D.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const L=this._locationStrategy.getBaseHref();this._basePath=function Ie(A){if(new RegExp("^(https?:)?//").test(A)){const[,x]=A.split(/\/\/[^\/]+/);return x}return A}(ne(un(L))),this._locationStrategy.onPopState(Q=>{this._subject.emit({url:this.path(!0),pop:!0,state:Q.state,type:Q.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,L=""){return this.path()==this.normalize(x+le(L))}normalize(x){return A.stripTrailingSlash(function en(A,F){if(!A||!F.startsWith(A))return F;const x=F.substring(A.length);return""===x||["/",";","?","#"].includes(x[0])?x:F}(this._basePath,un(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,L="",Q=null){this._locationStrategy.pushState(Q,"",x,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+le(L)),Q)}replaceState(x,L="",Q=null){this._locationStrategy.replaceState(Q,"",x,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+le(L)),Q)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(L=>{this._notifyUrlChangeListeners(L.url,L.state)})),()=>{const L=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(L,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",L){this._urlChangeListeners.forEach(Q=>Q(x,L))}subscribe(x,L,Q){return this._subject.subscribe({next:x,error:L,complete:Q})}static#e=this.normalizeQueryParams=le;static#t=this.joinWithSlash=X;static#n=this.stripTrailingSlash=ne;static#r=this.\u0275fac=function(L){return new(L||A)(D.LFG(Pe))};static#i=this.\u0275prov=D.Yz7({token:A,factory:function(){return function lt(){return new rt((0,D.LFG)(Pe))}()},providedIn:"root"})}return A})();function un(A){return A.replace(/\/index.html$/,"")}const Fe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var pe=function(A){return A[A.Decimal=0]="Decimal",A[A.Percent=1]="Percent",A[A.Currency=2]="Currency",A[A.Scientific=3]="Scientific",A}(pe||{}),Lt=function(A){return A[A.Decimal=0]="Decimal",A[A.Group=1]="Group",A[A.List=2]="List",A[A.PercentSign=3]="PercentSign",A[A.PlusSign=4]="PlusSign",A[A.MinusSign=5]="MinusSign",A[A.Exponential=6]="Exponential",A[A.SuperscriptingExponent=7]="SuperscriptingExponent",A[A.PerMille=8]="PerMille",A[A.Infinity=9]="Infinity",A[A.NaN=10]="NaN",A[A.TimeSeparator=11]="TimeSeparator",A[A.CurrencyDecimal=12]="CurrencyDecimal",A[A.CurrencyGroup=13]="CurrencyGroup",A}(Lt||{});function Oe(A,F){const x=(0,D.cg1)(A),L=x[D.wAp.NumberSymbols][F];if(typeof L>"u"){if(F===Lt.CurrencyDecimal)return x[D.wAp.NumberSymbols][Lt.Decimal];if(F===Lt.CurrencyGroup)return x[D.wAp.NumberSymbols][Lt.Group]}return L}const W=/^(\d+)?\.((\d+)(-(\d+))?)?$/,se=22,je=".",tt="0",Et=";",xt=",",Mt="#";function Ti(A,F,x,L,Q){const Se=function fe(A,F="-"){const x={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},L=A.split(Et),Q=L[0],Ee=L[1],Se=-1!==Q.indexOf(je)?Q.split(je):[Q.substring(0,Q.lastIndexOf(tt)+1),Q.substring(Q.lastIndexOf(tt)+1)],It=Se[0],rn=Se[1]||"";x.posPre=It.substring(0,It.indexOf(Mt));for(let Kt=0;Kt<rn.length;Kt++){const qt=rn.charAt(Kt);qt===tt?x.minFrac=x.maxFrac=Kt+1:qt===Mt?x.maxFrac=Kt+1:x.posSuf+=qt}const dn=It.split(xt);if(x.gSize=dn[1]?dn[1].length:0,x.lgSize=dn[2]||dn[1]?(dn[2]||dn[1]).length:0,Ee){const Kt=Q.length-x.posPre.length-x.posSuf.length,qt=Ee.indexOf(Mt);x.negPre=Ee.substring(0,qt).replace(/'/g,""),x.negSuf=Ee.slice(qt+Kt).replace(/'/g,"")}else x.negPre=F+x.posPre,x.negSuf=x.posSuf;return x}(function Ue(A,F){return(0,D.cg1)(A)[D.wAp.NumberFormats][F]}(F,pe.Currency),Oe(F,Lt.MinusSign));return Se.minFrac=function vr(A){let F;const x=Fe[A];return x&&(F=x[2]),"number"==typeof F?F:2}(L),Se.maxFrac=Se.minFrac,function hi(A,F,x,L,Q,Ee,Se=!1){let It="",rn=!1;if(isFinite(A)){let dn=function pt(A){let L,Q,Ee,Se,It,F=Math.abs(A)+"",x=0;for((Q=F.indexOf(je))>-1&&(F=F.replace(je,"")),(Ee=F.search(/e/i))>0?(Q<0&&(Q=Ee),Q+=+F.slice(Ee+1),F=F.substring(0,Ee)):Q<0&&(Q=F.length),Ee=0;F.charAt(Ee)===tt;Ee++);if(Ee===(It=F.length))L=[0],Q=1;else{for(It--;F.charAt(It)===tt;)It--;for(Q-=Ee,L=[],Se=0;Ee<=It;Ee++,Se++)L[Se]=Number(F.charAt(Ee))}return Q>se&&(L=L.splice(0,se-1),x=Q-1,Q=1),{digits:L,exponent:x,integerLen:Q}}(A);Se&&(dn=function Ge(A){if(0===A.digits[0])return A;const F=A.digits.length-A.integerLen;return A.exponent?A.exponent+=2:(0===F?A.digits.push(0,0):1===F&&A.digits.push(0),A.integerLen+=2),A}(dn));let Kt=F.minInt,qt=F.minFrac,nr=F.maxFrac;if(Ee){const ii=Ee.match(W);if(null===ii)throw new Error(`${Ee} is not a valid digit info`);const Js=ii[1],Pr=ii[3],qi=ii[5];null!=Js&&(Kt=ct(Js)),null!=Pr&&(qt=ct(Pr)),null!=qi?nr=ct(qi):null!=Pr&&qt>nr&&(nr=qt)}!function bt(A,F,x){if(F>x)throw new Error(`The minimum number of digits after fraction (${F}) is higher than the maximum (${x}).`);let L=A.digits,Q=L.length-A.integerLen;const Ee=Math.min(Math.max(F,Q),x);let Se=Ee+A.integerLen,It=L[Se];if(Se>0){L.splice(Math.max(A.integerLen,Se));for(let qt=Se;qt<L.length;qt++)L[qt]=0}else{Q=Math.max(0,Q),A.integerLen=1,L.length=Math.max(1,Se=Ee+1),L[0]=0;for(let qt=1;qt<Se;qt++)L[qt]=0}if(It>=5)if(Se-1<0){for(let qt=0;qt>Se;qt--)L.unshift(0),A.integerLen++;L.unshift(1),A.integerLen++}else L[Se-1]++;for(;Q<Math.max(0,Ee);Q++)L.push(0);let rn=0!==Ee;const dn=F+A.integerLen,Kt=L.reduceRight(function(qt,nr,xn,Fn){return Fn[xn]=(nr+=qt)<10?nr:nr-10,rn&&(0===Fn[xn]&&xn>=dn?Fn.pop():rn=!1),nr>=10?1:0},0);Kt&&(L.unshift(Kt),A.integerLen++)}(dn,qt,nr);let xn=dn.digits,Fn=dn.integerLen;const fs=dn.exponent;let Oi=[];for(rn=xn.every(ii=>!ii);Fn<Kt;Fn++)xn.unshift(0);for(;Fn<0;Fn++)xn.unshift(0);Fn>0?Oi=xn.splice(Fn,xn.length):(Oi=xn,xn=[0]);const Wo=[];for(xn.length>=F.lgSize&&Wo.unshift(xn.splice(-F.lgSize,xn.length).join(""));xn.length>F.gSize;)Wo.unshift(xn.splice(-F.gSize,xn.length).join(""));xn.length&&Wo.unshift(xn.join("")),It=Wo.join(Oe(x,L)),Oi.length&&(It+=Oe(x,Q)+Oi.join("")),fs&&(It+=Oe(x,Lt.Exponential)+"+"+fs)}else It=Oe(x,Lt.Infinity);return It=A<0&&!rn?F.negPre+It+F.negSuf:F.posPre+It+F.posSuf,It}(A,Se,F,Lt.CurrencyGroup,Lt.CurrencyDecimal,Q).replace("\xa4",x).replace("\xa4","").trim()}function ct(A){const F=parseInt(A);if(isNaN(F))throw new Error("Invalid integer literal when parsing "+A);return F}function ni(A,F){F=encodeURIComponent(F);for(const x of A.split(";")){const L=x.indexOf("="),[Q,Ee]=-1==L?[x,""]:[x.slice(0,L),x.slice(L+1)];if(Q.trim()===F)return decodeURIComponent(Ee)}return null}class Hl{constructor(F,x,L,Q){this.$implicit=F,this.ngForOf=x,this.index=L,this.count=Q}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let da=(()=>{class A{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,L,Q){this._viewContainer=x,this._template=L,this._differs=Q,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const L=this._viewContainer;x.forEachOperation((Q,Ee,Se)=>{if(null==Q.previousIndex)L.createEmbeddedView(this._template,new Hl(Q.item,this._ngForOf,-1,-1),null===Se?void 0:Se);else if(null==Se)L.remove(null===Ee?void 0:Ee);else if(null!==Ee){const It=L.get(Ee);L.move(It,Se),Ws(It,Q)}});for(let Q=0,Ee=L.length;Q<Ee;Q++){const It=L.get(Q).context;It.index=Q,It.count=Ee,It.ngForOf=this._ngForOf}x.forEachIdentityChange(Q=>{Ws(L.get(Q.currentIndex),Q)})}static ngTemplateContextGuard(x,L){return!0}static#e=this.\u0275fac=function(L){return new(L||A)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function Ws(A,F){A.context.$implicit=F.item}let Hu=(()=>{class A{constructor(x,L){this._viewContainer=x,this._context=new ko,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=L}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){$l("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){$l("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,L){return!0}static#e=this.\u0275fac=function(L){return new(L||A)(D.Y36(D.s_b),D.Y36(D.Rgc))};static#t=this.\u0275dir=D.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class ko{constructor(){this.$implicit=null,this.ngIf=null}}function $l(A,F){if(F&&!F.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,D.AaK)(F)}'.`)}function $i(A,F){return new D.vHH(2100,!1)}let Vo=(()=>{class A{transform(x){if(null==x)return null;if("string"!=typeof x)throw $i();return x.toLowerCase()}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275pipe=D.Yjl({name:"lowercase",type:A,pure:!0,standalone:!0})}return A})(),Uo=(()=>{class A{transform(x){if(null==x)return null;if("string"!=typeof x)throw $i();return x.toUpperCase()}static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275pipe=D.Yjl({name:"uppercase",type:A,pure:!0,standalone:!0})}return A})(),jt=(()=>{class A{constructor(x,L="USD"){this._locale=x,this._defaultCurrencyCode=L}transform(x,L=this._defaultCurrencyCode,Q="symbol",Ee,Se){if(!function fn(A){return!(null==A||""===A||A!=A)}(x))return null;Se=Se||this._locale,"boolean"==typeof Q&&(Q=Q?"symbol":"code");let It=L||this._defaultCurrencyCode;"code"!==Q&&(It="symbol"===Q||"symbol-narrow"===Q?function yr(A,F,x="en"){const L=function At(A){return(0,D.cg1)(A)[D.wAp.Currencies]}(x)[A]||Fe[A]||[],Q=L[1];return"narrow"===F&&"string"==typeof Q?Q:L[0]||A}(It,"symbol"===Q?"wide":"narrow",Se):Q);try{return Ti(function Kr(A){if("string"==typeof A&&!isNaN(Number(A)-parseFloat(A)))return Number(A);if("number"!=typeof A)throw new Error(`${A} is not a number`);return A}(x),Se,It,L,Ee)}catch(rn){throw $i()}}static#e=this.\u0275fac=function(L){return new(L||A)(D.Y36(D.soG,16),D.Y36(D.EJc,16))};static#t=this.\u0275pipe=D.Yjl({name:"currency",type:A,pure:!0,standalone:!0})}return A})();let Yr=(()=>{class A{static#e=this.\u0275fac=function(L){return new(L||A)};static#t=this.\u0275mod=D.oAB({type:A});static#n=this.\u0275inj=D.cJS({})}return A})();const kn="browser",os="server";function Ya(A){return A===os}let us=(()=>{class A{static#e=this.\u0275prov=(0,D.Yz7)({token:A,providedIn:"root",factory:()=>new Ms((0,D.LFG)(oe),window)})}return A})();class Ms{constructor(F,x){this.document=F,this.window=x,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const x=function Ns(A,F){const x=A.getElementById(F)||A.getElementsByName(F)[0];if(x)return x;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const L=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let Q=L.currentNode;for(;Q;){const Ee=Q.shadowRoot;if(Ee){const Se=Ee.getElementById(F)||Ee.querySelector(`[name="${F}"]`);if(Se)return Se}Q=L.nextNode()}}return null}(this.document,F);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(F){this.supportsScrolling()&&(this.window.history.scrollRestoration=F)}scrollToElement(F){const x=F.getBoundingClientRect(),L=x.left+this.window.pageXOffset,Q=x.top+this.window.pageYOffset,Ee=this.offset();this.window.scrollTo(L-Ee[0],Q-Ee[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ls{}},5879:(yt,be,B)=>{B.d(be,{$8M:()=>Uh,$WT:()=>Rs,$Z:()=>Sc,AFp:()=>xw,ALo:()=>BC,AaK:()=>le,CHM:()=>sl,CRH:()=>Hy,EJc:()=>YS,EpF:()=>OT,F4k:()=>QE,FYo:()=>ai,FiY:()=>ta,GfV:()=>vg,Gpc:()=>Je,HDt:()=>fD,JOm:()=>sr,KtG:()=>dd,LFG:()=>Et,LSH:()=>f_,Lbi:()=>Is,Lck:()=>vx,MAs:()=>uy,MMx:()=>ES,NdJ:()=>Kg,O4$:()=>no,Ojb:()=>Nw,OlP:()=>Tt,Oqu:()=>mI,P3R:()=>Bv,PXZ:()=>Xy,Q6J:()=>qE,QGY:()=>Zg,Qsj:()=>Sn,R0b:()=>Ri,RDi:()=>vw,Rgc:()=>mm,SBq:()=>yg,Sil:()=>JS,Suo:()=>jy,TTD:()=>qt,TgZ:()=>zg,VuI:()=>eA,W1O:()=>rp,X6Q:()=>ND,XFs:()=>Pt,Xpm:()=>Gl,Xq5:()=>NE,Xts:()=>df,Y36:()=>bu,YKP:()=>xC,YNc:()=>sy,Yjl:()=>ha,Yz7:()=>Ut,Z0I:()=>In,ZZ4:()=>A0,_Bn:()=>PC,_UZ:()=>cy,_c5:()=>SR,_uU:()=>JT,aQg:()=>S0,c2e:()=>hD,cJS:()=>Kn,cg1:()=>Ba,dDg:()=>dR,dqk:()=>wn,eFA:()=>AD,eJc:()=>Im,ekj:()=>dI,eoX:()=>TD,f3M:()=>Mt,g9A:()=>Mw,h0i:()=>ih,hGG:()=>RR,hij:()=>em,iGM:()=>By,ifc:()=>pt,ip1:()=>dD,jDz:()=>jI,kL8:()=>jc,kcU:()=>al,lG2:()=>Uo,lcZ:()=>pm,lqb:()=>Us,lri:()=>ID,n5z:()=>Pp,oAB:()=>Vo,oxw:()=>LT,q4F:()=>Xv,qFp:()=>UR,qLn:()=>Du,qOj:()=>SE,qZA:()=>Wg,rWj:()=>wD,rg0:()=>Ee,s9C:()=>Yg,sBO:()=>Sm,s_b:()=>kl,soG:()=>Yy,tb:()=>ja,tp0:()=>wd,uIk:()=>kE,vHH:()=>Ie,vpe:()=>La,wAp:()=>Yf,xi3:()=>tp,xp6:()=>rT,z2F:()=>uh,zSh:()=>Na,zs3:()=>ka});var D=B(8645),g=B(7394),K=B(5592),ie=B(3019),ue=B(5619),oe=B(2096),_e=B(3020),He=B(4664),De=B(3997);function X(i){for(let o in i)if(i[o]===X)return o;throw Error("Could not find renamed property on target object.")}function ne(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const $e=X({__forward_ref__:X});function Je(i){return i.__forward_ref__=Je,i.toString=function(){return le(this())},i}function Be(i){return rt(i)?i():i}function rt(i){return"function"==typeof i&&i.hasOwnProperty($e)&&i.__forward_ref__===Je}function lt(i){return i&&!!i.\u0275providers}const un="https://g.co/ng/security#xss";class Ie extends Error{constructor(o,a){super(function Fe(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function Lt(i,o){throw new Ie(-201,!1)}function _t(i,o){null==i&&function et(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Ut(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Kn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Rn(i){return wt(i,vr)||wt(i,lr)}function In(i){return null!==Rn(i)}function wt(i,o){return i.hasOwnProperty(o)?i[o]:null}function ns(i){return i&&(i.hasOwnProperty(On)||i.hasOwnProperty(Hn))?i[On]:null}const vr=X({\u0275prov:X}),On=X({\u0275inj:X}),lr=X({ngInjectableDef:X}),Hn=X({ngInjectorDef:X});var Pt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Pt||{});let tn;function Dn(i){const o=tn;return tn=i,o}function zr(i,o,a){const l=Rn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Pt.Optional?null:void 0!==o?o:void Lt(le(i))}const wn=globalThis;class Tt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ut({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Wr={},qr="__NG_DI_FLAG__",ti="ngTempTokenPath",$=/\n/gm,H="__source";let W;function je(i){const o=W;return W=i,o}function tt(i,o=Pt.Default){if(void 0===W)throw new Ie(-203,!1);return null===W?zr(i,void 0,o):W.get(i,o&Pt.Optional?null:void 0,o)}function Et(i,o=Pt.Default){return(function St(){return tn}()||tt)(Be(i),o)}function Mt(i,o=Pt.Default){return Et(i,Ht(o))}function Ht(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Vn(i){const o=[];for(let a=0;a<i.length;a++){const l=Be(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ie(900,!1);let d,f=Pt.Default;for(let y=0;y<l.length;y++){const T=l[y],b=Ti(T);"number"==typeof b?-1===b?d=T.token:f|=b:d=T}o.push(Et(d,f))}else o.push(Et(l))}return o}function hi(i,o){return i[qr]=o,i.prototype[qr]=o,i}function Ti(i){return i[qr]}function fe(i){return{toString:i}.toString()}var Ge=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Ge||{}),pt=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(pt||{});const bt={},ct=[],nn=X({\u0275cmp:X}),pr=X({\u0275dir:X}),Un=X({\u0275pipe:X}),Ci=X({\u0275mod:X}),ni=X({\u0275fac:X}),ji=X({__NG_ELEMENT_ID__:X}),za=X({__NG_ENV_ID__:X});function td(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}function No(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],y=a[l++],T=a[l++];i.setAttribute(o,y,T,f)}else{const f=d,y=a[++l];Hl(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),l++}}return l}function An(i){return 3===i||4===i||6===i}function Hl(i){return 64===i.charCodeAt(0)}function da(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Ws(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Ws(i,o,a,l,d){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const T=i[f++];if("number"==typeof T){if(T===o){y=-1;break}if(T>o){y=f-1;break}}}for(;f<i.length;){const T=i[f];if("number"==typeof T)break;if(T===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}const Oo="ng-template";function Hu(i,o,a){let l=0,d=!0;for(;l<i.length;){let f=i[l++];if("string"==typeof f&&d){const y=i[l++];if(a&&"class"===f&&-1!==td(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<i.length&&"string"==typeof(f=i[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function ko(i){return 4===i.type&&i.value!==Oo}function $l(i,o,a){return o===(4!==i.type||a?i.value:Oo)}function Wa(i,o,a){let l=4;const d=i.attrs||[],f=function ss(i){for(let o=0;o<i.length;o++)if(An(i[o]))return o;return i.length}(d);let y=!1;for(let T=0;T<o.length;T++){const b=o[T];if("number"!=typeof b){if(!y)if(4&l){if(l=2|1&l,""!==b&&!$l(i,b,a)||""===b&&1===o.length){if(ri(l))return!1;y=!0}}else{const O=8&l?b:o[++T];if(8&l&&null!==i.attrs){if(!Hu(i.attrs,O,a)){if(ri(l))return!1;y=!0}continue}const Z=Hi(8&l?"class":b,d,ko(i),a);if(-1===Z){if(ri(l))return!1;y=!0;continue}if(""!==O){let re;re=Z>f?"":d[Z+1].toLowerCase();const de=8&l?re:null;if(de&&-1!==td(de,O,0)||2&l&&O!==re){if(ri(l))return!1;y=!0}}}}else{if(!y&&!ri(l)&&!ri(b))return!1;if(y&&ri(b))continue;y=!1,l=b|1&l}}return ri(l)||y}function ri(i){return 0==(1&i)}function Hi(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let T=o[++d];for(;"string"==typeof T;)T=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function yo(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function Ir(i,o,a=!1){for(let l=0;l<o.length;l++)if(Wa(i,o[l],a))return!0;return!1}function Za(i,o){return i?":not("+o.trim()+")":o}function $u(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const T=i[++a];d+="["+y+(T.length>0?'="'+T+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!ri(y)&&(o+=Za(f,d),d=""),l=y,f=f||!ri(l);a++}return""!==d&&(o+=Za(f,d)),o}function Gl(i){return fe(()=>{const o=Bo(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ge.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||pt.Emulated,styles:i.styles||ct,_:null,schemas:i.schemas||null,tView:null,id:""};Ka(a);const l=i.dependencies;return a.directiveDefs=Ps(l,!1),a.pipeDefs=Ps(l,!0),a.id=function xs(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Fo(i){return an(i)||cr(i)}function Gu(i){return null!==i}function Vo(i){return fe(()=>({type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function vo(i,o){if(null==i)return bt;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}function Uo(i){return fe(()=>{const o=Bo(i);return Ka(o),o})}function ha(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function an(i){return i[nn]||null}function cr(i){return i[pr]||null}function Zr(i){return i[Un]||null}function Rs(i){const o=an(i)||cr(i)||Zr(i);return null!==o&&o.standalone}function Vr(i,o){const a=i[Ci]||null;if(!a&&!0===o)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Bo(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||bt,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vo(i.inputs,o),outputs:vo(i.outputs)}}function Ka(i){i.features?.forEach(o=>o(i))}function Ps(i,o){if(!i)return null;const a=o?Zr:Fo;return()=>("function"==typeof i?i():i).map(l=>a(l)).filter(Gu)}const $n=0,it=1,jt=2,fn=3,Kr=4,jo=5,Gn=6,Yr=7,kn=8,os=9,Ur=10,Bt=11,qs=12,Ya=13,as=14,dr=15,Eo=16,us=17,Ms=18,Ns=19,Os=20,ls=21,cs=22,Br=23,Qa=24,Zt=25,Ks=1,ks=2,ds=7,Ys=9,tr=11;function gr(i){return Array.isArray(i)&&"object"==typeof i[Ks]}function Ln(i){return Array.isArray(i)&&!0===i[Ks]}function pa(i){return 0!=(4&i.flags)}function xi(i){return i.componentOffset>-1}function fi(i){return 1==(1&i.flags)}function zi(i){return!!i.template}function zl(i){return 0!=(512&i[jt])}function Qs(i,o){return i.hasOwnProperty(ni)?i[ni]:null}let wr=null,hs=!1;function Tr(i){const o=wr;return wr=i,o}const nu={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ru(i){if(!hr(i)||i.dirty){if(!i.producerMustRecompute(i)&&!Yu(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function Go(i){i.dirty=!0,function $o(i){if(void 0===i.liveConsumerNode)return;const o=hs;hs=!0;try{for(const a of i.liveConsumerNode)a.dirty||Go(a)}finally{hs=o}}(i),i.consumerMarkedDirty?.(i)}function va(i){return i&&(i.nextProducerIndex=0),Tr(i)}function Ku(i,o){if(Tr(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(hr(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Di(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Yu(i){q(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],l=i.producerLastReadVersion[o];if(l!==a.version||(ru(a),l!==a.version))return!0}return!1}function Me(i){if(q(i),hr(i))for(let o=0;o<i.producerNode.length;o++)Di(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Di(i,o){if(function ql(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),q(i),1===i.liveConsumerNode.length)for(let l=0;l<i.producerNode.length;l++)Di(i.producerNode[l],i.producerIndexOfThis[l]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const l=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];q(d),d.producerIndexOfThis[l]=o}}function hr(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function q(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let ad=null;function Ee(i){const o=Tr(null);try{return i()}finally{Tr(o)}}const It=()=>{},rn=(()=>({...nu,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:It}))();class Kt{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function qt(){return nr}function nr(i){return i.type.prototype.ngOnChanges&&(i.setInput=Fn),xn}function xn(){const i=Oi(this),o=i?.current;if(o){const a=i.previous;if(a===bt)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Fn(i,o,a,l){const d=this.declaredInputs[a],f=Oi(i)||function Wo(i,o){return i[fs]=o}(i,{previous:bt,current:null}),y=f.current||(f.current={}),T=f.previous,b=T[d];y[d]=new Kt(b&&b.currentValue,o,T===bt),i[l]=o}qt.ngInherit=!0;const fs="__ngSimpleChanges__";function Oi(i){return i[fs]||null}const Pr=function(i,o,a){},qi="svg";function Bn(i){for(;Array.isArray(i);)i=i[$n];return i}function Ju(i,o){return Bn(o[i])}function gi(i,o){return Bn(o[i.index])}function Zl(i,o){return i.data[o]}function Xs(i,o){return i[o]}function Yn(i,o){const a=o[i];return gr(a)?a:a[$n]}function To(i,o){return null==o?null:i[o]}function el(i){i[us]=0}function tl(i){1024&i[jt]||(i[jt]|=1024,Ia(i,1))}function Th(i){1024&i[jt]&&(i[jt]&=-1025,Ia(i,-1))}function Ia(i,o){let a=i[fn];if(null===a)return;a[jo]+=o;let l=a;for(a=a[fn];null!==a&&(1===o&&1===l[jo]||-1===o&&0===l[jo]);)a[jo]+=o,l=a,a=a[fn]}const Vt={lFrame:j(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ch(){return Vt.bindingsEnabled}function ke(){return Vt.lFrame.lView}function Ot(){return Vt.lFrame.tView}function sl(i){return Vt.lFrame.contextLView=i,i[kn]}function dd(i){return Vt.lFrame.contextLView=null,i}function si(){let i=Cp();for(;null!==i&&64===i.type;)i=i.parent;return i}function Cp(){return Vt.lFrame.currentTNode}function Fs(i,o){const a=Vt.lFrame;a.currentTNode=i,a.isParent=o}function Yo(){return Vt.lFrame.isParent}function jr(){const i=Vt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function to(){return Vt.lFrame.bindingIndex++}function ol(i,o){const a=Vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,fd(o)}function fd(i){Vt.lFrame.currentDirectiveIndex=i}function Ah(){return Vt.lFrame.currentQueryIndex}function w(i){Vt.lFrame.currentQueryIndex=i}function S(i){const o=i[it];return 2===o.type?o.declTNode:1===o.type?i[Gn]:null}function I(i,o,a){if(a&Pt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&Pt.Host||(d=S(f),null===d||(f=f[as],10&d.type))););if(null===d)return!1;o=d,i=f}const l=Vt.lFrame=N();return l.currentTNode=o,l.lView=i,!0}function R(i){const o=N(),a=i[it];Vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function N(){const i=Vt.lFrame,o=null===i?null:i.child;return null===o?j(i):o}function j(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Y(){const i=Vt.lFrame;return Vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ye=Y;function me(){const i=Y();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Jt(){return Vt.lFrame.selectedIndex}function kt(i){Vt.lFrame.selectedIndex=i}function Tn(){const i=Vt.lFrame;return Zl(i.tView,i.selectedIndex)}function no(){Vt.lFrame.currentNamespace=qi}function al(){!function io(){Vt.lFrame.currentNamespace=null}()}let md=!0;function uu(){return md}function so(i){md=i}function lu(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:T,ngAfterViewInit:b,ngAfterViewChecked:O,ngOnDestroy:V}=f;y&&(i.contentHooks??=[]).push(-a,y),T&&((i.contentHooks??=[]).push(a,T),(i.contentCheckHooks??=[]).push(a,T)),b&&(i.viewHooks??=[]).push(-a,b),O&&((i.viewHooks??=[]).push(a,O),(i.viewCheckHooks??=[]).push(a,O)),null!=V&&(i.destroyHooks??=[]).push(a,V)}}function ul(i,o,a){du(i,o,3,a)}function Qo(i,o,a,l){(3&i[jt])===a&&du(i,o,a,l)}function cu(i,o){let a=i[jt];(3&a)===o&&(a&=8191,a+=1,i[jt]=a)}function du(i,o,a,l){const f=l??-1,y=o.length-1;let T=0;for(let b=void 0!==l?65535&i[us]:0;b<y;b++)if("number"==typeof o[b+1]){if(T=o[b],null!=l&&T>=l)break}else o[b]<0&&(i[us]+=65536),(T<f||-1==f)&&(bh(i,a,o,b),i[us]=(4294901760&i[us])+b+2),b++}function Xl(i,o){Pr(4,i,o);const a=Tr(null);try{o.call(i)}finally{Tr(a),Pr(5,i,o)}}function bh(i,o,a,l){const d=a[l]<0,f=a[l+1],T=i[d?-a[l]:a[l]];d?i[jt]>>13<i[us]>>16&&(3&i[jt])===o&&(i[jt]+=8192,Xl(T,f)):Xl(T,f)}const hu=-1;class ec{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ll(i){return i!==hu}function cl(i){return 32767&i}function Jo(i,o){let a=function vv(i){return i>>16}(i),l=o;for(;a>0;)l=l[as],a--;return l}let Mh=!0;function Nh(i){const o=Mh;return Mh=i,o}const oo=255,dl=5;let Oh=0;const Vs={};function pu(i,o){const a=rc(i,o);if(-1!==a)return a;const l=o[it];l.firstCreatePass&&(i.injectorIndex=o.length,hl(l.data,i),hl(o,null),hl(l.blueprint,null));const d=ic(i,o),f=i.injectorIndex;if(ll(d)){const y=cl(d),T=Jo(d,o),b=T[it].data;for(let O=0;O<8;O++)o[f+O]=T[y+O]|b[y+O]}return o[f+8]=d,f}function hl(i,o){i.push(0,0,0,0,0,0,0,0,o)}function rc(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function ic(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=xp(d),null===l)return hu;if(a++,d=d[as],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return hu}function kh(i,o,a){!function ir(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ji)&&(l=a[ji]),null==l&&(l=a[ji]=Oh++);const d=l&oo;o.data[i+(d>>dl)]|=1<<d}(i,o,a)}function Lh(i,o,a){if(a&Pt.Optional||void 0!==i)return i;Lt()}function Wm(i,o,a,l){if(a&Pt.Optional&&void 0===l&&(l=null),!(a&(Pt.Self|Pt.Host))){const d=i[os],f=Dn(void 0);try{return d?d.get(o,l,a&Pt.Optional):zr(o,l,a&Pt.Optional)}finally{Dn(f)}}return Lh(l,0,a)}function qm(i,o,a,l=Pt.Default,d){if(null!==i){if(2048&o[jt]&&!(l&Pt.Self)){const y=function yd(i,o,a,l,d){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[jt]&&!(512&y[jt]);){const T=gu(f,y,a,l|Pt.Self,Vs);if(T!==Vs)return T;let b=f.parent;if(!b){const O=y[Os];if(O){const V=O.get(a,Vs,l);if(V!==Vs)return V}b=xp(y),y=y[as]}f=b}return d}(i,o,a,l,Vs);if(y!==Vs)return y}const f=gu(i,o,a,l,Vs);if(f!==Vs)return f}return Wm(o,a,l,d)}function gu(i,o,a,l,d){const f=function Fh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ji)?i[ji]:void 0;return"number"==typeof o?o>=0?o&oo:Rp:o}(a);if("function"==typeof f){if(!I(o,i,l))return l&Pt.Host?Lh(d,0,l):Wm(o,a,l,d);try{let y;if(y=f(l),null!=y||l&Pt.Optional)return y;Lt()}finally{ye()}}else if("number"==typeof f){let y=null,T=rc(i,o),b=hu,O=l&Pt.Host?o[dr][Gn]:null;for((-1===T||l&Pt.SkipSelf)&&(b=-1===T?ic(i,o):o[T+8],b!==hu&&Vh(l,!1)?(y=o[it],T=cl(b),o=Jo(b,o)):T=-1);-1!==T;){const V=o[it];if(_u(f,T,V.data)){const Z=mu(T,o,a,y,l,O);if(Z!==Vs)return Z}b=o[T+8],b!==hu&&Vh(l,o[it].data[T+8]===O)&&_u(f,T,o)?(y=V,T=cl(b),o=Jo(b,o)):T=-1}}return d}function mu(i,o,a,l,d,f){const y=o[it],T=y.data[i+8],V=fl(T,y,a,null==l?xi(T)&&Mh:l!=y&&0!=(3&T.type),d&Pt.Host&&f===T);return null!==V?Co(o,y,V,T):Vs}function fl(i,o,a,l,d){const f=i.providerIndexes,y=o.data,T=1048575&f,b=i.directiveStart,V=f>>20,re=d?T+V:i.directiveEnd;for(let de=l?T:T+V;de<re;de++){const Le=y[de];if(de<b&&a===Le||de>=b&&Le.type===a)return de}if(d){const de=y[b];if(de&&zi(de)&&de.type===a)return b}return null}function Co(i,o,a,l){let d=i[a];const f=o.data;if(function Sh(i){return i instanceof ec}(d)){const y=d;y.resolving&&function Ke(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${i}${a}`)}(function We(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}(f[a]));const T=Nh(y.canSeeViewProviders);y.resolving=!0;const O=y.injectImpl?Dn(y.injectImpl):null;I(i,l,Pt.Default);try{d=i[a]=y.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Jl(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=nr(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==O&&Dn(O),Nh(T),y.resolving=!1,ye()}}return d}function _u(i,o,a){return!!(a[o+(i>>dl)]&1<<i)}function Vh(i,o){return!(i&Pt.Self||i&Pt.Host&&o)}class ki{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return qm(this._tNode,this._lView,o,Ht(l),a)}}function Rp(){return new ki(si(),ke())}function Pp(i){return fe(()=>{const o=i.prototype.constructor,a=o[ni]||sc(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[ni]||sc(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function sc(i){return rt(i)?()=>{const o=sc(Be(i));return o&&o()}:Qs(i)}function xp(i){const o=i[it],a=o.type;return 2===a?o.declTNode:1===a?i[Gn]:null}function Uh(i){return function Ev(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(An(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(si(),i)}const yu="__parameters__";function Xo(i,o,a){return fe(()=>{const l=function pl(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return T.annotation=y,T;function T(b,O,V){const Z=b.hasOwnProperty(yu)?b[yu]:Object.defineProperty(b,yu,{value:[]})[yu];for(;Z.length<=V;)Z.push(null);return(Z[V]=Z[V]||[]).push(y),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Ki(i,o){i.forEach(a=>Array.isArray(a)?Ki(a,o):o(a))}function Op(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function $h(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function mi(i,o,a){let l=ea(i,o);return l>=0?i[1|l]=a:(l=~l,function Gh(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function zh(i,o){const a=ea(i,o);if(a>=0)return i[1|a]}function ea(i,o){return function vd(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=i[f<<a];if(o===y)return f<<a;y>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const ta=hi(Xo("Optional"),8),wd=hi(Xo("SkipSelf"),4);function Ad(i){return 128==(128&i.flags)}var sr=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(sr||{});const Qi=new Map;let nt=0;const tf="__ngContext__";function bi(i,o){gr(o)?(i[tf]=o[Ns],function Ze(i){Qi.set(i[Ns],i)}(o)):i[tf]=o}let Qp;function jn(i,o){return Qp(i,o)}function na(i){const o=i[fn];return Ln(o)?o[fn]:o}function v(i){return p(i[qs])}function h(i){return p(i[Kr])}function p(i){for(;null!==i&&!Ln(i);)i=i[Kr];return i}function E(i,o,a,l,d){if(null!=l){let f,y=!1;Ln(l)?f=l:gr(l)&&(y=!0,l=l[$n]);const T=Bn(l);0===i&&null!==a?null==d?Xp(o,a,T):xa(o,a,T,d||null,!0):1===i&&null!==a?xa(o,a,T,d||null,!0):2===i?function r_(i,o,a){const l=eg(i,o);l&&function El(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,T,y):3===i&&o.destroyNode(T),null!=f&&function FA(i,o,a,l,d){const f=a[ds];f!==Bn(a)&&E(o,i,l,f,d);for(let T=tr;T<a.length;T++){const b=a[T];ig(b[it],b,i,o,l,f)}}(o,i,f,a,d)}}function ce(i,o,a){return i.createElement(o,a)}function es(i,o){const a=i[Ys],l=a.indexOf(o);Th(o),a.splice(l,1)}function Sd(i,o){if(i.length<=tr)return;const a=tr+o,l=i[a];if(l){const d=l[Eo];null!==d&&d!==i&&es(d,l),o>0&&(i[a-1][Kr]=l[Kr]);const f=$h(i,tr+o);!function Ve(i,o){ig(i,o,o[Bt],2,null,null),o[$n]=null,o[Gn]=null}(l[it],l);const y=f[Ms];null!==y&&y.detachView(f[it]),l[fn]=null,l[Kr]=null,l[jt]&=-129}return l}function Ra(i,o){if(!(256&o[jt])){const a=o[Bt];o[Br]&&Me(o[Br]),o[Qa]&&Me(o[Qa]),a.destroyNode&&ig(i,o,a,3,null,null),function vt(i){let o=i[qs];if(!o)return Ao(i[it],i);for(;o;){let a=null;if(gr(o))a=o[qs];else{const l=o[tr];l&&(a=l)}if(!a){for(;o&&!o[Kr]&&o!==i;)gr(o)&&Ao(o[it],o),o=o[fn];null===o&&(o=i),gr(o)&&Ao(o[it],o),a=o&&o[Kr]}o=a}}(o)}}function Ao(i,o){if(!(256&o[jt])){o[jt]&=-129,o[jt]|=256,function Pa(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof ec)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const T=d[f[y]],b=f[y+1];Pr(4,T,b);try{b.call(T)}finally{Pr(5,T,b)}}else{Pr(4,d,f);try{f.call(d)}finally{Pr(5,d,f)}}}}}(i,o),function t_(i,o){const a=i.cleanup,l=o[Yr];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?l[y]():l[-y].unsubscribe(),f+=2}else a[f].call(l[a[f+1]]);null!==l&&(o[Yr]=null);const d=o[ls];if(null!==d){o[ls]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[it].type&&o[Bt].destroy();const a=o[Eo];if(null!==a&&Ln(o[fn])){a!==o[fn]&&es(a,o);const l=o[Ms];null!==l&&l.detachView(i)}!function ef(i){Qi.delete(i[Ns])}(o)}}function Rd(i,o,a){return function Pd(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[$n];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=i.data[l.directiveStart+d];if(f===pt.None||f===pt.Emulated)return null}return gi(l,a)}}(i,o.parent,a)}function xa(i,o,a,l,d){i.insertBefore(o,a,l,d)}function Xp(i,o,a){i.appendChild(o,a)}function ys(i,o,a,l,d){null!==l?xa(i,o,a,l,d):Xp(i,o,a)}function eg(i,o){return i.parentNode(o)}let n_,yi,sg,Ma=function Rv(i,o,a){return 40&i.type?gi(i,a):null};function ng(i,o,a,l){const d=Rd(i,l,o),f=o[Bt],T=function dw(i,o,a){return Ma(i,o,a)}(l.parent||o[Gn],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)ys(f,d,a[b],T,!1);else ys(f,d,a,T,!1);void 0!==n_&&n_(f,l,o,a,d)}function rg(i,o){if(null!==o){const a=o.type;if(3&a)return gi(o,i);if(4&a)return Pv(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return rg(i,l);{const d=i[o.index];return Ln(d)?Pv(-1,d):Bn(d)}}if(32&a)return jn(o,i)()||Bn(i[o.index]);{const l=hw(i,o);return null!==l?Array.isArray(l)?l[0]:rg(na(i[dr]),l):rg(i,o.next)}}return null}function hw(i,o){return null!==o?i[dr][Gn].projection[o.projection]:null}function Pv(i,o){const a=tr+i+1;if(a<o.length){const l=o[a],d=l[it].firstChild;if(null!==d)return rg(l,d)}return o[ds]}function xv(i,o,a,l,d,f,y){for(;null!=a;){const T=l[a.index],b=a.type;if(y&&0===o&&(T&&bi(Bn(T),l),a.flags|=2),32!=(32&a.flags))if(8&b)xv(i,o,a.child,l,d,f,!1),E(o,i,d,T,f);else if(32&b){const O=jn(a,l);let V;for(;V=O();)E(o,i,d,V,f);E(o,i,d,T,f)}else 16&b?pw(i,o,l,a,d,f):E(o,i,d,T,f);a=y?a.projectionNext:a.next}}function ig(i,o,a,l,d,f){xv(a,l,i.firstChild,o,d,f,!1)}function pw(i,o,a,l,d,f){const y=a[dr],b=y[Gn].projection[l.projection];if(Array.isArray(b))for(let O=0;O<b.length;O++)E(o,i,d,b[O],f);else{let O=b;const V=y[fn];Ad(l)&&(O.flags|=128),xv(i,o,O,V,d,f,!0)}}function gw(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function mw(i,o,a){const{mergedAttrs:l,classes:d,styles:f}=a;null!==l&&No(i,o,l),null!==d&&gw(i,o,d),null!==f&&function UA(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function vw(i){yi=i}function Qn(i){return function or(){if(void 0===sg&&(sg=null,wn.trustedTypes))try{sg=wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return sg}()?.createScriptURL(i)||i}class Nv{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${un})`}}function vc(i){return i instanceof Nv?i.changingThisBreaksApplicationSecurity:i}function ra(i,o){const a=function Jr(i){return i instanceof Nv&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${un})`)}return a===o}const wu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Nd=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Nd||{});function f_(i){const o=cf();return o?o.sanitize(Nd.URL,i)||"":ra(i,"URL")?vc(i):function xd(i){return(i=String(i)).match(wu)?i:"unsafe:"+i}(pe(i))}function _n(i){const o=cf();if(o)return Qn(o.sanitize(Nd.RESOURCE_URL,i)||"");if(ra(i,"ResourceURL"))return Qn(vc(i));throw new Ie(904,!1)}function Bv(i,o,a){return function Uv(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?_n:f_}(o,a)(i)}function cf(){const i=ke();return i&&i[Ur].sanitizer}const df=new Tt("ENVIRONMENT_INITIALIZER"),Aw=new Tt("INJECTOR",-1),bw=new Tt("INJECTOR_DEF_TYPES");class jv{get(o,a=Wr){if(a===Wr){const l=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw l.name="NullInjectorError",l}return a}}function zA(...i){return{\u0275providers:$v(0,i),\u0275fromNgModule:!0}}function $v(i,...o){const a=[],l=new Set;let d;const f=y=>{a.push(y)};return Ki(o,y=>{const T=y;p_(T,f,[],l)&&(d||=[],d.push(T))}),void 0!==d&&Sw(d,f),a}function Sw(i,o){for(let a=0;a<i.length;a++){const{ngModule:l,providers:d}=i[a];cg(d,f=>{o(f,l)})}}function p_(i,o,a,l){if(!(i=Be(i)))return!1;let d=null,f=ns(i);const y=!f&&an(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const b=i.ngModule;if(f=ns(b),!f)return!1;d=b}const T=l.has(d);if(y){if(T)return!1;if(l.add(d),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const O of b)p_(O,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let O;l.add(d);try{Ki(f.imports,V=>{p_(V,o,a,l)&&(O||=[],O.push(V))})}finally{}void 0!==O&&Sw(O,o)}if(!T){const O=Qs(d)||(()=>new d);o({provide:d,useFactory:O,deps:ct},d),o({provide:bw,useValue:d,multi:!0},d),o({provide:df,useValue:()=>Et(d),multi:!0},d)}const b=f.providers;if(null!=b&&!T){const O=i;cg(b,V=>{o(V,O)})}}}return d!==i&&void 0!==i.providers}function cg(i,o){for(let a of i)lt(a)&&(a=a.\u0275providers),Array.isArray(a)?cg(a,o):o(a)}const Od=X({provide:String,useValue:X});function kd(i){return null!==i&&"object"==typeof i&&Od in i}function Tc(i){return"function"==typeof i}const Na=new Tt("Set Injector scope."),fg={},hf={};let g_;function ff(){return void 0===g_&&(g_=new jv),g_}class Us{}class vi extends Us{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,y_(o,y=>this.processProvider(y)),this.records.set(Aw,Ld(void 0,this)),d.has("environment")&&this.records.set(Us,Ld(void 0,this));const f=this.records.get(Na);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(bw.multi,ct,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=je(this),l=Dn(void 0);try{return o()}finally{je(a),Dn(l)}}get(o,a=Wr,l=Pt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(za))return o[za](this);l=Ht(l);const f=je(this),y=Dn(void 0);try{if(!(l&Pt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const O=function Pw(i){return"function"==typeof i||"object"==typeof i&&i instanceof Tt}(o)&&Rn(o);b=O&&this.injectableDefInScope(O)?Ld(m_(o),fg):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(l&Pt.Self?ff():this.parent).get(o,a=l&Pt.Optional&&a===Wr?null:a)}catch(T){if("NullInjectorError"===T.name){if((T[ti]=T[ti]||[]).unshift(le(o)),f)throw T;return function Bi(i,o,a,l){const d=i[ti];throw o[H]&&d.unshift(o[H]),i.message=function Ae(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let T=o[y];f.push(y+":"+("string"==typeof T?JSON.stringify(T):le(T)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace($,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ti]=null,i}(T,o,"R3InjectorError",this.source)}throw T}finally{Dn(y),je(f)}}resolveInjectorInitializers(){const o=je(this),a=Dn(void 0);try{const d=this.get(df.multi,ct,Pt.Self);for(const f of d)f()}finally{je(o),Dn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(le(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let a=Tc(o=Be(o))?o:Be(o&&o.provide);const l=function __(i){return kd(i)?Ld(void 0,i.useValue):Ld(pf(i),fg)}(o);if(Tc(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ld(void 0,fg,!0),d.factory=()=>Vn(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===fg&&(a.value=hf,a.value=a.factory()),"object"==typeof a.value&&a.value&&function pg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Be(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function m_(i){const o=Rn(i),a=null!==o?o.factory:Qs(i);if(null!==a)return a;if(i instanceof Tt)throw new Ie(204,!1);if(i instanceof Function)return function Gv(i){const o=i.length;if(o>0)throw function dc(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Ie(204,!1);const a=function yr(i){return i&&(i[vr]||i[lr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ie(204,!1)}function pf(i,o,a){let l;if(Tc(i)){const d=Be(i);return Qs(d)||m_(d)}if(kd(i))l=()=>Be(i.useValue);else if(function hg(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Vn(i.deps||[]));else if(function dg(i){return!(!i||!i.useExisting)}(i))l=()=>Et(Be(i.useExisting));else{const d=Be(i&&(i.useClass||i.provide));if(!function gf(i){return!!i.deps}(i))return Qs(d)||m_(d);l=()=>new d(...Vn(i.deps))}return l}function Ld(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function y_(i,o){for(const a of i)Array.isArray(a)?y_(a,o):a&&lt(a)?y_(a.\u0275providers,o):o(a)}const xw=new Tt("AppId",{providedIn:"root",factory:()=>wl}),wl="ng",Mw=new Tt("Platform Initializer"),Is=new Tt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nw=new Tt("CSP nonce",{providedIn:"root",factory:()=>function bo(){if(void 0!==yi)return yi;if(typeof document<"u")return document;throw new Ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Vd=(i,o,a)=>null;function Ud(i,o,a=!1){return Vd(i,o,a)}class Dl{}class Kv{}class Qv{resolveComponentFactory(o){throw function Uw(i){const o=Error(`No component factory found for ${le(i)}.`);return o.ngComponent=i,o}(o)}}let vf=(()=>{class i{static#e=this.NULL=new Qv}return i})();function Jv(){return Dc(si(),ke())}function Dc(i,o){return new yg(gi(i,o))}let yg=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=Jv}return i})();function YA(i){return i instanceof yg?i.nativeElement:i}class ai{}let Sn=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Bw(){const i=ke(),a=Yn(si().index,i);return(gr(a)?a:i)[Bt]}()}return i})(),jw=(()=>{class i{static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>null})}return i})();class vg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Xv=new vg("16.2.12"),eE={};function nE(i,o=null,a=null,l){const d=rE(i,o,a,l);return d.resolveInjectorInitializers(),d}function rE(i,o=null,a=null,l,d=new Set){const f=[a||ct,zA(i)];return l=l||("object"==typeof i?void 0:le(i)),new vi(f,o||ff(),l||null,d)}let ka=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=Wr;static#t=this.NULL=new jv;static create(a,l){if(Array.isArray(a))return nE({name:""},l,a,"");{const d=a.name??"";return nE({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=Ut({token:i,providedIn:"any",factory:()=>Et(Aw)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function iE(i){return i.ngOriginalError}class Du{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&iE(o);for(;a&&iE(a);)a=iE(a);return a||null}}function wg(i){return o=>{setTimeout(i,void 0,o)}}const La=class ui extends D.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),f=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(f=wg(f),d&&(d=wg(d)),y&&(y=wg(y)));const T=super.subscribe({next:d,error:f,complete:y});return o instanceof g.w0&&o.add(T),T}};function If(...i){}class Ri{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Au(){const i="function"==typeof wn.requestAnimationFrame;let o=wn[i?"requestAnimationFrame":"setTimeout"],a=wn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Zw(i){const o=()=>{!function qw(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(wn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,sE(i),i.isCheckStableRunning=!0,x_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),sE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,T)=>{if(function uE(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(T))return a.invokeTask(d,f,y,T);try{return Kw(i),a.invokeTask(d,f,y,T)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),wf(i)}},onInvoke:(a,l,d,f,y,T,b)=>{try{return Kw(i),a.invoke(d,f,y,T,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),wf(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,sE(i),x_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ri.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Ri.isInAngularZone())throw new Ie(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Tg,If,If);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Tg={};function x_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function sE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Kw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function wf(i){i._nesting--,x_(i)}class oE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Yw=new Tt("",{providedIn:"root",factory:aE});function aE(){const i=Mt(Ri);let o=!0;const a=new K.y(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new K.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Ri.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Ri.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ie.T)(a,l.pipe((0,_e.B)()))}function Al(i){return i instanceof Function?i():i}let M_=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function So(i){for(;i;){i[jt]|=64;const o=na(i);if(zl(i)&&!o)return i;i=o}return null}const dE=new Tt("",{providedIn:"root",factory:()=>!1});let Dg=null;function Ag(i,o){return i[o]??pE()}function bf(i,o){const a=pE();a.producerNode?.length&&(i[o]=Dg,a.lView=i,Dg=nT())}const $d={...nu,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{So(i.lView)},lView:null};function nT(){return Object.create($d)}function pE(){return Dg??=nT(),Dg}const on={};function rT(i){iT(Ot(),ke(),Jt()+i,!1)}function iT(i,o,a,l){if(!l)if(3==(3&o[jt])){const f=i.preOrderCheckHooks;null!==f&&ul(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Qo(o,f,0,a)}kt(a)}function bu(i,o=Pt.Default){const a=ke();return null===a?Et(i,o):qm(si(),a,Be(i),o)}function Sc(){throw new Error("invalid")}function bg(i,o,a,l,d,f,y,T,b,O,V){const Z=o.blueprint.slice();return Z[$n]=d,Z[jt]=140|l,(null!==O||i&&2048&i[jt])&&(Z[jt]|=2048),el(Z),Z[fn]=Z[as]=i,Z[kn]=a,Z[Ur]=y||i&&i[Ur],Z[Bt]=T||i&&i[Bt],Z[os]=b||i&&i[os]||null,Z[Gn]=f,Z[Ns]=function we(){return nt++}(),Z[cs]=V,Z[Os]=O,Z[dr]=2==o.type?i[dr]:Z,Z}function Gd(i,o,a,l,d){let f=i.data[o];if(null===f)f=function O_(i,o,a,l,d){const f=Cp(),y=Yo(),b=i.data[o]=function Mg(i,o,a,l,d,f){let y=o?o.injectorIndex:-1,T=0;return function wa(){return null!==Vt.skipHydrationRootTNode}()&&(T|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b,b.prev=f)),b}(i,o,a,l,d),function hd(){return Vt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Ko(){const i=Vt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Fs(f,!0),f}function Sg(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function k_(i,o,a,l,d){const f=Ag(o,Br),y=Jt(),T=2&l;try{kt(-1),T&&o.length>Zt&&iT(i,o,Zt,!1),Pr(T?2:0,d);const O=T?f:null,V=va(O);try{null!==O&&(O.dirty=!1),a(l,d)}finally{Ku(O,V)}}finally{T&&null===o[Br]&&bf(o,Br),kt(y),Pr(T?3:1,d)}}function Rg(i,o,a){if(pa(o)){const l=Tr(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const T=i.data[y];T.contentQueries&&T.contentQueries(1,a[y],y)}}finally{Tr(l)}}}function L_(i,o,a){Ch()&&(function sb(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;xi(a)&&function ub(i,o,a){const l=gi(o,i),d=F_(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const T=Mc(i,bg(i,d,null,y,l,o,null,i[Ur].rendererFactory.createRenderer(l,a),null,null,null));i[o.index]=T}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||pu(a,o),bi(l,o);const y=a.initialInputs;for(let T=d;T<f;T++){const b=i.data[T],O=Co(o,i,T,a);bi(O,o),null!==y&&lb(0,T-d,O,b,0,y),zi(b)&&(Yn(a.index,o)[kn]=Co(o,i,T,a))}}(i,o,a,gi(a,o)),64==(64&a.flags)&&Zd(i,o,a))}function Pg(i,o,a=gi){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],T=-1===y?a(o,i):i[y];i[d++]=T}}}function F_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=V_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function V_(i,o,a,l,d,f,y,T,b,O,V){const Z=Zt+l,re=Z+d,de=function U_(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:on);return a}(Z,re),Le="function"==typeof O?O():O;return de[it]={type:i,blueprint:de,template:a,queries:null,viewQuery:T,declTNode:o,data:de.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:Le,incompleteFirstPass:!1,ssrId:V}}let xg=i=>null;function zd(i,o,a,l){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===l?mE(a,o,d,f):l.hasOwnProperty(d)&&mE(a,o,l[d],f)}return a}function mE(i,o,a,l){i.hasOwnProperty(a)?i[a].push(o,l):i[a]=[o,l]}function uo(i,o,a,l,d,f,y,T){const b=gi(o,a);let V,O=o.inputs;!T&&null!=O&&(V=O[l])?(Ng(i,a,V,l,d),xi(o)&&function B_(i,o){const a=Yn(o,i);16&a[jt]||(a[jt]|=64)}(a,o.index)):3&o.type&&(l=function ws(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,o.value||"",l):d,f.setProperty(b,l,d))}function Su(i,o,a,l){if(Ch()){const d=null===l?null:{"":-1},f=function Pc(i,o){const a=i.directiveRegistry;let l=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Ir(o,y.selectors,!1))if(l||(l=[]),zi(y))if(null!==y.findHostDirectiveDefs){const T=[];d=d||new Map,y.findHostDirectiveDefs(y,T,d),l.unshift(...T,y),H_(i,o,T.length)}else l.unshift(y),H_(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(i,a);let y,T;null===f?y=T=null:[y,T]=f,null!==y&&Wd(i,o,a,y,d,T),d&&function ob(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ie(-301,!1);l.push(o[d],f)}}}(a,l,d)}a.mergedAttrs=da(a.mergedAttrs,a.attrs)}function Wd(i,o,a,l,d,f){for(let O=0;O<l.length;O++)kh(pu(a,o),i,l[O].type);!function ab(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let O=0;O<l.length;O++){const V=l[O];V.providersResolver&&V.providersResolver(V)}let y=!1,T=!1,b=Sg(i,o,l.length,null);for(let O=0;O<l.length;O++){const V=l[O];a.mergedAttrs=da(a.mergedAttrs,V.hostAttrs),cT(i,a,o,b,V),lT(b,V,d),null!==V.contentQueries&&(a.flags|=4),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(a.flags|=64);const Z=V.type.prototype;!y&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!T&&(Z.ngOnChanges||Z.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),T=!0),b++}!function oT(i,o,a){const d=o.directiveEnd,f=i.data,y=o.attrs,T=[];let b=null,O=null;for(let V=o.directiveStart;V<d;V++){const Z=f[V],re=a?a.get(Z):null,Le=re?re.outputs:null;b=zd(Z.inputs,V,b,re?re.inputs:null),O=zd(Z.outputs,V,O,Le);const Ye=null===b||null===y||ko(o)?null:cb(b,V,y);T.push(Ye)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=T,o.inputs=b,o.outputs=O}(i,a,f)}function Zd(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Ql(){return Vt.lFrame.currentDirectiveIndex}();try{kt(f);for(let T=l;T<d;T++){const b=i.data[T],O=o[T];fd(T),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&uT(b,O)}}finally{kt(-1),fd(y)}}function uT(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function H_(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function lT(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;zi(o)&&(a[""]=i)}}function cT(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Qs(d.type)),y=new ec(f,zi(d),bu);i.blueprint[l]=y,a[l]=y,function aT(i,o,a,l,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const T=~o.index;(function qd(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=T&&y.push(T),y.push(a,l,f)}}(i,o,l,Sg(i,a,d.hostVars,on),d)}function Ro(i,o,a,l,d,f){const y=gi(i,o);!function $_(i,o,a,l,d,f,y){if(null==f)i.removeAttribute(o,d,a);else{const T=null==y?pe(f):y(f,l||"",d);i.setAttribute(o,d,T,a)}}(o[Bt],y,f,i.value,a,l,d)}function lb(i,o,a,l,d,f){const y=f[o];if(null!==y)for(let T=0;T<y.length;)_E(l,a,y[T++],y[T++],y[T++])}function _E(i,o,a,l,d){const f=Tr(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(d=y[l].call(o,d)),null!==i.setInput?i.setInput(o,d,a,l):o[l]=d}finally{Tr(f)}}function cb(i,o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===l&&(l=[]);const y=i[f];for(let T=0;T<y.length;T+=2)if(y[T]===o){l.push(f,y[T+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function yE(i,o,a,l){return[i,!0,!1,o,null,0,l,a,null,null,null]}function xc(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const f=a[l+1];if(-1!==f){const y=i.data[f];w(a[l]),y.contentQueries(2,o[f],f)}}}function Mc(i,o){return i[qs]?i[Ya][Kr]=o:i[qs]=o,i[Ya]=o,o}function G_(i,o,a){w(0);const l=Tr(null);try{o(i,a)}finally{Tr(l)}}function dT(i){return i[Yr]||(i[Yr]=[])}function vE(i){return i.cleanup||(i.cleanup=[])}function fT(i,o){const a=i[os],l=a?a.get(Du,null):null;l&&l.handleError(o)}function Ng(i,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],T=a[f++];_E(i.data[y],o[y],l,T,d)}}function hb(i,o){const a=Yn(o,i),l=a[it];!function fb(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(l,a);const d=a[$n];null!==d&&null===a[cs]&&(a[cs]=Ud(d,a[os])),EE(l,a,a[kn])}function EE(i,o,a){R(o);try{const l=i.viewQuery;null!==l&&G_(1,l,a);const d=i.template;null!==d&&k_(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&xc(i,o),i.staticViewQueries&&G_(2,i.viewQuery,a);const f=i.components;null!==f&&function pb(i,o){for(let a=0;a<o.length;a++)hb(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[jt]&=-5,me()}}let z_=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,l,d){const f=typeof Zone>"u"?null:Zone.current,y=function Se(i,o,a){const l=Object.create(rn);a&&(l.consumerAllowSignalWrites=!0),l.fn=i,l.schedule=o;const d=y=>{l.cleanupFn=y};return l.ref={notify:()=>Go(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Yu(l))return;l.hasRun=!0;const y=va(l);try{l.cleanupFn(),l.cleanupFn=It,l.fn(d)}finally{Ku(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(a,O=>{this.all.has(O)&&this.queue.set(O,f)},d);let T;this.all.add(y),y.notify();const b=()=>{y.cleanup(),T?.(),this.all.delete(y),this.queue.delete(y)};return T=l?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[a,l]of this.queue)this.queue.delete(a),l?l.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:()=>new i})}return i})();function Kd(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const T=o[y];"number"==typeof T?f=T:1==f?d=Pe(d,T):2==f&&(l=Pe(l,T+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function Nc(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];null!==f&&l.push(Bn(f)),Ln(f)&&pT(f,l);const y=a.type;if(8&y)Nc(i,o,a.child,l);else if(32&y){const T=jn(a,o);let b;for(;b=T();)l.push(b)}else if(16&y){const T=hw(o,a);if(Array.isArray(T))l.push(...T);else{const b=na(o[dr]);Nc(b[it],b,T,l,!0)}}a=d?a.projectionNext:a.next}return l}function pT(i,o){for(let a=tr;a<i.length;a++){const l=i[a],d=l[it].firstChild;null!==d&&Nc(l[it],l,d,o)}i[ds]!==i[$n]&&o.push(i[ds])}function Og(i,o,a,l=!0){const d=o[Ur],f=d.rendererFactory,y=d.afterRenderEventManager;f.begin?.(),y?.begin();try{Rf(i,o,i.template,a)}catch(b){throw l&&fT(o,b),b}finally{f.end?.(),d.effectManager?.flush(),y?.end()}}function Rf(i,o,a,l){const d=o[jt];if(256!=(256&d)){o[Ur].effectManager?.flush(),R(o);try{el(o),function Yl(i){return Vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&k_(i,o,a,2,l);const y=3==(3&d);if(y){const O=i.preOrderCheckHooks;null!==O&&ul(o,O,null)}else{const O=i.preOrderHooks;null!==O&&Qo(o,O,0,null),cu(o,0)}if(function wE(i){for(let o=v(i);null!==o;o=h(o)){if(!o[ks])continue;const a=o[Ys];for(let l=0;l<a.length;l++){tl(a[l])}}}(o),kg(o,2),null!==i.contentQueries&&xc(i,o),y){const O=i.contentCheckHooks;null!==O&&ul(o,O)}else{const O=i.contentHooks;null!==O&&Qo(o,O,1),cu(o,1)}!function Rc(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const l=Ag(o,Qa);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)kt(~f);else{const y=f,T=a[++d],b=a[++d];ol(T,y),l.dirty=!1;const O=va(l);try{b(2,o[y])}finally{Ku(l,O)}}}}finally{null===o[Qa]&&bf(o,Qa),kt(-1)}}(i,o);const T=i.components;null!==T&&CE(o,T,0);const b=i.viewQuery;if(null!==b&&G_(2,b,l),y){const O=i.viewCheckHooks;null!==O&&ul(o,O)}else{const O=i.viewHooks;null!==O&&Qo(o,O,2),cu(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[jt]&=-73,Th(o)}finally{me()}}}function kg(i,o){for(let a=v(i);null!==a;a=h(a))for(let l=tr;l<a.length;l++)mT(a[l],o)}function TE(i,o,a){mT(Yn(o,i),a)}function mT(i,o){if(!function Kl(i){return 128==(128&i[jt])}(i))return;const a=i[it],l=i[jt];if(80&l&&0===o||1024&l||2===o)Rf(a,i,a.template,i[kn]);else if(i[jo]>0){kg(i,1);const d=a.components;null!==d&&CE(i,d,1)}}function CE(i,o,a){for(let l=0;l<o.length;l++)TE(i,o[l],a)}class Lg{get rootNodes(){const o=this._lView,a=o[it];return Nc(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(o){this._lView[kn]=o}get destroyed(){return 256==(256&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[fn];if(Ln(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Sd(o,l),$h(a,l))}this._attachedToViewContainer=!1}Ra(this._lView[it],this._lView)}onDestroy(o){!function nl(i,o){if(256==(256&i[jt]))throw new Ie(911,!1);null===i[ls]&&(i[ls]=[]),i[ls].push(o)}(this._lView,o)}markForCheck(){So(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-129}reattach(){this._lView[jt]|=128}detectChanges(){Og(this._lView[it],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ft(i,o){ig(i,o,o[Bt],2,null,null)}(this._lView[it],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class _T extends Lg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Og(o[it],o,o[kn],!1)}checkNoChanges(){}get context(){return null}}class DE extends vf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=an(o);return new Fg(a,this.ngModule)}}function W_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class yT{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=Ht(l);const d=this.injector.get(o,eE,l);return d!==eE||a===eE?d:this.parentInjector.get(o,a,l)}}class Fg extends Kv{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=W_(o.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return W_(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function $i(i){return i.map($u).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof Us?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new yT(o,f):o,T=y.get(ai,null);if(null===T)throw new Ie(407,!1);const Z={rendererFactory:T,sanitizer:y.get(jw,null),effectManager:y.get(z_,null),afterRenderEventManager:y.get(M_,null)},re=T.createRenderer(null,this.componentDef),de=this.componentDef.selectors[0][0]||"div",Le=l?function nb(i,o,a,l){const f=l.get(dE,!1)||a===pt.ShadowDom,y=i.selectRootElement(o,f);return function gE(i){xg(i)}(y),y}(re,l,this.componentDef.encapsulation,y):ce(re,de,function mb(i){const o=i.toLowerCase();return"svg"===o?qi:"math"===o?"math":null}(de)),Nt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ze=null;null!==Le&&(ze=Ud(Le,y,!0));const Yt=V_(0,null,null,1,0,null,null,null,null,null,null),pn=bg(null,Yt,null,Nt,null,null,Z,re,y,null,ze);let Xn,fo;R(pn);try{const Fl=this.componentDef;let Mm,P0=null;Fl.findHostDirectiveDefs?(Mm=[],P0=new Map,Fl.findHostDirectiveDefs(Fl,Mm,P0),Mm.push(Fl)):Mm=[Fl];const BR=function _b(i,o){const a=i[it],l=Zt;return i[l]=o,Gd(a,l,2,"#host",null)}(pn,Le),jR=function Pf(i,o,a,l,d,f,y){const T=d[it];!function xf(i,o,a,l){for(const d of i)o.mergedAttrs=da(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Kd(o,o.mergedAttrs,!0),null!==a&&mw(l,a,o))}(l,i,o,y);let b=null;null!==o&&(b=Ud(o,d[os]));const O=f.rendererFactory.createRenderer(o,a);let V=16;a.signals?V=4096:a.onPush&&(V=64);const Z=bg(d,F_(a),null,V,d[i.index],i,f,O,null,null,b);return T.firstCreatePass&&H_(T,i,l.length-1),Mc(d,Z),d[i.index]=Z}(BR,Le,Fl,Mm,pn,Z,re);fo=Zl(Yt,Zt),Le&&function q_(i,o,a,l){if(l)No(i,a,["ng-version",Xv.full]);else{const{attrs:d,classes:f}=function ph(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!ri(d))break;d=f}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&No(i,a,d),f&&f.length>0&&gw(i,a,f.join(" "))}}(re,Fl,Le,l),void 0!==a&&function ET(i,o,a){const l=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];l.push(null!=f?Array.from(f):null)}}(fo,this.ngContentSelectors,a),Xn=function AE(i,o,a,l,d,f){const y=si(),T=d[it],b=gi(y,d);Wd(T,d,y,a,null,l);for(let V=0;V<a.length;V++)bi(Co(d,T,y.directiveStart+V,y),d);Zd(T,d,y),b&&bi(b,d);const O=Co(d,T,y.directiveStart+y.componentOffset,y);if(i[kn]=d[kn]=O,null!==f)for(const V of f)V(O,o);return Rg(T,y,i),O}(jR,Fl,Mm,P0,pn,[IT]),EE(Yt,pn,null)}finally{me()}return new vT(this.componentType,Xn,Dc(fo,pn),pn,fo)}}class vT extends Dl{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new _T(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;Ng(f[it],f,d,o,a),this.previousInputValues.set(o,a),So(Yn(this._tNode.index,f))}}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function IT(){const i=si();lu(ke()[it],i)}function SE(i){let o=function bE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(zi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=Z_(i.inputs),y.inputTransforms=Z_(i.inputTransforms),y.declaredInputs=Z_(i.declaredInputs),y.outputs=Z_(i.outputs);const T=d.hostBindings;T&&TT(i,T);const b=d.viewQuery,O=d.contentQueries;if(b&&PE(i,b),O&&wT(i,O),ne(i.inputs,d.inputs),ne(i.declaredInputs,d.declaredInputs),ne(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ne(y.inputTransforms,d.inputTransforms)),zi(d)&&d.data.animation){const V=i.data;V.animation=(V.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const T=f[y];T&&T.ngInherit&&T(i),T===SE&&(a=!1)}}o=Object.getPrototypeOf(o)}!function RE(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=da(d.hostAttrs,a=da(a,d.hostAttrs))}}(l)}function Z_(i){return i===bt?{}:i===ct?[]:i}function PE(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function wT(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function TT(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function NE(i){const o=i.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(a[l]=d[2])}i.inputTransforms=a}function Mf(i){return!!Vi(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Vi(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Fa(i,o,a){return i[o]=a}function Ei(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function kE(i,o,a,l){const d=ke();return Ei(d,to(),o)&&(Ot(),Ro(Tn(),d,i,o,a,l)),kE}function Of(i,o,a,l){return Ei(i,to(),a)?o+pe(a)+l:on}function sy(i,o,a,l,d,f,y,T){const b=ke(),O=Ot(),V=i+Zt,Z=O.firstCreatePass?function zE(i,o,a,l,d,f,y,T,b){const O=o.consts,V=Gd(o,i,4,y||null,To(O,T));Su(o,a,V,To(O,b)),lu(o,V);const Z=V.tView=V_(2,V,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,O,null);return null!==o.queries&&(o.queries.template(o,V),Z.queries=o.queries.embeddedTView(V)),V}(V,O,b,o,a,l,d,f,y):O.data[V];Fs(Z,!1);const re=oy(O,b,Z,i);uu()&&ng(O,b,re,Z),bi(re,b),Mc(b,b[V]=yE(re,b,re,Z)),fi(Z)&&L_(O,b,Z),null!=y&&Pg(b,Z,T)}let oy=function ay(i,o,a,l){return so(!0),o[Bt].createComment("")};function uy(i){return Xs(function Dp(){return Vt.lFrame.contextLView}(),Zt+i)}function qE(i,o,a){const l=ke();return Ei(l,to(),o)&&uo(Ot(),Tn(),l,i,o,l[Bt],a,!1),qE}function ly(i,o,a,l,d){const y=d?"class":"style";Ng(i,a,o.inputs[y],y,l)}function zg(i,o,a,l){const d=ke(),f=Ot(),y=Zt+i,T=d[Bt],b=f.firstCreatePass?function Sb(i,o,a,l,d,f){const y=o.consts,b=Gd(o,i,2,l,To(y,d));return Su(o,a,b,To(y,f)),null!==b.attrs&&Kd(b,b.attrs,!1),null!==b.mergedAttrs&&Kd(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(y,f,d,o,a,l):f.data[y],O=ZE(f,d,b,T,o,i);d[y]=O;const V=fi(b);return Fs(b,!0),mw(T,O,b),32!=(32&b.flags)&&uu()&&ng(f,d,O,b),0===function Zi(){return Vt.lFrame.elementDepthCount}()&&bi(O,d),function Gm(){Vt.lFrame.elementDepthCount++}(),V&&(L_(f,d,b),Rg(f,b,d)),null!==l&&Pg(d,b),zg}function Wg(){let i=si();Yo()?function ou(){Vt.lFrame.isParent=!1}():(i=i.parent,Fs(i,!1));const o=i;(function Ta(i){return Vt.skipHydrationRootTNode===i})(o)&&function il(){Vt.skipHydrationRootTNode=null}(),function Zo(){Vt.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(lu(a,i),pa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Ph(i){return 0!=(8&i.flags)}(o)&&ly(a,o,ke(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xh(i){return 0!=(16&i.flags)}(o)&&ly(a,o,ke(),o.stylesWithoutHost,!1),Wg}function cy(i,o,a,l){return zg(i,o,a,l),Wg(),cy}let ZE=(i,o,a,l,d,f)=>(so(!0),ce(l,d,function gd(){return Vt.lFrame.currentNamespace}()));function OT(){return ke()}function Zg(i){return!!i&&"function"==typeof i.then}function QE(i){return!!i&&"function"==typeof i.subscribe}function Kg(i,o,a,l){const d=ke(),f=Ot(),y=si();return function fy(i,o,a,l,d,f,y){const T=fi(l),O=i.firstCreatePass&&vE(i),V=o[kn],Z=dT(o);let re=!0;if(3&l.type||y){const Ye=gi(l,o),dt=y?y(Ye):Ye,Nt=Z.length,ze=y?pn=>y(Bn(pn[l.index])):l.index;let Yt=null;if(!y&&T&&(Yt=function Nb(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const T=o[Yr],b=d[f+2];return T.length>b?T[b]:null}"string"==typeof y&&(f+=2)}return null}(i,o,d,l.index)),null!==Yt)(Yt.__ngLastListenerFn__||Yt).__ngNextListenerFn__=f,Yt.__ngLastListenerFn__=f,re=!1;else{f=py(l,o,V,f,!1);const pn=a.listen(dt,d,f);Z.push(f,pn),O&&O.push(d,ze,Nt,Nt+1)}}else f=py(l,o,V,f,!1);const de=l.outputs;let Le;if(re&&null!==de&&(Le=de[d])){const Ye=Le.length;if(Ye)for(let dt=0;dt<Ye;dt+=2){const Xn=o[Le[dt]][Le[dt+1]].subscribe(f),fo=Z.length;Z.push(f,Xn),O&&O.push(d,l.index,fo,-(fo+1))}}}(f,d,d[Bt],y,i,o,l),Kg}function kT(i,o,a,l){try{return Pr(6,o,a),!1!==a(l)}catch(d){return fT(i,d),!1}finally{Pr(7,o,a)}}function py(i,o,a,l,d){return function f(y){if(y===Function)return l;So(i.componentOffset>-1?Yn(i.index,o):o);let b=kT(o,a,l,y),O=f.__ngNextListenerFn__;for(;O;)b=kT(o,a,O,y)&&b,O=O.__ngNextListenerFn__;return d&&!1===b&&y.preventDefault(),b}}function LT(i=1){return function at(i){return(Vt.lFrame.contextLView=function $t(i,o){for(;i>0;)o=o[as],i--;return o}(i,Vt.lFrame.contextLView))[kn]}(i)}function Yg(i,o,a){return Qg(i,"",o,"",a),Yg}function Qg(i,o,a,l,d){const f=ke(),y=Of(f,o,a,l);return y!==on&&uo(Ot(),Tn(),f,i,y,f[Bt],d,!1),Qg}function $f(i,o){return i<<17|o<<2}function Vc(i){return i>>17&32767}function rI(i){return 2|i}function Pl(i){return(131068&i)>>2}function iI(i,o){return-131069&i|o<<2}function oI(i){return 1|i}function jT(i,o,a,l,d){const f=i[a+1],y=null===o;let T=l?Vc(f):Pl(f),b=!1;for(;0!==T&&(!1===b||y);){const V=i[T+1];Fb(i[T],o)&&(b=!0,i[T+1]=l?oI(V):rI(V)),T=l?Vc(V):Pl(V)}b&&(i[a+1]=l?rI(f):oI(f))}function Fb(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&ea(i,o)>=0}function dI(i,o){return function oa(i,o,a,l){const d=ke(),f=Ot(),y=function ps(i){const o=Vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function Jg(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[Jt()],y=function Ey(i,o){return o>=i.expandoStartIndex}(i,a);(function QT(i,o){return 0!=(i.flags&(o?8:16))})(f,l)&&null===o&&!y&&(o=!1),o=function pI(i,o,a,l){const d=function pd(i){const o=Vt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=qf(a=Xg(null,i,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=Xg(d,i,o,a,l),null===f){let b=function qT(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Pl(l))return i[Vc(l)]}(i,o,l);void 0!==b&&Array.isArray(b)&&(b=Xg(null,i,o,b[1],l),b=qf(b,o.attrs,l),function Wf(i,o,a,l){i[Vc(a?o.classBindings:o.styleBindings)]=l}(i,o,l,b))}else f=function ZT(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=qf(l,i[f].hostAttrs,a);return qf(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function aI(i,o,a,l,d,f){let y=f?o.classBindings:o.styleBindings,T=Vc(y),b=Pl(y);i[l]=a;let V,O=!1;if(Array.isArray(a)?(V=a[1],(null===V||ea(a,V)>0)&&(O=!0)):V=a,d)if(0!==b){const re=Vc(i[T+1]);i[l+1]=$f(re,T),0!==re&&(i[re+1]=iI(i[re+1],l)),i[T+1]=function nI(i,o){return 131071&i|o<<17}(i[T+1],l)}else i[l+1]=$f(T,0),0!==T&&(i[T+1]=iI(i[T+1],l)),T=l;else i[l+1]=$f(b,0),0===T?T=l:i[b+1]=iI(i[b+1],l),b=l;O&&(i[l+1]=rI(i[l+1])),jT(i,V,l,!0),jT(i,V,l,!1),function BT(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&ea(f,o)>=0&&(a[l+1]=oI(a[l+1]))}(o,V,i,l,f),y=$f(T,b),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,l)}}(f,i,y,l),o!==on&&Ei(d,y,o)&&function KT(i,o,a,l,d,f,y,T){if(!(3&o.type))return;const b=i.data,O=b[T+1],V=function sI(i){return 1==(1&i)}(O)?gI(b,o,a,d,Pl(O),y):void 0;wy(V)||(wy(f)||function kb(i){return 2==(2&i)}(O)&&(f=gI(b,null,a,d,T,y)),function VA(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:sr.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=sr.Important),i.setStyle(a,l,d,f))}}(l,y,Ju(Jt(),a),d,f))}(f,f.data[Jt()],d,d[Bt],i,d[y+1]=function YT(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=le(vc(i)))),i}(o,a),l,y)}(i,o,null,!0),dI}function Xg(i,o,a,l,d){let f=null;const y=a.directiveEnd;let T=a.directiveStylingLast;for(-1===T?T=a.directiveStart:T++;T<y&&(f=o[T],l=qf(l,f.hostAttrs,d),f!==i);)T++;return null!==i&&(a.directiveStylingLast=T),l}function qf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),mi(i,y,!!a||o[++f]))}return void 0===i?null:i}function gI(i,o,a,l,d,f){const y=null===o;let T;for(;d>0;){const b=i[d],O=Array.isArray(b),V=O?b[1]:b,Z=null===V;let re=a[d+1];re===on&&(re=Z?ct:void 0);let de=Z?zh(re,l):V===l?re:void 0;if(O&&!wy(de)&&(de=zh(b,l)),wy(de)&&(T=de,y))return T;const Le=i[d+1];d=y?Vc(Le):Pl(Le)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(T=zh(b,l))}return T}function wy(i){return void 0!==i}function JT(i,o=""){const a=ke(),l=Ot(),d=i+Zt,f=l.firstCreatePass?Gd(l,d,1,o,null):l.data[d],y=XT(l,a,f,o,i);a[d]=y,uu()&&ng(l,a,y,f),Fs(f,!1)}let XT=(i,o,a,l,d)=>(so(!0),function M(i,o){return i.createText(o)}(o[Bt],l));function mI(i){return em("",i,""),mI}function em(i,o,a){const l=ke(),d=Of(l,i,o,a);return d!==on&&function mr(i,o,a){const l=Ju(o,i);!function U(i,o,a){i.setValue(o,a)}(i[Bt],l,a)}(l,Jt(),d),em}const Jd=void 0;var rm=["en",[["a","p"],["AM","PM"],Jd],[["AM","PM"],Jd,Jd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jd,"{1} 'at' {0}",Jd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cC(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Kf={};function Ba(i){const o=function dC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=im(o);if(a)return a;const l=o.split("-")[0];if(a=im(l),a)return a;if("en"===l)return rm;throw new Ie(701,!1)}function jc(i){return Ba(i)[Yf.PluralCase]}function im(i){return i in Kf||(Kf[i]=wn.ng&&wn.ng.common&&wn.ng.common.locales&&wn.ng.common.locales[i]),Kf[i]}var Yf=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Yf||{});const Qf="en-US";let pC=Qf;function RC(i,o,a,l,d){if(i=Be(i),Array.isArray(i))for(let f=0;f<i.length;f++)RC(i[f],o,a,l,d);else{const f=Ot(),y=ke(),T=si();let b=Tc(i)?i:Be(i.provide);const O=pf(i),V=1048575&T.providerIndexes,Z=T.directiveStart,re=T.providerIndexes>>20;if(Tc(i)||!i.multi){const de=new ec(O,d,bu),Le=Ou(b,o,d?V:V+re,Z);-1===Le?(kh(pu(T,y),f,b),FI(f,i,o.length),o.push(b),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(de),y.push(de)):(a[Le]=de,y[Le]=de)}else{const de=Ou(b,o,V+re,Z),Le=Ou(b,o,V,V+re),dt=Le>=0&&a[Le];if(d&&!dt||!d&&!(de>=0&&a[de])){kh(pu(T,y),f,b);const Nt=function yS(i,o,a,l,d){const f=new ec(i,a,bu);return f.multi=[],f.index=o,f.componentProviders=0,VI(f,d,l&&!a),f}(d?_S:mS,a.length,d,l,O);!d&&dt&&(a[Le].providerFactory=Nt),FI(f,i,o.length,0),o.push(b),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Nt),y.push(Nt)}else FI(f,i,de>-1?de:Le,VI(a[d?Le:de],O,!d&&l));!d&&l&&dt&&a[Le].componentProviders++}}}function FI(i,o,a,l){const d=Tc(o),f=function Rw(i){return!!i.useClass}(o);if(d||f){const b=(f?Be(o.useClass):o).prototype.ngOnDestroy;if(b){const O=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const V=O.indexOf(a);-1===V?O.push(a,[l,b]):O[V+1].push(l,b)}else O.push(a,b)}}}function VI(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ou(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function mS(i,o,a,l){return UI(this.multi,[])}function _S(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,T=Co(a,a[it],this.providerFactory.index,l);f=T.slice(0,y),UI(d,f);for(let b=y;b<T.length;b++)f.push(T[b])}else f=[],UI(d,f);return f}function UI(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function PC(i,o=[]){return a=>{a.providersResolver=(l,d)=>function gS(i,o,a){const l=Ot();if(l.firstCreatePass){const d=zi(i);RC(a,l.data,l.blueprint,d,!0),RC(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class ih{}class xC{}function vx(i,o){return new Oy(i,o??null,[])}class Oy extends ih{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DE(this);const d=Vr(o);this._bootstrapComponents=Al(d.bootstrap),this._r3Injector=rE(o,a,[{provide:ih,useValue:this},{provide:vf,useValue:this.componentFactoryResolver},...l],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class BI extends xC{constructor(o){super(),this.moduleType=o}create(o){return new Oy(this.moduleType,o,[])}}class vS extends ih{constructor(o){super(),this.componentFactoryResolver=new DE(this),this.instance=null;const a=new vi([...o.providers,{provide:ih,useValue:this},{provide:vf,useValue:this.componentFactoryResolver}],o.parent||ff(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function ES(i,o,a=null){return new vS({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Ix=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=$v(0,a.type),d=l.length>0?ES([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ut({token:i,providedIn:"environment",factory:()=>new i(Et(Us))})}return i})();function jI(i){i.getStandaloneInjector=o=>o.get(Ix).getOrCreateStandaloneInjector(i)}function Ts(i,o){const a=i[o];return a===on?void 0:a}function LC(i,o,a,l,d,f,y){const T=o+a;return function bl(i,o,a,l){const d=Ei(i,o,a);return Ei(i,o+1,l)||d}(i,T,d,f)?Fa(i,T+2,y?l.call(y,d,f):l(d,f)):Ts(i,T+2)}function BC(i,o){const a=Ot();let l;const d=i+Zt;a.firstCreatePass?(l=function Ax(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks??=[]).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=Qs(l.type)),T=Dn(bu);try{const b=Nh(!1),O=f();return Nh(b),function WE(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,ke(),d,O),O}finally{Dn(T)}}function pm(i,o,a){const l=i+Zt,d=ke(),f=Xs(d,l);return zc(d,l)?function PS(i,o,a,l,d,f){const y=o+a;return Ei(i,y,d)?Fa(i,y+1,f?l.call(f,d):l(d)):Ts(i,y+1)}(d,jr(),o,f.transform,a,f):f.transform(a)}function tp(i,o,a,l){const d=i+Zt,f=ke(),y=Xs(f,d);return zc(f,d)?LC(f,jr(),o,y.transform,a,l,y):y.transform(a,l)}function zc(i,o){return i[it].data[o].pure}function MS(){return this._results[Symbol.iterator]()}class Wc{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new La)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wc.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=MS)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function gs(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Hh(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Fy(i,o,a,l=!0){const d=o[it];if(function ae(i,o,a,l){const d=tr+l,f=a.length;l>0&&(a[d-1][Kr]=o),l<f-tr?(o[Kr]=a[d],Op(a,tr+l,o)):(a.push(o),o[Kr]=null),o[fn]=a;const y=o[Eo];null!==y&&a!==y&&function _s(i,o){const a=i[Ys];o[dr]!==o[fn][fn][dr]&&(i[ks]=!0),null===a?i[Ys]=[o]:a.push(o)}(y,o);const T=o[Ms];null!==T&&T.insertView(i),o[jt]|=128}(d,o,i,a),l){const f=Pv(a,i),y=o[Bt],T=eg(y,i[ds]);null!==T&&function ot(i,o,a,l,d,f){l[$n]=d,l[Gn]=o,ig(i,l,a,1,d,f)}(d,i[Gn],y,o,T,f)}}let mm=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=xx}return i})();const sh=mm,HC=class extends sh{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,l){const d=function jC(i,o,a,l){const d=o.tView,T=bg(i,d,a,4096&i[jt]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);T[Eo]=i[o.index];const O=i[Ms];return null!==O&&(T[Ms]=O.createEmbeddedView(d)),EE(d,T,a),T}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:l});return new Lg(d)}};function xx(){return Or(si(),ke())}function Or(i,o){return 4&i.type?new HC(o,i,Dc(i,o)):null}let kl=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=np}return i})();function np(){return ym(si(),ke())}const _m=kl,zC=class extends _m{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Dc(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){const o=ic(this._hostTNode,this._hostLView);if(ll(o)){const a=Jo(o,this._hostLView),l=cl(o);return new ki(a[it].data[l+8],a)}return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=WC(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const T=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(T,d,false),T}createComponent(o,a,l,d,f){const y=o&&!function cc(i){return"function"==typeof i}(o);let T;if(y)T=a;else{const Ye=a||{};T=Ye.index,l=Ye.injector,d=Ye.projectableNodes,f=Ye.environmentInjector||Ye.ngModuleRef}const b=y?o:new Fg(an(o)),O=l||this.parentInjector;if(!f&&null==b.ngModule){const dt=(y?O:this.parentInjector).get(Us,null);dt&&(f=dt)}an(b.componentType??{});const de=b.create(O,d,null,f);return this.insertImpl(de.hostView,T,false),de}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,l){const d=o._lView;if(function Xu(i){return Ln(i[fn])}(d)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const O=d[fn],V=new zC(O,O[Gn],O[fn]);V.detach(V.indexOf(o))}}const y=this._adjustIndex(a),T=this._lContainer;return Fy(T,d,y,!l),o.attachToViewContainerRef(),Op(ZI(T),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=WC(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Sd(this._lContainer,a);l&&($h(ZI(this._lContainer),a),Ra(l[it],l))}detach(o){const a=this._adjustIndex(o,-1),l=Sd(this._lContainer,a);return l&&null!=$h(ZI(this._lContainer),a)?new Lg(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function WC(i){return i[8]}function ZI(i){return i[8]||(i[8]=[])}function ym(i,o){let a;const l=o[i.index];return Ln(l)?a=l:(a=yE(l,o,null,i),o[i.index]=a,Mc(o,a)),qC(a,o,i,l),new zC(a,i,o)}let qC=function KI(i,o,a,l){if(i[ds])return;let d;d=8&a.type?Bn(l):function US(i,o){const a=i[Bt],l=a.createComment(""),d=gi(o,i);return xa(a,eg(a,d),l,function vs(i,o){return i.nextSibling(o)}(a,d),!1),l}(o,a),i[ds]=d};class QI{constructor(o){this.queryList=o,this.matches=null}clone(){return new QI(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Vy(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==zy(o,a).matches&&this.queries[a].setDirty()}}class JI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class XI{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new XI(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class e0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new e0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,KC(a,f)),this.matchTNodeWithReadOption(o,a,fl(a,o,f,!1,!1))}else l===mm?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,fl(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===yg||d===kl||d===mm&&4&a.type)this.addMatch(a.index,-2);else{const f=fl(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function KC(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function BS(i,o,a,l){return-1===a?function t0(i,o){return 11&i.type?Dc(i,o):4&i.type?Or(i,o):null}(o,i):-2===a?function n0(i,o,a){return a===yg?Dc(o,i):a===mm?Or(o,i):a===kl?ym(o,i):void 0}(i,o,l):Co(i,i[it],a,o)}function Uy(i,o,a,l){const d=o[Ms].queries[l];if(null===d.matches){const f=i.data,y=a.matches,T=[];for(let b=0;b<y.length;b+=2){const O=y[b];T.push(O<0?null:BS(o,f[O],y[b+1],a.metadata.read))}d.matches=T}return d.matches}function vm(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=Uy(i,o,d,a);for(let T=0;T<f.length;T+=2){const b=f[T];if(b>0)l.push(y[T/2]);else{const O=f[T+1],V=o[-b];for(let Z=tr;Z<V.length;Z++){const re=V[Z];re[Eo]===re[fn]&&vm(re[it],re,O,l)}if(null!==V[Ys]){const Z=V[Ys];for(let re=0;re<Z.length;re++){const de=Z[re];vm(de[it],de,O,l)}}}}}return l}function By(i){const o=ke(),a=Ot(),l=Ah();w(l+1);const d=zy(a,l);if(i.dirty&&function wp(i){return 4==(4&i[jt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?vm(a,o,l,[]):Uy(a,o,d,l);i.reset(f,YA),i.notifyOnChanges()}return!0}return!1}function jy(i,o,a,l){const d=Ot();if(d.firstCreatePass){const f=si();(function $y(i,o,a){null===i.queries&&(i.queries=new XI),i.queries.track(new e0(o,a))})(d,new JI(o,a,l),f.index),function Gy(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function YC(i,o,a){const l=new Wc(4==(4&a));(function Sf(i,o,a,l){const d=dT(o);d.push(a),i.firstCreatePass&&vE(i).push(l,d.length-1)})(i,o,l,l.destroy),null===o[Ms]&&(o[Ms]=new Vy),o[Ms].queries.push(new QI(l))}(d,ke(),a)}function Hy(){return function Em(i,o){return i[Ms].queries[o].queryList}(ke(),Ah())}function zy(i,o){return i.queries.getByIndex(o)}function rp(i,o){return Or(i,o)}function Im(i){return!!Vr(i)}const dD=new Tt("Application Initializer");let f0=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=Mt(dD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(Zg(f))a.push(f);else if(QE(f)){const y=new Promise((T,b)=>{f.subscribe({complete:T,error:b})});a.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Yy=new Tt("LocaleId",{providedIn:"root",factory:()=>Mt(Yy,Pt.Optional|Pt.SkipSelf)||function KS(){return typeof $localize<"u"&&$localize.locale||Qf}()}),YS=new Tt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let fD=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ue.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class QS{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let JS=(()=>{class i{compileModuleSync(a){return new BI(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Al(Vr(a).declarations).reduce((y,T)=>{const b=an(T);return b&&y.push(new Fg(b)),y},[]);return new QS(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ID=new Tt(""),wD=new Tt("");let lp,dR=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lp||(function hR(i){lp=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ri.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}static#e=this.\u0275fac=function(l){return new(l||i)(Et(Ri),Et(TD),Et(wD))};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac})}return i})(),TD=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return lp?.findTestabilityInTree(this,a,l)??null}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Ll=null;const Jy=new Tt("AllowMultipleToken"),Dm=new Tt("PlatformDestroyListeners"),ja=new Tt("appBootstrapListener");class Xy{constructor(o,a){this.name=o,this.token=a}}function AD(i,o,a=[]){const l=`Platform: ${o}`,d=new Tt(l);return(f=[])=>{let y=y0();if(!y||y.injector.get(Jy,!1)){const T=[...a,...f,{provide:d,useValue:!0}];i?i(T):function pR(i){if(Ll&&!Ll.get(Jy,!1))throw new Ie(400,!1);(function _0(){!function Ih(i){ad=i}(()=>{throw new Ie(600,!1)})})(),Ll=i;const o=i.get(co);(function DD(i){i.get(Mw,null)?.forEach(a=>a())})(i)}(function bD(i=[],o){return ka.create({name:o,providers:[{provide:Na,useValue:"platform"},{provide:Dm,useValue:new Set([()=>Ll=null])},...i]})}(T,l))}return function mR(i){const o=y0();if(!o)throw new Ie(401,!1);return o}()}}function y0(){return Ll?.get(co)??null}let co=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function v0(i="zone.js",o){return"noop"===i?new oE:"zone.js"===i?new Ri(o):i}(l?.ngZone,function ev(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function Ex(i,o,a){return new Oy(i,o,a)}(a.moduleType,this.injector,function MD(i){return[{provide:Ri,useFactory:i},{provide:df,multi:!0,useFactory:()=>{const o=Mt(Lu,{optional:!0});return()=>o.initialize()}},{provide:PD,useFactory:_R},{provide:Yw,useFactory:aE}]}(()=>d)),y=f.injector.get(Du,null);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:b=>{y.handleError(b)}});f.onDestroy(()=>{bm(this._modules,f),T.unsubscribe()})}),function E0(i,o,a){try{const l=a();return Zg(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(y,d,()=>{const T=f.injector.get(f0);return T.runInitializers(),T.donePromise.then(()=>(function gC(i){_t(i,"Expected localeId to be defined"),"string"==typeof i&&(pC=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Yy,Qf)||Qf),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,l=[]){const d=SD({},l);return function CD(i,o,a){const l=new BI(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(uh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ie(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Dm,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||i)(Et(ka))};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function SD(i,o){return Array.isArray(o)?o.reduce(SD,i):{...i,...o}}let uh=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Mt(PD),this.zoneIsStable=Mt(Yw),this.componentTypes=[],this.components=[],this.isStable=Mt(fD).hasPendingTasks.pipe((0,He.w)(a=>a?(0,oe.of)(!1):this.zoneIsStable),(0,De.x)(),(0,_e.B)()),this._injector=Mt(Us)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Kv;if(!this._injector.get(f0).done)throw!d&&Rs(a),new Ie(405,!1);let y;y=d?a:this._injector.get(vf).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const T=function fR(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ih),O=y.create(ka.NULL,[],l||y.selector,T),V=O.location.nativeElement,Z=O.injector.get(ID,null);return Z?.registerApplication(V),O.onDestroy(()=>{this.detachView(O.hostView),bm(this.components,O),Z?.unregisterApplication(V)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;bm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(ja,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>bm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function bm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const PD=new Tt("",{providedIn:"root",factory:()=>Mt(Du).handleError.bind(void 0)});function _R(){const i=Mt(Ri),o=Mt(Du);return a=>i.runOutsideAngular(()=>o.handleError(a))}let Lu=(()=>{class i{constructor(){this.zone=Mt(Ri),this.applicationRef=Mt(uh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||i)};static#t=this.\u0275prov=Ut({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ND(){return!1}let Sm=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=vR}return i})();function vR(i){return function ER(i,o,a){if(xi(i)&&!a){const l=Yn(i.index,o);return new Lg(l,l)}return 47&i.type?new Lg(o[dr],o):null}(si(),ke(),16==(16&i))}class T0{constructor(){}supports(o){return Mf(o)}create(o){return new iv(o)}}const VD=(i,o)=>o;class iv{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||VD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<D0(l,d,f)?a:l,T=D0(y,d,f),b=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const O=T-d,V=b-d;if(O!=V){for(let re=0;re<O;re++){const de=re<f.length?f[re]:f[re]=0,Le=de+re;V<=Le&&Le<O&&(f[re]=de+1)}f[y.previousIndex]=V-O}}T!==b&&o(y,T,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Mf(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let T=0;T<this.length;T++)f=o[T],y=this._trackByFn(T,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,T)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,T),l=!0),a=a._next}else d=0,function Eb(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,T=>{y=this._trackByFn(d,T),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,T,y,d)),Object.is(a.item,T)||this._addIdentityChange(a,T)):(a=this._mismatch(a,T,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new C0(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new UD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new UD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class C0{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DR{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class UD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new DR,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function D0(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class BD{constructor(){}supports(o){return o instanceof Map||Vi(o)}create(){return new AR}}class AR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Vi(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new Gs(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class Gs{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sv(){return new A0([new T0])}let A0=(()=>{class i{static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:sv});constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||sv()),deps:[[i,new wd,new ta]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ie(901,!1)}}return i})();function b0(){return new S0([new BD])}let S0=(()=>{class i{static#e=this.\u0275prov=Ut({token:i,providedIn:"root",factory:b0});constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||b0()),deps:[[i,new wd,new ta]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ie(901,!1)}}return i})();const SR=AD(null,"core",[]);let RR=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(l){return new(l||i)(Et(uh))};static#t=this.\u0275mod=Vo({type:i});static#n=this.\u0275inj=Kn({})}return i})();function eA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function UR(i){const o=an(i);if(!o)return null;const a=new Fg(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},6593:(yt,be,B)=>{B.d(be,{Dx:()=>On,b2:()=>In,q6:()=>Ut});var D=B(5879),g=B(6814);class K extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ie extends K{static makeCurrent(){(0,g.HT)(new ie)}onAndCancel(z,H,W){return z.addEventListener(H,W),()=>{z.removeEventListener(H,W)}}dispatchEvent(z,H){z.dispatchEvent(H)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,H){return(H=H||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,H){return"window"===H?window:"document"===H?z:"body"===H?z.body:null}getBaseHref(z){const H=function oe(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==H?null:function He($){_e=_e||document.createElement("a"),_e.setAttribute("href",$);const z=_e.pathname;return"/"===z.charAt(0)?z:`/${z}`}(H)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,g.Mx)(document.cookie,z)}}let _e,ue=null,X=(()=>{class ${build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(W){return new(W||$)};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const ne=new D.OlP("EventManagerPlugins");let le=(()=>{class ${constructor(H,W){this._zone=W,this._eventNameToPlugin=new Map,H.forEach(se=>{se.manager=this}),this._plugins=H.slice().reverse()}addEventListener(H,W,se){return this._findPluginFor(W).addEventListener(H,W,se)}getZone(){return this._zone}_findPluginFor(H){let W=this._eventNameToPlugin.get(H);if(W)return W;if(W=this._plugins.find(je=>je.supports(H)),!W)throw new D.vHH(5101,!1);return this._eventNameToPlugin.set(H,W),W}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(ne),D.LFG(D.R0b))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();class Pe{constructor(z){this._doc=z}}const $e="ng-app-id";let Je=(()=>{class ${constructor(H,W,se,je={}){this.doc=H,this.appId=W,this.nonce=se,this.platformId=je,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,g.PM)(je),this.resetHostNodes()}addStyles(H){for(const W of H)1===this.changeUsageCount(W,1)&&this.onStyleAdded(W)}removeStyles(H){for(const W of H)this.changeUsageCount(W,-1)<=0&&this.onStyleRemoved(W)}ngOnDestroy(){const H=this.styleNodesInDOM;H&&(H.forEach(W=>W.remove()),H.clear());for(const W of this.getAllStyles())this.onStyleRemoved(W);this.resetHostNodes()}addHost(H){this.hostNodes.add(H);for(const W of this.getAllStyles())this.addStyleToHost(H,W)}removeHost(H){this.hostNodes.delete(H)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(H){for(const W of this.hostNodes)this.addStyleToHost(W,H)}onStyleRemoved(H){const W=this.styleRef;W.get(H)?.elements?.forEach(se=>se.remove()),W.delete(H)}collectServerRenderedStyles(){const H=this.doc.head?.querySelectorAll(`style[${$e}="${this.appId}"]`);if(H?.length){const W=new Map;return H.forEach(se=>{null!=se.textContent&&W.set(se.textContent,se)}),W}return null}changeUsageCount(H,W){const se=this.styleRef;if(se.has(H)){const je=se.get(H);return je.usage+=W,je.usage}return se.set(H,{usage:W,elements:[]}),W}getStyleElement(H,W){const se=this.styleNodesInDOM,je=se?.get(W);if(je?.parentNode===H)return se.delete(W),je.removeAttribute($e),je;{const tt=this.doc.createElement("style");return this.nonce&&tt.setAttribute("nonce",this.nonce),tt.textContent=W,this.platformIsServer&&tt.setAttribute($e,this.appId),tt}}addStyleToHost(H,W){const se=this.getStyleElement(H,W);H.appendChild(se);const je=this.styleRef,tt=je.get(W)?.elements;tt?tt.push(se):je.set(W,{elements:[se],usage:1})}resetHostNodes(){const H=this.hostNodes;H.clear(),H.add(this.doc.head)}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(g.K0),D.LFG(D.AFp),D.LFG(D.Ojb,8),D.LFG(D.Lbi))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const Be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,Fe=new D.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ke($,z){return z.map(H=>H.replace(rt,$))}let Xe=(()=>{class ${constructor(H,W,se,je,tt,Et,xt,Mt=null){this.eventManager=H,this.sharedStylesHost=W,this.appId=se,this.removeStylesOnCompDestroy=je,this.doc=tt,this.platformId=Et,this.ngZone=xt,this.nonce=Mt,this.rendererByCompId=new Map,this.platformIsServer=(0,g.PM)(Et),this.defaultRenderer=new Te(H,tt,xt,this.platformIsServer)}createRenderer(H,W){if(!H||!W)return this.defaultRenderer;this.platformIsServer&&W.encapsulation===D.ifc.ShadowDom&&(W={...W,encapsulation:D.ifc.Emulated});const se=this.getOrCreateRenderer(H,W);return se instanceof Mn?se.applyToHost(H):se instanceof ur&&se.applyStyles(),se}getOrCreateRenderer(H,W){const se=this.rendererByCompId;let je=se.get(W.id);if(!je){const tt=this.doc,Et=this.ngZone,xt=this.eventManager,Mt=this.sharedStylesHost,Ht=this.removeStylesOnCompDestroy,Vn=this.platformIsServer;switch(W.encapsulation){case D.ifc.Emulated:je=new Mn(xt,Mt,W,this.appId,Ht,tt,Et,Vn);break;case D.ifc.ShadowDom:return new ln(xt,Mt,H,W,tt,Et,this.nonce,Vn);default:je=new ur(xt,Mt,W,Ht,tt,Et,Vn)}se.set(W.id,je)}return je}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(le),D.LFG(Je),D.LFG(D.AFp),D.LFG(Fe),D.LFG(g.K0),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(D.Ojb))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();class Te{constructor(z,H,W,se){this.eventManager=z,this.doc=H,this.ngZone=W,this.platformIsServer=se,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,H){return H?this.doc.createElementNS(Be[H]||H,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,H){(qn(z)?z.content:z).appendChild(H)}insertBefore(z,H,W){z&&(qn(z)?z.content:z).insertBefore(H,W)}removeChild(z,H){z&&z.removeChild(H)}selectRootElement(z,H){let W="string"==typeof z?this.doc.querySelector(z):z;if(!W)throw new D.vHH(-5104,!1);return H||(W.textContent=""),W}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,H,W,se){if(se){H=se+":"+H;const je=Be[se];je?z.setAttributeNS(je,H,W):z.setAttribute(H,W)}else z.setAttribute(H,W)}removeAttribute(z,H,W){if(W){const se=Be[W];se?z.removeAttributeNS(se,H):z.removeAttribute(`${W}:${H}`)}else z.removeAttribute(H)}addClass(z,H){z.classList.add(H)}removeClass(z,H){z.classList.remove(H)}setStyle(z,H,W,se){se&(D.JOm.DashCase|D.JOm.Important)?z.style.setProperty(H,W,se&D.JOm.Important?"important":""):z.style[H]=W}removeStyle(z,H,W){W&D.JOm.DashCase?z.style.removeProperty(H):z.style[H]=""}setProperty(z,H,W){z[H]=W}setValue(z,H){z.nodeValue=H}listen(z,H,W){if("string"==typeof z&&!(z=(0,g.q)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${H}`);return this.eventManager.addEventListener(z,H,this.decoratePreventDefault(W))}decoratePreventDefault(z){return H=>{if("__ngUnwrap__"===H)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(H)):z(H))&&H.preventDefault()}}}function qn($){return"TEMPLATE"===$.tagName&&void 0!==$.content}class ln extends Te{constructor(z,H,W,se,je,tt,Et,xt){super(z,je,tt,xt),this.sharedStylesHost=H,this.hostEl=W,this.shadowRoot=W.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Mt=Ke(se.id,se.styles);for(const Ht of Mt){const Vn=document.createElement("style");Et&&Vn.setAttribute("nonce",Et),Vn.textContent=Ht,this.shadowRoot.appendChild(Vn)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,H){return super.appendChild(this.nodeOrShadowRoot(z),H)}insertBefore(z,H,W){return super.insertBefore(this.nodeOrShadowRoot(z),H,W)}removeChild(z,H){return super.removeChild(this.nodeOrShadowRoot(z),H)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ur extends Te{constructor(z,H,W,se,je,tt,Et,xt){super(z,je,tt,Et),this.sharedStylesHost=H,this.removeStylesOnCompDestroy=se,this.styles=xt?Ke(xt,W.styles):W.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Mn extends ur{constructor(z,H,W,se,je,tt,Et,xt){const Mt=se+"-"+W.id;super(z,H,W,je,tt,Et,xt,Mt),this.contentAttr=function pe($){return"_ngcontent-%COMP%".replace(rt,$)}(Mt),this.hostAttr=function We($){return"_nghost-%COMP%".replace(rt,$)}(Mt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,H){const W=super.createElement(z,H);return super.setAttribute(W,this.contentAttr,""),W}}let bs=(()=>{class $ extends Pe{constructor(H){super(H)}supports(H){return!0}addEventListener(H,W,se){return H.addEventListener(W,se,!1),()=>this.removeEventListener(H,W,se)}removeEventListener(H,W,se){return H.removeEventListener(W,se)}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(g.K0))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const Sr=["alt","control","meta","shift"],ge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ve={alt:$=>$.altKey,control:$=>$.ctrlKey,meta:$=>$.metaKey,shift:$=>$.shiftKey};let xe=(()=>{class $ extends Pe{constructor(H){super(H)}supports(H){return null!=$.parseEventName(H)}addEventListener(H,W,se){const je=$.parseEventName(W),tt=$.eventCallback(je.fullKey,se,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(H,je.domEventName,tt))}static parseEventName(H){const W=H.toLowerCase().split("."),se=W.shift();if(0===W.length||"keydown"!==se&&"keyup"!==se)return null;const je=$._normalizeKey(W.pop());let tt="",Et=W.indexOf("code");if(Et>-1&&(W.splice(Et,1),tt="code."),Sr.forEach(Mt=>{const Ht=W.indexOf(Mt);Ht>-1&&(W.splice(Ht,1),tt+=Mt+".")}),tt+=je,0!=W.length||0===je.length)return null;const xt={};return xt.domEventName=se,xt.fullKey=tt,xt}static matchEventFullKeyCode(H,W){let se=ge[H.key]||H.key,je="";return W.indexOf("code.")>-1&&(se=H.code,je="code."),!(null==se||!se)&&(se=se.toLowerCase()," "===se?se="space":"."===se&&(se="dot"),Sr.forEach(tt=>{tt!==se&&(0,ve[tt])(H)&&(je+=tt+".")}),je+=se,je===W)}static eventCallback(H,W,se){return je=>{$.matchEventFullKeyCode(je,H)&&se.runGuarded(()=>W(je))}}static _normalizeKey(H){return"esc"===H?"escape":H}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(g.K0))};static#t=this.\u0275prov=D.Yz7({token:$,factory:$.\u0275fac})}return $})();const Ut=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:g.bD},{provide:D.g9A,useValue:function et(){ie.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function At(){return(0,D.RDi)(document),document},deps:[]}]),Nn=new D.OlP(""),Kn=[{provide:D.rWj,useClass:class De{addToWindow(z){D.dqk.getAngularTestability=(W,se=!0)=>{const je=z.findTestabilityInTree(W,se);if(null==je)throw new D.vHH(5103,!1);return je},D.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(W=>{const se=D.dqk.getAllAngularTestabilities();let je=se.length,tt=!1;const Et=function(xt){tt=tt||xt,je--,0==je&&W(tt)};se.forEach(xt=>{xt.whenStable(Et)})})}findTestabilityInTree(z,H,W){return null==H?null:z.getTestability(H)??(W?(0,g.q)().isShadowRoot(H)?this.findTestabilityInTree(z,H.host,!0):this.findTestabilityInTree(z,H.parentElement,!0):null)}},deps:[]},{provide:D.lri,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b,D.eoX,D.rWj]}],Rn=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function Zn(){return new D.qLn},deps:[]},{provide:ne,useClass:bs,multi:!0,deps:[g.K0,D.R0b,D.Lbi]},{provide:ne,useClass:xe,multi:!0,deps:[g.K0]},Xe,Je,le,{provide:D.FYo,useExisting:Xe},{provide:g.JF,useClass:X,deps:[]},[]];let In=(()=>{class ${constructor(H){}static withServerTransition(H){return{ngModule:$,providers:[{provide:D.AFp,useValue:H.appId}]}}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(Nn,12))};static#t=this.\u0275mod=D.oAB({type:$});static#n=this.\u0275inj=D.cJS({providers:[...Rn,...Kn],imports:[g.ez,D.hGG]})}return $})(),On=(()=>{class ${constructor(H){this._doc=H}getTitle(){return this._doc.title}setTitle(H){this._doc.title=H||""}static#e=this.\u0275fac=function(W){return new(W||$)(D.LFG(g.K0))};static#t=this.\u0275prov=D.Yz7({token:$,factory:function(W){let se=null;return se=W?new W:function vr(){return new On((0,D.LFG)(g.K0))}(),se},providedIn:"root"})}return $})();typeof window<"u"&&window},9692:(yt,be,B)=>{B.d(be,{gz:()=>fn,F0:()=>Yn,Od:()=>To,Bz:()=>au,lC:()=>qs});var D=B(5879),g=B(5592),K=B(4674),ue=B(2459),oe=B(2096),_e=B(5619),He=B(7453),De=B(2737),X=B(7400),ne=B(9940),le=B(2714),Pe=B(8251),$e=B(7103);function Je(...w){const S=(0,ne.yG)(w),I=(0,ne.jO)(w),{args:R,keys:N}=(0,He.D)(w);if(0===R.length)return(0,ue.D)([],S);const j=new g.y(function Be(w,S,I=De.y){return R=>{rt(S,()=>{const{length:N}=w,j=new Array(N);let Y=N,ye=N;for(let me=0;me<N;me++)rt(S,()=>{const at=(0,ue.D)(w[me],S);let $t=!1;at.subscribe((0,Pe.x)(R,Jt=>{j[me]=Jt,$t||($t=!0,ye--),ye||R.next(I(j.slice()))},()=>{--Y||R.complete()}))},R)},R)}}(R,S,N?Y=>(0,le.n)(N,Y):De.y));return I?j.pipe((0,X.Z)(I)):j}function rt(w,S,I){w?(0,$e.f)(I,w,S):S()}var lt=B(6973),en=B(5211),un=B(4829);function Ie(w){return new g.y(S=>{(0,un.Xf)(w()).subscribe(S)})}var Fe=B(8407);function pe(w,S){const I=(0,K.m)(w)?w:()=>w,R=N=>N.error(I());return new g.y(S?N=>S.schedule(R,0,N):R)}var We=B(6232),Ke=B(7394),Xe=B(9360);function Te(){return(0,Xe.e)((w,S)=>{let I=null;w._refCount++;const R=(0,Pe.x)(S,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(I=null);const N=w._connection,j=I;I=null,N&&(!j||N===j)&&N.unsubscribe(),S.unsubscribe()});w.subscribe(R),R.closed||(I=w.connect())})}class Lt extends g.y{constructor(S,I){super(),this.source=S,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Xe.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new Ke.w0;const I=this.getSubject();S.add(this.source.subscribe((0,Pe.x)(I,void 0,()=>{this._teardown(),I.complete()},R=>{this._teardown(),I.error(R)},()=>this._teardown()))),S.closed&&(this._connection=null,S=Ke.w0.EMPTY)}return S}refCount(){return Te()(this)}}var zt=B(8645),qn=B(6814),ln=B(7398),ur=B(4664),Mn=B(8180),bs=B(7921),Sr=B(2181),ge=B(1631),ve=B(1374);function xe(w,S){return(0,K.m)(S)?(0,ge.z)(w,S,1):(0,ge.z)(w,1)}var Ce=B(9397);function Oe(w){return(0,Xe.e)((S,I)=>{let j,R=null,N=!1;R=S.subscribe((0,Pe.x)(I,void 0,void 0,Y=>{j=(0,un.Xf)(w(Y,Oe(w)(S))),R?(R.unsubscribe(),R=null,j.subscribe(I)):N=!0})),N&&(R.unsubscribe(),R=null,j.subscribe(I))})}var Ue=B(6699),_t=B(3572);function et(w){return w<=0?()=>We.E:(0,Xe.e)((S,I)=>{let R=[];S.subscribe((0,Pe.x)(I,N=>{R.push(N),w<R.length&&R.shift()},()=>{for(const N of R)I.next(N);I.complete()},void 0,()=>{R=null}))})}var Zn=B(3026);function Ut(w){return(0,Xe.e)((S,I)=>{try{S.subscribe(I)}finally{I.add(w)}})}var Nn=B(2420),Rn=B(7537),In=B(6593);const wt="primary",yr=Symbol("RouteTitle");class ns{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I[0]:I}return null}getAll(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function vr(w){return new ns(w)}function On(w,S,I){const R=I.path.split("/");if(R.length>w.length||"full"===I.pathMatch&&(S.hasChildren()||R.length<w.length))return null;const N={};for(let j=0;j<R.length;j++){const Y=R[j],ye=w[j];if(Y.startsWith(":"))N[Y.substring(1)]=ye;else if(Y!==ye.path)return null}return{consumed:w.slice(0,R.length),posParams:N}}function Hn(w,S){const I=w?Object.keys(w):void 0,R=S?Object.keys(S):void 0;if(!I||!R||I.length!=R.length)return!1;let N;for(let j=0;j<I.length;j++)if(N=I[j],!Pt(w[N],S[N]))return!1;return!0}function Pt(w,S){if(Array.isArray(w)&&Array.isArray(S)){if(w.length!==S.length)return!1;const I=[...w].sort(),R=[...S].sort();return I.every((N,j)=>R[j]===N)}return w===S}function tn(w){return w.length>0?w[w.length-1]:null}function St(w){return function ie(w){return!!w&&(w instanceof g.y||(0,K.m)(w.lift)&&(0,K.m)(w.subscribe))}(w)?w:(0,D.QGY)(w)?(0,ue.D)(Promise.resolve(w)):(0,oe.of)(w)}const Dn={exact:function er(w,S,I){if(!Ii(w.segments,S.segments)||!Wt(w.segments,S.segments,I)||w.numberOfChildren!==S.numberOfChildren)return!1;for(const R in S.children)if(!w.children[R]||!er(w.children[R],S.children[R],I))return!1;return!0},subset:Tt},zr={exact:function wn(w,S){return Hn(w,S)},subset:function mo(w,S){return Object.keys(S).length<=Object.keys(w).length&&Object.keys(S).every(I=>Pt(w[I],S[I]))},ignored:()=>!0};function fr(w,S,I){return Dn[I.paths](w.root,S.root,I.matrixParams)&&zr[I.queryParams](w.queryParams,S.queryParams)&&!("exact"===I.fragment&&w.fragment!==S.fragment)}function Tt(w,S,I){return rs(w,S,S.segments,I)}function rs(w,S,I,R){if(w.segments.length>I.length){const N=w.segments.slice(0,I.length);return!(!Ii(N,I)||S.hasChildren()||!Wt(N,I,R))}if(w.segments.length===I.length){if(!Ii(w.segments,I)||!Wt(w.segments,I,R))return!1;for(const N in S.children)if(!w.children[N]||!Tt(w.children[N],S.children[N],R))return!1;return!0}{const N=I.slice(0,w.segments.length),j=I.slice(w.segments.length);return!!(Ii(w.segments,N)&&Wt(w.segments,N,R)&&w.children[wt])&&rs(w.children[wt],S,j,R)}}function Wt(w,S,I){return S.every((R,N)=>zr[I](w[N].parameters,R.parameters))}class Er{constructor(S=new Qt([],{}),I={},R=null){this.root=S,this.queryParams=I,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vr(this.queryParams)),this._queryParamMap}toString(){return _o.serialize(this)}}class Qt{constructor(S,I){this.segments=S,this.children=I,this.parent=null,Object.values(I).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wr(this)}}class is{constructor(S,I){this.path=S,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=vr(this.parameters)),this._parameterMap}toString(){return se(this)}}function Ii(w,S){return w.length===S.length&&w.every((I,R)=>I.path===S[R].path)}let di=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return new Pi},providedIn:"root"})}return w})();class Pi{parse(S){const I=new Ae(S);return new Er(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(S){const I=`/${qr(S.root,!0)}`,R=function tt(w){const S=Object.keys(w).map(I=>{const R=w[I];return Array.isArray(R)?R.map(N=>`${te(I)}=${te(N)}`).join("&"):`${te(I)}=${te(R)}`}).filter(I=>!!I);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${I}${R}${"string"==typeof S.fragment?`#${function $(w){return encodeURI(w)}(S.fragment)}`:""}`}}const _o=new Pi;function Wr(w){return w.segments.map(S=>se(S)).join("/")}function qr(w,S){if(!w.hasChildren())return Wr(w);if(S){const I=w.children[wt]?qr(w.children[wt],!1):"",R=[];return Object.entries(w.children).forEach(([N,j])=>{N!==wt&&R.push(`${N}:${qr(j,!1)}`)}),R.length>0?`${I}(${R.join("//")})`:I}{const I=function wi(w,S){let I=[];return Object.entries(w.children).forEach(([R,N])=>{R===wt&&(I=I.concat(S(N,R)))}),Object.entries(w.children).forEach(([R,N])=>{R!==wt&&(I=I.concat(S(N,R)))}),I}(w,(R,N)=>N===wt?[qr(w.children[wt],!1)]:[`${N}:${qr(R,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[wt]?`${Wr(w)}/${I[0]}`:`${Wr(w)}/(${I.join("//")})`}}function ti(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function te(w){return ti(w).replace(/%3B/gi,";")}function z(w){return ti(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H(w){return decodeURIComponent(w)}function W(w){return H(w.replace(/\+/g,"%20"))}function se(w){return`${z(w.path)}${function je(w){return Object.keys(w).map(S=>`;${z(S)}=${z(w[S])}`).join("")}(w.parameters)}`}const Et=/^[^\/()?;#]+/;function xt(w){const S=w.match(Et);return S?S[0]:""}const Mt=/^[^\/()?;=#]+/,Vn=/^[^=?&#]+/,Ti=/^[^&#]+/;class Ae{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(S.length>0||Object.keys(I).length>0)&&(R[wt]=new Qt(S,I)),R}parseSegment(){const S=xt(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new D.vHH(4009,!1);return this.capture(S),new is(H(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const I=function Ht(w){const S=w.match(Mt);return S?S[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const N=xt(this.remaining);N&&(R=N,this.capture(R))}S[H(I)]=H(R)}parseQueryParam(S){const I=function hi(w){const S=w.match(Vn);return S?S[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const Y=function Bi(w){const S=w.match(Ti);return S?S[0]:""}(this.remaining);Y&&(R=Y,this.capture(R))}const N=W(I),j=W(R);if(S.hasOwnProperty(N)){let Y=S[N];Array.isArray(Y)||(Y=[Y],S[N]=Y),Y.push(j)}else S[N]=j}parseParens(S){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=xt(this.remaining),N=this.remaining[R.length];if("/"!==N&&")"!==N&&";"!==N)throw new D.vHH(4010,!1);let j;R.indexOf(":")>-1?(j=R.slice(0,R.indexOf(":")),this.capture(j),this.capture(":")):S&&(j=wt);const Y=this.parseChildren();I[j]=1===Object.keys(Y).length?Y[wt]:new Qt([],Y),this.consumeOptional("//")}return I}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new D.vHH(4011,!1)}}function fe(w){return w.segments.length>0?new Qt([],{[wt]:w}):w}function Ge(w){const S={};for(const R of Object.keys(w.children)){const j=Ge(w.children[R]);if(R===wt&&0===j.segments.length&&j.hasChildren())for(const[Y,ye]of Object.entries(j.children))S[Y]=ye;else(j.segments.length>0||j.hasChildren())&&(S[R]=j)}return function pt(w){if(1===w.numberOfChildren&&w.children[wt]){const S=w.children[wt];return new Qt(w.segments.concat(S.segments),S.children)}return w}(new Qt(w.segments,S))}function bt(w){return w instanceof Er}function nn(w){let S;const N=fe(function I(j){const Y={};for(const me of j.children){const at=I(me);Y[me.outlet]=at}const ye=new Qt(j.url,Y);return j===w&&(S=ye),ye}(w.root));return S??N}function pr(w,S,I,R){let N=w;for(;N.parent;)N=N.parent;if(0===S.length)return ni(N,N,N,I,R);const j=function td(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new za(!0,0,w);let S=0,I=!1;const R=w.reduce((N,j,Y)=>{if("object"==typeof j&&null!=j){if(j.outlets){const ye={};return Object.entries(j.outlets).forEach(([me,at])=>{ye[me]="string"==typeof at?at.split("/"):at}),[...N,{outlets:ye}]}if(j.segmentPath)return[...N,j.segmentPath]}return"string"!=typeof j?[...N,j]:0===Y?(j.split("/").forEach((ye,me)=>{0==me&&"."===ye||(0==me&&""===ye?I=!0:".."===ye?S++:""!=ye&&N.push(ye))}),N):[...N,j]},[]);return new za(I,S,R)}(S);if(j.toRoot())return ni(N,N,new Qt([],{}),I,R);const Y=function An(w,S,I){if(w.isAbsolute)return new No(S,!0,0);if(!I)return new No(S,!1,NaN);if(null===I.parent)return new No(I,!0,0);const R=Un(w.commands[0])?0:1;return function Hl(w,S,I){let R=w,N=S,j=I;for(;j>N;){if(j-=N,R=R.parent,!R)throw new D.vHH(4005,!1);N=R.segments.length}return new No(R,!1,N-j)}(I,I.segments.length-1+R,w.numberOfDoubleDots)}(j,N,w),ye=Y.processChildren?Oo(Y.segmentGroup,Y.index,j.commands):Ws(Y.segmentGroup,Y.index,j.commands);return ni(N,Y.segmentGroup,ye,I,R)}function Un(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Ci(w){return"object"==typeof w&&null!=w&&w.outlets}function ni(w,S,I,R,N){let Y,j={};R&&Object.entries(R).forEach(([me,at])=>{j[me]=Array.isArray(at)?at.map($t=>`${$t}`):`${at}`}),Y=w===S?I:ji(w,S,I);const ye=fe(Ge(Y));return new Er(ye,j,N)}function ji(w,S,I){const R={};return Object.entries(w.children).forEach(([N,j])=>{R[N]=j===S?I:ji(j,S,I)}),new Qt(w.segments,R)}class za{constructor(S,I,R){if(this.isAbsolute=S,this.numberOfDoubleDots=I,this.commands=R,S&&R.length>0&&Un(R[0]))throw new D.vHH(4003,!1);const N=R.find(Ci);if(N&&N!==tn(R))throw new D.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class No{constructor(S,I,R){this.segmentGroup=S,this.processChildren=I,this.index=R}}function Ws(w,S,I){if(w||(w=new Qt([],{})),0===w.segments.length&&w.hasChildren())return Oo(w,S,I);const R=function Hu(w,S,I){let R=0,N=S;const j={match:!1,pathIndex:0,commandIndex:0};for(;N<w.segments.length;){if(R>=I.length)return j;const Y=w.segments[N],ye=I[R];if(Ci(ye))break;const me=`${ye}`,at=R<I.length-1?I[R+1]:null;if(N>0&&void 0===me)break;if(me&&at&&"object"==typeof at&&void 0===at.outlets){if(!ri(me,at,Y))return j;R+=2}else{if(!ri(me,{},Y))return j;R++}N++}return{match:!0,pathIndex:N,commandIndex:R}}(w,S,I),N=I.slice(R.commandIndex);if(R.match&&R.pathIndex<w.segments.length){const j=new Qt(w.segments.slice(0,R.pathIndex),{});return j.children[wt]=new Qt(w.segments.slice(R.pathIndex),w.children),Oo(j,0,N)}return R.match&&0===N.length?new Qt(w.segments,{}):R.match&&!w.hasChildren()?ko(w,S,I):R.match?Oo(w,0,N):ko(w,S,I)}function Oo(w,S,I){if(0===I.length)return new Qt(w.segments,{});{const R=function da(w){return Ci(w[0])?w[0].outlets:{[wt]:w}}(I),N={};if(Object.keys(R).some(j=>j!==wt)&&w.children[wt]&&1===w.numberOfChildren&&0===w.children[wt].segments.length){const j=Oo(w.children[wt],S,I);return new Qt(w.segments,j.children)}return Object.entries(R).forEach(([j,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(N[j]=Ws(w.children[j],S,Y))}),Object.entries(w.children).forEach(([j,Y])=>{void 0===R[j]&&(N[j]=Y)}),new Qt(w.segments,N)}}function ko(w,S,I){const R=w.segments.slice(0,S);let N=0;for(;N<I.length;){const j=I[N];if(Ci(j)){const me=$l(j.outlets);return new Qt(R,me)}if(0===N&&Un(I[0])){R.push(new is(w.segments[S].path,Wa(I[0]))),N++;continue}const Y=Ci(j)?j.outlets[wt]:`${j}`,ye=N<I.length-1?I[N+1]:null;Y&&ye&&Un(ye)?(R.push(new is(Y,Wa(ye))),N+=2):(R.push(new is(Y,{})),N++)}return new Qt(R,{})}function $l(w){const S={};return Object.entries(w).forEach(([I,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(S[I]=ko(new Qt([],{}),0,R))}),S}function Wa(w){const S={};return Object.entries(w).forEach(([I,R])=>S[I]=`${R}`),S}function ri(w,S,I){return w==I.path&&Hn(S,I.parameters)}const Hi="imperative";class Ir{constructor(S,I){this.id=S,this.url=I}}class Lo extends Ir{constructor(S,I,R="imperative",N=null){super(S,I),this.type=0,this.navigationTrigger=R,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ss extends Ir{constructor(S,I,R){super(S,I),this.urlAfterRedirects=R,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yo extends Ir{constructor(S,I,R,N){super(S,I),this.reason=R,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qa extends Ir{constructor(S,I,R,N){super(S,I),this.reason=R,this.code=N,this.type=16}}class Za extends Ir{constructor(S,I,R,N){super(S,I),this.error=R,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $u extends Ir{constructor(S,I,R,N){super(S,I),this.urlAfterRedirects=R,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $i extends Ir{constructor(S,I,R,N){super(S,I),this.urlAfterRedirects=R,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ph extends Ir{constructor(S,I,R,N,j){super(S,I),this.urlAfterRedirects=R,this.state=N,this.shouldActivate=j,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Gl extends Ir{constructor(S,I,R,N){super(S,I),this.urlAfterRedirects=R,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gh extends Ir{constructor(S,I,R,N){super(S,I),this.urlAfterRedirects=R,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fo{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gu{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vo{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zu{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vo{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ha{constructor(S,I,R){this.routerEvent=S,this.position=I,this.anchor=R,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class an{}class cr{constructor(S){this.url=S}}class Rs{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vr,this.attachRef=null}}let Vr=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(I,R){const N=this.getOrCreateContext(I);N.outlet=R,this.contexts.set(I,N)}onChildOutletDestroyed(I){const R=this.getContext(I);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let R=this.getContext(I);return R||(R=new Rs,this.contexts.set(I,R)),R}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class Bo{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const I=this.pathFromRoot(S);return I.length>1?I[I.length-2]:null}children(S){const I=Ka(S,this._root);return I?I.children.map(R=>R.value):[]}firstChild(S){const I=Ka(S,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(S){const I=Ps(S,this._root);return I.length<2?[]:I[I.length-2].children.map(N=>N.value).filter(N=>N!==S)}pathFromRoot(S){return Ps(S,this._root).map(I=>I.value)}}function Ka(w,S){if(w===S.value)return S;for(const I of S.children){const R=Ka(w,I);if(R)return R}return null}function Ps(w,S){if(w===S.value)return[S];for(const I of S.children){const R=Ps(w,I);if(R.length)return R.unshift(S),R}return[]}class Gi{constructor(S,I){this.value=S,this.children=I}toString(){return`TreeNode(${this.value})`}}function xs(w){const S={};return w&&w.children.forEach(I=>S[I.value.outlet]=I),S}class $n extends Bo{constructor(S,I){super(S),this.snapshot=I,kn(this,S)}toString(){return this.snapshot.toString()}}function it(w,S){const I=function jt(w,S){const Y=new Gn([],{},{},"",{},wt,S,null,{});return new Yr("",new Gi(Y,[]))}(0,S),R=new _e.X([new is("",{})]),N=new _e.X({}),j=new _e.X({}),Y=new _e.X({}),ye=new _e.X(""),me=new fn(R,N,Y,ye,j,wt,S,I.root);return me.snapshot=I.root,new $n(new Gi(me,[]),I)}class fn{constructor(S,I,R,N,j,Y,ye,me){this.urlSubject=S,this.paramsSubject=I,this.queryParamsSubject=R,this.fragmentSubject=N,this.dataSubject=j,this.outlet=Y,this.component=ye,this._futureSnapshot=me,this.title=this.dataSubject?.pipe((0,ln.U)(at=>at[yr]))??(0,oe.of)(void 0),this.url=S,this.params=I,this.queryParams=R,this.fragment=N,this.data=j}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ln.U)(S=>vr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ln.U)(S=>vr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kr(w,S="emptyOnly"){const I=w.pathFromRoot;let R=0;if("always"!==S)for(R=I.length-1;R>=1;){const N=I[R],j=I[R-1];if(N.routeConfig&&""===N.routeConfig.path)R--;else{if(j.component)break;R--}}return function jo(w){return w.reduce((S,I)=>({params:{...S.params,...I.params},data:{...S.data,...I.data},resolve:{...I.data,...S.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(R))}class Gn{get title(){return this.data?.[yr]}constructor(S,I,R,N,j,Y,ye,me,at){this.url=S,this.params=I,this.queryParams=R,this.fragment=N,this.data=j,this.outlet=Y,this.component=ye,this.routeConfig=me,this._resolve=at}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yr extends Bo{constructor(S,I){super(I),this.url=S,kn(this,I)}toString(){return os(this._root)}}function kn(w,S){S.value._routerState=w,S.children.forEach(I=>kn(w,I))}function os(w){const S=w.children.length>0?` { ${w.children.map(os).join(", ")} } `:"";return`${w.value}${S}`}function Ur(w){if(w.snapshot){const S=w.snapshot,I=w._futureSnapshot;w.snapshot=I,Hn(S.queryParams,I.queryParams)||w.queryParamsSubject.next(I.queryParams),S.fragment!==I.fragment&&w.fragmentSubject.next(I.fragment),Hn(S.params,I.params)||w.paramsSubject.next(I.params),function lr(w,S){if(w.length!==S.length)return!1;for(let I=0;I<w.length;++I)if(!Hn(w[I],S[I]))return!1;return!0}(S.url,I.url)||w.urlSubject.next(I.url),Hn(S.data,I.data)||w.dataSubject.next(I.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function Bt(w,S){const I=Hn(w.params,S.params)&&function Ss(w,S){return Ii(w,S)&&w.every((I,R)=>Hn(I.parameters,S[R].parameters))}(w.url,S.url);return I&&!(!w.parent!=!S.parent)&&(!w.parent||Bt(w.parent,S.parent))}let qs=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=wt,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.parentContexts=(0,D.f3M)(Vr),this.location=(0,D.f3M)(D.s_b),this.changeDetector=(0,D.f3M)(D.sBO),this.environmentInjector=(0,D.f3M)(D.lqb),this.inputBinder=(0,D.f3M)(as,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:R,previousValue:N}=I.name;if(R)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new D.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new D.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new D.vHH(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,R){this.activated=I,this._activatedRoute=R,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,R){if(this.isActivated)throw new D.vHH(4013,!1);this._activatedRoute=I;const N=this.location,Y=I.snapshot.component,ye=this.parentContexts.getOrCreateContext(this.name).children,me=new Ya(I,ye,N.injector);this.activated=N.createComponent(Y,{index:N.length,injector:me,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[D.TTD]})}return w})();class Ya{constructor(S,I,R){this.route=S,this.childContexts=I,this.parent=R}get(S,I){return S===fn?this.route:S===Vr?this.childContexts:this.parent.get(S,I)}}const as=new D.OlP("");let dr=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:R}=I,N=Je([R.queryParams,R.params,R.data]).pipe((0,ur.w)(([j,Y,ye],me)=>(ye={...j,...Y,...ye},0===me?(0,oe.of)(ye):Promise.resolve(ye)))).subscribe(j=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(I);const Y=(0,D.qFp)(R.component);if(Y)for(const{templateName:ye}of Y.inputs)I.activatedComponentRef.setInput(ye,j[ye]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,N)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function us(w,S,I){if(I&&w.shouldReuseRoute(S.value,I.value.snapshot)){const R=I.value;R._futureSnapshot=S.value;const N=function Ms(w,S,I){return S.children.map(R=>{for(const N of I.children)if(w.shouldReuseRoute(R.value,N.value.snapshot))return us(w,R,N);return us(w,R)})}(w,S,I);return new Gi(R,N)}{if(w.shouldAttach(S.value)){const j=w.retrieve(S.value);if(null!==j){const Y=j.route;return Y.value._futureSnapshot=S.value,Y.children=S.children.map(ye=>us(w,ye)),Y}}const R=function Ns(w){return new fn(new _e.X(w.url),new _e.X(w.params),new _e.X(w.queryParams),new _e.X(w.fragment),new _e.X(w.data),w.outlet,w.component,w)}(S.value),N=S.children.map(j=>us(w,j));return new Gi(R,N)}}const Os="ngNavigationCancelingError";function ls(w,S){const{redirectTo:I,navigationBehaviorOptions:R}=bt(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,N=cs(!1,0,S);return N.url=I,N.navigationBehaviorOptions=R,N}function cs(w,S,I){const R=new Error("NavigationCancelingError: "+(w||""));return R[Os]=!0,R.cancellationCode=S,I&&(R.url=I),R}function Qa(w){return w&&w[Os]}let Zt=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275cmp=D.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[D.jDz],decls:1,vars:0,template:function(R,N){1&R&&D._UZ(0,"router-outlet")},dependencies:[qs],encapsulation:2})}return w})();function gr(w){const S=w.children&&w.children.map(gr),I=S?{...w,children:S}:{...w};return!I.component&&!I.loadComponent&&(S||I.loadChildren)&&I.outlet&&I.outlet!==wt&&(I.component=Zt),I}function Ln(w){return w.outlet||wt}function xi(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let S=w.parent;S;S=S.parent){const I=S.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class zl{constructor(S,I,R,N,j){this.routeReuseStrategy=S,this.futureState=I,this.currState=R,this.forwardEvent=N,this.inputBindingEnabled=j}activate(S){const I=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,R,S),Ur(this.futureState.root),this.activateChildRoutes(I,R,S)}deactivateChildRoutes(S,I,R){const N=xs(I);S.children.forEach(j=>{const Y=j.value.outlet;this.deactivateRoutes(j,N[Y],R),delete N[Y]}),Object.values(N).forEach(j=>{this.deactivateRouteAndItsChildren(j,R)})}deactivateRoutes(S,I,R){const N=S.value,j=I?I.value:null;if(N===j)if(N.component){const Y=R.getContext(N.outlet);Y&&this.deactivateChildRoutes(S,I,Y.children)}else this.deactivateChildRoutes(S,I,R);else j&&this.deactivateRouteAndItsChildren(I,R)}deactivateRouteAndItsChildren(S,I){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,I):this.deactivateRouteAndOutlet(S,I)}detachAndStoreRouteSubtree(S,I){const R=I.getContext(S.value.outlet),N=R&&S.value.component?R.children:I,j=xs(S);for(const Y of Object.keys(j))this.deactivateRouteAndItsChildren(j[Y],N);if(R&&R.outlet){const Y=R.outlet.detach(),ye=R.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:Y,route:S,contexts:ye})}}deactivateRouteAndOutlet(S,I){const R=I.getContext(S.value.outlet),N=R&&S.value.component?R.children:I,j=xs(S);for(const Y of Object.keys(j))this.deactivateRouteAndItsChildren(j[Y],N);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(S,I,R){const N=xs(I);S.children.forEach(j=>{this.activateRoutes(j,N[j.value.outlet],R),this.forwardEvent(new Uo(j.value.snapshot))}),S.children.length&&this.forwardEvent(new zu(S.value.snapshot))}activateRoutes(S,I,R){const N=S.value,j=I?I.value:null;if(Ur(N),N===j)if(N.component){const Y=R.getOrCreateContext(N.outlet);this.activateChildRoutes(S,I,Y.children)}else this.activateChildRoutes(S,I,R);else if(N.component){const Y=R.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const ye=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),Y.children.onOutletReAttached(ye.contexts),Y.attachRef=ye.componentRef,Y.route=ye.route.value,Y.outlet&&Y.outlet.attach(ye.componentRef,ye.route.value),Ur(ye.route.value),this.activateChildRoutes(S,null,Y.children)}else{const ye=xi(N.snapshot);Y.attachRef=null,Y.route=N,Y.injector=ye,Y.outlet&&Y.outlet.activateWith(N,Y.injector),this.activateChildRoutes(S,null,Y.children)}}else this.activateChildRoutes(S,null,R)}}class Wu{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class Io{constructor(S,I){this.component=S,this.route=I}}function mh(w,S,I){const R=w._root;return ma(R,S?S._root:null,I,[R.value])}function ga(w,S){const I=Symbol(),R=S.get(w,I);return R===I?"function"!=typeof w||(0,D.Z0I)(w)?S.get(w):w:R}function ma(w,S,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=xs(S);return w.children.forEach(Y=>{(function _h(w,S,I,R,N={canDeactivateChecks:[],canActivateChecks:[]}){const j=w.value,Y=S?S.value:null,ye=I?I.getContext(w.value.outlet):null;if(Y&&j.routeConfig===Y.routeConfig){const me=function yh(w,S,I){if("function"==typeof I)return I(w,S);switch(I){case"pathParamsChange":return!Ii(w.url,S.url);case"pathParamsOrQueryParamsChange":return!Ii(w.url,S.url)||!Hn(w.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bt(w,S)||!Hn(w.queryParams,S.queryParams);default:return!Bt(w,S)}}(Y,j,j.routeConfig.runGuardsAndResolvers);me?N.canActivateChecks.push(new Wu(R)):(j.data=Y.data,j._resolvedData=Y._resolvedData),ma(w,S,j.component?ye?ye.children:null:I,R,N),me&&ye&&ye.outlet&&ye.outlet.isActivated&&N.canDeactivateChecks.push(new Io(ye.outlet.component,Y))}else Y&&Pn(S,ye,N),N.canActivateChecks.push(new Wu(R)),ma(w,null,j.component?ye?ye.children:null:I,R,N)})(Y,j[Y.value.outlet],I,R.concat([Y.value]),N),delete j[Y.value.outlet]}),Object.entries(j).forEach(([Y,ye])=>Pn(ye,I.getContext(Y),N)),N}function Pn(w,S,I){const R=xs(w),N=w.value;Object.entries(R).forEach(([j,Y])=>{Pn(Y,N.component?S?S.children.getContext(j):null:S,I)}),I.canDeactivateChecks.push(new Io(N.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,N))}function Xa(w){return"function"==typeof w}function Zu(w){return w instanceof lt.K||"EmptyError"===w?.name}const tu=Symbol("INITIAL_VALUE");function Ho(){return(0,ur.w)(w=>Je(w.map(S=>S.pipe((0,Mn.q)(1),(0,bs.O)(tu)))).pipe((0,ln.U)(S=>{for(const I of S)if(!0!==I){if(I===tu)return tu;if(!1===I||I instanceof Er)return I}return!0}),(0,Sr.h)(S=>S!==tu),(0,Mn.q)(1)))}function wo(w){return(0,Fe.z)((0,Ce.b)(S=>{if(bt(S))throw ls(0,S)}),(0,ln.U)(S=>!0===S))}class $o{constructor(S){this.segmentGroup=S||null}}class ya{constructor(S){this.urlTree=S}}function Go(w){return pe(new $o(w))}function va(w){return pe(new ya(w))}class Me{constructor(S,I){this.urlSerializer=S,this.urlTree=I}noMatchError(S){return new D.vHH(4002,!1)}lineralizeSegments(S,I){let R=[],N=I.root;for(;;){if(R=R.concat(N.segments),0===N.numberOfChildren)return(0,oe.of)(R);if(N.numberOfChildren>1||!N.children[wt])return pe(new D.vHH(4e3,!1));N=N.children[wt]}}applyRedirectCommands(S,I,R){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),S,R)}applyRedirectCreateUrlTree(S,I,R,N){const j=this.createSegmentGroup(S,I.root,R,N);return new Er(j,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(S,I){const R={};return Object.entries(S).forEach(([N,j])=>{if("string"==typeof j&&j.startsWith(":")){const ye=j.substring(1);R[N]=I[ye]}else R[N]=j}),R}createSegmentGroup(S,I,R,N){const j=this.createSegments(S,I.segments,R,N);let Y={};return Object.entries(I.children).forEach(([ye,me])=>{Y[ye]=this.createSegmentGroup(S,me,R,N)}),new Qt(j,Y)}createSegments(S,I,R,N){return I.map(j=>j.path.startsWith(":")?this.findPosParam(S,j,N):this.findOrReturn(j,R))}findPosParam(S,I,R){const N=R[I.path.substring(1)];if(!N)throw new D.vHH(4001,!1);return N}findOrReturn(S,I){let R=0;for(const N of I){if(N.path===S.path)return I.splice(R),N;R++}return S}}const Rr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Di(w,S,I,R,N){const j=hr(w,S,I);return j.matched?(R=function Zs(w,S){return w.providers&&!w._injector&&(w._injector=(0,D.MMx)(w.providers,S,`Route: ${w.path}`)),w._injector??S}(S,R),function ru(w,S,I,R){const N=S.canMatch;if(!N||0===N.length)return(0,oe.of)(!0);const j=N.map(Y=>{const ye=ga(Y,w);return St(function id(w){return w&&Xa(w.canMatch)}(ye)?ye.canMatch(S,I):w.runInContext(()=>ye(S,I)))});return(0,oe.of)(j).pipe(Ho(),wo())}(R,S,I).pipe((0,ln.U)(Y=>!0===Y?j:{...Rr}))):(0,oe.of)(j)}function hr(w,S,I){if(""===S.path)return"full"===S.pathMatch&&(w.hasChildren()||I.length>0)?{...Rr}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const N=(S.matcher||On)(I,w,S);if(!N)return{...Rr};const j={};Object.entries(N.posParams??{}).forEach(([ye,me])=>{j[ye]=me.path});const Y=N.consumed.length>0?{...j,...N.consumed[N.consumed.length-1].parameters}:j;return{matched:!0,consumedSegments:N.consumed,remainingSegments:I.slice(N.consumed.length),parameters:Y,positionalParamSegments:N.posParams??{}}}function q(w,S,I,R){return I.length>0&&function ut(w,S,I){return I.some(R=>Ft(w,S,R)&&Ln(R)!==wt)}(w,I,R)?{segmentGroup:new Qt(S,Ni(R,new Qt(I,w.children))),slicedSegments:[]}:0===I.length&&function od(w,S,I){return I.some(R=>Ft(w,S,R))}(w,I,R)?{segmentGroup:new Qt(w.segments,ql(w,0,I,R,w.children)),slicedSegments:I}:{segmentGroup:new Qt(w.segments,w.children),slicedSegments:I}}function ql(w,S,I,R,N){const j={};for(const Y of R)if(Ft(w,I,Y)&&!N[Ln(Y)]){const ye=new Qt([],{});j[Ln(Y)]=ye}return{...N,...j}}function Ni(w,S){const I={};I[wt]=S;for(const R of w)if(""===R.path&&Ln(R)!==wt){const N=new Qt([],{});I[Ln(R)]=N}return I}function Ft(w,S,I){return(!(w.hasChildren()||S.length>0)||"full"!==I.pathMatch)&&""===I.path}class zo{constructor(S,I,R,N,j,Y,ye){this.injector=S,this.configLoader=I,this.rootComponentType=R,this.config=N,this.urlTree=j,this.paramsInheritanceStrategy=Y,this.urlSerializer=ye,this.allowRedirects=!0,this.applyRedirects=new Me(this.urlSerializer,this.urlTree)}noMatchError(S){return new D.vHH(4002,!1)}recognize(){const S=q(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,wt).pipe(Oe(I=>{if(I instanceof ya)return this.allowRedirects=!1,this.urlTree=I.urlTree,this.match(I.urlTree);throw I instanceof $o?this.noMatchError(I):I}),(0,ln.U)(I=>{const R=new Gn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},wt,this.rootComponentType,null,{}),N=new Gi(R,I),j=new Yr("",N),Y=function ct(w,S,I=null,R=null){return pr(nn(w),S,I,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return Y.queryParams=this.urlTree.queryParams,j.url=this.urlSerializer.serialize(Y),this.inheritParamsAndData(j._root),{state:j,tree:Y}}))}match(S){return this.processSegmentGroup(this.injector,this.config,S.root,wt).pipe(Oe(R=>{throw R instanceof $o?this.noMatchError(R):R}))}inheritParamsAndData(S){const I=S.value,R=Kr(I,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data),S.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(S,I,R,N){return 0===R.segments.length&&R.hasChildren()?this.processChildren(S,I,R):this.processSegment(S,I,R,R.segments,N,!0)}processChildren(S,I,R){const N=[];for(const j of Object.keys(R.children))"primary"===j?N.unshift(j):N.push(j);return(0,ue.D)(N).pipe(xe(j=>{const Y=R.children[j],ye=function pa(w,S){const I=w.filter(R=>Ln(R)===S);return I.push(...w.filter(R=>Ln(R)!==S)),I}(I,j);return this.processSegmentGroup(S,ye,Y,j)}),(0,Ue.R)((j,Y)=>(j.push(...Y),j)),(0,_t.d)(null),function At(w,S){const I=arguments.length>=2;return R=>R.pipe(w?(0,Sr.h)((N,j)=>w(N,j,R)):De.y,et(1),I?(0,_t.d)(S):(0,Zn.T)(()=>new lt.K))}(),(0,ge.z)(j=>{if(null===j)return Go(R);const Y=wh(j);return function Ih(w){w.sort((S,I)=>S.value.outlet===wt?-1:I.value.outlet===wt?1:S.value.outlet.localeCompare(I.value.outlet))}(Y),(0,oe.of)(Y)}))}processSegment(S,I,R,N,j,Y){return(0,ue.D)(I).pipe(xe(ye=>this.processSegmentAgainstRoute(ye._injector??S,I,ye,R,N,j,Y).pipe(Oe(me=>{if(me instanceof $o)return(0,oe.of)(null);throw me}))),(0,ve.P)(ye=>!!ye),Oe(ye=>{if(Zu(ye))return function Ea(w,S,I){return 0===S.length&&!w.children[I]}(R,N,j)?(0,oe.of)([]):Go(R);throw ye}))}processSegmentAgainstRoute(S,I,R,N,j,Y,ye){return function Qu(w,S,I,R){return!!(Ln(w)===R||R!==wt&&Ft(S,I,w))&&("**"===w.path||hr(S,w,I).matched)}(R,N,j,Y)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(S,N,R,j,Y,ye):ye&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,N,I,R,j,Y):Go(N):Go(N)}expandSegmentAgainstRouteUsingRedirect(S,I,R,N,j,Y){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,R,N,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(S,I,R,N,j,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,I,R,N){const j=this.applyRedirects.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?va(j):this.applyRedirects.lineralizeSegments(R,j).pipe((0,ge.z)(Y=>{const ye=new Qt(Y,{});return this.processSegment(S,I,ye,Y,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,I,R,N,j,Y){const{matched:ye,consumedSegments:me,remainingSegments:at,positionalParamSegments:$t}=hr(I,N,j);if(!ye)return Go(I);const Jt=this.applyRedirects.applyRedirectCommands(me,N.redirectTo,$t);return N.redirectTo.startsWith("/")?va(Jt):this.applyRedirects.lineralizeSegments(N,Jt).pipe((0,ge.z)(kt=>this.processSegment(S,R,I,kt.concat(at),Y,!1)))}matchSegmentAgainstRoute(S,I,R,N,j,Y){let ye;if("**"===R.path){const me=N.length>0?tn(N).parameters:{},at=new Gn(N,me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,su(R),Ln(R),R.component??R._loadedComponent??null,R,A(R));ye=(0,oe.of)({snapshot:at,consumedSegments:[],remainingSegments:[]}),I.children={}}else ye=Di(I,R,N,S).pipe((0,ln.U)(({matched:me,consumedSegments:at,remainingSegments:$t,parameters:Jt})=>me?{snapshot:new Gn(at,Jt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,su(R),Ln(R),R.component??R._loadedComponent??null,R,A(R)),consumedSegments:at,remainingSegments:$t}:null));return ye.pipe((0,ur.w)(me=>null===me?Go(I):this.getChildConfig(S=R._injector??S,R,N).pipe((0,ur.w)(({routes:at})=>{const $t=R._loadedInjector??S,{snapshot:Jt,consumedSegments:kt,remainingSegments:Tn}=me,{segmentGroup:no,slicedSegments:ro}=q(I,kt,Tn,at);if(0===ro.length&&no.hasChildren())return this.processChildren($t,at,no).pipe((0,ln.U)(io=>null===io?null:[new Gi(Jt,io)]));if(0===at.length&&0===ro.length)return(0,oe.of)([new Gi(Jt,[])]);const al=Ln(R)===j;return this.processSegment($t,at,no,ro,al?wt:j,!0).pipe((0,ln.U)(io=>[new Gi(Jt,io)]))}))))}getChildConfig(S,I,R){return I.children?(0,oe.of)({routes:I.children,injector:S}):I.loadChildren?void 0!==I._loadedRoutes?(0,oe.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function nu(w,S,I,R){const N=S.canLoad;if(void 0===N||0===N.length)return(0,oe.of)(!0);const j=N.map(Y=>{const ye=ga(Y,w);return St(function rd(w){return w&&Xa(w.canLoad)}(ye)?ye.canLoad(S,I):w.runInContext(()=>ye(S,I)))});return(0,oe.of)(j).pipe(Ho(),wo())}(S,I,R).pipe((0,ge.z)(N=>N?this.configLoader.loadChildren(S,I).pipe((0,Ce.b)(j=>{I._loadedRoutes=j.routes,I._loadedInjector=j.injector})):function Yu(w){return pe(cs(!1,3))}())):(0,oe.of)({routes:[],injector:S})}}function iu(w){const S=w.value.routeConfig;return S&&""===S.path}function wh(w){const S=[],I=new Set;for(const R of w){if(!iu(R)){S.push(R);continue}const N=S.find(j=>R.value.routeConfig===j.value.routeConfig);void 0!==N?(N.children.push(...R.children),I.add(N)):S.push(R)}for(const R of I){const N=wh(R.children);S.push(new Gi(R.value,N))}return S.filter(R=>!I.has(R))}function su(w){return w.data||{}}function A(w){return w.resolve||{}}function It(w){return"string"==typeof w.title||null===w.title}function rn(w){return(0,ur.w)(S=>{const I=w(S);return I?(0,ue.D)(I).pipe((0,ln.U)(()=>S)):(0,oe.of)(S)})}const dn=new D.OlP("ROUTES");let Kt=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,D.f3M)(D.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,oe.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const R=St(I.loadComponent()).pipe((0,ln.U)(xn),(0,Ce.b)(j=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=j}),Ut(()=>{this.componentLoaders.delete(I)})),N=new Lt(R,()=>new zt.x).pipe(Te());return this.componentLoaders.set(I,N),N}loadChildren(I,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,oe.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const j=function qt(w,S,I,R){return St(w.loadChildren()).pipe((0,ln.U)(xn),(0,ge.z)(N=>N instanceof D.YKP||Array.isArray(N)?(0,oe.of)(N):(0,ue.D)(S.compileModuleAsync(N))),(0,ln.U)(N=>{R&&R(w);let j,Y,ye=!1;return Array.isArray(N)?(Y=N,!0):(j=N.create(I).injector,Y=j.get(dn,[],{optional:!0,self:!0}).flat()),{routes:Y.map(gr),injector:j}}))}(R,this.compiler,I,this.onLoadEndListener).pipe(Ut(()=>{this.childrenLoaders.delete(R)})),Y=new Lt(j,()=>new zt.x).pipe(Te());return this.childrenLoaders.set(R,Y),Y}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function xn(w){return function nr(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let Fn=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zt.x,this.transitionAbortSubject=new zt.x,this.configLoader=(0,D.f3M)(Kt),this.environmentInjector=(0,D.f3M)(D.lqb),this.urlSerializer=(0,D.f3M)(di),this.rootContexts=(0,D.f3M)(Vr),this.inputBindingEnabled=null!==(0,D.f3M)(as,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,oe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new Gu(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new Fo(N))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:R})}setupNavigations(I,R,N){return this.transitions=new _e.X({id:0,currentUrlTree:R,currentRawUrl:R,currentBrowserUrl:R,extractedUrl:I.urlHandlingStrategy.extract(R),urlAfterRedirects:I.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hi,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Sr.h)(j=>0!==j.id),(0,ln.U)(j=>({...j,extractedUrl:I.urlHandlingStrategy.extract(j.rawUrl)})),(0,ur.w)(j=>{this.currentTransition=j;let Y=!1,ye=!1;return(0,oe.of)(j).pipe((0,Ce.b)(me=>{this.currentNavigation={id:me.id,initialUrl:me.rawUrl,extractedUrl:me.extractedUrl,trigger:me.source,extras:me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ur.w)(me=>{const at=me.currentBrowserUrl.toString(),$t=!I.navigated||me.extractedUrl.toString()!==at||at!==me.currentUrlTree.toString();if(!$t&&"reload"!==(me.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const kt="";return this.events.next(new qa(me.id,this.urlSerializer.serialize(me.rawUrl),kt,0)),me.resolve(null),We.E}if(I.urlHandlingStrategy.shouldProcessUrl(me.rawUrl))return(0,oe.of)(me).pipe((0,ur.w)(kt=>{const Tn=this.transitions?.getValue();return this.events.next(new Lo(kt.id,this.urlSerializer.serialize(kt.extractedUrl),kt.source,kt.restoredState)),Tn!==this.transitions?.getValue()?We.E:Promise.resolve(kt)}),function F(w,S,I,R,N,j){return(0,ge.z)(Y=>function ad(w,S,I,R,N,j,Y="emptyOnly"){return new zo(w,S,I,R,N,Y,j).recognize()}(w,S,I,R,Y.extractedUrl,N,j).pipe((0,ln.U)(({state:ye,tree:me})=>({...Y,targetSnapshot:ye,urlAfterRedirects:me}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,Ce.b)(kt=>{j.targetSnapshot=kt.targetSnapshot,j.urlAfterRedirects=kt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:kt.urlAfterRedirects};const Tn=new $u(kt.id,this.urlSerializer.serialize(kt.extractedUrl),this.urlSerializer.serialize(kt.urlAfterRedirects),kt.targetSnapshot);this.events.next(Tn)}));if($t&&I.urlHandlingStrategy.shouldProcessUrl(me.currentRawUrl)){const{id:kt,extractedUrl:Tn,source:no,restoredState:ro,extras:al}=me,io=new Lo(kt,this.urlSerializer.serialize(Tn),no,ro);this.events.next(io);const gd=it(0,this.rootComponentType).snapshot;return this.currentTransition=j={...me,targetSnapshot:gd,urlAfterRedirects:Tn,extras:{...al,skipLocationChange:!1,replaceUrl:!1}},(0,oe.of)(j)}{const kt="";return this.events.next(new qa(me.id,this.urlSerializer.serialize(me.extractedUrl),kt,1)),me.resolve(null),We.E}}),(0,Ce.b)(me=>{const at=new $i(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects),me.targetSnapshot);this.events.next(at)}),(0,ln.U)(me=>(this.currentTransition=j={...me,guards:mh(me.targetSnapshot,me.currentSnapshot,this.rootContexts)},j)),function Wl(w,S){return(0,ge.z)(I=>{const{targetSnapshot:R,currentSnapshot:N,guards:{canActivateChecks:j,canDeactivateChecks:Y}}=I;return 0===Y.length&&0===j.length?(0,oe.of)({...I,guardsResult:!0}):function Qs(w,S,I,R){return(0,ue.D)(w).pipe((0,ge.z)(N=>function Tr(w,S,I,R,N){const j=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!j||0===j.length)return(0,oe.of)(!0);const Y=j.map(ye=>{const me=xi(S)??N,at=ga(ye,me);return St(function _a(w){return w&&Xa(w.canDeactivate)}(at)?at.canDeactivate(w,S,I,R):me.runInContext(()=>at(w,S,I,R))).pipe((0,ve.P)())});return(0,oe.of)(Y).pipe(Ho())}(N.component,N.route,I,S,R)),(0,ve.P)(N=>!0!==N,!0))}(Y,R,N,w).pipe((0,ge.z)(ye=>ye&&function vh(w){return"boolean"==typeof w}(ye)?function Mi(w,S,I,R){return(0,ue.D)(S).pipe(xe(N=>(0,en.z)(function sd(w,S){return null!==w&&S&&S(new Vo(w)),(0,oe.of)(!0)}(N.route.parent,R),function Wi(w,S){return null!==w&&S&&S(new vo(w)),(0,oe.of)(!0)}(N.route,R),function hs(w,S,I){const R=S[S.length-1],j=S.slice(0,S.length-1).reverse().map(Y=>function nd(w){const S=w.routeConfig?w.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:w,guards:S}:null}(Y)).filter(Y=>null!==Y).map(Y=>Ie(()=>{const ye=Y.guards.map(me=>{const at=xi(Y.node)??I,$t=ga(me,at);return St(function eu(w){return w&&Xa(w.canActivateChild)}($t)?$t.canActivateChild(R,w):at.runInContext(()=>$t(R,w))).pipe((0,ve.P)())});return(0,oe.of)(ye).pipe(Ho())}));return(0,oe.of)(j).pipe(Ho())}(w,N.path,I),function wr(w,S,I){const R=S.routeConfig?S.routeConfig.canActivate:null;if(!R||0===R.length)return(0,oe.of)(!0);const N=R.map(j=>Ie(()=>{const Y=xi(S)??I,ye=ga(j,Y);return St(function pi(w){return w&&Xa(w.canActivate)}(ye)?ye.canActivate(S,w):Y.runInContext(()=>ye(S,w))).pipe((0,ve.P)())}));return(0,oe.of)(N).pipe(Ho())}(w,N.route,I))),(0,ve.P)(N=>!0!==N,!0))}(R,j,w,S):(0,oe.of)(ye)),(0,ln.U)(ye=>({...I,guardsResult:ye})))})}(this.environmentInjector,me=>this.events.next(me)),(0,Ce.b)(me=>{if(j.guardsResult=me.guardsResult,bt(me.guardsResult))throw ls(0,me.guardsResult);const at=new ph(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects),me.targetSnapshot,!!me.guardsResult);this.events.next(at)}),(0,Sr.h)(me=>!!me.guardsResult||(this.cancelNavigationTransition(me,"",3),!1)),rn(me=>{if(me.guards.canActivateChecks.length)return(0,oe.of)(me).pipe((0,Ce.b)(at=>{const $t=new Gl(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next($t)}),(0,ur.w)(at=>{let $t=!1;return(0,oe.of)(at).pipe(function x(w,S){return(0,ge.z)(I=>{const{targetSnapshot:R,guards:{canActivateChecks:N}}=I;if(!N.length)return(0,oe.of)(I);let j=0;return(0,ue.D)(N).pipe(xe(Y=>function L(w,S,I,R){const N=w.routeConfig,j=w._resolve;return void 0!==N?.title&&!It(N)&&(j[yr]=N.title),function Q(w,S,I,R){const N=function Ee(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===N.length)return(0,oe.of)({});const j={};return(0,ue.D)(N).pipe((0,ge.z)(Y=>function Se(w,S,I,R){const N=xi(S)??R,j=ga(w,N);return St(j.resolve?j.resolve(S,I):N.runInContext(()=>j(S,I)))}(w[Y],S,I,R).pipe((0,ve.P)(),(0,Ce.b)(ye=>{j[Y]=ye}))),et(1),function cn(w){return(0,ln.U)(()=>w)}(j),Oe(Y=>Zu(Y)?We.E:pe(Y)))}(j,w,S,R).pipe((0,ln.U)(Y=>(w._resolvedData=Y,w.data=Kr(w,I).resolve,N&&It(N)&&(w.data[yr]=N.title),null)))}(Y.route,R,w,S)),(0,Ce.b)(()=>j++),et(1),(0,ge.z)(Y=>j===N.length?(0,oe.of)(I):We.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,Ce.b)({next:()=>$t=!0,complete:()=>{$t||this.cancelNavigationTransition(at,"",2)}}))}),(0,Ce.b)(at=>{const $t=new gh(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next($t)}))}),rn(me=>{const at=$t=>{const Jt=[];$t.routeConfig?.loadComponent&&!$t.routeConfig._loadedComponent&&Jt.push(this.configLoader.loadComponent($t.routeConfig).pipe((0,Ce.b)(kt=>{$t.component=kt}),(0,ln.U)(()=>{})));for(const kt of $t.children)Jt.push(...at(kt));return Jt};return Je(at(me.targetSnapshot.root)).pipe((0,_t.d)(),(0,Mn.q)(1))}),rn(()=>this.afterPreactivation()),(0,ln.U)(me=>{const at=function Eo(w,S,I){const R=us(w,S._root,I?I._root:void 0);return new $n(R,S)}(I.routeReuseStrategy,me.targetSnapshot,me.currentRouterState);return this.currentTransition=j={...me,targetRouterState:at},j}),(0,Ce.b)(()=>{this.events.next(new an)}),((w,S,I,R)=>(0,ln.U)(N=>(new zl(S,N.targetRouterState,N.currentRouterState,I,R).activate(w),N)))(this.rootContexts,I.routeReuseStrategy,me=>this.events.next(me),this.inputBindingEnabled),(0,Mn.q)(1),(0,Ce.b)({next:me=>{Y=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ss(me.id,this.urlSerializer.serialize(me.extractedUrl),this.urlSerializer.serialize(me.urlAfterRedirects))),I.titleStrategy?.updateTitle(me.targetRouterState.snapshot),me.resolve(!0)},complete:()=>{Y=!0}}),function Kn(w){return(0,Xe.e)((S,I)=>{(0,un.Xf)(w).subscribe((0,Pe.x)(I,()=>I.complete(),Nn.Z)),!I.closed&&S.subscribe(I)})}(this.transitionAbortSubject.pipe((0,Ce.b)(me=>{throw me}))),Ut(()=>{Y||ye||this.cancelNavigationTransition(j,"",1),this.currentNavigation?.id===j.id&&(this.currentNavigation=null)}),Oe(me=>{if(ye=!0,Qa(me))this.events.next(new yo(j.id,this.urlSerializer.serialize(j.extractedUrl),me.message,me.cancellationCode)),function Br(w){return Qa(w)&&bt(w.url)}(me)?this.events.next(new cr(me.url)):j.resolve(!1);else{this.events.next(new Za(j.id,this.urlSerializer.serialize(j.extractedUrl),me,j.targetSnapshot??void 0));try{j.resolve(I.errorHandler(me))}catch(at){j.reject(at)}}return We.E}))}))}cancelNavigationTransition(I,R,N){const j=new yo(I.id,this.urlSerializer.serialize(I.extractedUrl),R,N);this.events.next(j),I.resolve(!1)}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function fs(w){return w!==Hi}let Oi=(()=>{class w{buildTitle(I){let R,N=I.root;for(;void 0!==N;)R=this.getResolvedTitleForRoute(N)??R,N=N.children.find(j=>j.outlet===wt);return R}getResolvedTitleForRoute(I){return I.data[yr]}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Wo)},providedIn:"root"})}return w})(),Wo=(()=>{class w extends Oi{constructor(I){super(),this.title=I}updateTitle(I){const R=this.buildTitle(I);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(In.Dx))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),ii=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Pr)},providedIn:"root"})}return w})();class Js{shouldDetach(S){return!1}store(S,I){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,I){return S.routeConfig===I.routeConfig}}let Pr=(()=>{class w extends Js{static#e=this.\u0275fac=function(){let I;return function(N){return(I||(I=D.n5z(w)))(N||w)}}();static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const qi=new D.OlP("",{providedIn:"root",factory:()=>({})});let ud=(()=>{class w{static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:function(){return(0,D.f3M)(Bn)},providedIn:"root"})}return w})(),Bn=(()=>{class w{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,R){return I}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var qo=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(qo||{});function Ju(w,S){w.events.pipe((0,Sr.h)(I=>I instanceof ss||I instanceof yo||I instanceof Za||I instanceof qa),(0,ln.U)(I=>I instanceof ss||I instanceof qa?qo.COMPLETE:I instanceof yo&&(0===I.code||1===I.code)?qo.REDIRECTING:qo.FAILED),(0,Sr.h)(I=>I!==qo.REDIRECTING),(0,Mn.q)(1)).subscribe(()=>{S()})}function gi(w){throw w}function Ls(w,S,I){return S.parse("/")}const Zl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yn=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,D.f3M)(D.c2e),this.isNgZoneEnabled=!1,this._events=new zt.x,this.options=(0,D.f3M)(qi,{optional:!0})||{},this.pendingTasks=(0,D.f3M)(D.HDt),this.errorHandler=this.options.errorHandler||gi,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ls,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,D.f3M)(ud),this.routeReuseStrategy=(0,D.f3M)(ii),this.titleStrategy=(0,D.f3M)(Oi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,D.f3M)(dn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,D.f3M)(Fn),this.urlSerializer=(0,D.f3M)(di),this.location=(0,D.f3M)(qn.Ye),this.componentInputBindingEnabled=!!(0,D.f3M)(as,{optional:!0}),this.eventsSubscription=new Ke.w0,this.isNgZoneEnabled=(0,D.f3M)(D.R0b)instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Er,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=it(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(I=>{this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(R=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(Kl(R)&&this._events.next(R));if(R instanceof Lo)fs(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(R instanceof qa)this.rawUrlTree=N.rawUrl;else if(R instanceof $u){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(j,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(R instanceof an)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(R instanceof yo)0!==R.code&&1!==R.code&&(this.navigated=!0),(3===R.code||2===R.code)&&this.restoreHistory(N);else if(R instanceof cr){const j=this.urlHandlingStrategy.merge(R.url,N.currentRawUrl),Y={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fs(N.source)};this.scheduleNavigation(j,Hi,null,Y,{resolve:N.resolve,reject:N.reject,promise:N.promise})}R instanceof Za&&this.restoreHistory(N,!0),R instanceof ss&&(this.navigated=!0),Kl(R)&&this._events.next(R)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hi,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const R="popstate"===I.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,R,I.state)},0)}))}navigateToSyncWithBrowser(I,R,N){const j={replaceUrl:!0},Y=N?.navigationId?N:null;if(N){const me={...N};delete me.navigationId,delete me.\u0275routerPageId,0!==Object.keys(me).length&&(j.state=me)}const ye=this.parseUrl(I);this.scheduleNavigation(ye,R,Y,j)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(gr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,R={}){const{relativeTo:N,queryParams:j,fragment:Y,queryParamsHandling:ye,preserveFragment:me}=R,at=me?this.currentUrlTree.fragment:Y;let Jt,$t=null;switch(ye){case"merge":$t={...this.currentUrlTree.queryParams,...j};break;case"preserve":$t=this.currentUrlTree.queryParams;break;default:$t=j||null}null!==$t&&($t=this.removeEmptyProps($t));try{Jt=nn(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),Jt=this.currentUrlTree.root}return pr(Jt,I,$t,at??null)}navigateByUrl(I,R={skipLocationChange:!1}){const N=bt(I)?I:this.parseUrl(I),j=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(j,Hi,null,R)}navigate(I,R={skipLocationChange:!1}){return function wp(w){for(let S=0;S<w.length;S++)if(null==w[S])throw new D.vHH(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,R),R)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let R;try{R=this.urlSerializer.parse(I)}catch(N){R=this.malformedUriErrorHandler(N,this.urlSerializer,I)}return R}isActive(I,R){let N;if(N=!0===R?{...Zl}:!1===R?{...Xs}:R,bt(I))return fr(this.currentUrlTree,I,N);const j=this.parseUrl(I);return fr(this.currentUrlTree,j,N)}removeEmptyProps(I){return Object.keys(I).reduce((R,N)=>{const j=I[N];return null!=j&&(R[N]=j),R},{})}scheduleNavigation(I,R,N,j,Y){if(this.disposed)return Promise.resolve(!1);let ye,me,at;Y?(ye=Y.resolve,me=Y.reject,at=Y.promise):at=new Promise((Jt,kt)=>{ye=Jt,me=kt});const $t=this.pendingTasks.add();return Ju(this,()=>{queueMicrotask(()=>this.pendingTasks.remove($t))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:I,extras:j,resolve:ye,reject:me,promise:at,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),at.catch(Jt=>Promise.reject(Jt))}setBrowserUrl(I,R){const N=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(N)||R.extras.replaceUrl){const Y={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState(N,"",Y)}else{const j={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go(N,"",j)}}restoreHistory(I,R=!1){if("computed"===this.canceledNavigationResolution){const j=this.currentPageId-this.browserPageId;0!==j?this.location.historyGo(j):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===j&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,R){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:R}:{navigationId:I}}static#e=this.\u0275fac=function(R){return new(R||w)};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Kl(w){return!(w instanceof an||w instanceof cr)}let Xu=(()=>{class w{constructor(I,R,N,j,Y,ye){this.router=I,this.route=R,this.tabIndexAttribute=N,this.renderer=j,this.el=Y,this.locationStrategy=ye,this.href=null,this.commands=null,this.onChanges=new zt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const me=Y.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===me||"area"===me,this.isAnchorElement?this.subscription=I.events.subscribe(at=>{at instanceof ss&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,R,N,j,Y){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||R||N||j||Y||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const I=null===this.href?null:(0,D.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",I)}applyAttributeValue(I,R){const N=this.renderer,j=this.el.nativeElement;null!==R?N.setAttribute(j,I,R):N.removeAttribute(j,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||w)(D.Y36(Yn),D.Y36(fn),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(qn.S$))};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,N){1&R&&D.NdJ("click",function(Y){return N.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&R&&D.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",D.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",D.VuI],replaceUrl:["replaceUrl","replaceUrl",D.VuI],routerLink:"routerLink"},standalone:!0,features:[D.Xq5,D.TTD]})}return w})(),To=(()=>{class w{get isActive(){return this._isActive}constructor(I,R,N,j,Y){this.router=I,this.element=R,this.renderer=N,this.cdr=j,this.link=Y,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new D.vpe,this.routerEventsSubscription=I.events.subscribe(ye=>{ye instanceof ss&&this.update()})}ngAfterContentInit(){(0,oe.of)(this.links.changes,(0,oe.of)(null)).pipe((0,Rn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),this.link].filter(R=>!!R).map(R=>R.onChanges);this.linkInputChangesSubscription=(0,ue.D)(I).pipe((0,Rn.J)()).subscribe(R=>{this._isActive!==this.isLinkActive(this.router)(R)&&this.update()})}set routerLinkActive(I){const R=Array.isArray(I)?I:I.split(" ");this.classes=R.filter(N=>!!N)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const I=this.hasActiveLinks();this._isActive!==I&&(this._isActive=I,this.cdr.markForCheck(),this.classes.forEach(R=>{I?this.renderer.addClass(this.element.nativeElement,R):this.renderer.removeClass(this.element.nativeElement,R)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const R=function el(w){return!!w.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&I.isActive(N.urlTree,R)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.links.some(I)}static#e=this.\u0275fac=function(R){return new(R||w)(D.Y36(Yn),D.Y36(D.SBq),D.Y36(D.Qsj),D.Y36(D.sBO),D.Y36(Xu,8))};static#t=this.\u0275dir=D.lG2({type:w,selectors:[["","routerLinkActive",""]],contentQueries:function(R,N,j){if(1&R&&D.Suo(j,Xu,5),2&R){let Y;D.iGM(Y=D.CRH())&&(N.links=Y)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[D.TTD]})}return w})();class tl{}let nl=(()=>{class w{constructor(I,R,N,j,Y){this.router=I,this.injector=N,this.preloadingStrategy=j,this.loader=Y}setUpPreloading(){this.subscription=this.router.events.pipe((0,Sr.h)(I=>I instanceof ss),xe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,R){const N=[];for(const j of R){j.providers&&!j._injector&&(j._injector=(0,D.MMx)(j.providers,I,`Route: ${j.path}`));const Y=j._injector??I,ye=j._loadedInjector??Y;(j.loadChildren&&!j._loadedRoutes&&void 0===j.canLoad||j.loadComponent&&!j._loadedComponent)&&N.push(this.preloadConfig(Y,j)),(j.children||j._loadedRoutes)&&N.push(this.processRoutes(ye,j.children??j._loadedRoutes))}return(0,ue.D)(N).pipe((0,Rn.J)())}preloadConfig(I,R){return this.preloadingStrategy.preload(R,()=>{let N;N=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(I,R):(0,oe.of)(null);const j=N.pipe((0,ge.z)(Y=>null===Y?(0,oe.of)(void 0):(R._loadedRoutes=Y.routes,R._loadedInjector=Y.injector,this.processRoutes(Y.injector??I,Y.routes))));if(R.loadComponent&&!R._loadedComponent){const Y=this.loader.loadComponent(R);return(0,ue.D)([j,Y]).pipe((0,Rn.J)())}return j})}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(Yn),D.LFG(D.Sil),D.LFG(D.lqb),D.LFG(tl),D.LFG(Kt))};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const rl=new D.OlP("");let Vt=(()=>{class w{constructor(I,R,N,j,Y={}){this.urlSerializer=I,this.transitions=R,this.viewportScroller=N,this.zone=j,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Lo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof ss?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof qa&&0===I.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof ha&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,R){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ha(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){D.$Z()};static#t=this.\u0275prov=D.Yz7({token:w,factory:w.\u0275fac})}return w})();function Zi(w,S){return{\u0275kind:w,\u0275providers:S}}function Ta(){const w=(0,D.f3M)(D.zs3);return S=>{const I=w.get(D.z2F);if(S!==I.components[0])return;const R=w.get(Yn),N=w.get(Dh);1===w.get(rr)&&R.initialNavigation(),w.get(Ot,null,D.XFs.Optional)?.setUpPreloading(),w.get(rl,null,D.XFs.Optional)?.init(),R.resetRootComponentType(I.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const Dh=new D.OlP("",{factory:()=>new zt.x}),rr=new D.OlP("",{providedIn:"root",factory:()=>1}),Ot=new D.OlP("");function sl(w){return Zi(0,[{provide:Ot,useExisting:nl},{provide:tl,useExisting:w}])}const Yo=new D.OlP("ROUTER_FORROOT_GUARD"),ou=[qn.Ye,{provide:di,useClass:Pi},Yn,Vr,{provide:fn,useFactory:function Tp(w){return w.routerState.root},deps:[Yn]},Kt,[]];function Dp(){return new D.PXZ("Router",Yn)}let au=(()=>{class w{constructor(I){}static forRoot(I,R){return{ngModule:w,providers:[ou,[],{provide:dn,multi:!0,useValue:I},{provide:Yo,useFactory:Yl,deps:[[Yn,new D.FiY,new D.tp0]]},{provide:qi,useValue:R||{}},R?.useHash?{provide:qn.S$,useClass:qn.Do}:{provide:qn.S$,useClass:qn.b0},{provide:rl,useFactory:()=>{const w=(0,D.f3M)(qn.EM),S=(0,D.f3M)(D.R0b),I=(0,D.f3M)(qi),R=(0,D.f3M)(Fn),N=(0,D.f3M)(di);return I.scrollOffset&&w.setOffset(I.scrollOffset),new Vt(N,R,w,S,I)}},R?.preloadingStrategy?sl(R.preloadingStrategy).\u0275providers:[],{provide:D.PXZ,multi:!0,useFactory:Dp},R?.initialNavigation?to(R):[],R?.bindToComponentInputs?Zi(8,[dr,{provide:as,useExisting:dr}]).\u0275providers:[],[{provide:ps,useFactory:Ta},{provide:D.tb,multi:!0,useExisting:ps}]]}}static forChild(I){return{ngModule:w,providers:[{provide:dn,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(R){return new(R||w)(D.LFG(Yo,8))};static#t=this.\u0275mod=D.oAB({type:w});static#n=this.\u0275inj=D.cJS({})}return w})();function Yl(w){return"guarded"}function to(w){return["disabled"===w.initialNavigation?Zi(3,[{provide:D.ip1,multi:!0,useFactory:()=>{const S=(0,D.f3M)(Yn);return()=>{S.setUpLocationChangeListener()}}},{provide:rr,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?Zi(2,[{provide:rr,useValue:0},{provide:D.ip1,multi:!0,deps:[D.zs3],useFactory:S=>{const I=S.get(qn.V_,Promise.resolve());return()=>I.then(()=>new Promise(R=>{const N=S.get(Yn),j=S.get(Dh);Ju(N,()=>{R(!0)}),S.get(Fn).afterPreactivation=()=>(R(!0),j.closed?(0,oe.of)(void 0):j),N.initialNavigation()}))}}]).\u0275providers:[]]}const ps=new D.OlP("")},3106:(yt,be,B)=>{B.d(be,{Z:()=>Je});var D=B(9058),g=B(4537),K=B(534),ie=B(7879);class ue{constructor(rt,lt){this._delegate=rt,this.firebase=lt,(0,K._addComponent)(rt,new g.wA("app-compat",()=>this,"PUBLIC")),this.container=rt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this._delegate.automaticDataCollectionEnabled=rt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(rt=>{this._delegate.checkDestroyed(),rt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(rt,lt=K._DEFAULT_ENTRY_NAME){var en;this._delegate.checkDestroyed();const un=this._delegate.container.getProvider(rt);return!un.isInitialized()&&"EXPLICIT"===(null===(en=un.getComponent())||void 0===en?void 0:en.instantiationMode)&&un.initialize(),un.getImmediate({identifier:lt})}_removeServiceInstance(rt,lt=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(rt).clearInstance(lt)}_addComponent(rt){(0,K._addComponent)(this._delegate,rt)}_addOrOverwriteComponent(rt){(0,K._addOrOverwriteComponent)(this._delegate,rt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function De(){const Be=function He(Be){const rt={},lt={__esModule:!0,initializeApp:function Ie(Ke,Xe={}){const Te=K.initializeApp(Ke,Xe);if((0,D.r3)(rt,Te.name))return rt[Te.name];const Lt=new Be(Te,lt);return rt[Te.name]=Lt,Lt},app:un,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ke){const Xe=Ke.name,Te=Xe.replace("-compat","");if(K._registerComponent(Ke)&&"PUBLIC"===Ke.type){const Lt=(zt=un())=>{if("function"!=typeof zt[Te])throw _e.create("invalid-app-argument",{appName:Xe});return zt[Te]()};void 0!==Ke.serviceProps&&(0,D.ZB)(Lt,Ke.serviceProps),lt[Te]=Lt,Be.prototype[Te]=function(...zt){return this._getService.bind(this,Xe).apply(this,Ke.multipleInstances?zt:[])}}return"PUBLIC"===Ke.type?lt[Te]:null},removeApp:function en(Ke){delete rt[Ke]},useAsService:function We(Ke,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:K}};function un(Ke){if(!(0,D.r3)(rt,Ke=Ke||K._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Ke});return rt[Ke]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function Fe(){return Object.keys(rt).map(Ke=>rt[Ke])}}),un.App=Be,lt}(ue);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function rt(lt){(0,D.ZB)(Be,lt)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Be}(),ne=new ie.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=X;!function $e(Be){(0,K.registerVersion)("@firebase/app-compat","0.2.22",Be)}()},534:(yt,be,B)=>{B.r(be),B.d(be,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Qt,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>zr,_addOrOverwriteComponent:()=>fr,_apps:()=>St,_clearComponents:()=>Tt,_components:()=>Dn,_getProvider:()=>er,_registerComponent:()=>wn,_removeServiceInstance:()=>mo,deleteApp:()=>wi,getApp:()=>Ss,getApps:()=>Ii,initializeApp:()=>is,onLog:()=>_o,registerVersion:()=>Pi,setLogLevel:()=>Wr});var D=B(5861),g=B(4537),K=B(7879),ie=B(9058);const ue=(Ae,fe)=>fe.some(Ge=>Ae instanceof Ge);let oe,_e;const X=new WeakMap,ne=new WeakMap,le=new WeakMap,Pe=new WeakMap,$e=new WeakMap;let rt={get(Ae,fe,Ge){if(Ae instanceof IDBTransaction){if("done"===fe)return ne.get(Ae);if("objectStoreNames"===fe)return Ae.objectStoreNames||le.get(Ae);if("store"===fe)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return Ie(Ae[fe])},set:(Ae,fe,Ge)=>(Ae[fe]=Ge,!0),has:(Ae,fe)=>Ae instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in Ae};function un(Ae){return"function"==typeof Ae?function en(Ae){return Ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ae)?function(...fe){return Ae.apply(Fe(this),fe),Ie(X.get(this))}:function(...fe){return Ie(Ae.apply(Fe(this),fe))}:function(fe,...Ge){const pt=Ae.call(Fe(this),fe,...Ge);return le.set(pt,fe.sort?fe.sort():[fe]),Ie(pt)}}(Ae):(Ae instanceof IDBTransaction&&function Be(Ae){if(ne.has(Ae))return;const fe=new Promise((Ge,pt)=>{const bt=()=>{Ae.removeEventListener("complete",ct),Ae.removeEventListener("error",nn),Ae.removeEventListener("abort",nn)},ct=()=>{Ge(),bt()},nn=()=>{pt(Ae.error||new DOMException("AbortError","AbortError")),bt()};Ae.addEventListener("complete",ct),Ae.addEventListener("error",nn),Ae.addEventListener("abort",nn)});ne.set(Ae,fe)}(Ae),ue(Ae,function He(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ae,rt):Ae)}function Ie(Ae){if(Ae instanceof IDBRequest)return function Je(Ae){const fe=new Promise((Ge,pt)=>{const bt=()=>{Ae.removeEventListener("success",ct),Ae.removeEventListener("error",nn)},ct=()=>{Ge(Ie(Ae.result)),bt()},nn=()=>{pt(Ae.error),bt()};Ae.addEventListener("success",ct),Ae.addEventListener("error",nn)});return fe.then(Ge=>{Ge instanceof IDBCursor&&X.set(Ge,Ae)}).catch(()=>{}),$e.set(fe,Ae),fe}(Ae);if(Pe.has(Ae))return Pe.get(Ae);const fe=un(Ae);return fe!==Ae&&(Pe.set(Ae,fe),$e.set(fe,Ae)),fe}const Fe=Ae=>$e.get(Ae),Ke=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],Te=new Map;function Lt(Ae,fe){if(!(Ae instanceof IDBDatabase)||fe in Ae||"string"!=typeof fe)return;if(Te.get(fe))return Te.get(fe);const Ge=fe.replace(/FromIndex$/,""),pt=fe!==Ge,bt=Xe.includes(Ge);if(!(Ge in(pt?IDBIndex:IDBObjectStore).prototype)||!bt&&!Ke.includes(Ge))return;const ct=function(){var nn=(0,D.Z)(function*(pr,...Un){const Ci=this.transaction(pr,bt?"readwrite":"readonly");let ni=Ci.store;return pt&&(ni=ni.index(Un.shift())),(yield Promise.all([ni[Ge](...Un),bt&&Ci.done]))[0]});return function(Un){return nn.apply(this,arguments)}}();return Te.set(fe,ct),ct}!function lt(Ae){rt=Ae(rt)}(Ae=>({...Ae,get:(fe,Ge,pt)=>Lt(fe,Ge)||Ae.get(fe,Ge,pt),has:(fe,Ge)=>!!Lt(fe,Ge)||Ae.has(fe,Ge)}));class zt{constructor(fe){this.container=fe}getPlatformInfoString(){return this.container.getProviders().map(Ge=>{if(function qn(Ae){const fe=Ae.getComponent();return"VERSION"===fe?.type}(Ge)){const pt=Ge.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Ge=>Ge).join(" ")}}const ln="@firebase/app",Mn=new K.Yd("@firebase/app"),Pt="[DEFAULT]",tn={[ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,Dn=new Map;function zr(Ae,fe){try{Ae.container.addComponent(fe)}catch(Ge){Mn.debug(`Component ${fe.name} failed to register with FirebaseApp ${Ae.name}`,Ge)}}function fr(Ae,fe){Ae.container.addOrOverwriteComponent(fe)}function wn(Ae){const fe=Ae.name;if(Dn.has(fe))return Mn.debug(`There were multiple attempts to register component ${fe}.`),!1;Dn.set(fe,Ae);for(const Ge of St.values())zr(Ge,Ae);return!0}function er(Ae,fe){const Ge=Ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Ge&&Ge.triggerHeartbeat(),Ae.container.getProvider(fe)}function mo(Ae,fe,Ge=Pt){er(Ae,fe).clearInstance(Ge)}function Tt(){Dn.clear()}const Wt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Er{constructor(fe,Ge,pt){this._isDeleted=!1,this._options=Object.assign({},fe),this._config=Object.assign({},Ge),this._name=Ge.name,this._automaticDataCollectionEnabled=Ge.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new g.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(fe){this._isDeleted=fe}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}const Qt="10.5.2";function is(Ae,fe={}){let Ge=Ae;"object"!=typeof fe&&(fe={name:fe});const pt=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},fe),bt=pt.name;if("string"!=typeof bt||!bt)throw Wt.create("bad-app-name",{appName:String(bt)});if(Ge||(Ge=(0,ie.aH)()),!Ge)throw Wt.create("no-options");const ct=St.get(bt);if(ct){if((0,ie.vZ)(Ge,ct.options)&&(0,ie.vZ)(pt,ct.config))return ct;throw Wt.create("duplicate-app",{appName:bt})}const nn=new g.H0(bt);for(const Un of Dn.values())nn.addComponent(Un);const pr=new Er(Ge,pt,nn);return St.set(bt,pr),pr}function Ss(Ae=Pt){const fe=St.get(Ae);if(!fe&&Ae===Pt&&(0,ie.aH)())return is();if(!fe)throw Wt.create("no-app",{appName:Ae});return fe}function Ii(){return Array.from(St.values())}function wi(Ae){return di.apply(this,arguments)}function di(){return(di=(0,D.Z)(function*(Ae){const fe=Ae.name;St.has(fe)&&(St.delete(fe),yield Promise.all(Ae.container.getProviders().map(Ge=>Ge.delete())),Ae.isDeleted=!0)})).apply(this,arguments)}function Pi(Ae,fe,Ge){var pt;let bt=null!==(pt=tn[Ae])&&void 0!==pt?pt:Ae;Ge&&(bt+=`-${Ge}`);const ct=bt.match(/\s|\//),nn=fe.match(/\s|\//);if(ct||nn){const pr=[`Unable to register library "${bt}" with version "${fe}":`];return ct&&pr.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),ct&&nn&&pr.push("and"),nn&&pr.push(`version name "${fe}" contains illegal characters (whitespace or "/")`),void Mn.warn(pr.join(" "))}wn(new g.wA(`${bt}-version`,()=>({library:bt,version:fe}),"VERSION"))}function _o(Ae,fe){if(null!==Ae&&"function"!=typeof Ae)throw Wt.create("invalid-log-argument");(0,K.Am)(Ae,fe)}function Wr(Ae){(0,K.Ub)(Ae)}const qr="firebase-heartbeat-database",ti=1,te="firebase-heartbeat-store";let $=null;function z(){return $||($=function pe(Ae,fe,{blocked:Ge,upgrade:pt,blocking:bt,terminated:ct}={}){const nn=indexedDB.open(Ae,fe),pr=Ie(nn);return pt&&nn.addEventListener("upgradeneeded",Un=>{pt(Ie(nn.result),Un.oldVersion,Un.newVersion,Ie(nn.transaction),Un)}),Ge&&nn.addEventListener("blocked",Un=>Ge(Un.oldVersion,Un.newVersion,Un)),pr.then(Un=>{ct&&Un.addEventListener("close",()=>ct()),bt&&Un.addEventListener("versionchange",Ci=>bt(Ci.oldVersion,Ci.newVersion,Ci))}).catch(()=>{}),pr}(qr,ti,{upgrade:(Ae,fe)=>{0===fe&&Ae.createObjectStore(te)}}).catch(Ae=>{throw Wt.create("idb-open",{originalErrorMessage:Ae.message})})),$}function W(){return(W=(0,D.Z)(function*(Ae){try{return yield(yield z()).transaction(te).objectStore(te).get(tt(Ae))}catch(fe){if(fe instanceof ie.ZR)Mn.warn(fe.message);else{const Ge=Wt.create("idb-get",{originalErrorMessage:fe?.message});Mn.warn(Ge.message)}}})).apply(this,arguments)}function se(Ae,fe){return je.apply(this,arguments)}function je(){return(je=(0,D.Z)(function*(Ae,fe){try{const pt=(yield z()).transaction(te,"readwrite");yield pt.objectStore(te).put(fe,tt(Ae)),yield pt.done}catch(Ge){if(Ge instanceof ie.ZR)Mn.warn(Ge.message);else{const pt=Wt.create("idb-set",{originalErrorMessage:Ge?.message});Mn.warn(pt.message)}}})).apply(this,arguments)}function tt(Ae){return`${Ae.name}!${Ae.options.appId}`}class Mt{constructor(fe){this.container=fe,this._heartbeatsCache=null;const Ge=this.container.getProvider("app").getImmediate();this._storage=new hi(Ge),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var fe=this;return(0,D.Z)(function*(){const pt=fe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=Ht();if(null===fe._heartbeatsCache&&(fe._heartbeatsCache=yield fe._heartbeatsCachePromise),fe._heartbeatsCache.lastSentHeartbeatDate!==bt&&!fe._heartbeatsCache.heartbeats.some(ct=>ct.date===bt))return fe._heartbeatsCache.heartbeats.push({date:bt,agent:pt}),fe._heartbeatsCache.heartbeats=fe._heartbeatsCache.heartbeats.filter(ct=>{const nn=new Date(ct.date).valueOf();return Date.now()-nn<=2592e6}),fe._storage.overwrite(fe._heartbeatsCache)})()}getHeartbeatsHeader(){var fe=this;return(0,D.Z)(function*(){if(null===fe._heartbeatsCache&&(yield fe._heartbeatsCachePromise),null===fe._heartbeatsCache||0===fe._heartbeatsCache.heartbeats.length)return"";const Ge=Ht(),{heartbeatsToSend:pt,unsentEntries:bt}=function Vn(Ae,fe=1024){const Ge=[];let pt=Ae.slice();for(const bt of Ae){const ct=Ge.find(nn=>nn.agent===bt.agent);if(ct){if(ct.dates.push(bt.date),Ti(Ge)>fe){ct.dates.pop();break}}else if(Ge.push({agent:bt.agent,dates:[bt.date]}),Ti(Ge)>fe){Ge.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Ge,unsentEntries:pt}}(fe._heartbeatsCache.heartbeats),ct=(0,ie.L)(JSON.stringify({version:2,heartbeats:pt}));return fe._heartbeatsCache.lastSentHeartbeatDate=Ge,bt.length>0?(fe._heartbeatsCache.heartbeats=bt,yield fe._storage.overwrite(fe._heartbeatsCache)):(fe._heartbeatsCache.heartbeats=[],fe._storage.overwrite(fe._heartbeatsCache)),ct})()}}function Ht(){return(new Date).toISOString().substring(0,10)}class hi{constructor(fe){this.app=fe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var fe=this;return(0,D.Z)(function*(){return(yield fe._canUseIndexedDBPromise)&&(yield function H(Ae){return W.apply(this,arguments)}(fe.app))||{heartbeats:[]}})()}overwrite(fe){var Ge=this;return(0,D.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const ct=yield Ge.read();return se(Ge.app,{lastSentHeartbeatDate:null!==(pt=fe.lastSentHeartbeatDate)&&void 0!==pt?pt:ct.lastSentHeartbeatDate,heartbeats:fe.heartbeats})}})()}add(fe){var Ge=this;return(0,D.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const ct=yield Ge.read();return se(Ge.app,{lastSentHeartbeatDate:null!==(pt=fe.lastSentHeartbeatDate)&&void 0!==pt?pt:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...fe.heartbeats]})}})()}}function Ti(Ae){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Ae})).length}!function Bi(Ae){wn(new g.wA("platform-logger",fe=>new zt(fe),"PRIVATE")),wn(new g.wA("heartbeat",fe=>new Mt(fe),"PRIVATE")),Pi(ln,"0.9.22",Ae),Pi(ln,"0.9.22","esm2017"),Pi("fire-js","")}("")},4537:(yt,be,B)=>{B.d(be,{H0:()=>He,wA:()=>K,zt:()=>ue});var D=B(5861),g=B(9058);class K{constructor(X,ne,le){this.name=X,this.instanceFactory=ne,this.type=le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const ie="[DEFAULT]";class ue{constructor(X,ne){this.name=X,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const ne=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(ne)){const le=new g.BH;if(this.instancesDeferred.set(ne,le),this.isInitialized(ne)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:ne});Pe&&le.resolve(Pe)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(X){var ne;const le=this.normalizeInstanceIdentifier(X?.identifier),Pe=null!==(ne=X?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(le)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:le})}catch($e){if(Pe)return null;throw $e}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function _e(De){return"EAGER"===De.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[ne,le]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(ne);try{const $e=this.getOrInitializeService({instanceIdentifier:Pe});le.resolve($e)}catch{}}}}clearInstance(X=ie){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,D.Z)(function*(){const ne=Array.from(X.instances.values());yield Promise.all([...ne.filter(le=>"INTERNAL"in le).map(le=>le.INTERNAL.delete()),...ne.filter(le=>"_delete"in le).map(le=>le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=ie){return this.instances.has(X)}getOptions(X=ie){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:ne={}}=X,le=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(le))throw Error(`${this.name}(${le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:le,options:ne});for(const[$e,Je]of this.instancesDeferred.entries())le===this.normalizeInstanceIdentifier($e)&&Je.resolve(Pe);return Pe}onInit(X,ne){var le;const Pe=this.normalizeInstanceIdentifier(ne),$e=null!==(le=this.onInitCallbacks.get(Pe))&&void 0!==le?le:new Set;$e.add(X),this.onInitCallbacks.set(Pe,$e);const Je=this.instances.get(Pe);return Je&&X(Je,Pe),()=>{$e.delete(X)}}invokeOnInitCallbacks(X,ne){const le=this.onInitCallbacks.get(ne);if(le)for(const Pe of le)try{Pe(X,ne)}catch{}}getOrInitializeService({instanceIdentifier:X,options:ne={}}){let le=this.instances.get(X);if(!le&&this.component&&(le=this.component.instanceFactory(this.container,{instanceIdentifier:(De=X,De===ie?void 0:De),options:ne}),this.instances.set(X,le),this.instancesOptions.set(X,ne),this.invokeOnInitCallbacks(le,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,le)}catch{}var De;return le||null}normalizeInstanceIdentifier(X=ie){return this.component?this.component.multipleInstances?X:ie:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const ne=this.getProvider(X.name);if(ne.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);ne.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const ne=new ue(X,this);return this.providers.set(X,ne),ne}getProviders(){return Array.from(this.providers.values())}}},7879:(yt,be,B)=>{B.d(be,{Am:()=>De,Ub:()=>He,Yd:()=>_e,in:()=>g});const D=[];var g=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(g||{});const K={debug:g.DEBUG,verbose:g.VERBOSE,info:g.INFO,warn:g.WARN,error:g.ERROR,silent:g.SILENT},ie=g.INFO,ue={[g.DEBUG]:"log",[g.VERBOSE]:"log",[g.INFO]:"info",[g.WARN]:"warn",[g.ERROR]:"error"},oe=(X,ne,...le)=>{if(ne<X.logLevel)return;const Pe=(new Date).toISOString(),$e=ue[ne];if(!$e)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[$e](`[${Pe}]  ${X.name}:`,...le)};class _e{constructor(ne){this.name=ne,this._logLevel=ie,this._logHandler=oe,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in g))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?K[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,g.DEBUG,...ne),this._logHandler(this,g.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,g.VERBOSE,...ne),this._logHandler(this,g.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,g.INFO,...ne),this._logHandler(this,g.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,g.WARN,...ne),this._logHandler(this,g.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,g.ERROR,...ne),this._logHandler(this,g.ERROR,...ne)}}function He(X){D.forEach(ne=>{ne.setLogLevel(X)})}function De(X,ne){for(const le of D){let Pe=null;ne&&ne.level&&(Pe=K[ne.level]),le.userLogHandler=null===X?null:($e,Je,...Be)=>{const rt=Be.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch{return null}}).filter(lt=>lt).join(" ");Je>=(Pe??$e.logLevel)&&X({level:g[Je].toLowerCase(),message:rt,args:Be,type:$e.name})}}}},8290:(yt,be,B)=>{B.r(be);var D=B(5861),g=B(3106),K=B(9058),ie=B(534),ue=B(7879),oe=B(7582),_e=B(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Je=function Pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Be=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new K.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),en=new ue.Yd("@firebase/auth");function Ie(v,...h){en.logLevel<=ue.in.ERROR&&en.error(`Auth (${ie.SDK_VERSION}): ${v}`,...h)}function Fe(v,...h){throw Xe(v,...h)}function pe(v,...h){return Xe(v,...h)}function We(v,h,p){const E=Object.assign(Object.assign({},Be()),{[h]:p});return new K.LL("auth","Firebase",E).create(h,{appName:v.name})}function Ke(v,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Fe(v,"argument-error"),We(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(v,...h){if("string"!=typeof v){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(p,...E)}return rt.create(v,...h)}function Te(v,h,...p){if(!v)throw Xe(h,...p)}function Lt(v){const h="INTERNAL ASSERTION FAILED: "+v;throw Ie(h),new Error(h)}function zt(v,h){v||Lt(h)}function qn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ln(){return"http:"===ur()||"https:"===ur()}function ur(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Sr{constructor(h,p){this.shortDelay=h,this.longDelay=p,zt(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,K.uI)()||(0,K.b$)()}get(){return function Mn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ln()||(0,K.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ge(v,h){zt(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class ve{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ce=new Sr(3e4,6e4);function Oe(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Ue(v,h,p,E){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.Z)(function*(v,h,p,E,M={}){return et(v,M,(0,D.Z)(function*(){let U={},ee={};E&&("GET"===h?ee=E:U={body:JSON.stringify(E)});const ce=(0,K.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),Ve=yield v._getAdditionalHeaders();return Ve["Content-Type"]="application/json",v.languageCode&&(Ve["X-Firebase-Locale"]=v.languageCode),ve.fetch()(Ut(v,v.config.apiHost,p,ce),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function et(v,h,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,D.Z)(function*(v,h,p){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},xe),h);try{const M=new Kn(v),U=yield Promise.race([p(),M.promise]);M.clearNetworkTimeout();const ee=yield U.json();if("needConfirmation"in ee)throw Rn(v,"account-exists-with-different-credential",ee);if(U.ok&&!("errorMessage"in ee))return ee;{const ce=U.ok?ee.errorMessage:ee.error.message,[Ve,ot]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Rn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Ve)throw Rn(v,"email-already-in-use",ee);if("USER_DISABLED"===Ve)throw Rn(v,"user-disabled",ee);const ft=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw We(v,ft,ot);Fe(v,ft)}}catch(M){if(M instanceof K.ZR)throw M;Fe(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function At(v,h,p,E){return cn.apply(this,arguments)}function cn(){return(cn=(0,D.Z)(function*(v,h,p,E,M={}){const U=yield Ue(v,h,p,E,M);return"mfaPendingCredential"in U&&Fe(v,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function Ut(v,h,p,E){const M=`${h}${p}?${E}`;return v.config.emulator?ge(v.config,M):`${v.config.apiScheme}://${M}`}function Nn(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(pe(this.auth,"network-request-failed")),Ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(v,h,p){const E={appName:v.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const M=pe(v,h,E);return M.customData._tokenResponse=p,M}function In(v){return void 0!==v&&void 0!==v.getResponse}function wt(v){return void 0!==v&&void 0!==v.enterprise}class yr{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===h)return Nn(p.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function vr(){return(vr=(0,D.Z)(function*(v){return(yield Ue(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function On(v,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,D.Z)(function*(v,h){return Ue(v,"GET","/v2/recaptchaConfig",Oe(v,h))})).apply(this,arguments)}function Pt(){return(Pt=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function St(){return(St=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zr(){return(zr=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function fr(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function mo(){return(mo=(0,D.Z)(function*(v,h=!1){const p=(0,K.m9)(v),E=yield p.getIdToken(h),M=rs(E);Te(M&&M.exp&&M.auth_time&&M.iat,p.auth,"internal-error");const U="object"==typeof M.firebase?M.firebase:void 0,ee=U?.sign_in_provider;return{claims:M,token:E,authTime:fr(Tt(M.auth_time)),issuedAtTime:fr(Tt(M.iat)),expirationTime:fr(Tt(M.exp)),signInProvider:ee||null,signInSecondFactor:U?.sign_in_second_factor||null}})).apply(this,arguments)}function Tt(v){return 1e3*Number(v)}function rs(v){const[h,p,E]=v.split(".");if(void 0===h||void 0===p||void 0===E)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,K.tV)(p);return M?JSON.parse(M):(Ie("Failed to decode base64 JWT payload"),null)}catch(M){return Ie("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Er(v,h){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,D.Z)(function*(v,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof K.ZR&&function is({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Ss{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,D.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,D.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class Ii{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wi(v){return di.apply(this,arguments)}function di(){return di=(0,D.Z)(function*(v){var h;const p=v.auth,E=yield v.getIdToken(),M=yield Er(v,function Dn(v,h){return zr.apply(this,arguments)}(p,{idToken:E}));Te(M?.users.length,p,"internal-error");const U=M.users[0];v._notifyReloadListener(U);const ee=null!==(h=U.providerUserInfo)&&void 0!==h&&h.length?function qr(v){return v.map(h=>{var{providerId:p}=h,E=(0,oe._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(U.providerUserInfo):[],ce=function Wr(v,h){return[...v.filter(E=>!h.some(M=>M.providerId===E.providerId)),...h]}(v.providerData,ee),ft=!!v.isAnonymous&&!(v.email&&U.passwordHash||ce?.length),vt={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:ce,metadata:new Ii(U.createdAt,U.lastLoginAt),isAnonymous:ft};Object.assign(v,vt)}),di.apply(this,arguments)}function _o(){return(_o=(0,D.Z)(function*(v){const h=(0,K.m9)(v);yield wi(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function te(){return(te=(0,D.Z)(function*(v,h){const p=yield et(v,{},(0,D.Z)(function*(){const E=(0,K.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:M,apiKey:U}=v.config,ee=Ut(v,M,"/v1/token",`key=${U}`),ce=yield v._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",ve.fetch()(ee,{method:"POST",headers:ce,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Te(h.idToken,"internal-error"),Te(typeof h.idToken<"u","internal-error"),Te(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Wt(v){const h=rs(v);return Te(h,"internal-error"),Te(typeof h.exp<"u","internal-error"),Te(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,D.Z)(function*(){return Te(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,D.Z)(function*(){const{accessToken:M,refreshToken:U,expiresIn:ee}=yield function ti(v,h){return te.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(M,U,Number(ee))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:M,expirationTime:U}=p,ee=new $;return E&&(Te("string"==typeof E,"internal-error",{appName:h}),ee.refreshToken=E),M&&(Te("string"==typeof M,"internal-error",{appName:h}),ee.accessToken=M),U&&(Te("number"==typeof U,"internal-error",{appName:h}),ee.expirationTime=U),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return Lt("not implemented")}}function z(v,h){Te("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class H{constructor(h){var{uid:p,auth:E,stsTokenManager:M}=h,U=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ss(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new Ii(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,D.Z)(function*(){const E=yield Er(p,p.stsTokenManager.getToken(p.auth,h));return Te(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function er(v){return mo.apply(this,arguments)}(this,h)}reload(){return function Pi(v){return _o.apply(this,arguments)}(this)}_assign(h){this!==h&&(Te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new H(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,D.Z)(function*(){let M=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),M=!0),p&&(yield wi(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,D.Z)(function*(){const p=yield h.getIdToken();return yield Er(h,function Hn(v,h){return Pt.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,M,U,ee,ce,Ve,ot,ft;const vt=null!==(E=p.displayName)&&void 0!==E?E:void 0,ae=null!==(M=p.email)&&void 0!==M?M:void 0,_s=null!==(U=p.phoneNumber)&&void 0!==U?U:void 0,es=null!==(ee=p.photoURL)&&void 0!==ee?ee:void 0,Sd=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,Ra=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,Ao=null!==(ot=p.createdAt)&&void 0!==ot?ot:void 0,t_=null!==(ft=p.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:Pa,emailVerified:Rd,isAnonymous:Pd,providerData:xa,stsTokenManager:Xp}=p;Te(Pa&&Xp,h,"internal-error");const ys=$.fromJSON(this.name,Xp);Te("string"==typeof Pa,h,"internal-error"),z(vt,h.name),z(ae,h.name),Te("boolean"==typeof Rd,h,"internal-error"),Te("boolean"==typeof Pd,h,"internal-error"),z(_s,h.name),z(es,h.name),z(Sd,h.name),z(Ra,h.name),z(Ao,h.name),z(t_,h.name);const El=new H({uid:Pa,auth:h,email:ae,emailVerified:Rd,displayName:vt,isAnonymous:Pd,photoURL:es,phoneNumber:_s,tenantId:Sd,stsTokenManager:ys,createdAt:Ao,lastLoginAt:t_});return xa&&Array.isArray(xa)&&(El.providerData=xa.map(nf=>Object.assign({},nf))),Ra&&(El._redirectEventId=Ra),El}static _fromIdTokenResponse(h,p,E=!1){return(0,D.Z)(function*(){const M=new $;M.updateFromServerResponse(p);const U=new H({uid:p.localId,auth:h,stsTokenManager:M,isAnonymous:E});return yield wi(U),U})()}}const W=new Map;function se(v){zt(v instanceof Function,"Expected a class definition");let h=W.get(v);return h?(zt(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,W.set(v,h),h)}const tt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(p,E){var M=this;return(0,D.Z)(function*(){M.storage[p]=E})()}_get(p){var E=this;return(0,D.Z)(function*(){const M=E.storage[p];return void 0===M?null:M})()}_remove(p){var E=this;return(0,D.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return v.type="NONE",v})();function Et(v,h,p){return`firebase:${v}:${h}:${p}`}class xt{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:M,name:U}=this.auth;this.fullUserKey=Et(this.userKey,M.apiKey,U),this.fullPersistenceKey=Et("persistence",M.apiKey,U),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,D.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?H._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,D.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,D.Z)(function*(){if(!p.length)return new xt(se(tt),h,E);const M=(yield Promise.all(p.map(function(){var ot=(0,D.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let U=M[0]||se(tt);const ee=Et(E,h.config.apiKey,h.name);let ce=null;for(const ot of p)try{const ft=yield ot._get(ee);if(ft){const vt=H._fromJSON(h,ft);ot!==U&&(ce=vt),U=ot;break}}catch{}const Ve=M.filter(ot=>ot._shouldAllowMigration);return U._shouldAllowMigration&&Ve.length?(U=Ve[0],ce&&(yield U._set(ee,ce.toJSON())),yield Promise.all(p.map(function(){var ot=(0,D.Z)(function*(ft){if(ft!==U)try{yield ft._remove(ee)}catch{}});return function(ft){return ot.apply(this,arguments)}}())),new xt(U,h,E)):new xt(U,h,E)})()}}function Mt(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ti(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ht(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ae(h))return"Blackberry";if(fe(h))return"Webos";if(Vn(h))return"Safari";if((h.includes("chrome/")||hi(h))&&!h.includes("edge/"))return"Chrome";if(Bi(h))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ht(v=(0,K.z$)()){return/firefox\//i.test(v)}function Vn(v=(0,K.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function hi(v=(0,K.z$)()){return/crios\//i.test(v)}function Ti(v=(0,K.z$)()){return/iemobile/i.test(v)}function Bi(v=(0,K.z$)()){return/android/i.test(v)}function Ae(v=(0,K.z$)()){return/blackberry/i.test(v)}function fe(v=(0,K.z$)()){return/webos/i.test(v)}function Ge(v=(0,K.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function nn(v=(0,K.z$)()){return Ge(v)||Bi(v)||fe(v)||Ae(v)||/windows phone/i.test(v)||Ti(v)}function Un(v,h=[]){let p;switch(v){case"Browser":p=Mt((0,K.z$)());break;case"Worker":p=`${Mt((0,K.z$)())}-${v}`;break;default:p=v}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${E}`}class Ci{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const E=U=>new Promise((ee,ce)=>{try{ee(h(U))}catch(Ve){ce(Ve)}});E.onAbort=p,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,D.Z)(function*(){if(p.auth.currentUser===h)return;const E=[];try{for(const M of p.queue)yield M(h),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const U of E)try{U()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function ji(){return(ji=(0,D.Z)(function*(v,h={}){return Ue(v,"GET","/v2/passwordPolicy",Oe(v,h))})).apply(this,arguments)}class td{constructor(h){var p,E,M,U;const ee=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ee.minPasswordLength)&&void 0!==p?p:6,ee.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ee.maxPasswordLength),void 0!==ee.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ee.containsLowercaseCharacter),void 0!==ee.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ee.containsUppercaseCharacter),void 0!==ee.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ee.containsNumericCharacter),void 0!==ee.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ee.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(E=h.allowedNonAlphanumericCharacters)||void 0===E?void 0:E.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(U=h.forceUpgradeOnSignin)&&void 0!==U&&U,this.schemaVersion=h.schemaVersion}validatePassword(h){var p,E,M,U,ee,ce;const Ve={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Ve),this.validatePasswordCharacterOptions(h,Ve),Ve.isValid&&(Ve.isValid=null===(p=Ve.meetsMinPasswordLength)||void 0===p||p),Ve.isValid&&(Ve.isValid=null===(E=Ve.meetsMaxPasswordLength)||void 0===E||E),Ve.isValid&&(Ve.isValid=null===(M=Ve.containsLowercaseLetter)||void 0===M||M),Ve.isValid&&(Ve.isValid=null===(U=Ve.containsUppercaseLetter)||void 0===U||U),Ve.isValid&&(Ve.isValid=null===(ee=Ve.containsNumericCharacter)||void 0===ee||ee),Ve.isValid&&(Ve.isValid=null===(ce=Ve.containsNonAlphanumericCharacter)||void 0===ce||ce),Ve}validatePasswordLengthOptions(h,p){const E=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;E&&(p.meetsMinPasswordLength=h.length>=E),M&&(p.meetsMaxPasswordLength=h.length<=M)}validatePasswordCharacterOptions(h,p){let E;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let M=0;M<h.length;M++)E=h.charAt(M),this.updatePasswordCharacterOptionsStatuses(p,E>="a"&&E<="z",E>="A"&&E<="Z",E>="0"&&E<="9",this.allowedNonAlphanumericCharacters.includes(E))}updatePasswordCharacterOptionsStatuses(h,p,E,M,U){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=E)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=U))}}class No{constructor(h,p,E,M){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hl(this),this.idTokenSubscription=new Hl(this),this.beforeStateQueue=new Ci(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=se(p)),this._initializationPromise=this.queue((0,D.Z)(function*(){var M,U;if(!E._deleted&&(E.persistenceManager=yield xt.create(E,h),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(U=E.currentUser)||void 0===U?void 0:U.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,D.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,D.Z)(function*(){var E;const M=yield p.assertedPersistence.getCurrentUser();let U=M,ee=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Ve=U?._redirectEventId,ot=yield p.tryRedirectSignIn(h);(!ce||ce===Ve)&&ot?.user&&(U=ot.user,ee=!0)}if(!U)return p.directlySetCurrentUser(null);if(!U._redirectEventId){if(ee)try{yield p.beforeStateQueue.runMiddleware(U)}catch(ce){U=M,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return U?p.reloadAndSetCurrentUserOrClear(U):p.directlySetCurrentUser(null)}return Te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===U._redirectEventId?p.directlySetCurrentUser(U):p.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(h){var p=this;return(0,D.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,D.Z)(function*(){try{yield wi(h)}catch(E){if("auth/network-request-failed"!==E?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function bs(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,D.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,D.Z)(function*(){const E=h?(0,K.m9)(h):null;return E&&Te(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h,p=!1){var E=this;return(0,D.Z)(function*(){if(!E._deleted)return h&&Te(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,D.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,D.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,D.Z)(function*(){yield p.assertedPersistence.setPersistence(se(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var p=this;return(0,D.Z)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const E=p._getPasswordPolicyInternal();return E.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):E.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,D.Z)(function*(){const p=yield function ni(v){return ji.apply(this,arguments)}(h),E=new td(p);null===h.tenantId?h._projectPasswordPolicy=E:h._tenantPasswordPolicies[h.tenantId]=E})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new K.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}authStateReady(){return new Promise((h,p)=>{if(this.currentUser)h();else{const E=this.onAuthStateChanged(()=>{E(),h()},p)}})}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,D.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(p);return null===h?M.removeCurrentUser():M.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,D.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&se(h)||p._popupRedirectResolver;Te(E,p,"argument-error"),p.redirectPersistenceManager=yield xt.create(p,[se(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,D.Z)(function*(){var E,M;return p._isInitialized&&(yield p.queue((0,D.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(M=p.redirectUser)||void 0===M?void 0:M._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,D.Z)(function*(){if(h===p.currentUser)return p.queue((0,D.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,M){if(this._deleted)return()=>{};const U="function"==typeof p?p:p.next.bind(p);let ee=!1;const ce=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(ce,this,"internal-error"),ce.then(()=>{ee||U(this.currentUser)}),"function"==typeof p){const Ve=h.addObserver(p,E,M);return()=>{ee=!0,Ve()}}{const Ve=h.addObserver(p);return()=>{ee=!0,Ve()}}}directlySetCurrentUser(h){var p=this;return(0,D.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,D.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const M=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();M&&(E["X-Firebase-Client"]=M);const U=yield h._getAppCheckToken();return U&&(E["X-Firebase-AppCheck"]=U),E})()}_getAppCheckToken(){var h=this;return(0,D.Z)(function*(){var p;const E=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return E?.error&&function un(v,...h){en.logLevel<=ue.in.WARN&&en.warn(`Auth (${ie.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function An(v){return(0,K.m9)(v)}class Hl{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,K.ne)(p=>this.observer=p)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ws(v){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=h,E.onerror=M=>{const U=pe("internal-error");U.customData=M,p(U)},E.type="text/javascript",E.charset="UTF-8",function da(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(E)})}function Oo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Wa{constructor(h){this.type="recaptcha-enterprise",this.auth=An(h)}verify(h="verify",p=!1){var E=this;return(0,D.Z)(function*(){function U(){return U=(0,D.Z)(function*(ce){if(!p){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var Ve=(0,D.Z)(function*(ot,ft){On(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vt=>{if(void 0!==vt.recaptchaKey){const ae=new yr(vt);return null==ce.tenantId?ce._agentRecaptchaConfig=ae:ce._tenantRecaptchaConfigs[ce.tenantId]=ae,ot(ae.siteKey)}ft(new Error("recaptcha Enterprise site key undefined"))}).catch(vt=>{ft(vt)})});return function(ot,ft){return Ve.apply(this,arguments)}}())}),U.apply(this,arguments)}function ee(ce,Ve,ot){const ft=window.grecaptcha;wt(ft)?ft.enterprise.ready(()=>{ft.enterprise.execute(ce,{action:h}).then(vt=>{Ve(vt)}).catch(()=>{Ve("NO_RECAPTCHA")})}):ot(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,Ve)=>{(function M(ce){return U.apply(this,arguments)})(E.auth).then(ot=>{if(!p&&wt(window.grecaptcha))ee(ot,ce,Ve);else{if(typeof window>"u")return void Ve(new Error("RecaptchaVerifier is only supported in browser"));Ws("https://www.google.com/recaptcha/enterprise.js?render="+ot).then(()=>{ee(ot,ce,Ve)}).catch(ft=>{Ve(ft)})}}).catch(ot=>{Ve(ot)})})})()}}function ri(v,h,p){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,D.Z)(function*(v,h,p,E=!1){const M=new Wa(v);let U;try{U=yield M.verify(p)}catch{U=yield M.verify(p,!0)}const ee=Object.assign({},h);return Object.assign(ee,E?{captchaResp:U}:{captchaResponse:U}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}function Ir(v,h,p,E){return Lo.apply(this,arguments)}function Lo(){return Lo=(0,D.Z)(function*(v,h,p,E){var M;if(null!==(M=v._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const U=yield ri(v,h,p,"getOobCode"===p);return E(v,U)}return E(v,h).catch(function(){var U=(0,D.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ce=yield ri(v,h,p,"getOobCode"===p);return E(v,ce)}return Promise.reject(ee)});return function(ee){return U.apply(this,arguments)}}())}),Lo.apply(this,arguments)}function $i(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Gl(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Fo{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Lt("not implemented")}_getIdTokenResponse(h){return Lt("not implemented")}_linkToIdToken(h,p){return Lt("not implemented")}_getReauthenticationResolver(h){return Lt("not implemented")}}function Gu(v,h){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:resetPassword",Oe(v,h))})).apply(this,arguments)}function zu(v,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ha(){return(ha=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",Oe(v,h))})).apply(this,arguments)}function an(v,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithPassword",Oe(v,h))})).apply(this,arguments)}function Zr(v,h){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:sendOobCode",Oe(v,h))})).apply(this,arguments)}function Bo(){return(Bo=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function Ka(v,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function Gi(v,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function it(){return(it=(0,D.Z)(function*(v,h){return Zr(v,h)})).apply(this,arguments)}function fn(){return(fn=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithEmailLink",Oe(v,h))})).apply(this,arguments)}function jo(){return(jo=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithEmailLink",Oe(v,h))})).apply(this,arguments)}class Gn extends Fo{constructor(h,p,E,M=null){super("password",E),this._email=h,this._password=p,this._tenantId=M}static _fromEmailAndPassword(h,p){return new Gn(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new Gn(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,D.Z)(function*(){switch(p.signInMethod){case"password":return Ir(h,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",an);case"emailLink":return function jt(v,h){return fn.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Fe(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,D.Z)(function*(){switch(E.signInMethod){case"password":return zu(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Kr(v,h){return jo.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:Fe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Yr(v,h){return kn.apply(this,arguments)}function kn(){return(kn=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithIdp",Oe(v,h))})).apply(this,arguments)}class Ur extends Fo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Ur(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Fe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:M}=p,U=(0,oe._T)(p,["providerId","signInMethod"]);if(!E||!M)return null;const ee=new Ur(E,M);return ee.idToken=U.idToken||void 0,ee.accessToken=U.accessToken||void 0,ee.secret=U.secret,ee.nonce=U.nonce,ee.pendingToken=U.pendingToken||null,ee}_getIdTokenResponse(h){return Yr(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Yr(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Yr(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,K.xO)(p)}return h}}function qs(){return(qs=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:sendVerificationCode",Oe(v,h))})).apply(this,arguments)}function as(){return(as=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithPhoneNumber",Oe(v,h))})).apply(this,arguments)}function Eo(){return(Eo=(0,D.Z)(function*(v,h){const p=yield At(v,"POST","/v1/accounts:signInWithPhoneNumber",Oe(v,h));if(p.temporaryProof)throw Rn(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const us={USER_NOT_FOUND:"user-not-found"};function Ns(){return(Ns=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithPhoneNumber",Oe(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),us)})).apply(this,arguments)}class Os extends Fo{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Os({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Os({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ya(v,h){return as.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function dr(v,h){return Eo.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Ms(v,h){return Ns.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:M}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:M}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:M,temporaryProof:U}=h;return E||p||M||U?new Os({verificationId:p,verificationCode:E,phoneNumber:M,temporaryProof:U}):null}}class Br{constructor(h){var p,E,M,U,ee,ce;const Ve=(0,K.zd)((0,K.pd)(h)),ot=null!==(p=Ve.apiKey)&&void 0!==p?p:null,ft=null!==(E=Ve.oobCode)&&void 0!==E?E:null,vt=function ls(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ve.mode)&&void 0!==M?M:null);Te(ot&&ft&&vt,"argument-error"),this.apiKey=ot,this.operation=vt,this.code=ft,this.continueUrl=null!==(U=Ve.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(ee=Ve.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(ce=Ve.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function cs(v){const h=(0,K.zd)((0,K.pd)(v)).link,p=h?(0,K.zd)((0,K.pd)(h)).deep_link_id:null,E=(0,K.zd)((0,K.pd)(v)).deep_link_id;return(E?(0,K.zd)((0,K.pd)(E)).link:null)||E||p||h||v}(h);try{return new Br(p)}catch{return null}}}let Zt=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,E){return Gn._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const M=Br.parseLink(E);return Te(M,"argument-error"),Gn._fromEmailAndCode(p,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Zs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ks extends Zs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ks extends Ks{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return Te("providerId"in p&&"signInMethod"in p,"argument-error"),Ur._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Te(h.idToken||h.accessToken,"argument-error"),Ur._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ks.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ks.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:U,nonce:ee,providerId:ce}=h;if(!E&&!M&&!p&&!U||!ce)return null;try{return new ks(ce)._credential({idToken:p,accessToken:E,nonce:ee,pendingToken:U})}catch{return null}}}let ds=(()=>{class v extends Ks{constructor(){super("facebook.com")}static credential(p){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),fa=(()=>{class v extends Ks{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:M}=p;if(!E&&!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ys=(()=>{class v extends Ks{constructor(){super("github.com")}static credential(p){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class tr extends Fo{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Yr(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Yr(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Yr(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:M,pendingToken:U}=p;return E&&M&&U&&E===M?new tr(E,U):null}static _create(h,p){return new tr(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gr extends Zs{constructor(h){Te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return gr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return gr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=tr.fromJSON(h);return Te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return tr._create(E,p)}catch{return null}}}let Ln=(()=>{class v extends Ks{constructor(){super("twitter.com")}static credential(p,E){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=p;if(!E||!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function pa(v,h){return xi.apply(this,arguments)}function xi(){return(xi=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signUp",Oe(v,h))})).apply(this,arguments)}class fi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,M=!1){return(0,D.Z)(function*(){const U=yield H._fromIdTokenResponse(h,E,M),ee=zi(E);return new fi({user:U,providerId:ee,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,D.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const M=zi(E);return new fi({user:h,providerId:M,_tokenResponse:E,operationType:p})})()}}function zi(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Wu(){return(Wu=(0,D.Z)(function*(v){var h;const p=An(v);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new fi({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield pa(p,{returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(M.user),M})).apply(this,arguments)}class Io extends K.ZR{constructor(h,p,E,M){var U;super(p.code,p.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Io.prototype),this.customData={appName:h.name,tenantId:null!==(U=h.tenantId)&&void 0!==U?U:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,M){return new Io(h,p,E,M)}}function mh(v,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?Io._fromErrorAndOperation(v,U,h,E):U})}function nd(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function ma(){return ma=(0,D.Z)(function*(v,h){const p=(0,K.m9)(v);yield Pn(!0,p,h);const{providerUserInfo:E}=yield function tn(v,h){return St.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),M=nd(E||[]);return p.providerData=p.providerData.filter(U=>M.has(U.providerId)),M.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),ma.apply(this,arguments)}function _h(v,h){return yh.apply(this,arguments)}function yh(){return(yh=(0,D.Z)(function*(v,h,p=!1){const E=yield Er(v,h._linkToIdToken(v.auth,yield v.getIdToken()),p);return fi._forOperation(v,"link",E)})).apply(this,arguments)}function Pn(v,h,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,D.Z)(function*(v,h,p){yield wi(h);const M=!1===v?"provider-already-linked":"no-such-provider";Te(nd(h.providerData).has(p)===v,h.auth,M)})).apply(this,arguments)}function vh(v,h){return rd.apply(this,arguments)}function rd(){return(rd=(0,D.Z)(function*(v,h,p=!1){const{auth:E}=v,M="reauthenticate";try{const U=yield Er(v,mh(E,M,h,v),p);Te(U.idToken,E,"internal-error");const ee=rs(U.idToken);Te(ee,E,"internal-error");const{sub:ce}=ee;return Te(v.uid===ce,E,"user-mismatch"),fi._forOperation(v,M,U)}catch(U){throw"auth/user-not-found"===U?.code&&Fe(E,"user-mismatch"),U}})).apply(this,arguments)}function pi(v,h){return eu.apply(this,arguments)}function eu(){return(eu=(0,D.Z)(function*(v,h,p=!1){const E="signIn",M=yield mh(v,E,h),U=yield fi._fromIdTokenResponse(v,E,M);return p||(yield v._updateCurrentUser(U.user)),U})).apply(this,arguments)}function _a(v,h){return id.apply(this,arguments)}function id(){return(id=(0,D.Z)(function*(v,h){return pi(An(v),h)})).apply(this,arguments)}function Eh(v,h){return qu.apply(this,arguments)}function qu(){return(qu=(0,D.Z)(function*(v,h){const p=(0,K.m9)(v);return yield Pn(!1,p,h.providerId),_h(p,h)})).apply(this,arguments)}function Zu(v,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,D.Z)(function*(v,h){return vh((0,K.m9)(v),h)})).apply(this,arguments)}function Wl(){return(Wl=(0,D.Z)(function*(v,h){return At(v,"POST","/v1/accounts:signInWithCustomToken",Oe(v,h))})).apply(this,arguments)}function Mi(){return Mi=(0,D.Z)(function*(v,h){const p=An(v),E=yield function Ho(v,h){return Wl.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),M=yield fi._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(M.user),M}),Mi.apply(this,arguments)}class Wi{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?sd._fromServerResponse(h,p):"totpInfo"in p?wr._fromServerResponse(h,p):Fe(h,"internal-error")}}class sd extends Wi{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new sd(p)}}class wr extends Wi{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new wr(p)}}function hs(v,h,p){var E;Te((null===(E=p.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Te(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Te(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(Te(p.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Tr(v){return nu.apply(this,arguments)}function nu(){return(nu=(0,D.Z)(function*(v){const h=An(v);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ru(){return(ru=(0,D.Z)(function*(v,h,p){const E=An(v),M={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};p&&hs(E,M,p),yield Ir(E,M,"getOobCode",Ka)})).apply(this,arguments)}function ya(){return ya=(0,D.Z)(function*(v,h,p){yield Gu((0,K.m9)(v),{oobCode:h,newPassword:p}).catch(function(){var E=(0,D.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Tr(v),M});return function(M){return E.apply(this,arguments)}}())}),ya.apply(this,arguments)}function va(){return va=(0,D.Z)(function*(v,h){yield function Uo(v,h){return ha.apply(this,arguments)}((0,K.m9)(v),{oobCode:h})}),va.apply(this,arguments)}function Ku(v,h){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,D.Z)(function*(v,h){const p=(0,K.m9)(v),E=yield Gu(p,{oobCode:h}),M=E.requestType;switch(Te(M,p,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(E.mfaInfo,p,"internal-error");default:Te(E.email,p,"internal-error")}let U=null;return E.mfaInfo&&(U=Wi._fromServerResponse(An(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:U},operation:M}})).apply(this,arguments)}function Rr(){return(Rr=(0,D.Z)(function*(v,h){const{data:p}=yield Ku((0,K.m9)(v),h);return p.email})).apply(this,arguments)}function hr(){return(hr=(0,D.Z)(function*(v,h,p){const E=An(v),ee=yield Ir(E,{returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pa).catch(Ve=>{throw"auth/password-does-not-meet-requirements"===Ve.code&&Tr(v),Ve}),ce=yield fi._fromIdTokenResponse(E,"signIn",ee);return yield E._updateCurrentUser(ce.user),ce})).apply(this,arguments)}function Ni(){return(Ni=(0,D.Z)(function*(v,h,p){const E=An(v),M={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function U(ee,ce){Te(ce.handleCodeInApp,E,"argument-error"),ce&&hs(E,ee,ce)})(M,p),yield Ir(E,M,"getOobCode",Gi)})).apply(this,arguments)}function Ft(){return(Ft=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v),M=Zt.credentialWithLink(h,p||qn());return Te(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),_a(E,M)})).apply(this,arguments)}function Ea(){return(Ea=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:createAuthUri",Oe(v,h))})).apply(this,arguments)}function zo(){return zo=(0,D.Z)(function*(v,h){const E={identifier:h,continueUri:ln()?qn():"http://localhost"},{signinMethods:M}=yield function Qu(v,h){return Ea.apply(this,arguments)}((0,K.m9)(v),E);return M||[]}),zo.apply(this,arguments)}function iu(){return iu=(0,D.Z)(function*(v,h){const p=(0,K.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&hs(p.auth,M,h);const{email:U}=yield function Vr(v,h){return Bo.apply(this,arguments)}(p.auth,M);U!==v.email&&(yield v.reload())}),iu.apply(this,arguments)}function Cr(){return Cr=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};p&&hs(E.auth,U,p);const{email:ee}=yield function $n(v,h){return it.apply(this,arguments)}(E.auth,U);ee!==v.email&&(yield v.reload())}),Cr.apply(this,arguments)}function A(){return(A=(0,D.Z)(function*(v,h){return Ue(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function x(){return x=(0,D.Z)(function*(v,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,K.m9)(v),U={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},ee=yield Er(E,function su(v,h){return A.apply(this,arguments)}(E.auth,U));E.displayName=ee.displayName||null,E.photoURL=ee.photoUrl||null;const ce=E.providerData.find(({providerId:Ve})=>"password"===Ve);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ee)}),x.apply(this,arguments)}function Ee(v,h,p){return Se.apply(this,arguments)}function Se(){return(Se=(0,D.Z)(function*(v,h,p){const{auth:E}=v,U={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(U.email=h),p&&(U.password=p);const ee=yield Er(v,zu(E,U));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class rn{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class dn extends rn{constructor(h,p,E,M){super(h,p,E),this.username=M}}class Kt extends rn{constructor(h,p){super(h,"facebook.com",p)}}class qt extends dn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class nr extends rn{constructor(h,p){super(h,"google.com",p)}}class xn extends dn{constructor(h,p,E){super(h,"twitter.com",p,E)}}function Fn(v){const{user:h,_tokenResponse:p}=v;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function It(v){var h,p;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},U=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ee=null===(p=null===(h=rs(v.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(ee)return new rn(U,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!E)return null;switch(E){case"facebook.com":return new Kt(U,M);case"github.com":return new qt(U,M);case"google.com":return new nr(U,M);case"twitter.com":return new xn(U,M,v.screenName||null);case"custom":case"anonymous":return new rn(U,null);default:return new rn(U,E,M)}}(p)}class Ls{constructor(h,p,E){this.type=h,this.credential=p,this.user=E}static _fromIdtoken(h,p){return new Ls("enroll",h,p)}static _fromMfaPendingCredential(h){return new Ls("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Ls._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(E=h.multiFactorSession)&&void 0!==E&&E.idToken)return Ls._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Zl{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=An(h),M=p.customData._serverResponse,U=(M.mfaInfo||[]).map(ce=>Wi._fromServerResponse(E,ce));Te(M.mfaPendingCredential,E,"internal-error");const ee=Ls._fromMfaPendingCredential(M.mfaPendingCredential);return new Zl(ee,U,function(){var ce=(0,D.Z)(function*(Ve){const ot=yield Ve._process(E,ee);delete M.mfaInfo,delete M.mfaPendingCredential;const ft=Object.assign(Object.assign({},M),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(p.operationType){case"signIn":const vt=yield fi._fromIdTokenResponse(E,p.operationType,ft);return yield E._updateCurrentUser(vt.user),vt;case"reauthenticate":return Te(p.user,E,"internal-error"),fi._forOperation(p.user,p.operationType,ft);default:Fe(E,"internal-error")}});return function(Ve){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,D.Z)(function*(){return p.signInResolver(h)})()}}class el{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>Wi._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new el(h)}getSession(){var h=this;return(0,D.Z)(function*(){return Ls._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,p){var E=this;return(0,D.Z)(function*(){const M=h,U=yield E.getSession(),ee=yield Er(E.user,M._process(E.user.auth,U,p));return yield E.user._updateTokensIfNecessary(ee),E.user.reload()})()}unenroll(h){var p=this;return(0,D.Z)(function*(){const E="string"==typeof h?h:h.uid,M=yield p.user.getIdToken();try{const U=yield Er(p.user,function To(v,h){return Ue(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Oe(v,h))}(p.user.auth,{idToken:M,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ee})=>ee!==E),yield p.user._updateTokensIfNecessary(U),yield p.user.reload()}catch(U){throw U}})()}}const tl=new WeakMap,Ia="__sak";class nl{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ia,"1"),this.storage.removeItem(Ia),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zi=(()=>{class v extends nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rl(){const v=(0,K.z$)();return Vn(v)||Ge(v)}()&&function pr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=nn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),U=this.localCache[E];M!==U&&p(E,U,M)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((ce,Ve,ot)=>{this.notifyListeners(ce,ot)});const M=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(M);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(M,p.newValue):this.storage.removeItem(M);else if(this.localCache[M]===p.newValue&&!E)return}const U=()=>{const ce=this.storage.getItem(M);!E&&this.localCache[M]===ce||this.notifyListeners(M,ce)},ee=this.storage.getItem(M);!function ct(){return(0,K.w1)()&&10===document.documentMode}()||ee===p.newValue||p.newValue===p.oldValue?U():setTimeout(U,10)}notifyListeners(p,E){this.localCache[p]=E;const M=this.listeners[p];if(M)for(const U of Array.from(M))U(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var M=()=>super._set,U=this;return(0,D.Z)(function*(){yield M().call(U,p,E),U.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,M=this;return(0,D.Z)(function*(){const U=yield E().call(M,p);return M.localCache[p]=JSON.stringify(U),U})()}_remove(p){var E=()=>super._remove,M=this;return(0,D.Z)(function*(){yield E().call(M,p),delete M.localCache[p]})()}}return v.type="LOCAL",v})(),Zo=(()=>{class v extends nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return v.type="SESSION",v})();let wa=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(U=>U.isListeningto(p));if(E)return E;const M=new v(p);return this.receivers.push(M),M}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,D.Z)(function*(){const M=p,{eventId:U,eventType:ee,data:ce}=M.data,Ve=E.handlersMap[ee];if(!Ve?.size)return;M.ports[0].postMessage({status:"ack",eventId:U,eventType:ee});const ot=Array.from(Ve).map(function(){var vt=(0,D.Z)(function*(ae){return ae(M.origin,ce)});return function(ae){return vt.apply(this,arguments)}}()),ft=yield function Ch(v){return Promise.all(v.map(function(){var h=(0,D.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(ot);M.ports[0].postMessage({status:"done",eventId:U,eventType:ee,response:ft})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ta(v="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return v+p}class Dh{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var M=this;return(0,D.Z)(function*(){const U=typeof MessageChannel<"u"?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let ee,ce;return new Promise((Ve,ot)=>{const ft=Ta("",20);U.port1.start();const vt=setTimeout(()=>{ot(new Error("unsupported_event"))},E);ce={messageChannel:U,onMessage(ae){const _s=ae;if(_s.data.eventId===ft)switch(_s.data.status){case"ack":clearTimeout(vt),ee=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Ve(_s.data.response);break;default:clearTimeout(vt),clearTimeout(ee),ot(new Error("invalid_response"))}}},M.handlers.add(ce),U.port1.addEventListener("message",ce.onMessage),M.target.postMessage({eventType:h,eventId:ft,data:p},[U.port2])}).finally(()=>{ce&&M.removeMessageHandler(ce)})})()}}function rr(){return window}function il(){return typeof rr().WorkerGlobalScope<"u"&&"function"==typeof rr().importScripts}function Ot(){return(Ot=(0,D.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const si="firebaseLocalStorageDb",Ko="firebaseLocalStorage",Fs="fbase_key";class Yo{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ou(v,h){return v.transaction([Ko],h?"readwrite":"readonly").objectStore(Ko)}function au(){const v=indexedDB.open(si,1);return new Promise((h,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Ko,{keyPath:Fs})}catch(M){p(M)}}),v.addEventListener("success",(0,D.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Ko)?h(E):(E.close(),yield function Dp(){const v=indexedDB.deleteDatabase(si);return new Yo(v).toPromise()}(),h(yield au()))}))})}function Ca(v,h,p){return jr.apply(this,arguments)}function jr(){return(jr=(0,D.Z)(function*(v,h,p){const E=ou(v,!0).put({[Fs]:h,value:p});return new Yo(E).toPromise()})).apply(this,arguments)}function Yl(){return(Yl=(0,D.Z)(function*(v,h){const p=ou(v,!1).get(h),E=yield new Yo(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function to(v,h){const p=ou(v,!0).delete(h);return new Yo(p).toPromise()}const ol=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,D.Z)(function*(){return p.db||(p.db=yield au()),p.db})()}_withRetries(p){var E=this;return(0,D.Z)(function*(){let M=0;for(;;)try{const U=yield E._openDb();return yield p(U)}catch(U){if(M++>3)throw U;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,D.Z)(function*(){return il()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,D.Z)(function*(){p.receiver=wa._getInstance(function dd(){return il()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,D.Z)(function*(M,U){return{keyProcessed:(yield p._poll()).includes(U.key)}});return function(M,U){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,D.Z)(function*(M,U){return["keyChanged"]});return function(M,U){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,D.Z)(function*(){var E,M;if(p.activeServiceWorker=yield function ke(){return Ot.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Dh(p.activeServiceWorker);const U=yield p.sender._send("ping",{},800);U&&null!==(E=U[0])&&void 0!==E&&E.fulfilled&&null!==(M=U[0])&&void 0!==M&&M.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,D.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function sl(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const p=yield au();return yield Ca(p,Ia,"1"),yield to(p,Ia),!0}catch{}return!1})()}_withPendingWrite(p){var E=this;return(0,D.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var M=this;return(0,D.Z)(function*(){return M._withPendingWrite((0,D.Z)(function*(){return yield M._withRetries(U=>Ca(U,p,E)),M.localCache[p]=E,M.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,D.Z)(function*(){const M=yield E._withRetries(U=>function eo(v,h){return Yl.apply(this,arguments)}(U,p));return E.localCache[p]=M,M})()}_remove(p){var E=this;return(0,D.Z)(function*(){return E._withPendingWrite((0,D.Z)(function*(){return yield E._withRetries(M=>to(M,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,D.Z)(function*(){const E=yield p._withRetries(ee=>{const ce=ou(ee,!1).getAll();return new Yo(ce).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const M=[],U=new Set;for(const{fbase_key:ee,value:ce}of E)U.add(ee),JSON.stringify(p.localCache[ee])!==JSON.stringify(ce)&&(p.notifyListeners(ee,ce),M.push(ee));for(const ee of Object.keys(p.localCache))p.localCache[ee]&&!U.has(ee)&&(p.notifyListeners(ee,null),M.push(ee));return M})()}notifyListeners(p,E){this.localCache[p]=E;const M=this.listeners[p];if(M)for(const U of Array.from(M))U(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),S=1e12;class I{constructor(h){this.auth=h,this.counter=S,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new R(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||S;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||S))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,D.Z)(function*(){var E;return null===(E=p._widgets.get(h||S))||void 0===E||E.execute(),""})()}}class R{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof h?document.getElementById(h):h;Te(M,"argument-error",{appName:p}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function N(v){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)h.push(p.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const j=Oo("rcb"),Y=new Sr(3e4,6e4);class me{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=rr().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return Te(function at(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&In(rr().grecaptcha)?Promise.resolve(rr().grecaptcha):new Promise((E,M)=>{const U=rr().setTimeout(()=>{M(pe(h,"network-request-failed"))},Y.get());rr()[j]=()=>{rr().clearTimeout(U),delete rr()[j];const ce=rr().grecaptcha;if(!ce||!In(ce))return void M(pe(h,"internal-error"));const Ve=ce.render;ce.render=(ot,ft)=>{const vt=Ve(ot,ft);return this.counter++,vt},this.hostLanguage=p,E(ce)},Ws(`https://www.google.com/recaptcha/api.js??${(0,K.xO)({onload:j,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(U),M(pe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=rr().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $t{load(h){return(0,D.Z)(function*(){return new I(h)})()}clearedOneInstance(){}}const Jt="recaptcha",kt={theme:"light",type:"image"};class Tn{constructor(h,p,E=Object.assign({},kt)){this.parameters=E,this.type=Jt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=An(h),this.isInvisible="invisible"===this.parameters.size,Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;Te(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $t:new me,this.validateStartingState()}verify(){var h=this;return(0,D.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(U=>{const ee=ce=>{ce&&(h.tokenChangeListeners.delete(ee),U(ce))};h.tokenChangeListeners.add(ee),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=rr()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,D.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,D.Z)(function*(){Te(ln()&&!il(),h.auth,"internal-error"),yield function no(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function ns(v){return vr.apply(this,arguments)}(h.auth);Te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ro{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Os._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function io(){return(io=(0,D.Z)(function*(v,h,p){const E=An(v),M=yield Jl(E,h,(0,K.m9)(p));return new ro(M,U=>_a(E,U))})).apply(this,arguments)}function md(){return(md=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v);yield Pn(!1,E,"phone");const M=yield Jl(E.auth,h,(0,K.m9)(p));return new ro(M,U=>Eh(E,U))})).apply(this,arguments)}function so(){return(so=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v),M=yield Jl(E.auth,h,(0,K.m9)(p));return new ro(M,U=>Zu(E,U))})).apply(this,arguments)}function Jl(v,h,p){return lu.apply(this,arguments)}function lu(){return lu=(0,D.Z)(function*(v,h,p){var E;const M=yield p.verify();try{let U;if(Te("string"==typeof M,v,"argument-error"),Te(p.type===Jt,v,"argument-error"),U="string"==typeof h?{phoneNumber:h}:h,"session"in U){const ee=U.session;if("phoneNumber"in U)return Te("enroll"===ee.type,v,"internal-error"),(yield function Yn(v,h){return Ue(v,"POST","/v2/accounts/mfaEnrollment:start",Oe(v,h))}(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Te("signin"===ee.type,v,"internal-error");const ce=(null===(E=U.multiFactorHint)||void 0===E?void 0:E.uid)||U.multiFactorUid;return Te(ce,v,"missing-multi-factor-info"),(yield function Ql(v,h){return Ue(v,"POST","/v2/accounts/mfaSignIn:start",Oe(v,h))}(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Bt(v,h){return qs.apply(this,arguments)}(v,{phoneNumber:U.phoneNumber,recaptchaToken:M});return ee}}finally{p._reset()}}),lu.apply(this,arguments)}function Qo(){return(Qo=(0,D.Z)(function*(v,h){yield _h((0,K.m9)(v),h)})).apply(this,arguments)}let cu=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=An(p)}verifyPhoneNumber(p,E){return Jl(this.auth,p,(0,K.m9)(E))}static credential(p,E){return Os._fromVerification(p,E)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:M}=p;return E&&M?Os._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function du(v,h){return h?se(h):(Te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Xl extends Fo{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Yr(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Yr(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Yr(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function bh(v){return pi(v.auth,new Xl(v),v.bypassAuthState)}function hu(v){const{auth:h,user:p}=v;return Te(p,h,"internal-error"),vh(p,new Xl(v),v.bypassAuthState)}function ec(v){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,D.Z)(function*(v){const{auth:h,user:p}=v;return Te(p,h,"internal-error"),_h(p,new Xl(v),v.bypassAuthState)})).apply(this,arguments)}class zm{constructor(h,p,E,M,U=!1){this.auth=h,this.resolver=E,this.user=M,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,D.Z)(function*(E,M){h.pendingPromise={resolve:E,reject:M};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(U){h.reject(U)}});return function(E,M){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,D.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:U,tenantId:ee,error:ce,type:Ve}=h;if(ce)return void p.reject(ce);const ot={auth:p.auth,requestUri:E,sessionId:M,tenantId:ee||void 0,postBody:U||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(ot))}catch(ft){p.reject(ft)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return bh;case"linkViaPopup":case"linkViaRedirect":return ec;case"reauthViaPopup":case"reauthViaRedirect":return hu;default:Fe(this.auth,"internal-error")}}resolve(h){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bp=new Sr(2e3,1e4);function Ph(){return(Ph=(0,D.Z)(function*(v,h,p){const E=An(v);Ke(v,h,Zs);const M=du(E,p);return new cl(E,"signInViaPopup",h,M).executeNotNull()})).apply(this,arguments)}function tc(){return(tc=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v);Ke(E.auth,h,Zs);const M=du(E.auth,p);return new cl(E.auth,"reauthViaPopup",h,M,E).executeNotNull()})).apply(this,arguments)}function ll(){return(ll=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v);Ke(E.auth,h,Zs);const M=du(E.auth,p);return new cl(E.auth,"linkViaPopup",h,M,E).executeNotNull()})).apply(this,arguments)}let cl=(()=>{class v extends zm{constructor(p,E,M,U,ee){super(p,E,U,ee),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,D.Z)(function*(){const E=yield p.execute();return Te(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,D.Z)(function*(){zt(1===p.filter.length,"Popup operations only handle one event");const E=Ta();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(M=>{p.reject(M)}),p.resolver._isIframeWebStorageSupported(p.auth,M=>{M||p.reject(pe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,bp.get())};p()}}return v.currentPopupAction=null,v})();const vv="pendingRedirect",Jo=new Map;class Mh extends zm{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,D.Z)(function*(){let E=Jo.get(p.auth._key());if(!E){try{const U=(yield function Nh(v,h){return fu.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(U)}catch(M){E=()=>Promise.reject(M)}Jo.set(p.auth._key(),E)}return p.bypassAuthState||Jo.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,D.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const M=yield E.auth._redirectUserForId(h.eventId);if(M)return E.user=M,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function fu(){return(fu=(0,D.Z)(function*(v,h){const p=pu(h),E=ir(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(p));return yield E._remove(p),M})).apply(this,arguments)}function oo(v,h){return dl.apply(this,arguments)}function dl(){return(dl=(0,D.Z)(function*(v,h){return ir(v)._set(pu(h),"true")})).apply(this,arguments)}function Vs(v,h){Jo.set(v._key(),h)}function ir(v){return se(v._redirectPersistence)}function pu(v){return Et(vv,v.config.apiKey,v.name)}function hl(v,h,p){return function rc(v,h,p){return ic.apply(this,arguments)}(v,h,p)}function ic(){return(ic=(0,D.Z)(function*(v,h,p){const E=An(v);Ke(v,h,Zs),yield E._initializationPromise;const M=du(E,p);return yield oo(M,E),M._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function kh(v,h,p){return function Ev(v,h,p){return Lh.apply(this,arguments)}(v,h,p)}function Lh(){return(Lh=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v);Ke(E.auth,h,Zs),yield E.auth._initializationPromise;const M=du(E.auth,p);yield oo(M,E.auth);const U=yield _u(E);return M._openRedirect(E.auth,h,"reauthViaRedirect",U)})).apply(this,arguments)}function Wm(v,h,p){return function qm(v,h,p){return gu.apply(this,arguments)}(v,h,p)}function gu(){return(gu=(0,D.Z)(function*(v,h,p){const E=(0,K.m9)(v);Ke(E.auth,h,Zs),yield E.auth._initializationPromise;const M=du(E.auth,p);yield Pn(!1,E,h.providerId),yield oo(M,E.auth);const U=yield _u(E);return M._openRedirect(E.auth,h,"linkViaRedirect",U)})).apply(this,arguments)}function fl(){return(fl=(0,D.Z)(function*(v,h){return yield An(v)._initializationPromise,Co(v,h,!1)})).apply(this,arguments)}function Co(v,h){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,D.Z)(function*(v,h,p=!1){const E=An(v),M=du(E,h),ee=yield new Mh(E,M,p).execute();return ee&&!p&&(delete ee.user._redirectEventId,yield E._persistUserIfCurrent(ee.user),yield E._setRedirectUser(null,h)),ee})).apply(this,arguments)}function _u(v){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,D.Z)(function*(v){const h=Ta(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class Sp{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Pp(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rp(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!Rp(h)){const M=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(pe(this.auth,M))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ki(h))}saveEventToCache(h){this.cachedEventUids.add(ki(h)),this.lastProcessedEventTime=Date.now()}}function ki(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Rp({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function sc(v){return yd.apply(this,arguments)}function yd(){return(yd=(0,D.Z)(function*(v,h={}){return Ue(v,"GET","/v1/projects",h)})).apply(this,arguments)}const xp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uh=/^https?/;function yu(){return(yu=(0,D.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield sc(v);for(const p of h)try{if(ac(p))return}catch{}Fe(v,"unauthorized-domain")})).apply(this,arguments)}function ac(v){const h=qn(),{protocol:p,hostname:E}=new URL(h);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===E?"chrome-extension:"===p&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&ee.hostname===E}if(!Uh.test(p))return!1;if(xp.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const Zm=new Sr(3e4,6e4);function pl(){const v=rr().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let uc=null;const Iv=new Sr(5e3,15e3),Bh="__/auth/iframe",jh="emulator/auth/iframe",aw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wv(v){const h=v.config;Te(h.authDomain,v,"auth-domain-config-required");const p=h.emulator?ge(h,jh):`https://${v.config.authDomain}/${Bh}`,E={apiKey:h.apiKey,appName:v.name,v:ie.SDK_VERSION},M=Hr.get(v.config.apiHost);M&&(E.eid=M);const U=v._getFrameworks();return U.length&&(E.fw=U.join(",")),`${p}?${(0,K.xO)(E).slice(1)}`}function Np(){return Np=(0,D.Z)(function*(v){const h=yield function Mp(v){return uc=uc||function Xo(v){return new Promise((h,p)=>{var E,M,U;function ee(){pl(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{pl(),p(pe(v,"network-request-failed"))},timeout:Zm.get()})}if(null!==(M=null===(E=rr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)h(gapi.iframes.getContext());else{if(null===(U=rr().gapi)||void 0===U||!U.load){const ce=Oo("iframefcb");return rr()[ce]=()=>{gapi.load?ee():p(pe(v,"network-request-failed"))},Ws(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Ve=>p(Ve))}ee()}}).catch(h=>{throw uc=null,h})}(v),uc}(v),p=rr().gapi;return Te(p,v,"internal-error"),h.open({where:document.body,url:wv(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aw,dontclear:!0},E=>new Promise(function(){var M=(0,D.Z)(function*(U,ee){yield E.restyle({setHideOnLeave:!1});const ce=pe(v,"network-request-failed"),Ve=rr().setTimeout(()=>{ee(ce)},Iv.get());function ot(){rr().clearTimeout(Ve),U(E)}E.ping(ot).then(ot,()=>{ee(ce)})});return function(U,ee){return M.apply(this,arguments)}}()))}),Np.apply(this,arguments)}const Tv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gs{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $h="__/auth/handler",dc="emulator/auth/handler",kp=encodeURIComponent("fac");function hc(v,h,p,E,M,U){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,D.Z)(function*(v,h,p,E,M,U){Te(v.config.authDomain,v,"auth-domain-config-required"),Te(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:E,v:ie.SDK_VERSION,eventId:M};if(h instanceof Zs){h.setDefaultLanguage(v.languageCode),ee.providerId=h.providerId||"",(0,K.xb)(h.getCustomParameters())||(ee.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ft,vt]of Object.entries(U||{}))ee[ft]=vt}if(h instanceof Ks){const ft=h.getScopes().filter(vt=>""!==vt);ft.length>0&&(ee.scopes=ft.join(","))}v.tenantId&&(ee.tid=v.tenantId);const ce=ee;for(const ft of Object.keys(ce))void 0===ce[ft]&&delete ce[ft];const Ve=yield v._getAppCheckToken(),ot=Ve?`#${kp}=${encodeURIComponent(Ve)}`:"";return`${function Ym({config:v}){return v.emulator?ge(v,dc):`https://${v.authDomain}/${$h}`}(v)}?${(0,K.xO)(ce).slice(1)}${ot}`})).apply(this,arguments)}const mi="webStorageSupport",ea=class zh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zo,this._completeRedirectFn=Co,this._overrideRedirectResult=Vs}_openPopup(h,p,E,M){var U=this;return(0,D.Z)(function*(){var ee;zt(null===(ee=U.eventManagers[h._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const ce=yield hc(h,p,E,qn(),M);return function Ki(v,h,p,E=500,M=600){const U=Math.max((window.screen.availHeight-M)/2,0).toString(),ee=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const Ve=Object.assign(Object.assign({},Tv),{width:E.toString(),height:M.toString(),top:U,left:ee}),ot=(0,K.z$)().toLowerCase();p&&(ce=hi(ot)?"_blank":p),Ht(ot)&&(h=h||"http://localhost",Ve.scrollbars="yes");const ft=Object.entries(Ve).reduce((ae,[_s,es])=>`${ae}${_s}=${es},`,"");if(function bt(v=(0,K.z$)()){var h;return Ge(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(ot)&&"_self"!==ce)return function Op(v,h){const p=document.createElement("a");p.href=v,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",ce),new gs(null);const vt=window.open(h||"",ce,ft);Te(vt,v,"popup-blocked");try{vt.focus()}catch{}return new gs(vt)}(h,ce,Ta())})()}_openRedirect(h,p,E,M){var U=this;return(0,D.Z)(function*(){return yield U._originValidation(h),function cd(v){rr().location.href=v}(yield hc(h,p,E,qn(),M)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:M,promise:U}=this.eventManagers[p];return M?Promise.resolve(M):(zt(U,"If manager is not set, promise should be"),U)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,D.Z)(function*(){const E=yield function lc(v){return Np.apply(this,arguments)}(h),M=new Sp(h);return E.register("authEvent",U=>(Te(U?.authEvent,h,"invalid-auth-event"),{status:M.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:M},p.iframes[h._key()]=E,M})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(mi,{type:mi},M=>{var U;const ee=null===(U=M?.[0])||void 0===U?void 0:U[mi];void 0!==ee&&p(!!ee),Fe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function oc(v){return yu.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return nn()||Vn()||Ge()}};class uw{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return Lt("unexpected MultiFactorSessionType")}}}class vd extends uw{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new vd(h)}_finalizeEnroll(h,p,E){return function wp(v,h){return Ue(v,"POST","/v2/accounts/mfaEnrollment:finalize",Oe(v,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function fd(v,h){return Ue(v,"POST","/v2/accounts/mfaSignIn:finalize",Oe(v,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ed=(()=>{class v{constructor(){}static assertion(p){return vd._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var Lp="@firebase/auth";class Id{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,D.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{h(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xr(){return window}(0,K.Pz)("authIdTokenMaxAge"),function ta(v){(0,ie._registerComponent)(new _e.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),M=h.getProvider("heartbeat"),U=h.getProvider("app-check-internal"),{apiKey:ee,authDomain:ce}=E.options;Te(ee&&!ee.includes(":"),"invalid-api-key",{appName:E.name});const Ve={apiKey:ee,authDomain:ce,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(v)},ot=new No(E,M,U,Ve);return function Za(v,h){const p=h?.persistence||[],E=(Array.isArray(p)?p:[p]).map(se);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(E,h?.popupRedirectResolver)}(ot,p),ot},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new _e.wA("auth-internal",h=>{const p=An(h.getProvider("auth").getImmediate());return new Id(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Lp,"1.3.2",function Qm(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ie.registerVersion)(Lp,"1.3.2","esm2017")}("Browser");function vu(){return vu=(0,D.Z)(function*(v,h,p){var E;const{BuildInfo:M}=xr();zt(h.sessionId,"AuthEvent did not contain a session ID");const U=yield function Da(v){return Kh.apply(this,arguments)}(h.sessionId),ee={};return Ge()?ee.ibi=M.packageName:Bi()?ee.apn=M.packageName:Fe(v,"operation-not-supported-in-this-environment"),M.displayName&&(ee.appDisplayName=M.displayName),ee.sessionId=U,hc(v,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,ee)}),vu.apply(this,arguments)}function Ai(){return(Ai=(0,D.Z)(function*(v){const{BuildInfo:h}=xr(),p={};Ge()?p.iosBundleId=h.packageName:Bi()?p.androidPackageName=h.packageName:Fe(v,"operation-not-supported-in-this-environment"),yield sc(v,p)})).apply(this,arguments)}function Zh(){return(Zh=(0,D.Z)(function*(v,h,p){const{cordova:E}=xr();let M=()=>{};try{yield new Promise((U,ee)=>{let ce=null;function Ve(){var vt;U();const ae=null===(vt=E.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof ae&&ae(),"function"==typeof p?.close&&p.close()}function ot(){ce||(ce=window.setTimeout(()=>{ee(pe(v,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===document?.visibilityState&&ot()}h.addPassiveListener(Ve),document.addEventListener("resume",ot,!1),Bi()&&document.addEventListener("visibilitychange",ft,!1),M=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",ft,!1),ce&&window.clearTimeout(ce)}})}finally{M()}})).apply(this,arguments)}function Kh(){return(Kh=(0,D.Z)(function*(v){const h=function Hp(v){if(zt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),p=new Uint8Array(h);for(let E=0;E<v.length;E++)p[E]=v.charCodeAt(E);return p}(v),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class mc extends Sp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,D.Z)(function*(){yield h.initPromise})()}}function ms(v){return _i.apply(this,arguments)}function _i(){return(_i=(0,D.Z)(function*(v){const h=yield ml()._get(_c(v));return h&&(yield ml()._remove(_c(v))),h})).apply(this,arguments)}function Gp(){const v=[];for(let p=0;p<20;p++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function ml(){return se(Zi)}function _c(v){return Et("authEvent",v.config.apiKey,v.name)}function zp(v){if(!v?.includes("?"))return{};const[h,...p]=v.split("?");return(0,K.zd)(p.join("?"))}const lw=class e_{constructor(){this._redirectPersistence=Zo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Co,this._overrideRedirectResult=Vs}_initialize(h){var p=this;return(0,D.Z)(function*(){const E=h._key();let M=p.eventManagers.get(E);return M||(M=new mc(h),p.eventManagers.set(E,M),p.attachCallbackListeners(h,M)),M})()}_openPopup(h){Fe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,M){var U=this;return(0,D.Z)(function*(){!function jp(v){var h,p,E,M,U,ee,ce,Ve,ot,ft;const vt=xr();Te("function"==typeof(null===(h=vt?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(typeof(null===(p=vt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(U=null===(M=null===(E=vt?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===U?void 0:U.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Ve=null===(ce=null===(ee=vt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Ve?void 0:Ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(ft=null===(ot=vt?.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===ft?void 0:ft.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const ee=yield U._initialize(h);yield ee.initialized(),ee.resetRedirect(),function Oh(){Jo.clear()}(),yield U._originValidation(h);const ce=function $p(v,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Gp(),postBody:null,tenantId:v.tenantId,error:pe(v,"no-auth-event")}}(h,E,M);yield function Aa(v,h){return ml()._set(_c(v),h)}(h,ce);const Ve=yield function Xm(v,h,p){return vu.apply(this,arguments)}(h,ce,p),ot=yield function Bp(v){const{cordova:h}=xr();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let M=null;E?h.plugins.browsertab.openUrl(v):M=h.InAppBrowser.open(v,function pt(v=(0,K.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),p(M)})})}(Ve);return function zn(v,h,p){return Zh.apply(this,arguments)}(h,ee,ot)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function pc(v){return Ai.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:M,BuildInfo:U}=xr(),ee=setTimeout((0,D.Z)(function*(){yield ms(h),p.onEvent(Dv())}),500),ce=function(){var ft=(0,D.Z)(function*(vt){clearTimeout(ee);const ae=yield ms(h);let _s=null;ae&&vt?.url&&(_s=function Cd(v,h){var p,E;const M=function Dd(v){const h=zp(v),p=h.link?decodeURIComponent(h.link):void 0,E=zp(p).link,M=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return zp(M).link||M||E||p||v}(h);if(M.includes("/__/auth/callback")){const U=zp(M),ee=U.firebaseError?function Yh(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(U.firebaseError)):null,ce=null===(E=null===(p=ee?.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ve=ce?pe(ce):null;return Ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(ae,vt.url)),p.onEvent(_s||Dv())});return function(ae){return ft.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const Ve=M,ot=`${U.packageName.toLowerCase()}://`;xr().handleOpenURL=function(){var ft=(0,D.Z)(function*(vt){if(vt.toLowerCase().startsWith(ot)&&ce({url:vt}),"function"==typeof Ve)try{Ve(vt)}catch(ae){console.error(ae)}});return function(vt){return ft.apply(this,arguments)}}()}};function Dv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function Eu(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Xh(v=(0,K.z$)()){return!("file:"!==Eu()&&"ionic:"!==Eu()&&"capacitor:"!==Eu()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ad(){try{const v=self.localStorage,h=Ta();if(v)return v.setItem(h,"1"),v.removeItem(h),!function yl(v=(0,K.z$)()){return function Do(){return(0,K.w1)()&&11===document?.documentMode}()||function ba(v=(0,K.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,K.hl)()}catch{return qe()&&(0,K.hl)()}return!1}function qe(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sr(){return(function _l(){return"http:"===Eu()||"https:"===Eu()}()||(0,K.ru)()||Xh())&&!function oi(){return(0,K.b$)()||(0,K.UG)()}()&&Ad()&&!qe()}function Yi(){return Xh()&&typeof document<"u"}function gt(){return(gt=(0,D.Z)(function*(){return!!Yi()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},nt=Te,we="persistence";function Mr(v){return ef.apply(this,arguments)}function ef(){return(ef=(0,D.Z)(function*(v){yield v._initializationPromise;const h=Ji(),p=Et(we,v.config.apiKey,v.name);h&&h.setItem(p,v._getPersistence())})).apply(this,arguments)}function Ji(){var v;try{return(null===(v=function Rt(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Zp=Te;class Sa{constructor(){this.browserResolver=se(ea),this.cordovaResolver=se(lw),this.underlyingResolver=null,this._redirectPersistence=Zo,this._completeRedirectFn=Co,this._overrideRedirectResult=Vs}_initialize(h){var p=this;return(0,D.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,M){var U=this;return(0,D.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openPopup(h,p,E,M)})()}_openRedirect(h,p,E,M){var U=this;return(0,D.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openRedirect(h,p,E,M)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Yi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,D.Z)(function*(){if(h.underlyingResolver)return;const p=yield function qp(){return gt.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function tf(v){return v.unwrap()}function bd(v){return Kp(v)}function Kp(v){const{_tokenResponse:h}=v instanceof K.ZR?v.customData:v;if(!h)return null;if(!(v instanceof K.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return cu.credentialFromResult(v);const p=h.providerId;if(!p||p===De.PASSWORD)return null;let E;switch(p){case De.GOOGLE:E=fa;break;case De.FACEBOOK:E=ds;break;case De.GITHUB:E=Ys;break;case De.TWITTER:E=Ln;break;default:const{oauthIdToken:M,oauthAccessToken:U,oauthTokenSecret:ee,pendingToken:ce,nonce:Ve}=h;return U||ee||M||ce?ce?p.startsWith("saml.")?tr._create(p,ce):Ur._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:M,accessToken:U}):new ks(p).credential({idToken:M,accessToken:U,rawNonce:Ve}):null}return v instanceof K.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Xi(v,h){return h.catch(p=>{throw p instanceof K.ZR&&function Sv(v,h){var p;const E=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Yp(v,function Xs(v,h){var p;const E=(0,K.m9)(v),M=h;return Te(h.customData.operationType,E,"argument-error"),Te(null===(p=M.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),Zl._fromError(E,M)}(v,h));else if(E){const M=Kp(h),U=h;M&&(U.credential=M,U.tenantId=E.tenantId||void 0,U.email=E.email||void 0,U.phoneNumber=E.phoneNumber||void 0)}}(v,p),p}).then(p=>{const M=p.user;return{operationType:p.operationType,credential:bd(p),additionalUserInfo:Fn(p),user:bn.getOrCreate(M)}})}function Gt(v,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,D.Z)(function*(v,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>Xi(v,p.confirm(E))}})).apply(this,arguments)}class Yp{constructor(h,p){this.resolver=p,this.auth=function bi(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Xi(tf(this.auth),this.resolver.resolveSignIn(h))}}class bn{constructor(h){this._delegate=h,this.multiFactor=function Th(v){const h=(0,K.m9)(v);return tl.has(h)||tl.set(h,el._fromUser(h)),tl.get(h)}(h)}static getOrCreate(h){return bn.USER_MAP.has(h)||bn.USER_MAP.set(h,new bn(h)),bn.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,D.Z)(function*(){return Xi(p.auth,Eh(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,D.Z)(function*(){return Gt(E.auth,function gd(v,h,p){return md.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,D.Z)(function*(){return Xi(p.auth,function nc(v,h,p){return ll.apply(this,arguments)}(p._delegate,h,Sa))})()}linkWithRedirect(h){var p=this;return(0,D.Z)(function*(){return yield Mr(An(p.auth)),Wm(p._delegate,h,Sa)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,D.Z)(function*(){return Xi(p.auth,Zu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Gt(this.auth,function uu(v,h,p){return so.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Xi(this.auth,function xh(v,h,p){return tc.apply(this,arguments)}(this._delegate,h,Sa))}reauthenticateWithRedirect(h){var p=this;return(0,D.Z)(function*(){return yield Mr(An(p.auth)),kh(p._delegate,h,Sa)})()}sendEmailVerification(h){return function Ih(v,h){return iu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,D.Z)(function*(){return yield function ga(v,h){return ma.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function L(v,h){return Ee((0,K.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function Q(v,h){return Ee((0,K.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ul(v,h){return Qo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function F(v,h){return x.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function wh(v,h,p){return Cr.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const Dt=Te;let yc=(()=>{class v{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=p.options;Dt(M,"invalid-api-key",{appName:p.name}),Dt(M,"invalid-api-key",{appName:p.name});const U=typeof window<"u"?Sa:void 0;this._delegate=E.initialize({options:{persistence:Qp(M,p.name),popupRedirectResolver:U}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function $u(v,h,p){const E=An(v);Te(E._canInitEmulator,E,"emulator-config-failed"),Te(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const M=!!p?.disableWarnings,U=$i(h),{host:ee,port:ce}=function ph(v){const h=$i(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const U=M[1];return{host:U,port:Gl(E.substr(U.length+1))}}{const[U,ee]=E.split(":");return{host:U,port:Gl(ee)}}}(h);E.config.emulator={url:`${U}//${ee}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ee,port:ce,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function gh(){function v(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,p,E)}applyActionCode(p){return function Go(v,h){return va.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ku(this._delegate,p)}confirmPasswordReset(p,E){return function $o(v,h,p){return ya.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var M=this;return(0,D.Z)(function*(){return Xi(M._delegate,function Di(v,h,p){return hr.apply(this,arguments)}(M._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ad(v,h){return zo.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function ut(v,h){const p=Br.parseLink(h);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,D.Z)(function*(){Dt(sr(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function mu(v,h){return fl.apply(this,arguments)}(p._delegate,Sa);return E?Xi(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Av(v,h){An(v)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,M){const{next:U,error:ee,complete:ce}=mn(p,E,M);return this._delegate.onAuthStateChanged(U,ee,ce)}onIdTokenChanged(p,E,M){const{next:U,error:ee,complete:ce}=mn(p,E,M);return this._delegate.onIdTokenChanged(U,ee,ce)}sendSignInLinkToEmail(p,E){return function ql(v,h,p){return Ni.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function wo(v,h,p){return ru.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,D.Z)(function*(){let M;switch(function Ze(v,h){nt(Object.values(Qi).includes(h),v,"invalid-persistence-type"),(0,K.b$)()?nt(h!==Qi.SESSION,v,"unsupported-persistence-type"):(0,K.UG)()?nt(h===Qi.NONE,v,"unsupported-persistence-type"):qe()?nt(h===Qi.NONE||h===Qi.LOCAL&&(0,K.hl)(),v,"unsupported-persistence-type"):nt(h===Qi.NONE||Ad(),v,"unsupported-persistence-type")}(E._delegate,p),p){case Qi.SESSION:M=Zo;break;case Qi.LOCAL:M=(yield se(ol)._isAvailable())?ol:Zi;break;case Qi.NONE:M=tt;break;default:return Fe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Xi(this._delegate,function zl(v){return Wu.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Xi(this._delegate,_a(this._delegate,p))}signInWithCustomToken(p){return Xi(this._delegate,function Qs(v,h){return Mi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Xi(this._delegate,function q(v,h,p){return _a((0,K.m9)(v),Zt.credential(h,p)).catch(function(){var E=(0,D.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Tr(v),M});return function(M){return E.apply(this,arguments)}}())}(this._delegate,p,E))}signInWithEmailLink(p,E){return Xi(this._delegate,function od(v,h,p){return Ft.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Gt(this._delegate,function al(v,h,p){return io.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,D.Z)(function*(){return Dt(sr(),E._delegate,"operation-not-supported-in-this-environment"),Xi(E._delegate,function Rh(v,h,p){return Ph.apply(this,arguments)}(E._delegate,p,Sa))})()}signInWithRedirect(p){var E=this;return(0,D.Z)(function*(){return Dt(sr(),E._delegate,"operation-not-supported-in-this-environment"),yield Mr(E._delegate),hl(E._delegate,p,Sa)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Me(v,h){return Rr.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Qi,v})();function mn(v,h,p){let E=v;"function"!=typeof v&&({next:E,error:h,complete:p}=v);const M=E;return{next:ee=>M(ee&&bn.getOrCreate(ee)),error:h,complete:p}}function Qp(v,h){const p=function bv(v,h){const p=Ji();if(!p)return[];const E=Et(we,v,h);switch(p.getItem(E)){case Qi.NONE:return[tt];case Qi.LOCAL:return[ol,Zo];case Qi.SESSION:return[Zo];default:return[]}}(v,h);if(typeof self<"u"&&!p.includes(ol)&&p.push(ol),typeof window<"u")for(const E of[Zi,Zo])p.includes(E)||p.push(E);return p.includes(tt)||p.push(tt),p}class jn{constructor(){this.providerId="phone",this._delegate=new cu(tf(g.Z.auth()))}static credential(h,p){return cu.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}jn.PHONE_SIGN_IN_METHOD=cu.PHONE_SIGN_IN_METHOD,jn.PROVIDER_ID=cu.PROVIDER_ID;const st=Te;class na{constructor(h,p,E=g.Z.app()){var M;st(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Tn(E.auth(),h,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vl(v){v.INTERNAL.registerComponent(new _e.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new yc(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zt,FacebookAuthProvider:ds,GithubAuthProvider:Ys,GoogleAuthProvider:fa,OAuthProvider:ks,SAMLAuthProvider:gr,PhoneAuthProvider:jn,PhoneMultiFactorGenerator:Ed,RecaptchaVerifier:na,TwitterAuthProvider:Ln,Auth:yc,AuthCredential:Fo,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.8")}(g.Z)},5861:(yt,be,B)=>{function D(K,ie,ue,oe,_e,He,De){try{var X=K[He](De),ne=X.value}catch(le){return void ue(le)}X.done?ie(ne):Promise.resolve(ne).then(oe,_e)}function g(K){return function(){var ie=this,ue=arguments;return new Promise(function(oe,_e){var He=K.apply(ie,ue);function De(ne){D(He,oe,_e,De,X,"next",ne)}function X(ne){D(He,oe,_e,De,X,"throw",ne)}De(void 0)})}}B.d(be,{Z:()=>g})},7582:(yt,be,B)=>{function ie(ge,ve){var xe={};for(var Ce in ge)Object.prototype.hasOwnProperty.call(ge,Ce)&&ve.indexOf(Ce)<0&&(xe[Ce]=ge[Ce]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ce=Object.getOwnPropertySymbols(ge);Oe<Ce.length;Oe++)ve.indexOf(Ce[Oe])<0&&Object.prototype.propertyIsEnumerable.call(ge,Ce[Oe])&&(xe[Ce[Oe]]=ge[Ce[Oe]])}return xe}function le(ge,ve,xe,Ce){return new(xe||(xe=Promise))(function(Ue,_t){function et(cn){try{At(Ce.next(cn))}catch(Ut){_t(Ut)}}function Zn(cn){try{At(Ce.throw(cn))}catch(Ut){_t(Ut)}}function At(cn){cn.done?Ue(cn.value):function Oe(Ue){return Ue instanceof xe?Ue:new xe(function(_t){_t(Ue)})}(cn.value).then(et,Zn)}At((Ce=Ce.apply(ge,ve||[])).next())})}function Ie(ge){return this instanceof Ie?(this.v=ge,this):new Ie(ge)}function Fe(ge,ve,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ce=xe.apply(ge,ve||[]),Ue=[];return Oe={},_t("next"),_t("throw"),_t("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function _t(Nn){Ce[Nn]&&(Oe[Nn]=function(Kn){return new Promise(function(Rn,In){Ue.push([Nn,Kn,Rn,In])>1||et(Nn,Kn)})})}function et(Nn,Kn){try{!function Zn(Nn){Nn.value instanceof Ie?Promise.resolve(Nn.value.v).then(At,cn):Ut(Ue[0][2],Nn)}(Ce[Nn](Kn))}catch(Rn){Ut(Ue[0][3],Rn)}}function At(Nn){et("next",Nn)}function cn(Nn){et("throw",Nn)}function Ut(Nn,Kn){Nn(Kn),Ue.shift(),Ue.length&&et(Ue[0][0],Ue[0][1])}}function We(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,ve=ge[Symbol.asyncIterator];return ve?ve.call(ge):(ge=function Be(ge){var ve="function"==typeof Symbol&&Symbol.iterator,xe=ve&&ge[ve],Ce=0;if(xe)return xe.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Ce>=ge.length&&(ge=void 0),{value:ge&&ge[Ce++],done:!ge}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),xe={},Ce("next"),Ce("throw"),Ce("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function Ce(Ue){xe[Ue]=ge[Ue]&&function(_t){return new Promise(function(et,Zn){!function Oe(Ue,_t,et,Zn){Promise.resolve(Zn).then(function(At){Ue({value:At,done:et})},_t)}(et,Zn,(_t=ge[Ue](_t)).done,_t.value)})}}}B.d(be,{FC:()=>Fe,KL:()=>We,_T:()=>ie,mG:()=>le,qq:()=>Ie}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=5569)}]);